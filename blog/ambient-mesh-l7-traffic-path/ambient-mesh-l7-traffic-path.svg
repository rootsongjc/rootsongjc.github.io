<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="1933 176 2250 1153" width="2250" height="1153">
  <defs>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black">
      <g>
        <path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
  </defs>
  <g id="Canvas__-L7" fill-opacity="1" stroke-opacity="1" stroke="none" stroke-dasharray="none" fill="none">
    <title>博客-L7</title>
    <rect fill="white" x="1933" y="176" width="2250" height="1153"/>
    <g id="Canvas__-L7_Layer_1">
      <title>Layer 1</title>
      <g id="Graphic_149">
        <rect x="1933.2284" y="176.7912" width="2249.6448" height="1151.6145" fill="white"/>
      </g>
      <g id="Graphic_87">
        <rect x="1964.4095" y="199.84252" width="566.92914" height="1105.5118" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(1969.4095 1280.8902)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Node A</tspan>
        </text>
      </g>
      <g id="Graphic_86">
        <rect x="3577.1457" y="199.84252" width="566.92914" height="1105.5118" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3582.1457 1280.8902)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Node B</tspan>
        </text>
      </g>
      <g id="Graphic_89">
        <title>ztunnel a pod</title>
        <rect x="1997.008" y="518.49865" width="501.7323" height="588.4305" fill="#f3f9ff"/>
        <rect x="1997.008" y="518.49865" width="501.7323" height="588.4305" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2002.008 1082.465)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Ztunnel A Pod</tspan>
        </text>
      </g>
      <g id="Graphic_88">
        <rect x="3611.87" y="422.3622" width="501.7323" height="529.7687" fill="#f3f9ff"/>
        <rect x="3611.87" y="422.3622" width="501.7323" height="529.7687" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3616.87 927.6668)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Ztunnel B Pod</tspan>
        </text>
      </g>
      <g id="Graphic_85">
        <rect x="2050.8342" y="236.69292" width="391.1811" height="68.0315" fill="#333"/>
        <rect x="2050.8342" y="236.69292" width="391.1811" height="68.0315" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2055.8342 241.69292)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="137.24655" y="16">Service A Pod</tspan>
        </text>
      </g>
      <g id="Graphic_84">
        <rect x="2050.8342" y="422.3622" width="391.1811" height="46.771654" fill="#dadada"/>
        <rect x="2050.8342" y="422.3622" width="391.1811" height="46.771654" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2055.8342 426.792)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="162.01455" y="16">istioout</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="139.43855" y="34.46411">192.168.127.1</tspan>
        </text>
      </g>
      <g id="Graphic_83">
        <rect x="2123.44" y="518.49865" width="245.96942" height="46.771654" fill="#dadada"/>
        <rect x="2123.44" y="518.49865" width="245.96942" height="46.771654" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2128.44 522.9284)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="84.52071" y="16">pistioout</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="66.83271" y="34.46411">192.168.127.2</tspan>
        </text>
      </g>
      <g id="Graphic_82">
        <rect x="2052.2835" y="630.7087" width="391.1811" height="365.6693" fill="white"/>
        <rect x="2052.2835" y="630.7087" width="391.1811" height="365.6693" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2057.2835 971.9139)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Envoy Proxy</tspan>
        </text>
      </g>
      <g id="Line_81">
        <line x1="2246.4248" y1="304.7244" x2="2246.4248" y2="322.03037" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_80">
        <line x1="2246.4248" y1="469.13386" x2="2246.4248" y2="508.59865" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_79">
        <line x1="2246.5495" y1="565.2703" x2="2246.8458" y2="620.8088" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_78">
        <rect x="3665.0197" y="236.69292" width="391.1811" height="68.0315" fill="#333"/>
        <rect x="3665.0197" y="236.69292" width="391.1811" height="68.0315" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 241.69292)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="137.09455" y="16">Service B Pod</tspan>
        </text>
      </g>
      <g id="Graphic_77">
        <rect x="3665.0197" y="1024.7244" width="391.1811" height="57.73376" fill="#dadada"/>
        <rect x="3665.0197" y="1024.7244" width="391.1811" height="57.73376" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 1034.6352)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="167.65455" y="16">istioin</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="139.43855" y="34.46411">192.168.126.1</tspan>
        </text>
      </g>
      <g id="Graphic_76">
        <rect x="3665.0197" y="462.5756" width="391.1811" height="199.75518" fill="white"/>
        <rect x="3665.0197" y="462.5756" width="391.1811" height="199.75518" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 637.8667)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Envoy Proxy</tspan>
        </text>
      </g>
      <g id="Graphic_75">
        <rect x="3744.39" y="554.50964" width="232.44095" height="34.990158" fill="#0a55a8"/>
        <text transform="translate(3749.39 562.27267)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="14.188474" y="16">Ztunnel_inbound Listener</tspan>
        </text>
      </g>
      <g id="Graphic_74">
        <rect x="3744.39" y="494.01656" width="232.44095" height="34.990158" fill="#0a55a8"/>
        <text transform="translate(3749.39 501.7796)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="22.196474" y="16">Virtual_inbound Cluster</tspan>
        </text>
      </g>
      <g id="Line_73">
        <line x1="3860.6103" y1="1249.9109" x2="3860.6103" y2="1092.3582" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_72">
        <line x1="3860.6103" y1="1024.7244" x2="3860.6103" y2="836.305" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_71">
        <line x1="3860.6103" y1="768.6712" x2="3860.6103" y2="750.977" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_70">
        <line x1="3860.6103" y1="554.50964" x2="3860.6103" y2="538.9067" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_69">
        <line x1="3860.6103" y1="422.3622" x2="3860.6103" y2="408.1654" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_67">
        <rect x="2131.6536" y="688.53165" width="232.44095" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(2136.6536 692.9728)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="8.548474" y="16">Ztunnel_outbound Listener</tspan>
        </text>
      </g>
      <g id="Graphic_66">
        <rect x="2131.6536" y="768.6712" width="232.44095" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(2136.6536 773.1124)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="45.436474" y="16">Service A Cluster</tspan>
        </text>
      </g>
      <g id="Graphic_65">
        <rect x="2131.6536" y="848.8107" width="232.44095" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(2136.6536 853.2519)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="9.316474" y="16">Internal Upstream Listener</tspan>
        </text>
      </g>
      <g id="Line_64">
        <line x1="2247.874" y1="716.8781" x2="2247.874" y2="758.7712" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_63">
        <rect x="2123.44" y="727.5661" width="243.07087" height="24.335999" fill="white"/>
        <text transform="translate(2128.44 732.5661)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="7.173431" y="11">Match the destination port and cluster IP</tspan>
        </text>
      </g>
      <g id="Graphic_62">
        <rect x="2131.6536" y="928.9503" width="232.44095" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(2136.6536 933.3915)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="16.244474" y="16">Outbound Tunnel Cluster</tspan>
        </text>
      </g>
      <g id="Line_61">
        <line x1="2247.874" y1="797.0177" x2="2247.874" y2="838.9107" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_60">
        <line x1="2247.874" y1="877.1572" x2="2247.874" y2="919.0503" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_59">
        <rect x="2126.3386" y="477.44794" width="243.07087" height="24.335999" fill="white"/>
        <text transform="translate(2131.3386 482.44794)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="77.85943" y="11">Geneva tunnel</tspan>
        </text>
      </g>
      <g id="Graphic_58">
        <rect x="2226.57" y="805.7558" width="42.608" height="24.335999" fill="white"/>
        <text transform="translate(2231.57 810.7558)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="4.526001" y="11">EDS</tspan>
        </text>
      </g>
      <g id="Graphic_57">
        <rect x="2052.2835" y="1250.0788" width="391.1811" height="28.346457" fill="#dadada"/>
        <rect x="2052.2835" y="1250.0788" width="391.1811" height="28.346457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2057.2835 1254.5199)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="173.99055" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_56">
        <rect x="2052.2835" y="581.985" width="391.1811" height="25.348083" fill="#f3f9ff"/>
        <text transform="translate(2057.2835 584.927)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="166.58255" y="16">tproxy</tspan>
        </text>
      </g>
      <g id="Graphic_55">
        <rect x="2196.9637" y="276.37796" width="98.92217" height="28.346457" fill="#dadada"/>
        <text transform="translate(2201.9637 280.81913)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="27.861086" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_54">
        <rect x="2050.8342" y="331.93037" width="391.1811" height="28.346457" fill="#dadada"/>
        <rect x="2050.8342" y="331.93037" width="391.1811" height="28.346457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2055.8342 336.37154)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="161.39055" y="16">vethxxx</tspan>
        </text>
      </g>
      <g id="Line_53">
        <line x1="2246.4248" y1="360.27682" x2="2246.4248" y2="412.4622" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_52">
        <rect x="2101.4568" y="366.6295" width="289.936" height="39.68408" fill="white"/>
        <text transform="translate(2106.4568 371.6295)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="12" fill="black" x="34.992002" y="12">iptables chain ztunnel-PREROUTING</tspan>
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="89.946" y="26.348083">mark 0x100/0x100</tspan>
        </text>
      </g>
      <g id="Graphic_51">
        <rect x="2212.498" y="630.7087" width="70.752" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(2217.498 635.14984)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="8.135999" y="16">15001</tspan>
        </text>
      </g>
      <g id="Graphic_50">
        <rect x="2179.4882" y="886.5422" width="136.77165" height="24.335999" fill="white"/>
        <text transform="translate(2184.4882 891.5422)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="10.933826" y="11">HTTP Tunnel config</tspan>
        </text>
      </g>
      <g id="Graphic_49">
        <rect x="2138.0315" y="1078.5827" width="219.68504" height="28.346457" fill="#dadada"/>
        <rect x="2138.0315" y="1078.5827" width="219.68504" height="28.346457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2143.0315 1083.0239)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="88.24252" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_48">
        <rect x="2052.2835" y="1132.441" width="391.1811" height="28.346457" fill="#dadada"/>
        <rect x="2052.2835" y="1132.441" width="391.1811" height="28.346457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2057.2835 1136.8821)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="161.39055" y="16">vethxxx</tspan>
        </text>
      </g>
      <g id="Line_47">
        <line x1="2247.874" y1="659.0551" x2="2247.874" y2="678.63165" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_46">
        <line x1="2247.874" y1="957.2968" x2="2247.874" y2="1068.6827" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_45">
        <rect x="2052.2835" y="1008.3204" width="391.1811" height="46.771654" fill="#f3f9ff"/>
        <path d="M 2052.2835 1008.3204 L 2443.4646 1008.3204 L 2443.4646 1055.092 L 2052.2835 1055.092 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(2057.2835 1012.7501)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="140.53455" y="16">init container</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="79.76655" y="34.46411">Setup iptables rules for ztunnel</tspan>
        </text>
      </g>
      <g id="Line_44">
        <line x1="2247.874" y1="1106.9291" x2="2247.874" y2="1122.541" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_43">
        <line x1="2247.874" y1="1160.7874" x2="2247.874" y2="1240.1788" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_42">
        <rect x="2052.2835" y="1180.0114" width="391.1811" height="50.6159" fill="white"/>
        <path d="M 2052.2835 1180.0114 L 2443.4646 1180.0114 L 2443.4646 1230.6273 L 2052.2835 1230.6273 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(2057.2835 1186.3633)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="157.72655" y="16">Istio CNI</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="38.558546" y="34.46411">Setup iptables rules and veth pair for node</tspan>
        </text>
      </g>
      <g id="Graphic_41">
        <rect x="3665.0197" y="1249.9109" width="391.1811" height="28.51436" fill="#dadada"/>
        <rect x="3665.0197" y="1249.9109" width="391.1811" height="28.51436" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 1254.436)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="173.99055" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_40">
        <rect x="3665.0197" y="1172.8936" width="391.1811" height="57.73376" fill="white"/>
        <path d="M 3665.0197 1172.8936 L 4056.201 1172.8936 L 4056.201 1230.6273 L 3665.0197 1230.6273 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(3670.0197 1182.8044)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="157.72655" y="16">Istio CNI</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="38.558546" y="34.46411">Setup iptables rules and veth pair for node</tspan>
        </text>
      </g>
      <g id="Graphic_39">
        <rect x="3665.0197" y="768.6712" width="391.1811" height="57.73376" fill="#dadada"/>
        <rect x="3665.0197" y="768.6712" width="391.1811" height="57.73376" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 778.582)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="162.76655" y="16">pistioin</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="139.43855" y="34.46411">192.168.126.2</tspan>
        </text>
      </g>
      <g id="Graphic_38">
        <rect x="3665.0197" y="849.7847" width="391.1811" height="57.73376" fill="#f3f9ff"/>
        <path d="M 3665.0197 849.7847 L 4056.201 849.7847 L 4056.201 907.5185 L 3665.0197 907.5185 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(3670.0197 859.6955)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="140.53455" y="16">init container</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="79.76655" y="34.46411">Setup iptables rules for ztunnel</tspan>
        </text>
      </g>
      <g id="Graphic_37">
        <rect x="3788.988" y="634" width="70" height="28" fill="#0a55a8"/>
        <text transform="translate(3793.988 638.26794)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="7.76" y="16">15006</tspan>
        </text>
      </g>
      <g id="Graphic_36">
        <rect x="3665.0197" y="731.622" width="391.1811" height="19.354975" fill="#f3f9ff"/>
        <text transform="translate(3670.0197 731.5674)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="166.58255" y="16">tproxy</tspan>
        </text>
      </g>
      <g id="Graphic_35">
        <rect x="3717.7683" y="1113.9259" width="289.936" height="39.68408" fill="white"/>
        <text transform="translate(3722.7683 1118.9259)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="12" fill="black" x="34.992002" y="12">iptables chain ztunnel-PREROUTING</tspan>
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="89.946" y="26.348083">mark 0x200/0x200</tspan>
        </text>
      </g>
      <g id="Graphic_34">
        <rect x="3739.075" y="972.042" width="243.07087" height="24.335999" fill="white"/>
        <text transform="translate(3744.075 977.042)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="77.85943" y="11">Geneva tunnel</tspan>
        </text>
      </g>
      <g id="Graphic_33">
        <rect x="3792.2244" y="422.3622" width="136.77165" height="21.25752" fill="#dadada"/>
        <rect x="3792.2244" y="422.3622" width="136.77165" height="21.25752" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3797.2244 423.2589)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="46.785826" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_32">
        <rect x="3811.149" y="276.37796" width="98.92217" height="28.346457" fill="#dadada"/>
        <text transform="translate(3816.149 280.81913)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="27.861086" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_31">
        <rect x="3665.0197" y="377.00788" width="391.1811" height="21.25752" fill="#dadada"/>
        <rect x="3665.0197" y="377.00788" width="391.1811" height="21.25752" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 377.9046)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="161.39055" y="16">vethxxx</tspan>
        </text>
      </g>
      <g id="Graphic_30">
        <rect x="3665.0197" y="330.2374" width="391.1811" height="21.25752" fill="#dadada"/>
        <rect x="3665.0197" y="330.2374" width="391.1811" height="21.25752" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(3670.0197 331.1341)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="161.39055" y="16">vethxxx</tspan>
        </text>
      </g>
      <g id="Line_29">
        <line x1="3860.6103" y1="377.00788" x2="3860.6103" y2="361.3949" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_28">
        <line x1="3860.6103" y1="330.2374" x2="3860.6103" y2="314.6244" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_26">
        <rect x="3859.307" y="633.9843" width="70.752" height="28.346457" fill="#0a55a8"/>
        <text transform="translate(3864.307 638.4255)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="8.135999" y="16">15008</tspan>
        </text>
      </g>
      <g id="Line_25">
        <path d="M 3860.6103 731.622 L 3860.6103 711.835 L 3894.683 711.835 L 3894.683 672.2308" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_24">
        <rect x="3865.628" y="682.527" width="58.11024" height="24.335999" fill="#f3f9ff"/>
        <text transform="translate(3870.628 687.527)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="13.387119" y="11">TLS</tspan>
        </text>
      </g>
      <g id="Line_23">
        <path d="M 3823.988 634 L 3823.988 611.7499 L 3860.6103 611.7499 L 3860.6103 599.3998" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_22">
        <path d="M 3894.683 633.9843 L 3894.683 611.74206 L 3860.6103 611.74206 L 3860.6103 599.3998" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_21">
        <line x1="3860.6103" y1="494.01656" x2="3860.6103" y2="453.51973" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_20">
        <path d="M 3860.6103 731.622 L 3860.6103 711.8641 L 3823.988 711.8641 L 3823.988 671.9" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_19">
        <rect x="3794.933" y="681.9459" width="58.11024" height="24.335999" fill="#f3f9ff"/>
        <text transform="translate(3799.933 686.9459)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="10.945119" y="11">Plain</tspan>
        </text>
      </g>
      <g id="Line_5">
        <line x1="2443.4646" y1="1264.2313" x2="2837.1463" y2="1264.1897" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_4">
        <text transform="translate(2560.722 1244.7475)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="13.624" y="16">HBONE Tunnel</tspan>
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="35.46411">Waypoint IP:15006</tspan>
        </text>
      </g>
      <g id="Line_3">
        <line x1="3238.2274" y1="1264.168" x2="3655.1197" y2="1264.168" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_2">
        <text transform="translate(3396.1964 1244.7039)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="1.192" y="16">HBONE Tunnel</tspan>
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="7673862e-19" y="35.46411">Pod B IP:15008</tspan>
        </text>
      </g>
      <g id="Graphic_130">
        <rect x="2754.4784" y="199.84252" width="566.92914" height="1105.5118" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2759.4784 1280.8902)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Node C</tspan>
        </text>
      </g>
      <g id="Graphic_129">
        <rect x="2787.0768" y="284.8819" width="501.7323" height="719.7366" fill="#f3f9ff"/>
        <rect x="2787.0768" y="284.8819" width="501.7323" height="719.7366" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2792.0768 980.1543)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="16">Waypoint Proxy B Pod</tspan>
        </text>
      </g>
      <g id="Graphic_127">
        <rect x="2847.0463" y="1049.8478" width="391.1811" height="57.73376" fill="#dadada"/>
        <rect x="2847.0463" y="1049.8478" width="391.1811" height="57.73376" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2852.0463 1059.7586)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="167.65455" y="16">istioin</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="139.43855" y="34.46411">192.168.126.1</tspan>
        </text>
      </g>
      <g id="Line_123">
        <line x1="3042.637" y1="1249.9109" x2="3042.637" y2="1117.4815" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_122">
        <line x1="3042.637" y1="1049.8478" x2="3042.637" y2="916.4445" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_121">
        <line x1="3042.637" y1="848.8107" x2="3042.637" y2="832.5917" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_118">
        <rect x="2847.0463" y="1249.9109" width="391.1811" height="28.51436" fill="#dadada"/>
        <rect x="2847.0463" y="1249.9109" width="391.1811" height="28.51436" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2852.0463 1254.436)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="173.99055" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_116">
        <rect x="2847.0463" y="848.8107" width="391.1811" height="57.73376" fill="#dadada"/>
        <rect x="2847.0463" y="848.8107" width="391.1811" height="57.73376" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2852.0463 858.7216)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="162.76655" y="16">pistioin</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="139.43855" y="34.46411">192.168.126.2</tspan>
        </text>
      </g>
      <g id="Graphic_115">
        <rect x="2847.0463" y="928.9503" width="391.1811" height="43.04011" fill="#f3f9ff"/>
        <path d="M 2847.0463 928.9503 L 3238.2274 928.9503 L 3238.2274 971.9904 L 2847.0463 971.9904 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(2852.0463 931.5143)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="140.53455" y="16">init container</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="79.76655" y="34.46411">Setup iptables rules for ztunnel</tspan>
        </text>
      </g>
      <g id="Graphic_113">
        <rect x="2847.0463" y="813.2367" width="391.1811" height="19.354975" fill="#f3f9ff"/>
        <text transform="translate(2852.0463 813.1821)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="166.58255" y="16">tproxy</tspan>
        </text>
      </g>
      <g id="Graphic_112">
        <rect x="2899.795" y="1126.7721" width="289.936" height="39.68408" fill="white"/>
        <text transform="translate(2904.795 1131.7721)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="12" fill="black" x="34.992002" y="12">iptables chain ztunnel-PREROUTING</tspan>
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="89.946" y="26.348083">mark 0x200/0x200</tspan>
        </text>
      </g>
      <g id="Graphic_111">
        <rect x="2921.1015" y="1015.0651" width="243.07087" height="24.335999" fill="white"/>
        <text transform="translate(2926.1015 1020.0651)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="77.85943" y="11">Geneva tunnel</tspan>
        </text>
      </g>
      <g id="Graphic_107">
        <rect x="2897.669" y="284.79794" width="289.936" height="28.51436" fill="#dadada"/>
        <rect x="2897.669" y="284.79794" width="289.936" height="28.51436" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2902.669 289.32307)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="123.368" y="16">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_17">
        <rect x="2847.0463" y="333.07087" width="391.1811" height="463.5665" fill="white"/>
        <rect x="2847.0463" y="333.07087" width="391.1811" height="463.5665" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2852.0463 769.6374)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="0" y="17">E</tspan>
          <tspan font-family="PingFang SC" font-weight="bold" font-size="16" fill="black" y="17">nvoy Proxy</tspan>
        </text>
      </g>
      <g id="Graphic_16">
        <rect x="2881.3288" y="723.677" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 727.77975)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="2.836136" y="16">inbound_CONNECT_terminate Listnener</tspan>
        </text>
      </g>
      <g id="Graphic_15">
        <rect x="2881.3288" y="677.6678" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 681.7705)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="48.924136" y="16">Internal Inbound VIP Cluster</tspan>
        </text>
      </g>
      <g id="Graphic_14">
        <rect x="2881.3288" y="622.06" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 626.16274)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="76.90814" y="16">Inbound VIP Listener</tspan>
        </text>
      </g>
      <g id="Graphic_13">
        <rect x="2881.3288" y="566.4523" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 570.555)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="80.31614" y="16">Inbound VIP Cluster</tspan>
        </text>
      </g>
      <g id="Graphic_12">
        <rect x="2881.3288" y="409.0636" width="322.61626" height="27.833443" fill="#0a55a8"/>
        <text transform="translate(2886.3288 414.0636)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="10.396136" y="16">inbound_CONNECT_originate Listener</tspan>
        </text>
      </g>
      <g id="Graphic_11">
        <rect x="2881.3288" y="356.32757" width="322.61626" height="27.833443" fill="#0a55a8"/>
        <text transform="translate(2886.3288 361.32757)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="13.804136" y="16">inbound_CONNECT_originate Cluster</tspan>
        </text>
      </g>
      <g id="Line_10">
        <line x1="3042.637" y1="723.677" x2="3042.637" y2="715.2373" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_9">
        <line x1="3042.637" y1="677.6678" x2="3042.637" y2="659.6296" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_8">
        <line x1="3042.637" y1="622.06" x2="3042.637" y2="604.0218" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_6">
        <line x1="3042.637" y1="409.0636" x2="3042.637" y2="394.061" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_90">
        <rect x="2881.3288" y="514.044" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 518.14673)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="74.53214" y="16">Inbound Pod Listener</tspan>
        </text>
      </g>
      <g id="Graphic_91">
        <rect x="2881.3288" y="461.63576" width="322.61626" height="27.66955" fill="#0a55a8"/>
        <text transform="translate(2886.3288 465.7385)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="77.94014" y="16">Inbound Pod Cluster</tspan>
        </text>
      </g>
      <g id="Graphic_93">
        <rect x="2974.251" y="769.6863" width="135.968" height="27.331368" fill="#0a55a8"/>
        <text transform="translate(2979.251 773.6199)" fill="white">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="white" x="40.744" y="16">15006</tspan>
        </text>
      </g>
      <g id="Line_132">
        <line x1="3042.637" y1="813.2367" x2="3042.637" y2="806.9095" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_133">
        <line x1="3042.637" y1="566.4523" x2="3042.637" y2="551.61356" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_134">
        <line x1="3042.637" y1="514.044" x2="3042.637" y2="499.2053" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_135">
        <line x1="3042.637" y1="461.63576" x2="3042.637" y2="446.79705" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_136">
        <line x1="3042.235" y1="769.6863" x2="3042.235" y2="761.2384" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_137">
        <line x1="3042.637" y1="356.32757" x2="3042.637" y2="323.2123" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_138">
        <rect x="2847.0463" y="236.69292" width="391.1811" height="28.346457" fill="#dadada"/>
        <rect x="2847.0463" y="236.69292" width="391.1811" height="28.346457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(2852.0463 241.1341)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="161.39055" y="16">vethxxx</tspan>
        </text>
      </g>
      <g id="Line_139">
        <path d="M 3042.637 284.79794 L 3042.637 274.91866 L 3042.637 274.96063 L 3042.637 274.93937" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Line_143">
        <path d="M 3238.2274 250.86614 L 3305.0946 250.86614 L 3305.0946 1145.3704 L 3202.2765 1145.3704 L 3202.2765 1240.0109" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
      </g>
      <g id="Graphic_144">
        <text transform="translate(3256.2716 232.41815)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="7.416" y="15">To</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="0" y="33.448">eth0</tspan>
        </text>
      </g>
      <g id="Graphic_145">
        <text transform="translate(3052.8642 658.3318)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="2.4831344" y="11">STATIC</tspan>
        </text>
      </g>
      <g id="Graphic_146">
        <text transform="translate(3052.8642 547.83465)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="4.526001" y="11">EDS</tspan>
        </text>
      </g>
      <g id="Graphic_147">
        <text transform="translate(3052.8642 442.95276)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="2.4831344" y="11">STATIC</tspan>
        </text>
      </g>
      <g id="Graphic_148">
        <text transform="translate(3048.6122 338.07087)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" fill="black" x="4.967499" y="11">ORIGINAL_DST</tspan>
        </text>
      </g>
      <g id="Graphic_117">
        <rect x="2847.0463" y="1172.8936" width="391.1811" height="57.73376" fill="white"/>
        <path d="M 2847.0463 1172.8936 L 3238.2274 1172.8936 L 3238.2274 1230.6273 L 2847.0463 1230.6273 Z" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4.0,4.0" stroke-width="1"/>
        <text transform="translate(2852.0463 1182.8044)" fill="black">
          <tspan font-family="Helvetica Neue" font-weight="bold" font-size="16" fill="black" x="157.72655" y="16">Istio CNI</tspan>
          <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="38.558546" y="34.46411">Setup iptables rules and veth pair for node</tspan>
        </text>
      </g>
    </g>
  </g>
</svg>
