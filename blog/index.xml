
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jimmy Song â€“ åšå®¢</title>
    <link>https://jimmysong.io/blog/</link>
    <description>Recent content in åšå®¢ on Jimmy Song</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <managingEditor>Jimmy Song</managingEditor>
    <webMaster>Jimmy Song</webMaster>
    
      <follow_challenge>
        <feedId>51621818828612637</feedId>
        <userId>59800919738273792</userId>
      </follow_challenge>
    
    
    
	  <atom:link href="https://jimmysong.io/blog/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
                                                         
    
                                                   
                           
    <item>
      <title>KubeCon EU 2025 å‚ä¼šæŠ¥å‘Šï¼šå¡‘é€ äº‘åŸç”Ÿæ ¼å±€çš„æ´å¯Ÿä¸è¶‹åŠ¿</title>
      <link>https://jimmysong.io/blog/kubecon-eu-2025-london-recap/</link>
      <pubDate>Sun, 13 Apr 2025 19:22:45 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/kubecon-eu-2025-london-recap/</guid>
      <description>
        
        
        &lt;p&gt;ä¸Šå‘¨ï¼Œæˆ‘äº²è‡ªå‰å¾€ä¼¦æ•¦å‚åŠ äº† &lt;a href=&#34;https://events.linuxfoundation.org/kubecon-cloudnativecon-europe/&#34; title=&#34;KubeCon &amp;#43; CloudNativeCon Europe 2025&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;KubeCon + CloudNativeCon Europe 2025&lt;/a&gt;ï¼Œè¿™æ˜¯äº‘åŸç”Ÿé¢†åŸŸä¸€å¹´ä¸€åº¦çš„ç››ä¼šã€‚ä»Šå¹´çš„å¤§ä¼šæ±‡èšäº†è¶…è¿‡ 12,500 åå¼€å‘è€…ã€ç»´æŠ¤è€…å’Œç”¨æˆ·ï¼Œåœºé¢çƒ­çƒˆã€è¯é¢˜æ·±åº¦åè¶³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½åœ°æ€»ç»“è¿™æ¬¡å¤§ä¼šçš„å†…å®¹å’Œè¶‹åŠ¿ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä»½ &lt;strong&gt;HTML/PDF æ ¼å¼çš„æŠ¥å‘Š&lt;/strong&gt;ï¼Œå¯¹é‡ç‚¹ä¸»é¢˜è¿›è¡Œäº†å½’çº³ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AI åœ¨ Kubernetes ä¸­çš„è½åœ°ä¸è¶‹åŠ¿&lt;/li&gt;
&lt;li&gt;å®‰å…¨ç­–ç•¥æ¼”è¿›ï¼ˆä¾›åº”é“¾ã€èº«ä»½ä¿¡ä»»ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;å¹³å°å·¥ç¨‹ä»å·¥å…·èµ°å‘ä½“éªŒä¸æŒ‡æ ‡&lt;/li&gt;
&lt;li&gt;å¤šé›†ç¾¤ä¸è¾¹ç¼˜è®¡ç®—çš„ç°å®åº”ç”¨&lt;/li&gt;
&lt;li&gt;å¯æŒç»­æ€§ä¸ç»¿è‰²è®¡ç®—çš„å‘¼å£°å¢å¼º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ‘‰ &lt;a href=&#34;https://jimmysong.io/files/zh/kubecon-eu-2025-london-recap.html&#34; title=&#34;ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š&#34;&gt;&lt;strong&gt;ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¬¢è¿ä½ é˜…è¯»æŠ¥å‘Šï¼Œä¹Ÿæ¬¢è¿é€šè¿‡è¯„è®ºã€é‚®ä»¶ç­‰æ–¹å¼ä¸æˆ‘äº¤æµä½ å¯¹å¤§ä¼šè¶‹åŠ¿çš„çœ‹æ³•ï¼&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¢ç´¢ GitHub Copilotï¼šå½“ AI æˆä¸ºä½ çš„è´´èº«ç¼–ç åŠ©æ‰‹</title>
      <link>https://jimmysong.io/blog/mastering-github-copilot-for-open-source/</link>
      <pubDate>Thu, 27 Mar 2025 14:57:27 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/mastering-github-copilot-for-open-source/</guid>
      <description>
        
        
        &lt;p&gt;è¿‡å»ä¸€å¹´ä¸­ï¼Œæˆ‘ä¸€ç›´äº«æœ‰ GitHub Copilot çš„å…è´¹ä½¿ç”¨èµ„æ ¼ï¼Œä½†æ˜¯ç”±äºç§ç§åŸå› ï¼Œæˆ‘å¹¶æ²¡æœ‰æ·±å…¥åœ°ä½¿ç”¨å®ƒã€‚æœ€è¿‘çœ‹åˆ°äº† GitHub å®˜æ–¹å‘å¸ƒçš„ä¸€ç¯‡å…³äº Copilot çš„åšå®¢&lt;a href=&#34;https://github.blog/ai-and-ml/github-copilot/mastering-github-copilot-when-to-use-ai-agent-mode/&#34; title=&#34;ã€ŠMastering GitHub Copilot: When to use AI agent modeã€‹&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã€ŠMastering GitHub Copilot: When to use AI agent modeã€‹&lt;/a&gt;ï¼Œè®©æˆ‘å¯¹å¦‚ä½•æ›´å¥½åœ°ä½¿ç”¨ Copilot æœ‰äº†æ–°çš„çµæ„Ÿå’Œæ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘å¯¹ Copilot å¼ºå¤§åŠŸèƒ½çš„ç†è§£ï¼Œå°¤å…¶æ˜¯ &lt;strong&gt;Copilot Edits&lt;/strong&gt; å’Œ &lt;strong&gt;Agent Mode&lt;/strong&gt; è¿™ä¸¤ä¸ªæ¨¡å¼ä¹‹é—´çš„å·®å¼‚å’Œä½¿ç”¨åœºæ™¯ã€‚æœ€åï¼Œæˆ‘è¿˜æƒ³å‘¼åæ‰€æœ‰å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ï¼šå¦‚æœä½ ç¬¦åˆæ¡ä»¶ï¼Œä¸€å®šè¦å»ç§¯æç”³è¯· Copilot å…è´¹ä½¿ç”¨èµ„æ ¼ï¼Œè®©è‡ªå·±çš„å¼€å‘æ•ˆç‡æ›´ä¸Šä¸€ä¸ªå°é˜¶ï¼&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆä½ çš„-ai-è¾…åŠ©å†™ç å¥½åƒä¸ç»™åŠ›&#34;&gt;ä¸ºä»€ä¹ˆä½ çš„ AI è¾…åŠ©å†™ç å¥½åƒâ€œä¸ç»™åŠ›â€ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¤§å¤šæ•°å¼€å‘è€…åœ¨æ¥è§¦ AI è¾…åŠ©ç¼–ç å·¥å…·ï¼ˆæ¯”å¦‚ GitHub Copilotï¼‰æ—¶ï¼Œéƒ½ä¼šæˆ–å¤šæˆ–å°‘åœ°é‡åˆ°ä¸€äº›çŠ¶å†µï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”Ÿæˆçš„ä»£ç å’Œä½ æ‰€éœ€çš„åŠŸèƒ½â€œå·®é‚£ä¹ˆä¸€ç‚¹â€ï¼›&lt;/li&gt;
&lt;li&gt;éœ€è¦åœ¨å¤šä¸ªæ–‡ä»¶é—´è·³æ¥è·³å»ä¿®æ”¹ï¼Œå´å¸Œæœ› AI èƒ½è‡ªåŠ¨å¸®å¿™â€œé€šç›˜è€ƒè™‘â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶å®ï¼Œè¿™äº›å°æŒ«æŠ˜å¾€å¾€ä¸åœ¨äºå·¥å…·æœ¬èº«ï¼Œè€Œåœ¨äº&lt;strong&gt;ä½ æ˜¯å¦æ‰¾å¯¹äº†ä½¿ç”¨æ–¹å¼&lt;/strong&gt;ã€‚GitHub Copilot å†…éƒ¨åŒ…å«å¤šä¸ªä¾§é‡ç‚¹å„ä¸ç›¸åŒçš„åŠŸèƒ½ï¼Œå®ƒä»¬å„è‡ªé€‚åˆåœ¨ä¸åŒçš„æƒ…æ™¯ä¸‹ä½¿ç”¨ã€‚&lt;strong&gt;æ­£ç¡®åœ°é€‰æ‹©åˆé€‚çš„åŠŸèƒ½ï¼Œå°±æ˜¯è§£é” Copilot çœŸæ­£å®åŠ›çš„å…³é”®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;copilot-editså¿«é€Ÿç²¾ç¡®çš„å¾®è°ƒ&#34;&gt;Copilot Editsï¼šå¿«é€Ÿç²¾ç¡®çš„â€œå¾®è°ƒâ€&lt;/h2&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ—¶å€™ç”¨å®ƒ&#34;&gt;ä»€ä¹ˆæ—¶å€™ç”¨å®ƒï¼Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°èŒƒå›´çš„ä¿®å¤ï¼šä¿®å¤ä¸€ä¸ªå‡½æ•°çš„ bugã€‚&lt;/li&gt;
&lt;li&gt;é‡æ„ç‰¹å®šæ¨¡å—ï¼šç»™å‡½æ•°æˆ–ç»„ä»¶åšå±€éƒ¨ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;åšè·¨æ–‡ä»¶çš„ä¸€è‡´æ€§æ”¹åŠ¨ï¼šä¾‹å¦‚ç»Ÿä¸€æ—¥å¿—æ‰“å°æ ¼å¼ï¼Œæˆ–è€…ç»Ÿä¸€å˜é‡å‘½åæ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Copilot Edits çš„åŠŸèƒ½å°±åƒæ˜¯ç»™ä½ é…å¤‡äº†ä¸€ä¸ªèƒ½è¯»æ‡‚ä¸Šä¸‹æ–‡çš„â€œè¶…çº§ç¼–è¾‘å™¨â€ã€‚ä½ å¯ä»¥å¿«é€Ÿå‘å‡ºå‘½ä»¤ï¼Œè®©å®ƒåœ¨&lt;strong&gt;æœ‰é™èŒƒå›´&lt;/strong&gt;å†…å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹åŠ¨ï¼Œå¹¶åœ¨æäº¤å‰æŸ¥çœ‹ &lt;code&gt;diff&lt;/code&gt;ï¼Œéšæ—¶ä¿æŒå¯¹æ”¹åŠ¨çš„æŒæ§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;agent-modeä½ çš„å¤šæ–‡ä»¶å¤§ç®¡å®¶&#34;&gt;Agent Modeï¼šä½ çš„â€œå¤šæ–‡ä»¶å¤§ç®¡å®¶â€&lt;/h2&gt;
&lt;p&gt;ä¸ Copilot Edits ç›¸æ¯”ï¼Œ&lt;strong&gt;Agent Mode&lt;/strong&gt; æ›´åƒæ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®è§‚ç»Ÿç­¹å…¨å±€çš„ AI åŠ©æ‰‹ã€‚å®ƒä¸åªæ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œç»™ä½ æå»ºè®®ï¼Œæ›´å¯ä»¥å»ä½ çš„æ•´ä¸ªé¡¹ç›®é‡Œåšæ·±åº¦æœç´¢ã€è‡ªåŠ¨æ‰¾å‡ºä¾èµ–å…³ç³»ã€åˆ›å»ºæˆ–ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼Œç”šè‡³å¯ä»¥å¸®ä½ åœ¨ç»ˆç«¯é‡Œè¿è¡Œå‘½ä»¤ã€ç¼–è¯‘ã€æµ‹è¯•é¡¹ç›®ç­‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€‚åˆçš„ä½¿ç”¨åœºæ™¯&#34;&gt;é€‚åˆçš„ä½¿ç”¨åœºæ™¯&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå®Œæ•´åŠŸèƒ½&lt;/strong&gt;ï¼šå¦‚â€œä¸ºåº”ç”¨æ·»åŠ å…¨å±€çš„äº‹ä»¶è·Ÿè¸ªâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£å’Œæµè§ˆé™Œç”Ÿé¡¹ç›®&lt;/strong&gt;ï¼šå¦‚â€œå¸®æˆ‘ææ‡‚è¿™ä¸ªé¡¹ç›®é‡Œè®¤è¯ç³»ç»Ÿæ˜¯æ€ä¹ˆè¿ä½œçš„â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•´åˆæµ‹è¯•&lt;/strong&gt;ï¼šå¦‚â€œä¸º &lt;code&gt;UserService&lt;/code&gt; å†™æµ‹è¯•å¹¶ç¡®ä¿å…¨éƒ¨é€šè¿‡â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦è¿è¡Œå¤§é‡ç»ˆç«¯æ“ä½œ&lt;/strong&gt;ï¼šå¦‚â€œåˆ›å»ºæ–°çš„ React + TS + Redux + styled-components é¡¹ç›®â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚çš„é‡æ„&lt;/strong&gt;ï¼šå¦‚â€œç»Ÿä¸€æ›¿æ¢æ‰€æœ‰ API è°ƒç”¨å¹¶åŠ å…¥æ–°çš„é”™è¯¯å¤„ç†é€»è¾‘â€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æˆ‘åœ¨ä¸ªäººç½‘ç«™ä¸Šçš„åº”ç”¨åœºæ™¯&#34;&gt;æˆ‘åœ¨ä¸ªäººç½‘ç«™ä¸Šçš„åº”ç”¨åœºæ™¯&lt;/h4&gt;
&lt;p&gt;åšä¸»ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ï¼‰åœ¨ç»™ä¸ªäººç½‘ç«™çš„ GitHub Action ä¸­å¢åŠ ä¸€ä¸ªæ›´æ–°ç´¢å¼•æ–‡ä»¶çš„å·¥ä½œï¼Œå¯ä»¥å‘Šè¯‰ Copilot Agentï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œç»™æˆ‘çš„ GitHub Action ä¸­å¢åŠ ä¸€ä¸ªæ›´æ–° search index çš„ä»»åŠ¡å¹¶åœ¨æœ¬åœ°æµ‹è¯•â€&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ç„¶å Copilot Agent ä¼šæ‰«ææˆ‘çš„ä»£ç åº“ï¼Œèªæ˜åœ°åœ¨æˆ‘çš„ GitHub Action é…ç½®æ–‡ä»¶ä¸­å¸®æˆ‘æ’å…¥ç›¸åº”çš„ä»»åŠ¡ï¼Œå¹¶ä¼šè‡ªåŠ¨çš„å®‰è£…ä¾èµ–è½¯ä»¶å¹¶è¿è¡Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/mastering-github-copilot-for-open-source/github-copilot-agent.webp&#34; data-img=&#34;/blog/mastering-github-copilot-for-open-source/github-copilot-agent.webp&#34; data-width=&#34;1920&#34; data-height=&#34;1144&#34; alt=&#34;image&#34; data-caption=&#34;VS Code ä¸­çš„ Copilot Action&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;VS Code ä¸­çš„ Copilot Action&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™å°±æ˜¯ Agent Mode çš„å¼ºå¤§ä¹‹å¤„ï¼Œå®ƒå¯ä»¥&lt;strong&gt;ä¸€æ¬¡æ€§å¤„ç†å…¨å±€çº§åˆ«&lt;/strong&gt;çš„æ”¹åŠ¨ï¼ŒçœŸæ­£è®© AI æˆä¸ºä½ çš„â€œå¯¹ç­‰â€å¼€å‘ä¼™ä¼´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ¸å¿ƒä¼˜åŠ¿&#34;&gt;æ ¸å¿ƒä¼˜åŠ¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ£€ç´¢æ•´ä¸ªä»£ç åº“&lt;/strong&gt;ï¼šä¸ç”¨æ‰‹åŠ¨å®šä½æ‰€æœ‰ç›¸å…³æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæˆ‘è¿­ä»£&lt;/strong&gt;ï¼šå¯ä»¥ä¸€æ¬¡æ€§è¿­ä»£å’Œä¿®å¤è‡ªå·±ç”Ÿæˆçš„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»ˆç«¯å‘½ä»¤æ‰§è¡Œ&lt;/strong&gt;ï¼šåœ¨å¾—åˆ°ä½ æˆæƒåï¼Œä¼šè‡ªåŠ¨è·‘å‘½ä»¤ã€ç¼–è¯‘æˆ–æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŒæ•´ä½“æ¶æ„ä¸€è‡´&lt;/strong&gt;ï¼šåœ¨æ”¹åŠ¨æ—¶ä¼šè€ƒè™‘è·¨æ–‡ä»¶ä¾èµ–å…³ç³»ï¼Œå‡å°‘é¡¾æ­¤å¤±å½¼çš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;chat-çª—å£ä½ çš„copilot-æŒ‡æŒ¥ä¸­å¿ƒ&#34;&gt;Chat çª—å£ï¼šä½ çš„â€œCopilot æŒ‡æŒ¥ä¸­å¿ƒâ€&lt;/h2&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯æƒ³ä½¿ç”¨ Copilot Edits è¿˜æ˜¯ Agent Modeï¼Œä½ éƒ½ä¼šç”¨åˆ° VS Code é‡Œçš„ &lt;strong&gt;Copilot Chat&lt;/strong&gt; çª—å£ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æé—®å¸¸è§„æŠ€æœ¯é—®é¢˜ï¼Œæ¯”å¦‚ï¼šâ€œå¦‚ä½•åœ¨ Node.js ä¸­å®ç° JWT è®¤è¯ï¼Ÿâ€&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;/explain&lt;/code&gt; ç†è§£å¤æ‚ä»£ç ç‰‡æ®µã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;/fix&lt;/code&gt; è®© Copilot å¸®ä½ è°ƒè¯•ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;/tests&lt;/code&gt; ä¸ºç»™å®šä»£ç è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;éšæ—¶åœ¨ Edits å’Œ Agent Mode ä¹‹é—´åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®°ä½ï¼š&lt;strong&gt;ä½ æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¶Šå®Œæ•´ï¼ŒCopilot ç”Ÿæˆçš„å›ç­”å°±è¶Šå‡†ç¡®&lt;/strong&gt;ã€‚è¯·ä¸è¦åå•¬ç»™å®ƒå¤šä¸€äº›æç¤ºï¼&lt;/p&gt;
&lt;h2 id=&#34;äºŒè€…å¹¶ä¸å†²çªæ··åˆä½¿ç”¨æ‰æ˜¯ç‹é“&#34;&gt;äºŒè€…å¹¶ä¸å†²çªâ€”â€”æ··åˆä½¿ç”¨æ‰æ˜¯ç‹é“&lt;/h2&gt;
&lt;p&gt;åŸæ–‡ä¸­å¼ºè°ƒäº†ä¸€ç‚¹ï¼š&lt;strong&gt;Copilot Edits å’Œ Agent Mode å¹¶ä¸æ˜¯äºŒé€‰ä¸€çš„å¯¹ç«‹å…³ç³»ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦å¿«é€Ÿä¿®å¤å’Œå¾®è°ƒæ—¶ï¼Œé€‰ Copilot Editsï¼›&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦åšå¤šæ–‡ä»¶æ”¹åŠ¨ã€å¢åŠ å¤§å‹åŠŸèƒ½æ¨¡å—æˆ–è·‘ç»ˆç«¯å‘½ä»¤ç­‰ï¼Œå¯ç”¨ Agent Modeã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AI åªæ˜¯è¾…åŠ©ï¼Œæˆ‘ä»¬æ‰æ˜¯é¡¹ç›®çš„ä¸»å¯¼è€…ï¼Œæ— è®ºåœ¨ä»»ä½•æ¨¡å¼ä¸‹ï¼Œä½ éƒ½éšæ—¶æ‹¥æœ‰æœ€ç»ˆçš„å†³å®šæƒã€‚&lt;strong&gt;ä¸ AI åä½œçš„å…³é”®æ˜¯ï¼šåœ¨å‘èµ·éœ€æ±‚æ—¶ç¡®ä¿â€œæ„å›¾â€è¶³å¤Ÿæ¸…æ™°ï¼Œå¹¶åœ¨ç”Ÿæˆä»£ç åè‡ªè¡Œè¿›è¡Œå¿…è¦çš„å®¡æŸ¥å’Œæµ‹è¯•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å¼€å¯-copilot-edits-å’Œ-agent-mode&#34;&gt;å¦‚ä½•å¼€å¯ Copilot Edits å’Œ Agent Mode&lt;/h2&gt;
&lt;h3 id=&#34;copilot-edits&#34;&gt;Copilot Edits&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ VS Code ä¸­æ‰“å¼€ Copilot Chat çª—å£ã€‚&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»ã€ŒEdit with Copilotã€æŒ‰é’®ï¼Œè¿›å…¥ Edits è§†å›¾ã€‚&lt;/li&gt;
&lt;li&gt;æŠŠéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åŠ å…¥å·¥ä½œé›†ï¼ˆworking setï¼‰ï¼Œæœªçº³å…¥å·¥ä½œé›†çš„æ–‡ä»¶é»˜è®¤ä¸ä¼šè¢«ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;å‘ Copilot å‘å‡ºä¿®æ”¹éœ€æ±‚ï¼Œæ¯”å¦‚â€œè¯·æŠŠç”¨æˆ·éªŒè¯é€»è¾‘æ”¹æˆåŸºäº JWT çš„æ–¹å¼ï¼Œå¹¶æŠŠç›¸å…³å‡½æ•°å‘½åç»Ÿä¸€ä¸º &lt;code&gt;verifyUserToken&lt;/code&gt;â€ã€‚&lt;/li&gt;
&lt;li&gt;æ¥å—ä¿®æ”¹å‰ï¼Œä¸€å®šè¦æŸ¥çœ‹ &lt;code&gt;diff&lt;/code&gt;ï¼Œç¡®è®¤æ— è¯¯åå†ç‚¹ã€Œæ¥å—æ›´æ”¹ã€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;agent-mode&#34;&gt;Agent Mode&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;éœ€ä½¿ç”¨ &lt;a href=&#34;https://code.visualstudio.com/insiders/&#34; title=&#34;VS Code 1.99&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;VS Code 1.99&lt;/a&gt; æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Copilot Chat ä¸­å°†æ¨¡å¼åˆ‡æ¢ä¸ºã€ŒAgentã€ã€‚&lt;/li&gt;
&lt;li&gt;æè¿°ä½ æƒ³å®ç°çš„å¤æ‚åŠŸèƒ½ï¼Œä¾‹å¦‚â€œåˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ‰“å­—æœºåŠ¨ç”»ã€ä¸Šä¸‹å‘½ä»¤å†å²ã€tab è¡¥å…¨ã€ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½çš„ Terminal ç•Œé¢ã€‚â€&lt;/li&gt;
&lt;li&gt;Copilot ä¼šåœ¨åç«¯è‡ªåŠ¨è¿­ä»£å¹¶æå‡ºæ”¹åŠ¨å»ºè®®ï¼Œä½ éœ€è¦å¯¹æ¯ä¸€æ­¥æ”¹åŠ¨è¿›è¡Œå®¡æ ¸å¹¶å†³å®šæ˜¯å¦æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å¦‚éœ€ä¸ªæ€§åŒ–å®šåˆ¶ï¼Œå¯åœ¨ VS Code ä¸­é’ˆå¯¹å·¥ç¨‹çš„ç‰¹å®šéœ€æ±‚ç¼–å†™è‡ªå®šä¹‰æç¤ºï¼ˆcustom instructionsï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å·å¬å¼€æºè´¡çŒ®è€…å¯å…è´¹ä½¿ç”¨-github-copilot&#34;&gt;å·å¬ï¼šå¼€æºè´¡çŒ®è€…å¯å…è´¹ä½¿ç”¨ GitHub Copilot&lt;/h2&gt;
&lt;p&gt;åœ¨å›½å†…å¤–ï¼Œä½ çš„ä¸ªäººå’Œå›¢é˜Ÿå¦‚æœå¯¹å¼€æºç¤¾åŒºæœ‰è´¡çŒ®â€”â€”æ¯”å¦‚åœ¨ GitHub ä¸Šç»´æŠ¤æˆ–ç§¯æå‚ä¸å¼€æºé¡¹ç›®ï¼Œå°±æœ‰æœºä¼š&lt;strong&gt;å…è´¹ç”³è¯· GitHub Copilot&lt;/strong&gt;ï¼Œè¿™å¯¹æé«˜å·¥ä½œæ•ˆç‡ã€è®©å›¢é˜Ÿæ›´ä¸“æ³¨äºå…³é”®ä¸šåŠ¡é€»è¾‘è€Œè¨€éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/features/copilot/plans&#34; title=&#34;ç”³è¯·åœ°å€ï¼ˆCopilot for Open Sourceï¼‰&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç”³è¯·åœ°å€ï¼ˆCopilot for Open Sourceï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å»ºè®®æŠŠä½ çš„ GitHub Profileã€å¼€æºé¡¹ç›®é“¾æ¥ã€è´¡çŒ®åº¦ã€Stars ç­‰ä¿¡æ¯å‡†å¤‡å¥½ï¼Œç”³è¯·é€šè¿‡åå°±å¯ä»¥ä½“éªŒåˆ° Copilot çš„å¼ºå¤§åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ«æ‹…å¿ƒï¼&lt;/strong&gt; åªè¦ä½ ç¡®å®ä¸ºå¼€æºç”Ÿæ€åšå‡ºè¿‡è´¡çŒ®ï¼ŒGitHub å®˜æ–¹æ˜¯å¾ˆé¼“åŠ±ä½ å»ç”³è¯· Copilot çš„å…è´¹ä½¿ç”¨èµ„æ ¼çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¯¥å…è´¹èµ„æ ¼æ˜¯æŒ‰æœˆèµ‹äºˆçš„ï¼&lt;/p&gt;
&lt;h2 id=&#34;ç»“è¯­æ‹¥æŠ±-ai-å·¥å…·è®©å¼€å‘æ›´é«˜æ•ˆ&#34;&gt;ç»“è¯­ï¼šæ‹¥æŠ± AI å·¥å…·ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆ&lt;/h2&gt;
&lt;p&gt;ä»æœ€åˆçš„ GitHub Copilot åˆ°å¦‚ä»Šé€æ¸æ¶Œç°çš„å„ç§ AI ç¼–ç¨‹å·¥å…·ï¼Œæ¯”å¦‚ &lt;strong&gt;Cursor&lt;/strong&gt;ã€&lt;strong&gt;Amazon CodeWhisperer&lt;/strong&gt;ã€&lt;strong&gt;Google Gemini Code Assist&lt;/strong&gt;ã€ä»¥åŠåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„å„ç§æ’ä»¶ç­‰ç­‰ï¼ŒAI ç¼–ç¨‹åŠ©æ‰‹å·²ç»ä¸å†æ˜¯æ–°é²œäº‹ã€‚&lt;strong&gt;Cursor&lt;/strong&gt; çš„ç‰¹ç‚¹åœ¨äºæä¾›ç±»ä¼¼ IDE çš„ç¯å¢ƒï¼Œå¯ç›´æ¥åœ¨å…¶ç¼–è¾‘å™¨é‡Œé›†æˆå¯¹è¯å¼çš„ AI è¾…åŠ©ï¼›Replit çš„ &lt;strong&gt;Ghostwriter&lt;/strong&gt; åˆ™å……åˆ†åˆ©ç”¨ Replit åœ¨çº¿ç¼–ç¨‹ç¯å¢ƒçš„ä¼˜åŠ¿ï¼Œä¸ºå¤šäººåä½œå’Œå®æ—¶é¢„è§ˆæä¾›æå¤§æ–¹ä¾¿ã€‚å’Œ Copilot ç›¸æ¯”ï¼Œè¿™äº›å·¥å…·å¯èƒ½åœ¨å¯¹è¯äº¤äº’æ·±åº¦ã€ä»£ç è´¨é‡ã€æˆ–å¯¹ç‰¹å®šè¯­è¨€å’Œç”Ÿæ€çš„æ”¯æŒèŒƒå›´ä¸Šå„æœ‰æ‰€é•¿ã€‚ä½†æ€»ä½“è€Œè¨€ï¼Œå®ƒä»¬éƒ½åœ¨è®©å¼€å‘è€…æ‘†è„±é‚£äº›å†—æ‚ã€é‡å¤ã€æœºæ¢°çš„ç¼–ç¨‹å·¥ä½œï¼Œä»è€Œè…¾å‡ºæ›´å¤šæ—¶é—´å’Œç²¾åŠ›è¿›è¡Œæ¶æ„å’Œåˆ›æ–°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;â€œAI ä¸ä¼šå–ä»£ç¨‹åºå‘˜ï¼Œä½†ä¼šå–ä»£é‚£äº›æ‹’ç»ä¸ AI åˆä½œçš„ç¨‹åºå‘˜ã€‚â€&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨æˆ–å³å°†æŠ•å…¥å¼€æºé¡¹ç›®çš„å¼€å‘ï¼Œæˆ–è€…åœ¨å•†ä¸šé¡¹ç›®ä¸­æƒ³è¦æŒ–æ˜æ›´å¤šé«˜é˜¶ç”Ÿäº§åŠ›ï¼Œéƒ½æ¨èä½ å»å°è¯•å¹¶æ·±å…¥å­¦ä¹ è¿™äº› AI ç¼–ç¨‹å·¥å…·ã€‚åœ¨ &lt;a href=&#34;https://github.com/features/copilot&#34; title=&#34;GitHub å®˜æ–¹æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub å®˜æ–¹æ–‡æ¡£&lt;/a&gt; ä¸­ï¼Œä½ è¿˜å¯ä»¥æ‰¾åˆ°ä¸€ä»½ä»å…¥é—¨åˆ°è¿›é˜¶çš„ Copilot æ•™ç¨‹ç³»åˆ—â€”â€”ä»æœ€åˆçš„å®‰è£…åˆ°é«˜çº§ç”¨æ³•ï¼Œè®©ä½ å¿«é€ŸæŒæ¡ Copilot çš„ç²¾é«“ã€‚ä¹Ÿæ¬¢è¿è¯•ç”¨å…¶ä»–åŒç±»å·¥å…·ï¼Œå¯¹æ¯”å„ç§åŠŸèƒ½ä¼˜ç¼ºç‚¹ï¼Œæ¢ç´¢é€‚åˆè‡ªå·±å›¢é˜Ÿçš„å·¥ä½œæµã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ± AIï¼Œåšæ›´é«˜æ•ˆçš„å¼€å‘è€…å§ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹ AI ç¼–ç¨‹ã€äº‘åŸç”Ÿå’Œå¼€æºæŠ€æœ¯æ„Ÿå…´è¶£ï¼Œä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„ä¸ªäººåšå®¢ &lt;a href=&#34;https://jimmysong.io/&#34; title=&#34;jimmysong.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;jimmysong.io&lt;/a&gt;ï¼Œä¸€èµ·äº¤æµè®¨è®ºã€‚&lt;strong&gt;ç¥å¤§å®¶ç¼–ç æ„‰å¿«ï¼Œæ•ˆç‡å€å¢ï¼&lt;/strong&gt;&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>è¶…è¶Š Sidecarï¼šæ·±å…¥è§£æ Istio Ambient Mode çš„æµé‡æœºåˆ¶ä¸æˆæœ¬æ•ˆç›Š</title>
      <link>https://jimmysong.io/blog/beyond-sidecar/</link>
      <pubDate>Sat, 22 Mar 2025 14:45:55 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/beyond-sidecar/</guid>
      <description>
        
        
        &lt;p&gt;æ¬¢è¿é˜…è¯»æˆ‘çš„è¿™ç¯‡åšå®¢â€”â€”â€œè¶…è¶Š Sidecarï¼šæ·±å…¥è§£æ Istio Ambient Mode çš„æµé‡æœºåˆ¶ä¸æˆæœ¬æ•ˆç›Šâ€ã€‚æœ¬æ–‡å†…å®¹æºè‡ªæˆ‘åœ¨ KCD åŒ—äº¬çš„ä¸€æ¬¡æ¼”è®²ã€‚ä¸»è¦æ¢è®¨çš„æ˜¯ Istio å…¨æ–°æ¨å‡ºçš„ä¸€ç§æ•°æ®é¢æ¨¡å¼ â€”â€” &lt;strong&gt;Ambient Mode&lt;/strong&gt;ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯å»é™¤ Sidecarï¼Œå‡å°‘èµ„æºå¼€é”€ä¸è¿ç»´å¤æ‚åº¦ã€‚æœ¬æ–‡å°†å¸¦å¤§å®¶äº†è§£ Ambient Mode çš„å‡ºç°èƒŒæ™¯ã€æ ¸å¿ƒç»„ä»¶ã€æµé‡è·¯å¾„æœºåˆ¶ä»¥åŠä¸ç°æœ‰ Sidecar æ¨¡å¼çš„å¯¹æ¯”ï¼Œä»è€Œå¸®åŠ©ä½ å¿«é€Ÿè¯„ä¼°å¹¶ä¸Šæ‰‹è¿™é¡¹æ–°ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://jimmysong.io/slide/beyond-sidecar/&#34; title=&#34;ç‚¹å‡»æŸ¥çœ‹å¹»ç¯ç‰‡&#34;&gt;ç‚¹å‡»æŸ¥çœ‹å¹»ç¯ç‰‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆå…³æ³¨-ambient-mode&#34;&gt;ä¸ºä»€ä¹ˆå…³æ³¨ Ambient Modeï¼Ÿ&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦å…³æ³¨ã€ç”šè‡³å°è¯•è¿™ç§æ–°æ¨¡å¼ï¼ŸSidecar åœ¨æœåŠ¡ç½‘æ ¼é‡Œä¸€ç›´éƒ½ç”¨å¾—å¥½å¥½çš„ï¼Œä¸ºä»€ä¹ˆè¦â€œå» Sidecarâ€å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹å½“å‰æœåŠ¡ç½‘æ ¼é¢ä¸´çš„ä¸€äº›é—®é¢˜å’ŒæŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœåŠ¡ç½‘æ ¼çš„æŒ‘æˆ˜&#34;&gt;æœåŠ¡ç½‘æ ¼çš„æŒ‘æˆ˜&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Sidecar ä»£ç†å¸¦æ¥çš„ &lt;strong&gt;èµ„æºå¼€é”€&lt;/strong&gt; å’Œ &lt;strong&gt;è¿ç»´å¤æ‚åº¦&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡çº§&lt;/strong&gt; æˆ– &lt;strong&gt;é‡å¯&lt;/strong&gt; Envoy æ—¶ï¼Œå¸¸å¸¸éœ€è¦è¿å¸¦é‡å¯æ‰€æœ‰ Pod&lt;/li&gt;
&lt;li&gt;è¶Šæ¥è¶Šå¤šå¯¹ &lt;strong&gt;é«˜æ€§èƒ½ã€ä½æˆæœ¬&lt;/strong&gt; çš„éœ€æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ€è€ƒ&lt;/strong&gt;ï¼šæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼åœ¨ä¿ç•™æœåŠ¡ç½‘æ ¼æ ¸å¿ƒèƒ½åŠ›ï¼ˆå®‰å…¨ã€å¯è§‚æµ‹ã€æµé‡æ§åˆ¶ï¼‰çš„åŒæ—¶ï¼Œå‡å°‘å¯¹æ¯ä¸ª Pod çš„ä¾µå…¥å’Œé¢å¤–èµ„æºæ¶ˆè€—ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;æœåŠ¡ç½‘æ ¼çš„å‡ ç§éƒ¨ç½²æ¨¡å¼&#34;&gt;æœåŠ¡ç½‘æ ¼çš„å‡ ç§éƒ¨ç½²æ¨¡å¼&lt;/h3&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/proxy-location.svg&#34; data-img=&#34;/blog/beyond-sidecar/proxy-location.svg&#34; alt=&#34;image&#34; data-caption=&#34;ä»£ç†çš„ä½ç½®&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ä»£ç†çš„ä½ç½®&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼æ¶æ„ä¸€ç›´åœ¨æ¢ç´¢ä»£ç†éƒ¨ç½²ä½ç½®çš„å¤šç§å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Sidecar&lt;/strong&gt;ï¼šæ¯ä¸ª Pod å†…è·‘ä¸€ä¸ª Envoyã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ambient&lt;/strong&gt;ï¼šå°†ä»£ç†ä» Pod ä¸­å‰¥ç¦»åˆ°èŠ‚ç‚¹çº§ï¼ˆå³æœ¬ç¯‡è¦è°ˆçš„æ¨¡å¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium Mesh&lt;/strong&gt;ï¼šåˆ©ç”¨ eBPF åœ¨å†…æ ¸ç©ºé—´åš L4ï¼Œç„¶åç»“åˆ Envoy æä¾› L7 åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gRPC&lt;/strong&gt;ï¼šç›´æ¥å°†ç½‘æ ¼èƒ½åŠ›é›†æˆåˆ° SDK ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›æ¨¡å¼åœ¨åŠŸèƒ½ã€å®‰å…¨ã€æ€§èƒ½å’Œç®¡ç†å¤æ‚åº¦ä¸Šéƒ½æœ‰ä¸åŒçš„ä¾§é‡ã€‚&lt;strong&gt;Istio Ambient Mode&lt;/strong&gt; åˆ™æ˜¯é’ˆå¯¹ Sidecar å¸¦æ¥çš„é«˜èµ„æºæ¶ˆè€—å’Œè¿ç»´æˆæœ¬ï¼Œè€Œæå‡ºçš„æ–°å°è¯•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ambient-mode-çš„è¯ç”Ÿ&#34;&gt;Ambient Mode çš„è¯ç”Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Istio çš„æ–°ä¸€ä»£æ¶æ„ï¼Œ&lt;strong&gt;ç§»é™¤ Sidecar&lt;/strong&gt;ï¼Œé€šè¿‡ &lt;strong&gt;ztunnel + Waypoint Proxy&lt;/strong&gt; å®ç°æ•°æ®é¢çš„è½»é‡åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;èŠ‚çœèµ„æºã€é™ä½è¿ç»´å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;li&gt;ä¾ç„¶æ”¯æŒ &lt;strong&gt;mTLSã€ç­–ç•¥ç®¡æ§&lt;/strong&gt;ï¼Œå¹¶ä¸ºéœ€è¦ L7 åŠŸèƒ½çš„æµé‡æä¾›å¯é€‰çš„ &lt;strong&gt;Waypoint Proxy&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/istio-data-plane-deployment-modes.svg&#34; data-img=&#34;/blog/beyond-sidecar/istio-data-plane-deployment-modes.svg&#34; alt=&#34;image&#34; data-caption=&#34;éƒ¨ç½²æ¨¡å¼è±¡é™&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;éƒ¨ç½²æ¨¡å¼è±¡é™&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä»¥ä¸‹è¡¨æ ¼æ˜¯å¯¹æ¯”å¸¸è§æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ¨¡å¼çš„ä¸€äº›ç®€è¦ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;æ•ˆç‡&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;å¯ç®¡ç†æ€§&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Sidecar æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é«˜å®‰å…¨æ€§ï¼Œéš”ç¦»çš„ä»£ç†&lt;/td&gt;
          &lt;td&gt;èµ„æºä½¿ç”¨ç‡é«˜&lt;/td&gt;
          &lt;td&gt;é›†ä¸­åŒ–ç®¡ç†ä½†è¾ƒä¸ºå¤æ‚&lt;/td&gt;
          &lt;td&gt;å¢åŠ ä¸€å®šå»¶è¿Ÿ&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Ambient æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é€šè¿‡ ztunnel æä¾›å®‰å…¨æ€§ï¼Œä»åœ¨å‘å±•ä¸­&lt;/td&gt;
          &lt;td&gt;æ›´é«˜æ•ˆï¼Œå…±äº«ä»£ç†&lt;/td&gt;
          &lt;td&gt;ç®¡ç†æ›´ç®€å•ä½†åŠŸèƒ½åœ¨å®Œå–„ä¸­&lt;/td&gt;
          &lt;td&gt;è‰¯å¥½ï¼›è·¨å¯ç”¨åŒºæ—¶éœ€æ³¨æ„ç½‘ç»œå¼€é”€&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Cilium mesh&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸­ç­‰å®‰å…¨æ€§ï¼ŒåŸºäº eBPF&lt;/td&gt;
          &lt;td&gt;å†…æ ¸çº§æ•ˆç‡&lt;/td&gt;
          &lt;td&gt;é…ç½®å¤æ‚&lt;/td&gt;
          &lt;td&gt;å¯è§†åœºæ™¯ä¸åŒè€Œå¼‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;gRPC&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;åº”ç”¨é›†æˆå®‰å…¨ï¼Œä¾èµ–åº”ç”¨è‡ªèº«&lt;/td&gt;
          &lt;td&gt;é«˜æ•ˆ&lt;/td&gt;
          &lt;td&gt;æ›´æ–°ç®¡ç†å¤æ‚&lt;/td&gt;
          &lt;td&gt;ä½å»¶è¿Ÿï¼Œé€‚ç”¨äºå®æ—¶åœºæ™¯&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;istio-ambient-mode-æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;Istio Ambient Mode æ ¸å¿ƒæ¦‚å¿µ&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ­£å¼è¿›å…¥ç¬¬äºŒéƒ¨åˆ†ï¼Œæ·±å…¥çœ‹çœ‹ Ambient Mode çš„å…·ä½“ç»„ä»¶ï¼ŒåŒ…æ‹¬ ztunnelã€Waypoint Proxy ä»¥åŠ Istio CNI åœ¨å…¶ä¸­æ‰®æ¼”çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ambient-mode-çš„æ ¸å¿ƒç»„ä»¶&#34;&gt;Ambient Mode çš„æ ¸å¿ƒç»„ä»¶&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ztunnel (L4)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ Node çº§ä»£ç†çš„æ–¹å¼è¿è¡Œ&lt;/li&gt;
&lt;li&gt;è´Ÿè´£ &lt;strong&gt;é€æ˜æµé‡æ‹¦æˆª&lt;/strong&gt;ã€&lt;strong&gt;mTLS&lt;/strong&gt; åŠ å¯†&lt;/li&gt;
&lt;li&gt;é€‚ç”¨äºå¤§éƒ¨åˆ†åªéœ€ L4 è½¬å‘çš„æµé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Waypoint Proxy (L7)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯é€‰éƒ¨ç½²ï¼ˆæ ¹æ®å‘½åç©ºé—´ / Service / Pod ç²’åº¦çµæ´»é…ç½®ï¼‰&lt;/li&gt;
&lt;li&gt;å¤„ç† &lt;strong&gt;HTTP / gRPC&lt;/strong&gt; ç­‰é«˜çº§åŠŸèƒ½ï¼ˆé‰´æƒã€è·¯ç”±ã€å¯è§‚æµ‹ç­‰ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio CNI&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å–ä»£ &lt;code&gt;istio-init&lt;/code&gt; å®¹å™¨ï¼Œè´Ÿè´£æµé‡åŠ«æŒ&lt;/li&gt;
&lt;li&gt;å…¼å®¹ Sidecar æ¨¡å¼å’Œ Ambient æ¨¡å¼&lt;/li&gt;
&lt;li&gt;å…è®¸åœ¨éç‰¹æƒæ¨¡å¼ä¸‹ä¸º Pod è®¾ç½®æµé‡é‡å®šå‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ambient-æ¨¡å¼æ•´ä½“æ¶æ„&#34;&gt;Ambient æ¨¡å¼æ•´ä½“æ¶æ„&lt;/h3&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/istio-ambient-layers.svg&#34; data-img=&#34;/blog/beyond-sidecar/istio-ambient-layers.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio Ambient æ¨¡å¼æ¶æ„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio Ambient æ¨¡å¼æ¶æ„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨ Ambient æ¨¡å¼ä¸‹ï¼ŒIstio æ•°æ®é¢å¯åˆ†ä¸ºä¸¤å±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å±‚ (ztunnel)&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ¨ç½²ä¸€ä¸ªè½»é‡çº§ L4 ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é€‰çš„ L7 å±‚ (Waypoint Proxy)&lt;/strong&gt;ï¼šéœ€è¦ HTTP/gRPC ä»£ç†æ—¶æ‰éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Control Plane ä¾ç„¶ç”± Istiod æä¾›ï¼Œä¸»è¦è´Ÿè´£ç»™ ztunnelã€Waypoint ä¸‹å‘é…ç½®å’Œè¯ä¹¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;waypoint-proxy-éƒ¨ç½²ç­–ç•¥&#34;&gt;Waypoint Proxy éƒ¨ç½²ç­–ç•¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Namespace çº§&lt;/strong&gt;ï¼ˆé»˜è®¤ï¼‰ï¼šé€‚ç”¨äºè¯¥å‘½åç©ºé—´ä¸‹æ‰€æœ‰ Workload&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Service çº§&lt;/strong&gt;ï¼šä»…ç‰¹å®šå…³é”®æœåŠ¡éœ€è¦ L7&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pod çº§&lt;/strong&gt;ï¼šæ›´ç²¾ç»†åŒ–æ§åˆ¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨ Namespace&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ Gateway èµ„æºå…±äº«&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;istio-cni&#34;&gt;Istio CNI&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµé‡æ‹¦æˆª&lt;/strong&gt;ï¼šå–ä»£ &lt;code&gt;istio-init&lt;/code&gt; å®¹å™¨ï¼Œä½¿å®‰è£…æ›´åŠ æ¸…æ™°ç®€æ´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒä¸¤ç§æ¨¡å¼&lt;/strong&gt;ï¼šå…¼å®¹ &lt;strong&gt;Sidecar æ¨¡å¼&lt;/strong&gt; å’Œ &lt;strong&gt;Ambient æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éç‰¹æƒæ¨¡å¼å…¼å®¹æ€§&lt;/strong&gt;ï¼šå…è®¸ Pod è¿è¡Œåœ¨æ— ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNI é“¾æ¥ï¼ˆChainingï¼‰&lt;/strong&gt;ï¼šé€šè¿‡æ·»åŠ  Istio CNI æ‰©å±•èŠ‚ç‚¹çš„ CNI é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pod å†…éƒ¨æµé‡é‡å®šå‘ï¼ˆAmbient æ¨¡å¼ï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨ Pod çš„ç½‘ç»œå‘½åç©ºé—´å†…ä½¿ç”¨ &lt;code&gt;iptables REDIRECT&lt;/code&gt; è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»º Pod å†…éƒ¨çš„ socket ä»¥æ‹¦æˆªå’Œä»£ç†æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å¼ å›¾ç®€å•ç¤ºæ„äº† Istio CNI å¦‚ä½•ä¸ Kubernetes æœ¬èº«çš„ç½‘ç»œæ’ä»¶ï¼ˆå¦‚ Calicoã€Cilium ç­‰ï¼‰ç»„åˆåœ¨ä¸€èµ·ã€‚å®ƒä¿®æ”¹äº†æœ¬æœºçš„ CNI é…ç½®ï¼Œå¢åŠ äº† CNI é“¾ï¼Œåœ¨ Kubernetes åˆ†é…å®Œ Pod IP åï¼Œç´§æ¥ç€å°±ä¼šæ‰§è¡Œ Istio CNI çš„æ‹¦æˆªé€»è¾‘ï¼ŒæŠŠç½‘ç»œæµé‡è§„åˆ™æ³¨å…¥åˆ° Pod netnsã€‚å¹¶ä¸”ä¸ºä¸åŒæ¨¡å¼ä¸­ Pod é…ç½®ä¸åŒçš„ iptables è§„åˆ™ã€‚
è¿™æ ·å°±ä¸åŸæœ¬çš„ CNI é…ç½®ï¼ˆåŒ…æ‹¬ç½‘ç»œç­–ç•¥ï¼‰å½¢æˆä¸€ä¸ªé“¾å¼æµç¨‹ï¼Œä¸ä¼šç›¸äº’å†²çªã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/istio-cni.svg&#34; data-img=&#34;/blog/beyond-sidecar/istio-cni.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio CNI æ’ä»¶çš„è¿è¡Œæ­¥éª¤&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio CNI æ’ä»¶çš„è¿è¡Œæ­¥éª¤&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;istio-cni-æ’ä»¶å·¥ä½œåŸç†&#34;&gt;Istio CNI æ’ä»¶å·¥ä½œåŸç†&lt;/h3&gt;
&lt;p&gt;è¿™å¼ å›¾è¯¦ç»†æç»˜äº†å½“ Pod å¯åŠ¨æ—¶ï¼ŒIstio CNI ä¼šæ€ä¹ˆåšï¼š&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/istio-cni-diagram.svg&#34; data-img=&#34;/blog/beyond-sidecar/istio-cni-diagram.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio CNI æ’ä»¶å·¥ä½œåŸç†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio CNI æ’ä»¶å·¥ä½œåŸç†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;å®ƒä¼šè¿›å…¥ Pod çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œåˆ›å»ºä¸€å¥— iptables è§„åˆ™ï¼ŒæŠŠæµé‡åŠ«æŒåˆ° ztunnel ç›‘å¬çš„ socket ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;ä¸å†éœ€è¦åœ¨æ¯ä¸ª Pod é‡Œæ³¨å…¥ init å®¹å™¨ï¼Œä¹Ÿä¸éœ€è¦ç‰¹æƒæƒé™ï¼Œè¿™å°±è®©æ•´ä½“éƒ¨ç½²æ›´å¹²å‡€ã€ä¹Ÿæ›´å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;ztunnelä¼šåœ¨podçš„ç½‘ç»œå‘½åç©ºé—´ä¸­å»ºç«‹ä¸€ä¸ªsocketï¼Œå¹¶ä¸”ä¸ºèŠ‚ç‚¹ä¸Šçš„æ¯ä¸ªpodéƒ½ä¼šå»ºç«‹ä¸€ä¸ªã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æµé‡è·¯å¾„ä¸å…³é”®æœºåˆ¶&#34;&gt;æµé‡è·¯å¾„ä¸å…³é”®æœºåˆ¶&lt;/h2&gt;
&lt;p&gt;ä»‹ç»å®Œç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœ€æ ¸å¿ƒçš„â€œæµé‡è·¯å¾„â€ã€‚zTunnel å’Œ Waypoint ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ‹¦æˆªå¹¶è½¬å‘æµé‡çš„ï¼Ÿæˆ‘ä»¬ä¼šä»é€æ˜æµé‡æ‹¦æˆªã€HBONE åè®®ç­‰è§’åº¦è¿›è¡Œè§£æã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€æ˜æµé‡æ‹¦æˆª&#34;&gt;é€æ˜æµé‡æ‹¦æˆª&lt;/h3&gt;
&lt;p&gt;åœ¨ Ambient æ¨¡å¼ä¸­ï¼Œ&lt;strong&gt;Istio CNI&lt;/strong&gt; ä¼šåœ¨ Pod ç½‘ç»œå‘½åç©ºé—´ä¸­æ³¨å…¥ iptables è§„åˆ™ï¼Œå°†å‡ºç«™æµé‡é€æ˜æ‹¦æˆªåˆ°æ‰€åœ¨èŠ‚ç‚¹çš„ &lt;strong&gt;ztunnel&lt;/strong&gt; è¿›ç¨‹ã€‚ä¹‹åç”± ztunnel å†³å®šæ˜¯ç›´æ¥è¿›è¡Œ L4 è½¬å‘ï¼Œè¿˜æ˜¯å°†æµé‡è½¬å‘è‡³ &lt;strong&gt;Waypoint Proxy&lt;/strong&gt; åšè¿›ä¸€æ­¥çš„ L7 å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼ŒKubelet åœ¨èŠ‚ç‚¹ä¸Šå¯åŠ¨äº†ä¸€ä¸ª Podï¼Œè¿™ä¸ªäº‹ä»¶è¢« Istio CNI Agent ç›‘å¬åˆ°ï¼ŒIstio CNI Agent è¿›å…¥ Pod çš„ç½‘ç»œç©ºé—´ï¼Œè®¾ç½® iptables è§„åˆ™å°†æµé‡é‡å®šå‘åˆ°æœ¬åœ° socketï¼Œå¹¶å°† Pod çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰å‘é€ä¸º ztunnelã€‚ztunnel è·å–åˆ° FD ä¹‹åå°±å¯ä»¥åœ¨ Pod çš„ç½‘ç»œç©ºé—´ä¸­åˆ›å»º socketã€‚&lt;/p&gt;
&lt;p&gt;Pod åœ¨å‘é€æµé‡æ—¶ï¼Œæœ¬è¯¥ç›´è¿ç›®æ ‡åœ°å€ï¼Œä½†æ˜¯ iptables è§„åˆ™ä¼šæŠŠå®ƒæ‹¦æˆªåˆ°æœ¬èŠ‚ç‚¹çš„ ztunnel è¿›ç¨‹é‡Œï¼Œç„¶å ztunnel å†³å®šè¿™æ¡æµé‡éœ€ä¸éœ€è¦äº¤ç»™ Waypoint åš L7 ä»£ç†ã€‚
å¦‚æœä¸éœ€è¦ï¼Œå°±ç›´æ¥åœ¨ L4 å±‚æŠŠå®ƒåŠ å¯†è½¬å‘åˆ°ç›®æ ‡ Podï¼›å¦‚æœè¦ L7ï¼Œä¾‹å¦‚é‰´æƒï¼Œå°±å†æŠŠæµé‡éš§é“ç»™ Waypointã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/transparent-traffic-interception.svg&#34; data-img=&#34;/blog/beyond-sidecar/transparent-traffic-interception.svg&#34; alt=&#34;image&#34; data-caption=&#34;é€æ˜æµé‡æ‹¦æˆª&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;é€æ˜æµé‡æ‹¦æˆª&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ&#34;&gt;æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Pod â†’ ztunnel&lt;/strong&gt;ï¼šPod çš„æµé‡å…ˆè¢« CNI æ‹¦æˆªåˆ°æœ¬èŠ‚ç‚¹ ztunnelã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ztunnel&lt;/strong&gt;ï¼šè§£æç›®æ ‡åœ°å€å¹¶è¿›è¡Œ mTLS åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ï¼ˆå¦‚éœ€è¦ L7 ç­–ç•¥ï¼‰ztunnel â†’ Waypoint Proxy&lt;/strong&gt;ï¼šHTTP é‰´æƒã€è·¯ç”±ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Waypoint Proxy&lt;/strong&gt;ï¼šå®Œæˆ L7 å¤„ç†åï¼Œå†å‘å› ztunnelã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ztunnel&lt;/strong&gt;ï¼šè§£å°è£…æˆ–ç»§ç»­è½¬å‘è‡³ç›®æ ‡èŠ‚ç‚¹ ztunnelã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ°è¾¾ç›®æ ‡ Pod&lt;/strong&gt;ï¼šç›®æ ‡èŠ‚ç‚¹ ztunnel æœ€ç»ˆå°†æµé‡äº¤ç»™ç›®æ ‡ Podã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;hbone-åè®®&#34;&gt;HBONE åè®®&lt;/h3&gt;
&lt;p&gt;Ambient æ¨¡å¼ä¸­ï¼ŒzTunnel ä¸ Waypoint ä¹‹é—´ä½¿ç”¨ &lt;strong&gt;HBONE (HTTP/2 + CONNECT)&lt;/strong&gt; åè®®æ¥å»ºç«‹å®‰å…¨éš§é“ï¼Œå®ç° &lt;strong&gt;mTLS åŠ å¯†&lt;/strong&gt; å’Œå¤šè·¯å¤ç”¨ï¼Œå‡å°‘é¢å¤–çš„è¿æ¥å¼€é”€ï¼Œç®€åŒ–ä»£ç†è½¬å‘æµç¨‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/hbone-packet.svg&#34; data-img=&#34;/blog/beyond-sidecar/hbone-packet.svg&#34; alt=&#34;image&#34; data-caption=&#34;HBONE åè®®&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;HBONE åè®®&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„ HBONE CONNECT è¯·æ±‚ç¤ºä¾‹ï¼Œåˆ©ç”¨ &lt;code&gt;x-envoy-original-dst-host&lt;/code&gt;ã€&lt;code&gt;x-istio-auth-userinfo&lt;/code&gt; ç­‰å¤´ä¿¡æ¯æ¥ä¼ é€’è·¯ç”±å’Œèº«ä»½è®¤è¯æ‰€éœ€ä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;:method: CONNECT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;:scheme: https
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;:authority: Pod_B_IP:9080
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;:path: /api/v1/users?id=123
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-envoy-original-dst-host: Pod_B_IP:9080
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-forwarded-proto: hbone
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-istio-attributes: ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªç¤ºä¾‹é‡Œï¼Œå‡è®¾ ztunnel A éœ€è¦æŠŠæµé‡å‘é€ç»™ ç›®æ ‡èŠ‚ç‚¹ Bï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¤–å±‚çš„ TCP è¿æ¥å…¶å®æ˜¯ä» ztunnel_A_IP:52368 è¿åˆ° Node_B_IP:15008ã€‚è¿™æ˜¯ ztunnel A å’Œ ztunnel B ä¹‹é—´çš„éš§é“ç«¯å£ï¼Œ15008 å°±æ˜¯ HBONE ç›‘å¬ç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥åˆ° HTTP/2 å±‚åï¼Œå°±ä¼šæœ‰ä¸€ä¸ª CONNECT è¯·æ±‚ï¼Œé‡Œé¢çš„ &lt;code&gt;:authority&lt;/code&gt; æ˜¾ç¤ºçš„æ˜¯ Pod_B_IP:9080ï¼Œè¡¨ç¤ºå®é™…ä¸Šè¦è¿åˆ° Pod B çš„ 9080 ç«¯å£ã€‚&lt;code&gt;x-envoy-original-dst-host&lt;/code&gt; é‡Œä¹Ÿèƒ½çœ‹å‡ºç›¸åŒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶æˆ‘ä»¬çœ‹åˆ°äº†ä¸€äº›è‡ªå®šä¹‰å¤´ï¼Œæ¯”å¦‚ &lt;code&gt;x-forwarded-proto&lt;/code&gt;ã€x-istio-attributes ç­‰ï¼Œç”¨æ¥ç»™ç›®æ ‡ ztunnel æˆ–åç»­ä»£ç†å¸¦å»æ›´å¤šä¸Šä¸‹æ–‡å’Œå®‰å…¨éªŒè¯ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥æŠŠè¿™ä¸ªç†è§£ä¸ºï¼šåœ¨ HTTP/2 CONNECT ä¹‹ä¸Šï¼Œæµé‡å°±åƒåŠ äº†ä¸€ä¸ªâ€œå†…å±‚â€éš§é“ï¼ŒæŠŠåº”ç”¨å±‚çš„è¯·æ±‚ï¼ˆä¾‹å¦‚ &lt;code&gt;/api/v1/users?id=123&lt;/code&gt;ï¼‰å°è£…åœ¨è¿™é‡Œé¢ï¼Œç„¶ååœ¨ ztunnel B ç«¯è§£å°è£…å¹¶è½¬å‘åˆ°çœŸå®çš„ Pod Bã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹å¯¹åº”ç”¨æ¥è¯´æ˜¯é€æ˜çš„ï¼Œä½†å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œé€šè¿‡æŸ¥çœ‹è¿™ç§ CONNECT è¯·æ±‚å¤´ï¼Œå¯ä»¥äº†è§£ Ambient æ¨¡å¼å¦‚ä½•åœ¨ HTTP/2 å±‚åšæµé‡è·¯ç”±å’Œèº«ä»½è®¤è¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´ HBONE æ¯”ä¼ ç»Ÿçš„ Sidecar-to-Sidecaré€šä¿¡æ›´åŠ çµæ´»ï¼Œä¹Ÿæ›´ä¾¿äºåš mTLS ä»¥åŠ L7 æ‰©å±•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŒèŠ‚ç‚¹ä¸Šçš„åŠ å¯†æµé‡&#34;&gt;åŒèŠ‚ç‚¹ä¸Šçš„åŠ å¯†æµé‡&lt;/h3&gt;
&lt;p&gt;å¦‚æœæº Pod å’Œç›®æ ‡ Pod æ°å¥½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæµé‡ä¼šèµ° ztunnel çš„ L4 åŠ å¯†æµç¨‹ã€‚
è¿™é‡Œæ˜¾ç¤ºï¼Œztunnel æ˜¯ä½¿ç”¨ DaemonSet éƒ¨ç½²åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº†host Networkï¼Œå…±äº«ä¸»æœºçš„ç½‘ç»œã€‚Istio CNI å°† Pod çš„å‡ºç«™æµé‡æ‹¦æˆªåˆ° ztunnelçš„15001ç«¯å£ï¼Œå¦‚æœæºå’Œç›®çš„ pod åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œztunnel ç›´æ¥åœ¨å†…éƒ¨å®ŒæˆåŠ è§£å¯†åå°†æµé‡å‘é€åˆ°ç›®çš„åœ° podã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéœ€è¦ L7 çš„æµé‡å¤„ç†ï¼Œæ¯”å¦‚é‰´æƒï¼Œztunnel å°±ä¼šä¸ Waypoint ä»£ç†å»ºç«‹ HBONE éš§é“ï¼Œç»è¿‡ Waypoint ä»£ç†çš„è½¬å‘åˆ°ç›®çš„ Podã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/ambient-traffic-on-the-same-node.svg&#34; data-img=&#34;/blog/beyond-sidecar/ambient-traffic-on-the-same-node.svg&#34; alt=&#34;image&#34; data-caption=&#34;åŒèŠ‚ç‚¹ä¸Šçš„åŠ å¯†æµé‡&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åŒèŠ‚ç‚¹ä¸Šçš„åŠ å¯†æµé‡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡l4&#34;&gt;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL4ï¼‰&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯è·¨èŠ‚ç‚¹çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æœ€å¸¸è§çš„åœºæ™¯ï¼š&lt;/p&gt;
&lt;p&gt;æºèŠ‚ç‚¹çš„ ztunnel æŠŠæµé‡é€šè¿‡ HBONE éš§é“åŠ å¯†åå‘ç»™ç›®æ ‡èŠ‚ç‚¹çš„ ztunnelï¼›ç›®æ ‡èŠ‚ç‚¹ ztunnel è§£å°è£…ï¼Œå†æŠŠæ˜æ–‡æµé‡é€’ç»™ç›®æ ‡ Podã€‚åªè¦æ˜¯çº¯ L4 æ— éœ€ L7ï¼Œå°±ä¸å¿…åŠ ä¸€å±‚ Waypointï¼Œå‡å°‘äº†ä»£ç†é“¾è·¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/ambient-traffic-on-the-different-node-l4.svg&#34; data-img=&#34;/blog/beyond-sidecar/ambient-traffic-on-the-different-node-l4.svg&#34; alt=&#34;image&#34; data-caption=&#34;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL4ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL4ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡l7&#34;&gt;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL7ï¼‰&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬éœ€è¦ L7 å¤„ç†æ—¶ï¼Œæµé‡å°±ä¼šå¤šç»è¿‡ä¸€ä¸‹ Waypointã€‚ä¹Ÿå°±æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æº ztunnel å…ˆæŠŠæµé‡éš§é“ç»™ Waypointï¼›&lt;/li&gt;
&lt;li&gt;Waypoint åœ¨ HTTP å±‚åšé‰´æƒã€è·¯ç”±ç­‰ï¼›&lt;/li&gt;
&lt;li&gt;Waypoint å†ç”¨ HBONE æŠŠæµé‡å‘ç»™ç›®æ ‡ ztunnelï¼›&lt;/li&gt;
&lt;li&gt;ç›®æ ‡ ztunnel è§£å°è£…åç»™ç›®æ ‡ Podã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/ambient-traffic-on-the-different-node-l7.svg&#34; data-img=&#34;/blog/beyond-sidecar/ambient-traffic-on-the-different-node-l7.svg&#34; alt=&#34;image&#34; data-caption=&#34;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL7ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL7ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªæµç¨‹æ¯” L4 å¤šäº†ä¸€æ¬¡ä»£ç†ï¼Œä½†å¥½å¤„æ˜¯åªæœ‰ç‰¹å®šæµé‡æ‰ä¼šè¢« L7 ä»£ç†è§£æï¼Œå‡å°‘ä¸å¿…è¦çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…œåº•æµé‡é˜²æ­¢æµé‡é€ƒé€¸&#34;&gt;å…œåº•æµé‡ï¼ˆé˜²æ­¢æµé‡é€ƒé€¸ï¼‰&lt;/h3&gt;
&lt;p&gt;å¯¹äºé Istioç½‘æ ¼å†…éƒ¨çš„æµé‡ï¼Œé€šè¿‡ Pod IPå’Œç«¯å£ç›´æ¥è®¿é—® Podæ—¶ï¼Œä¸ºäº†é˜²æ­¢è¿™äº›æµé‡é€ƒå‡º ztunnelçš„æŒæ§ï¼Œä¹Ÿéœ€è¦æ‹¦æˆªè¿™äº›æµé‡ã€‚å¦‚æœæµé‡æ˜¯è®¿é—®çš„åº”ç”¨ç«¯å£ï¼Œé€šè¿‡åˆ¤æ–­æ•°æ®åŒ…ä¸Šæ˜¯å¦å¸¦æœ‰ 0x539 æ ‡è®°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†å…¶è½¬å‘åˆ° ztunnel ç›‘å¬çš„ 15006 æ˜æ–‡ç«¯å£ï¼Œç» ztunnel å¤„ç†åä¼šå¸¦ä¸Š 0x539 æ ‡è®°ï¼Œç„¶åå°±å¯ä»¥è®¿é—®åº”ç”¨çš„ç›®æ ‡ç«¯å£äº†ï¼›å¦‚æœæµé‡çš„ç›®çš„ç«¯å£æ˜¯ 15008ï¼Œé‚£ä¹ˆå®é™…ä¸Šå°±ä¼šè¢« ztunnel ç›‘å¬å’Œå¤„ç†ï¼Œåˆ¤æ–­ HBONE åè®®ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/beyond-sidecar/non-istio-mesh-pod-taffic-go-into-the-mesh.svg&#34; data-img=&#34;/blog/beyond-sidecar/non-istio-mesh-pod-taffic-go-into-the-mesh.svg&#34; alt=&#34;image&#34; data-caption=&#34;æ¥è‡ªémeshå†…éƒ¨çš„æµé‡&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æ¥è‡ªémeshå†…éƒ¨çš„æµé‡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;l4-ä¸-l7-æµé‡å·®å¼‚&#34;&gt;L4 ä¸ L7 æµé‡å·®å¼‚&lt;/h3&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æµé‡ç±»å‹&lt;/th&gt;
          &lt;th&gt;å¤„ç†ä½ç½®&lt;/th&gt;
          &lt;th&gt;ç¤ºä¾‹åœºæ™¯&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;L4&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ztunnelï¼ˆé€æ˜è½¬å‘ï¼‰&lt;/td&gt;
          &lt;td&gt;TCP çº§åˆ«æµé‡ï¼Œä¸éœ€åº”ç”¨å±‚ç­–ç•¥&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;L7&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ztunnel â†’ Waypoint Proxy&lt;/td&gt;
          &lt;td&gt;HTTP/gRPC éœ€è¦é‰´æƒã€ç†”æ–­ã€è·¯ç”±ã€å¯è§‚æµ‹ç­‰é«˜çº§åŠŸèƒ½&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¯¹äºå¤§éƒ¨åˆ†åªéœ€ TCP å±‚åŠ å¯†å’Œè½¬å‘çš„æµé‡ï¼ŒAmbient Mode ä»…é€šè¿‡ ztunnel å³å¯ï¼›åªæœ‰åœ¨éœ€è¦ HTTP å±‚ç­–ç•¥æ—¶æ‰ä¼šé¢å¤–ç»è¿‡ Waypointã€‚&lt;/p&gt;
&lt;h2 id=&#34;ambient-mode-vs-sidecar-mode&#34;&gt;Ambient Mode vs. Sidecar Mode&lt;/h2&gt;
&lt;p&gt;æœ‰äº†å¯¹ Ambient çš„äº†è§£åï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—å’ŒåŸæœ‰çš„ Sidecar æ¨¡å¼åšå¯¹æ¯”ï¼Œæ¥çœ‹çœ‹å“ªäº›åŠŸèƒ½è¿˜ä¸å®Œå–„ï¼Œå“ªäº›åœºæ™¯æ›´é€‚åˆ Ambientã€‚&lt;/p&gt;
&lt;h3 id=&#34;ambient-æ¨¡å¼çš„é™åˆ¶&#34;&gt;Ambient æ¨¡å¼çš„é™åˆ¶&lt;/h3&gt;
&lt;p&gt;ä¸ä¼ ç»Ÿ Sidecar æ¨¡å¼ç›¸æ¯”ï¼ŒAmbient ç›®å‰ä»æœ‰ä¸€äº›ä¸å®Œå–„ä¹‹å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨&lt;strong&gt;æ··åˆä½¿ç”¨&lt;/strong&gt; Sidecar ä¸ Ambient æ—¶ï¼Œéš¾ä»¥å¯¹å•ä¸ª Pod åšç²¾å‡†ä»£ç†å®šåˆ¶ï¼ˆä¾‹å¦‚ EnvoyFilterï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šé›†ç¾¤&lt;/strong&gt;ã€&lt;strong&gt;å¤šç½‘ç»œ&lt;/strong&gt;ã€ä»¥åŠ &lt;strong&gt;è™šæ‹Ÿæœº&lt;/strong&gt; å·¥ä½œè´Ÿè½½çš„æ”¯æŒè¿˜ä¸å¤Ÿå®Œå–„ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨éœ€è°¨æ…ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€äº›æ·±åº¦å®šåˆ¶ï¼ˆä¾‹å¦‚ WASM æ’ä»¶ï¼‰ç›®å‰æ— æ³•åœ¨ Ambient ä¸‹ç›´æ¥ä¸€å¯¹ä¸€å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŠŸèƒ½ä¸å·®å¼‚å¯¹æ¯”&#34;&gt;åŠŸèƒ½ä¸å·®å¼‚å¯¹æ¯”&lt;/h3&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æŒ‡æ ‡&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Sidecar æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Ambient æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ä»£ç†ä½ç½®&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ¯ä¸ª Pod éƒ½è¿è¡Œ Envoy Sidecar&lt;/td&gt;
          &lt;td&gt;Node çº§ &lt;strong&gt;ztunnel&lt;/strong&gt; + å¯é€‰çš„ &lt;strong&gt;Waypoint Proxy&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;èµ„æºå¼€é”€&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;åœ¨å¤§è§„æ¨¡åœºæ™¯ä¸‹ CPU/å†…å­˜æ¶ˆè€—ç›¸å¯¹æ›´é«˜&lt;/td&gt;
          &lt;td&gt;ç›¸å¯¹æ›´ä½ï¼šä»£ç†å…±äº«åœ¨èŠ‚ç‚¹/å‘½åç©ºé—´çº§&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è¿ç»´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å‡çº§ Sidecar éœ€æ»šåŠ¨æ›´æ–°æ‰€æœ‰å…³è” Podï¼Œæ“ä½œè¾ƒç¹ç&lt;/td&gt;
          &lt;td&gt;éƒ¨ç½²/å‡çº§é›†ä¸­åœ¨å°‘æ•°ç»„ä»¶ï¼ˆztunnel / Waypointï¼‰ï¼Œè¿ç»´æ›´ç®€å•&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ¯ä¸ª Pod éƒ½æœ‰ Envoyï¼Œä½¿å¾—éš”ç¦»æ€§æ›´å¼ºï¼Œä½†æ•´ä½“æœ‰é¢å¤–ä»£ç†å¼€é”€&lt;/td&gt;
          &lt;td&gt;L4 æ€§èƒ½è¾ƒå¥½ï¼ŒL7 åœºæ™¯éœ€è¦å¤šç»è¿‡ä¸€æ¬¡ Waypoint è½¬å‘&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;åŠŸèƒ½å®Œæ•´åº¦&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æˆç†Ÿç¨³å®šï¼Œæ”¯æŒå¤šé›†ç¾¤ã€VMã€æ··åˆç½‘ç»œ&lt;/td&gt;
          &lt;td&gt;å°šåœ¨æ¼”è¿›ï¼Œå¤šç½‘ç»œã€VM ç­‰é«˜çº§åœºæ™¯æ”¯æŒä»åœ¨å®Œå–„&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å…¸å‹ä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ³¨é‡ä¸¥æ ¼éš”ç¦»æˆ–ä¾èµ–ç‰¹å®šçš„ EnvoyFilterã€WASM æ’ä»¶ç­‰æ·±åº¦å®šåˆ¶&lt;/td&gt;
          &lt;td&gt;å¤§è§„æ¨¡é›†ç¾¤ã€éœ€è¦&lt;strong&gt;è½»é‡åŒ–&lt;/strong&gt;ç®¡ç†ä¸”å¤§éƒ¨åˆ†æµé‡ä»¥ L4 ä¸ºä¸»çš„åœºæ™¯&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;é€‰æ‹©å»ºè®®&#34;&gt;é€‰æ‹©å»ºè®®&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;è‹¥å·²æœ‰ &lt;strong&gt;Sidecar&lt;/strong&gt; æ¶æ„ä¸”ä¾èµ–å¤§é‡æˆç†Ÿç‰¹æ€§ï¼šå¯å…ˆç»§ç»­ä½¿ç”¨ Sidecarã€‚&lt;/li&gt;
&lt;li&gt;è¿½æ±‚ &lt;strong&gt;èµ„æºèŠ‚çœ&lt;/strong&gt;ã€&lt;strong&gt;è¿ç»´ç®€åŒ–&lt;/strong&gt; ä¸”å¤§éƒ¨åˆ†æµé‡ä»…éœ€ L4ï¼šå¯å°è¯• &lt;strong&gt;Ambient Mode&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéƒ¨åˆ†åº”ç”¨ä»éœ€ä¿ç•™ Sidecarï¼Œå¯è€ƒè™‘ &lt;strong&gt;æ··åˆéƒ¨ç½²&lt;/strong&gt;ï¼Œä½†éœ€é¢å¤–è§„åˆ’ Sidecar / Ambient çš„è¾¹ç•Œå’Œç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¥½çš„ï¼Œæœ€åæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ Ambient Mode çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠå½“å‰é€‚åˆå“ªäº›åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ¸å¿ƒè¦ç‚¹å›é¡¾&#34;&gt;æ ¸å¿ƒè¦ç‚¹å›é¡¾&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Ambient Mode&lt;/strong&gt;ï¼šé€šè¿‡ç§»é™¤ Sidecarï¼Œé™ä½æ¯ä¸ª Pod çš„ä»£ç†è´Ÿæ‹…ï¼Œæ˜¾è‘—é™ä½èµ„æºå’Œè¿ç»´æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ztunnel + Waypoint&lt;/strong&gt; æ¶æ„ï¼šéœ€è¦ L7 åŠŸèƒ½æ—¶æ‰å¯ç”¨ Waypointï¼Œå…¶ä»–æµé‡ä»¥ L4 æ–¹å¼å¿«é€Ÿè½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;è™½ç„¶å®˜æ–¹å·²å®£å¸ƒ Ambient Mode GAï¼Œä½†å¯¹äº &lt;strong&gt;å¤šé›†ç¾¤ / VM / å¤šç½‘ç»œ&lt;/strong&gt; ç­‰ä»éœ€è¿›ä¸€æ­¥è§‚å¯Ÿã€æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;é€‚ç”¨åœºæ™¯ï¼š&lt;strong&gt;å¤§è§„æ¨¡é›†ç¾¤&lt;/strong&gt; + &lt;strong&gt;ä¸»è¦ä»¥ L4 æµé‡ä¸ºä¸»&lt;/strong&gt;ï¼Œå¯¹èµ„æºå’Œç®¡ç†è¦æ±‚é«˜çš„å›¢é˜Ÿå¯ä»¥é‡ç‚¹å…³æ³¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½ ä¹Ÿå¯ä»¥é€šè¿‡ &lt;a href=&#34;https://jimmysong.io&#34; title=&#34;jimmysong.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;jimmysong.io&lt;/a&gt; ç½‘ç«™æ‰¾åˆ°æ›´å¤šäº‘åŸç”Ÿç›¸å…³çš„æ–‡ç« å’Œå®è·µåˆ†äº«ã€‚å¦‚æœå¯¹æ­¤æ–‡æˆ– Istio æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€æˆ–åœ¨ç¤¾åŒºä¸­äº¤æµã€‚è°¢è°¢ï¼&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio å®‰è£…æ–¹å¼æ·±åº¦å‰–æâ€”â€”é€‰æ‹©ä¸å®è·µæŒ‡å—</title>
      <link>https://jimmysong.io/blog/istio-installation-deep-dive/</link>
      <pubDate>Thu, 27 Feb 2025 13:47:35 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-installation-deep-dive/</guid>
      <description>
        
        
        &lt;p&gt;éšç€ Istio ç‰ˆæœ¬è¿­ä»£ï¼Œå…¶çš„å®‰è£…æ–¹å¼å’Œå·¥å…·é“¾ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚ä» &lt;code&gt;istioctl&lt;/code&gt; åˆ° Helmï¼Œå†åˆ°æ›¾ç»çš„ Istio Operatorï¼Œç”¨æˆ·å¸¸å¸¸ä¼šé¢ä¸´é€‰æ‹©å›°å¢ƒï¼šåˆ°åº•å“ªç§æ–¹å¼æœ€é€‚åˆæˆ‘çš„åœºæ™¯ï¼Ÿåœ¨æœ€è¿‘çš„äº¤æµä¸­ï¼Œæˆ‘ç»å¸¸é‡åˆ°å…³äº Istio å®‰è£…æ–¹å¼é€‰æ‹©çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å›´ç»• &lt;code&gt;IstioOperator API&lt;/code&gt; å’Œå·²åºŸå¼ƒçš„ Istio Operator ç»„ä»¶çš„åŒºåˆ«ã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä»¥æŠ€æœ¯å®è·µè€…çš„è§†è§’ï¼Œå¸¦ä½ æ¢³ç† Istio çš„å®‰è£…ä¹‹é“ï¼Œæ‹†è§£å…³é”®é—®é¢˜ï¼Œå¹¶ç»™å‡ºç”Ÿäº§çº§å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-å®‰è£…æ–¹å¼ä¸€è§ˆ&#34;&gt;Istio å®‰è£…æ–¹å¼ä¸€è§ˆ&lt;/h2&gt;
&lt;p&gt;Istio æä¾›äº†å¤šç§å®‰è£…è·¯å¾„ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶è®¾è®¡åˆè¡·å’Œé€‚ç”¨åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯å½“å‰ä¸»æµé€‰é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;istioctl&lt;/code&gt;&lt;/strong&gt;ï¼šå®˜æ–¹æ¨èçš„å®‰è£…å·¥å…·ï¼Œé›†éªŒè¯ã€å®šåˆ¶å’Œè¿ç»´äºä¸€ä½“ï¼Œå‡ ä¹æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ ‡é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Helm&lt;/strong&gt;ï¼šKubernetes ç”Ÿæ€çš„åŒ…ç®¡ç†åˆ©å™¨ï¼Œé€‚åˆ Helm é‡åº¦ç”¨æˆ·æˆ– CI/CD é›†æˆåœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio Operatorï¼ˆå·²åºŸå¼ƒï¼‰&lt;/strong&gt;ï¼šæ›¾ç»çš„é›†ç¾¤å†…ç®¡ç†æ–¹æ¡ˆï¼Œå¦‚ä»Šå·²é€€å‡ºå†å²èˆå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€ä¸€å‰–æè¿™äº›æ–¹å¼çš„æ ¸å¿ƒç‰¹ç‚¹ï¼Œä»¥åŠèƒŒåçš„å–èˆé€»è¾‘ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istioctlç”Ÿäº§ç¯å¢ƒçš„ä¸äºŒä¹‹é€‰&#34;&gt;&lt;code&gt;istioctl&lt;/code&gt;ï¼šç”Ÿäº§ç¯å¢ƒçš„ä¸äºŒä¹‹é€‰&lt;/h2&gt;
&lt;p&gt;åœ¨ Istio ä¸­ï¼Œ&lt;code&gt;istioctl&lt;/code&gt; è¢«å®˜æ–¹å®šä½ä¸ºé¦–é€‰å®‰è£…å·¥å…·ã€‚å®ƒçš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºå¤§çš„é…ç½®éªŒè¯&lt;/strong&gt;ï¼šåœ¨å®‰è£…å‰ï¼Œ&lt;code&gt;istioctl&lt;/code&gt; ä¼šå¯¹é…ç½®è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œé¿å…æ½œåœ¨é—®é¢˜ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;istioctl analyze&lt;/code&gt; å¯ä»¥å¿«é€Ÿå®šä½é…ç½®æ–‡ä»¶ä¸­çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»çš„å®šåˆ¶èƒ½åŠ›&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;IstioOperator&lt;/code&gt; APIï¼Œä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶å®‰è£…ç»†èŠ‚ï¼Œæ¯”å¦‚åªå¯ç”¨ Pilot æˆ–è°ƒæ•´ç½‘å…³é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§å°±ç»ªçš„ç‰¹æ€§&lt;/strong&gt;ï¼šä»å¥åº·æ£€æŸ¥ï¼ˆ&lt;code&gt;istioctl verify-install&lt;/code&gt;ï¼‰åˆ°å¢é‡å‡çº§ï¼Œ&lt;code&gt;istioctl&lt;/code&gt; æä¾›äº†å…¨ç”Ÿå‘½å‘¨æœŸæ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ä¼˜å…ˆ&lt;/strong&gt;ï¼šç›¸è¾ƒäºé›†ç¾¤å†…æ§åˆ¶å™¨ï¼Œ&lt;code&gt;istioctl&lt;/code&gt; åœ¨æœ¬åœ°è¿è¡Œï¼Œé¿å…äº†é«˜æƒé™ç»„ä»¶å¸¦æ¥çš„å®‰å…¨éšæ‚£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®è·µä¸­çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl install --set &lt;span class=&#34;nv&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;default -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¼šå¿«é€Ÿéƒ¨ç½²é»˜è®¤é…ç½®ã€‚å¦‚æœéœ€è¦æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥æ­é… YAML æ–‡ä»¶ï¼ˆåæ–‡è¯¦è§£ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç”Ÿäº§ç¯å¢ƒã€æ–°ç”¨æˆ·ã€éœ€è¦é«˜åº¦å®šåˆ¶çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;helmç”Ÿæ€é›†æˆä¸‹çš„å¤‡é€‰æ–¹æ¡ˆ&#34;&gt;Helmï¼šç”Ÿæ€é›†æˆä¸‹çš„å¤‡é€‰æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;Helm æ˜¯ Kubernetes ç”Ÿæ€çš„è€æœ‹å‹ï¼ŒIstio ä¹Ÿæä¾›äº†å®˜æ–¹ Helm chartã€‚å®ƒçš„äº®ç‚¹åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Helm ç”Ÿæ€æ— ç¼å¯¹æ¥&lt;/strong&gt;ï¼šå¦‚æœä½ çš„é›†ç¾¤å·²ç»åœ¨ç”¨ Helm ç®¡ç†èµ„æºï¼ŒIstio çš„ Helm å®‰è£…å¯ä»¥ç›´æ¥èå…¥ç°æœ‰å·¥ä½œæµã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–å‹å¥½&lt;/strong&gt;ï¼šHelm chart çš„ç‰ˆæœ¬åŒ–å’Œå£°æ˜å¼ç‰¹æ€§ï¼Œéå¸¸é€‚åˆ CI/CD ç®¡é“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½† Helm å¹¶éæ²¡æœ‰çŸ­æ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯èƒ½åŠ›ä¸è¶³&lt;/strong&gt;ï¼šç›¸æ¯” &lt;code&gt;istioctl&lt;/code&gt;ï¼ŒHelm çš„é…ç½®æ£€æŸ¥è¾ƒå¼±ï¼Œé”™è¯¯å¾€å¾€åœ¨è¿è¡Œæ—¶æš´éœ²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„ä»¶ç®¡ç†å¤æ‚&lt;/strong&gt;ï¼šæ¯”å¦‚å®‰è£… Egress Gatewayï¼ŒHelm chart çš„æ”¯æŒä¸å¤Ÿå®Œå–„ï¼Œç¤¾åŒºåé¦ˆä¸­å¸¸æœ‰äººæåˆ°éœ€è¦é¢å¤–è°ƒæ•´ï¼ˆå‚è€ƒ &lt;a href=&#34;https://github.com/istio/istio/issues/43826&#34; title=&#34;GitHub Issue #43826&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Issue #43826&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå·²æœ‰ Helm å·¥ä½œæµã€CI/CD é©±åŠ¨çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-operator-çš„å…´è¡°&#34;&gt;Istio Operator çš„å…´è¡°&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æ¥è§¦è¿‡æ—©æœŸ Istioï¼Œå¯èƒ½ä¼šå¯¹ Istio Operator æœ‰æ‰€è€³é—»ã€‚è¿™æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨é›†ç¾¤å†…çš„æ§åˆ¶å™¨ï¼Œè´Ÿè´£æ ¹æ®é…ç½®ç®¡ç† Istio å®‰è£…ã€‚ç„¶è€Œï¼Œä» 1.23 ç‰ˆæœ¬èµ·ï¼Œå®ƒå·²è¢«å®˜æ–¹åºŸå¼ƒã€‚åŸå› ä½•åœ¨ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è€ƒé‡&lt;/strong&gt;ï¼šé›†ç¾¤å†…é«˜æƒé™ç»„ä»¶å®¹æ˜“æˆä¸ºæ”»å‡»ç›®æ ‡ï¼Œå¢åŠ äº†è¿ç»´é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½å†—ä½™&lt;/strong&gt;ï¼šç¤¾åŒºè°ƒæŸ¥æ˜¾ç¤ºï¼Œå…¶ä½¿ç”¨ç‡ä¸è¶³ 10%ï¼Œè€Œ &lt;code&gt;istioctl&lt;/code&gt; å·²èƒ½å®Œå…¨è¦†ç›–å…¶åŠŸèƒ½ï¼ˆå‚è€ƒ &lt;a href=&#34;https://github.com/istio/enhancements/issues/166&#34; title=&#34;GitHub Discussion #166&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Discussion #166&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°æœ‰ç”¨æˆ·å¯ä»¥ç»§ç»­è¿è¡Œæ—§ç‰ˆæœ¬ï¼Œä½†æ— æ³•å‡çº§åˆ° 1.24+ã€‚å¯¹äºæ–°é¡¹ç›®ï¼Œæˆ‘çš„å»ºè®®æ˜¯ç›´æ¥è·³è¿‡è¿™ä¸€é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‹¨äº‘è§æ—¥istiooperator-api-vs-istio-operator&#34;&gt;æ‹¨äº‘è§æ—¥ï¼šIstioOperator API vs. Istio Operator&lt;/h2&gt;
&lt;p&gt;è®¨è®ºä¸­å¸¸å‡ºç°çš„ä¸€ä¸ªå›°æƒ‘æ˜¯ï¼š&lt;code&gt;IstioOperator API&lt;/code&gt; å’Œ Istio Operator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè®©æˆ‘ä»¬ä¸€æ¬¡æ€§è®²æ¸…æ¥šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IstioOperator API&lt;/code&gt;&lt;/strong&gt;ï¼šä¸€ä¸ªå£°æ˜å¼çš„é…ç½®æ¥å£ï¼Œç”¨äºå®šä¹‰ Istio å®‰è£…çš„æœŸæœ›çŠ¶æ€ã€‚å®ƒå¹¶æœªåºŸå¼ƒï¼Œè€Œæ˜¯ &lt;code&gt;istioctl&lt;/code&gt; çš„æ ¸å¿ƒä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio Operator&lt;/strong&gt;ï¼šå·²åºŸå¼ƒçš„é›†ç¾¤å†…æ§åˆ¶å™¨ï¼Œè¿‡å»è´Ÿè´£è§£æ API å¹¶æ‰§è¡Œå®‰è£…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç±»æ¯”ä¸€ä¸‹ï¼šAPI æ˜¯è®¾è®¡å›¾çº¸ï¼ŒOperator æ˜¯æ–½å·¥é˜Ÿã€‚ç°åœ¨ï¼Œ&lt;code&gt;istioctl&lt;/code&gt; å–ä»£äº†æ–½å·¥é˜Ÿï¼Œæ•ˆç‡æ›´é«˜ï¼Œé£é™©æ›´ä½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®æˆ˜å¦‚ä½•ä½¿ç”¨-istiooperator-api&#34;&gt;å®æˆ˜ï¼šå¦‚ä½•ä½¿ç”¨ &lt;code&gt;IstioOperator API&lt;/code&gt;ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;IstioOperator&lt;/code&gt; API æ˜¯ Istio å®‰è£…çš„çµé­‚ï¼Œå…è®¸ä½ é€šè¿‡ YAML æ–‡ä»¶çµæ´»å®šåˆ¶é…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–å†™é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬è¦å¯ç”¨ Egress Gatewayï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;install.istio.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;IstioOperator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;egressGateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éƒ¨ç½²é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl install -f istio-config.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ç§æ–¹å¼çš„å¥½å¤„åœ¨äºå£°æ˜å¼ç®¡ç†ï¼Œä¿®æ”¹åé‡æ–°è¿è¡Œå³å¯å®ç°å¢é‡æ›´æ–°ã€‚æ¯”å¦‚ï¼Œè¦è°ƒæ•´èµ„æºé™åˆ¶ï¼Œåªéœ€æ›´æ–° YAML å¹¶å†æ¬¡åº”ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»„ä»¶æ›´æ–°ä¸æ‰©å±•&#34;&gt;ç»„ä»¶æ›´æ–°ä¸æ‰©å±•&lt;/h2&gt;
&lt;p&gt;å®‰è£…å®Œæˆåï¼Œå¦‚ä½•æ·»åŠ æˆ–æ›´æ–°ç»„ä»¶ï¼ˆå¦‚ Egress Gatewayï¼‰ï¼Ÿ&lt;code&gt;istioctl&lt;/code&gt; çš„ç­”æ¡ˆç®€å•ç›´æ¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¾‘ YAMLï¼Œæ·»åŠ æ–°é…ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl install -f updated-config.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;istioctl&lt;/code&gt; ä¼šè‡ªåŠ¨è®¡ç®—å·®å¼‚ï¼Œå®Œæˆå¢é‡éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Helm æ›´æ–°åˆ™ç¨æ˜¾ç¹çï¼Œå¯èƒ½æ¶‰åŠ chart è°ƒæ•´æˆ–æ‰‹åŠ¨å¹²é¢„ï¼Œå°¤å…¶åœ¨éå¸¸è§„ç»„ä»¶ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“ä¸ç”Ÿäº§å»ºè®®&#34;&gt;æ€»ç»“ä¸ç”Ÿäº§å»ºè®®&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è¿™æ¬¡æ·±å…¥å‰–æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;istioctl&lt;/code&gt; æ˜¯ç‹é“&lt;/strong&gt;ï¼šå®ƒå…¼å…·å®‰å…¨æ€§ã€çµæ´»æ€§å’Œç”Ÿäº§å°±ç»ªç‰¹æ€§ï¼Œé€‚åˆç»å¤§å¤šæ•°åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Helm æœ‰å…¶ä¸€å¸­ä¹‹åœ°&lt;/strong&gt;ï¼šå¦‚æœä½ æ·±é™· Helm ç”Ÿæ€ï¼Œä¸å¦¨ä¸€è¯•ï¼Œä½†è¦åšå¥½é¢å¤–é…ç½®çš„å‡†å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio Operator å·²æˆå†å²&lt;/strong&gt;ï¼šæ–°é¡¹ç›®æ— éœ€è€ƒè™‘ï¼Œç°æœ‰ç”¨æˆ·åº”è§„åˆ’è¿ç§»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªåœ¨å¼€æºé¢†åŸŸæ‘¸çˆ¬æ»šæ‰“çš„å®è·µè€…ï¼Œæˆ‘å»ºè®®ä» &lt;code&gt;istioctl&lt;/code&gt; å…¥æ‰‹ï¼Œç»“åˆ &lt;code&gt;IstioOperator&lt;/code&gt; APIï¼Œæ—¢èƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œåˆèƒ½æ»¡è¶³å¤æ‚éœ€æ±‚ã€‚Istio çš„å®‰è£…çœ‹ä¼¼å¤æ‚ï¼Œä½†æŒæ¡æ ¸å¿ƒé€»è¾‘åï¼Œä½ ä¼šå‘ç°å®ƒå…¶å®å¾ˆæœ‰æ¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼Œä¸€èµ·è§£é”æœåŠ¡ç½‘æ ¼çš„æ›´å¤šç©æ³•ï¼&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/setup/install/&#34; title=&#34;Istio å®˜æ–¹å®‰è£…æŒ‡å—&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio å®˜æ–¹å®‰è£…æŒ‡å—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/&#34; title=&#34;IstioOperator API é…ç½®å‚è€ƒ&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IstioOperator API é…ç½®å‚è€ƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/istio/istio/issues/43826&#34; title=&#34;GitHub Issue #43826&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Issue #43826&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/istio/enhancements/issues/166&#34; title=&#34;GitHub Discussion #166&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Discussion #166&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio Ambient æ¨¡å¼ï¼šå›¾è§£åŠæ¦‚å¿µè§£è¯»</title>
      <link>https://jimmysong.io/blog/istio-ambient-terminology/</link>
      <pubDate>Thu, 13 Feb 2025 18:20:14 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-ambient-terminology/</guid>
      <description>
        
        
        &lt;p&gt;Istio çš„ Ambient æ¨¡å¼æ˜¯ä¸€ç§åˆ›æ–°çš„ã€æ—  Sidecar çš„æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ–¹å¼ï¼Œé€šè¿‡ ztunnel å’Œ waypoint proxy åˆ†ç¦»æ•°æ®å¹³é¢åŠŸèƒ½ï¼Œç®€åŒ–äº†æ“ä½œå¹¶é™ä½äº†èµ„æºæ¶ˆè€—ã€‚æœ¬ç¯‡åšå®¢å°†é€šè¿‡ä¸€ä»½è¯¦ç»†çš„æœ¯è¯­è¡¨ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Istio Ambient æ¨¡å¼ä¸­çš„å…³é”®æ¦‚å¿µåŠå…¶èƒŒåçš„æŠ€æœ¯å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ambient-æ¨¡å¼&#34;&gt;Ambient æ¨¡å¼&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/ambient-mode-architecture.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/ambient-mode-architecture.svg&#34; alt=&#34;image&#34; data-caption=&#34;Ambient æ¨¡å¼æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Ambient æ¨¡å¼æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šIstio çš„ä¸€ç§æ—  Sidecar çš„æ•°æ®å¹³é¢æ¨¡å¼ï¼Œé€šè¿‡ ztunnel å’Œ waypoint proxy å®ç°æœåŠ¡ä¹‹é—´çš„å®‰å…¨é€šä¿¡å’Œç®¡ç†ã€‚ç›¸è¾ƒäº Sidecar æ¨¡å¼ï¼ŒAmbient æ¨¡å¼æ›´åŠ è½»é‡ï¼Œé™ä½äº†èµ„æºæ¶ˆè€—å¹¶ç®€åŒ–äº†é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„&lt;/strong&gt;ï¼šæ•°æ®å¹³é¢åŠŸèƒ½åˆ†ä¸º L4 å±‚çš„å®‰å…¨è¦†ç›–å±‚ï¼ˆç”± ztunnel æä¾›ï¼‰å’Œ L7 å±‚çš„ç­–ç•¥å¤„ç†å±‚ï¼ˆç”± waypoint proxy æä¾›ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢&#34;&gt;æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/control-plane-and-data-plane.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/control-plane-and-data-plane.svg&#34; alt=&#34;image&#34; data-caption=&#34;æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šåœ¨ Ambient æ¨¡å¼ä¸­ï¼Œæ§åˆ¶å¹³é¢ï¼ˆ&lt;code&gt;istiod&lt;/code&gt;ï¼‰è´Ÿè´£ç®¡ç†é›†ç¾¤å†… ztunnel å’Œ waypoint proxy çš„é…ç½®å’Œç­–ç•¥ï¼Œè€Œæ•°æ®å¹³é¢ç”± ztunnel å’Œ waypoint proxy ç»„æˆï¼Œè´Ÿè´£å¤„ç†å®é™…çš„ç½‘ç»œæµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„ä»¶äº¤äº’&lt;/strong&gt;ï¼šztunnel ä½¿ç”¨ xDS APIs ä» &lt;code&gt;istiod&lt;/code&gt; è·å–é…ç½®å¹¶æ‰§è¡Œç­–ç•¥ï¼Œç®¡ç† Pod ä¹‹é—´çš„ L4 å’Œ L7 æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;istio-control-plane-istiod&#34;&gt;Istio Control Plane (&lt;code&gt;istiod&lt;/code&gt;)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šIstio çš„æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œè´Ÿè´£ä¸ ztunnel å’Œ waypoint proxy é€šä¿¡ï¼Œæä¾› xDS æ¥å£ç”¨äºåŠ¨æ€é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼š&lt;code&gt;istiod&lt;/code&gt; ä½¿ç”¨ xDS APIs è¿›è¡Œé…ç½®æ¨é€ï¼ŒåŠ¨æ€ç®¡ç† Ambient æ¨¡å¼ä¸­çš„æµé‡ç­–ç•¥ã€è¯ä¹¦åˆ†å‘ä»¥åŠä¸ Kubernetes é›†ç¾¤çš„äº¤äº’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é€æ˜æ€§ä¸éä¾µå…¥æ€§&#34;&gt;é€æ˜æ€§ä¸éä¾µå…¥æ€§&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šAmbient æ¨¡å¼çš„æ¶æ„æ—¨åœ¨å‡å°‘å¯¹åº”ç”¨çš„ä¾µå…¥æ€§ï¼Œåº”ç”¨æ— éœ€æ„ŸçŸ¥æ•°æ®å¹³é¢çš„å­˜åœ¨ï¼ŒPod æ— éœ€é‡å¯æˆ–æ³¨å…¥ Sidecar å³å¯åŠ å…¥ç½‘æ ¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šæé«˜äº†æœåŠ¡ç½‘æ ¼çš„çµæ´»æ€§ï¼Œé™ä½äº†æ“ä½œå¤æ‚åº¦ï¼Œä½¿åº”ç”¨å’ŒåŸºç¡€è®¾æ–½çš„ç”Ÿå‘½å‘¨æœŸæ›´åŠ è§£è€¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;sidecar-proxy&#34;&gt;Sidecar Proxy&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/sidecar-mode.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/sidecar-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;Sidecar æ¨¡å¼&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Sidecar æ¨¡å¼&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šä¼ ç»Ÿ Istio ä¸­çš„ Envoy ä»£ç†ï¼Œä¸åº”ç”¨å®¹å™¨å…±åŒéƒ¨ç½²åœ¨ä¸€ä¸ª Pod ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šå¯¹åº”ç”¨å…·æœ‰ä¾µå…¥æ€§ï¼ŒSidecar å¿…é¡»åœ¨ Pod ä¸­æ³¨å…¥å¹¶ä¼´éšåº”ç”¨è¿è¡Œï¼Œå¢åŠ äº†èµ„æºå¼€é”€ï¼Œå¹¶ä¸”ä½¿åº”ç”¨ä¸ä»£ç†çš„ç”Ÿå‘½å‘¨æœŸè€¦åˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ztunnel-zero-trust-tunnel&#34;&gt;Ztunnel (Zero-Trust Tunnel)&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/ztunnel.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/ztunnel.svg&#34; alt=&#34;image&#34; data-caption=&#34;ztunnel&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ztunnel&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šAmbient æ¨¡å¼ä¸­çš„å…³é”®ç»„ä»¶ï¼Œéƒ¨ç½²ä¸º DaemonSetï¼Œä¸ºæ¯ä¸ªèŠ‚ç‚¹æä¾› L4 å±‚çš„é›¶ä¿¡ä»»éš§é“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨&lt;/strong&gt;ï¼šæä¾› mTLS åŠ å¯†å’ŒåŸºäº SPIFFE ID çš„èº«ä»½éªŒè¯ï¼Œç¡®ä¿èŠ‚ç‚¹å’Œå·¥ä½œè´Ÿè½½ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è§‚æµ‹æ€§&lt;/strong&gt;ï¼šæ”¶é›† L4 å±‚çš„ TCP æŒ‡æ ‡å’Œæ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å¤šè·¯å¤ç”¨å’Œå‡è¡¡&lt;/strong&gt;ï¼šåœ¨èŠ‚ç‚¹ä¹‹é—´å»ºç«‹å®‰å…¨çš„æµé‡éš§é“ï¼Œä»¥ä¼˜åŒ–è¿æ¥å’Œç½‘ç»œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç§Ÿæˆ·æ¶æ„&lt;/strong&gt;ï¼šå•ä¸ª ztunnel å¯ä»¥ä»£è¡¨åŒä¸€èŠ‚ç‚¹ä¸Šçš„å¤šä¸ªå·¥ä½œè´Ÿè½½è¿›è¡Œ L4 æ•°æ®å¹³é¢åŠŸèƒ½å¤„ç†ï¼Œè¿™ä¸æ¯ä¸ªåº”ç”¨ Pod æ‹¥æœ‰è‡ªå·±ä»£ç†çš„ Sidecar æ¨¡å¼å½¢æˆå¯¹æ¯”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯ä¹¦ç®¡ç†&lt;/strong&gt;ï¼šztunnel ä»£è¡¨èŠ‚ç‚¹å†…çš„æ‰€æœ‰ Pod ä» Istio æ§åˆ¶å¹³é¢ (&lt;code&gt;istiod&lt;/code&gt;) è·å– mTLS è¯ä¹¦ï¼Œå¹¶è´Ÿè´£è¯ä¹¦çš„ç®¡ç†å’Œè½®æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;pistioin&lt;/code&gt; å’Œ &lt;code&gt;pistioout&lt;/code&gt;&lt;/strong&gt;ï¼šç”¨äºä¸èŠ‚ç‚¹ä¸Šçš„ &lt;code&gt;istioin&lt;/code&gt; å’Œ &lt;code&gt;istioout&lt;/code&gt; æ¥å£é€šè¿‡ GENEVE éš§é“è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;waypoint-proxy&#34;&gt;Waypoint Proxy&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/waypoint-proxy.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/waypoint-proxy.svg&#34; alt=&#34;image&#34; data-caption=&#34;Waypoint Proxy&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Waypoint Proxy&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šAmbient æ¨¡å¼ä¸­çš„ L7 å±‚ä»£ç†ï¼Œéƒ¨ç½²åœ¨æ¯ä¸ªå‘½åç©ºé—´çº§åˆ«ï¼Œç”¨äºå¤„ç† L7 å±‚è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šæä¾› L7 æˆæƒç­–ç•¥ï¼Œå¦‚åŸºäº HTTP headers çš„è®¿é—®æ§åˆ¶ã€L7 çº§åˆ«çš„é¥æµ‹ç­‰ã€‚Waypoint Proxy åªå¤„ç†éœ€è¦çš„ L7 ä»£ç†æµé‡ï¼Œå…¶ä»– L4 æµé‡ç”± ztunnel å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;geneve-éš§é“-generic-network-virtualization-encapsulation&#34;&gt;GENEVE éš§é“ (Generic Network Virtualization Encapsulation)&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/geneve.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/geneve.svg&#34; alt=&#34;image&#34; data-caption=&#34;GENEVE åè®®ç»„æˆ&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;GENEVE åè®®ç»„æˆ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šç”¨äºåœ¨ Kubernetes èŠ‚ç‚¹ä¹‹é—´å»ºç«‹è™šæ‹Ÿéš§é“è¿æ¥ï¼Œå°†æµé‡ä»èŠ‚ç‚¹ä¸Šçš„ Pod è½¬å‘åˆ° ztunnelã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šGENEVE éš§é“ç”¨äºè¿æ¥èŠ‚ç‚¹ä¸Šçš„è™šæ‹Ÿç½‘ç»œæ¥å£ï¼ˆ&lt;code&gt;istioin&lt;/code&gt; å’Œ &lt;code&gt;istioout&lt;/code&gt;ï¼‰ä¸ ztunnel å†…çš„æ¥å£ï¼ˆ&lt;code&gt;pistioin&lt;/code&gt; å’Œ &lt;code&gt;pistioout&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hbone-http-based-overlay-network-environment&#34;&gt;HBONE (HTTP-Based Overlay Network Environment)&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/hbone.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/hbone.svg&#34; alt=&#34;image&#34; data-caption=&#34;HBONE æ•°æ®åŒ…æ ¼å¼&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;HBONE æ•°æ®åŒ…æ ¼å¼&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;!--
```
+-----------------+
|    IP Header    | &lt;-- æº IPï¼Œç›®æ ‡ IPï¼Œåè®®ç±»å‹
+-----------------+
|    TCP Header   | &lt;-- æºç«¯å£ï¼Œç›®æ ‡ç«¯å£ï¼Œåºåˆ—å·ï¼Œç¡®è®¤å·ï¼Œæ ‡å¿—ä½ç­‰
+-----------------+
|    TLS Header   | &lt;-- æ¡æ‰‹æ¶ˆæ¯ï¼Œè¯ä¹¦ï¼ŒåŠ å¯†åº”ç”¨æ•°æ®
+-----------------+
| HTTP/2 &amp; CONNECT| &lt;-- HTTP æ–¹æ³•ï¼Œç›®æ ‡åœ°å€ï¼Œè¯·æ±‚å¤´ï¼Œè·¯å¾„ç­‰
+-----------------+
|  Application    | &lt;-- åº”ç”¨å±‚æ•°æ®ï¼Œå­—èŠ‚æµï¼Œä¾‹å¦‚ HTTP è¯·æ±‚
+-----------------+
```
--&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šIstio ç‰¹æœ‰çš„å®‰å…¨éš§é“åè®®ï¼Œç”¨äºåœ¨ Ambient æ¨¡å¼ç»„ä»¶ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚HBONE æ˜¯ä¸€ç§åŸºäº HTTP/2 å’Œ HTTP CONNECT å»ºç«‹çš„å®‰å…¨ mTLS åŠ å¯†é€šé“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;ï¼šé€šè¿‡ HTTP/2 è¿›è¡Œå¤šè·¯å¤ç”¨ï¼Œé€šè¿‡ HTTP CONNECT å»ºç«‹éš§é“ï¼Œå¹¶ä½¿ç”¨ mTLS ç¡®ä¿å®‰å…¨æ€§ã€‚è¯¦è§ &lt;a href=&#34;https://istio.io/latest/docs/ambient/architecture/hbone/&#34; title=&#34;Istio æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;istioin-å’Œ-istioout-è™šæ‹Ÿæ¥å£&#34;&gt;Istioin å’Œ Istioout è™šæ‹Ÿæ¥å£&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/ambient-ztunnel-routing.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/ambient-ztunnel-routing.svg&#34; alt=&#34;image&#34; data-caption=&#34;Ambient æ¨¡å¼ä¸­ä¸¤ä¸ªä½äºä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ä¸Šçš„ Pod è®¿é—®è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Ambient æ¨¡å¼ä¸­ä¸¤ä¸ªä½äºä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ä¸Šçš„ Pod è®¿é—®è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šç”± Istio CNI æ’ä»¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé…ç½®çš„ä¸¤ä¸ªè™šæ‹Ÿæ¥å£ï¼Œç”¨äºå¤„ç†è¿›å…¥å’Œç¦»å¼€èŠ‚ç‚¹çš„æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼š&lt;code&gt;istioin&lt;/code&gt; å¤„ç†è¿›å…¥èŠ‚ç‚¹çš„æµé‡ï¼Œ&lt;code&gt;istioout&lt;/code&gt; å¤„ç†ç¦»å¼€èŠ‚ç‚¹çš„æµé‡ã€‚ä¸¤è€…é€šè¿‡ GENEVE éš§é“è¿æ¥åˆ° ztunnel ä¸­ç›¸åº”çš„æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;iptables-å’Œæµé‡é‡å®šå‘&#34;&gt;iptables å’Œæµé‡é‡å®šå‘&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šç”¨äºé…ç½® Linux å†…æ ¸ä¸­çš„æµé‡è§„åˆ™ï¼Œå°†æ¥è‡ª Ambient å·¥ä½œè´Ÿè½½çš„æµé‡è¿›è¡Œé‡å®šå‘å’Œæ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šIstio CNI æ’ä»¶é€šè¿‡ iptables è§„åˆ™ï¼Œå°†æµé‡æ ‡è®°å¹¶é‡å®šå‘åˆ° &lt;code&gt;istioin&lt;/code&gt; æˆ– &lt;code&gt;istioout&lt;/code&gt;ï¼Œç„¶åé€šè¿‡ GENEVE éš§é“ä¼ é€’ç»™ ztunnelã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æµé‡æ‹¦æˆªä¸é‡å®šå‘-traffic-redirection&#34;&gt;æµé‡æ‹¦æˆªä¸é‡å®šå‘ (Traffic Redirection)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šAmbient æ¨¡å¼ä¸­ï¼Œztunnel è´Ÿè´£é€æ˜æ‹¦æˆªæ‰€æœ‰è¿›å‡º &amp;ldquo;in-mesh&amp;rdquo; Pod çš„æµé‡å¹¶å°†å…¶åŠ å¯†åé‡å®šå‘åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šçš„ç›®æ ‡ Podï¼Œç¡®ä¿ç½‘ç»œæµé‡ç¬¦åˆæœåŠ¡ç½‘æ ¼çš„å®‰å…¨ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šé€šè¿‡ Istio CNI æ’ä»¶å®‰è£…çš„ iptables è§„åˆ™æˆ– eBPF ç¨‹åºï¼Œztunnel èƒ½å¤Ÿé€æ˜åœ°æ•è·å·¥ä½œè´Ÿè½½çš„æµé‡ï¼Œå¹¶åœ¨ä¸æ”¹å˜å®¢æˆ·ç«¯åº”ç”¨çš„æƒ…å†µä¸‹è¿›è¡Œå®‰å…¨ä»£ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æµé‡è·¯å¾„åˆ†ç±»&#34;&gt;æµé‡è·¯å¾„åˆ†ç±»&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Out of Mesh&lt;/strong&gt;ï¼šPod æ²¡æœ‰åŠ å…¥æœåŠ¡ç½‘æ ¼ï¼Œæµé‡ä¸ä¼šè¢« Ambient æ•°æ®å¹³é¢å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;In Mesh&lt;/strong&gt;ï¼šPod è¢«çº³å…¥ Ambient æ•°æ®å¹³é¢ï¼ŒL4 å±‚çš„æµé‡è¢« ztunnel æ‹¦æˆªå’Œå¤„ç†ï¼Œæä¾› L4 æˆæƒå’Œå®‰å…¨åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;In Mesh, Waypoint Enabled&lt;/strong&gt;ï¼šPod è¢«çº³å…¥ Ambient æ•°æ®å¹³é¢ä¸”å¯ç”¨äº† waypoint proxyï¼ŒL7 å±‚çš„æµé‡é€šè¿‡ waypoint è¿›è¡Œé«˜çº§ç­–ç•¥å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tproxy&#34;&gt;TPROXY&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/tproxy.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/tproxy.svg&#34; alt=&#34;image&#34; data-caption=&#34;TPROXY ä½œä¸ºé€æ˜ä»£ç†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¯¹å…¶æ— æ„ŸçŸ¥&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;TPROXY ä½œä¸ºé€æ˜ä»£ç†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¯¹å…¶æ— æ„ŸçŸ¥&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šLinux å†…æ ¸åŠŸèƒ½ï¼Œç”¨äºé€æ˜æ‹¦æˆªå’Œé‡å®šå‘ç½‘ç»œæµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šztunnel ä½¿ç”¨ TPROXY æ¥æ‹¦æˆªå’Œå¤„ç†æµé‡ï¼Œä¿ç•™åŸå§‹æº IP å’Œç«¯å£ä¿¡æ¯ï¼Œä»è€Œå®ç°é€æ˜ä»£ç†åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;mutual-tls-mtls&#34;&gt;Mutual TLS (mTLS)&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/istio-mtls-process.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/istio-mtls-process.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio ä¸­çš„å®‰å…¨èº«ä»½æ¶æ„ï¼ˆä»¥ Sidecar æ¨¡å¼ä¸ºä¾‹ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio ä¸­çš„å®‰å…¨èº«ä»½æ¶æ„ï¼ˆä»¥ Sidecar æ¨¡å¼ä¸ºä¾‹ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šä¸€ç§åŒå‘ TLS è®¤è¯æœºåˆ¶ï¼Œç¡®ä¿é€šä¿¡åŒæ–¹çš„èº«ä»½éªŒè¯å’Œæ•°æ®åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šé€šè¿‡ ztunnel å’Œ waypoint proxy ç¡®ä¿å·¥ä½œè´Ÿè½½ä¹‹é—´çš„ mTLS åŠ å¯†ï¼Œå®ç°é›¶ä¿¡ä»»å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¦è§ &lt;a href=&#34;https://jimmysong.io/blog/understanding-the-tls-encryption-in-istio/&#34; title=&#34;å¦‚ä½•ç†è§£ Istio ä¸­çš„ MTLS æµé‡åŠ å¯†ï¼Ÿ&#34;&gt;å¦‚ä½•ç†è§£ Istio ä¸­çš„ MTLS æµé‡åŠ å¯†ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;spiffe-id&#34;&gt;SPIFFE ID&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/spiffe.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/spiffe.svg&#34; alt=&#34;image&#34; data-caption=&#34;SPIFFE ID æ ¼å¼&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;SPIFFE ID æ ¼å¼&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;Istio æœåŠ¡ç½‘æ ¼ä¸­æ‰€æœ‰å·¥ä½œè´Ÿè½½å°†æ ¹æ®å…¶æœåŠ¡è´¦æˆ·æ³¨å†Œ SPIFFE æ ‡å‡†çš„æœåŠ¡èº«ä»½æ ¼å¼ï¼š&lt;code&gt;spiffe://&amp;lt;trust-domain&amp;gt;/ns/&amp;lt;namespace&amp;gt;/sa/&amp;lt;service-account&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šç”¨äºæ ‡è¯†å·¥ä½œè´Ÿè½½çš„èº«ä»½æ ‡è¯†ç¬¦ï¼Œåœ¨æœåŠ¡ç½‘æ ¼ä¸­ç”¨äºèº«ä»½ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šSPIFFE ID è¢«ç”¨äºå¯¹èŠ‚ç‚¹å’Œå·¥ä½œè´Ÿè½½è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥ç¡®ä¿ç½‘ç»œé€šä¿¡çš„å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¦è§ &lt;a href=&#34;https://jimmysong.io/blog/why-istio-need-spire/&#34; title=&#34;ä¸ºä»€ä¹ˆ Istio è¦ä½¿ç”¨ SPIRE åšèº«ä»½è®¤è¯ï¼Ÿ&#34;&gt;ä¸ºä»€ä¹ˆ Istio è¦ä½¿ç”¨ SPIRE åšèº«ä»½è®¤è¯ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ebpf-extended-berkeley-packet-filter&#34;&gt;eBPF (Extended Berkeley Packet Filter)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šeBPF æ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ç§æŠ€æœ¯ï¼Œç”¨äºåœ¨å†…æ ¸ç©ºé—´ä¸­è¿è¡Œæ²™ç›’ç¨‹åºï¼Œå®ç°ç½‘ç»œæ•°æ®åŒ…å¤„ç†ç­‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šeBPF å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„ iptables å’Œ GENEVE éš§é“ï¼Œç”¨äºæµé‡é‡å®šå‘å’Œç®¡ç†ã€‚eBPF æ›´é«˜æ•ˆã€å¤æ‚åº¦æ›´ä½ä¸”æ˜“äºç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;eBPF ç¨‹åº&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;åº”ç”¨å…¥ç«™&lt;/li&gt;
&lt;li&gt;åº”ç”¨å‡ºç«™&lt;/li&gt;
&lt;li&gt;Ztunnel ä¸»æœºå…¥ç«™&lt;/li&gt;
&lt;li&gt;Ztunnel å…¥ç«™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;ï¼šIstio CNI ä½¿ç”¨ eBPF ç¨‹åºå°†å®ƒä»¬æŒ‚è½½åœ¨ç‰¹å®šçš„ TC ç‚¹ï¼Œç”¨äºå¤„ç†åº”ç”¨å’Œ ztunnel çš„ç½‘ç»œæµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;waypoint-proxy-çš„å¼¹æ€§æ‰©å±•&#34;&gt;Waypoint Proxy çš„å¼¹æ€§æ‰©å±•&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/ambient-waypoint-proxy-scale.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/ambient-waypoint-proxy-scale.svg&#34; alt=&#34;image&#34; data-caption=&#34;Waypoing Proxy ä½œä¸º Deployment éƒ¨ç½²åœ¨ Kubernetes ä¸­&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Waypoing Proxy ä½œä¸º Deployment éƒ¨ç½²åœ¨ Kubernetes ä¸­&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šåœ¨ Ambient æ¨¡å¼ä¸­ï¼Œwaypoint proxy å¯ä»¥æ ¹æ®æµé‡éœ€æ±‚åŠ¨æ€æ‰©å±•ï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªå·¥ä½œè´Ÿè½½å®ä¾‹éƒ¨ç½²ç‹¬ç«‹ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šé€šè¿‡åŠ¨æ€æ‰©å±• waypoint proxyï¼Œå¯ä»¥é™ä½åŸºç¡€è®¾æ–½æˆæœ¬å¹¶æé«˜èµ„æºåˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ztunnel-çš„å¼¹æ€§å’Œæ•…éšœæ¢å¤&#34;&gt;Ztunnel çš„å¼¹æ€§å’Œæ•…éšœæ¢å¤&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šztunnel éƒ¨ç½²ä¸º DaemonSetï¼Œå¦‚æœ ztunnel å®¹å™¨å¤±æ•ˆï¼ŒKubernetes ä¼šè‡ªåŠ¨é‡æ–°è°ƒåº¦ï¼Œä»¥ç¡®ä¿èŠ‚ç‚¹æµé‡çš„ç»§ç»­å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šä½¿å¾—æ•…éšœçš„å½±å“èŒƒå›´æœ€å°åŒ–ï¼Œä»…å½±å“è¯¥èŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ip-set-å’Œ-ztunnel-pods-ips&#34;&gt;IP Set å’Œ ztunnel-pods-ips&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šIP Set æ˜¯ç”¨äºå­˜å‚¨ IP åœ°å€çš„å·¥å…·ï¼Œ&lt;code&gt;ztunnel-pods-ips&lt;/code&gt; æ˜¯æ¯ä¸ªèŠ‚ç‚¹ä¸Šç”¨äºå­˜å‚¨ Ambient ç½‘æ ¼ Pod IP çš„é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šIstio CNI æ’ä»¶ä¼šå°†æ¯ä¸ªåŠ å…¥ Ambient ç½‘æ ¼çš„ Pod IP æ·»åŠ åˆ° &lt;code&gt;ztunnel-pods-ips&lt;/code&gt; ä¸­ï¼Œä»¥ç¡®ä¿è¿™äº› Pod çš„æµé‡å¯ä»¥è¢« iptables è§„åˆ™è¯†åˆ«å’Œå¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¿æ¥å¤šè·¯å¤ç”¨-connection-multiplexing&#34;&gt;è¿æ¥å¤šè·¯å¤ç”¨ (Connection Multiplexing)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šåœ¨å•ä¸ªç‰©ç†è¿æ¥ä¸­ä¼ è¾“å¤šæ¡é€»è¾‘è¿æ¥çš„æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨&lt;/strong&gt;ï¼šztunnel å®ç°äº†è¿æ¥å¤šè·¯å¤ç”¨ï¼Œä½¿å¤šä¸ªå·¥ä½œè´Ÿè½½å¯ä»¥å…±äº«ç›¸åŒçš„è¿æ¥ï¼Œæå‡ç½‘ç»œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èŠ‚ç‚¹ç½‘ç»œçš„è™šæ‹Ÿæ¥å£å¯¹-veth&#34;&gt;èŠ‚ç‚¹ç½‘ç»œçš„è™šæ‹Ÿæ¥å£å¯¹ (veth)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰ï¼šæ¯ä¸ª Pod åœ¨è¿è¡Œæ—¶ä¼šåœ¨èŠ‚ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¥å£å¯¹ï¼Œç”¨äºå°† Pod çš„ç½‘ç»œè¿æ¥åˆ°èŠ‚ç‚¹çš„ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Ambient æ¨¡å¼ä¸­çš„åº”ç”¨ï¼šveth æ¥å£ç”¨äºå°† Pod çš„æµé‡è¿æ¥åˆ°èŠ‚ç‚¹çš„è™šæ‹Ÿæ¥å£ï¼ˆå¦‚ &lt;code&gt;istioin&lt;/code&gt; å’Œ &lt;code&gt;istioout&lt;/code&gt;ï¼‰ï¼Œä»è€Œå°†æµé‡å¼•å¯¼è‡³ ztunnel è¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;waypoint-proxy-çš„æµé‡è·¯å¾„&#34;&gt;Waypoint Proxy çš„æµé‡è·¯å¾„&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-terminology/waypoint-proxy-routing.svg&#34; data-img=&#34;/blog/istio-ambient-terminology/waypoint-proxy-routing.svg&#34; alt=&#34;image&#34; data-caption=&#34;Waypoint Proxy çš„æµé‡è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Waypoint Proxy çš„æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šWaypoint Proxy åªå‚ä¸æœåŠ¡å™¨ç«¯çš„æµé‡è·¯å¾„ï¼Œä½œä¸º L7 ä»£ç†æ‰§è¡ŒæœåŠ¡ç«¯çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå½“éƒ¨ç½²äº† Waypoint Proxy æ—¶ï¼Œæ¥è‡ªåŒä¸€æœåŠ¡è´¦æˆ·çš„å·¥ä½œè´Ÿè½½å°†é€šè¿‡ ztunnel é‡å®šå‘è‡³ Waypoint Proxy è¿›è¡Œå¤„ç†ï¼Œç„¶ååˆ°è¾¾ç›®æ ‡ Podï¼Œç¡®ä¿ L7 çº§åˆ«çš„ç­–ç•¥å’Œè®¤è¯å¾—ä»¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;istio-cni-container-network-interface&#34;&gt;Istio CNI (Container Network Interface)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;ï¼šIstio çš„å®¹å™¨ç½‘ç»œæ¥å£æ’ä»¶ï¼Œç”¨äºåœ¨ Kubernetes é›†ç¾¤ä¸­è‡ªåŠ¨é…ç½®æµé‡æ‹¦æˆªè§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šIstio CNI è´Ÿè´£ä¸ºæ¯ä¸ªæ–°åˆ›å»ºæˆ–åŠ å…¥ç½‘æ ¼çš„ Pod è®¾ç½®å¿…è¦çš„ç½‘ç»œé‡å®šå‘è§„åˆ™ã€‚å®ƒé€šè¿‡ä¿®æ”¹ iptables è§„åˆ™æˆ–åº”ç”¨ eBPF ç¨‹åºæ¥ç¡®ä¿æ‰€æœ‰æµé‡èƒ½å¤Ÿè¢« ztunnel æˆ– waypoint proxy æ‹¦æˆªå’Œå¤„ç†ï¼Œä»è€Œå®ç°æœåŠ¡ç½‘æ ¼çš„é€æ˜æµé‡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio CNI Node Agent&lt;/strong&gt;ï¼šIstio CNI Node Agent è´Ÿè´£åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£… Istio CNI æ’ä»¶ï¼Œå¹¶æ›´æ–°èŠ‚ç‚¹çš„ CNI é…ç½®ï¼Œç¡®ä¿å½“ Pod åŠ å…¥æœåŠ¡ç½‘æ ¼æ—¶èƒ½å¤Ÿæ­£ç¡®åœ°é…ç½®æµé‡é‡å®šå‘è§„åˆ™ã€‚åœ¨ Sidecar æ¨¡å¼ä¸­ï¼ŒCNI æ’ä»¶é€šè¿‡ iptables é…ç½® Pod çš„ç½‘ç»œã€‚åœ¨ Ambient æ¨¡å¼ä¸­ï¼ŒCNI æ’ä»¶è´Ÿè´£å°†æ–°çš„ Pod äº‹ä»¶æ¨é€åˆ° Ambient ç›‘æ§æœåŠ¡å™¨ï¼Œä»¥ä¾¿é…ç½® Pod çš„ç½‘ç»œé‡å®šå‘è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Istio Ambient æ¨¡å¼é€šè¿‡å°†æ•°æ®å¹³é¢åŠŸèƒ½åˆ†ä¸º L4 å’Œ L7 å±‚çš„ç‹¬ç«‹ç»„ä»¶ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´è½»é‡ä¸”çµæ´»çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆã€‚è¿™ç§æ–¹å¼ä¸ä»…ç®€åŒ–äº†æœåŠ¡çš„éƒ¨ç½²ï¼Œè¿˜å¤§å¹…é™ä½äº†èµ„æºå¼€é”€ã€‚é€šè¿‡æœ¯è¯­è¡¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¢è®¨äº† Ambient æ¨¡å¼ä¸­çš„å„ç§æ ¸å¿ƒæ¦‚å¿µï¼Œä» ztunnel åˆ° waypoint proxyï¼Œå†åˆ° iptables å’Œ eBPF çš„ä½¿ç”¨ï¼Œå¸®åŠ©ä½ å…¨é¢äº†è§£ Istio Ambient æ¨¡å¼çš„æ¶æ„å’Œè¿è¡Œæœºåˆ¶ã€‚å¦‚æœä½ å¯¹æœåŠ¡ç½‘æ ¼æ„Ÿå…´è¶£æˆ–æ­£åœ¨è€ƒè™‘å¦‚ä½•ä¼˜åŒ–å¾®æœåŠ¡é€šä¿¡ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å…è´¹çš„ AI ç»˜å›¾å·¥å…·æ¨èï¼šRaphael.app</title>
      <link>https://jimmysong.io/blog/free-ai-drawing-tool-raphael/</link>
      <pubDate>Tue, 21 Jan 2025 10:02:05 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/free-ai-drawing-tool-raphael/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨å¦‚ä»Šå„ç§ AI å·¥å…·å±‚å‡ºä¸ç©·çš„æ—¶ä»£ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¥½ç”¨åˆå…è´¹çš„ç»˜å›¾å·¥å…·çœŸçš„ä¸å®¹æ˜“ã€‚è€Œ &lt;a href=&#34;https://raphael.app/&#34; title=&#34;Raphael.app&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Raphael.app&lt;/a&gt; å°±æ˜¯ä¸€æ¬¾éå¸¸å€¼å¾—ä¸€è¯•çš„ AI ç»˜å›¾å·¥å…·ã€‚å®ƒç®€å•æ˜“ç”¨ï¼Œè€Œä¸”ç”¨è‹±æ–‡æç¤ºè¯å°±èƒ½ç”Ÿæˆæ•ˆæœä¸é”™çš„å›¾ç‰‡ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/free-ai-drawing-tool-raphael/raphael.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/free-ai-drawing-tool-raphael/raphael.webp&#34; alt=&#34;image&#34; data-caption=&#34;Raphael.app é¡µé¢&#34;&gt;
  
  
  &lt;figcaption&gt;Raphael.app é¡µé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;raphael-ç®€ä»‹&#34;&gt;Raphael ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;è¿™æ¬¾ä»¥æ–‡è‰ºå¤å…´ä¸‰æ°ä¹‹ä¸€æ‹‰æ–å°”ï¼ˆRaphaelï¼Œå…¨åï¼šRaffaello Sanzio da Urbinoï¼Œ1483 å¹´ 4 æœˆ 6 æ—¥ï¼1520 å¹´ 4 æœˆ 6 æ—¥ï¼‰å‘½åçš„å·¥å…·ï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®Œå…¨å…è´¹&lt;/strong&gt;ï¼šå¸‚é¢ä¸Šå¾ˆå¤š AI ç»˜å›¾å·¥å…·è¦ä¹ˆåŠŸèƒ½å—é™ï¼Œè¦ä¹ˆéœ€è¦è®¢é˜…æ‰èƒ½è§£é”æ›´å¤šåŠŸèƒ½ï¼Œè€Œ Raphael å®Œå…¨å…è´¹ï¼ˆè‡³å°‘åˆ°æ’°å†™æœ¬æ–‡ä¸ºæ­¢ï¼Œç½‘ç«™ä¸­æ‰¿è¯ºå…è´¹ï¼‰ï¼Œæ— éœ€ä»˜è´¹ä¹Ÿèƒ½ç”¨å®ƒåˆ›é€ å‡ºä¸é”™çš„ä½œå“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒè‹±æ–‡æç¤º&lt;/strong&gt;ï¼šåªéœ€è¦ç”¨è‹±æ–‡ç®€å•æè¿°ä½ æƒ³è¦çš„å›¾ç‰‡ï¼Œæ¯”å¦‚â€œA cat-like colorful catâ€ï¼ŒRaphael å°±å¯ä»¥æ ¹æ®æç¤ºç”Ÿæˆå¯¹åº”çš„ç”»é¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆæœè¿˜ä¸é”™&lt;/strong&gt;ï¼šè™½ç„¶å’Œä¸€äº›é«˜ç«¯ä»˜è´¹å·¥å…·ç›¸æ¯”è¿˜æœ‰æå‡ç©ºé—´ï¼Œä½† Raphael ç”Ÿæˆçš„å›¾ç‰‡å·²ç»è¶³å¤Ÿè®©äººæ»¡æ„äº†ï¼Œå°¤å…¶å¯¹äºæ–°æ‰‹æˆ–å°è¯• AI ç»˜å›¾çš„äººæ¥è¯´ï¼Œå®ƒå®Œå…¨å¤Ÿç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;è°é€‚åˆç”¨-raphael&#34;&gt;è°é€‚åˆç”¨ Raphaelï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‰ºæœ¯çˆ±å¥½è€…&lt;/strong&gt;ï¼šå¯ä»¥ç”¨å®ƒæ¥å¯»æ‰¾åˆ›ä½œçµæ„Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å®¹åˆ›ä½œè€…&lt;/strong&gt;ï¼šä¸ºåšå®¢ã€è§†é¢‘æˆ–ç¤¾äº¤åª’ä½“å¢åŠ ç‹¬ç‰¹çš„è§†è§‰å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­¦ç”Ÿå’Œè€å¸ˆ&lt;/strong&gt;ï¼šä¸ºä½œä¸šæˆ–è¯¾ä»¶å¢æ·»ä¸€äº›åˆ›æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AI ç»˜å›¾åˆå­¦è€…&lt;/strong&gt;ï¼šé›¶æˆæœ¬å°è¯• AI è‰ºæœ¯åˆ›ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;å¦‚ä½•ä½¿ç”¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æ“ä½œéå¸¸ç®€å•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€ &lt;a href=&#34;https://raphael.app/&#34; title=&#34;raphael.app&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;raphael.app&lt;/a&gt;ï¼Œæ— éœ€æ³¨å†Œæˆ–ç™»å½•ã€‚&lt;/li&gt;
&lt;li&gt;è¾“å…¥ä½ æƒ³è¦çš„å›¾ç‰‡æè¿°ï¼Œç”¨è‹±æ–‡æç¤ºè¯æ•ˆæœä¼šæ›´å¥½ã€‚&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»â€œç”Ÿæˆâ€ï¼Œç­‰å¾… 10 ç§’é’Ÿå·¦å³ AI ç”Ÿæˆå›¾ç‰‡ï¼Œè¿™ä¸€æ­¥å¯èƒ½éœ€è¦ç»è¿‡ CloudFlare çš„è‡ªåŠ¨äººæœºéªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½ è¿˜å¯ä»¥é€‰æ‹©å¯¹ç”Ÿæˆçš„å›¾ç‰‡è¿›è¡Œç²¾ä¿®ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‹è½½æˆ–è€…ç›´æ¥åˆ†äº«ç”Ÿæˆçš„ä½œå“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/free-ai-drawing-tool-raphael/cat-bird.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/free-ai-drawing-tool-raphael/cat-bird.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä½¿ç”¨ Raphael ç”Ÿæˆçš„å›¾ç‰‡ï¼ˆä¸€åªé•¿çš„åƒçŒ«çš„äº”å½©ç¼¤çº·çš„é¸Ÿï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;ä½¿ç”¨ Raphael ç”Ÿæˆçš„å›¾ç‰‡ï¼ˆä¸€åªé•¿çš„åƒçŒ«çš„äº”å½©ç¼¤çº·çš„é¸Ÿï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Raphael æ˜¯ä¸€ä¸ªç”¨èµ·æ¥ç‰¹åˆ«æ–¹ä¾¿çš„ AI ç»˜å›¾å·¥å…·ï¼Œæ—¢å…è´¹åˆèƒ½ç”Ÿæˆæ•ˆæœä¸é”™çš„å›¾ç‰‡ã€‚ä¸ç®¡ä½ æ˜¯æƒ³æ‰¾çµæ„Ÿè¿˜æ˜¯å•çº¯ç©ç© AIï¼Œéƒ½éå¸¸å€¼å¾—ä¸€è¯•ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¢ç´¢äº‘åŸç”Ÿå¯è§‚æµ‹æ€§ï¼šæŠ€æœ¯ä¸å›¢é˜Ÿåä½œçš„æ·±åº¦ç»“åˆ</title>
      <link>https://jimmysong.io/blog/cloud-native-observability-devops/</link>
      <pubDate>Mon, 20 Jan 2025 16:50:25 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/cloud-native-observability-devops/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘è¯»äº† TheNewStack å‘å¸ƒçš„ç”µå­ä¹¦ã€Š&lt;a href=&#34;https://thenewstack.io/ebooks/observability/cloud-native-observability-for-devops-teams/&#34; title=&#34;Cloud Native Observability for DevOps Teams&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cloud Native Observability for DevOps Teams&lt;/a&gt;ã€‹ï¼Œè™½ç„¶è¿™æœ¬ä¹¦æ˜¯ 2022 å¹´å‡ºå“çš„ï¼Œä½†ç»™æˆ‘äº†å¾ˆå¤§çš„å¯å‘ã€‚å®ƒä¸ä»…è®¨è®ºäº†æŠ€æœ¯å·¥å…·ï¼Œè¿˜æ·±å…¥æ¢è®¨äº†å›¢é˜Ÿåä½œã€æ–‡åŒ–å»ºè®¾å’Œæœªæ¥è¶‹åŠ¿çš„ç»“åˆç‚¹ã€‚åœ¨è¿™æœ¬ä¹¦é‡Œï¼Œâ€œè§‚å¯Ÿâ€ä¸ä»…ä»…æ˜¯çœ‹åˆ°æ•°æ®ï¼Œè€Œæ˜¯çœ‹æ¸…èƒŒåçš„æ„ä¹‰ã€‚å¯ä»¥è¯´ï¼Œå®ƒä»æ ¹æœ¬ä¸Šæ”¹å˜äº†æˆ‘å¯¹å¯è§‚æµ‹æ€§çš„ç†è§£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ ¸å¿ƒå†…å®¹&#34;&gt;æ ¸å¿ƒå†…å®¹&lt;/h2&gt;
&lt;p&gt;æœ¬ä¹¦ä»åŸºç¡€å®šä¹‰åˆ°å®é™…æ“ä½œï¼Œç³»ç»Ÿåœ°é˜è¿°äº†äº‘åŸç”Ÿå¯è§‚æµ‹æ€§çš„é‡è¦æ€§åŠå…¶å®ç°æ–¹å¼ã€‚é€šè¿‡å…·ä½“çš„å·¥å…·å’Œç­–ç•¥ï¼Œå®ƒå¸®åŠ©è¯»è€…ç†è§£å¦‚ä½•æ•´åˆæŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ªå’Œæ··æ²Œå·¥ç¨‹ç­‰ç»´åº¦ï¼Œå…¨é¢æŒæ§åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¥åº·çŠ¶å†µï¼Œä¸º DevOps å›¢é˜Ÿæä¾›é«˜æ•ˆçš„å†³ç­–æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯è§‚æµ‹æ€§çš„å®šä¹‰ä¸ä»·å€¼&#34;&gt;å¯è§‚æµ‹æ€§çš„å®šä¹‰ä¸ä»·å€¼&lt;/h3&gt;
&lt;p&gt;ä¹¦ä¸­å¼€ç¯‡å°±ç‚¹æ˜ï¼šå¯è§‚æµ‹æ€§æ˜¯é€šè¿‡ç³»ç»Ÿçš„å¤–éƒ¨ä¿¡å·æ¨æ–­å†…éƒ¨çŠ¶æ€çš„èƒ½åŠ›ã€‚ä¸ä»…æ˜¯ä¼ ç»Ÿçš„æŒ‡æ ‡ï¼ˆMetricsï¼‰ã€æ—¥å¿—ï¼ˆLogsï¼‰ã€è¿½è¸ªï¼ˆTracingï¼‰ä¸‰æ ¹æ”¯æŸ±çš„ç»„åˆï¼Œè€Œæ˜¯ä¸€ç§ç»¼åˆæ€§ã€å…¨å±€åŒ–çš„åˆ†ææ–¹æ³•ã€‚æ­£å¦‚ä½œè€…æ‰€è¯´ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Observability isnâ€™t just the ability to see each piece at a time; itâ€™s also the ability to understand the broader picture and how these pieces combine.&amp;rdquo;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;äº‘åŸç”Ÿç¯å¢ƒçš„æŒ‘æˆ˜&#34;&gt;äº‘åŸç”Ÿç¯å¢ƒçš„æŒ‘æˆ˜&lt;/h3&gt;
&lt;p&gt;ä¹¦ä¸­ç‰¹åˆ«å¼ºè°ƒäº† Kubernetes ç¯å¢ƒä¸­æ—¥å¿—å’Œç›‘æ§çš„å¤æ‚æ€§ã€‚Kubernetes æ²¡æœ‰å†…ç½®çš„å®Œæ•´å¯è§‚æµ‹æ€§è§£å†³æ–¹æ¡ˆï¼Œåªæä¾›äº†åŸºç¡€åŠŸèƒ½ï¼Œæ¯”å¦‚ &lt;code&gt;kubectl&lt;/code&gt; æŸ¥çœ‹å¯¹è±¡çŠ¶æ€ï¼Œè€Œæ›´é«˜çº§çš„åŠŸèƒ½éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·å¦‚ Fluentd å’Œ Prometheusã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®è·µæŒ‡å—&#34;&gt;å®è·µæŒ‡å—&lt;/h3&gt;
&lt;p&gt;ä¹¦ä¸­åœ¨å®è·µéƒ¨åˆ†æåˆ°äº†å¤šç§å®ç°å¯è§‚æµ‹æ€§çš„å…·ä½“ç­–ç•¥å’Œå·¥å…·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨æ—¥å¿—&lt;/strong&gt;ï¼šé€šè¿‡ Fluentd æˆ–ç±»ä¼¼å·¥å…·é‡‡é›†å®¹å™¨å†…çš„æ ‡å‡†è¾“å‡ºæ—¥å¿—ï¼Œå¸®åŠ©å¼€å‘è€…å®šä½åº”ç”¨é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤æ—¥å¿—&lt;/strong&gt;ï¼šæ”¶é›† Kubernetes æ ¸å¿ƒç»„ä»¶å¦‚ kube-apiserver å’Œ etcd çš„æ—¥å¿—ï¼Œé€‚åˆæ’æŸ¥ç³»ç»Ÿçº§åˆ«çš„æ•…éšœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶æ—¥å¿—&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;kubectl get events&lt;/code&gt; å¿«é€Ÿäº†è§£é›†ç¾¤ä¸­èµ„æºçš„çŠ¶æ€å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¡è®¡æ—¥å¿—&lt;/strong&gt;ï¼šè®°å½• API è¯·æ±‚ï¼Œä¾¿äºå®‰å…¨å®¡æŸ¥å’Œæƒé™é—®é¢˜çš„å®šä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··æ²Œå·¥ç¨‹&lt;/strong&gt;ï¼šåˆ©ç”¨å·¥å…·å¦‚ Chaos Mesh å’Œ Litmus Chaosï¼ŒéªŒè¯ç³»ç»Ÿåœ¨é«˜å‹æˆ–å¼‚å¸¸æƒ…å†µä¸‹çš„è¡¨ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›å®è·µæŒ‡å—å¼ºè°ƒäº†å·¥å…·ä¸ç­–ç•¥çš„ç»“åˆï¼Œä»è€Œå®ç°å…¨é¢çš„å¯è§‚æµ‹æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘çš„æ€è€ƒä¸è§‚ç‚¹&#34;&gt;æˆ‘çš„æ€è€ƒä¸è§‚ç‚¹&lt;/h2&gt;
&lt;h3 id=&#34;è¶…è¶Šæ•°æ®æœ¬èº«çš„è§‚å¯ŸåŠ›&#34;&gt;è¶…è¶Šæ•°æ®æœ¬èº«çš„â€œè§‚å¯ŸåŠ›â€&lt;/h3&gt;
&lt;p&gt;ä¹¦ä¸­å¼ºè°ƒï¼Œå•çº¯æ”¶é›†æ•°æ®å¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå…³é”®åœ¨äºè·¨ç»´åº¦æ•°æ®çš„æ•´åˆä¸åˆ†æã€‚ä¾‹å¦‚ï¼Œåœ¨æ€§èƒ½é—®é¢˜æ’æŸ¥æ—¶ï¼ŒæŒ‡æ ‡å’Œè¿½è¸ªå¾€å¾€æ— æ³•ç›´æ¥å…³è”ï¼Œè€Œè¿™æ­£æ˜¯ç°æœ‰å·¥å…·çš„çŸ­æ¿ã€‚æœªæ¥ï¼Œç»Ÿä¸€æ•°æ®å­˜å‚¨å’Œåˆ†æè§†è§’çš„å·¥å…·ï¼Œæ¯”å¦‚ OpenTelemetry æå€¡çš„æ ‡å‡†åŒ–æ–¹æ³•ï¼Œå¯èƒ½æ˜¯çªç ´å£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ai-ä¸å¯è§‚æµ‹æ€§çš„ç»“åˆ&#34;&gt;AI ä¸å¯è§‚æµ‹æ€§çš„ç»“åˆ&lt;/h3&gt;
&lt;p&gt;éšç€ AI æŠ€æœ¯çš„å‘å±•ï¼Œå¯è§‚æµ‹æ€§å·¥å…·ä¹Ÿå¯ä»¥æ›´æ™ºèƒ½åŒ–ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡æœºå™¨å­¦ä¹ é¢„æµ‹å¼‚å¸¸ï¼Œæˆ–æ˜¯è‡ªåŠ¨æ¨èä¼˜åŒ–ç­–ç•¥ã€‚è¿™ä¸ä»…èƒ½å‡å°‘äººä¸ºå¹²é¢„ï¼Œè¿˜èƒ½æå‡æ•…éšœå“åº”é€Ÿåº¦ã€‚æ­£å¦‚ä½œè€…åœ¨æ··æ²Œå·¥ç¨‹éƒ¨åˆ†æåˆ°çš„ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Instead of waiting for something to happen and finding out how your application fares, you put it through duress under controlled conditions to identify weaknesses and fix them.&amp;rdquo;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;ä»å›¢é˜Ÿåä½œåˆ°æ–‡åŒ–è½¬å‹&#34;&gt;ä»å›¢é˜Ÿåä½œåˆ°æ–‡åŒ–è½¬å‹&lt;/h3&gt;
&lt;p&gt;ä¹¦ä¸­æåˆ°â€œDevOps çš„ç»ˆæç›®æ ‡æ˜¯è·¨å›¢é˜Ÿçš„åä½œä¸åŒç†å¿ƒâ€ï¼Œè¿™ç‚¹æ·±æœ‰å…±é¸£ã€‚å°¤å…¶æ˜¯åœ¨å¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¼€å‘å’Œè¿ç»´å›¢é˜Ÿå¾€å¾€å„è‡ªä¸ºæˆ˜ï¼Œå¯¼è‡´æ²Ÿé€šæ–­å±‚ã€‚è·¨å›¢é˜Ÿåä½œçš„å…³é”®åœ¨äºå·¥å…·æä¾›çš„é€æ˜æ€§ä¸å…±äº«è§†è§’ï¼Œè€Œä¸ä»…ä»…æ˜¯æŠ€æœ¯èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è¿™æœ¬ä¹¦çš„ç‹¬åˆ°ä¹‹å¤„åœ¨äºå®ƒä»æŠ€æœ¯å’Œäººæ–‡ä¸¤ä¸ªè§’åº¦åŒæ—¶åˆ‡å…¥ï¼Œå®ƒè®©æˆ‘æ„è¯†åˆ°ï¼Œå¯è§‚æµ‹æ€§ä¸ä»…æ˜¯ä¸€ç»„å·¥å…·çš„é›†åˆï¼Œè€Œæ˜¯ä¸€ç§æ–‡åŒ–ã€ä¸€ç§èƒ½åŠ›ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´æ·±åˆ»åœ°ç†è§£ç³»ç»Ÿï¼Œæ¨åŠ¨å›¢é˜Ÿåä½œï¼Œå¹¶åœ¨å¤æ‚çš„äº‘åŸç”Ÿç¯å¢ƒä¸­å»ºç«‹èµ·çœŸæ­£çš„â€œé€æ˜åŒ–â€ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘æƒ³å¼•ç”¨ä¹¦ä¸­ä¸€æ®µéå¸¸æ‰“åŠ¨æˆ‘çš„è¯æ¥ç»“å°¾ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;Observability lets you see the beautiful and complete picture that is your production software systems.&amp;rdquo;&lt;/p&gt;&lt;/blockquote&gt;

      </description>
    </item>
                           
    <item>
      <title>ä½¿ç”¨ Envoy å®ç° HTTP/2 CONNECT éš§é“ï¼šåŸç†ä¸å®è·µ</title>
      <link>https://jimmysong.io/blog/http2-envoy-tunnel-demo/</link>
      <pubDate>Tue, 14 Jan 2025 18:28:37 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/http2-envoy-tunnel-demo/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨æœ€è¿‘å¯¹ Istio Ambient æ¨¡å¼çš„ç ”ç©¶ä¸­ï¼Œæˆ‘å‘ç° HTTP2 Connect æ–¹æ³•è¢«ç”¨ä½œåˆ›å»ºéš§é“çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä»¥å®ç°é€æ˜æµé‡çš„æ‹¦æˆªå’Œè½¬å‘ã€‚HTTP/2 CONNECT éš§é“æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥åœ¨å·²æœ‰çš„ HTTP/2 è¿æ¥ä¸­åˆ›å»ºé«˜æ•ˆçš„éš§é“ï¼Œç”¨äºä¼ è¾“åŸå§‹çš„ TCP æ•°æ®ã€‚è¿™ç¯‡æ–‡ç« é€šè¿‡ä¸€ä¸ªç®€å•çš„ Demoï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Envoy æ¥å®ç° HTTP/2 CONNECT éš§é“çš„åŸºæœ¬åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-http2-connect-æ–¹æ³•ä»¥åŠ-hbone-éš§é“&#34;&gt;ä»€ä¹ˆæ˜¯ HTTP2 Connect æ–¹æ³•ä»¥åŠ HBONE éš§é“ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;HTTP2 Connect æ–¹æ³•æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥åˆ›å»ºéš§é“ï¼Œç”¨äºé€æ˜åœ°ä¼ è¾“æ•°æ®ã€‚ç‰¹åˆ«æ˜¯åœ¨ Istio çš„ Ambient æ¨¡å¼ä¸­ï¼Œå®ƒä¸ºä»£ç†æ•°æ®å¹³é¢ä¹‹é—´çš„é€šä¿¡æä¾›äº†ä¸€ç§é«˜æ•ˆçš„æ‰‹æ®µã€‚HBONEï¼ˆHTTP-Based Overlay Network Environmentï¼‰éš§é“åˆ™æ˜¯åŸºäºè¿™ç§ HTTP2 Connect æŠ€æœ¯çš„å®ç°ï¼Œç”¨äº Istio ä¸­çš„é€æ˜æµé‡æ‹¦æˆªå’Œè½¬å‘ã€‚é€šè¿‡ä½¿ç”¨ HBONEï¼Œæ•°æ®å¯ä»¥æœ‰æ•ˆåœ°é€šè¿‡ HTTP2 éš§é“å®‰å…¨ä¼ è¾“ï¼Œæ›¿ä»£äº†ä¼ ç»Ÿçš„ Sidecar æ¨¡å¼ã€‚è¿™ä¸€åˆ›æ–°è®¾è®¡æå¤§åœ°ç®€åŒ–äº†æœåŠ¡ç½‘æ ¼çš„ç®¡ç†å’Œéƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;HBONE æ˜¯ Istio ç‰¹æœ‰çš„æœ¯è¯­ï¼Œå®ƒæ˜¯ä¸€ç§å®‰å…¨éš§é“åè®®ï¼Œç”¨äºåœ¨ Istio ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚åœ¨å½“å‰çš„ Istio å®ç°ä¸­ï¼ŒHBONE åè®®åŒ…å«äº†ä¸‰ä¸ªå¼€æ”¾æ ‡å‡†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;HTTP/2&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP CONNECT&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mutual TLS (mTLS)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HTTP CONNECT ç”¨äºå»ºç«‹éš§é“è¿æ¥ï¼ŒmTLS ç”¨äºå®‰å…¨åœ°åŠ å¯†è¿æ¥ï¼Œè€Œ HTTP/2 ç”¨äºåœ¨å•ä¸€å®‰å…¨éš§é“ä¸­å¤šè·¯å¤ç”¨åº”ç”¨è¿æ¥æµå¹¶ä¼ è¾“é™„åŠ çš„æµçº§å…ƒæ•°æ®ã€‚æ›´å¤šå…³äº HBONE éš§é“çš„ç»†èŠ‚å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&#34;https://istio.io/latest/docs/ambient/architecture/hbone/&#34; title=&#34;HBONE è¯¦ç»†ä»‹ç»&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HBONE è¯¦ç»†ä»‹ç»&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-http2-connect-å»ºç«‹éš§é“çš„åŸºæœ¬åŸç†&#34;&gt;ä½¿ç”¨ HTTP2 Connect å»ºç«‹éš§é“çš„åŸºæœ¬åŸç†&lt;/h2&gt;
&lt;p&gt;HTTP2 Connect æ–¹æ³•å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ä¼¼äº VPN çš„éš§é“ï¼Œé€šè¿‡è¿™ä¸ªéš§é“å¯ä»¥å®‰å…¨åœ°ä¼ é€’æ•°æ®ã€‚å»ºç«‹éš§é“çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªæ™®é€šçš„ TCP æˆ– HTTP é“¾æ¥è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ä»£ç†æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘ç›®æ ‡æœåŠ¡å™¨å‘é€ä¸€ä¸ªå¸¦æœ‰ CONNECT æ–¹æ³•çš„ HTTP2 è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœåŠ¡å™¨å…è®¸å»ºç«‹éš§é“ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ä¸€ä¸ª HTTP2 200 OK çš„å“åº”ç»™ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;éšåï¼Œå®¢æˆ·ç«¯ã€ä»£ç†å’ŒæœåŠ¡å™¨ä¹‹é—´çš„åŒå‘æµæ•°æ®å°±å¯ä»¥é€šè¿‡è¿™ä¸ªéš§é“è¿›è¡Œä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•èƒ½å¤Ÿä½¿å¾—æ•°æ®çš„ä¼ è¾“è¿‡ç¨‹æ›´åŠ é€æ˜ä¸”å®‰å…¨ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦é«˜æ•ˆé€šä¿¡å’Œç«¯åˆ°ç«¯åŠ å¯†çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† HTTP2 Connect æ–¹æ³•å»ºç«‹éš§é“çš„åŸºæœ¬è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/http2-envoy-tunnel-demo/1f4003a92425618f8bf5b9c1403169a7.svg&#34; data-img=&#34;/blog/http2-envoy-tunnel-demo/1f4003a92425618f8bf5b9c1403169a7.svg&#34; alt=&#34;image&#34; data-caption=&#34;HTTP2 Connect æ–¹æ³•å»ºç«‹éš§é“çš„åŸºæœ¬è¿‡ç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;HTTP2 Connect æ–¹æ³•å»ºç«‹éš§é“çš„åŸºæœ¬è¿‡ç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;demoä½¿ç”¨-envoy-ä¸ä¸Šæ¸¸-server-å»ºç«‹-http2-connect-éš§é“&#34;&gt;Demoï¼šä½¿ç”¨ Envoy ä¸ä¸Šæ¸¸ Server å»ºç«‹ HTTP/2 Connect éš§é“&lt;/h2&gt;
&lt;p&gt;æœ¬ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªåŸºç¡€åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ï¼šå‘ Envoy ä»£ç†å‘é€æ–‡æœ¬æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy&lt;/strong&gt;ï¼šæ¥æ”¶å®¢æˆ·ç«¯çš„ TCP æ•°æ®ï¼Œå°†å…¶å°è£…ä¸º HTTP/2 CONNECT è¯·æ±‚ï¼Œå¹¶ä¸ä¸Šæ¸¸æœåŠ¡å™¨å»ºç«‹åŠ å¯†éš§é“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;ï¼šæ¥æ”¶æ¥è‡ª Envoy çš„ HTTP/2 CONNECT æµé‡ï¼Œè§£å°è£…å¹¶è¿”å›å“åº”ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ¶æ„å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/http2-envoy-tunnel-demo/b25a0e3bb0f015f7a0c8b280d1025f88.svg&#34; data-img=&#34;/blog/http2-envoy-tunnel-demo/b25a0e3bb0f015f7a0c8b280d1025f88.svg&#34; alt=&#34;image&#34; data-caption=&#34;æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ Node.js æ¥ç¼–å†™å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå¹¶å°†æœåŠ¡ç«¯å’Œ Envoy ä»£ç†è¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œåœ¨æœ¬åœ°é€šè¿‡å®¢æˆ·ç«¯è®¿é—® Envoy ä»£ç†ä»è€Œè¾¾åˆ°è®¿é—®å®¢æˆ·ç«¯çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæ•´çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;envoy-http2-tunnel/
â”œâ”€â”€ certs/
â”‚   â”œâ”€â”€ openssl.cnf
â”‚   â”œâ”€â”€ server.crt
â”‚   â”œâ”€â”€ server.key
â”œâ”€â”€ client/
â”‚   â””â”€â”€ client.js
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ envoy.yaml
â””â”€â”€ server/
    â”œâ”€â”€ Dockerfile
    â””â”€â”€ server.js
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ ¸å¿ƒåŠŸèƒ½å±•ç¤º&#34;&gt;æ ¸å¿ƒåŠŸèƒ½å±•ç¤º&lt;/h3&gt;
&lt;h4 id=&#34;1-http2-connect-éš§é“çš„åŸºæœ¬å®ç°&#34;&gt;&lt;strong&gt;1. HTTP/2 CONNECT éš§é“çš„åŸºæœ¬å®ç°&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯é€šè¿‡æ™®é€šçš„ TCP è¿æ¥ä¸ Envoy é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;Envoy å°† TCP æ•°æ®å°è£…ä¸º HTTP/2 CONNECT è¯·æ±‚ï¼Œå‘é€åˆ°ä¸Šæ¸¸æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨æ¥æ”¶å¹¶è§£å°è£…éš§é“ä¸­çš„æ•°æ®ï¼Œè¿›è¡Œå¤„ç†åè¿”å›å“åº”ã€‚&lt;/li&gt;
&lt;li&gt;éš§é“é€šä¿¡å¯¹å®¢æˆ·ç«¯å®Œå…¨é€æ˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-envoy-çš„é€æ˜ä»£ç†èƒ½åŠ›&#34;&gt;&lt;strong&gt;2. Envoy çš„é€æ˜ä»£ç†èƒ½åŠ›&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Envoy ä½œä¸ºä¸­é—´ä»£ç†ï¼Œå°†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é€»è¾‘å®Œå…¨å°è£…ã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ— éœ€æ”¯æŒå¤æ‚çš„åè®®ï¼ˆå¦‚ HTTP/2 æˆ– TLSï¼‰ï¼ŒEnvoy ä»£ç†å®Œæˆæ‰€æœ‰åè®®è½¬æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-åŠ å¯†é€šä¿¡çš„å®ç°&#34;&gt;&lt;strong&gt;3. åŠ å¯†é€šä¿¡çš„å®ç°&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Envoy ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é€šè¿‡ TLS åŠ å¯†ï¼Œç¡®ä¿éš§é“å†…çš„æ•°æ®å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ç»ˆæ­¢ TLSï¼Œå¤„ç†è§£å¯†åçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-éš§é“çš„ç®€åŒ–ä½¿ç”¨åœºæ™¯&#34;&gt;&lt;strong&gt;4. éš§é“çš„ç®€åŒ–ä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡è¯¥ Demoï¼Œå¯ä»¥å¿«é€Ÿç†è§£ HTTP/2 CONNECT éš§é“çš„å»ºç«‹å’ŒåŸºæœ¬æ•°æ®ä¼ è¾“æµç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¯å¢ƒå‡†å¤‡&#34;&gt;ç¯å¢ƒå‡†å¤‡&lt;/h3&gt;
&lt;h4 id=&#34;1-å®‰è£…-nodejs&#34;&gt;1. å®‰è£… Node.js&lt;/h4&gt;
&lt;p&gt;ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£… &lt;strong&gt;Node.js&lt;/strong&gt;ï¼ˆç‰ˆæœ¬ &amp;gt;= &lt;strong&gt;10.10.0&lt;/strong&gt;ï¼‰ï¼Œå› ä¸º &lt;code&gt;http2&lt;/code&gt; æ¨¡å—åœ¨è¯¥ç‰ˆæœ¬åç¨³å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸‹è½½é“¾æ¥ï¼š&lt;/strong&gt; &lt;a href=&#34;https://nodejs.org/&#34; title=&#34;Node.js å®˜æ–¹ç½‘ç«™&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Node.js å®˜æ–¹ç½‘ç«™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-å®‰è£…-docker-å’Œ-docker-compose&#34;&gt;2. å®‰è£… Docker å’Œ Docker Compose&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Docker ä¸‹è½½é“¾æ¥ï¼š&lt;/strong&gt; &lt;a href=&#34;https://www.docker.com/get-started&#34; title=&#34;Docker å®˜æ–¹ç½‘ç«™&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker å®˜æ–¹ç½‘ç«™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker Compose ä¸‹è½½é“¾æ¥ï¼š&lt;/strong&gt; &lt;a href=&#34;https://docs.docker.com/compose/install/&#34; title=&#34;Docker Compose å®˜æ–¹æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker Compose å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-åˆ›å»ºé¡¹ç›®ç›®å½•&#34;&gt;3. åˆ›å»ºé¡¹ç›®ç›®å½•&lt;/h4&gt;
&lt;p&gt;åœ¨ä½ çš„å·¥ä½œç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•å¹¶è¿›å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir envoy-http2-tunnel
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; envoy-http2-tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç”Ÿæˆè‡ªç­¾åè¯ä¹¦&#34;&gt;ç”Ÿæˆè‡ªç­¾åè¯ä¹¦&lt;/h3&gt;
&lt;p&gt;ç”±äº Envoy å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦åŠ å¯†é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦ç”ŸæˆåŒ…å«æ­£ç¡®é…ç½®çš„è‡ªç­¾åè¯ä¹¦ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-åˆ›å»ºè¯ä¹¦ç›®å½•å’Œ-openssl-é…ç½®æ–‡ä»¶&#34;&gt;1. åˆ›å»ºè¯ä¹¦ç›®å½•å’Œ OpenSSL é…ç½®æ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;åˆ›å»º &lt;code&gt;certs&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir certs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; certs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»º &lt;code&gt;openssl.cnf&lt;/code&gt;ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;[ req ]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;default_bits&lt;/span&gt;       &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;2048&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;default_md&lt;/span&gt;         &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;sha256&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;prompt&lt;/span&gt;             &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;distinguished_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;dn&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;req_extensions&lt;/span&gt;     &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;req_ext&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;[ dn ]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;C&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;US&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;ST&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;California&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;L&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;San Francisco&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;O&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;My Company&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;OU&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;My Division&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;CN&lt;/span&gt;           &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;[ req_ext ]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;subjectAltName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;@alt_names&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;[ alt_names ]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;DNS.1&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;DNS.2&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;localhost&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;2-ç”Ÿæˆå¯†é’¥å’Œè¯ä¹¦&#34;&gt;2. ç”Ÿæˆå¯†é’¥å’Œè¯ä¹¦&lt;/h4&gt;
&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå¯†é’¥å’Œè¯ä¹¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -x509 -nodes -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; -newkey rsa:2048 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -keyout server.key -out server.crt -config openssl.cnf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åœ¨ &lt;code&gt;certs&lt;/code&gt; ç›®å½•ä¸­ç”Ÿæˆ &lt;code&gt;server.key&lt;/code&gt; å’Œ &lt;code&gt;server.crt&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®-envoy-ä»£ç†&#34;&gt;é…ç½® Envoy ä»£ç†&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦é…ç½® Envoyï¼Œä½¿å…¶èƒ½å¤Ÿæ¥å—å®¢æˆ·ç«¯çš„æ™®é€š TCP è¿æ¥ï¼Œå°†æ•°æ®é€šè¿‡ HTTP/2 CONNECT éš§é“ä¼ é€’ç»™æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-åˆ›å»º-envoy-é…ç½®æ–‡ä»¶&#34;&gt;1. åˆ›å»º Envoy é…ç½®æ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º &lt;code&gt;envoy.yaml&lt;/code&gt;ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;static_resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;listener_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0.0.0.0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filter_chains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.network.tcp_proxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stat_prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tcp_stats&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tunnel_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tunneling_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;server:8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;access_log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.access_loggers.stdout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.access_loggers.stream.v3.StdoutAccessLog&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;log_format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;json_format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;start_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%START_TIME%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%REQ(:METHOD)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%PROTOCOL%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;response_code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%RESPONSE_CODE%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;response_flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%RESPONSE_FLAGS%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;bytes_received&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%BYTES_RECEIVED%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;bytes_sent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%BYTES_SENT%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%DURATION%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;upstream_service_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x_forwarded_for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%REQ(X-FORWARDED-FOR)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;user_agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%REQ(USER-AGENT)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;request_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%REQ(X-REQUEST-ID)%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;upstream_host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%UPSTREAM_HOST%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;upstream_cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%UPSTREAM_CLUSTER%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;downstream_local_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%DOWNSTREAM_LOCAL_ADDRESS%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;downstream_remote_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;%DOWNSTREAM_REMOTE_ADDRESS%&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;clusters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tunnel_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;connect_timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;5s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;LOGICAL_DNS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lb_policy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ROUND_ROBIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;transport_socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.transport_sockets.tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sni&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;common_tls_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validation_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trusted_ca&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/certs/server.crt&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;alpn_protocols&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;h2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http2_protocol_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;load_assignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tunnel_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;2-å…³é”®ç‚¹&#34;&gt;2. å…³é”®ç‚¹&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Envoy ç›‘å¬ TCP è¿æ¥&lt;/strong&gt;ï¼Œå°†æµé‡é€šè¿‡ &lt;strong&gt;HTTP/2 CONNECT éš§é“&lt;/strong&gt;è½¬å‘åˆ°æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;åªéœ€ä¸ &lt;strong&gt;Envoy&lt;/strong&gt; å»ºç«‹ TCP è¿æ¥ï¼Œå‘é€æ–‡æœ¬æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy&lt;/strong&gt;è´Ÿè´£éš§é“çš„å»ºç«‹å’ŒåŠ å¯†ï¼Œ&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;æ— éœ€æ„ŸçŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®ç°æœåŠ¡å™¨&#34;&gt;å®ç°æœåŠ¡å™¨&lt;/h3&gt;
&lt;h4 id=&#34;1-åˆ›å»ºæœåŠ¡å™¨ç›®å½•å’Œæ–‡ä»¶&#34;&gt;1. åˆ›å»ºæœåŠ¡å™¨ç›®å½•å’Œæ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º &lt;code&gt;server&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ &lt;code&gt;server&lt;/code&gt; ç›®å½•ä¸­åˆ›å»º &lt;code&gt;server.js&lt;/code&gt; å’Œ &lt;code&gt;Dockerfile&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;2-ç¼–å†™-serverjs&#34;&gt;2. ç¼–å†™ &lt;code&gt;server.js&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;åœ¨ &lt;code&gt;server/server.js&lt;/code&gt; ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;fs&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;http2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createSecureServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;readFileSync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/certs/server.key&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;cert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;readFileSync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/certs/server.crt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;stream&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;:method&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;:path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;CONNECT&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Received CONNECT request for &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// å“åº” 200ï¼Œå»ºç«‹éš§é“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;respond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;s1&#34;&gt;&amp;#39;:status&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// åœ¨éš§é“å†…å¤„ç†æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;chunk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;chunk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;toString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Received from client: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;c1&#34;&gt;// å›åº”å®¢æˆ·ç«¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`Echo from server: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;end&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Stream ended by client.&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// å¯¹äºé CONNECT è¯·æ±‚ï¼Œè¿”å› 404
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;respond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;s1&#34;&gt;&amp;#39;:status&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Secure HTTP/2 server is listening on port 8080&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›‘å¬ &lt;code&gt;secureConnection&lt;/code&gt; äº‹ä»¶ï¼Œç›´æ¥å¤„ç† TLS è¿æ¥åçš„ socketã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ socket ä¸Šæ¥æ”¶æ•°æ®ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„æ–‡æœ¬æ¶ˆæ¯ï¼Œå¹¶å›å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-åˆ›å»º-dockerfile&#34;&gt;3. åˆ›å»º &lt;code&gt;Dockerfile&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;åœ¨ &lt;code&gt;server/Dockerfile&lt;/code&gt; ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-dockerfile&#34; data-lang=&#34;dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; node:14&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; /app&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; server.js .&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;EXPOSE&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; 8080&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;node&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;server.js&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°å®¢æˆ·ç«¯&#34;&gt;å®ç°å®¢æˆ·ç«¯&lt;/h3&gt;
&lt;h4 id=&#34;1-åˆ›å»ºå®¢æˆ·ç«¯ç›®å½•å’Œæ–‡ä»¶&#34;&gt;1. åˆ›å»ºå®¢æˆ·ç«¯ç›®å½•å’Œæ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º &lt;code&gt;client&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir client
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ &lt;code&gt;client&lt;/code&gt; ç›®å½•ä¸­åˆ›å»º &lt;code&gt;client.js&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;2-ç¼–å†™-clientjs&#34;&gt;2. ç¼–å†™ &lt;code&gt;client.js&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;åœ¨ &lt;code&gt;client/client.js&lt;/code&gt; ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;net&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºä¸ Envoy çš„ TCP è¿æ¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;createConnection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10000&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Connected to Envoy.&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// å‘é€æ¶ˆæ¯ç»™æœåŠ¡å™¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;interval&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;setInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`Message &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt; from client!`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// å…³é—­è¿æ¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;setTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;clearInterval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Received from server: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;toString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;end&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Disconnected from server.&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;error&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Client error:&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ä¸ &lt;strong&gt;Envoy&lt;/strong&gt; å»ºç«‹æ™®é€šçš„ TCP è¿æ¥ï¼Œå‘é€æ–‡æœ¬æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;è¯¥å®¢æˆ·ç«¯çš„å­˜åœ¨åªæ˜¯ä¸ºäº†è§¦å‘ Envoy ä¸æœåŠ¡å™¨å»ºç«‹éš§é“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ›å»º-docker-compose-æ–‡ä»¶&#34;&gt;åˆ›å»º Docker Compose æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º &lt;code&gt;docker-compose.yml&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoyproxy/envoy:v1.32.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./envoy.yaml:/etc/envoy/envoy.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./certs:/certs &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‚è½½è¯ä¹¦ç›®å½•&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;10000:10000&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;envoy_network&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;depends_on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/usr/local/bin/envoy -c /etc/envoy/envoy.yaml --service-cluster envoy --log-level debug&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;./server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;envoy_network&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;expose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;8080&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./certs:/certs &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‚è½½è¯ä¹¦ç›®å½•&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoy_network&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è¿è¡Œç¤ºä¾‹&#34;&gt;è¿è¡Œç¤ºä¾‹&lt;/h3&gt;
&lt;h4 id=&#34;1-å¯åŠ¨-docker-compose&#34;&gt;1. å¯åŠ¨ Docker Compose&lt;/h4&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker-compose up --build
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸè¾“å‡ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Envoy å®¹å™¨ï¼š&lt;/strong&gt; æ˜¾ç¤ºå¯åŠ¨ä¿¡æ¯å’Œè°ƒè¯•æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨å®¹å™¨ï¼š&lt;/strong&gt; æ˜¾ç¤º &lt;code&gt;Secure HTTP/2 server is listening on port 8080&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-è¿è¡Œå®¢æˆ·ç«¯&#34;&gt;2. è¿è¡Œå®¢æˆ·ç«¯&lt;/h4&gt;
&lt;p&gt;æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿›å…¥ &lt;code&gt;client&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; client
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œå®¢æˆ·ç«¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;node client.js
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸè¾“å‡ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Connected to Envoy.
Received from server: Echo from server: Message 1 from client!
Received from server: Echo from server: Message 2 from client!
Received from server: Echo from server: Message 3 from client!
Received from server: Echo from server: Message 4 from client!
Received from server: Echo from server: Message 5 from client!
Disconnected from server.
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;3-æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—&#34;&gt;3. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—&lt;/h4&gt;
&lt;p&gt;åœ¨ Docker Compose çš„è¾“å‡ºä¸­ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æœåŠ¡å™¨çš„æ—¥å¿—ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;envoy_1   | {&amp;#34;downstream_remote_address&amp;#34;:&amp;#34;192.168.65.1:46306&amp;#34;,&amp;#34;path&amp;#34;:null,&amp;#34;request_id&amp;#34;:null,&amp;#34;bytes_sent&amp;#34;:160,&amp;#34;protocol&amp;#34;:null,&amp;#34;upstream_service_time&amp;#34;:null,&amp;#34;bytes_received&amp;#34;:88,&amp;#34;response_code&amp;#34;:0,&amp;#34;user_agent&amp;#34;:null,&amp;#34;downstream_local_address&amp;#34;:&amp;#34;172.21.0.3:10000&amp;#34;,&amp;#34;upstream_host&amp;#34;:&amp;#34;172.21.0.2:8080&amp;#34;,&amp;#34;start_time&amp;#34;:&amp;#34;2024-12-03T11:37:59.542Z&amp;#34;,&amp;#34;upstream_cluster&amp;#34;:&amp;#34;tunnel_cluster&amp;#34;,&amp;#34;duration&amp;#34;:5012,&amp;#34;response_flags&amp;#34;:&amp;#34;-&amp;#34;,&amp;#34;method&amp;#34;:null,&amp;#34;x_forwarded_for&amp;#34;:null}
server_1  | Secure HTTP/2 server is listening on port 8080
server_1  | New secure connection established.
server_1  | Received from client: Message 1 from client!
server_1  | Received from client: Message 2 from client!
server_1  | Received from client: Message 3 from client!
server_1  | Received from client: Message 4 from client!
server_1  | Received from client: Message 5 from client!
server_1  | Connection ended by client.
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;4-æ£€æŸ¥-envoy-æ—¥å¿—&#34;&gt;4. æ£€æŸ¥ Envoy æ—¥å¿—&lt;/h4&gt;
&lt;p&gt;åœ¨ Envoy çš„æ—¥å¿—ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒä½¿ç”¨ &lt;strong&gt;HTTP/2 CONNECT éš§é“&lt;/strong&gt;ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è®°å½•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµ‹è¯•é€šä¿¡&#34;&gt;æµ‹è¯•é€šä¿¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;é€šè¿‡ TCP è¿æ¥å‘ &lt;strong&gt;Envoy ä»£ç†&lt;/strong&gt;å‘é€æ–‡æœ¬æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy&lt;/strong&gt;å°†å®¢æˆ·ç«¯çš„ TCP æµé‡é€šè¿‡ &lt;strong&gt;HTTP/2 CONNECT éš§é“&lt;/strong&gt;è½¬å‘ç»™ &lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;æ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯ï¼Œå¤„ç†å¹¶å›å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy&lt;/strong&gt;å°†æœåŠ¡å™¨çš„å›å¤é€šè¿‡éš§é“ä¼ å›ç»™ &lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;æ”¶åˆ°æœåŠ¡å™¨çš„å›å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ³¨æ„äº‹é¡¹&#34;&gt;æ³¨æ„äº‹é¡¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯ä¹¦ç®¡ç†ï¼š&lt;/strong&gt; ç¡®ä¿è¯ä¹¦æ­£ç¡®é…ç½®ï¼Œå¹¶åœ¨ Envoy å’ŒæœåŠ¡å™¨ä¸­æ­£ç¡®ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker ç½‘ç»œï¼š&lt;/strong&gt; ä½¿ç”¨ Docker Compose å®šä¹‰çš„ç½‘ç»œï¼Œå®¹å™¨å¯ä»¥é€šè¿‡æœåŠ¡åç§°äº’ç›¸é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç«¯å£å†²çªï¼š&lt;/strong&gt; ç¡®ä¿ç«¯å£ &lt;code&gt;10000&lt;/code&gt;ï¼ˆEnvoyï¼‰å’Œ &lt;code&gt;8080&lt;/code&gt;ï¼ˆæœåŠ¡å™¨ï¼‰æœªè¢«å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TLS é…ç½®ï¼š&lt;/strong&gt; åœ¨ç¤ºä¾‹ä¸­ï¼ŒEnvoy ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ä½¿ç”¨ TLS å’Œ HTTP/2ï¼Œç¡®ä¿äº†å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;éš§é“å»ºç«‹è¿‡ç¨‹&#34;&gt;éš§é“å»ºç«‹è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†å®¢æˆ·ç«¯ã€Envoy ä»£ç†å’ŒæœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’ï¼Œåæ˜ äº†æ•°æ®çš„ä¼ é€’å’Œéš§é“è¿æ¥çš„å»ºç«‹çš„æµç¨‹ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/http2-envoy-tunnel-demo/f426fb19b797e505aed4758bdc372f45.svg&#34; data-img=&#34;/blog/http2-envoy-tunnel-demo/f426fb19b797e505aed4758bdc372f45.svg&#34; alt=&#34;image&#34; data-caption=&#34;éš§é“å»ºç«‹æµç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;éš§é“å»ºç«‹æµç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ä¸ Envoy å»ºç«‹ TCP è¿æ¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘ Envoy å‘èµ· TCP è¿æ¥è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;Envoy æ¥å—è¿æ¥ï¼Œå»ºç«‹æ–°çš„ TCP ä»£ç†ä¼šè¯ï¼ˆConnectionId: 0ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Envoy åˆ›å»ºåˆ°æœåŠ¡å™¨çš„è¿æ¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envoy å°è¯•è¿æ¥ä¸Šæ¸¸é›†ç¾¤ &lt;code&gt;tunnel_cluster&lt;/code&gt;ï¼Œåˆ›å»ºæ–°çš„è¿æ¥ï¼ˆConnectionId: 1ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»ºç«‹ HTTP/2 CONNECT éš§é“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envoy ä¸æœåŠ¡å™¨å»ºç«‹ HTTP/2 è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;Envoy å‘é€ HTTP/2 CONNECT è¯·æ±‚ï¼Œç›®æ ‡ä¸»æœºåä¸º &lt;code&gt;server:8080&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å“åº” &lt;code&gt;200 OK&lt;/code&gt;ï¼Œéš§é“å»ºç«‹æˆåŠŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ä¼ è¾“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯ä¼ é€’å¾ªç¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼ˆ&lt;code&gt;Message N&lt;/code&gt;ï¼‰åˆ° Envoyã€‚&lt;/li&gt;
&lt;li&gt;Envoy å°†æ•°æ®é€šè¿‡éš§é“è½¬å‘ç»™æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å¤„ç†æ•°æ®å¹¶è¿”å›å“åº”ï¼ˆ&lt;code&gt;Echo Message N&lt;/code&gt;ï¼‰ç»™ Envoyã€‚&lt;/li&gt;
&lt;li&gt;Envoy å°†å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—è®°å½•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨è®°å½•æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚ &lt;code&gt;Received from client: Message N from client!&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿æ¥å…³é—­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€ FIN è¯·æ±‚ï¼Œé€šçŸ¥å…³é—­è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;Envoy å°† FIN è½¬å‘ç»™æœåŠ¡å™¨ï¼Œå…³é—­éš§é“ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å“åº” ACK ç¡®è®¤å…³é—­ã€‚&lt;/li&gt;
&lt;li&gt;Envoy å‘å®¢æˆ·ç«¯å‘é€ ACKï¼Œå®Œæˆè¿æ¥å…³é—­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—è®°å½•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envoy è®°å½•è¿æ¥å…³é—­æ—¥å¿—ï¼ŒåŒ…æ‹¬ ConnectionId å’Œç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨è®°å½•æ—¥å¿—ï¼Œæ˜¾ç¤ºæµå·²ç”±å®¢æˆ·ç«¯ç»“æŸï¼Œä¾‹å¦‚ &lt;code&gt;Stream ended by client.&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå…¥é—¨ç¤ºä¾‹ï¼Œä½†å®ƒä¸ºç†è§£å’Œè¿›ä¸€æ­¥æ¢ç´¢ HTTP/2 CONNECT éš§é“åŠŸèƒ½æä¾›äº†åšå®çš„åŸºç¡€ã€‚åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸­è®²è§£é€šè¿‡ä¸¤ä¸ª Envoy ä»£ç†å®ç°çš„éš§é“ï¼Œå¸¦ä½ è¿›ä¸€æ­¥äº†è§£ Istio ambient æ¨¡å¼ä¸­çš„ HBONE é€æ˜éš§é“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/upgrades&#34; title=&#34;HTTP upgrades â€” envoy 1.33.0-dev-6d8d0b documentation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HTTP upgrades â€” envoy 1.33.0-dev-6d8d0b documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/envoyproxy/envoy/blob/6d8d0b0ee2cc267b2cd9f57eb952863ddc8e49c3/configs/proxy_connect.yaml&#34; title=&#34;envoy/configs/proxy_connect.yaml at 6d8d0b0ee2cc267b2cd9f57eb952863ddc8e49c3 Â· envoyproxy/envoy Â· GitHub&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;envoy/configs/proxy_connect.yaml at 6d8d0b0ee2cc267b2cd9f57eb952863ddc8e49c3 Â· envoyproxy/envoy Â· GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zhaohuabing.com/post/2022-09-11-ambient-deep-dive-1/&#34; title=&#34;Istio Ambient æ¨¡å¼æµé‡ç®¡ç†å®ç°æœºåˆ¶è¯¦è§£ï¼ˆä¸€ï¼‰- èµµåŒ–å†°çš„åšå®¢ | Zhaohuabing Blog&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Ambient æ¨¡å¼æµé‡ç®¡ç†å®ç°æœºåˆ¶è¯¦è§£ï¼ˆä¸€ï¼‰- èµµåŒ–å†°çš„åšå®¢ | Zhaohuabing Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>AI å·¥å…·æ¨è Napkin.aiï¼šè®©å¤æ‚æƒ³æ³•ä¸€é”®å˜æˆç›´è§‚å›¾è¡¨</title>
      <link>https://jimmysong.io/blog/napkin-ai-visualization-tool/</link>
      <pubDate>Thu, 09 Jan 2025 18:26:54 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/napkin-ai-visualization-tool/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ¸…æ™°åœ°ä¼ è¾¾å¤æ‚çš„æƒ³æ³•ï¼Œä½†å•é æ–‡å­—æœ‰æ—¶å€™å®åœ¨ä¸å¤Ÿç›´è§‚ã€‚è¿™æ—¶å€™ï¼Œä¸€å¼ æ¸…æ™°çš„å›¾è¡¨å¾€å¾€èƒ½è®©äººä¸€çœ¼çœ‹æ‡‚ä½ çš„æ€è·¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/napkin-ai-visualization-tool/f1.svg&#34; data-img=&#34;/blog/napkin-ai-visualization-tool/f1.svg&#34; alt=&#34;image&#34; data-caption=&#34;æŠ½è±¡æ¦‚å¿µå¯è§†åŒ–çš„å¥½å¤„ï¼ˆæœ¬å›¾ä½¿ç”¨ napkin.ai ç”Ÿæˆï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æŠ½è±¡æ¦‚å¿µå¯è§†åŒ–çš„å¥½å¤„ï¼ˆæœ¬å›¾ä½¿ç”¨ napkin.ai ç”Ÿæˆï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä»Šå¤©æƒ³ç»™å¤§å®¶æ¨èä¸€ä¸ªç‰¹åˆ«å¥½ç”¨çš„å·¥å…·â€”â€”&lt;a href=&#34;https://napkin.ai&#34; title=&#34;Napkin.ai&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Napkin.ai&lt;/a&gt;ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æŠŠä½ çš„æ–‡å­—å†…å®¹å˜æˆå›¾è¡¨ï¼Œæ¯”å¦‚ä¿¡æ¯å›¾ã€æµç¨‹å›¾ç­‰ç­‰ï¼Œè®©ä½ çš„æƒ³æ³•æ›´å®¹æ˜“è¢«ç†è§£å’Œä¼ æ’­ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/napkin-ai-visualization-tool/napkin.webp&#34; data-img=&#34;/blog/napkin-ai-visualization-tool/napkin.webp&#34; data-width=&#34;2126&#34; data-height=&#34;2182&#34; alt=&#34;image&#34; data-caption=&#34;Napkin ç•Œé¢&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Napkin ç•Œé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;napkinai-çš„æ ¸å¿ƒåŠŸèƒ½&#34;&gt;Napkin.ai çš„æ ¸å¿ƒåŠŸèƒ½&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ–‡æœ¬è‡ªåŠ¨å˜å›¾è¡¨ï¼šæŠŠæ–‡å­—ç²˜è´´åˆ° Napkin.aiï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„å›¾è¡¨ï¼Œå®Œå…¨ä¸ç”¨è‡ªå·±åŠ¨æ‰‹ç”»ã€‚&lt;/li&gt;
&lt;li&gt;å›¾è¡¨æ ·å¼å¤šæ ·ï¼šæ ¹æ®ä½ çš„å†…å®¹ï¼ŒNapkin.ai ä¼šæä¾›å¤šç§å›¾è¡¨æ ·å¼ï¼Œä½ å¯ä»¥é€‰æ‹©æœ€é€‚åˆçš„é‚£ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒè‡ªå®šä¹‰ï¼šå›¾è¡¨ç”Ÿæˆåè¿˜èƒ½è°ƒæ•´ï¼Œæ¯”å¦‚æ›´æ”¹å›¾æ ‡ã€é¢œè‰²ã€å­—ä½“ç­‰ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´ç¬¦åˆä½ çš„é£æ ¼ã€‚&lt;/li&gt;
&lt;li&gt;å¤šç§æ ¼å¼å¯¼å‡ºï¼šç”Ÿæˆçš„å›¾è¡¨å¯ä»¥å¯¼å‡ºä¸º PNGã€SVG æˆ– PDFï¼Œç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é€‚åˆè°ç”¨&#34;&gt;é€‚åˆè°ç”¨&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/napkin-ai-visualization-tool/f2.svg&#34; data-img=&#34;/blog/napkin-ai-visualization-tool/f2.svg&#34; alt=&#34;image&#34; data-caption=&#34;Napkin å¦‚ä½•æå‡æ²Ÿé€šæ•ˆç‡ï¼ˆæœ¬å›¾ä½¿ç”¨ napkin.ai ç”Ÿæˆï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Napkin å¦‚ä½•æå‡æ²Ÿé€šæ•ˆç‡ï¼ˆæœ¬å›¾ä½¿ç”¨ napkin.ai ç”Ÿæˆï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸ç®¡ä½ æ˜¯å¸‚åœºè¥é”€äººå‘˜ã€å†…å®¹åˆ›ä½œè€…ï¼Œè¿˜æ˜¯éœ€è¦åšå•†ä¸šæ¼”ç¤ºçš„ä¸“ä¸šäººå£«ï¼ŒNapkin.ai éƒ½èƒ½å¸®ä½ æå‡æ²Ÿé€šæ•ˆæœï¼Œè®©ä½ çš„å†…å®¹æ›´å¸å¼•äººã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å¼€å§‹&#34;&gt;å¦‚ä½•å¼€å§‹ï¼Ÿ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€ &lt;a href=&#34;https://www.napkin.ai/&#34; title=&#34;napkin.ai&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;napkin.ai&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ³¨å†Œä¸€ä¸ªè´¦å·ï¼ˆå…è´¹ï¼‰ï¼Œç›®å‰é«˜çº§ç‰ˆæœ¬è¿˜åœ¨ beta é˜¶æ®µï¼Œæš‚æœªæ”¶è´¹ï¼Œæœªæ¥çš„æ”¶è´¹è¿˜æœªå…¬å¼€ã€‚&lt;/li&gt;
&lt;li&gt;ç²˜è´´æ–‡å­—ï¼Œç”Ÿæˆå›¾è¡¨ï¼Œç„¶åæ ¹æ®éœ€è¦è°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;å¯¼å‡ºå›¾è¡¨ï¼Œç”¨åœ¨ä½ çš„å·¥ä½œæˆ–åˆ†äº«ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ¬¾å·¥å…·çœŸçš„éå¸¸æ–¹ä¾¿ï¼Œè¯•ä¸€æ¬¡å°±ä¼šçˆ±ä¸Šï¼æ”¯æŒä¸­æ–‡ï¼Œè€Œä¸”å…è´¹ä½¿ç”¨ï¼Œæ— æ¬¡æ•°é™åˆ¶ã€‚å¦‚æœä½ ä¹Ÿéœ€è¦ä¸€ä¸ªå¸®æ‰‹æ¥æŠŠå¤æ‚æƒ³æ³•å˜å¾—æ›´ç›´è§‚ï¼Œèµ¶ç´§å»è¯•è¯•å§ï¼&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Cilium 2024 å¹´åº¦æŠ¥å‘Šè§£è¯»</title>
      <link>https://jimmysong.io/blog/cilium-annual-report-2024/</link>
      <pubDate>Tue, 07 Jan 2025 18:28:38 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/cilium-annual-report-2024/</guid>
      <description>
        
        
        &lt;p&gt;è¿‘æ—¥ Cilium é¡¹ç›®å‘å¸ƒäº† 2024 å¹´åº¦æŠ¥å‘Šï¼Œè§ &lt;a href=&#34;https://github.com/cilium/cilium.io/blob/main/Annual-Reports/Cilium_Annual_Report_2024.pdf&#34; title=&#34;Github&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github&lt;/a&gt;ã€‚è¿™ä»½æŠ¥å‘Šè¯¦ç»†å›é¡¾äº† Cilium åœ¨è¿‡å»ä¸€å¹´ä¸­æ‰€å–å¾—çš„é‡å¤§æˆå°±ï¼Œå¹¶å±•æœ›äº†å…¶åœ¨äº‘åŸç”Ÿç½‘ç»œå’Œå®‰å…¨é¢†åŸŸçš„æœªæ¥å‘å±•æ–¹å‘ã€‚Cilium é¡¹ç›®è‡ªé¦–æ¬¡æäº¤ä»¥æ¥ï¼Œå†ç»è¿‘åå¹´å‘å±•ï¼Œå…¶åŠ¿å¤´æŒç»­å¼ºåŠ²ï¼Œæ­£å¼•é¢†äº‘åŸç”Ÿç½‘ç»œå’Œå®‰å…¨é¢†åŸŸçš„æ–°å˜é©ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cilium-annual-report-2024/f1.svg&#34; data-img=&#34;/blog/cilium-annual-report-2024/f1.svg&#34; alt=&#34;image&#34; data-caption=&#34;Cilium 2024 å¹´åº¦æŠ¥å‘Šæ¦‚è¿°&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Cilium 2024 å¹´åº¦æŠ¥å‘Šæ¦‚è¿°&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;cilium-çš„å“è¶Šå‘å±•&#34;&gt;Cilium çš„å“è¶Šå‘å±•&lt;/h2&gt;
&lt;p&gt;2024 å¹´æ˜¯ Cilium å‘å±•å†ç¨‹ä¸­è‡³å…³é‡è¦çš„ä¸€å¹´ï¼Œå®ƒä¸ä»…å·©å›ºäº†å…¶ä½œä¸º Kubernetes äº‹å®æ ‡å‡† CNI çš„åœ°ä½ï¼Œæ›´å‘å±•æˆä¸º Kubernetes ç¯å¢ƒä¸‹çš„ç»¼åˆç½‘ç»œå †æ ˆã€‚Cilium çš„æ¼”è¿›å±•ç¤ºäº†å…¶åº”å¯¹ç°ä»£äº‘åŸç”Ÿç¯å¢ƒæŒ‘æˆ˜çš„å“è¶Šèƒ½åŠ›ï¼Œä»æœ€åˆçš„ pod åˆ° pod è¿æ¥æ–¹æ¡ˆï¼Œæ‰©å±•åˆ°ä¸€ä¸ªç»Ÿä¸€ç½‘ç»œã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§çš„é¡¹ç›®ï¼Œè¿™ä¸€åˆ‡éƒ½ç”± eBPF æŠ€æœ¯é©±åŠ¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cilium-annual-report-2024/f2.svg&#34; data-img=&#34;/blog/cilium-annual-report-2024/f2.svg&#34; alt=&#34;image&#34; data-caption=&#34;Cilium åœ¨ 2024 å¹´çš„æ¼”å˜&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Cilium åœ¨ 2024 å¹´çš„æ¼”å˜&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;å…³é”®é‡Œç¨‹ç¢‘ä¸é‡å¤§æˆå°±&#34;&gt;å…³é”®é‡Œç¨‹ç¢‘ä¸é‡å¤§æˆå°±&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cilium-annual-report-2024/f3.svg&#34; data-img=&#34;/blog/cilium-annual-report-2024/f3.svg&#34; alt=&#34;image&#34; data-caption=&#34;å…³é”®é‡Œç¨‹ç¢‘ä¸é‡å¤§æˆå°±&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å…³é”®é‡Œç¨‹ç¢‘ä¸é‡å¤§æˆå°±&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¤¾åŒºè“¬å‹ƒå‘å±•&lt;/strong&gt;ï¼šCilium ç¤¾åŒºæŒç»­å£®å¤§ï¼Œè´¡çŒ®è€…å’Œè´¡çŒ®å…¬å¸æ•°é‡ä¸æ–­å¢åŠ ï¼Œç”¨æˆ·éå¸ƒé‡‘èã€ç‰©æµã€åª’ä½“ã€ç”µä¿¡ç­‰ä¼—å¤šè¡Œä¸šã€‚è‡ªåŠ å…¥ CNCF ä»¥æ¥ï¼Œè´¡çŒ®å…¬å¸æ•°é‡å¢é•¿äº† 90%ï¼Œè¾¾åˆ° 1,011 å®¶ï¼Œä¸ªäººè´¡çŒ®è€…å¢é•¿äº† 252%ï¼Œè¾¾åˆ° 4,464 äººã€‚Cilium è¿˜æ˜¯ CNCF ç”Ÿæ€ç³»ç»Ÿä¸­ç¬¬ä¸‰å¤§å‘å±•æœ€å¿«çš„é¡¹ç›®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯åˆ›æ–°&lt;/strong&gt;ï¼šCilium åœ¨ 2024 å¹´å‘å¸ƒäº† 1.15 å’Œ 1.16 ä¸¤ä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è¯¸å¤šåˆ›æ–°åŠŸèƒ½ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cilium 1.15&lt;/strong&gt;: å¼•å…¥äº†å¯¹ Gateway API 1.0 çš„å…¨é¢æ”¯æŒï¼Œä½¿ Cluster Mesh çš„å¯æ‰©å±•æ€§ç¿»å€ï¼Œå¢å¼ºäº†å¯è§‚æµ‹æ€§ï¼Œå°†æµé‡ä¸ç½‘ç»œç­–ç•¥å…³è”ï¼Œå¹¶æ‰©å±•äº† BGP çš„åŠŸèƒ½ï¼Œä»¥æ›´å¥½åœ°é›†æˆå¤–éƒ¨ä¸–ç•Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium 1.16&lt;/strong&gt;: ä»¥â€œæ›´å¿«ã€æ›´å¼ºã€æ›´æ™ºèƒ½â€ä¸ºä¸»é¢˜ï¼Œé€šè¿‡ netkit æ¶ˆé™¤äº†è™šæ‹Ÿç½‘ç»œå¼€é”€ï¼Œå®ç°äº†ä¸»æœºå’Œå®¹å™¨ä¹‹é—´çš„æ€§èƒ½å¯¹ç­‰ï¼›å¼•å…¥äº† BGPv2 APIï¼Œæ”¯æŒç”¨æˆ·å®šä¹‰å¤æ‚çš„ç½‘ç»œç­–ç•¥ï¼›æ”¯æŒå¤šæ’­æ•°æ®è·¯å¾„ï¼›å¹¶æ˜¾è‘—ä¼˜åŒ–äº† CPU å’Œå†…å­˜ä½¿ç”¨ï¼ŒåŒæ—¶å°†å°¾éƒ¨å»¶è¿Ÿé™ä½äº†é«˜è¾¾ 5 å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¿æ³›åº”ç”¨&lt;/strong&gt;ï¼šç”¨æˆ·è°ƒæŸ¥æ˜¾ç¤ºï¼ŒCilium æ­£åœ¨é€æ­¥æ¥ç®¡ Kubernetes ç½‘ç»œå †æ ˆï¼ŒCluster Meshã€BGP å’Œ Gateway API ç­‰åŠŸèƒ½å·²å¹¿æ³›åº”ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚95% çš„å—è®¿è€…è¿è¡Œå¤šä¸ª Kubernetes é›†ç¾¤ï¼Œè€Œ Cilium è¢« CNCF æŠ€æœ¯é›·è¾¾è¯„ä¸ºé¡¶çº§å¤šé›†ç¾¤ç®¡ç†å·¥å…·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸šè®¤å¯&lt;/strong&gt;ï¼šCilium è£è· OpenUK 2024 å¹´åº¦å¼€æºè½¯ä»¶å¥–ã€‚åŒæ—¶ï¼Œåœ¨ CNCF çš„å¤šé›†ç¾¤ç®¡ç†æŠ€æœ¯é›·è¾¾ä¸­ï¼ŒCilium è¢«è¯„ä¸ºæœ€å€¼å¾—é‡‡ç”¨çš„æŠ€æœ¯ï¼Œå¹¶åœ¨å®ç”¨æ€§å’Œæˆç†Ÿåº¦æ–¹é¢å‡è·å¾—æœ€é«˜åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;eBPF å®‰å…¨&lt;/strong&gt;ï¼šeBPF åŸºé‡‘ä¼šå‘å¸ƒäº†ä¸¤ä»½é‡è¦ç ”ç©¶æŠ¥å‘Šï¼Œæå‡äº†åŸºäº eBPF éƒ¨ç½²çš„å®‰å…¨æ€§ä¸æ“ä½œæŒ‡å¯¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;eBPF å®‰å…¨å¨èƒæ¨¡å‹&lt;/strong&gt;ï¼šè¯¦ç»†é˜è¿°äº† eBPF çš„æ½œåœ¨é£é™©ï¼Œå¹¶æä¾›äº†ç›¸åº”çš„ç¼“è§£ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;eBPF éªŒè¯å™¨ä»£ç å®¡è®¡&lt;/strong&gt;ï¼šå¼ºè°ƒäº†éªŒè¯å™¨åœ¨ä¿éšœ eBPF éƒ¨ç½²å®‰å…¨æ–¹é¢çš„ä½œç”¨ï¼Œå¹¶æå‡ºäº†æ”¹è¿›å»ºè®®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç”¨æˆ·åé¦ˆä¸åº”ç”¨æ¡ˆä¾‹&#34;&gt;ç”¨æˆ·åé¦ˆä¸åº”ç”¨æ¡ˆä¾‹&lt;/h2&gt;
&lt;p&gt;æ¥è‡ªç”¨æˆ·çš„åé¦ˆå’Œæ¡ˆä¾‹è¿›ä¸€æ­¥å°è¯äº† Cilium åœ¨æ€§èƒ½ã€æˆæœ¬æ•ˆç›Šä»¥åŠåŠŸèƒ½æ–¹é¢çš„ä¼˜åŠ¿ã€‚ç”¨æˆ·æ™®éè®¤ä¸ºï¼ŒCilium æœ‰æ•ˆé™ä½äº†ç½‘ç»œæˆæœ¬å’Œ CPU æ¶ˆè€—ï¼ŒåŒæ—¶æä¾›äº†å“è¶Šçš„æ€§èƒ½å’Œä½å»¶è¿Ÿã€‚æ­¤å¤–ï¼ŒCilium çš„å¯è§‚å¯Ÿæ€§å·¥å…·ï¼ˆå¦‚ Hubbleï¼‰ä»¥åŠç½‘ç»œç­–ç•¥åŠŸèƒ½ä¹Ÿå—åˆ°äº†ç”¨æˆ·çš„å¹¿æ³›å¥½è¯„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœªæ¥å±•æœ›&#34;&gt;æœªæ¥å±•æœ›&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cilium-annual-report-2024/f4.svg&#34; data-img=&#34;/blog/cilium-annual-report-2024/f4.svg&#34; alt=&#34;image&#34; data-caption=&#34;Cilium 2025 å¹´å‘å±•å±•æœ›&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Cilium 2025 å¹´å‘å±•å±•æœ›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å±•æœ› 2025 å¹´ï¼ŒCilium çš„å‘å±•åŠ¿å¤´å°†æŒç»­å¢å¼ºã€‚å¹³å°å·¥ç¨‹å’Œæ•´åˆè¶‹åŠ¿æ­£åœ¨é‡å¡‘ç»„ç»‡ç®¡ç† Kubernetes ç½‘ç»œçš„æ–¹å¼ï¼Œè€Œ Cilium æ­£å¤„äºè¿™åœºå˜é©çš„æ ¸å¿ƒã€‚æˆ‘ä»¬é¢„è®¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cilium å †æ ˆå°†è¿›ä¸€æ­¥æ•´åˆç½‘ç»œåŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;Tetragon åœ¨é«˜çº§å®‰å…¨å¯è§‚å¯Ÿæ€§æ–¹é¢çš„åº”ç”¨å°†æ›´åŠ æ™®åŠã€‚&lt;/li&gt;
&lt;li&gt;Cilium å°†æ›´æ·±å…¥åœ°é›†æˆå¤–éƒ¨å’Œä¼ ç»Ÿå·¥ä½œè´Ÿè½½è‡³ Kubernetes ç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;Cilium ä¸ä»…ä¼šè¢«å¹¿æ³›ç”¨ä½œ CNIï¼Œæ›´å°†ä½œä¸ºå…¨é¢çš„ Kubernetes ç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;Tetragon å°†ä¸æ–­è¿›åŒ–ï¼Œæä¾›æ›´å¼ºå¤§çš„æ£€æµ‹èƒ½åŠ›å’Œæ›´å…·è¡ŒåŠ¨åŠ›çš„å¨èƒå“åº”æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;Cilium çš„æ··åˆäº‘å’Œå¤šäº‘é›†æˆå°†åœ¨ 2025 å¹´å‘æŒ¥æ›´å¤§çš„ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cilium å¯¹å¤–éƒ¨å·¥ä½œè´Ÿè½½ã€4 å±‚è´Ÿè½½å‡è¡¡ä»¥åŠ BGP å¢å¼ºåŠŸèƒ½çš„æ”¯æŒå°†å¼¥åˆ Kubernetes åŸç”Ÿç³»ç»Ÿä¸ä¼ ç»Ÿç³»ç»Ÿä¹‹é—´çš„é¸¿æ²Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Cilium é¡¹ç›®åœ¨ 2024 å¹´å–å¾—äº†å·¨å¤§æˆåŠŸï¼Œç¡®ç«‹äº†å…¶åœ¨ Kubernetes ç½‘ç»œé¢†åŸŸçš„é¢†å¯¼åœ°ä½ã€‚Cilium ä¸ä»…ä»…æ˜¯ä¸€ä¸ª CNIï¼Œæ›´æ˜¯ä¸€ä¸ªæ¶µç›–ç½‘ç»œã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§çš„ç»¼åˆ Kubernetes ç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚éšç€äº‘åŸç”ŸæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒCilium å°†ç»§ç»­å¼•é¢†è¡Œä¸šåˆ›æ–°ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¼ºå¤§ã€æ›´å¯é çš„äº‘åŸç”Ÿç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨&lt;/strong&gt;ï¼šæœ¬æ–‡ä¸­çš„å›¾ç‰‡åˆ©ç”¨ &lt;a href=&#34;https://www.napkin.ai/&#34; title=&#34;napkin.ai&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;napkin.ai&lt;/a&gt; åˆ¶ä½œã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio Ambient æ¨¡å¼ä¸­çš„æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸåŠæµé‡ä¼˜åŒ–</title>
      <link>https://jimmysong.io/blog/istio-ambient-packet-lifecycle-optimization/</link>
      <pubDate>Tue, 07 Jan 2025 15:07:30 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-ambient-packet-lifecycle-optimization/</guid>
      <description>
        
        
        &lt;p&gt;æœ¬æ–‡å›´ç»• Istio Ambient æ¨¡å¼ä¸‹çš„æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ·±å…¥å‰–æï¼Œä»åˆå§‹æ•°æ®åŒ…çš„æµé‡æ‹¦æˆªä¸ç›®æ ‡è§£æï¼Œåˆ°åç»­æ•°æ®åŒ…çš„å¿«é€Ÿè½¬å‘ä¸ä¼˜åŒ–ç­–ç•¥ï¼Œå¸®åŠ©è¯»è€…ç†è§£ Ambient æ¨¡å¼èƒŒåçš„æŠ€æœ¯é€»è¾‘å’Œæ€§èƒ½å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆä»å†…æ ¸æ€åˆ°ç”¨æˆ·æ€&#34;&gt;æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆï¼šä»å†…æ ¸æ€åˆ°ç”¨æˆ·æ€&lt;/h2&gt;
&lt;p&gt;åœ¨ Ambient æ¨¡å¼ä¸­ï¼Œæ•°æ®åŒ…çš„å¤„ç†è·¯å¾„ä» Pod å†…æ ¸æ€ç½‘ç»œæ ˆå¼€å§‹ï¼Œç»ç”± &lt;code&gt;iptables&lt;/code&gt; è§„åˆ™è¢«æ‹¦æˆªåè¿›å…¥ ztunnel çš„ç”¨æˆ·æ€å¤„ç†é€»è¾‘ã€‚ztunnel è´Ÿè´£é€æ˜ä»£ç†ã€ç­–ç•¥éªŒè¯ã€åŠ å¯†éš§é“å»ºç«‹ç­‰ä»»åŠ¡ï¼Œæœ€ç»ˆå°†æ•°æ®åŒ…é€šè¿‡å†…æ ¸æ€ç½‘ç»œå†æ¬¡è½¬å‘ç»™ç›®æ ‡æœåŠ¡æˆ–ä¸‹ä¸€ä¸ª ztunnelã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é¦–æ¬¡æ•°æ®åŒ…çš„è¯¦ç»†è§£æå’Œæ ‡è®°ï¼Œä¸ºåç»­æ•°æ®åŒ…é“ºè·¯ï¼Œä»è€Œå‡å°‘é‡å¤å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† Istio Ambient æ¨¡å¼ä¸­ä» Pod åˆ° ztunnel çš„æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-packet-lifecycle-optimization/4c7d5e7ac5168314a5c5de34a39a4f9c.svg&#34; data-img=&#34;/blog/istio-ambient-packet-lifecycle-optimization/4c7d5e7ac5168314a5c5de34a39a4f9c.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio Ambient æ¨¡å¼ä¸­ä» Pod åˆ° ztunnel çš„æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸ&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio Ambient æ¨¡å¼ä¸­ä» Pod åˆ° ztunnel çš„æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»é¦–ä¸ªæ•°æ®åŒ…ä¸åç»­æ•°æ®åŒ…çš„å¤„ç†è·¯å¾„ï¼Œå¹¶åˆ†æå…¶ä¸­çš„æŠ€æœ¯è¦ç‚¹ä¸ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¦–ä¸ªæ•°æ®åŒ…è·¯å¾„ä»æ‹¦æˆªåˆ°ç›®æ ‡è§£æ&#34;&gt;é¦–ä¸ªæ•°æ®åŒ…è·¯å¾„ï¼šä»æ‹¦æˆªåˆ°ç›®æ ‡è§£æ&lt;/h2&gt;
&lt;p&gt;å½“åº”ç”¨ç¨‹åºåœ¨ Pod å†…å‘å‡ºæ•°æ®åŒ…ï¼ˆå¦‚ HTTP è¯·æ±‚ï¼‰ï¼Œæ•°æ®åŒ…é¦–å…ˆç»è¿‡ Pod çš„ç½‘ç»œå‘½åç©ºé—´å’Œå†…æ ¸æ€ç½‘ç»œæ ˆè¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€æ˜æ‹¦æˆªä¸ç›®æ ‡è§£æ&#34;&gt;é€æ˜æ‹¦æˆªä¸ç›®æ ‡è§£æ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;iptables&lt;/code&gt; è§„åˆ™å¯¹å‡ºç«™æµé‡è¿›è¡Œç­›é€‰ï¼Œè‹¥å‘ç°ç›®æ ‡åœ°å€ä¸ºéæœ¬åœ°èµ„æºä¸”æ•°æ®åŒ…æœªæºå¸¦ç‰¹å®šæ ‡è®°ï¼Œåˆ™å°†æ•°æ®åŒ…é‡å®šå‘è‡³ ztunnel çš„é€æ˜ä»£ç†ç«¯å£ï¼ˆå¦‚ &lt;code&gt;15006&lt;/code&gt; æˆ– &lt;code&gt;15008&lt;/code&gt;ï¼‰ã€‚å€ŸåŠ© &lt;code&gt;IP_TRANSPARENT&lt;/code&gt; å’Œ &lt;code&gt;SO_ORIGINAL_DST&lt;/code&gt; é€‰é¡¹ï¼Œztunnel å¯æå–æ•°æ®åŒ…çš„åŸå§‹ç›®æ ‡åœ°å€ï¼Œå®ç°æ— ç¼é€æ˜ä»£ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç”¨æˆ·æ€å¤„ç†ç­–ç•¥éªŒè¯ä¸åŠ å¯†éš§é“&#34;&gt;ç”¨æˆ·æ€å¤„ç†ï¼šç­–ç•¥éªŒè¯ä¸åŠ å¯†éš§é“&lt;/h3&gt;
&lt;p&gt;æ•°æ®åŒ…è¿›å…¥ ztunnel ç”¨æˆ·æ€åï¼Œå°†ç»å†ä»¥ä¸‹å¤„ç†æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç­–ç•¥éªŒè¯&lt;/strong&gt;ï¼šRBAC éªŒè¯ã€mTLS åŠ å¯†åˆ¤å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®æ ‡æµé‡å¤„ç†&lt;/strong&gt;ï¼šå¯¹ç½‘æ ¼å†…éƒ¨æµé‡ï¼Œé€šè¿‡ HTTP/2 CONNECT éš§é“ï¼ˆHBONEï¼‰åŠ å¯†ä¸è·¨èŠ‚ç‚¹ä¼ è¾“ï¼›å¯¹ç½‘æ ¼å¤–æµé‡ï¼Œç›´æ¥é€šè¿‡æœ¬åœ° TCP è¿æ¥é€ä¼ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Œæˆå¤„ç†åï¼Œztunnel åŸºäºæ•°æ®åŒ…è§£æç»“æœå»ºç«‹å‡ºç«™è¿æ¥ï¼ˆå¦‚ HTTP/2 éš§é“æˆ–æ˜æ–‡ TCPï¼‰ï¼Œå¹¶å°†æ•°æ®åŒ…é€å›å†…æ ¸æ€ï¼Œæœ€ç»ˆè½¬å‘è‡³ç›®æ ‡æœåŠ¡æˆ–ä¸‹ä¸€ä¸ª ztunnelã€‚&lt;/p&gt;
&lt;h2 id=&#34;åç»­æ•°æ®åŒ…è·¯å¾„åˆ©ç”¨-conntrack-ä¸éš§é“å¤ç”¨&#34;&gt;åç»­æ•°æ®åŒ…è·¯å¾„ï¼šåˆ©ç”¨ Conntrack ä¸éš§é“å¤ç”¨&lt;/h2&gt;
&lt;p&gt;é¦–ä¸ªæ•°æ®åŒ…å®Œæˆè§£æä¸ç­–ç•¥éªŒè¯åï¼ŒLinux å†…æ ¸çš„è¿æ¥è·Ÿè¸ªï¼ˆ&lt;code&gt;conntrack&lt;/code&gt;ï¼‰è®°å½•è¿æ¥çŠ¶æ€ä¸æ ‡è®°ã€‚åç»­æ•°æ®åŒ…æ— éœ€å†æ¬¡ç»å†å¤æ‚çš„æ‹¦æˆªä¸è§£æï¼Œç›´æ¥è¿›å…¥ ztunnel çš„ inbound socketã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿æ¥è·Ÿè¸ªä¸å¿«é€Ÿè½¬å‘&#34;&gt;è¿æ¥è·Ÿè¸ªä¸å¿«é€Ÿè½¬å‘&lt;/h3&gt;
&lt;p&gt;åç»­æ•°æ®åŒ…åŸºäº &lt;code&gt;conntrack&lt;/code&gt; è·Ÿè¸ªæœºåˆ¶ï¼Œå¿«é€Ÿåˆ°è¾¾ ztunnel çš„ inbound socketã€‚ztunnel å¯ç›´æ¥è¯†åˆ«ç›®æ ‡åœ°å€ä¸å®‰å…¨ç­–ç•¥ï¼Œé¿å…é‡å¤çš„è§£æä¸éªŒè¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;éš§é“ä¸æ˜æ–‡è¿æ¥ä¼˜åŒ–&#34;&gt;éš§é“ä¸æ˜æ–‡è¿æ¥ä¼˜åŒ–&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;HBONE éš§é“&lt;/strong&gt;ï¼šæ”¯æŒå¤šè·¯å¤ç”¨ï¼Œæé«˜åŠ å¯†æµé‡å¤„ç†æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜æ–‡è¿æ¥&lt;/strong&gt;ï¼šå¯¹æ— éœ€åŠ å¯†çš„æµé‡ï¼Œç›´æ¥å¤ç”¨ç°æœ‰ TCP è¿æ¥ï¼Œè¿›ä¸€æ­¥å‡å°‘å¤„ç†å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æŠ€æœ¯è¦ç‚¹ä¸ä¼˜åŒ–ç­–ç•¥&#34;&gt;æŠ€æœ¯è¦ç‚¹ä¸ä¼˜åŒ–ç­–ç•¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜ä»£ç†&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;IP_TRANSPARENT&lt;/code&gt; å®ç°é€æ˜æµé‡æ•è·ä¸ç›®æ ‡è§£æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸ä¸ç”¨æˆ·æ€é«˜æ•ˆåä½œ&lt;/strong&gt;ï¼šé¦–ä¸ªæ•°æ®åŒ…é€šè¿‡ç”¨æˆ·æ€å®Œæˆæ·±åº¦å¤„ç†ï¼Œåç»­æ•°æ®åŒ…å€ŸåŠ© &lt;code&gt;conntrack&lt;/code&gt; ä¸ inbound socket å®ç°å¿«é€Ÿè½¬å‘ï¼Œé™ä½ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šè·¯å¤ç”¨&lt;/strong&gt;ï¼šå€ŸåŠ© HTTP/2 éš§é“å®ç°é«˜æ•ˆåŠ å¯†ä¸è´Ÿè½½å‡è¡¡ï¼Œä¼˜åŒ–ä¼ è¾“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®è·µå»ºè®®&#34;&gt;å®è·µå»ºè®®&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¤šå¹³å°é€‚é…&lt;/strong&gt;ï¼šæ ¹æ®å¹³å°ç‰¹æ€§è°ƒæ•´é€æ˜ä»£ç†å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒä¼˜ä¸ç›‘æ§&lt;/strong&gt;ï¼šç»“åˆ ztunnel æ—¥å¿—ä¸æœåŠ¡ç½‘æ ¼ç›‘æ§å·¥å…·ï¼Œä¼˜åŒ–æµé‡è·¯å¾„ä¸æ€§èƒ½è¡¨ç°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Istio Ambient æ¨¡å¼é€šè¿‡æ•°æ®åŒ…ç”Ÿå‘½å‘¨æœŸè®¾è®¡ï¼Œåœ¨é€æ˜ä»£ç†ã€æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨ç­–ç•¥é—´å®ç°å¹³è¡¡ã€‚zTunnel é€šè¿‡é«˜æ•ˆçš„ç”¨æˆ·æ€å¤„ç†ä¸å†…æ ¸æ€å¿«é€Ÿè½¬å‘ï¼Œå°†åº”ç”¨ç¨‹åºçš„é€æ˜ä½“éªŒä¸åº•å±‚ç½‘ç»œä¼˜åŒ–æœ‰æ•ˆç»“åˆï¼ŒåŠ©åŠ›æœåŠ¡ç½‘æ ¼çš„å®è·µä¸æ¨å¹¿ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ·±å…¥è§£æ Envoy å¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨ï¼ˆext_procï¼‰</title>
      <link>https://jimmysong.io/blog/envoy-ext-proc-guide/</link>
      <pubDate>Fri, 20 Dec 2024 11:31:33 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/envoy-ext-proc-guide/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒAPI ç½‘å…³é€šå¸¸éœ€è¦å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œé«˜çº§åˆ«çš„å¤„ç†ï¼Œå¦‚èº«ä»½éªŒè¯ã€æ•°æ®è½¬æ¢å’Œå®‰å…¨æ£€æŸ¥ã€‚Envoy æä¾›çš„ &lt;code&gt;ext_proc&lt;/code&gt; å¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œé€šè¿‡ä¸ gRPC æœåŠ¡äº¤äº’ï¼Œå®ç°çµæ´»çš„è¯·æ±‚ä¸å“åº”å¤„ç†ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¯¥è¿‡æ»¤å™¨çš„åŠŸèƒ½ã€é…ç½®ä¸æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œå¸®åŠ©å¼€å‘äººå‘˜å’Œ DevOps å·¥ç¨‹å¸ˆé«˜æ•ˆåº”ç”¨è¯¥ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ext_proc-ä¸å…¶ä»–è¿‡æ»¤å™¨çš„å…³ç³»&#34;&gt;ext_proc ä¸å…¶ä»–è¿‡æ»¤å™¨çš„å…³ç³»&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto&#34; title=&#34;ext_proc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;ext_proc&lt;/code&gt;&lt;/a&gt; å’Œ Envoy ä¸­çš„å…¶ä»– gRPC æ¥å£è¿‡æ»¤å™¨ï¼ˆå¦‚ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto&#34; title=&#34;ext_authz&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;ext_authz&lt;/code&gt;&lt;/a&gt;ï¼‰åœ¨åŠŸèƒ½ä¸Šæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½† &lt;code&gt;ext_proc&lt;/code&gt; æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ”¯æŒå®Œæ•´çš„è¯·æ±‚å’Œå“åº”å¤„ç†ã€‚è¿™ä½¿å…¶ç‰¹åˆ«é€‚ç”¨äºéœ€è¦æ·±åº¦å†…å®¹æ£€æŸ¥å’Œä¿®æ”¹çš„åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„ Envoy å¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨æ€ç»´å¯¼å›¾å¿«é€Ÿäº†è§£ &lt;code&gt;ext_proc&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-ext-proc-guide/envoy-ext-proc.svg&#34; data-img=&#34;/blog/envoy-ext-proc-guide/envoy-ext-proc.svg&#34; alt=&#34;image&#34; data-caption=&#34;Envoy ext_proc æ€ç»´å¯¼å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Envoy ext_proc æ€ç»´å¯¼å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™å¼ æ€ç»´å¯¼å›¾å±•ç¤ºäº† Envoy &lt;code&gt;ext_proc&lt;/code&gt; å¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨çš„æ ¸å¿ƒç»“æ„å’ŒåŠŸèƒ½æ¨¡å—ã€‚&lt;code&gt;ext_proc&lt;/code&gt; é€šè¿‡ gRPC åŒå‘æµåè®®ä¸å¤–éƒ¨æœåŠ¡äº¤äº’ï¼Œå¯çµæ´»å¤„ç† HTTP è¯·æ±‚å’Œå“åº”çš„å„ä¸ªé˜¶æ®µï¼Œå¹¶æ”¯æŒåŒæ­¥ä¸å¼‚æ­¥å¤„ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ext_proc-å·¥ä½œåŸç†ä¸é…ç½®&#34;&gt;ext_proc å·¥ä½œåŸç†ä¸é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;å®šä¹‰ä¸åŠŸèƒ½&#34;&gt;å®šä¹‰ä¸åŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ext_proc&lt;/code&gt; æ˜¯ Envoy æä¾›çš„ HTTP è¿‡æ»¤å™¨ï¼Œæ”¯æŒå°†è¯·æ±‚å’Œå“åº”å¤–åŒ…ç»™ gRPC æœåŠ¡è¿›è¡Œå¤„ç†ï¼Œå…è®¸åœ¨å¤–éƒ¨æœåŠ¡ä¸­å®ç°å¤æ‚çš„é€»è¾‘ï¼Œçµæ´»åº”å¯¹ä¸šåŠ¡éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œåœ¨å®‰å…¨åœºæ™¯ä¸­ï¼Œ&lt;code&gt;ext_proc&lt;/code&gt; å¯ç”¨äºæ‰§è¡Œèº«ä»½éªŒè¯å’Œæˆæƒæ£€æŸ¥ï¼›åœ¨æ•°æ®è½¬æ¢åœºæ™¯ä¸­ï¼Œå¯ä»¥å®ç°æ•°æ®æ ¼å¼è½¬æ¢ä¸å†…å®¹è¿‡æ»¤ã€‚æ­¤å¤–ï¼Œè¿˜å¯ç”¨äºè®°å½•å®¡è®¡æ—¥å¿—ã€åŠ¨æ€è¯·æ±‚é‡å†™ä»¥åŠå†…å®¹å¢å¼ºç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºå„ç§ä¼ä¸šåº”ç”¨ç¯å¢ƒä¸­çš„æ·±åº¦æµé‡ç®¡ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å·¥ä½œåŸç†&#34;&gt;å·¥ä½œåŸç†&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ext_proc&lt;/code&gt; ä½¿ç”¨åŒå‘ gRPC æµä¸å¤–éƒ¨æœåŠ¡é€šä¿¡ï¼Œå®ç°è¯·æ±‚å’Œå“åº”å¤„ç†çš„å®æ—¶äº¤äº’ã€‚è¿™ä½¿å¾— Envoy å¯ä»¥å°†å¤æ‚ä»»åŠ¡ï¼ˆå¦‚èº«ä»½éªŒè¯ã€æ•°æ®è½¬æ¢å’Œè‡ªå®šä¹‰ Header æ“ä½œï¼‰å¸è½½åˆ°å¤–éƒ¨æœåŠ¡ï¼Œä»è€Œæé«˜çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;Envoy å‘é€ &lt;code&gt;ProcessingRequest&lt;/code&gt; æ¶ˆæ¯ï¼Œå¤–éƒ¨æœåŠ¡è¿”å› &lt;code&gt;ProcessingResponse&lt;/code&gt; æ¶ˆæ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ª HTTP è¯·æ±‚æµéƒ½ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ gRPC æµï¼Œè€Œä¸ä¼šåœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´å…±äº«ã€‚æ¯ä¸ªç”± Envoy å¤„ç†çš„ HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºå…¶ä¸“å±çš„ gRPC æµï¼Œä»è€Œç¡®ä¿è¯·æ±‚ä¸å“åº”çš„éš”ç¦»å’Œç²¾ç¡®ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§è®¾è®¡å…è®¸å¤–éƒ¨æœåŠ¡åœ¨è¯·æ±‚ä¸å“åº”ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µè¿›è¡Œå¹²é¢„ï¼Œç”šè‡³èƒ½å¤Ÿç”Ÿæˆå…¨æ–°çš„å“åº”å†…å®¹ã€‚``&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾æ¦‚è¿° Envoy å¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨çš„å¤„ç†è¿‡ç¨‹ï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-ext-proc-guide/622cc6601c811db8cc3254fe80f347e3.svg&#34; data-img=&#34;/blog/envoy-ext-proc-guide/622cc6601c811db8cc3254fe80f347e3.svg&#34; alt=&#34;image&#34; data-caption=&#34;Envoy ext_proc æµç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Envoy ext_proc æµç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;å…³é”®åŠŸèƒ½&#34;&gt;å…³é”®åŠŸèƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¯·æ±‚å’Œå“åº”å¤„ç†ï¼šè¯»å–å’Œä¿®æ”¹ HTTP è¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨ã€ä¸»ä½“å’Œå°¾éƒ¨ã€‚&lt;/li&gt;
&lt;li&gt;çµæ´»æ€§ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šä¹‰è‡ªå®šä¹‰é€»è¾‘ï¼Œå¼¥è¡¥å†…ç½®åŠŸèƒ½çš„ä¸è¶³ã€‚&lt;/li&gt;
&lt;li&gt;å¼‚æ­¥å¤„ç†ï¼šæ”¯æŒå¼‚æ­¥å¤„ç†æ¨¡å¼ï¼Œé˜²æ­¢è¯·æ±‚é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;envoy-é…ç½®ç¤ºä¾‹&#34;&gt;Envoy é…ç½®ç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ Envoy é…ç½®ç¤ºä¾‹ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;envoy.yaml&#34; download&gt;envoy.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;static_resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;listener_0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0.0.0.0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filter_chains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.network.http_connection_manager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stat_prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingress_http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;access_log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.access_loggers.stdout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.access_loggers.stream.v3.StdoutAccessLog&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;log_format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;text_format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;[%START_TIME%] \&amp;#34;%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%\&amp;#34; %RESPONSE_CODE% %RESPONSE_FLAGS% \&amp;#34;%RESP(X-EXTPROC-HELLO)%\&amp;#34; \&amp;#34;%RESP(CONTENT-TYPE)%\&amp;#34; \&amp;#34;%RESP(CONTENT-LENGTH)%\&amp;#34; %DURATION% ms\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;local_route&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;virtual_hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;local_service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;domains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host_rewrite_literal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.envoyproxy.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;service_envoyproxy_io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http_filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.http.ext_proc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.filters.http.ext_proc.v3.ExternalProcessor&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;grpc_service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoy_grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ext_proc_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;failure_mode_allow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;processing_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;request_header_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SKIP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;response_header_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SEND&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.http.router&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.filters.http.router.v3.Router&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;clusters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ext_proc_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;connect_timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0.&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;25s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;LOGICAL_DNS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lb_policy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ROUND_ROBIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http2_protocol_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;load_assignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ext_proc_cluster&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127.0.0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;service_envoyproxy_io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;LOGICAL_DNS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dns_lookup_family&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;V4_ONLY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;load_assignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;service_envoyproxy_io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.envoyproxy.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;transport_socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.transport_sockets.tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sni&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.envoyproxy.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸ºäº†ç†è§£ Envoy é…ç½®ä¸ gRPC æœåŠ¡ä¹‹é—´çš„å…³è”ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä»¥ä¸‹é…ç½®é¡¹å¦‚ä½•å½±å“æµé‡å¤„ç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;grpc_service&lt;/strong&gt;: å®šä¹‰ä¸ gRPC æœåŠ¡é€šä¿¡çš„ç›®æ ‡åœ°å€å’Œé›†ç¾¤åï¼Œå¯¹åº” Envoy é…ç½®ä¸­çš„ &lt;code&gt;ext_proc_cluster&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;processing_mode&lt;/strong&gt;: æ§åˆ¶è¯·æ±‚å¤´ã€è¯·æ±‚ä½“å’Œå“åº”å¤´ç­‰å¤„ç†é˜¶æ®µçš„è§¦å‘è¡Œä¸ºï¼Œå†³å®šäº†ä½•æ—¶è°ƒç”¨ gRPC æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;failure_mode_allow&lt;/strong&gt;: æŒ‡å®šå½“ gRPC æœåŠ¡å¤±è´¥æ—¶æ˜¯å¦ç»§ç»­è¯·æ±‚å¤„ç†ï¼Œç¡®ä¿æœåŠ¡åœ¨éƒ¨åˆ†å¤±è´¥åœºæ™¯ä¸‹çš„é«˜å¯ç”¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;listeners&lt;/strong&gt;: å®šä¹‰äº† Envoy æ¥æ”¶è¯·æ±‚çš„ç½‘ç»œåœ°å€å’Œç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;filter_chains&lt;/strong&gt;: é…ç½®è¯·æ±‚çš„å¤„ç†é“¾ï¼ŒåŒ…æ‹¬ HTTP è¿æ¥ç®¡ç†å™¨å’Œå¤–éƒ¨å¤„ç†è¿‡æ»¤å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;http_filters&lt;/strong&gt;: åˆ—å‡ºå¯ç”¨çš„è¿‡æ»¤å™¨ï¼Œå¦‚ &lt;code&gt;ext_proc&lt;/code&gt; å’Œ &lt;code&gt;router&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;clusters&lt;/strong&gt;: å®šä¹‰ä¸Šæ¸¸æœåŠ¡å’Œå¤–éƒ¨å¤„ç† gRPC æœåŠ¡çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¦ç»†çš„é…ç½®è¯´æ˜è¯·å‚è€ƒ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto&#34; title=&#34;Envoy æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Envoy ä½¿ç”¨è¿™äº›é…ç½®é€‰é¡¹å°†è¯·æ±‚å’Œå“åº”å¤–åŒ…ç»™ gRPC æœåŠ¡ï¼Œå¤„ç†ç»“æœé€šè¿‡åŒå‘æµåè®®è¿”å›ï¼Œå½±å“è¯·æ±‚çš„è½¬å‘è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;grpc-æœåŠ¡ç¤ºä¾‹&#34;&gt;gRPC æœåŠ¡ç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ gRPC å¤–éƒ¨å¤„ç†æœåŠ¡å™¨å®ç°ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡ &lt;code&gt;ext_proc&lt;/code&gt; æ·»åŠ è‡ªå®šä¹‰å“åº”å¤´ã€‚è¯¥å®ç°å±•ç¤ºäº†æ ¸å¿ƒæ–¹æ³•çš„é€‰æ‹©å’Œè®¾è®¡å†³ç­–ï¼Œä¾‹å¦‚ä½¿ç”¨ &lt;code&gt;Process&lt;/code&gt; æ–¹æ³•æŒç»­æ¥æ”¶è¯·æ±‚å’Œå‘é€å“åº”ï¼Œç¡®ä¿å¤„ç†è¿‡ç¨‹çš„è¿ç»­æ€§ã€‚æ­¤å¤–ï¼Œé‡‡ç”¨ &lt;code&gt;HeaderMutation&lt;/code&gt; é…ç½®ä¿®æ”¹ HTTP å“åº”å¤´ï¼Œå±•ç°äº† gRPC æ¶ˆæ¯ç»“æ„ä¸ Envoy é…ç½®çš„ç´§å¯†é›†æˆï¼Œä¾¿äºåŠ¨æ€æ‰©å±•å’Œçµæ´»ç®¡ç†ã€‚&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;ext_proc_demo/main.go&#34; download&gt;main.go&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;s&#34;&gt;&amp;#34;net&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;s&#34;&gt;&amp;#34;google.golang.org/grpc&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;s&#34;&gt;&amp;#34;google.golang.org/grpc/codes&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;s&#34;&gt;&amp;#34;google.golang.org/grpc/status&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;configPb&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/envoyproxy/go-control-plane/envoy/config/core/v3&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/envoyproxy/go-control-plane/envoy/service/ext_proc/v3&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;extProcServer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UnimplementedExternalProcessorServer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Process handles external processing requests from Envoy.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// It listens for incoming requests, modifies response headers,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// and sends the updated response back to Envoy.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// When a request with response headers is received, it adds a custom header&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// &amp;#34;x-extproc-hello&amp;#34; with the value &amp;#34;Hello from ext_proc&amp;#34; and returns the modified headers.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Note: The `RawValue` field is used instead of `Value` because it supports&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// setting the header value as a byte slice, allowing precise handling of binary data.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// This function is called once per HTTP request to process gRPC messages from Envoy.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// It exits when an error occurs while receiving or sending messages.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;srv&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ExternalProcessor_ProcessServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;srv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Recv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Unknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;error receiving request: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Received request: %+v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// Prepare the response to be returned to Envoy.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProcessingResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;c1&#34;&gt;// Only process response headers, not request headers.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;respHeaders&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GetResponseHeaders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;respHeaders&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Processing Response Headers...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProcessingResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProcessingResponse_ResponseHeaders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;					&lt;span class=&#34;nx&#34;&gt;ResponseHeaders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HeadersResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;						&lt;span class=&#34;nx&#34;&gt;Response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CommonResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;							&lt;span class=&#34;nx&#34;&gt;HeaderMutation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HeaderMutation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;								&lt;span class=&#34;nx&#34;&gt;SetHeaders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;configPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HeaderValueOption&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;									&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;										&lt;span class=&#34;nx&#34;&gt;Header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;configPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HeaderValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;											&lt;span class=&#34;nx&#34;&gt;Key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;      &lt;span class=&#34;s&#34;&gt;&amp;#34;x-extproc-hello&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;											&lt;span class=&#34;nx&#34;&gt;RawValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Hello from ext_proc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;										&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;									&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;								&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;							&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;						&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;					&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Sending response: %+v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// Send the response back to Envoy.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;srv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;				&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;codes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Unknown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;error sending response: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// If it is not a callback in the response header stage, do not make any modifications and continue processing the next event.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// For request_headers or other events, do not modify &amp;amp; ensure that Envoy will not be stuck.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// An empty processing can be returned for request_headers, or it can be skipped in envoy.yaml.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;c1&#34;&gt;// Here, simply continue to wait for the next event.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;lis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;net&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;:9000&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to listen: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;grpcServer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;c1&#34;&gt;// Register the ExternalProcessorServer with the gRPC server.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;extProcPb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;RegisterExternalProcessorServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;grpcServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;extProcServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Starting gRPC server on :9000...&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;grpcServer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;lis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to serve: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é¢„æœŸç»“æœï¼šè¯·æ±‚è¿”å›çŠ¶æ€ç  200ï¼Œå“åº”å¤´ä¸­åŒ…å«è‡ªå®šä¹‰å¤´ &lt;code&gt;x-extproc-hello: Hello from ext_proc&lt;/code&gt;ã€‚å¦‚æœç¼ºå°‘è¯¥å¤´ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;gRPC æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ&lt;/strong&gt;ï¼šç¡®è®¤ gRPC æœåŠ¡å™¨æ˜¯å¦å·²å¯åŠ¨å¹¶ç›‘å¬ç«¯å£ &lt;code&gt;:9000&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy é…ç½®æ˜¯å¦æ­£ç¡®&lt;/strong&gt;ï¼šæ£€æŸ¥ Envoy é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿ &lt;code&gt;ext_proc&lt;/code&gt; è¿‡æ»¤å™¨å·²å¯ç”¨ï¼Œå¹¶ä¸” &lt;code&gt;ext_proc_cluster&lt;/code&gt; é…ç½®æ— è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—å’Œé”™è¯¯æ’æŸ¥&lt;/strong&gt;ï¼šæŸ¥çœ‹ Envoy å’Œ gRPC æœåŠ¡å™¨çš„æ—¥å¿—ï¼Œæ’æŸ¥æ½œåœ¨é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æœ¬åœ°è¿è¡Œ Envoy å’Œ  gRPC æœåŠ¡åï¼Œä½¿ç”¨ &lt;code&gt;curl&lt;/code&gt; è¿›è¡Œæµ‹è¯•ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;envoy -c envoy.yaml
go run main.go
curl -v http://localhost:8080
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ å°†çœ‹åˆ°åŒ…å«è‡ªå®šä¹‰å¤´ &lt;code&gt;x-extproc-hello: Hello from ext_proc&lt;/code&gt; çš„å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å°†çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç»“æœã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/envoy-ext-proc-guide/warp.png&#34; data-img=&#34;https://jimmysong.io/img/blog/envoy-ext-proc-guide/warp.png&#34; alt=&#34;image&#34; data-caption=&#34;ç¤ºä¾‹ç»“æœ&#34;&gt;
  
  
  &lt;figcaption&gt;ç¤ºä¾‹ç»“æœ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨ curl è¯·æ±‚çš„å“åº”ä¸­åŒ…å«äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„ header &lt;code&gt;x-extproc-hello: Hello from ext_proc&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»Ÿè®¡ä¸ç›‘æ§&#34;&gt;ç»Ÿè®¡ä¸ç›‘æ§&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ext_proc&lt;/code&gt; è¾“å‡ºçš„ç»Ÿè®¡ä¿¡æ¯ä½äº &lt;code&gt;http.&amp;lt;stat_prefix&amp;gt;.ext_proc.&lt;/code&gt; å‘½åç©ºé—´ï¼Œå…¶ä¸­ &lt;code&gt;stat_prefix&lt;/code&gt; æ˜¯ HTTP è¿æ¥ç®¡ç†å™¨çš„å‰ç¼€ã€‚å¸¸ç”¨ç»Ÿè®¡ä¿¡æ¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æŒ‡æ ‡åç§°&lt;/th&gt;
          &lt;th&gt;ç±»å‹&lt;/th&gt;
          &lt;th&gt;æè¿°&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;streams_started&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;å¯åŠ¨çš„ gRPC æµæ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;streams_msgs_sent&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;å‘é€çš„æ¶ˆæ¯æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;streams_msgs_received&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;æ¥æ”¶çš„æ¶ˆæ¯æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;spurious_msgs_received&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;æ¥æ”¶çš„è¿ååè®®çš„æ„å¤–æ¶ˆæ¯æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;streams_closed&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;æˆåŠŸå…³é—­çš„æµæ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;streams_failed&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;äº§ç”Ÿ gRPC é”™è¯¯çš„æµæ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;failure_mode_allowed&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;é”™è¯¯è¢«å¿½ç•¥çš„æ¬¡æ•°ï¼ˆæ ¹æ®é…ç½®ï¼‰&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;message_timeouts&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;é…ç½®è¶…æ—¶å†…æœªæ”¶åˆ°å“åº”çš„æ¶ˆæ¯æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;rejected_header_mutations&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;è¢«æ‹’ç»çš„å¤´éƒ¨æ›´æ”¹æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;clear_route_cache_ignored&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;å¿½ç•¥çš„æ¸…ç†è·¯ç”±ç¼“å­˜è¯·æ±‚æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;clear_route_cache_disabled&lt;/td&gt;
          &lt;td&gt;Counter&lt;/td&gt;
          &lt;td&gt;è¢«ç¦ç”¨çš„æ¸…ç†è·¯ç”±ç¼“å­˜è¯·æ±‚æ•°é‡&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¯¦è§ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter#statistics&#34; title=&#34;Envoy æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åº”ç”¨åœºæ™¯ä¸ä¼˜åŒ–ç­–ç•¥&#34;&gt;åº”ç”¨åœºæ™¯ä¸ä¼˜åŒ–ç­–ç•¥&lt;/h2&gt;
&lt;h3 id=&#34;å¸¸è§åº”ç”¨åœºæ™¯&#34;&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;èº«ä»½éªŒè¯ï¼šå¤–éƒ¨èº«ä»½éªŒè¯æœåŠ¡æ£€æŸ¥ç”¨æˆ·å‡­è¯ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å®¡è®¡ï¼šè®°å½•è¯·æ±‚å’Œå“åº”çš„æ•°æ®ä»¥æ»¡è¶³åˆè§„è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æµé‡ç®¡ç†ï¼šæ ¹æ®åŠ¨æ€åˆ†æè°ƒæ•´æµé‡è·¯ç”±ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®è¯´æ˜ä¸ä¼˜åŒ–ç­–ç•¥&#34;&gt;é…ç½®è¯´æ˜ä¸ä¼˜åŒ–ç­–ç•¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ•…éšœæ¢å¤ä¸è´Ÿè½½å‡è¡¡ï¼šéƒ¨ç½²å¤šå®ä¾‹ gRPC æœåŠ¡ï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡è‡ªåŠ¨è½¬ç§»è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶ˆæ¯è¶…æ—¶ä¸é‡è¯•é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;http_filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.http.ext_proc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;grpc_service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoy_grpc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ext_proc_server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;processing_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;request_header_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SEND&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;response_header_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SEND&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;message_timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;500ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;max_message_timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1000ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;failure_mode_allow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…ƒæ•°æ®é€‰é¡¹ä¸å®‰å…¨ç­–ç•¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;metadata_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;forwarding_namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;untyped&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;custom_namespace&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Envoy çš„ &lt;code&gt;ext_proc&lt;/code&gt; è¿‡æ»¤å™¨é€šè¿‡çµæ´»çš„è¯·æ±‚å’Œå“åº”å¤„ç†èƒ½åŠ›ï¼Œä¸ºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ²»ç†ã€æ•°æ®è½¬æ¢å’Œè¯·æ±‚æ£€æŸ¥æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚æ­£ç¡®é…ç½®å’Œä¼˜åŒ– &lt;code&gt;ext_proc&lt;/code&gt; å¯ä»¥æ˜¾è‘—æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ»¡è¶³å¤šæ ·åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_proc_filter&#34; title=&#34;External Processing&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;External Processing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto&#34; title=&#34;External Processing Filter (proto)&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;External Processing Filter (proto)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/envoyproxy/go-control-plane&#34; title=&#34;go-control-plane&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;go-control-plane&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>æ·±å…¥ Istio Ambient æ¨¡å¼ï¼šä» ztunnel åˆ° Waypoint ä»£ç†çš„ L7 æµé‡è·¯å¾„è§£æ</title>
      <link>https://jimmysong.io/blog/istio-ambient-l7-flow-analysis/</link>
      <pubDate>Thu, 12 Dec 2024 18:44:52 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-ambient-l7-flow-analysis/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨ Istio Ambient æ¨¡å¼ä¸‹ï¼Œztunnel æ˜¯èŠ‚ç‚¹çº§å®‰å…¨ä»£ç†ï¼Œåœ¨ L4 å±‚æ‹¦æˆªå¹¶åŠ å¯†æœåŠ¡é—´æµé‡ã€‚ä½†ä¸è´Ÿè´£ L7ï¼ˆå¦‚ HTTPï¼‰å±‚å¤„ç†ã€‚Ambient æ¨¡å¼ä¸­ï¼ŒL7 å¤„ç†ç”± Waypoint ä»£ç†è´Ÿè´£ã€‚å½“ ztunnel å‘ç°ç›®æ ‡æœåŠ¡éœ€ L7 å¤„ç†æ—¶ï¼Œé€šè¿‡ HBONE åè®®å°†æµé‡è½¬å‘ç»™ Waypoint ä»£ç†è¿›è¡Œ HTTP å±‚ç­–ç•¥åº”ç”¨å’Œå¯è§‚å¯Ÿæ€§å¤„ç†ï¼Œå†ç”± Waypoint ä»£ç†ç» ztunnel è½¬å‘ç»™ç›®æ ‡ Podï¼Œæœ¬æ–‡å°†è¯¦ç»†é˜è¿°è¿™æ¡ L7 æµé‡è½¬å‘é“¾è·¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;waypoint-ä»£ç†çš„è§’è‰²ä¸è´£ä»»&#34;&gt;Waypoint ä»£ç†çš„è§’è‰²ä¸è´£ä»»&lt;/h2&gt;
&lt;p&gt;åœ¨ Istio Ambient æ¨¡å¼ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ztunnel&lt;/strong&gt; è´Ÿè´£é€æ˜æ•è· Pod é—´çš„ L4 æµé‡ï¼Œæä¾› mTLS åŠ å¯†å’Œèº«ä»½è®¤è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Waypoint ä»£ç†&lt;/strong&gt; æ˜¯ä¸€ä¸ªåŸºäº Envoy çš„ L7 ä»£ç†ï¼Œå¤„ç† HTTP å±‚çš„é«˜çº§è·¯ç”±ã€ç­–ç•¥å’Œå¯è§‚å¯Ÿæ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ä¸€ä¸ªè¯·æ±‚éœ€è¦ L7 å±‚ç­–ç•¥æ—¶ï¼ˆå¦‚ &lt;code&gt;productpage&lt;/code&gt; è°ƒç”¨ &lt;code&gt;reviews-v1&lt;/code&gt; æœåŠ¡ï¼‰ï¼Œ&lt;strong&gt;ztunnel å°†æµé‡é€šè¿‡ HBONE éš§é“è½¬å‘åˆ° Waypoint Proxy&lt;/strong&gt;ï¼Œç”± Waypoint æ‰§è¡Œ HTTP è·¯ç”±å’Œç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;l7-æµé‡åœ¨-ambient-æ¨¡å¼ä¸­çš„å¤„ç†è·¯å¾„&#34;&gt;L7 æµé‡åœ¨ Ambient æ¨¡å¼ä¸­çš„å¤„ç†è·¯å¾„&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† L7 æµé‡åœ¨ Ambient æ¨¡å¼ä¸­çš„å¤„ç†è·¯å¾„ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-l7-flow-analysis/022a72b18c3091c40cf01bb4fad208a2.svg&#34; data-img=&#34;/blog/istio-ambient-l7-flow-analysis/022a72b18c3091c40cf01bb4fad208a2.svg&#34; alt=&#34;image&#34; data-caption=&#34;L7 æµé‡åœ¨ Ambient æ¨¡å¼ä¸­çš„å¤„ç†è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;L7 æµé‡åœ¨ Ambient æ¨¡å¼ä¸­çš„å¤„ç†è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢ä¸¤å¼ å›¾ç‰‡åˆ†åˆ«å±•ç¤ºäº†æº Pod å’Œç›®æ ‡ Pod åœ¨åŒèŠ‚ç‚¹å’Œè·¨èŠ‚ç‚¹æƒ…å†µä¸‹çš„ L7 æµé‡å¤„ç†è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-l7-flow-analysis/hbone-same-node.svg&#34; data-img=&#34;/blog/istio-ambient-l7-flow-analysis/hbone-same-node.svg&#34; alt=&#34;image&#34; data-caption=&#34;æº pod å’Œç›®æ ‡ pod åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šçš„ L7 æµé‡è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æº pod å’Œç›®æ ‡ pod åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šçš„ L7 æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-l7-flow-analysis/hbone-cross-node.svg&#34; data-img=&#34;/blog/istio-ambient-l7-flow-analysis/hbone-cross-node.svg&#34; alt=&#34;image&#34; data-caption=&#34;æº pod å’Œç›®æ ‡ pod åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„ L7 æµé‡è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æº pod å’Œç›®æ ‡ pod åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šçš„ L7 æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æ˜¯è¯¦ç»†çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-åº”ç”¨è¯·æ±‚å‘å‡º&#34;&gt;1. åº”ç”¨è¯·æ±‚å‘å‡º&lt;/h3&gt;
&lt;p&gt;å‡è®¾ productpage åº”ç”¨éœ€è¦è®¿é—® reviews æœåŠ¡ã€‚productpage Pod å†…çš„åº”ç”¨å‘ &lt;code&gt;reviews.default.svc.cluster.local:9080&lt;/code&gt; å‘èµ· HTTP è¯·æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-ztunnel-l4-é€æ˜æ•è·ä¸è¯†åˆ«&#34;&gt;2. ztunnel L4 é€æ˜æ•è·ä¸è¯†åˆ«&lt;/h3&gt;
&lt;p&gt;productpage Pod çš„å‡ºç«™è¯·æ±‚é¦–å…ˆè¢«æ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„ ztunnel æ‹¦æˆªã€‚ztunnel æŸ¥çœ‹ä» Istio æ§åˆ¶é¢ä¸‹å‘çš„é…ç½®ï¼Œæ ¹æ®ç›®æ ‡æœåŠ¡ï¼ˆreviewsï¼‰çš„èº«ä»½å’Œç­–ç•¥ï¼Œå¾—çŸ¥è¯¥æœåŠ¡éœ€è¦ç»è¿‡ Waypoint ä»£ç†è¿›è¡Œ L7 å±‚å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-é€šè¿‡-hbone-åè®®è½¬å‘è‡³-waypoint&#34;&gt;3. é€šè¿‡ HBONE åè®®è½¬å‘è‡³ Waypoint&lt;/h3&gt;
&lt;p&gt;ztunnel å¹¶éä½¿ç”¨ä¼ ç»Ÿçš„ Envoy-to-Envoy XDS æˆ–åŸç”Ÿ TCP+mTLS éš§é“ï¼Œè€Œæ˜¯é€šè¿‡ &lt;strong&gt;HBONE åè®®&lt;/strong&gt; ä¸ Waypoint ä»£ç†é€šä¿¡ã€‚HBONE æ˜¯ Istio Ambient æ¨¡å¼ä¸­ä¸“é—¨è®¾è®¡çš„æ—  Sidecar L7 è·¯ç”±åè®®ï¼ŒåŸºäº HTTP/2ï¼Œå¯åœ¨é€æ˜æ¨¡å¼ä¸‹å¯¹æµé‡è¿›è¡Œå åŠ è½¬å‘ï¼Œä»è€Œå®ç°çµæ´»çš„æœåŠ¡æ‹“æ‰‘å’Œç­–ç•¥æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸€é˜¶æ®µï¼Œztunnel ä¼šå°† L4 æµé‡å°è£…åˆ° HBONE éš§é“ä¸­ï¼Œå‘é€ç»™ç›¸åº”çš„ Waypoint ä»£ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;4-waypoint-ä»£ç†çš„-l7-ç­–ç•¥ä¸é¥æµ‹å¤„ç†&#34;&gt;4. Waypoint ä»£ç†çš„ L7 ç­–ç•¥ä¸é¥æµ‹å¤„ç†&lt;/h3&gt;
&lt;p&gt;Waypoint ä»£ç†ï¼ˆç›®å‰ä»åŸºäº Envoy å®ç°ï¼‰æ”¶åˆ°é€šè¿‡ HBONE éš§é“ä¼ æ¥çš„æµé‡åï¼Œé€šè¿‡ TLS é…ç½®å’Œå®¢æˆ·ç«¯è¯ä¹¦æ ¡éªŒï¼Œç¡®ä¿ä¸‹æ¸¸ï¼ˆztunnelï¼‰æ˜¯å·²è¢«è®¤è¯çš„å—ä¿¡ä¸»ä½“ã€‚å®ƒå°†ä¸‹æ¸¸å®¢æˆ·ç«¯çš„èº«ä»½ä¿¡æ¯ï¼ˆSPIFFE IDï¼‰å’Œå…¶ä»–ä¸Šä¸‹æ–‡å…ƒæ•°æ®æå–å‡ºæ¥ï¼Œä»¥ä¾¿åœ¨ L7 å±‚ç­–ç•¥å†³ç­–ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œçš„æ“ä½œåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäº HTTP Path/Host çš„è·¯ç”±å’Œæµé‡æ‹†åˆ†&lt;/li&gt;
&lt;li&gt;åŸºäº Headers çš„è®¿é—®æ§åˆ¶å’Œè®¤è¯ç­–ç•¥&lt;/li&gt;
&lt;li&gt;æ•…éšœæ³¨å…¥ã€ç†”æ–­ã€é™æµ&lt;/li&gt;
&lt;li&gt;é¥æµ‹æ•°æ®æ”¶é›†ï¼ˆè¯·æ±‚æ—¶å»¶ã€é”™è¯¯ç‡ã€Tracingã€Metricsã€Logsï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®Œæˆ L7 å¤„ç†åï¼ŒWaypoint ä»£ç†å†é€šè¿‡ HBONE å°†æµé‡ä¼ å›åˆ°ç›®æ ‡èŠ‚ç‚¹çš„ ztunnelã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-æµé‡åˆ°è¾¾ç›®æ ‡-pod&#34;&gt;5. æµé‡åˆ°è¾¾ç›®æ ‡ Pod&lt;/h3&gt;
&lt;p&gt;ç›®æ ‡èŠ‚ç‚¹ä¸Šçš„ ztunnel ä¼šä» Waypoint ä»£ç†æ¥æ”¶å¤„ç†è¿‡çš„æµé‡ï¼ˆåŒæ ·é€šè¿‡ HBONE éš§é“ä¼ é€’ï¼‰ï¼Œç„¶åè§£å°è£…å¹¶å°†æµé‡ä¼ é€’ç»™å¯¹åº”çš„ reviews Pod ä¸­çš„åº”ç”¨å®¹å™¨ç«¯å£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ´å¯Ÿä¸å…³é”®ç‚¹æ€»ç»“&#34;&gt;æ´å¯Ÿä¸å…³é”®ç‚¹æ€»ç»“&lt;/h2&gt;
&lt;h3 id=&#34;1-waypoint-å¹¶ä¸çŸ¥é“-ztunnel-çš„å­˜åœ¨&#34;&gt;1. Waypoint å¹¶ä¸çŸ¥é“ ztunnel çš„å­˜åœ¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Waypoint ä»£ç†åªçŸ¥é“ç›®æ ‡ Pod çš„ IP åœ°å€ï¼Œä½†ç›®æ ‡ç«¯å£è¢«é‡å†™ä¸º &lt;code&gt;15008&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;Kubernetes &lt;code&gt;iptables&lt;/code&gt; è§„åˆ™å°†æµé‡é€æ˜é‡å®šå‘åˆ° ztunnelã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-æµé‡å®‰å…¨æ€§ç«¯åˆ°ç«¯åŠ å¯†ä¸èº«ä»½è®¤è¯&#34;&gt;2. æµé‡å®‰å…¨æ€§ï¼šç«¯åˆ°ç«¯åŠ å¯†ä¸èº«ä»½è®¤è¯&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŒå‘ TLSï¼ˆmTLSï¼‰å’Œ SPIFFE ID æ ¡éªŒç¡®ä¿äº†ç«¯åˆ°ç«¯å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;æ— æ³•ç»•è¿‡ ztunnelï¼Œç¡®ä¿äº†é›¶ä¿¡ä»»æ¶æ„çš„å®Œæ•´å®æ–½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-å®Œå…¨é€æ˜çš„æµé‡æ§åˆ¶&#34;&gt;3. å®Œå…¨é€æ˜çš„æµé‡æ§åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨å¼€å‘äººå‘˜æ— éœ€æ›´æ”¹ä»»ä½•ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;æµé‡æ§åˆ¶ã€ç­–ç•¥å’Œå¯è§‚å¯Ÿæ€§å®Œå…¨åœ¨æ•°æ®é¢å±‚é¢é€æ˜æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¦‚ä½•è°ƒè¯•&#34;&gt;å¦‚ä½•è°ƒè¯•ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åœ¨ Ambient æ¨¡å¼ä¸‹ï¼Œè°ƒè¯•æ–¹å¼ä¹Ÿæœ‰äº†ä¸€äº›å˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ztunnel è°ƒè¯•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Istio å¼•å…¥äº†æ–°çš„ &lt;code&gt;istioctl ztunnel&lt;/code&gt; å­å‘½ä»¤æ¥ååŠ©æŸ¥çœ‹å’Œè°ƒè¯• ztunnel çš„é…ç½®ä¸çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;waypoint è°ƒè¯•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è™½ç„¶ Waypoint ä»£ç†ä»ç„¶æ˜¯ Envoyï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥ä½¿ç”¨ &lt;code&gt;istioctl pc&lt;/code&gt; å’Œ &lt;code&gt;istioctl ps&lt;/code&gt; æ¥æŸ¥çœ‹å…¶è·¯ç”±ã€é›†ç¾¤å’Œç›‘å¬å™¨é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;istioctl waypoint&lt;/code&gt; æä¾›äº†æ›´ç›´è§‚çš„é…ç½®æŸ¥çœ‹å’ŒçŠ¶æ€æ£€æŸ¥åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Istio Ambient æ¨¡å¼é€šè¿‡ ztunnel æ¥å¤„ç† L4 æµé‡å¹¶å®ç°é›¶ä¿¡ä»»åŠ å¯†ä¸ä¼ è¾“ï¼Œå†é€šè¿‡ Waypoint ä»£ç†ä¸ºéœ€è¦ L7 ç­–ç•¥çš„è¯·æ±‚æä¾›é›†ä¸­å¤„ç†ã€‚ä¸¤è€…ä¹‹é—´é€šè¿‡ HBONE åè®®è¿›è¡Œé«˜æ•ˆã€é€æ˜çš„é€šä¿¡ï¼Œå®ç°æ¯”ä¼ ç»Ÿ Sidecar æ¨¡å¼æ›´è½»é‡ä¸”æ˜“äºè¿ç»´çš„æ¶æ„ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¢ç´¢ AnythingLLMï¼šå€ŸåŠ©å¼€æº AI æ‰“é€ ç§æœ‰åŒ–æ™ºèƒ½çŸ¥è¯†åº“</title>
      <link>https://jimmysong.io/blog/building-private-ai-knowledge-base-anythingllm/</link>
      <pubDate>Wed, 11 Dec 2024 21:50:21 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/building-private-ai-knowledge-base-anythingllm/</guid>
      <description>
        
        
        &lt;p&gt;éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å¿«é€Ÿå‘å±•ï¼Œå°†ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“ä¸ AI å·¥å…·ç»“åˆæˆä¸ºçƒ­é—¨è§£å†³æ–¹æ¡ˆã€‚ä½œä¸ºä¸€åæŠ€æœ¯æ¢ç´¢è€…ï¼Œæˆ‘å¯¹æ„å»ºç§æœ‰çŸ¥è¯†åº“å……æ»¡å…´è¶£ï¼Œä¹Ÿå¸Œæœ›æµ‹è¯• LLM çš„èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯åƒ Ollama å’Œåƒé—®è¿™ç±»æ¨¡å‹ã€‚æ­¤å¤–ï¼ŒAnythingLLM æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…·æœ‰è¾ƒé«˜çš„ç¤¾åŒºå…³æ³¨åº¦ï¼Œå› æ­¤æˆ‘å†³å®šå¯¹å…¶è¿›è¡Œæ·±å…¥è°ƒç ”ã€‚&lt;/p&gt;
&lt;p&gt;åŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯ï¼Œ&lt;a href=&#34;https://anythingllm.com/&#34; title=&#34;AnythingLLM&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AnythingLLM&lt;/a&gt; æä¾›äº†ä»æ•°æ®å¤„ç†åˆ°ç”¨æˆ·ç•Œé¢çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæ„å»ºä¼ä¸šå†…éƒ¨çš„æ™ºèƒ½çŸ¥è¯†åº“ã€‚å…¶æ¨¡å—åŒ–æ¶æ„å’Œçµæ´»éƒ¨ç½²æ–¹å¼ï¼Œä½¿å…¶æˆä¸ºä¼ä¸šå’Œä¸ªäººå¼€å‘è€…è¿›è¡ŒçŸ¥è¯†ç®¡ç†å’Œ AI é¡¹ç›®å®è·µçš„é‡è¦å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;rag-åŸç†æ¦‚è¿°&#34;&gt;RAG åŸç†æ¦‚è¿°&lt;/h2&gt;
&lt;h3 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;RAGï¼ˆRetrieval-Augmented Generationï¼‰&lt;/strong&gt; æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œè¯­è¨€æ¨¡å‹çš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡ä»å¤§è§„æ¨¡çš„çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æŒ‡å¯¼è¯­è¨€æ¨¡å‹ç”Ÿæˆæ›´å‡†ç¡®å’Œæ·±å…¥çš„ç­”æ¡ˆã€‚è¿™ç§æ–¹æ³•ç”± Meta AI ç ”ç©¶äººå‘˜åœ¨ 2020 å¹´æå‡ºï¼Œæ—¨åœ¨è§£å†³å¤§å‹è¯­è¨€æ¨¡å‹åœ¨ä¿¡æ¯æ»åã€æ¨¡å‹å¹»è§‰ã€ç§æœ‰æ•°æ®åŒ®ä¹å’Œå†…å®¹ä¸å¯è¿½æº¯ç­‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RAG å°±æ˜¯å¯ä»¥å¼€å·å›å¤çš„ LLM&lt;/strong&gt;ã€‚å…¶å‘å±•å†ç¨‹ï¼š&lt;strong&gt;Naive RAG&lt;/strong&gt; åŒ…å«ç´¢å¼•ã€æ£€ç´¢ã€ç”Ÿæˆä¸‰æ­¥ï¼Œå­˜åœ¨ &lt;strong&gt;å¬å›ç‡ä½ã€Prompt æ‹¼æ¥é—®é¢˜&lt;/strong&gt;ã€‚&lt;strong&gt;Advanced RAG&lt;/strong&gt; ä¼˜åŒ–ç´¢å¼•ä¸æ£€ç´¢ï¼Œå¼•å…¥ &lt;strong&gt;é¢„æ£€ç´¢ã€åæ£€ç´¢ç­–ç•¥ä¸æ•°æ®æ¸…æ´—&lt;/strong&gt; æå‡æ•ˆç‡ã€‚&lt;strong&gt;Modular RAG&lt;/strong&gt; å®ç° &lt;strong&gt;æ¨¡å—åŒ–æµæ°´çº¿ä¸ç«¯åˆ°ç«¯è®­ç»ƒ&lt;/strong&gt;ï¼Œå…·å¤‡æ›´é«˜çš„ &lt;strong&gt;çµæ´»æ€§ä¸é€‚åº”æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;èƒŒæ™¯ä¸æŒ‘æˆ˜&#34;&gt;èƒŒæ™¯ä¸æŒ‘æˆ˜&lt;/h3&gt;
&lt;p&gt;å°½ç®¡ LLM åœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢å­˜åœ¨å±€é™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŸ¥è¯†å±€é™æ€§&lt;/strong&gt;ï¼šå¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®æ¥è‡ªå…¬å¼€æ•°æ®æºï¼Œæ— æ³•è®¿é—®éå…¬å¼€å’Œå®æ—¶æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹»è§‰é—®é¢˜&lt;/strong&gt;ï¼šæ¨¡å‹æœ‰æ—¶ä¼šç”Ÿæˆé”™è¯¯ç­”æ¡ˆï¼Œç‰¹åˆ«æ˜¯åœ¨ç¼ºå°‘ç‰¹å®šé¢†åŸŸçŸ¥è¯†æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å®‰å…¨æ€§&lt;/strong&gt;ï¼šæ¶‰åŠå†…éƒ¨ç§æœ‰æ•°æ®æ—¶ï¼Œä¼ä¸šé¢ä¸´æ•°æ®æ³„éœ²é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RAG æŠ€æœ¯é€šè¿‡å‘é‡æ£€ç´¢ä¸ç”Ÿæˆæ¨¡å‹ç»“åˆï¼Œæ˜¾è‘—æé«˜äº†æ•°æ®å¤„ç†çš„æ·±åº¦å’Œå‡†ç¡®æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å·¥ä½œåŸç†&#34;&gt;å·¥ä½œåŸç†&lt;/h3&gt;
&lt;p&gt;RAG çš„å·¥ä½œæµç¨‹åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†å†…éƒ¨ç§æœ‰æ•°æ®å‘é‡åŒ–å­˜å…¥æ•°æ®åº“ï¼Œæ„å»ºæ£€ç´¢ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·åº”ç”¨é˜¶æ®µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æ®ç”¨æˆ·çš„ Prompt æ£€ç´¢ç›¸å…³å†…å®¹ï¼Œå°†ç»“æœä¸åŸ Prompt ç»„åˆï¼Œç”Ÿæˆæ¨¡å‹å›ç­”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒRAG å¯ä»¥æ­å»ºå›¢é˜Ÿå†…éƒ¨çš„æœ¬åœ°çŸ¥è¯†åº“ï¼Œå¼¥è¡¥å¤§æ¨¡å‹çš„çŸ¥è¯†å±€é™æ€§ï¼Œè§£å†³å¹»è§‰å’Œæ•°æ®éšç§é—®é¢˜ã€‚ç„¶è€Œï¼ŒRAG ä¹Ÿå­˜åœ¨ä¸€äº›ä¸»è¦é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ä¾èµ–æ€§å¼º&lt;/strong&gt;ï¼šRAG ç³»ç»Ÿçš„æ•ˆæœä¸¥é‡ä¾èµ–äºå†…ç½®çŸ¥è¯†åº“çš„æ•°æ®è´¨é‡å’Œè¦†ç›–èŒƒå›´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€ç´¢å‡†ç¡®æ€§å—é™&lt;/strong&gt;ï¼šæ£€ç´¢ç®—æ³•å¯èƒ½å› ç´¢å¼•æ„å»ºä¸å®Œå–„æˆ–æŸ¥è¯¢è¡¨è¾¾æ¨¡ç³Šå¯¼è‡´ç›¸å…³æ€§é™ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¨¡å‹æ¨ç†æˆæœ¬é«˜&lt;/strong&gt;ï¼šå¤§å‹è¯­è¨€æ¨¡å‹çš„æ¨ç†æ¶ˆè€—å¤§é‡èµ„æºï¼Œå°¤å…¶åœ¨é¢‘ç¹æŸ¥è¯¢å’Œå¤§è§„æ¨¡åº”ç”¨åœºæ™¯ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯å¤æ‚åº¦é«˜&lt;/strong&gt;ï¼šæ„å»ºå’Œç»´æŠ¤ RAG ç³»ç»Ÿéœ€è¦å¼ºå¤§çš„æ•°æ®ç®¡ç†ä¸æ¨¡å‹é›†æˆèƒ½åŠ›ï¼Œæ¶‰åŠåµŒå…¥ã€ç´¢å¼•æ„å»ºå’Œæ£€ç´¢ä¼˜åŒ–ç­‰å¤šä¸ªå¤æ‚ç»„ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å“åº”å»¶è¿Ÿä¸æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;ï¼šåœ¨é«˜è´Ÿè½½ä¸‹ï¼Œæ£€ç´¢ä¸æ¨ç†è¿‡ç¨‹å¯èƒ½å¯¼è‡´å“åº”é€Ÿåº¦å˜æ…¢ï¼Œå°¤å…¶åœ¨ç¡¬ä»¶æ€§èƒ½å—é™çš„ç¯å¢ƒä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;anythingllm-ç®€ä»‹&#34;&gt;AnythingLLM ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;AnythingLLM&lt;/strong&gt; æ˜¯ Mintplex Labs Inc. å¼€å‘çš„ä¸€æ¬¾å¼€æº ChatGPT ç­‰æ•ˆå·¥å…·ï¼Œç”¨äºåœ¨å®‰å…¨çš„ç¯å¢ƒä¸­ä¸æ–‡æ¡£è¿›è¡Œäº¤äº’ã€‚å®ƒèåˆäº†ä»æ•°æ®å¤„ç†åˆ°ç”¨æˆ·ç•Œé¢çš„æ‰€æœ‰æŠ€æœ¯ï¼Œé€‚ç”¨äºæ„å»ºä¸ªäººæˆ–ä¼ä¸šç§æœ‰åŒ–çš„çŸ¥è¯†åº“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ¸å¿ƒç‰¹ç‚¹&#34;&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šç”¨æˆ·æ”¯æŒå’Œæƒé™ç®¡ç†&lt;/strong&gt;ï¼šæ”¯æŒå¤šä¸ªç”¨æˆ·å’Œä¸åŒæƒé™è®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒå¤šç§æ–‡æ¡£ç±»å‹&lt;/strong&gt;ï¼šPDFã€TXTã€DOCXã€JSON ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…ç½®æ•°æ®è¿æ¥å™¨&lt;/strong&gt;ï¼šGitHubã€GitLabã€YouTubeã€é“¾æ¥æŠ“å–ã€Confluence ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç§å‘é‡æ•°æ®åº“æ”¯æŒ&lt;/strong&gt;ï¼šå¦‚ LanceDBï¼ˆé»˜è®¤ï¼‰ã€Pineconeã€Weaviate ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»çš„ LLM é›†æˆ&lt;/strong&gt;ï¼šæ”¯æŒ OpenAIã€Azure OpenAIã€Ollamaã€LM Studioã€LocalAI ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆæœ¬èŠ‚çº¦æªæ–½&lt;/strong&gt;ï¼šå¤§æ–‡æ¡£åªéœ€åµŒå…¥ä¸€æ¬¡ï¼Œæ˜¾è‘—é™ä½æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘è€… API æ”¯æŒ&lt;/strong&gt;ï¼šä¾¿äºè‡ªå®šä¹‰å’Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/ollama.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/ollama.webp&#34; alt=&#34;image&#34; data-caption=&#34;åœ¨ AnythingLLM ä¸­é€‰æ‹© LLM&#34;&gt;
  
  
  &lt;figcaption&gt;åœ¨ AnythingLLM ä¸­é€‰æ‹© LLM&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æŠ€æœ¯æ¶æ„&#34;&gt;æŠ€æœ¯æ¶æ„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ”¶é›†å™¨ï¼ˆCollectorï¼‰&lt;/strong&gt;ï¼šå°†æœ¬åœ°æˆ–åœ¨çº¿èµ„æºè½¬åŒ–ä¸º LLM å¯ç”¨æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰ç«¯ï¼ˆFrontendï¼‰&lt;/strong&gt;ï¼šåŸºäº ViteJS å’Œ React æ„å»ºçš„ç”¨æˆ·ç•Œé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ï¼ˆServerï¼‰&lt;/strong&gt;ï¼šåŸºäº NodeJS å’Œ Express çš„åç«¯ï¼Œç®¡ç†æ•°æ®åº“å’Œ LLM äº¤äº’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ„å»ºè‡ªå·±çš„çŸ¥è¯†åº“è¯¦ç»†æ­¥éª¤&#34;&gt;æ„å»ºè‡ªå·±çš„çŸ¥è¯†åº“ï¼šè¯¦ç»†æ­¥éª¤&lt;/h4&gt;
&lt;p&gt;è¦åœ¨ AnythingLLM ä¸­æ„å»ºä¸€ä¸ªç§æœ‰çŸ¥è¯†åº“ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¼ æ–‡æ¡£&lt;/strong&gt;ï¼šå°† PDFã€TXTã€DOCXã€JSON ç­‰æ”¯æŒçš„æ–‡æ¡£æ ¼å¼ä¸Šä¼ åˆ°ç³»ç»Ÿä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åµŒå…¥å‘é‡ç”Ÿæˆï¼ˆEmbeddingï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨é…ç½®çš„åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ OpenAIã€Azure OpenAIã€LocalAIï¼‰å°†æ–‡æ¡£è½¬åŒ–ä¸ºå‘é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®ä¿é…ç½®æ­£ç¡®çš„åµŒå…¥æ¨¡å‹ä»¥åŒ¹é…é¡¹ç›®éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©é€‚åˆçš„å‘é‡æ•°æ®åº“ï¼Œå¦‚ LanceDBï¼ˆé»˜è®¤ï¼‰ã€Pineconeã€Weaviateã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®æ•°æ®åº“è¿æ¥ï¼Œä¿è¯æ•°æ®å®‰å…¨å’Œé«˜æ•ˆæ£€ç´¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ä¸å›ç­”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·è¾“å…¥æŸ¥è¯¢ï¼Œç³»ç»Ÿå°†å…¶è½¬åŒ–ä¸ºæŸ¥è¯¢å‘é‡ã€‚&lt;/li&gt;
&lt;li&gt;å‘é‡æ•°æ®åº“æ£€ç´¢æœ€åŒ¹é…çš„å†…å®¹ï¼Œè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ OpenAI GPTï¼‰ç”Ÿæˆç­”æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;è¿”å›æœ€ç»ˆç­”æ¡ˆï¼Œé“¾æ¥ç›¸å…³æ–‡æ¡£å’Œå‚è€ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;æµç¨‹å›¾ç¤º&#34;&gt;æµç¨‹å›¾ç¤ºï¼š&lt;/h5&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/building-private-ai-knowledge-base-anythingllm/5587c3855cc19cfb95184d6e784543a3.svg&#34; data-img=&#34;/blog/building-private-ai-knowledge-base-anythingllm/5587c3855cc19cfb95184d6e784543a3.svg&#34; alt=&#34;image&#34; data-caption=&#34;æ„å»ºçŸ¥è¯†åº“æµç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æ„å»ºçŸ¥è¯†åº“æµç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;é€šè¿‡è¯¥æµç¨‹ï¼Œå¯ä»¥æœ‰æ•ˆæ„å»ºæ”¯æŒé«˜æ•ˆæŸ¥è¯¢å’Œç”Ÿæˆå›ç­”çš„æ™ºèƒ½çŸ¥è¯†åº“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨-docker-ä¸­å®‰è£…-anythingllm&#34;&gt;åœ¨ Docker ä¸­å®‰è£… AnythingLLM&lt;/h3&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;a href=&#34;https://github.com/Mintplex-Labs/anything-llm/blob/master/docker/HOW_TO_USE_DOCKER.md&#34; title=&#34;Docker å®‰è£…æŒ‡å—&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker å®‰è£…æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;STORAGE_LOCATION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/anythingllm &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;mkdir -p &lt;span class=&#34;nv&#34;&gt;$STORAGE_LOCATION&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;touch &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$STORAGE_LOCATION&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/.env&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--cap-add SYS_ADMIN &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--network host &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--add-host&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;host.docker.internal:host-gateway &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-v &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;STORAGE_LOCATION&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;:/app/server/storage &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-v &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;STORAGE_LOCATION&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/.env:/app/server/.env &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-e &lt;span class=&#34;nv&#34;&gt;STORAGE_DIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/app/server/storage&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;mintplexlabs/anythingllm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šä½¿ç”¨ host networkï¼Œå¦åˆ™å®¹å™¨ä¸­æ— æ³•ä¸ Ollama é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥è¦åœ¨æœ¬æœºè¿è¡Œ Ollamaï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ollama run qwen2.5:14b --keepalive &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†ä¼šè¿è¡Œ qwen2.5:14bï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–å¤§æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;æ‰“å¼€æµè§ˆå™¨ï¼š&lt;a href=&#34;http://localhost:3001&#34; title=&#34;http://localhost:3001&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost:3001&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šå¿…é¡»é€‰æ‹©è¦æ¥å…¥çš„ LLMï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;local&lt;/code&gt; æˆ– &lt;code&gt;cloud&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;desktop-éƒ¨ç½²&#34;&gt;Desktop éƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;AnythingLLM å†…ç½®çš„ LLM å¼•æ“æ”¯æŒä¸‹è½½æµè¡Œçš„æ¨¡å‹å¦‚ LLama-3ã€Phi-3 ç­‰ï¼Œæ”¯æŒ CPU å’Œ GPUã€‚æœ¬åœ°è¿è¡Œé€‚ç”¨äºè¯•ç”¨å…¶åŸºæœ¬åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;a href=&#34;https://docs.anythingllm.com/installation-desktop/overview&#34; title=&#34;Desktop å®‰è£…æ¦‚è§ˆ&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Desktop å®‰è£…æ¦‚è§ˆ&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;ï¼šç¼ºå°‘å¤šç”¨æˆ·æ”¯æŒã€æµè§ˆå™¨æ’ä»¶ã€ç”¨æˆ·å’Œ Workspace ç®¡ç†ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/chat.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/chat.webp&#34; alt=&#34;image&#34; data-caption=&#34;AnythingLLM çš„å¯¹è¯ç•Œé¢&#34;&gt;
  
  
  &lt;figcaption&gt;AnythingLLM çš„å¯¹è¯ç•Œé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä½¿ç”¨ä½“éªŒä¸é—®é¢˜è®°å½•&#34;&gt;ä½¿ç”¨ä½“éªŒä¸é—®é¢˜è®°å½•&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ çš„ç”µè„‘æ€§èƒ½å ªå¿§çš„è¯ï¼Œå¼ºçƒˆä¸å»ºè®®ä½ åœ¨æœ¬åœ°è¿è¡Œå¤§æ¨¡å‹ã€‚ä½ ä¼šé‡åˆ°å„ç§æ€§èƒ½é—®é¢˜ï¼Œä¾‹å¦‚ä¸‹é¢çœ‹åˆ°çš„ï¼Œåœ¨ä¸Šä¼ æ–‡ä»¶åµŒå…¥åˆ° Workspace æ—¶å¡ä½äº†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/stuck.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/building-private-ai-knowledge-base-anythingllm/stuck.webp&#34; alt=&#34;image&#34; data-caption=&#34;æœ¬åœ°è¿è¡Œå¤§æ¨¡å‹æ—¶é‡åˆ°æ€§èƒ½é—®é¢˜&#34;&gt;
  
  
  &lt;figcaption&gt;æœ¬åœ°è¿è¡Œå¤§æ¨¡å‹æ—¶é‡åˆ°æ€§èƒ½é—®é¢˜&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æ€§èƒ½ä¸ç¡¬ä»¶é™åˆ¶&#34;&gt;æ€§èƒ½ä¸ç¡¬ä»¶é™åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå‘é‡æ•°æ®åº“ç‰¹åˆ«æ…¢&lt;/strong&gt;ï¼šæ”¯æŒçš„æ–‡æ¡£æ ¼å¼å¾ˆå¤šï¼Œä½†åœ¨æˆ‘çš„ MacBook Pro 2015ï¼ˆ16G å†…å­˜ï¼Œæ—  M ç³»åˆ—èŠ¯ç‰‡ï¼‰ä¸Šï¼Œæ„å»ºå‘é‡æ•°æ®åº“çš„è¿‡ç¨‹éå¸¸è€—æ—¶ã€‚è¿™æ˜¯å› ä¸ºæ–‡æ¡£éœ€è¦è¢«åµŒå…¥æ¨¡å‹å¤„ç†æˆé«˜ç»´å‘é‡ï¼Œå¹¶å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚è¯¥è¿‡ç¨‹æ¶‰åŠå¤æ‚çš„è®¡ç®—å’Œå¤§é‡å†…å­˜æ“ä½œï¼Œå¯¼è‡´å¤„ç†ä¸€ä¸ª 7M çš„ JSON æ•°æ®éœ€è¦ 3 åˆ†é’Ÿï¼Œè€ŒåµŒå…¥ï¼ˆEmbedï¼‰åˆ° Workspace åˆ™éœ€åå‡ åˆ†é’Ÿï¼Œä¸”æ—¶å¸¸å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½éœ€æ±‚&lt;/strong&gt;ï¼šç”±äºç¡¬ä»¶æ€§èƒ½å—é™ï¼Œè¿è¡Œæœ¬åœ° LLM ååˆ†åƒåŠ›ã€‚è¿è¡Œ Ollama å°šå¯ï¼Œä½†è¿›è¡Œ RAG æ“ä½œæ—¶æ€§èƒ½æ˜æ˜¾ä¸è¶³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŸ¥è¯¢ä¸å“åº”å»¶è¿Ÿ&#34;&gt;æŸ¥è¯¢ä¸å“åº”å»¶è¿Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å“åº”æ…¢&lt;/strong&gt;ï¼šåœ¨èŠå¤©æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿåé¦ˆéå¸¸æ…¢ï¼Œé€šå¸¸éœ€è¦ç­‰å¾…å‡ åˆ†é’Ÿæ‰èƒ½å¾—åˆ°å›å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¸¸è§é”™è¯¯æç¤ºä¸è§£å†³æ–¹æ¡ˆ&#34;&gt;å¸¸è§é”™è¯¯æç¤ºä¸è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æ‰§è¡Œå¤±è´¥&lt;/strong&gt;ï¼šé‡åˆ°é”™è¯¯æç¤º &lt;code&gt;Failed to execute query stream: Invalid input, No vector column found to match with the query vector dimension: 4096&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šæŸ¥çœ‹å®˜æ–¹é—®é¢˜è·Ÿè¸ª &lt;a href=&#34;https://github.com/Mintplex-Labs/anything-llm/issues/1131&#34; title=&#34;[BUG]: Could not respond to message. LanceDBError: No vector column found to create index #1131&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;[BUG]: Could not respond to message. LanceDBError: No vector column found to create index #1131&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¦‚ä½•æ”¹å–„ç”¨æˆ·ä½“éªŒ&#34;&gt;å¦‚ä½•æ”¹å–„ç”¨æˆ·ä½“éªŒ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å•†ç”¨å¤§æ¨¡å‹ API&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœç¡¬ä»¶èµ„æºæœ‰é™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ OpenAIã€Azure OpenAI ç­‰å•†ç”¨å¤§æ¨¡å‹ APIã€‚è¿™äº›æœåŠ¡åœ¨ç¨³å®šæ€§å’Œæ€§èƒ½æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œå°¤å…¶é€‚ç”¨äºå¤§è§„æ¨¡æ–‡æ¡£å¤„ç†å’Œå®æ—¶æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–ç¡¬ä»¶ç¯å¢ƒ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å¸¦æœ‰ GPU åŠ é€Ÿçš„ç°ä»£ç¡¬ä»¶ï¼Œæ¨èå†…å­˜ä¸ä½äº 32GBï¼Œæ˜¾å¡æ”¯æŒ CUDA çš„ GPUï¼ˆå¦‚ NVIDIA RTX ç³»åˆ—ï¼‰æ¥æ˜¾è‘—æå‡å‘é‡åµŒå…¥å’Œæ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°ƒæ•´ AnythingLLM é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Chat Settingï¼ˆèŠå¤©è®¾ç½®ï¼‰&lt;/strong&gt;ï¼šé…ç½®èŠå¤©ç›¸å…³å‚æ•°ï¼ŒåŒ…æ‹¬æ¨¡å‹é€‰æ‹©ã€å“åº”è¶…æ—¶ã€æŸ¥è¯¢å†å²è®°å½•å­˜å‚¨ç­–ç•¥ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Agent è®¾ç½®&lt;/strong&gt;ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚å¯ç”¨ä¸åŒç±»å‹çš„ä»£ç†ï¼Œå¦‚æ£€ç´¢ä»£ç†ã€å¯¹è¯ä»£ç†å’Œä»»åŠ¡ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºåˆ†é…ä¸æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨ Docker æˆ– Kubernetes éƒ¨ç½²ç¯å¢ƒä¸­ï¼Œè®¾ç½® CPUã€å†…å­˜å’Œ GPU åŠ é€Ÿå‚æ•°ã€‚è°ƒæ•´åµŒå…¥æ‰¹å¤„ç†å¤§å°ï¼ˆBatch Sizeï¼‰ã€çº¿ç¨‹æ± å¤§å°ç­‰æ€§èƒ½å‚æ•°ï¼Œä¼˜åŒ–æ¨ç†ä¸æ£€ç´¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†å¸ƒå¼éƒ¨ç½²ä¸æ‰©å±•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes é›†ç¾¤éƒ¨ç½²&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ Kubernetes ç¼–æ’å¤šä¸ª AnythingLLM å®ä¾‹ï¼Œç¡®ä¿é«˜å¯ç”¨æ€§å’Œè‡ªåŠ¨æ‰©å±•èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²é…ç½®åŒ…æ‹¬ ReplicaSetã€Pod è‡ªåŠ¨ç¼©æ”¾ï¼ˆHPAï¼‰ã€è´Ÿè½½å‡è¡¡ï¼ˆServiceï¼‰ã€å­˜å‚¨å·ï¼ˆPersistentVolumeClaimï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘æœåŠ¡éƒ¨ç½²&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨äº‘å¹³å°ä¸Šè¿è¡Œæ‰˜ç®¡æœåŠ¡ï¼Œä½¿ç”¨å®¹å™¨æœåŠ¡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®é«˜æ€§èƒ½æ•°æ®åº“ï¼ˆå¦‚ RDSã€Firestoreï¼‰ï¼Œå¹¶å¯ç”¨ CDN åŠ é€Ÿæ–‡ä»¶ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“å’Œç¼“å­˜æ‰©å±•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚ Redisã€Pineconeã€Weaviateï¼‰æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;å¯ç”¨æ•°æ®åº“ä¸»ä»å¤åˆ¶ä¸è‡ªåŠ¨å¤‡ä»½ï¼Œç¡®ä¿æ•°æ®æŒä¹…æ€§å’Œé«˜å¯ç”¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡çº§æ•°æ®åº“å­˜å‚¨æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ›¿æ¢é»˜è®¤æ•°æ®åº“ LanceDBï¼Œè€ƒè™‘ä½¿ç”¨æ›´é«˜æ€§èƒ½çš„å‘é‡æ•°æ®åº“å¦‚ Pineconeã€Weaviate ç­‰ï¼Œä»¥å‡å°‘æŸ¥è¯¢å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ä¼˜åŒ–ä¸æ’ä»¶æ‰©å±•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®šåˆ¶æ’ä»¶æ¥é€‚é…ç‰¹å®šä»»åŠ¡ï¼Œå¹¶å¯ç”¨æ•°æ®ç¼“å­˜æœºåˆ¶ä»¥å‡å°‘é¢‘ç¹æŸ¥è¯¢å¯¹èµ„æºçš„æ¶ˆè€—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“ä¸å±•æœ›&#34;&gt;æ€»ç»“ä¸å±•æœ›&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;AnythingLLM&lt;/strong&gt; æ˜¯ä¸€ä¸ªåŠŸèƒ½å…¨é¢çš„ RAG è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“æ„å»ºã€‚é€šè¿‡ç»“åˆå‘é‡æ£€ç´¢ä¸å¤§è¯­è¨€æ¨¡å‹ï¼Œè¯¥å¹³å°æä¾›äº†å¼ºå¤§çš„æ–‡æ¡£é—®ç­”èƒ½åŠ›ã€‚ç„¶è€Œï¼Œéƒ¨ç½²å’Œå®šåˆ¶åŒ–éœ€è¦ä¸€å®šçš„æŠ€æœ¯æŠ•å…¥ã€‚æœªæ¥çš„æ”¹è¿›æ–¹å‘åŒ…æ‹¬å¢å¼ºå¤šæ•°æ®åº“æ”¯æŒã€æ›´çµæ´»çš„åµŒå…¥æ¨¡å‹é€‰æ‹©ä»¥åŠæå‡æ–‡æ¡£è§£æèƒ½åŠ›ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä» MeshConfig è¿ç§»åˆ° Istio Telemetry APIï¼šæå‡ç½‘æ ¼è§‚æµ‹æ€§å’Œçµæ´»æ€§</title>
      <link>https://jimmysong.io/blog/migrate-to-istio-telemetry-api/</link>
      <pubDate>Wed, 11 Dec 2024 15:04:01 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/migrate-to-istio-telemetry-api/</guid>
      <description>
        
        
        &lt;p&gt;Istio çš„ Telemetry API æ˜¯æ›¿ä»£ä¼ ç»Ÿ MeshConfig é¥æµ‹é…ç½®çš„ç°ä»£åŒ–æ–¹å¼ï¼Œæä¾›äº†æ›´çµæ´»çš„å·¥å…·æ¥å®šä¹‰æœåŠ¡ç½‘æ ¼ä¸­çš„ &lt;strong&gt;Tracing&lt;/strong&gt;ã€&lt;strong&gt;Metrics&lt;/strong&gt; å’Œ &lt;strong&gt;Access Logging&lt;/strong&gt;ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ &lt;code&gt;EnvoyFilter&lt;/code&gt; å’Œ &lt;code&gt;MeshConfig&lt;/code&gt;ï¼ŒTelemetry API æ›´å…·æ¨¡å—åŒ–ã€åŠ¨æ€æ›´æ–°å’Œè·¨å±‚æ¬¡é…ç½®èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦è§£å¦‚ä½•ä½¿ç”¨ Telemetry API é…ç½® Istio é¥æµ‹åŠŸèƒ½ï¼Œæ¶µç›– Tracingã€Metrics å’Œ Logging çš„å…·ä½“å®ç°ï¼ŒåŒæ—¶å±•ç¤ºå¦‚ä½•è¿ç§»è¿‡æ—¶çš„ MeshConfig é…ç½®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;telemetry-api-å‘å±•å†ç¨‹&#34;&gt;Telemetry API å‘å±•å†ç¨‹&lt;/h2&gt;
&lt;p&gt;Istio çš„é¥æµ‹èƒ½åŠ›åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ä¾èµ–äºè¾ƒä¸ºä¼ ç»Ÿçš„é…ç½®æ–¹æ³•ï¼Œå¦‚ &lt;strong&gt;Mixer&lt;/strong&gt; å’Œ &lt;strong&gt;MeshConfig&lt;/strong&gt; çš„ &lt;code&gt;configOverride&lt;/code&gt;ï¼Œè¿™äº›æ–¹æ³•è™½ç„¶èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†åœ¨å¤æ‚åœºæ™¯ä¸‹æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒIstio å¼•å…¥äº†åŸºäº CRD çš„ &lt;strong&gt;Telemetry API&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³é”®ç‰ˆæœ¬æ›´æ–°&#34;&gt;å…³é”®ç‰ˆæœ¬æ›´æ–°&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©è¯»è€…äº†è§£ Telemetry API çš„è¿›åŒ–è¿‡ç¨‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›é‡è¦ç‰ˆæœ¬çš„æ›´æ–°ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Istio 1.11&lt;/strong&gt;ï¼šå¼•å…¥ Telemetry APIï¼ˆAlphaï¼‰ï¼Œæä¾›äº†åŸºæœ¬çš„æŒ‡æ ‡å’Œæ—¥å¿—è‡ªå®šä¹‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio 1.13&lt;/strong&gt;ï¼šæ”¯æŒ OpenTelemetry æ—¥å¿—è®°å½•ã€è‡ªå®šä¹‰è¿½è¸ªæœåŠ¡åç§°ï¼Œä»¥åŠæ›´å¼ºçš„æ—¥å¿—è¿‡æ»¤åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio 1.18&lt;/strong&gt;ï¼šé»˜è®¤ä¸å†å®‰è£… Prometheus çš„ &lt;code&gt;EnvoyFilter&lt;/code&gt;ï¼Œå®Œå…¨ä¾èµ– Telemetry API å®šä¹‰é¥æµ‹è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio 1.22&lt;/strong&gt;ï¼šTelemetry API å‡çº§ä¸ºç¨³å®šç‰ˆï¼ˆv1ï¼‰ï¼Œå…¨é¢æ”¯æŒç”Ÿäº§ç¯å¢ƒéœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆè¿ç§»åˆ°-telemetry-api&#34;&gt;ä¸ºä»€ä¹ˆè¿ç§»åˆ° Telemetry APIï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å°½ç®¡ä¼ ç»Ÿçš„ MeshConfig å’Œ EnvoyFilter æä¾›äº†åŸºç¡€çš„é¥æµ‹èƒ½åŠ›ï¼Œä½†å®ƒä»¬çš„é…ç½®æ–¹å¼åœ¨çµæ´»æ€§ã€åŠ¨æ€æ€§å’Œæ‰©å±•æ€§æ–¹é¢å­˜åœ¨è¯¸å¤šé™åˆ¶ã€‚ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£è¿™äº›å±€é™æ€§ï¼Œæˆ‘ä»¬å°†ä»å‡ ä¸ªå…³é”®ç»´åº¦å±•å¼€è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨-meshconfig-å’Œ-envoyfilter-çš„å¤æ‚æ€§&#34;&gt;ä½¿ç”¨ MeshConfig å’Œ EnvoyFilter çš„å¤æ‚æ€§&lt;/h3&gt;
&lt;p&gt;åœ¨ä»‹ç»å…·ä½“é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ MeshConfig å’Œ EnvoyFilter çš„å®šä½ï¼šMeshConfig é€‚ç”¨äºå…¨å±€é…ç½®ï¼Œè€Œ EnvoyFilter ç”¨äºç»†ç²’åº¦çš„è‡ªå®šä¹‰ã€‚ä½†æ­£æ˜¯è¿™ç§åˆ†å·¥ï¼Œå¯¼è‡´äº†å®ƒä»¬åœ¨ç®¡ç†ä¸Šçš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-é…ç½®æ–¹å¼åˆ†æ•£&#34;&gt;1. é…ç½®æ–¹å¼åˆ†æ•£&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MeshConfig&lt;/strong&gt; ç”¨äºé›†ä¸­å®šä¹‰å…¨å±€ç½‘æ ¼è¡Œä¸ºï¼Œä¾‹å¦‚è®¿é—®æ—¥å¿—è·¯å¾„ã€è¿½è¸ªé‡‡æ ·ç‡å’ŒæŒ‡æ ‡ç»´åº¦ã€‚è™½ç„¶é€‚åˆç®€å•åœºæ™¯ï¼Œä½†æ— æ³•æ»¡è¶³å‘½åç©ºé—´çº§æˆ–å·¥ä½œè´Ÿè½½çº§çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;EnvoyFilter&lt;/strong&gt; åˆ™å¯ä»¥è¦†ç›–æˆ–æ‰©å±• Envoy çš„é…ç½®ï¼Œå…è®¸æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚ä½†è¿™ç§æ–¹å¼ç›´æ¥æ“ä½œ Envoy å†…éƒ¨ç»“æ„ï¼ˆxDS å­—æ®µï¼‰ï¼Œé…ç½®è¯­è¨€å¤æ‚ä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šé€šè¿‡ MeshConfig é…ç½®è®¿é—®æ—¥å¿—&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;install.istio.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;IstioOperator&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meshConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;accessLogFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/dev/stdout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ— æ³•ä¸ºç‰¹å®šæœåŠ¡æˆ–å‘½åç©ºé—´è®¾ç½®ä¸åŒçš„æ—¥å¿—è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦é‡æ–°åº”ç”¨æ•´ä¸ªé…ç½®ï¼ŒåŠ¨æ€æ€§ä¸è¶³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šé€šè¿‡ EnvoyFilter è‡ªå®šä¹‰æŒ‡æ ‡&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyFilter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;custom-metric-filter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mynamespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;myapp &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# é€‰æ‹©ç‰¹å®šçš„å·¥ä½œè´Ÿè½½&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configPatches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;applyTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP_FILTER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SIDECAR_INBOUND &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# åŒ¹é…å…¥ç«™æµé‡&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ADD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filterClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;STATS &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‡å®šä¸ºç»Ÿè®¡è¿‡æ»¤å™¨&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio.request_operation &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è‡ªå®šä¹‰æŒ‡æ ‡åç§°&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/udpa.type.v1.TypedStruct&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type_url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.extensions.filters.http.wasm.v3.Wasm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                  &amp;#34;attributes&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                    {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                      &amp;#34;output_attribute&amp;#34;: &amp;#34;istio_operationId&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                      &amp;#34;match&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                        {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                          &amp;#34;value&amp;#34;: &amp;#34;GetReviews&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                          &amp;#34;condition&amp;#34;: &amp;#34;request.url_path == &amp;#39;/reviews&amp;#39; &amp;amp;&amp;amp; request.method == &amp;#39;GET&amp;#39;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                      ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;                  ]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;vm_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.wasm.runtime.null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;inline_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;envoy.wasm.attributegen&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é…ç½®è¯­æ³•å¤æ‚ä¸”å†—é•¿ï¼Œéœ€æ·±å…¥ç†è§£ Envoy çš„ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;æ˜“äºå‡ºé”™ï¼Œè°ƒè¯•å’Œç»´æŠ¤æˆæœ¬é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2-åŠ¨æ€æ€§ä¸è¶³&#34;&gt;2. åŠ¨æ€æ€§ä¸è¶³&lt;/h4&gt;
&lt;p&gt;è™½ç„¶ç°ä»£å¾®æœåŠ¡ç¯å¢ƒå¼ºè°ƒåŠ¨æ€è°ƒæ•´é…ç½®ï¼Œä½† MeshConfig å’Œ EnvoyFilter çš„åŠ¨æ€æ€§æ”¯æŒæœ‰é™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MeshConfig&lt;/strong&gt;ï¼šä¿®æ”¹é…ç½®é€šå¸¸éœ€è¦é‡å¯ä»£ç†æˆ–é‡æ–°åº”ç”¨æ•´ä¸ªé…ç½®ï¼Œå¯¼è‡´æœåŠ¡ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EnvoyFilter&lt;/strong&gt;ï¼šæ›´æ–°æµç¨‹å¤æ‚ï¼Œè°ƒæ•´å•ä¸ªå‚æ•°ä¹Ÿéœ€é‡æ–°éƒ¨ç½²ç›¸å…³ä»£ç†å®ä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3-å¤šç§Ÿæˆ·æ”¯æŒå›°éš¾&#34;&gt;3. å¤šç§Ÿæˆ·æ”¯æŒå›°éš¾&lt;/h4&gt;
&lt;p&gt;åœ¨å¤šç§Ÿæˆ·ç¯å¢ƒä¸­ï¼Œé’ˆå¯¹ä¸åŒå‘½åç©ºé—´æˆ–å·¥ä½œè´Ÿè½½è‡ªå®šä¹‰é¥æµ‹é…ç½®éå¸¸é‡è¦ã€‚ç„¶è€Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MeshConfig&lt;/strong&gt;ï¼šæ— æ³•é’ˆå¯¹å‘½åç©ºé—´æˆ–å·¥ä½œè´Ÿè½½è¿›è¡Œå·®å¼‚åŒ–è®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EnvoyFilter&lt;/strong&gt;ï¼šéœ€è¦ç¼–å†™å¤šä¸ªè¿‡æ»¤å™¨é…ç½®ï¼Œå¢åŠ äº†ç®¡ç†å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4-éš¾ä»¥æ‰©å±•å’Œè°ƒè¯•&#34;&gt;4. éš¾ä»¥æ‰©å±•å’Œè°ƒè¯•&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;MeshConfig å’Œ EnvoyFilter å¯¹æ–°éœ€æ±‚ï¼ˆå¦‚ OpenTelemetryï¼‰æ”¯æŒè¾ƒæ…¢ã€‚&lt;/li&gt;
&lt;li&gt;EnvoyFilter çš„è°ƒè¯•éš¾åº¦é«˜ï¼Œéœ€è¦æ·±å…¥åˆ†æ Envoy æ—¥å¿—å’Œè¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¼ƒç”¨ä¼ ç»Ÿ-meshconfig-çš„é¥æµ‹é…ç½®&#34;&gt;å¼ƒç”¨ä¼ ç»Ÿ MeshConfig çš„é¥æµ‹é…ç½®&lt;/h3&gt;
&lt;p&gt;é‰´äºä¸Šè¿°å±€é™æ€§ï¼ŒIstio ç¤¾åŒºå·²ç»å°†ä¼ ç»Ÿçš„ MeshConfig é¥æµ‹é…ç½®æ ‡è®°ä¸º&lt;strong&gt;å¼ƒç”¨&lt;/strong&gt;ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†è¿™äº›é…ç½®çš„ä½¿ç”¨æ–¹å¼åŠå…¶ä¸è¶³ä¹‹å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Access Logging é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;meshConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;accessLogFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/dev/stdout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Trace Sampling é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;meshConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;enableTracing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;extensionProviders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;zipkin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zipkin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;zipkin.istio-system.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9411&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è‡ªå®šä¹‰ Metrics æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;meshConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;telemetry&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configOverride&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;inboundSidecar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;requests_total&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dimensions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;user-agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;request.headers[&amp;#39;User-Agent&amp;#39;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œè¿™äº›é…ç½®çš„çµæ´»æ€§å’Œæ‰©å±•æ€§æ˜æ˜¾ä¸è¶³ï¼Œéš¾ä»¥åº”å¯¹å¤æ‚çš„ç”Ÿäº§ç¯å¢ƒéœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;telemetry-api-çš„ä¼˜åŠ¿&#34;&gt;Telemetry API çš„ä¼˜åŠ¿&lt;/h2&gt;
&lt;p&gt;åœ¨ä¼ ç»Ÿé…ç½®æ–¹å¼çš„åŸºç¡€ä¸Šï¼ŒTelemetry API å¸¦æ¥äº†å¤šé¡¹æ”¹è¿›ï¼Œä½¿å…¶æ›´é€‚åˆç°ä»£åŒ–çš„æœåŠ¡ç½‘æ ¼ç®¡ç†éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å—åŒ–è®¾è®¡&lt;/strong&gt;ï¼šTracingã€Metrics å’Œ Access Logging ç‹¬ç«‹é…ç½®ï¼Œæ¸…æ™°ç®€æ´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ›´æ–°&lt;/strong&gt;ï¼šæ”¯æŒå®æ—¶æ›´æ–°é…ç½®ï¼Œæ— éœ€é‡å¯ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±‚çº§åŒ–æ”¯æŒ&lt;/strong&gt;ï¼šå…è®¸å…¨å±€ã€å‘½åç©ºé—´å’Œå·¥ä½œè´Ÿè½½çº§åˆ«çš„é…ç½®è¦†ç›–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•ç›´è§‚&lt;/strong&gt;ï¼šä½¿ç”¨å£°æ˜å¼è¯­æ³•ï¼Œæ— éœ€æ·±å…¥ç†è§£ Envoy çš„å†…éƒ¨ç»“æ„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;istio-telemetry-api-é…ç½®ç¤ºä¾‹&#34;&gt;Istio Telemetry API é…ç½®ç¤ºä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;å…¨å±€é…ç½®ç¤ºä¾‹&#34;&gt;å…¨å±€é…ç½®ç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;ä¸ºå¸®åŠ©ç†è§£ Telemetry API çš„å…·ä½“ä½¿ç”¨ï¼Œæˆ‘ä»¬ä»¥å…¨å±€é…ç½®ç¤ºä¾‹ä½œä¸ºå¼€å§‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;telemetry.istio.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Telemetry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mesh-default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;accessLogging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# better to use a built-in one&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tracing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;skywalking&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;randomSamplingPercentage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;100.00&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;overrides&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metric&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;REQUEST_COUNT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;CLIENT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tagOverrides&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x_user_email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#39;x-user-email&amp;#39; in request.headers ? request.headers[&amp;#39;x-user-email&amp;#39;] : &amp;#39;empty&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;prometheus&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä½¿ç”¨-telemetry-api-é…ç½®-skywalking&#34;&gt;ä½¿ç”¨ Telemetry API é…ç½® SkyWalking&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å†ä»¥é…ç½® SkyWalking çš„é‡‡æ ·ç‡å’Œ span tag ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Telemetry APIã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ£€æŸ¥-istio-ç‰ˆæœ¬ä¸-crd&#34;&gt;æ£€æŸ¥ Istio ç‰ˆæœ¬ä¸ CRD&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ Istio 1.22 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œä½¿ç”¨ &lt;code&gt;telemetry.istio.io/v1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº Istio 1.18 è‡³ 1.21 çš„ç”¨æˆ·ï¼Œä½¿ç”¨ &lt;code&gt;telemetry.istio.io/v1alpha1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Telemetry API çš„ CRD æ˜¯å¦å·²å®‰è£…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get crds &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep telemetry
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;éƒ¨ç½²-skywalking&#34;&gt;éƒ¨ç½² SkyWalking&lt;/h4&gt;
&lt;p&gt;åœ¨é›†ç¾¤ä¸­éƒ¨ç½² SkyWalking OAP æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.24/samples/addons/extras/skywalking.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get pods -n istio-system -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;skywalking-oap
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;é…ç½®-meshconfig-æ·»åŠ -skywalking-æä¾›å•†&#34;&gt;é…ç½® MeshConfig æ·»åŠ  SkyWalking æä¾›å•†&lt;/h4&gt;
&lt;p&gt;åœ¨ Istio çš„ &lt;code&gt;MeshConfig&lt;/code&gt; ä¸­å®šä¹‰ SkyWalking æä¾›å•†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ConfigMap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mesh&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    enableTracing: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    extensionProviders:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    - name: &amp;#34;skywalking&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      skywalking:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        service: &amp;#34;tracing.istio-system.svc.cluster.local&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        port: 11800&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ä½¿ç”¨-telemetry-api-é…ç½®é‡‡æ ·ç‡&#34;&gt;ä½¿ç”¨ Telemetry API é…ç½®é‡‡æ ·ç‡&lt;/h4&gt;
&lt;p&gt;é€šè¿‡ Telemetry APIï¼Œå°† SkyWalking è®¾ç½®ä¸ºé»˜è®¤çš„ Tracing æä¾›å•†ï¼Œå¹¶å®šä¹‰é‡‡æ ·ç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä»ä½¿ç”¨ Telemetry API ä»å¤šä¸ªå±‚çº§é…ç½®é‡‡æ ·ç‡ï¼Œä¸ºäº†èŠ‚çº¦ç¯‡å¹…ï¼Œæˆ‘ä»¬ä»…æ¼”ç¤ºåœ¨å‘½åç©ºé—´èŒƒå›´é…ç½®é‡‡æ ·ç‡ï¼Œå…¶ä»–å±‚çº§çš„é…ç½®è¯·å‚è€ƒ &lt;a href=&#34;https://istio.io/latest/docs/tasks/observability/telemetry/&#34; title=&#34;Telemetry API&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Telemetry API&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;telemetry.istio.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Telemetry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;namespace-override&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tracing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;skywalking&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;randomSamplingPercentage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;customTags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;literal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;production&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;providers.name&lt;/code&gt;ï¼šæŒ‡å®š SkyWalking ä¸ºé»˜è®¤çš„ Tracing æä¾›å•†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;randomSamplingPercentage&lt;/code&gt;ï¼šè¦†ç›–å‘½åç©ºé—´çº§åˆ«é…ç½®ï¼Œè®¾ç½® 50% çš„é‡‡æ ·ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;customTags&lt;/code&gt;ï¼šä¸ºæ‰€æœ‰è¿½è¸ªæ•°æ®æ·»åŠ  &lt;code&gt;env=production&lt;/code&gt; æ ‡ç­¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;éªŒè¯é…ç½®&#34;&gt;éªŒè¯é…ç½®&lt;/h3&gt;
&lt;p&gt;è®¿é—®ç½‘æ ¼ä¸­çš„æœåŠ¡ï¼ˆå¦‚ &lt;a href=&#34;https://istio.io/latest/docs/examples/bookinfo/&#34; title=&#34;Bookinfo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bookinfo&lt;/a&gt; ç¤ºä¾‹åº”ç”¨ï¼‰ç”Ÿæˆæµé‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl http://&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;/productpage
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹è¿½è¸ªæ•°æ®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl dashboard skywalking
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰“å¼€æµè§ˆå™¨è®¿é—® &lt;code&gt;http://localhost:8080&lt;/code&gt;ï¼Œåœ¨è¿½è¸ªç•Œé¢ä¸­æŸ¥çœ‹ç”Ÿæˆçš„è¿½è¸ªä¿¡æ¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/migrate-to-istio-telemetry-api/skywalking-tracing.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/migrate-to-istio-telemetry-api/skywalking-tracing.webp&#34; alt=&#34;image&#34; data-caption=&#34;Skywalking Tracing&#34;&gt;
  
  
  &lt;figcaption&gt;Skywalking Tracing&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ç‚¹å‡»ä¸€ä¸ªspanåï¼Œä½ å¯ä»¥çœ‹åˆ°å…¶ä¸­çš„è¿½åŠ çš„ &lt;code&gt;env: production&lt;/code&gt; tagã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/migrate-to-istio-telemetry-api/skywalking-span.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/migrate-to-istio-telemetry-api/skywalking-span.webp&#34; alt=&#34;image&#34; data-caption=&#34;Skywalking Span&#34;&gt;
  
  
  &lt;figcaption&gt;Skywalking Span&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Telemetry API é€šè¿‡å…¶æ¨¡å—åŒ–è®¾è®¡ã€åŠ¨æ€æ›´æ–°å’Œå¤šå±‚çº§æ”¯æŒï¼Œå¤§å¹…é™ä½äº†æœåŠ¡ç½‘æ ¼ä¸­é¥æµ‹é…ç½®çš„å¤æ‚æ€§ã€‚ç›¸æ¯” MeshConfig å’Œ EnvoyFilterï¼ŒTelemetry API æ˜¯ä¸€å¥—æ›´çµæ´»ã€é«˜æ•ˆçš„ç°ä»£åŒ–è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å¼ºçƒˆæ¨èè¿ç§»åˆ° Telemetry APIï¼Œä»¥å……åˆ†åˆ©ç”¨å…¶åŠŸèƒ½ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>éŸ©å›½æ—…è¡Œå›å¿†ï¼šé¦–å°”ã€é‡œå±±ä¸ä»å·çš„çœŸå®ä½“éªŒ</title>
      <link>https://jimmysong.io/blog/south-korea-trip/</link>
      <pubDate>Wed, 04 Dec 2024 09:46:07 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/south-korea-trip/</guid>
      <description>
        
        
        &lt;p&gt;éŸ©å›½ï¼Œæ˜¯æˆ‘å»äº†ä¸€æ¬¡ï¼Œå¯èƒ½ä¸ä¼šå»ç¬¬äºŒæ¬¡çš„å›½å®¶ã€‚éš¾æ€ªéŸ©å›½äººå–œæ¬¢å¾€å¤–è·‘ï¼ŒåŸæ¥æ˜¯å› ä¸ºä»–ä»¬å›½å®¶çœŸçš„æ²¡å•¥å¥½ç©çš„ã€‚è™½ç„¶æ–‡åŒ–ä¸Šæœ‰ä¸å°‘ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å®é™…ä½“éªŒå´è®©æˆ‘æ„Ÿåˆ°å¤æ‚è€ŒçŸ›ç›¾ã€‚å€Ÿç€æœ€è¿‘éŸ©å›½å‘ç”Ÿçš„æ”¿æ²»é£æ³¢ï¼Œå†™ä¸‹è¿™ç¯‡å…³äºæˆ‘å»å¹´éŸ©å›½ä¹‹è¡Œçš„è®°å½•ï¼Œæ—¢æ˜¯å¯¹æ—…è¡Œçš„å›é¡¾ï¼Œä¹Ÿæ˜¯å¯¹è¿™ä¸ªå›½å®¶çš„ä¸€äº›æ€è€ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢˜è®°&#34;&gt;é¢˜è®°&lt;/h2&gt;
&lt;p&gt;2023 å¹´ 10 æœˆï¼Œæˆ‘ä»ä¸­å›½è·ç¦»éŸ©å›½æœ€è¿‘çš„åŸå¸‚å¨æµ·å‡ºå‘ï¼Œä»…éœ€ 1 å°æ—¶çš„é£è¡Œä¾¿æŠµè¾¾ä»å·æœºåœºã€‚éŸ©å›½ä¸ä¸­å›½ä¸€è¡£å¸¦æ°´ï¼Œä½†è¿™å´æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¸ä¸Šè¿™ç‰‡åœŸåœ°ã€‚ä¹‹å‰ï¼Œæˆ‘æ›¾å»è¿‡ä¸¤æ¬¡æ—¥æœ¬ï¼Œè¿™ä¸¤ä¸ªä¸ä¸­å›½é‚»è¿‘çš„å›½å®¶ï¼Œæ—…è¡Œä½“éªŒå´æœ‰ç€å¤©å£¤ä¹‹åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡è¡Œç¨‹ä»ä»å·å…¥å¢ƒï¼Œå…ˆå‰å¾€é¦–å°”ï¼Œå†åç«è½¦å—ä¸‹é‡œå±±ã€‚åœ¨é‡œå±±åœç•™è¾ƒä¹…åï¼Œè¿”å›é¦–å°”ï¼Œä»ä»å·é£å›ä¸­å›½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¦–å°”åŒ†å¿™ä¸æ‹¥æŒ¤&#34;&gt;é¦–å°”ï¼šåŒ†å¿™ä¸æ‹¥æŒ¤&lt;/h2&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113344992250823&amp;amp;bvid=BV1MyyGYqEdS&amp;amp;cid=26396068624&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;åˆ°è¾¾ä»å·æœºåœºåï¼Œæˆ‘ç›´æ¥åç«è½¦å‰å¾€é¦–å°”ã€‚å…¶é—´å‘ç”Ÿäº†ä¸€ä¸ªå°æ’æ›²ã€‚ç”±äºæºå¸¦çš„è¡Œæè¾ƒå¤šï¼Œåœ¨ä»å·æœºåœºä¹°ç«è½¦ç¥¨æ—¶å¼„ä¸¢äº†ä¸€ä»¶ã€‚çœ¼çœ‹æˆ‘è¦ä¹°ç¥¨çš„é‚£è¶Ÿç«è½¦å³å°†åˆ°æ¥ï¼Œæˆ‘æ‰å‘ç°è¡Œæå°‘äº†ä¸€ä»¶ã€‚å½“æ—¶æˆ‘ç«æ€¥ç«ç‡åœ°å‡ºäº†ç«™å°ï¼Œèµ¶å¾€æœºåœºåˆ°è¾¾å¤§å…ã€‚ä½†å› ä¸ºå¯¹ç¯å¢ƒä¸ç†Ÿæ‚‰ï¼Œæ‰¾ä¸åˆ°è·¯ã€‚æ­£åœ¨è¿™æ—¶ï¼Œç«è½¦è¿›ç«™æ£€ç¥¨å¤„çš„å·¥ä½œäººå‘˜é—®æˆ‘æ˜¯ä¸æ˜¯ä¸¢äº†è¡Œæã€‚æˆ‘è·Ÿä»–ç¡®è®¤äº†è¡Œæå†…çš„ç‰©å“å’Œèº«ä»½ä¿¡æ¯åï¼Œå–å›äº†ä¸¢å¤±çš„è¡Œæï¼Œå¹¶ä½¿ç”¨ä¹‹å‰è´­ä¹°çš„ç«è½¦ç¥¨é‡æ–°è¿›ç«™ã€‚å·¥ä½œäººå‘˜å¾ˆçƒ­æƒ…ï¼Œç”¨æµåˆ©çš„è‹±è¯­è·Ÿæˆ‘å¯¹è¯ã€‚ä¸œè¥¿å¤±è€Œå¤å¾—ï¼Œè€Œä¸”æ˜¯åœ¨ç«è½¦å³å°†å¼€è½¦ä¹‹å‰æ‰¾å›ï¼Œå®åœ¨æ˜¯åº†å¹¸ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é¦–å°”çš„ç¬¬ä¸€æ™šï¼Œæˆ‘é€‰æ‹©ä½åœ¨æ˜æ´ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªç¹åçš„å•†ä¸šåŒºï¼ŒåŒæ—¶ä¹Ÿæ˜¯è®¸å¤šæŠ—è®®å’Œæ–‡åŒ–æ´»åŠ¨çš„é›†ä¸­åœ°ã€‚æ¼«æ­¥åœ¨æ˜æ´è¡—å¤´ï¼Œæˆ‘è¿˜çœ‹åˆ°äº†å¤§é‡çš„æ³•è½®åŠŸå®£ä¼ ã€‚å¦å¤–éŸ©å›½è¿˜æœ‰å¤§é‡çš„æ•™ä¼šï¼Œæˆ‘åœ¨é‡œå±±ä½çš„åœ°æ–¹å°±é è¿‘ä¸€ä¸ªæ•™ä¼šã€‚è¿™ç§å¯¹æ¯”è®©æˆ‘å¯¹éŸ©å›½çš„ç¤¾ä¼šæ°›å›´æœ‰äº†æ›´æ·±çš„æ€è€ƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„è¡Œç¨‹æ°é€¢ä¸­ç§‹èŠ‚ï¼ŒéŸ©å›½ä¹Ÿæ”¾å‡ã€‚å»å—å±±å¡”çš„å…¬äº¤è½¦ç«™æŒ¤æ»¡äº†äººï¼Œç­‰äº†è®¸ä¹…æ‰ä¸Šè½¦ã€‚å—å±±å¡”ä¿¯ç°æ•´ä¸ªé¦–å°”ï¼Œä½†ç¹åå’Œæ‹¥æŒ¤æ˜¯æˆ‘å¯¹è¿™åº§åŸå¸‚æœ€æ·±çš„æ„Ÿå—ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/tower.jpeg&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/tower.jpeg&#34; alt=&#34;image&#34; data-caption=&#34;é¦–å°”å—å±±å¡”å…¬äº¤ç«™&#34;&gt;
  
  
  &lt;figcaption&gt;é¦–å°”å—å±±å¡”å…¬äº¤ç«™&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;é‡œå±±æ›´å–œæ¬¢è¿™é‡Œçš„èˆ’é€‚èŠ‚å¥&#34;&gt;é‡œå±±ï¼šæ›´å–œæ¬¢è¿™é‡Œçš„èˆ’é€‚èŠ‚å¥&lt;/h2&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113366064434679&amp;amp;bvid=BV1mbymYeEtm&amp;amp;cid=26451576660&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;æ¯”èµ·é¦–å°”ï¼Œæˆ‘æ›´å–œæ¬¢é‡œå±±çš„èŠ‚å¥ã€‚é‡œå±±ä¾å±±å‚æµ·ï¼Œæœ‰ç¾ä¸½çš„æ²™æ»©å’Œç¹å¿™çš„æ¸¯å£ã€‚è¿™é‡Œè®©æˆ‘æƒ³èµ·å®¶ä¹¡å¨æµ·ï¼Œä½†æ›´åŠ ç¹åï¼Œä¹Ÿæ›´åŠ å›½é™…åŒ–ã€‚é‡œå±±ä¹Ÿæ˜¯éŸ©å›½ä¸æ—¥æœ¬è´¸æ˜“çš„é‡è¦æ¸¯å£ï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½æ´‹æº¢ç€å¼€æ”¾çš„æ°”æ¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/ganchuan.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/ganchuan.webp&#34; alt=&#34;image&#34; data-caption=&#34;ç”˜å·æ–‡åŒ–æ‘&#34;&gt;
  
  
  &lt;figcaption&gt;ç”˜å·æ–‡åŒ–æ‘&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨é‡œå±±æ—…è¡Œçš„ä¸€ä¸ªäº®ç‚¹æ˜¯è´­ä¹°äº† Busan Passï¼Œè¿™ç§ä¸“ä¸ºå¤–å›½æ¸¸å®¢è®¾è®¡çš„æ—…è¡Œé€šç¥¨å¯ä»¥å¸¦ä½ æ¸¸è§ˆè®¸å¤šå®˜æ–¹æ™¯ç‚¹ã€‚é‡œå±±çš„ä¹å¤©ä¹å›­æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œæ—¢é€‚åˆå®¶åº­æ¸¸ç©ï¼Œåˆå……æ»¡ç°ä»£åŒ–æ°”æ¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/busan-park.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/busan-park.webp&#34; alt=&#34;image&#34; data-caption=&#34;é‡œå±±ä¹å¤©ä¹å›­&#34;&gt;
  
  
  &lt;figcaption&gt;é‡œå±±ä¹å¤©ä¹å›­&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¦ä¸€ä¸ªéš¾å¿˜çš„ç»å†æ˜¯åœ¨é‡œå±±å›½é™…ç”µå½±èŠ‚ä¸Šè¿‘è·ç¦»è§åˆ°äº†å‘¨æ¶¦å‘ï¼Œå¹¶åœ¨ç”µå½±èŠ‚çš„ç‰¹åˆ«æ”¾æ˜ ä¸­é‡æ¸©äº†ç»å…¸ç”µå½±ã€Šå§è™è—é¾™ã€‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/biff.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/biff.webp&#34; alt=&#34;image&#34; data-caption=&#34;å‘¨æ¶¦å‘åœ¨å‚åŠ é‡œå±±ç”µå½±èŠ‚&#34;&gt;
  
  
  &lt;figcaption&gt;å‘¨æ¶¦å‘åœ¨å‚åŠ é‡œå±±ç”µå½±èŠ‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä»å·å†å²ä¸ç°ä»£çš„ç¢°æ’&#34;&gt;ä»å·ï¼šå†å²ä¸ç°ä»£çš„ç¢°æ’&lt;/h2&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113367725376595&amp;amp;bvid=BV1WJyUY8EJz&amp;amp;cid=26457407922&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;è¡Œç¨‹çš„æœ€åä¸€å¤©ï¼Œæˆ‘åœ¨ä»å·åœç•™äº†ä¸€å¤©ï¼Œå¤œæ™šå»äº†ä»å·ç™»é™†çºªå¿µå…¬å›­ã€‚è¿™æ˜¯ä¸€ä¸ªå€¼å¾—å‚è§‚çš„åœ°æ–¹ï¼Œçºªå¿µäº†æœé²œæˆ˜äº‰æœŸé—´è”åˆå›½å†›é˜Ÿçš„ä»å·ç™»é™†æˆ˜å½¹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/un.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/un.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»å·çºªå¿µè”åˆå›½å†›çš„çºªå¿µç¢‘&#34;&gt;
  
  
  &lt;figcaption&gt;ä»å·çºªå¿µè”åˆå›½å†›çš„çºªå¿µç¢‘&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;éŸ©å›½æ–‡åŒ–ç†Ÿæ‚‰åˆé™Œç”Ÿ&#34;&gt;éŸ©å›½æ–‡åŒ–ï¼šç†Ÿæ‚‰åˆé™Œç”Ÿ&lt;/h2&gt;
&lt;p&gt;å†å²å»ºç­‘ï¼Œæ™¯ç¦å®«åƒè¢–çç‰ˆçš„æ•…å®«ï¼Œå°¤å…¶æ˜¯å®«æ®¿å†…çš„é™ˆè®¾ï¼Œå¾ˆåƒå½±è§†å‰§ä¸­æ‹™åŠ£çš„é“å…·ã€‚ä½†æ˜¯éŸ©å›½äººè¿˜æ˜¯ä¸é—ä½™åŠ›çš„æ¨å¹¿è‡ªå·±çš„æ–‡åŒ–ï¼Œå¾ˆå¤šç™½äººã€é»‘äººç©¿ç€ä»–ä»¬çš„ä¼ ç»Ÿæœè£…åœ¨æ™¯ç¦å®«å†…æ‹ç…§ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/jingfugong.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/jingfugong.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ™¯ç¦å®«&#34;&gt;
  
  
  &lt;figcaption&gt;æ™¯ç¦å®«&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;éŸ©å›½çš„ä¾¿åˆ©åº—é‡Œæœ‰å¾ˆå¤šç§æ³¡é¢ï¼Œåƒèµ·æ¥å‘³é“æ„Ÿè§‰ä¸€èˆ¬ï¼Œæˆ‘ä¸ªäººæ›´å–œæ¬¢åƒæ¯é¢ã€‚ç”šè‡³åœ¨æ±‰é˜³å…¬å›­çš„ 711 é‡Œè¿˜æœ‰ä¸“é—¨æ³¡é¢çš„æœºå™¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/noodles.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/noodles.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ±‰æ±Ÿå…¬å›­é‡Œçš„è‡ªåŠ©æ³¡é¢æœº&#34;&gt;
  
  
  &lt;figcaption&gt;æ±‰æ±Ÿå…¬å›­é‡Œçš„è‡ªåŠ©æ³¡é¢æœº&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;éŸ©å›½äººå–å’–å•¡çœŸå¤šï¼Œå’–å•¡åº—åˆ°å¤„éƒ½æ˜¯ï¼Œå¯ä»¥è¯´å’–å•¡æµæ·Œåœ¨éŸ©å›½äººçš„è¡€æ¶²é‡Œäº†ã€‚æœ€è®©æˆ‘å¿µå¿µä¸å¿˜çš„å°±æ˜¯ blu shaak å’–å•¡ï¼Œæ—¢ä¾¿å®œåˆå¥½å–ï¼Œè¿™ç§å’–å•¡æœ‰ä¸€ç§å’¸å‘³ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/blue-shaak.JPG&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/blue-shaak.JPG&#34; alt=&#34;image&#34; data-caption=&#34;åœ¨é‡œå±±å–åˆ°çš„ blu shaak å’–å•¡&#34;&gt;
  
  
  &lt;figcaption&gt;åœ¨é‡œå±±å–åˆ°çš„ blu shaak å’–å•¡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;éŸ©å›½æ™¯ç¦å®«å†…éšå¤„å¯è§çš„â€œä¸­å›½æ–‡åŒ–â€ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/shegnxiao.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/shegnxiao.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ™¯ç¦å®«å…¬å›­ä¸­çš„åäºŒç”Ÿè‚–&#34;&gt;
  
  
  &lt;figcaption&gt;æ™¯ç¦å®«å…¬å›­ä¸­çš„åäºŒç”Ÿè‚–&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åšç‰©é¦†ä¸­å¾ˆå¤šä»‹ç»éƒ½åªæœ‰éŸ©æ–‡å’Œè‹±æ–‡ï¼Œæ²¡æœ‰ä¸­æ–‡ä»‹ç»ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/paper.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/paper.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ™¯ç¦å®«å†…æŸåšç‰©é¦†ä¸­çš„æ±‰å­—å¸–å­&#34;&gt;
  
  
  &lt;figcaption&gt;æ™¯ç¦å®«å†…æŸåšç‰©é¦†ä¸­çš„æ±‰å­—å¸–å­&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;éŸ©å›½ç¾é£Ÿå•è°ƒçš„å‘³è§‰ä½“éªŒ&#34;&gt;éŸ©å›½ç¾é£Ÿï¼šå•è°ƒçš„å‘³è§‰ä½“éªŒ&lt;/h2&gt;
&lt;p&gt;éŸ©é¤éƒ¨åˆ†åƒèµ·æ¥è¿˜ä¸é”™ï¼Œä¸è¿‡å¤§éƒ¨åˆ†éƒ½æ˜¯æ³¡èœã€é…±æ±¤ã€ç±³é¥­ã€ç‚¸é¸¡ã€çƒ¤è‚‰ä¹‹ç±»çš„ï¼ŒèŠ±æ ·å¤ªå°‘ï¼Œè¿œä¸å¦‚ä¸­å›½çš„é¥®é£Ÿä¸°å¯Œï¼Œè¿˜æ²¡æœ‰æ—©é¤å¯ä»¥åƒã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/korean-dish.JPG&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/korean-dish.JPG&#34; alt=&#34;image&#34; data-caption=&#34;éŸ©é¤&#34;&gt;
  
  
  &lt;figcaption&gt;éŸ©é¤&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è€Œä¸”ï¼Œåœ¨éŸ©å›½ä¾¿åˆ©åº—é‡Œä¹°åˆ°çš„å„ç§å°é›¶é£Ÿï¼Œå¤§å¤šä¹Ÿä¸å¥½åƒï¼Œè¿™ç‚¹è¿œä¸å¦‚æ—¥æœ¬ï¼Œæˆ‘è§‰å¾—åœ¨æ—¥æœ¬çš„ä¾¿åˆ©åº—é‡Œä¹°åˆ°çš„ä¸œè¥¿å£æ„Ÿéƒ½è¿˜ä¸é”™ã€‚åœ¨éŸ©å›½æˆ‘å°±åƒä¸€ä¸ªæ–‡ç›²ï¼Œä¸€ä¸ªéŸ©æ–‡ä¹Ÿä¸è®¤è¯†ï¼Œè€Œç¿»è¯‘è½¯ä»¶ç»å¸¸ç¿»è¯‘çš„è«åå…¶å¦™ï¼Œå¾ˆå¤šæ‹›ç‰Œå’Œèœå•ä¸Šéƒ½æ²¡æœ‰è‹±æ–‡æˆ–æ±‰å­—ï¼Œç”šè‡³è¿å›¾ç‰‡éƒ½æ²¡æœ‰ï¼Œè®©äººå¾ˆæ— è¯­ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/south-korea/korea-text.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/south-korea/korea-text.webp&#34; alt=&#34;image&#34; data-caption=&#34;è«åå¥‡å¦™çš„éŸ©æ–‡ç¿»è¯‘&#34;&gt;
  
  
  &lt;figcaption&gt;è«åå¥‡å¦™çš„éŸ©æ–‡ç¿»è¯‘&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;è¯„ä»·ä¸‹æ¬¡å¯èƒ½ä¸ä¼šå†æ¥äº†&#34;&gt;è¯„ä»·ï¼šä¸‹æ¬¡å¯èƒ½ä¸ä¼šå†æ¥äº†&lt;/h2&gt;
&lt;p&gt;æ€»ç»“è¿™æ¬¡éŸ©å›½ä¹‹è¡Œï¼Œè™½ç„¶æœ‰äº›äº®ç‚¹ï¼Œä½†æ€»ä½“ä½“éªŒä¸å°½å¦‚äººæ„ã€‚è¯­è¨€éšœç¢ã€æ–‡åŒ–éš”é˜‚ï¼Œä»¥åŠç›¸æ¯”ä¹‹ä¸‹å•è°ƒçš„é¥®é£Ÿå’Œé«˜æ˜‚çš„ä½å®¿è´¹ç”¨ï¼Œè®©æˆ‘æ„Ÿåˆ°å†æ¥ä¸€æ¬¡çš„åŠ¨åŠ›ä¸è¶³ã€‚ä¸è¿‡ï¼Œé‡œå±±çš„ç”µå½±èŠ‚å’Œå’–å•¡ï¼Œä»¥åŠä»å·çš„å†å²æ°›å›´ï¼Œè¿˜æ˜¯è®©æˆ‘ç•™ä¸‹äº†äº›è®¸å›å‘³çš„ç¬é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ²¡å»è¿‡éŸ©å›½ï¼Œå¯ä»¥å»ä½“éªŒä¸€æ¬¡ï¼›ä½†å¯¹äºæˆ‘æ¥è¯´ï¼Œè¿™ä¸€æ¬¡å¯èƒ½å°±æ˜¯æœ€åä¸€æ¬¡äº†ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio sidecar å’Œ ambient æ¨¡å¼çš„ç½‘ç»œæˆæœ¬å¯¹æ¯”</title>
      <link>https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/</link>
      <pubDate>Mon, 02 Dec 2024 12:17:21 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨æœåŠ¡ç½‘æ ¼æ¶æ„ä¸æ–­æ¼”è¿›çš„è¿‡ç¨‹ä¸­ï¼Œäº†è§£ä¸åŒéƒ¨ç½²æ¨¡å¼ä¸‹çš„ç½‘ç»œæˆæœ¬å¯¹äºä¼˜åŒ–æ€§èƒ½å’Œèµ„æºæ•ˆç‡è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†å¯¹æ¯” Istio çš„ sidecar æ¨¡å¼å’Œ ambient æ¨¡å¼çš„ç½‘ç»œæˆæœ¬ï¼Œåˆ†äº«æˆ‘åœ¨&lt;a href=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/&#34; title=&#34;è¿™ç¯‡æ–‡ç« &#34;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;ä¸­çš„ä¸€äº›è§‚ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;sidecar-æ¨¡å¼&#34;&gt;Sidecar æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;Istio çš„ sidecar æ¨¡å¼é€šè¿‡åœ¨æ¯ä¸ª pod æ—éƒ¨ç½² sidecar ä»£ç†æ¥æ‹¦æˆªæœåŠ¡é—´çš„æµé‡ã€‚è¿™ç§æ¶æ„å¼•å…¥äº†é¢å¤–çš„ç½‘ç»œè·³è½¬ï¼Œå¯èƒ½ä¼šå¢åŠ å»¶è¿Ÿå’Œè®¡ç®—èµ„æºä½¿ç”¨é‡ã€‚ç„¶è€Œï¼Œè¯¥æ¨¡å¼å†…ç½®äº†é‡è¦çš„æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§ï¼š&lt;a href=&#34;https://istio.io/latest/docs/tasks/traffic-management/locality-load-balancing/&#34; title=&#34;æœ¬åœ°æ€§æ„ŸçŸ¥&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ¬åœ°æ€§æ„ŸçŸ¥&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ 1 å±•ç¤ºäº† Application 1 åœ¨ Istio sidecar æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/sidecar-mode.svg&#34; data-img=&#34;/blog/istio-sidecar-vs-ambient-network-cost-performance/sidecar-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;å›¾ 1ï¼šApplication 1 åœ¨ Istio sidecar æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å›¾ 1ï¼šApplication 1 åœ¨ Istio sidecar æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;sidecar-æ¨¡å¼çš„æœ¬åœ°åŒ–æ„ŸçŸ¥&#34;&gt;Sidecar æ¨¡å¼çš„æœ¬åœ°åŒ–æ„ŸçŸ¥&lt;/h3&gt;
&lt;p&gt;åœ¨ Sidecar æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç«¯ç‚¹è¡¨ä¸­çš„æœ¬åœ°æ€§ä¿¡æ¯ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£æœ¬åœ°æ€§ç®¡ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl proxy-config endpoint &amp;lt;pod-name&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;.namespace&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&amp;gt; -o yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹è¾“å‡ºç‰‡æ®µï¼Œæ˜¾ç¤ºäº†é›†ç¾¤ &lt;code&gt;outbound|9080||reviews.default.svc.cluster.local&lt;/code&gt; çš„ç«¯ç‚¹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;nt&#34;&gt;addedViaApi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;circuitBreakers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;thresholds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;maxConnections&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4294967295&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxPendingRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4294967295&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4294967295&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxRetries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4294967295&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;maxConnections&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxPendingRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;maxRetries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HIGH&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;edsServiceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;outbound|9080||reviews.default.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostStatuses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socketAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10.244.0.98&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;portValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;healthStatus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;edsHealthStatus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HEALTHY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;locality&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;region&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-central1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-central1-c&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cx_connect_fail&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cx_total&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rq_error&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rq_success&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rq_timeout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rq_total&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cx_active&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GAUGE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rq_active&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;GAUGE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# çœç•¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# çœç•¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;outbound|9080||reviews.default.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;observabilityName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;outbound|9080||reviews.default.svc.cluster.local;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸­å¯ä»¥çœ‹åˆ° sidecar æ¨¡å¼ä¸‹å¯¹ Envoy ä»£ç†å¯¹ pod åŸºäºè´Ÿè½½å‡è¡¡çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œä¾‹å¦‚ &lt;code&gt;maxConnections&lt;/code&gt;, &lt;code&gt;maxRequests&lt;/code&gt;, &lt;code&gt;maxRetries&lt;/code&gt; ç­‰ circuit breaker é…ç½®ï¼ŒåŒæ—¶åŒ…å«æµé‡æŒ‡æ ‡å’Œå¥åº·çŠ¶æ€ã€‚è¿™äº›ç»†èŠ‚å¸®åŠ©åœ¨ Pod çº§åˆ«ç®¡ç†æµé‡çš„å¥åº·åº¦ã€ç¨³å®šæ€§å’Œå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;æµé‡è´Ÿè½½å‡è¡¡è€ƒè™‘åˆ° Localityï¼Œå¦‚ zone å’Œ regionã€‚Envoy ä½¿ç”¨è¿™äº›ä¿¡æ¯å¯¹æµé‡æ‰§è¡Œæ›´åŠ ç²¾å‡†çš„åŒºåŸŸæ„ŸçŸ¥æµé‡åˆ†é…ç­–ç•¥ï¼ˆå¦‚ä¼˜å…ˆä½¿ç”¨åŒä¸€ zone å†…çš„æœåŠ¡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª sidecar ä»£ç†éƒ½ä¼šä¼˜å…ˆå°†æµé‡è·¯ç”±è‡³åŒä¸€å¯ç”¨åŒºï¼ˆAZï¼‰æˆ–åŒºåŸŸå†…çš„æœåŠ¡ã€‚è¿™ä¸€è®¾è®¡å‡å°‘äº†ä¸å¿…è¦çš„è·¨ AZ æµé‡ï¼Œä»è€Œé™ä½äº†ç”±æ•°æ®ä¼ è¾“äº§ç”Ÿçš„é«˜å»¶è¿Ÿå’Œé«˜æˆæœ¬ã€‚é€šè¿‡å°†æµé‡é™åˆ¶åœ¨æœ¬åœ°åŒºåŸŸï¼Œsidecar æ¨¡å¼èƒ½å¤Ÿä¼˜åŒ–ç½‘ç»œè·¯å¾„ï¼Œé¿å…è·¨åŒºåŸŸçš„ç“¶é¢ˆã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡ sidecar æ¶æ„è®¡ç®—å¯†é›†ï¼Œä½†å…¶æœ¬åœ°æ€§æ„ŸçŸ¥åŠŸèƒ½åœ¨ç»´æŠ¤é«˜æ•ˆæµé‡è·¯ç”±æ–¹é¢èµ·åˆ°äº†å…³é”®ä½œç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤šåŒºåŸŸäº‘éƒ¨ç½²ä¸­ï¼Œè¯¥åŠŸèƒ½æœ‰åŠ©äºé™ä½è·¨åŒºåŸŸæµé‡æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ambient-æ¨¡å¼&#34;&gt;Ambient æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºçš„ Istio ambient æ¨¡å¼çš„æ¶æ„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/istio-ambient-layers.svg&#34; data-img=&#34;/blog/istio-sidecar-vs-ambient-network-cost-performance/istio-ambient-layers.svg&#34; alt=&#34;image&#34; data-caption=&#34;å›¾ 2ï¼šIstio ambient æ¨¡å¼&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å›¾ 2ï¼šIstio ambient æ¨¡å¼&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;Istio ambient æ¨¡å¼åŒ…å«ä¸¤å±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ztunnel å®‰å…¨å±‚ï¼ˆL3/L4 æµé‡å¤„ç†ï¼‰&lt;/strong&gt;ï¼šåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œambient æ¨¡å¼ä»…ä¾èµ– zTunnel è¿›è¡Œæµé‡ç®¡ç†ï¼Œä¸»è¦å¤„ç†ä¸‰å±‚å’Œå››å±‚çš„æµé‡ï¼Œå³ç½‘ç»œå’Œä¼ è¾“å±‚ã€‚è¿™ä¸€æ–¹å¼å¯å‡å°‘å¼€é”€ï¼Œç¡®ä¿åŸºæœ¬çš„è¿æ¥å’Œå®‰å…¨è¦æ±‚å¾—åˆ°æ»¡è¶³ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Waypoint ä»£ç†å±‚ï¼ˆL7 æµé‡å¤„ç†ï¼‰&lt;/strong&gt;ï¼šæ­¤æ¨¡å¼ä¸‹å¼•å…¥äº† waypoint ä»£ç†ï¼Œä»¥æ‰©å±•è‡³åº”ç”¨å±‚æµé‡ï¼Œå¤„ç†é«˜çº§è·¯ç”±ã€è§‚æµ‹æ€§å’Œç­–ç•¥æ‰§è¡Œã€‚ç„¶è€Œï¼Œwaypoint ä»£ç†çš„éƒ¨ç½²ä½ç½®å¯¹æ€§èƒ½è‡³å…³é‡è¦ã€‚ä¸ºé¿å…è·¨ AZ æµé‡ï¼Œå»ºè®®å°† waypoint ä»£ç†åˆ†å¸ƒäºå„ä¸ª AZ å†…ï¼Œä»¥ç¡®ä¿æœ€ä½³æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ambient-æ¨¡å¼çš„æœ¬åœ°åŒ–æ„ŸçŸ¥&#34;&gt;Ambient æ¨¡å¼çš„æœ¬åœ°åŒ–æ„ŸçŸ¥&lt;/h3&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼Œambient æ¨¡å¼é€šè¿‡ ztunnel å’Œ waypoint ä»£ç†å®ç°ä¸åŒçš„æ¶æ„ã€‚zTunnel ç¡®ä¿æœ¬åœ°æ„ŸçŸ¥çš„æµé‡è·¯ç”±ï¼Œç±»ä¼¼äº sidecar æ¨¡å¼ï¼Œä¼˜å…ˆåœ¨åŒä¸€ AZ å†…è·¯ç”±æµé‡ï¼Œä»è€Œé™åˆ¶è·¨ AZ æµé‡å¹¶å‡å°‘ç›¸åº”çš„ç½‘ç»œæˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ 3 å±•ç¤ºäº† Application 1 åœ¨ Istio ambient æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒ AZ çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/ambient-mode.svg&#34; data-img=&#34;/blog/istio-sidecar-vs-ambient-network-cost-performance/ambient-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;å›¾ 3ï¼šApplication 1 åœ¨ Istio ambient æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å›¾ 3ï¼šApplication 1 åœ¨ Istio ambient æ¨¡å¼ä¸‹è®¿é—®ä½äºä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰çš„ Application 2 çš„æµé‡è·¯å¾„ã€‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå›¾ä¸­ Waypoint Proxy ä¸ºæ¼”ç¤ºç›®çš„å•ç‹¬æ˜¾ç¤ºï¼›åœ¨å®é™…ä¸­ï¼Œå®ƒå¹¶ä¸ç»‘å®šåˆ°ç‰¹å®šèŠ‚ç‚¹ï¼Œå¯ä»¥ä¸ Ztunnel åŒèŠ‚ç‚¹éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Ambient æ¨¡å¼ä¸­ Ztunnel çš„è¯¦ç»†é…ç½®å’Œæµé‡åˆ†å¸ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl ztunnel-config workload -o yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹è¾“å‡ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;nt&#34;&gt;applicationTunnel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canonicalName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canonicalRevision&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;clusterId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Kubernetes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;locality&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;region&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-central1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-central1-c&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage-v1-d5789fdfb-gmw5r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gke-cilium-default-pool-63a77182-f699&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HBONE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceAccount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bookinfo-productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Healthy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trustDomain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;uid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Kubernetes//Pod/default/productpage-v1-d5789fdfb-gmw5r&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadIps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;m&#34;&gt;10.28.2.14&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ä¸­å¯ä»¥çœ‹åˆ° ztunnel éš§é“çš„æœ¬åœ°åŒ–ä¿¡æ¯ï¼Œztunnel å¯ä»¥å¯¹è¿›å‡ºè¯¥èŠ‚ç‚¹æ‰€æœ‰ pod çš„æµé‡è¿›è¡Œé›†ä¸­å¼ç®¡ç†ï¼Œæ¯”å¦‚ç»Ÿä¸€æ‰§è¡Œè´Ÿè½½å‡è¡¡ã€å¥åº·æ£€æŸ¥å’ŒåŒºåŸŸæ„ŸçŸ¥ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;waypoint-ä»£ç†ä¼˜åŒ–&#34;&gt;Waypoint ä»£ç†ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;ç„¶è€Œï¼Œwaypoint ä»£ç†å¹¶éè‡ªåŠ¨å…·æœ‰ AZ æ„ŸçŸ¥åŠŸèƒ½ã€‚å…³é”®é—®é¢˜åœ¨äºå®ƒä»¬çš„éƒ¨ç½²ä½ç½®ã€‚ä¸ºä¼˜åŒ–æˆæœ¬ä¸æ€§èƒ½ï¼Œwaypoint ä»£ç†éœ€è¦è·¨æ‰€æœ‰ AZ è¿›è¡Œæ‰©å±•ï¼Œä»¥ä¾¿æœ¬åœ°å¤„ç†æµé‡ã€‚å¦åˆ™ï¼Œå¯èƒ½å¯¼è‡´è·¨ AZ æµé‡å’Œé¢å¤–æˆæœ¬ã€‚æ­¤å¤–ï¼Œå½“æµé‡è¿›å…¥ waypoint ä»£ç†æ—¶ï¼ŒåŸå§‹æœ¬åœ°æ€§ä¿¡æ¯å¯èƒ½è¢«éšè—ï¼Œè¿›ä¸€æ­¥å¢åŠ äº†è·¯ç”±ä¼˜åŒ–çš„éš¾åº¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬ï¼Œå»ºè®® waypoint ä»£ç†åœ¨å„ä¸ª AZ å†…åˆ†å¸ƒï¼Œä»¥ä¾¿èƒ½å¤Ÿæœ¬åœ°å¤„ç†æµé‡ã€‚æ­¤å¤–ï¼Œztunnel ä¸ waypoint ä»£ç†çš„é€šä¿¡è®¾è®¡ä¸ºæ¥è¿‘æ„ŸçŸ¥ï¼Œä»è€Œç¡®ä¿æµé‡è¢«è·¯ç”±è‡³æœ€è¿‘çš„ waypoint ä»£ç†ã€‚è¿™ä¸€ç‰¹æ€§è¿›ä¸€æ­¥å‡å°‘äº†è·¨ AZ è´¹ç”¨å’Œå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-kiali-dashboard-è¿›è¡Œå¯è§†åŒ–&#34;&gt;ä½¿ç”¨ Kiali dashboard è¿›è¡Œå¯è§†åŒ–&lt;/h2&gt;
&lt;p&gt;åœ¨å¯¹æ¯” sidecar å’Œ ambient æ¨¡å¼æ—¶ï¼Œä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£æœ¬åœ°æ€§å’Œè·¯ç”±è¡Œä¸ºï¼Œå»ºè®®ä½¿ç”¨ Kiali dashboardã€‚Kiali èƒ½å¤Ÿç›´è§‚å±•ç¤ºä¸åŒæ¨¡å¼ä¸‹çš„æµé‡è·¯å¾„ï¼Œæœ‰åŠ©äºç†è§£ ambient æ¨¡å¼åœ¨å¤æ‚æ€§ä¸Šçš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-sidecar-vs-ambient-network-cost-performance/kiali.webp&#34; data-img=&#34;/blog/istio-sidecar-vs-ambient-network-cost-performance/kiali.webp&#34; data-width=&#34;3644&#34; data-height=&#34;2090&#34; alt=&#34;image&#34; data-caption=&#34;å›¾ 4ï¼šKiali é¡µé¢&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å›¾ 4ï¼šKiali é¡µé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨å¯¹æ¯” Istio çš„ sidecar å’Œ ambient æ¨¡å¼çš„ç½‘ç»œæˆæœ¬æ—¶ï¼Œä¸¤ç§æ¶æ„éƒ½æä¾›äº†æœ¬åœ°æ€§æ„ŸçŸ¥çš„è·¯ç”±ä»¥å‡å°‘è·¨ AZ æµé‡ã€‚ç„¶è€Œï¼Œsidecar æ¨¡å¼åœ¨æ¯ä¸ªä»£ç†çš„æœ¬åœ°æ€§ç®¡ç†ä¸Šæ›´åŠ å®Œå–„ï¼Œè€Œ ambient æ¨¡å¼éœ€è¦è°¨æ…ç®¡ç† waypoint ä»£ç†ä»¥é¿å…é¢å¤–æˆæœ¬ã€‚æ­¤å¤–ï¼Œéœ€è¦è€ƒè™‘ ambient æ¨¡å¼çš„ä¸¤ç§å­æ¨¡å¼ï¼ˆæœ‰æˆ–æ—  waypoint ä»£ç†ï¼‰æ¥ç†è§£å®ƒä»¬å¯¹ç½‘ç»œæˆæœ¬å’Œæ€§èƒ½çš„ä¸åŒå½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå¸Œæœ›æ·±å…¥äº†è§£å››ç§ä¸»è¦çš„æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼ï¼Œå»ºè®®é˜…è¯»[æ·±å…¥è§£ææœåŠ¡ç½‘æ ¼çš„å››ç§æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼ï¼šæ€§èƒ½ã€å®‰å…¨æ€§ä¸æˆæœ¬åˆ†æ]/blog/service-mesh-data-plane-deployment-modes/)ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ€ç»´å¯¼å›¾å·¥å…·è¯„æµ‹ï¼šä¸ºä»€ä¹ˆæˆ‘é€‰æ‹© Whimsical</title>
      <link>https://jimmysong.io/blog/mindmap-review/</link>
      <pubDate>Wed, 27 Nov 2024 14:46:41 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/mindmap-review/</guid>
      <description>
        
        
        &lt;div style=&#34;position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 0; overflow: hidden;
 border-radius: 8px; will-change: transform;&#34;&gt;
  &lt;iframe loading=&#34;lazy&#34; style=&#34;position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;&#34;
  src=&#34;https://whimsical.com/embed/FuuokxVScXeGqU57Qo1V3P&#34; allowfullscreen=&#34;allowfullscreen&#34; allow=&#34;fullscreen&#34;&gt;
  &lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;æ€ç»´å¯¼å›¾æ˜¯ä¸€ç§é«˜æ•ˆçš„å·¥å…·ï¼Œç”¨äºæ•´ç†æ€è·¯ã€æ„å»ºç»“æ„å’Œè§„åˆ’é¡¹ç›®ã€‚æˆ‘å°è¯•äº†è®¸å¤šæ€ç»´å¯¼å›¾å·¥å…·ï¼ŒåŒ…æ‹¬ Coggleã€Miroã€GitMindã€MindMeister ç­‰ã€‚è¿™äº›å·¥å…·å„æœ‰ç‰¹ç‚¹ï¼Œä½†æœ€ç»ˆ Whimsical æˆä¸ºäº†æˆ‘çš„é¦–é€‰ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†æ·±å…¥ä»‹ç»è¿™äº›å·¥å…·çš„ç‰¹ç‚¹ï¼Œå¹¶åˆ†äº«é€‰æ‹© Whimsical çš„åŸå› ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·å¯¹æ¯”&#34;&gt;åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·å¯¹æ¯”&lt;/h2&gt;
&lt;p&gt;åœ¨é€‰æ‹©åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·æ—¶ï¼Œæˆ‘é‡ç‚¹å…³æ³¨ä»¥ä¸‹æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯å¦æ”¯æŒåµŒå…¥ç½‘ç«™å¹¶å…·å¤‡äº¤äº’æ€§ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œæ˜¯å¦ç›´è§‚æµç•…ã€‚&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½æ˜¯å¦èƒ½æ»¡è¶³ä¸ªäººå’Œå›¢é˜Ÿåä½œçš„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;coggle&#34;&gt;Coggle&lt;/h3&gt;
&lt;p&gt;Coggle æ˜¯ä¸€æ¬¾ä¸“æ³¨äºæ€ç»´å¯¼å›¾çš„åœ¨çº¿å·¥å…·ï¼Œç•Œé¢æ¸…æ–°ï¼Œé€‚åˆä¸ªäººç”¨æˆ·å’Œå°å‹å›¢é˜Ÿã€‚å®ƒçš„æ ¸å¿ƒç‰¹è‰²æ˜¯å¯ä»¥å¿«é€Ÿåˆ›å»ºèŠ‚ç‚¹å¹¶ç”Ÿæˆæ ‘çŠ¶ç»“æ„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;å…è´¹ç‰ˆæä¾›æ— é™åˆ¶çš„æ€ç»´å¯¼å›¾åˆ›å»ºã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå®æ—¶åä½œï¼Œé€‚åˆç®€å•é¡¹ç›®è§„åˆ’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ“ä½œé€»è¾‘ä¸å¤Ÿç›´è§‚ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚é¡¹ç›®ä¸­å®¹æ˜“äº§ç”Ÿæ··ä¹±ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºä¹é«˜çº§åŠŸèƒ½ï¼Œä¸é€‚åˆéœ€è¦é«˜æ•ˆç¼–è¾‘çš„ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;miro&#34;&gt;Miro&lt;/h3&gt;
&lt;p&gt;Miro æ˜¯ä¸€æ¬¾åŠŸèƒ½ä¸°å¯Œçš„åä½œç™½æ¿å·¥å…·ï¼Œæ€ç»´å¯¼å›¾æ˜¯å…¶ä¼—å¤šåŠŸèƒ½ä¸­çš„ä¸€ä¸ªæ¨¡å—ã€‚å®ƒé€‚åˆå›¢é˜Ÿåœ¨å¤æ‚é¡¹ç›®ä¸­è¿›è¡Œå¤´è„‘é£æš´å’Œæµç¨‹è§„åˆ’ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ”¯æŒå¤šç§å›¾è¡¨ç±»å‹ï¼Œæ‰©å±•æ€§å¼ºã€‚&lt;/li&gt;
&lt;li&gt;ç•Œé¢è®¾è®¡ç¾è§‚ï¼Œæ“ä½œæµç•…ï¼Œæ”¯æŒå›¢é˜Ÿå®æ—¶åä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;åµŒå…¥ç½‘ç«™æ—¶èŠ‚ç‚¹æ— æ³•å±•å¼€å’ŒæŠ˜å ï¼Œä»…é€‚åˆé™æ€å±•ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½ä¸°å¯Œä½†è¾ƒä¸ºå¤æ‚ï¼Œå¯¹æ–°ç”¨æˆ·æ¥è¯´å­¦ä¹ æ›²çº¿è¾ƒé™¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;gitmind&#34;&gt;GitMind&lt;/h3&gt;
&lt;p&gt;GitMind æ˜¯ä¸€æ¬¾è½»é‡çº§çš„åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·ï¼Œç•Œé¢ç®€æ´ï¼Œä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½ï¼Œé€‚åˆåˆå­¦è€…æˆ–å¯¹åŠŸèƒ½éœ€æ±‚ä¸é«˜çš„ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜“äºä¸Šæ‰‹ï¼Œæ“ä½œç®€å•ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›å¤šç§æ¨¡æ¿ï¼Œä¾¿äºå¿«é€Ÿæ„å»ºå¯¼å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠŸèƒ½è¾ƒå•ä¸€ï¼Œæ— æ³•æ»¡è¶³å¤æ‚é¡¹ç›®éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…è´¹ç‰ˆé™åˆ¶è¾ƒå¤šï¼Œå¯¹é«˜çº§ç”¨æˆ·ä¸å¤Ÿå‹å¥½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mindmeister&#34;&gt;MindMeister&lt;/h3&gt;
&lt;p&gt;MindMeister æ˜¯ä¸€æ¬¾æˆç†Ÿçš„åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·ï¼Œä»¥ä¼˜é›…çš„ç•Œé¢å’Œå¼ºå¤§çš„åˆ†äº«åŠŸèƒ½è‘—ç§°ã€‚å®ƒçš„åµŒå…¥åŠŸèƒ½ç‰¹åˆ«é€‚åˆå†…å®¹åˆ›ä½œè€…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ”¯æŒèŠ‚ç‚¹çš„å±•å¼€å’ŒæŠ˜å ï¼Œäº¤äº’ä½“éªŒè‰¯å¥½ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›æ¸…æ™°çš„ç•Œé¢å’Œæµç•…çš„æ“ä½œä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;å…è´¹ç‰ˆé€‚åˆä¸ªäººç”¨æˆ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;å…è´¹ç‰ˆé™åˆ¶å¯¼å›¾æ•°é‡ï¼Œå¯¹äºé•¿æœŸä½¿ç”¨è€…å¯èƒ½éœ€è¦è®¢é˜…é«˜çº§ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;whimsical&#34;&gt;Whimsical&lt;/h3&gt;
&lt;p&gt;Whimsical æ˜¯ä¸€æ¬¾å¤šåŠŸèƒ½åœ¨çº¿å·¥å…·ï¼Œé™¤äº†æ€ç»´å¯¼å›¾ï¼Œè¿˜æ”¯æŒæµç¨‹å›¾ã€çœ‹æ¿ç­‰å¤šç§å›¾è¡¨ç±»å‹ã€‚å®ƒçš„è®¾è®¡ç®€æ´ç›´è§‚ï¼ŒåŠŸèƒ½å¤šæ ·ï¼Œæ˜¯å›¢é˜Ÿåä½œçš„åˆ©å™¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/mindmap-review/whimsical-ui.png&#34; data-img=&#34;https://jimmysong.io/img/blog/mindmap-review/whimsical-ui.png&#34; alt=&#34;image&#34; data-caption=&#34;Whimsical ç•Œé¢&#34;&gt;
  
  
  &lt;figcaption&gt;Whimsical ç•Œé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;èŠ‚ç‚¹æ”¯æŒå±•å¼€å’ŒæŠ˜å ï¼Œäº¤äº’æ€§å‡ºè‰²ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œç›´è§‚ï¼Œä¸Šæ‰‹å¿«ï¼Œé€‚åˆä¸ªäººå’Œå›¢é˜Ÿä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒç”ŸæˆåµŒå…¥ä»£ç å’Œé“¾æ¥åˆ†äº«ï¼Œå±•ç¤ºçµæ´»ã€‚&lt;/li&gt;
&lt;li&gt;é™¤äº†æ€ç»´å¯¼å›¾ï¼Œè¿˜èƒ½åˆ›å»ºæµç¨‹å›¾ã€çœ‹æ¿ç­‰ï¼Œé€‚åˆå¤šåœºæ™¯ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒ AI æ€ç»´å¯¼å›¾ï¼Œä½†æ˜¯å¯¹å…è´¹ç”¨æˆ·æœ‰ä¸€å®šé™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä»ä¸­å›½å¤§é™†å¯ä»¥æ­£å¸¸è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;å…è´¹ç‰ˆé™åˆ¶ 3 ä¸ª team boardï¼Œä¸ªäººç”¨æˆ·æ— éœ€è€ƒè™‘è¿™ä¸€ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;åªæ”¯æŒå¯¼å‡ºä¸ºä½åƒç´ çš„ png å›¾ç‰‡ï¼Œä¸æ”¯æŒ svg æ ¼å¼å¯¼å‡ºã€‚&lt;/li&gt;
&lt;li&gt;æ— æ³•å¯¼å…¥ Markdown æ–‡ä»¶ç”Ÿæˆæ€ç»´å¯¼å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æœ¬åœ°åŒ–æ€ç»´å¯¼å›¾å·¥å…·å¯¹æ¯”&#34;&gt;æœ¬åœ°åŒ–æ€ç»´å¯¼å›¾å·¥å…·å¯¹æ¯”&lt;/h2&gt;
&lt;p&gt;å¦‚æœä¸éœ€è¦åœ¨çº¿åä½œæˆ–ç½‘ç«™åµŒå…¥ï¼Œæœ¬åœ°åŒ–æ€ç»´å¯¼å›¾å·¥å…·ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚å…¶ä¸­ï¼ŒMindNodeã€XMind å’Œ Markmap éƒ½æ˜¯å¤‡å—æ¨èçš„å·¥å…·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;mindnode&#34;&gt;MindNode&lt;/h3&gt;
&lt;p&gt;MindNode æ˜¯ä¸€æ¬¾ macOS å’Œ iOS å¹³å°çš„æ€ç»´å¯¼å›¾å·¥å…·ï¼Œä»¥å…¶ç®€çº¦è®¾è®¡å’Œè½»é‡åŒ–è‘—ç§°ï¼Œé€‚åˆå¿«é€Ÿæ„å»ºç®€å•çš„æ€ç»´å¯¼å›¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;è½»é‡åŒ–å·¥å…·ï¼Œæ“ä½œç®€å•æµç•…ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ macOS å’Œ iOS çš„æ·±åº¦é›†æˆï¼Œæ”¯æŒå¯¼å‡ºå¤šç§æ ¼å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;é«˜çº§åŠŸèƒ½æœ‰é™ï¼Œéš¾ä»¥æ»¡è¶³å¤æ‚éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒå®æ—¶åä½œï¼Œä»…é€‚åˆä¸ªäººä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;xmind&#34;&gt;XMind&lt;/h3&gt;
&lt;p&gt;XMind æ˜¯ä¸€æ¬¾å†å²æ‚ ä¹…çš„æ€ç»´å¯¼å›¾å·¥å…·ï¼Œä»¥åŠŸèƒ½å¼ºå¤§å’Œä¸“ä¸šæ€§è‘—ç§°ï¼Œé€‚åˆå¯¹åŠŸèƒ½è¦æ±‚è¾ƒé«˜çš„ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ”¯æŒå¤šç§æ€ç»´å¯¼å›¾æ ·å¼ï¼ŒåŠŸèƒ½ä¸°å¯Œã€‚&lt;/li&gt;
&lt;li&gt;å¯¼å‡ºé€‰é¡¹å¤šæ ·ï¼Œé€‚åˆæ¼”ç¤ºå’Œæ–‡æ¡£è¾“å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;ç•Œé¢ç›¸å¯¹å¤æ‚ï¼Œæ–°ç”¨æˆ·éœ€è¦ä¸€å®šå­¦ä¹ æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;æœ¬åœ°åŒ–å·¥å…·ï¼Œåä½œå’Œå±•ç¤ºåŠŸèƒ½è¾ƒå¼±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;markmap&#34;&gt;Markmap&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/markmap/markmap&#34; title=&#34;Markmap&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Markmap&lt;/a&gt; æ˜¯ä¸€æ¬¾åŸºäº Markdown çš„å¼€æºæ€ç»´å¯¼å›¾å·¥å…·ï¼Œéå¸¸é€‚åˆæŠ€æœ¯ç”¨æˆ·ã€‚å®ƒå¯ä»¥å°† Markdown æ–‡ä»¶ç›´æ¥æ¸²æŸ“æˆåŠ¨æ€æ€ç»´å¯¼å›¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ”¯æŒç§æœ‰åŒ–éƒ¨ç½²ï¼Œé€‚åˆå®‰å…¨è¦æ±‚é«˜çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;å…¼å®¹ Markdown æ ¼å¼ï¼Œé€‚åˆå¼€å‘è€…å’ŒæŠ€æœ¯äººå‘˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;åŠŸèƒ½è¾ƒä¸ºå•ä¸€ï¼Œä»…èƒ½å±•ç¤ºé™æ€å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;åŠ¨æ€äº¤äº’æ€§æœ‰é™ï¼Œå¯¹éæŠ€æœ¯ç”¨æˆ·ä¸å¤Ÿå‹å¥½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-whimsical&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© Whimsicalï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ç»è¿‡å¤šæ–¹æ¯”è¾ƒï¼Œæˆ‘æœ€ç»ˆé€‰æ‹© Whimsicalï¼Œä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº¤äº’æ€§å‡ºè‰²&lt;/strong&gt;ï¼šæ”¯æŒèŠ‚ç‚¹çš„å±•å¼€å’ŒæŠ˜å ï¼ŒåµŒå…¥ç½‘é¡µåä½“éªŒè‰¯å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€æ´ç›´è§‚&lt;/strong&gt;ï¼šç•Œé¢è®¾è®¡æ˜“ç”¨æ€§å¼ºï¼Œæ“ä½œæµç•…ï¼Œæ— éœ€å¤æ‚å­¦ä¹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šåŠŸèƒ½æ€§&lt;/strong&gt;ï¼šä¸ä»…æ”¯æŒæ€ç»´å¯¼å›¾ï¼Œè¿˜èƒ½ç»˜åˆ¶æµç¨‹å›¾ã€åˆ›å»ºçœ‹æ¿ç­‰ï¼Œæ»¡è¶³å¤šç§éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åä½œèƒ½åŠ›å¼º&lt;/strong&gt;ï¼šå®æ—¶å¤šäººç¼–è¾‘åŠŸèƒ½æå¤§æå‡å›¢é˜Ÿæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»åˆ†äº«&lt;/strong&gt;ï¼šæ”¯æŒç”ŸæˆåµŒå…¥ä»£ç å’Œåˆ†äº«é“¾æ¥ï¼Œé€‚åˆå±•ç¤ºå’Œä¼ æ’­ã€‚&lt;/li&gt;
&lt;/ol&gt;



&lt;div class=&#34;alert alert-tip-container&#34;&gt;
  
  &lt;div class=&#34;alert-tip-title px-2 py-2&#34;&gt;
    ä¸‹è½½ SVG å›¾ç‰‡
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-tip px-2&#34;&gt;
    Whimsical å…è´¹ç‰ˆä¸æ”¯æŒå¯¼å‡º Markdownã€é«˜æ¸… PNG æˆ– PDF æ ¼å¼ã€‚ä½†æœ‰æŠ€å·§å¯ä¸‹è½½æ€ç»´å¯¼å›¾ SVG æ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘ä¸­çš„æ€ç»´å¯¼å›¾ URL åŠ â€œ.svgâ€åç¼€èƒ½ä¸‹è½½çŸ¢é‡å›¾ã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;ä¸åŒæ€ç»´å¯¼å›¾å·¥å…·æœ‰å„è‡ªçš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚å¯¹æˆ‘è€Œè¨€ï¼ŒWhimsical çš„äº¤äº’æ€§ã€å¤šåŠŸèƒ½æ€§ä»¥åŠä¾¿æ·çš„åä½œä½“éªŒä½¿å…¶è„±é¢–è€Œå‡ºã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€æ¬¾èƒ½å¤Ÿæ»¡è¶³å¤šåœºæ™¯éœ€æ±‚çš„åœ¨çº¿æ€ç»´å¯¼å›¾å·¥å…·ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ Whimsicalï¼Œå®ƒå¯èƒ½ä¼šå¸¦ç»™ä½ æ„æƒ³ä¸åˆ°çš„æƒŠå–œã€‚å¦‚æœæƒ³è¦ç›´æ¥åœ¨è‡ªå·±çš„ç½‘ç«™ä¸­ç§æœ‰åŒ–éƒ¨ç½²ä¸€ä¸ªæ€ç»´å¯¼å›¾ï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ ä½¿ç”¨ Markmapã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Follow.is ä½¿ç”¨ä½“éªŒåˆ†äº«ï¼šé«˜æ•ˆä¿¡æ¯ç®¡ç†çš„æ™ºèƒ½å·¥å…·</title>
      <link>https://jimmysong.io/blog/follow-is-review/</link>
      <pubDate>Wed, 27 Nov 2024 11:01:16 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/follow-is-review/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘å‡ ä¸ªæœˆï¼Œæˆ‘ä¸€ç›´åœ¨ä½¿ç”¨ä¸€æ¬¾åä¸º &lt;a href=&#34;https://follow.is/&#34; title=&#34;Follow.is&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Follow.is&lt;/a&gt; çš„ä¿¡æ¯èšåˆå·¥å…·ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„æ¢ç´¢ï¼Œæˆ‘å¯¹å®ƒçš„åŠŸèƒ½ã€ä¼˜åŠ¿ä»¥åŠä¸è¶³æœ‰äº†ä¸€äº›è‡ªå·±çš„çœ‹æ³•ã€‚å€Ÿæ­¤åšå®¢ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«æˆ‘çš„ä½¿ç”¨ä½“éªŒï¼Œä¹Ÿå¸Œæœ›èƒ½ä¸ºè€ƒè™‘ä½¿ç”¨è¿™æ¬¾å·¥å…·çš„æœ‹å‹ä»¬æä¾›ä¸€äº›å‚è€ƒã€‚&lt;/p&gt;
&lt;div style=&#34;position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 0; overflow: hidden;
 border-radius: 8px; will-change: transform;&#34;&gt;
  &lt;iframe loading=&#34;lazy&#34; style=&#34;position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;&#34;
  src=&#34;https://www.canva.cn/design/DAGXoxCRttQ/iQTUH_J_27dq_jzUiHlMuw/view?embed&#34; allowfullscreen=&#34;allowfullscreen&#34; allow=&#34;fullscreen&#34;&gt;
  &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-followis&#34;&gt;ä»€ä¹ˆæ˜¯ Follow.isï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Follow.is æ˜¯ä¸€ä¸ªå†…å®¹èšåˆå·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·ä»ä¸åŒæ¥æºé«˜æ•ˆè·å–å’Œç®¡ç†ä¿¡æ¯ã€‚å®ƒæ”¯æŒé€šè¿‡ RSS è®¢é˜…ã€ç›´æ¥è¾“å…¥ç½‘å€ç­‰æ–¹å¼å…³æ³¨å„ç§å†…å®¹æºï¼Œå¹¶åœ¨ç»Ÿä¸€çš„ç•Œé¢ä¸­é›†ä¸­å±•ç¤ºæ›´æ–°å†…å®¹ã€‚è¿™ä¸ªå·¥å…·å¯¹äºä¹ æƒ¯ç”¨ RSS é˜…è¯»å™¨çš„äººæ¥è¯´ï¼Œæ—¢ç†Ÿæ‚‰åˆæ–¹ä¾¿ï¼ŒåŒæ—¶ä¹ŸåŠ å…¥äº†ä¸€äº›æ™ºèƒ½åŒ–çš„åŠŸèƒ½ï¼Œè®©äººçœ¼å‰ä¸€äº®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒFollow.is ç›®å‰è¿˜æ— æ³•ç›´æ¥æ³¨å†Œä½¿ç”¨ï¼Œå¿…é¡»é€šè¿‡ä»–äººé‚€è¯·è·å¾—é‚€è¯·ç æ‰èƒ½åŠ å…¥ã€‚è¿™ç§è®¾è®¡è™½ç„¶å¢åŠ äº†äº›è®¸é—¨æ§›ï¼Œä½†ä¹Ÿä¸ºç”¨æˆ·é—´çš„æ¨èæä¾›äº†ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/follow-is-review/follow-ui.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/follow-is-review/follow-ui.webp&#34; alt=&#34;image&#34; data-caption=&#34;Follow ç•Œé¢&#34;&gt;
  
  
  &lt;figcaption&gt;Follow ç•Œé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä½¿ç”¨ä¸­çš„äº®ç‚¹&#34;&gt;ä½¿ç”¨ä¸­çš„äº®ç‚¹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¹³å°æ”¯æŒ&lt;/strong&gt;
Follow.is æ”¯æŒå¤šä¸ªæ“ä½œç³»ç»Ÿå’Œ Web è®¿é—®ï¼Œç•Œé¢ç®€æ´ç›´è§‚ã€‚è™½ç„¶ç›®å‰å°šæœªæ¨å‡ºæ‰‹æœºåº”ç”¨ï¼Œä½†åœ¨æ¡Œé¢ç«¯çš„ä½“éªŒéå¸¸æµç•…ï¼Œå¯¹äºæˆ‘è¿™ç§ä¹ æƒ¯åœ¨ç”µè„‘ä¸Šé˜…è¯»å†…å®¹çš„äººæ¥è¯´ï¼Œéå¸¸å‹å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Obsidian é›†æˆ&lt;/strong&gt;
æˆ‘å°¤å…¶å–œæ¬¢ Follow.is çš„ä¸€é¡¹ç‰¹æ€§ï¼šä¸ Obsidian çš„é›†æˆã€‚é€šè¿‡è¿™é¡¹åŠŸèƒ½ï¼Œæˆ‘å¯ä»¥ä¸€é”®å°†æ–‡ç« ä¿å­˜ä¸º Markdown æ ¼å¼å¹¶å­˜å‚¨åˆ°æœ¬åœ°çš„ Obsidian ç¬”è®°åº“ä¸­ï¼Œæ–¹ä¾¿åç»­ç¼–è¾‘å’Œæ•´ç†ã€‚è¿™ç§æ— ç¼è¡”æ¥ä¸ºæˆ‘çš„çŸ¥è¯†ç®¡ç†æ•ˆç‡å¸¦æ¥äº†æå¤§çš„æå‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–åŠŸèƒ½&lt;/strong&gt;
Follow.is æä¾›äº†è¯¸å¦‚è‡ªåŠ¨ç¿»è¯‘å’Œè‡ªåŠ¨æ‘˜è¦è¿™æ ·çš„æ™ºèƒ½åŠŸèƒ½ã€‚å¯¹äºéæ¯è¯­å†…å®¹ï¼Œè‡ªåŠ¨ç¿»è¯‘å¯ä»¥è®©æˆ‘å¿«é€Ÿäº†è§£æ–‡ç« å†…å®¹ï¼›è€Œè‡ªåŠ¨æ‘˜è¦åŠŸèƒ½åˆ™å¸®åŠ©æˆ‘åœ¨çŸ­æ—¶é—´å†…æŠ“ä½é•¿ç¯‡æ–‡ç« çš„æ ¸å¿ƒè¦ç‚¹ã€‚è¿™äº›åŠŸèƒ½åœ¨ä¿¡æ¯é‡ç¹å¤šçš„åœºæ™¯ä¸­æ˜¾å¾—å°¤ä¸ºå®ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¤é¢†è®¢é˜…æºå’Œæ‰“èµåŠŸèƒ½&lt;/strong&gt;
Follow.is å…è®¸ç”¨æˆ·è®¤é¢†è‡ªå·±çš„è®¢é˜…æºï¼Œä¸€æ—¦è®¤é¢†æˆåŠŸï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥é€šè¿‡å¹³å°çš„è™šæ‹Ÿä»£å¸ $POWER å¯¹å†…å®¹è¿›è¡Œæ‰“èµã€‚å°½ç®¡æˆ‘è®¤ä¸ºæ‰“èµåŠŸèƒ½çš„å®é™…ä½œç”¨æœ‰é™ï¼Œä½†è¿™ä¸€æœºåˆ¶ä¸ºåˆ›ä½œè€…æä¾›äº†é¢å¤–çš„æ”¶ç›Šæ¥æºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ä½¿ç”¨ä¸­çš„ä¸è¶³&#34;&gt;ä½¿ç”¨ä¸­çš„ä¸è¶³&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¢é˜…æºè·å–çš„å±€é™æ€§&lt;/strong&gt;
Follow.is çš„ä¸€å¤§éš¾ç‚¹åœ¨äºè·å–é«˜è´¨é‡çš„è®¢é˜…æºã€‚è™½ç„¶å®ƒæ”¯æŒ RSSï¼Œä½†å¾ˆå¤šå°é—­çš„å¹³å°ï¼ˆå¦‚å¾®ä¿¡å…¬ä¼—å·ï¼‰å¹¶ä¸æ”¯æŒ RSS è®¢é˜…ï¼Œè¿™ä½¿å¾—å…³æ³¨æ­¤ç±»å†…å®¹å˜å¾—å¤æ‚ã€‚é™¤éè¿™äº›å¹³å°çš„å†…å®¹å‘å¸ƒè€…æ„¿æ„åœ¨å…¶ä»–æ”¯æŒè®¢é˜…çš„åœ°æ–¹åŒæ­¥æ›´æ–°ï¼Œå¦åˆ™ Follow.is åœ¨è¿™æ–¹é¢çš„ä½“éªŒä»æœ‰å¾…æ”¹è¿›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºå°‘è¯„è®ºåŠŸèƒ½&lt;/strong&gt;
Follow.is ä¸æ”¯æŒè¯„è®ºåŠŸèƒ½ï¼Œè¿™ä½¿å¾—ç”¨æˆ·ä¹‹é—´æ— æ³•å°±æŸç¯‡å†…å®¹è¿›è¡Œäº’åŠ¨å’Œè®¨è®ºã€‚è™½ç„¶æˆ‘ä¸ªäººè§‰å¾—è¿™ä¸æ˜¯åˆšéœ€ï¼ˆå› ä¸ºå¾ˆå¤šåœ¨çº¿è¯„è®ºå¹¶æ²¡æœ‰å¤ªå¤šè¥å…»ï¼‰ï¼Œä½†å¦‚æœæœ‰ä¸€ä¸ªé«˜è´¨é‡çš„äº’åŠ¨ç©ºé—´ï¼Œæˆ–è®¸ä¼šæ›´æœ‰è¶£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹æœºç«¯çš„ç¼ºå¤±&lt;/strong&gt;
ç›®å‰ Follow.is å°šæœªæ¨å‡ºæ‰‹æœºåº”ç”¨ï¼Œè¿™å¯¹äºä¹ æƒ¯ç”¨ç¢ç‰‡æ—¶é—´é˜…è¯»çš„ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä¸ªé™åˆ¶ã€‚å°½ç®¡å¯ä»¥é€šè¿‡æ‰‹æœºæµè§ˆå™¨è®¿é—®å…¶ç½‘é¡µç‰ˆï¼Œä½†ä½“éªŒä¸å¦‚ä¸“ç”¨åº”ç”¨ç¨‹åºæ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼ŒFollow.is æ˜¯ä¸€æ¬¾å…¼å…·åŠŸèƒ½æ€§å’Œæ™ºèƒ½åŒ–çš„å†…å®¹èšåˆå·¥å…·ï¼Œé€‚åˆé‚£äº›éœ€è¦é«˜æ•ˆè·å–å’Œç®¡ç†ä¿¡æ¯çš„ç”¨æˆ·ã€‚å®ƒçš„è‡ªåŠ¨åŒ–åŠŸèƒ½ã€ä¸ Obsidian çš„é›†æˆã€ä»¥åŠè®¤é¢†è®¢é˜…æºçš„è®¾è®¡è®©æˆ‘å°è±¡æ·±åˆ»ï¼›åŒæ—¶ï¼Œå®ƒä¹Ÿæœ‰ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚è®¢é˜…æºè·å–çš„é™åˆ¶å’Œç¼ºå°‘æ‰‹æœºåº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ï¼Œè¿™æ¬¾è½¯ä»¶ä»å¤„äºé‚€è¯·åˆ¶ä½¿ç”¨é˜¶æ®µï¼Œå¸Œæœ›æœªæ¥èƒ½è¿›ä¸€æ­¥å¼€æ”¾æ³¨å†Œï¼ŒåŒæ—¶ä¼˜åŒ–ä¸€äº›ç”¨æˆ·åé¦ˆè¾ƒå¤šçš„åŠŸèƒ½ã€‚å¦‚æœä½ ä¹Ÿæœ‰æœºä¼šè¯•ç”¨ï¼Œæˆ‘ç›¸ä¿¡å®ƒä¼šæˆä¸ºä½ ä¿¡æ¯ç®¡ç†çš„ä¸€å¤§åˆ©å™¨ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å¦‚ä½•ä½¿ç”¨é€šä¹‰åƒé—® AI ç”Ÿæˆ PPT å¹¶å‘å¸ƒåˆ°ä¸ªäººç½‘ç«™</title>
      <link>https://jimmysong.io/blog/ai-ppt-to-hugo/</link>
      <pubDate>Tue, 26 Nov 2024 17:06:58 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/ai-ppt-to-hugo/</guid>
      <description>
        
        
        &lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨é€šä¹‰åƒé—® AI å¿«é€Ÿç”Ÿæˆ PPT å¹¶å°†å…¶å‘å¸ƒåˆ°ä¸ªäººç½‘ç«™çš„ç®€å•æµç¨‹ï¼š&lt;/p&gt;
&lt;div style=&#34;position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 0; overflow: hidden;
 border-radius: 8px; will-change: transform;&#34;&gt;
  &lt;iframe loading=&#34;lazy&#34; style=&#34;position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;&#34;
  src=&#34;https://www.canva.cn/design/DAGXkFFIYXY/d7XYxuZkK1Mcpz3Qrb2bfw/view?embed&#34; allowfullscreen=&#34;allowfullscreen&#34; allow=&#34;fullscreen&#34;&gt;
  &lt;/iframe&gt;
&lt;/div&gt;

&lt;p&gt;æ³¨ï¼šPPT å†…å®¹ç”±é€šä¹‰ AI ç”Ÿæˆï¼Œè®¿é—® &lt;a href=&#34;https://tongyi.aliyun.com/aippt&#34; title=&#34;tongyi.ai æ™ºèƒ½&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tongyi.ai æ™ºèƒ½&lt;/a&gt;ç”Ÿæˆæ›´å¤š PPT&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨é€šä¹‰åƒé—®ç”Ÿæˆ-ppt&#34;&gt;ä½¿ç”¨é€šä¹‰åƒé—®ç”Ÿæˆ PPT&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥å…·åœ°å€&lt;/strong&gt;ï¼š&lt;a href=&#34;https://tongyi.aliyun.com/aippt&#34; title=&#34;é€šä¹‰åƒé—® AI PPT&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€šä¹‰åƒé—® AI PPT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç™»å½•æ–¹å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨æ·˜å®è´¦å·å’Œæ‰‹æœºå·éªŒè¯ç ç™»å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½äº®ç‚¹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»é¢˜ç”Ÿæˆ&lt;/strong&gt;ï¼šè¾“å…¥ä¸€ä¸ªä¸»é¢˜ï¼ŒAI å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ PPT å†…å®¹ï¼ˆé€‚åˆç®€å•åœºæ™¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿æ–‡ç”Ÿæˆ&lt;/strong&gt;ï¼šæ”¯æŒæœ€å¤š &lt;strong&gt;10 ä¸‡å­—&lt;/strong&gt;çš„æ–‡æœ¬è§£æï¼Œé€‚åˆå°†æŠ¥å‘Šæˆ–åšå®¢ç”Ÿæˆ PPTã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ¿ä¸ªæ€§åŒ–&lt;/strong&gt;ï¼šæ”¯æŒé€‰æ‹©å¤šç§æ¨¡æ¿ï¼Œç”Ÿæˆçš„ PPT å¯ä»¥å¯¼å‡ºä¸º &lt;strong&gt;pptx æ ¼å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ä½“éªŒ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æˆ‘å°è¯•ç”¨è‡ªå·±çš„åšå®¢ç”Ÿæˆäº†ä¸€ä»½ PPTï¼ŒAI è‡ªåŠ¨æ•´ç†äº†ç« èŠ‚å’Œé…å›¾ï¼Œæ•ˆæœè¿˜ä¸é”™ï¼Œæ¨¡æ¿é€‰æ‹©æå‡äº†ä¸ªæ€§åŒ–å±•ç¤ºçš„æ•ˆæœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯¼å…¥-canva-è¿›è¡Œè°ƒæ•´&#34;&gt;å¯¼å…¥ Canva è¿›è¡Œè°ƒæ•´&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥å…·åœ°å€&lt;/strong&gt;ï¼š&lt;a href=&#34;https://www.canva.cn/&#34; title=&#34;Canva.cn&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Canva.cn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´æ–¹æ³•&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;å°†ä»é€šä¹‰åƒé—®ç”Ÿæˆçš„ &lt;strong&gt;pptx æ–‡ä»¶&lt;/strong&gt;å¯¼å…¥ Canvaã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®éœ€è¦è°ƒæ•´ &lt;strong&gt;æ’ç‰ˆå¸ƒå±€&lt;/strong&gt;ï¼Œè¡¥å……å’Œè°ƒæ•´ä¸€äº›å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;å®Œæˆè°ƒæ•´åï¼Œåœ¨ Canva ä¸­é€‰æ‹©å¯¼å‡ºä¸º &lt;strong&gt;åµŒå…¥å¼ç½‘é¡µ&lt;/strong&gt;ï¼Œç”Ÿæˆä¸€ä¸ªå¯åˆ†äº«çš„é“¾æ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å°†-ppt-å‘å¸ƒåˆ°ä¸ªäººç½‘ç«™&#34;&gt;å°† PPT å‘å¸ƒåˆ°ä¸ªäººç½‘ç«™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥å…·&lt;/strong&gt;ï¼šHugo&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œæ­¥éª¤&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Hugo åšå®¢ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ Shortcode åµŒå…¥ Canva çš„åˆ†äº«é“¾æ¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;slide&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;https://www.canva.cn/design/DAGXjo0P9w0/view&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿å­˜åéƒ¨ç½²ç½‘ç«™ï¼Œå³å¯åœ¨åšå®¢ä¸­ç›´æ¥å±•ç¤º PPTã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä½¿ç”¨åœºæ™¯&#34;&gt;ä½¿ç”¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;åšå®¢åµŒå…¥ PPT çš„é€‚ç”¨åœºæ™¯å¯ä»¥æ¶µç›–ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æç‚¼é•¿å†…å®¹çš„æ¢—æ¦‚ï¼›&lt;/li&gt;
&lt;li&gt;ç®€åŒ–å¤šå›¾å†…å®¹çš„å­˜å‚¨ä¸æ’ç‰ˆï¼›&lt;/li&gt;
&lt;li&gt;å±•ç¤ºæ•°æ®ä¸å›¾è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;æ•™ç¨‹ä¸æ¼”ç¤ºæ–‡æ¡£ï¼›&lt;/li&gt;
&lt;li&gt;æ€»ç»“ä¸å¤ç›˜ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹å¤–åˆ†äº«å’Œæ¨å¹¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ &lt;strong&gt;é€šä¹‰åƒé—® AI PPT&lt;/strong&gt; å’Œ &lt;strong&gt;Canva&lt;/strong&gt; çš„ç»“åˆï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆå¹¶å‘å¸ƒé«˜è´¨é‡çš„ PPT åˆ°ä¸ªäººç½‘ç«™ã€‚è¿™ç§æ–¹æ³•å°¤å…¶é€‚åˆå°†åšå®¢å†…å®¹å¿«é€Ÿè½¬åŒ–ä¸ºè§†è§‰åŒ–æ¼”ç¤ºï¼Œæ—¢çœæ—¶åˆé«˜æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéœ€è¦æ›´å¤šæ ·å¼å’Œäº¤äº’ï¼Œå¯ä»¥è¿›ä¸€æ­¥è‡ªå®šä¹‰ Canva çš„æ¨¡æ¿ï¼Œæ»¡è¶³æ›´é«˜çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ–°ä¸€ä»£ç»ˆç«¯å·¥å…· Warpï¼šé‡æ–°å®šä¹‰å‘½ä»¤è¡Œä½“éªŒ</title>
      <link>https://jimmysong.io/blog/warp-modern-terminal-tool/</link>
      <pubDate>Mon, 25 Nov 2024 11:12:45 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/warp-modern-terminal-tool/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘ï¼Œæˆ‘åœ¨å°è¯•å„ç§ç»ˆç«¯å·¥å…·æ—¶å‘ç°äº†ä¸€ä¸ªä»¤äººè€³ç›®ä¸€æ–°çš„äº§å“â€”â€”&lt;strong&gt;&lt;a href=&#34;https://www.warp.dev/&#34; title=&#34;Warp&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Warp&lt;/a&gt;&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„ç°ä»£ç»ˆç«¯å·¥å…·ï¼Œå®ƒä¸ä»…é¢ è¦†äº†æˆ‘ä»¬å¯¹ä¼ ç»Ÿå‘½ä»¤è¡Œå·¥å…·çš„è®¤çŸ¥ï¼Œè¿˜ä»¥æ™ºèƒ½åŒ–çš„äº¤äº’ä½“éªŒæ˜¾è‘—æå‡äº†ç”Ÿäº§åŠ›ã€‚æœ¬æ–‡å°†ä»‹ç» Warp çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶å¯¹æ¯”ä¼ ç»Ÿå·¥å…·ï¼ˆå¦‚ iTermï¼‰ï¼Œæ¢è®¨å®ƒä¸ºä½•å¯èƒ½æˆä¸ºç»ˆç«¯å·¥å…·çš„æ–°æ ‡æ†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-warp&#34;&gt;ä»€ä¹ˆæ˜¯ Warpï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Warp æ˜¯ä¸€æ¬¾ç°ä»£åŒ–ç»ˆç«¯å·¥å…·ï¼Œç”± Rust å¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡æ›´ç›´è§‚ã€æ›´é«˜æ•ˆçš„äº¤äº’è®¾è®¡é‡æ–°å®šä¹‰ç»ˆç«¯çš„ä½¿ç”¨ä½“éªŒã€‚å®ƒä¸ä¼ ç»Ÿçš„ç»ˆç«¯å·¥å…·ï¼ˆå¦‚ iTerm2 æˆ– macOS çš„é»˜è®¤ç»ˆç«¯ï¼‰ç›¸æ¯”ï¼ŒåŠ å…¥äº†è¯¸å¤šæ™ºèƒ½åŒ–å’Œç°ä»£åŒ–çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/warp-modern-terminal-tool/warp.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/warp-modern-terminal-tool/warp.webp&#34; alt=&#34;image&#34; data-caption=&#34;Warp å‘½ä»¤è¡Œç•Œé¢&#34;&gt;
  
  
  &lt;figcaption&gt;Warp å‘½ä»¤è¡Œç•Œé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;Warp çš„è®¾è®¡å›´ç»•ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç†å¿µå±•å¼€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½åŒ–ï¼š&lt;/strong&gt; å†…ç½® Warp AIï¼Œæ”¯æŒé€šè¿‡è‡ªç„¶è¯­è¨€ä¸ç»ˆç«¯äº¤äº’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆåŒ–ï¼š&lt;/strong&gt; é‡‡ç”¨å—çŠ¶ç»“æ„ç®¡ç†å‘½ä»¤å’Œè¾“å‡ºï¼Œä¾¿äºå¤åˆ¶ã€åˆ†äº«å’Œå›æº¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åä½œæ€§ï¼š&lt;/strong&gt; å€ŸåŠ© Warp Drive æ”¯æŒå›¢é˜Ÿå…±äº«å·¥ä½œæµå’Œè„šæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯å®šåˆ¶æ€§ï¼š&lt;/strong&gt; æä¾›ç°ä»£ç¼–è¾‘å™¨åŠŸèƒ½ï¼Œå…è®¸æ·±åº¦å®šåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;warp-çš„æ ¸å¿ƒåŠŸèƒ½&#34;&gt;Warp çš„æ ¸å¿ƒåŠŸèƒ½&lt;/h2&gt;
&lt;h3 id=&#34;1-å—blockç»“æ„&#34;&gt;1. å—ï¼ˆBlockï¼‰ç»“æ„&lt;/h3&gt;
&lt;p&gt;Warp å°†æ¯æ¡å‘½ä»¤åŠå…¶è¾“å‡ºåˆ’åˆ†ä¸ºç‹¬ç«‹çš„å—ã€‚æ¯ä¸ªå—å¯ä»¥å•ç‹¬æ“ä½œï¼Œä¾‹å¦‚å¤åˆ¶ã€åˆ é™¤æˆ–åˆ†äº«ï¼Œè¿™ä½¿å¾—ç®¡ç†å’Œå›æº¯å‘½ä»¤å˜å¾—å¼‚å¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æ¯”ä¼ ç»Ÿç»ˆç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ iTerm ä¸­ï¼Œæ‰€æœ‰å‘½ä»¤å’Œè¾“å‡ºæ··æ‚åœ¨ä¸€èµ·ï¼Œå›æº¯å†å²å‘½ä»¤æ—¶å¾€å¾€éœ€è¦æ‰‹åŠ¨æ»šåŠ¨æŸ¥æ‰¾ã€‚&lt;/li&gt;
&lt;li&gt;Warp çš„å—å¼è®¾è®¡å¯ä»¥ä¸€é”®é€‰å®šæŸä¸ªå‘½ä»¤çš„æ‰€æœ‰è¾“å‡ºï¼Œæå¤§åœ°æé«˜äº†æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-warp-driveå·¥ä½œæµå’Œåä½œ&#34;&gt;2. Warp Driveï¼šå·¥ä½œæµå’Œåä½œ&lt;/h3&gt;
&lt;p&gt;Warp Drive æ˜¯ Warp æä¾›çš„å›¢é˜Ÿåä½œå·¥å…·ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ªäººå·¥ä½œåŒºï¼š&lt;/strong&gt; ä¿å­˜å¸¸ç”¨å‘½ä»¤å’Œå·¥ä½œæµï¼Œéšæ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›¢é˜Ÿå…±äº«ï¼š&lt;/strong&gt; æ”¯æŒå°†äº¤äº’å¼ç¬”è®°æœ¬æˆ–å¤æ‚è„šæœ¬åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜ï¼Œæ–¹ä¾¿çŸ¥è¯†ä¼ é€’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶åŒæ­¥ï¼š&lt;/strong&gt; å›¢é˜Ÿçš„æ‰€æœ‰å·¥ä½œå†…å®¹åœ¨æ›´æ–°åå¯ç«‹å³åŒæ­¥ï¼Œç¡®ä¿å¤§å®¶å§‹ç»ˆä½¿ç”¨æœ€æ–°çš„é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹æ¯”ä¼ ç»Ÿç»ˆç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iTerm æ›´ä¸“æ³¨äºä¸ªäººä½¿ç”¨ï¼Œåä½œåŠŸèƒ½å‡ ä¹ä¸ºé›¶ã€‚&lt;/li&gt;
&lt;li&gt;Warp Drive å°†ç»ˆç«¯å·¥å…·æ‰©å±•åˆ°å›¢é˜Ÿåœºæ™¯ï¼Œå¼¥è¡¥äº†ä¼ ç»Ÿå·¥å…·åœ¨è¿™ä¸€ç‚¹ä¸Šçš„ä¸è¶³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-agent-æ¨¡å¼è‡ªç„¶è¯­è¨€äº¤äº’&#34;&gt;3. Agent æ¨¡å¼ï¼šè‡ªç„¶è¯­è¨€äº¤äº’&lt;/h3&gt;
&lt;p&gt;Warp çš„ Agent æ¨¡å¼è®©ä½ å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å‘ç»ˆç«¯å‘å‡ºæŒ‡ä»¤ï¼ŒWarp AI ä¼šå°†å…¶è§£æä¸ºå…·ä½“çš„å‘½ä»¤å¹¶æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¾“å…¥â€œåˆ›å»ºä¸€ä¸ª Python è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£… requests åº“â€ï¼ŒWarp ä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œç›¸å…³å‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹æ¯”ä¼ ç»Ÿç»ˆç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iTerm æˆ–å…¶ä»–å·¥å…·éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥å‘½ä»¤ï¼Œä¾èµ–äºç”¨æˆ·å¯¹å‘½ä»¤è¯­æ³•çš„ç†Ÿæ‚‰ç¨‹åº¦ã€‚&lt;/li&gt;
&lt;li&gt;Warp çš„ Agent æ¨¡å¼æ˜¾è‘—é™ä½äº†å‘½ä»¤è¡Œçš„å­¦ä¹ é—¨æ§›ï¼Œå¹¶èƒ½åŠ é€Ÿæ—¥å¸¸ä»»åŠ¡çš„æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-ç°ä»£åŒ–ç¼–è¾‘å™¨&#34;&gt;4. ç°ä»£åŒ–ç¼–è¾‘å™¨&lt;/h3&gt;
&lt;p&gt;Warp æä¾›ç±»ä¼¼äº IDE çš„å‘½ä»¤ç¼–è¾‘ä½“éªŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒå¤šå…‰æ ‡æ“ä½œã€è¯­æ³•é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼Œè¾“å…¥å‘½ä»¤æ—¶ä¼šæ ¹æ®å†å²è®°å½•æˆ–ç¯å¢ƒæ™ºèƒ½æç¤ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹æ¯”ä¼ ç»Ÿç»ˆç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iTerm ç­‰å·¥å…·çš„è¾“å…¥æ¡†ä»…æ”¯æŒæœ€åŸºæœ¬çš„æ–‡æœ¬è¾“å…¥ï¼Œæ²¡æœ‰ç°ä»£ç¼–è¾‘å™¨çš„æ™ºèƒ½åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;Warp çš„ç¼–è¾‘åŠŸèƒ½å¤§å¹…æå‡äº†ç”¨æˆ·è¾“å…¥å‘½ä»¤çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-å†…ç½®-warp-ai&#34;&gt;5. å†…ç½® Warp AI&lt;/h3&gt;
&lt;p&gt;Warp é›†æˆäº† AI åŠŸèƒ½ï¼Œå¯ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½å»ºè®®ï¼š&lt;/strong&gt; æ ¹æ®ä¸Šä¸‹æ–‡é¢„æµ‹ä½ å¯èƒ½éœ€è¦çš„å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæˆ‘çº é”™ï¼š&lt;/strong&gt; å¦‚æœè¾“å…¥çš„å‘½ä»¤æœ‰é—®é¢˜ï¼ŒWarp AI èƒ½æ£€æµ‹å¹¶å»ºè®®ä¿®æ­£æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­¦ä¹ ç¯å¢ƒï¼š&lt;/strong&gt; Warp AI å¯å­¦ä¹ å·¥å…·æˆ–åº“çš„ &lt;code&gt;--help&lt;/code&gt; è¾“å‡ºï¼Œå¸®åŠ©ç”¨æˆ·ç”Ÿæˆæ­£ç¡®çš„å‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹æ¯”ä¼ ç»Ÿç»ˆç«¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iTerm ä¸å…·å¤‡ä»»ä½•æ™ºèƒ½åŒ–åŠŸèƒ½ï¼Œè€Œ Warp çš„ AI æå‡äº†ç»ˆç«¯å·¥å…·çš„å¯ç”¨æ€§ï¼Œå°¤å…¶å¯¹åˆå­¦è€…éå¸¸å‹å¥½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸ä¼ ç»Ÿå·¥å…·å¦‚-itermçš„å¯¹æ¯”&#34;&gt;ä¸ä¼ ç»Ÿå·¥å…·ï¼ˆå¦‚ iTermï¼‰çš„å¯¹æ¯”&lt;/h2&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
          &lt;th&gt;Warp&lt;/th&gt;
          &lt;th&gt;iTerm2&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å‘½ä»¤å—ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å—çŠ¶ç»“æ„ï¼Œç‹¬ç«‹ç®¡ç†å‘½ä»¤å’Œè¾“å‡º&lt;/td&gt;
          &lt;td&gt;æ‰€æœ‰å†…å®¹æ··æ‚åœ¨ä¸€å¤„ï¼Œéœ€è¦æ»šåŠ¨æŸ¥æ‰¾&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å›¢é˜Ÿåä½œ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ Warp Drive åˆ†äº«å’ŒåŒæ­¥&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è‡ªç„¶è¯­è¨€äº¤äº’&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Agent æ¨¡å¼ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŒ‡ä»¤&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç¼–è¾‘å™¨åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;è¯­æ³•é«˜äº®ã€å¤šå…‰æ ‡ã€æ™ºèƒ½è¡¥å…¨&lt;/td&gt;
          &lt;td&gt;åŸºæœ¬çš„æ–‡æœ¬è¾“å…¥&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ™ºèƒ½åŒ–æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Warp AI æä¾›å»ºè®®ã€è‡ªæˆ‘çº é”™å’Œå­¦ä¹ &lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;GPU åŠ é€Ÿã€æµç•…æ¸²æŸ“&lt;/td&gt;
          &lt;td&gt;è‰¯å¥½&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;è·¨å¹³å°æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ macOS å’Œ Linuxï¼ˆWindowså¼€å‘ä¸­ï¼‰&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ macOSã€Linuxã€Windows&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-warp&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© Warpï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æ˜¯ä¸€åå¼€å‘è€…æˆ–ç»ˆç«¯é‡åº¦ç”¨æˆ·ï¼ŒWarp æä¾›äº†è®¸å¤šæ— æ³•å¿½è§†çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…è´¹&lt;/strong&gt;ï¼šå¯¹äºä¸ªäººç”¨æˆ·ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°&lt;/strong&gt;ï¼šæ”¯æŒ macOSã€Linuxï¼ŒWindows ç‰ˆæœ¬å³å°†æ¨å‡ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆï¼š&lt;/strong&gt; å—å¼ç®¡ç†å’Œç°ä»£åŒ–ç¼–è¾‘å™¨åŠŸèƒ½å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½ï¼š&lt;/strong&gt; AI æ”¯æŒè®©å¤æ‚å‘½ä»¤å˜å¾—ç®€å•ï¼Œé™ä½äº†ä½¿ç”¨é—¨æ§›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åä½œï¼š&lt;/strong&gt; Warp Drive ä¸ºå›¢é˜Ÿå…±äº«çŸ¥è¯†å’Œå·¥ä½œæµæä¾›äº†æå¤§ä¾¿åˆ©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Warp æ˜¯ä¸€æ¬¾ä»¤äººå…´å¥‹çš„ç»ˆç«¯å·¥å…·ï¼Œå®ƒä¸ä»…æä¾›äº†æ›´ç°ä»£ã€æ›´æ™ºèƒ½çš„ç”¨æˆ·ä½“éªŒï¼Œè¿˜å¼¥è¡¥äº†ä¼ ç»Ÿå·¥å…·çš„å¤šé¡¹ä¸è¶³ã€‚å¯¹äºè¿½æ±‚æ•ˆç‡å’Œæ™ºèƒ½åŒ–çš„å¼€å‘è€…æ¥è¯´ï¼ŒWarp æ˜¯å€¼å¾—ä¸€è¯•çš„é€‰æ‹©ã€‚å¦‚æœä½ è¿˜åœ¨ä½¿ç”¨ iTermï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ Warpï¼Œå®ƒå¯èƒ½ä¼šå½»åº•æ”¹å˜ä½ å¯¹ç»ˆç«¯çš„è®¤çŸ¥ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä¸ºä»€ä¹ˆæˆ‘å°†ç¬”è®°ä» Notion è¿ç§»åˆ° Obsidianï¼Ÿ</title>
      <link>https://jimmysong.io/blog/typora-notion-to-obsidian/</link>
      <pubDate>Thu, 21 Nov 2024 14:43:02 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/typora-notion-to-obsidian/</guid>
      <description>
        
        
        &lt;p&gt;å¤šå¹´æ¥ï¼Œæˆ‘å°è¯•è¿‡å¤šæ¬¾ç¬”è®°å’Œ Markdown ç¼–è¾‘å·¥å…·ï¼ŒåŒ…æ‹¬ Typoraã€Notion å’Œ Obsidianã€‚æ¯ä¸€æ¬¾å·¥å…·éƒ½æœ‰å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œä½†æœ€ç»ˆæˆ‘å†³å®šå°†ç¬”è®°è¿ç§»åˆ° Obsidianã€‚è¿™ç¯‡æ–‡ç« å°†è¯¦ç»†è®°å½•æˆ‘çš„æ€è€ƒè¿‡ç¨‹ã€å¯¹æ¯”åˆ†æï¼Œä»¥åŠè¿ç§»çš„åŸå› ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/typora-notion-to-obsidian/obsidian-app-ui.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/typora-notion-to-obsidian/obsidian-app-ui.webp&#34; alt=&#34;image&#34; data-caption=&#34;Obsidian ç¬”è®°ç¼–è¾‘é¡µé¢&#34;&gt;
  
  
  &lt;figcaption&gt;Obsidian ç¬”è®°ç¼–è¾‘é¡µé¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ—©æœŸçš„é€‰æ‹©ä»-typora-åˆ°-notion&#34;&gt;æ—©æœŸçš„é€‰æ‹©ï¼šä» Typora åˆ° Notion&lt;/h2&gt;
&lt;p&gt;æœ€åˆï¼Œæˆ‘ä½¿ç”¨ Typora ä½œä¸ºä¸»è¦çš„ Markdown ç¼–è¾‘å·¥å…·ã€‚Typora ç®€æ´ä¼˜é›…ï¼Œæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼å¯¼å‡ºï¼Œæ˜¯ä¸€æ¬¾æå…·å¸å¼•åŠ›çš„è½¯ä»¶ã€‚ç„¶è€Œï¼Œéšç€æˆ‘ç®¡ç†çš„æ–‡æ¡£å’Œç¬”è®°æ—¥ç›Šå¢å¤šï¼ŒTypora çš„ç¼ºç‚¹ä¹Ÿé€æ¸æš´éœ²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºä¹æ–‡ä»¶ç®¡ç†åŠŸèƒ½&lt;/strong&gt;ï¼šTypora æ˜¯ä¸€ä¸ªçº¯ç¼–è¾‘å™¨ï¼Œæ²¡æœ‰ç¬”è®°ç»„ç»‡æˆ–ç®¡ç†çš„èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºä¹æ’ä»¶æ‰©å±•&lt;/strong&gt;ï¼šTypora å°é—­çš„ç”Ÿæ€é™åˆ¶äº†æˆ‘çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¶è´¹&lt;/strong&gt;ï¼šä½œä¸ºå•†ä¸šè½¯ä»¶ï¼ŒTypora éœ€è¦è´­ä¹°æˆæƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å‘ç° Typora çš„å±€é™æ€§åï¼Œæˆ‘è½¬è€Œä½¿ç”¨ Notionã€‚Notion æä¾›äº†å¼ºå¤§çš„ç¬”è®°ç®¡ç†èƒ½åŠ›ï¼Œå…¶æ•°æ®åº“åŠŸèƒ½è®©æˆ‘èƒ½å¤Ÿè½»æ¾å½’æ¡£å’Œåˆ†ç±»æ–‡æ¡£ï¼Œå¹¶æ”¯æŒè·¨å¹³å°åä½œã€‚è¿™ä¸€é˜¶æ®µï¼Œæˆ‘è¿˜åˆ©ç”¨ Notion æ„å»ºäº†å®¶åº­è´¦æœ¬å’ŒçŸ¥è¯†åº“ã€‚ç„¶è€Œï¼Œéšç€æ—¶é—´æ¨ç§»ï¼ŒNotion çš„ä¸€äº›é—®é¢˜è®©æˆ‘é€æ¸æ„Ÿåˆ°ä¸æ»¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½“ç§¯åºå¤§&lt;/strong&gt;ï¼šåœ¨æ‰‹æœºç«¯ï¼ŒNotion App çš„å®‰è£…åŒ…æ¥è¿‘ 1GBï¼Œå ç”¨å­˜å‚¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¼å‡ºå…¼å®¹æ€§å·®&lt;/strong&gt;ï¼šå¯¼å‡ºçš„ Markdown æ–‡ä»¶ä¸ Hugo å’Œ GitHub Pages ä¸å®Œå…¨å…¼å®¹ï¼Œæ ¼å¼è°ƒæ•´éœ€è¦é¢å¤–å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨çº¿ä¾èµ–&lt;/strong&gt;ï¼šNotion å¿…é¡»è”ç½‘ä½¿ç”¨ï¼Œä¸”éœ€è¦æ³¨å†Œè´¦å·ï¼Œè¿™å¢åŠ äº†ä½¿ç”¨é—¨æ§›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»˜è´¹è®¢é˜…é—®é¢˜&lt;/strong&gt;ï¼šè™½ç„¶è®¢é˜…äº†ä¸€å¹´çš„ Notion AIï¼Œä½†æ•ˆæœä¸å¦‚ ChatGPTï¼ŒåŠŸèƒ½å†—ä½™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;obsidian-çš„é‡æ–°å‘ç°&#34;&gt;Obsidian çš„é‡æ–°å‘ç°&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘é˜…è¯»äº† &lt;a href=&#34;https://atbug.com/enhance-obsidian-experience-plugins-tips/&#34; title=&#34;å…¨é¢æå‡ Obsidian ä½“éªŒï¼šæ’ä»¶ä¸æ—¥å¸¸æŠ€å·§åˆ†äº«&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…¨é¢æå‡ Obsidian ä½“éªŒï¼šæ’ä»¶ä¸æ—¥å¸¸æŠ€å·§åˆ†äº«&lt;/a&gt;ï¼Œè®©æˆ‘é‡æ–°å®¡è§† Obsidian çš„æ½œåŠ›ã€‚æ—©å¹´è¯•ç”¨æ—¶ï¼Œæˆ‘è§‰å¾— Obsidian ç•Œé¢â€œä¸‘é™‹â€ï¼Œæ–‡ä»¶ç»„ç»‡æ–¹å¼ä¹Ÿä¸å¤Ÿç›´è§‚ã€‚ç„¶è€Œï¼Œç°åœ¨çš„ Obsidian å·²ä»Šéæ˜”æ¯”ï¼Œä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ã€çµæ´»çš„æ–‡ä»¶ç®¡ç†èƒ½åŠ›ï¼Œä»¥åŠå¯¹å¼€æºç¤¾åŒºçš„æ”¯æŒï¼Œè®©æˆ‘å†æ¬¡å°è¯•å¹¶æœ€ç»ˆé€‰æ‹©äº†å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;è½¯ä»¶å¯¹æ¯”åˆ†æ&#34;&gt;è½¯ä»¶å¯¹æ¯”åˆ†æ&lt;/h2&gt;
&lt;p&gt;åœ¨è¿ç§»åˆ° Obsidian ä¹‹å‰ï¼Œæˆ‘ä»”ç»†å¯¹æ¯”äº† Typoraã€Notion å’Œ Obsidian çš„ä¼˜ç¼ºç‚¹ã€‚ä»¥ä¸‹æ˜¯å¯¹æ¯”è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç‰¹æ€§&lt;/th&gt;
          &lt;th&gt;Typora&lt;/th&gt;
          &lt;th&gt;Notion&lt;/th&gt;
          &lt;th&gt;Obsidian&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ä»·æ ¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å•†ä¸šè½¯ä»¶ï¼Œéœ€è¦è´­ä¹°&lt;/td&gt;
          &lt;td&gt;ä¸ªäººç”¨æˆ·å…è´¹ï¼ŒAI åŠŸèƒ½ $10/æœˆ&lt;/td&gt;
          &lt;td&gt;å…è´¹ï¼Œå¼€æºè½¯ä»¶&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ç•Œé¢ç®€æ´ï¼Œå¯¼å‡ºå¤šç§æ–‡æ¡£æ ¼å¼&lt;/td&gt;
          &lt;td&gt;åŠŸèƒ½å¼ºå¤§ï¼Œé€‚åˆåä½œï¼Œæ•°æ®åº“åŠŸèƒ½ä¼˜ç§€&lt;/td&gt;
          &lt;td&gt;ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œçµæ´»çš„æ–‡æ¡£ç®¡ç†ï¼Œå¼€æºé€æ˜&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ— æ–‡ä»¶ç®¡ç†ï¼Œæ— æ’ä»¶æ”¯æŒ&lt;/td&gt;
          &lt;td&gt;åœ¨çº¿ä¾èµ–ï¼Œä¸æ”¯æŒæœ¬åœ°ç®¡ç†ï¼Œæ–‡ä»¶å¯¼å‡ºé—®é¢˜&lt;/td&gt;
          &lt;td&gt;æ’ä»¶åŠŸèƒ½å¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ï¼Œå…¥é—¨ç¨é™¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å•æ–‡æ¡£ç¼–è¾‘&lt;/td&gt;
          &lt;td&gt;çŸ¥è¯†åº“ç®¡ç†ä¸åä½œ&lt;/td&gt;
          &lt;td&gt;é«˜åº¦å®šåˆ¶åŒ–çš„æœ¬åœ°çŸ¥è¯†ç®¡ç†å’Œ Markdown ç¼–è¾‘&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-obsidian&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© Obsidianï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ Typora å’Œ Notion åï¼Œæˆ‘å‘ç°è‡ªå·±çš„éœ€æ±‚æ›´å€¾å‘äº Obsidian æ‰€æä¾›çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ç»„ç»‡èƒ½åŠ›&lt;/strong&gt;ï¼šObsidian æ”¯æŒåœ¨ç»Ÿä¸€ç•Œé¢å†…ç»„ç»‡ Markdown æ–‡æ¡£ï¼Œå¹¶åœ¨ç§»åŠ¨æ–‡ä»¶æ—¶è‡ªåŠ¨æ›´æ–°å¼•ç”¨é“¾æ¥ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†ç®¡ç†å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’ä»¶ç”Ÿæ€ä¸°å¯Œ&lt;/strong&gt;ï¼šObsidian æ‹¥æœ‰å¤§é‡æ’ä»¶ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚ï¼Œæ¯”å¦‚ç»˜å›¾ï¼ˆExcalidrawï¼‰ã€ç¬”è®°æ¸…ç†ï¼ˆClear Unused Imagesï¼‰ã€æ–‡ä»¶ç»Ÿè®¡ï¼ˆVault Full Statisticsï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€æºä¸æœ¬åœ°åŒ–&lt;/strong&gt;ï¼šæ‰€æœ‰æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ° vault ä¸­ï¼Œä¸ä¾èµ–åœ¨çº¿æœåŠ¡ï¼Œæ”¯æŒè¿ç§»å’Œå¤‡ä»½ï¼ŒåŒæ—¶å¯ä»¥å®Œå…¨æŒæ§æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°åŒæ­¥&lt;/strong&gt;ï¼šé€šè¿‡ iCloudï¼Œæˆ‘å¯ä»¥åœ¨ iPhone å’Œ MacBook ä¸Šæ— ç¼åŒæ­¥ç¬”è®°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;obsidian-çš„ä¸è¶³ä¸è§£å†³æ–¹æ³•&#34;&gt;Obsidian çš„ä¸è¶³ä¸è§£å†³æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;å°½ç®¡ Obsidian éå¸¸é€‚åˆæˆ‘çš„éœ€æ±‚ï¼Œä½†ä»å­˜åœ¨ä¸€äº›å°é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬”è®°å†…éƒ¨æœç´¢&lt;/strong&gt;ï¼šç›®å‰æ²¡æœ‰åŒºåˆ†å¤§å°å†™çš„é€‰é¡¹ï¼Œè¿™å¯¹æœç´¢ç²¾ç¡®æ€§ç•¥æœ‰å½±å“ï¼Œå¯ä»¥é€šè¿‡å…¶ä»–ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶åæ‰§è¡Œç¬”è®°å†…æœç´¢å’Œæ›¿æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘å­˜å‚¨å¯¹æ¥&lt;/strong&gt;ï¼šå…è´¹ç‰ˆä¸æ”¯æŒç›´æ¥é›†æˆäº‘å­˜å‚¨ï¼Œä½†é€šè¿‡ iCloud æ‰‹åŠ¨åŒæ­¥å·²ç»è¶³å¤Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mermaid å›¾è¡¨æ”¯æŒ&lt;/strong&gt;ï¼šæ¸²æŸ“çš„å›¾è¡¨å¯èƒ½è¶…å‡ºé¡µé¢å®½åº¦ï¼Œå®‰è£… Diagram Popup å¯ä»¥è§£å†³ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æˆ‘çš„-obsidian-æ’ä»¶æ¨è&#34;&gt;æˆ‘çš„ Obsidian æ’ä»¶æ¨è&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘æœ€å¸¸ç”¨çš„æ’ä»¶æ¸…å•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Excalidraw&lt;/strong&gt;ï¼šç»˜åˆ¶è‰å›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linter&lt;/strong&gt;ï¼šä¼˜åŒ– YAML metadataã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dataview&lt;/strong&gt;ï¼šæ•°æ®è§†å›¾å±•ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Templater&lt;/strong&gt;ï¼šè‡ªåŠ¨åŒ–æ¨¡æ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced Tables&lt;/strong&gt;ï¼šè¡¨æ ¼å¢å¼ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡è¿™äº›æ’ä»¶ï¼Œæˆ‘å°† Obsidian æ‰“é€ æˆäº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç¬”è®°å·¥å…·ï¼Œæ—¢æ»¡è¶³äº†ä¸ªäººçŸ¥è¯†ç®¡ç†éœ€æ±‚ï¼Œåˆèƒ½å¤Ÿæ”¯æŒåšå®¢å†™ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä» Typora åˆ° Notionï¼Œå†åˆ°æœ€ç»ˆçš„ Obsidianï¼Œæ˜¯æˆ‘å¯¹ç¬”è®°å·¥å…·éœ€æ±‚ä¸æ–­å˜åŒ–çš„ç»“æœã€‚Typora çš„ç®€æ´ã€Notion çš„å¼ºå¤§éƒ½å¸å¼•è¿‡æˆ‘ï¼Œä½† Obsidian å¼€æºã€å¯æ‰©å±•ã€æœ¬åœ°åŒ–çš„ç‰¹æ€§ï¼ŒçœŸæ­£è®©æˆ‘æ„Ÿå—åˆ°è‡ªç”±å’Œé«˜æ•ˆã€‚è™½ç„¶ä½¿ç”¨ä¸­ä»æœ‰ä¸€äº›é—®é¢˜ï¼Œä½†é€šè¿‡æ’ä»¶å’Œç¤¾åŒºæ”¯æŒï¼Œæˆ‘å·²ç»å®Œå…¨é€‚åº”äº† Obsidian çš„ç”Ÿæ€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹Ÿåœ¨å¯»æ‰¾ä¸€æ¬¾å¼ºå¤§çš„ Markdown ç¬”è®°å·¥å…·ï¼Œä¸å¦¨è¯•è¯• Obsidianã€‚æˆ–è®¸å®ƒä¹Ÿèƒ½æˆä¸ºä½ çš„æœ€ç»ˆé€‰æ‹©ï¼&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio Ambient æ¨¡å¼ä¸­çš„é€æ˜æµé‡æ‹¦æˆªè¿‡ç¨‹è¯¦è§£</title>
      <link>https://jimmysong.io/blog/istio-ambient-traffic-interception/</link>
      <pubDate>Mon, 18 Nov 2024 11:48:39 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-ambient-traffic-interception/</guid>
      <description>
        
        
        &lt;p&gt;è¿™æ˜¯æˆ‘å…³äº Istio ambient æ¨¡å¼ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ ç¯‡ä¸­ï¼Œæˆ‘å°†æ·±å…¥æ¢è®¨ ambient æ¨¡å¼çš„å…³é”®ç»„ä»¶åŠå…¶å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ ztunnel å¦‚ä½•å°†æµé‡è½¬å‘åˆ° waypoint proxyï¼Œwaypoint proxy å¦‚ä½•å¤„ç†æµé‡ï¼Œä»¥åŠé€šè¿‡ bookinfo ç¤ºä¾‹å®Œæ•´ç†è§£æµé‡è·¯å¾„çš„æ“ä½œã€‚ç”±äºæµé‡æ‹¦æˆªæ˜¯æœåŠ¡ç½‘æ ¼çš„åŸºç¡€åŠŸèƒ½ï¼Œå› æ­¤æˆ‘é€‰æ‹©ä»å®ƒå¼€å§‹ï¼Œä¸ºå¤§å®¶æä¾›æ‰å®çš„ç†è§£åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;Istio ambient æ¨¡å¼æ˜¯ä¸€ç§æ— éœ€åœ¨æ¯ä¸ª pod ä¸­æ³¨å…¥ sidecar çš„æœåŠ¡ç½‘æ ¼å®ç°æ–¹å¼ã€‚å®ƒé€šè¿‡åœ¨ pod çš„ç½‘ç»œå‘½åç©ºé—´å†…é…ç½®é€æ˜æµé‡æ‹¦æˆªå’Œé‡å®šå‘ï¼Œä½¿åº”ç”¨ç¨‹åºæ— éœ€ä¿®æ”¹å³å¯äº«å—æœåŠ¡ç½‘æ ¼çš„åŠŸèƒ½ã€‚ä»¥ä¸‹å†…å®¹å°†è¯¦ç»†è§£æé€æ˜æµé‡æ‹¦æˆªçš„å®ç°è¿‡ç¨‹ï¼Œæ¶‰åŠç»„ä»¶å¦‚ &lt;strong&gt;Istio CNI Node Agent&lt;/strong&gt;ã€&lt;strong&gt;ztunnel&lt;/strong&gt;ã€&lt;strong&gt;ç½‘ç»œå‘½åç©ºé—´&lt;/strong&gt; å’Œ &lt;strong&gt;iptables è§„åˆ™&lt;/strong&gt;ï¼Œå¹¶é€šè¿‡æµç¨‹å›¾å’Œç¤ºæ„å›¾è¿›è¡Œè¯´æ˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èƒŒæ™¯çŸ¥è¯†&#34;&gt;èƒŒæ™¯çŸ¥è¯†&lt;/h2&gt;
&lt;h3 id=&#34;linux-ç½‘ç»œå‘½åç©ºé—´&#34;&gt;Linux ç½‘ç»œå‘½åç©ºé—´&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ç½‘ç»œå‘½åç©ºé—´ï¼ˆNetwork Namespaceï¼‰&lt;/strong&gt; æ˜¯ Linux å†…æ ¸çš„åŠŸèƒ½ï¼Œç”¨äºéš”ç¦»ä¸åŒè¿›ç¨‹çš„ç½‘ç»œç¯å¢ƒã€‚æ¯ä¸ªç½‘ç»œå‘½åç©ºé—´éƒ½æœ‰ç‹¬ç«‹çš„ç½‘ç»œè®¾å¤‡ã€IP åœ°å€ã€è·¯ç”±è¡¨å’Œ iptables è§„åˆ™ã€‚å®¹å™¨æŠ€æœ¯ï¼ˆå¦‚ Dockerã€Kubernetesï¼‰åˆ©ç”¨ç½‘ç»œå‘½åç©ºé—´ä¸ºæ¯ä¸ªå®¹å™¨ï¼ˆæˆ– podï¼‰æä¾›ç‹¬ç«‹çš„ç½‘ç»œæ ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;istio-cni-node-agent&#34;&gt;Istio CNI Node Agent&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Istio CNI Node Agent&lt;/strong&gt; æ˜¯ ambient æ¨¡å¼ä¸­çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£åœ¨ Kubernetes èŠ‚ç‚¹ä¸Šæ£€æµ‹åŠ å…¥ ambient ç½‘æ ¼çš„ podï¼Œå¹¶ä¸ºè¿™äº› pod é…ç½®æµé‡é‡å®šå‘è§„åˆ™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ Istio CNI Node Agentï¼Œè€Œéä¼ ç»Ÿçš„ Istio CNI æ’ä»¶ã€‚Node Agent æ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä¸ ztunnel ååŒå·¥ä½œï¼Œè€Œä¸æ˜¯ç›´æ¥å‚ä¸ç½‘ç»œæ’ä»¶çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;ztunnel&#34;&gt;ztunnel&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ztunnel&lt;/strong&gt; æ˜¯ ambient æ¨¡å¼ä¸­çš„é‡è¦ç»„ä»¶ï¼Œä»¥ DaemonSet çš„å½¢å¼è¿è¡Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¥æ”¶å¹¶å¤„ç†è¢«é‡å®šå‘çš„æµé‡ï¼›&lt;/li&gt;
&lt;li&gt;å®ç° L4 å±‚çš„ç­–ç•¥ï¼Œå¦‚ mTLS åŠ å¯†å’Œè®¿é—®æ§åˆ¶ï¼›&lt;/li&gt;
&lt;li&gt;ä¸æ§åˆ¶å¹³é¢é€šä¿¡ä»¥è·å–é…ç½®å’Œè¯ä¹¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;hboneåŸºäº-http-çš„éš§é“åè®®&#34;&gt;HBONEï¼ˆåŸºäº HTTP çš„éš§é“åè®®ï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;HBONEï¼ˆHTTP-Based Overlay Network Encapsulationï¼‰&lt;/strong&gt; æ˜¯ Istio å¼•å…¥çš„åè®®ï¼Œç”¨äºåœ¨ ztunnel å’Œ waypoint proxy ä¹‹é—´ä¼ è¾“ä»»æ„ TCP æµé‡ã€‚HBONE åˆ©ç”¨ HTTP/2 å’Œ HTTP/3 çš„å¤šè·¯å¤ç”¨åŠåŠ å¯†ç‰¹æ€§ï¼Œæé«˜é€šä¿¡æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æµé‡æ‹¦æˆªè¿‡ç¨‹è¯¦è§£&#34;&gt;æµé‡æ‹¦æˆªè¿‡ç¨‹è¯¦è§£&lt;/h2&gt;
&lt;p&gt;åœ¨ ambient æ¨¡å¼ä¸‹ï¼Œåº”ç”¨ç¨‹åº pod æ— éœ€ä¿®æ”¹ä»£ç ï¼Œä¹Ÿä¸éœ€è¦æ³¨å…¥ sidecarã€‚æµé‡æ‹¦æˆªå’Œé‡å®šå‘çš„ä¸»è¦è¿‡ç¨‹å‘ç”Ÿåœ¨ &lt;strong&gt;pod çš„ç½‘ç»œå‘½åç©ºé—´&lt;/strong&gt; å†…éƒ¨ï¼Œè¿™ç§æ–¹å¼é¿å…äº†ä¸åº•å±‚ CNI çš„å†²çªã€‚ä»¥ä¸‹æ˜¯å…¶æ­¥éª¤æ¦‚è§ˆï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-traffic-interception/7b94ccedcde4f27f06d158187d7904e2.svg&#34; data-img=&#34;/blog/istio-ambient-traffic-interception/7b94ccedcde4f27f06d158187d7904e2.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio ambient æ¨¡å¼çš„æµé‡æ‹¦æˆªè¿‡ç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio ambient æ¨¡å¼çš„æµé‡æ‹¦æˆªè¿‡ç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æµé‡æ‹¦æˆªè¯¦ç»†æ­¥éª¤&#34;&gt;æµé‡æ‹¦æˆªè¯¦ç»†æ­¥éª¤&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;pod å¯åŠ¨ä¸ç½‘ç»œé…ç½®&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Kubernetes åˆ›å»º pod æ—¶ï¼Œé€šè¿‡ Container Runtime Interfaceï¼ˆCRIï¼‰è°ƒç”¨åº•å±‚ CNI æ’ä»¶ï¼ˆå¦‚ Calicoã€Ciliumï¼‰ä¸º pod é…ç½®ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ï¼Œpod çš„ç½‘ç»œå‘½åç©ºé—´ï¼ˆnetnsï¼‰å·²ç»å»ºç«‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio CNI Node Agent é…ç½®æµé‡é‡å®šå‘&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Istio CNI Node Agent ç›‘æµ‹åˆ°æ–° pod è¢«æ ‡è®°ä¸º ambient æ¨¡å¼ï¼ˆé€šè¿‡æ ‡ç­¾ &lt;code&gt;istio.io/dataplane-mode=ambient&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿›å…¥ pod çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œè®¾ç½® iptables è§„åˆ™ä»¥æ‹¦æˆªæµé‡ã€‚&lt;/li&gt;
&lt;li&gt;å°†ç½‘ç»œå‘½åç©ºé—´çš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ä¼ é€’ç»™ ztunnelã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ztunnel åœ¨ pod ç½‘ç»œå‘½åç©ºé—´ä¸­å¯åŠ¨ç›‘å¬å¥—æ¥å­—&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ztunnel æ¥æ”¶åˆ°ç½‘ç»œå‘½åç©ºé—´çš„ FDï¼Œåœ¨å…¶ä¸­å¯åŠ¨ç›‘å¬å¥—æ¥å­—ä»¥å¤„ç†é‡å®šå‘çš„æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜æµé‡æ‹¦æˆªä¸å¤„ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºå‘å‡ºçš„æµé‡è¢« pod å†…çš„ iptables è§„åˆ™æ‹¦æˆªï¼Œå¹¶é€æ˜åœ°é‡å®šå‘åˆ° ztunnelã€‚&lt;/li&gt;
&lt;li&gt;ztunnel å¯¹æµé‡æ‰§è¡Œç­–ç•¥æ£€æŸ¥ã€åŠ å¯†ç­‰å¤„ç†åè½¬å‘åˆ°ç›®æ ‡æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;è¿”å›çš„å“åº”æµé‡é€šè¿‡ ztunnel è§£å¯†å¹¶è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æƒ³äº†è§£æ›´å¤šå…³äº Istio CNI å¤„ç† iptables çš„ç»†èŠ‚è¯·è§æˆ‘çš„å¦ä¸€ç¯‡åšå®¢ &lt;a href=&#34;https://jimmysong.io/blog/istio-ambient-pod-iptables/&#34; title=&#34;Istio ambient æ¨¡å¼ä¸­çš„ iptables è§„åˆ™è§£æ&#34;&gt;Istio ambient æ¨¡å¼ä¸­çš„ iptables è§„åˆ™è§£æ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ztunnel-æ—¥å¿—åˆ†æ&#34;&gt;ztunnel æ—¥å¿—åˆ†æ&lt;/h2&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ ztunnel æ—¥å¿—ä¸­æœ‰å…³æµé‡æ‹¦æˆªçš„è®°å½•ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£ ztunnel çš„è¿è¡ŒåŸç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n istio-system logs -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ztunnel &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -E &lt;span class=&#34;s2&#34;&gt;&amp;#34;inbound|outbound&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†çœ‹åˆ°ä¾‹å¦‚ä¸‹é¢çš„è¾“å‡ºï¼Œæ³¨æ„é‡Œé¢çš„ &lt;code&gt;inbound&lt;/code&gt; å’Œ &lt;code&gt;outbound&lt;/code&gt; æ˜¯ç›¸å¯¹äº ztunnel è€Œè¨€çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¥ç«™æµé‡ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2024-11-16T10:33:01.410751Z	info	access	connection complete	src.addr=10.28.2.19:58000 src.workload=&amp;#34;bookinfo-gateway-istio-64fc6d75d6-s442s&amp;#34; src.namespace=&amp;#34;default&amp;#34; src.identity=&amp;#34;spiffe://cluster.local/ns/default/sa/bookinfo-gateway-istio&amp;#34; dst.addr=10.28.2.18:15008 dst.hbone_addr=10.28.2.18:9080 dst.service=&amp;#34;productpage.default.svc.cluster.local&amp;#34; dst.workload=&amp;#34;productpage-v1-57ffb6658c-tgbjs&amp;#34; dst.namespace=&amp;#34;default&amp;#34; dst.identity=&amp;#34;spiffe://cluster.local/ns/default/sa/bookinfo-productpage&amp;#34; direction=&amp;#34;inbound&amp;#34; bytes_sent=9603 bytes_recv=2052 duration=&amp;#34;2110ms&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥æ—¥å¿—æè¿°äº†ä» &lt;code&gt;bookinfo-gateway-istio&lt;/code&gt; åˆ° &lt;code&gt;productpage&lt;/code&gt; çš„å…¥ç«™æµé‡ã€‚æµé‡ç»è¿‡ ztunnel çš„ 15008 ç«¯å£ï¼Œä½¿ç”¨äº† HBONE éš§é“åŠ å¯†ï¼Œèº«ä»½é€šè¿‡ SPIFFE ç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‡ºç«™æµé‡ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2024-11-16T10:32:59.360677Z	info	access	connection complete	src.addr=10.28.2.18:51960 src.workload=&amp;#34;productpage-v1-57ffb6658c-tgbjs&amp;#34; src.namespace=&amp;#34;default&amp;#34; src.identity=&amp;#34;spiffe://cluster.local/ns/default/sa/bookinfo-productpage&amp;#34; dst.addr=10.28.2.14:15008 dst.hbone_addr=34.118.226.6:9080 dst.service=&amp;#34;details.default.svc.cluster.local&amp;#34; dst.workload=&amp;#34;waypoint-7594b5b786-vgjwz&amp;#34; dst.namespace=&amp;#34;default&amp;#34; dst.identity=&amp;#34;spiffe://cluster.local/ns/default/sa/waypoint&amp;#34; direction=&amp;#34;outbound&amp;#34; bytes_sent=794 bytes_recv=414 duration=&amp;#34;40ms&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¥å¿—æè¿°äº† &lt;code&gt;productpage&lt;/code&gt; pod è®¿é—® &lt;code&gt;details&lt;/code&gt; æœåŠ¡æ—¶çš„å‡ºç«™æµé‡ã€‚æµé‡ç”± ztunnel ä½¿ç”¨ HBONE éš§é“è½¬å‘åˆ° waypoint podï¼ˆ&lt;code&gt;15008&lt;/code&gt; ç«¯å£ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Istio ambient æ¨¡å¼é€šè¿‡ Istio CNI Node Agent å’Œ ztunnel çš„åä½œï¼Œå®ç°äº†æ— éœ€ sidecar çš„é€æ˜æµé‡æ‹¦æˆªã€‚å…¶å…³é”®ç‰¹æ€§åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¼å®¹æ€§å¼º&lt;/strong&gt;ï¼šé¿å…ä¸åº•å±‚ CNI å†²çªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–è¿ç»´&lt;/strong&gt;ï¼šæ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç ï¼Œé™ä½èµ„æºæ¶ˆè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§é«˜&lt;/strong&gt;ï¼šé€šè¿‡ HBONE å®ç°ç«¯åˆ°ç«¯çš„åŠ å¯†ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åç»­æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¿›ä¸€æ­¥æ¢è®¨ Istio ambient æ¨¡å¼çš„é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ L7 æµé‡è·¯å¾„åˆ†æå’Œç½‘ç»œæ‹“æ‰‘æ„å»ºè¿‡ç¨‹ï¼Œæ•¬è¯·æœŸå¾…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2024/inpod-traffic-redirection-ambient/&#34; title=&#34;Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2022/introducing-ambient-mesh/&#34; title=&#34;Istio Ambient Mesh ä»‹ç»&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Ambient Mesh ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/&#34; title=&#34;Kubernetes å®˜æ–¹æ–‡æ¡£ï¼šç½‘ç»œæ’ä»¶&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes å®˜æ–¹æ–‡æ¡£ï¼šç½‘ç»œæ’ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/ambient/architecture/hbone/&#34; title=&#34;HBONE&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HBONE&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/ambient/architecture/traffic-redirection/&#34; title=&#34;ztunnel traffic redirection&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ztunnel traffic redirection&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio Ambient æ¨¡å¼ä¸­çš„ Pod å†… iptables è§„åˆ™æ³¨å…¥è§£æ</title>
      <link>https://jimmysong.io/blog/istio-ambient-inpod-iptables/</link>
      <pubDate>Mon, 18 Nov 2024 11:47:02 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-ambient-inpod-iptables/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨ &lt;a href=&#34;https://jimmysong.io/blog/istio-ambient-traffic-interception/&#34; title=&#34;ä¸Šä¸€ç¯‡åšå®¢&#34;&gt;ä¸Šä¸€ç¯‡åšå®¢&lt;/a&gt; ä¸­ï¼Œæˆ‘æ¦‚è¿°äº† Istio ambient æ¨¡å¼ä¸­ pod ç½‘ç»œå‘½åç©ºé—´å†…æ³¨å…¥çš„ iptables è§„åˆ™ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¿™äº›è§„åˆ™ï¼Œæ¢è®¨å®ƒä»¬æ˜¯å¦‚ä½•åœ¨ pod å†…å®ç°é€æ˜æµé‡æ‹¦æˆªå’Œé‡å®šå‘çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pod-å†…çš„-iptables-è§„åˆ™&#34;&gt;Pod å†…çš„ iptables è§„åˆ™&lt;/h2&gt;
&lt;p&gt;åœ¨ pod çš„ç½‘ç»œå‘½åç©ºé—´å†…ï¼ŒIstio CNI node agent ä¼šè®¾ç½®ä¸€ç³»åˆ— iptables è§„åˆ™ï¼Œä»¥å®ç°æµé‡çš„é€æ˜æ‹¦æˆªä¸é‡å®šå‘ã€‚ä¸‹é¢çš„è§„åˆ™å±•ç¤ºäº† Istio åœ¨ mangle å’Œ nat è¡¨ä¸­æ³¨å…¥çš„å†…å®¹ï¼Œç¡®ä¿å…¥ç«™å’Œå‡ºç«™æµé‡ç»è¿‡é€‚å½“çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Generated by iptables-save v1.8.9 (nf_tables) on Thu Nov 14 08:43:17 2024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mangle&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PREROUTING&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;99138&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;22880045&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# mangle è¡¨ä¸­çš„ PREROUTING é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INPUT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# mangle è¡¨ä¸­çš„ INPUT é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FORWARD&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# mangle è¡¨ä¸­çš„ FORWARD é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUTPUT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100900&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;34940164&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# mangle è¡¨ä¸­çš„ OUTPUT é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POSTROUTING&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# mangle è¡¨ä¸­çš„ POSTROUTING é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# è‡ªå®šä¹‰çš„ ISTIO_OUTPUT é“¾ï¼Œç”¨äºå¤„ç† Istio çš„å‡ºç«™æµé‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# è‡ªå®šä¹‰çš„ ISTIO_PRERT é“¾ï¼Œç”¨äºå¤„ç† Istio çš„é¢„è·¯ç”±æµé‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PREROUTING&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å°†æ‰€æœ‰ PREROUTING æµé‡è·³è½¬åˆ° ISTIO_PRERT é“¾ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å°†æ‰€æœ‰ OUTPUT æµé‡è·³è½¬åˆ° ISTIO_OUTPUT é“¾ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;connmark&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x111&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CONNMARK&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;restore&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nfmask&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffffffff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctmask&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xffffffff&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœè¿æ¥æ ‡è®°ä¸º 0x111/0xfffï¼Œåˆ™æ¢å¤è¿æ¥æ ‡è®°ï¼Œç”¨äºè¿æ¥è¿½è¸ªçš„ä¸€è‡´æ€§ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x539&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CONNMARK&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xmark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x111&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœæ•°æ®åŒ…æ ‡è®°ä¸º 0x539/0xfffï¼Œåœ¨ PREROUTING é“¾ä¸­å°†å…¶è¿æ¥æ ‡è®°è®¾ç½®ä¸º 0x111/0xfffã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;COMMIT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# åº”ç”¨ mangle è¡¨è§„åˆ™ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Completed on Thu Nov 14 08:43:17 2024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Generated by iptables-save v1.8.9 (nf_tables) on Thu Nov 14 08:43:17 2024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PREROUTING&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;120&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# nat è¡¨ä¸­çš„ PREROUTING é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INPUT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# nat è¡¨ä¸­çš„ INPUT é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OUTPUT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;119&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;9344&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# nat è¡¨ä¸­çš„ OUTPUT é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POSTROUTING&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# nat è¡¨ä¸­çš„ POSTROUTING é“¾ï¼Œé»˜è®¤ç­–ç•¥ä¸º ACCEPTã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# è‡ªå®šä¹‰çš„ ISTIO_OUTPUT é“¾ï¼Œç”¨äºå¤„ç† Istio çš„å‡ºç«™ NAT æµé‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# è‡ªå®šä¹‰çš„ ISTIO_PRERT é“¾ï¼Œç”¨äºå¤„ç† Istio çš„é¢„è·¯ç”± NAT æµé‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PREROUTING&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å°†æ‰€æœ‰ PREROUTING æµé‡è·³è½¬åˆ° ISTIO_PRERT é“¾ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å°†æ‰€æœ‰ OUTPUT æµé‡è·³è½¬åˆ° ISTIO_OUTPUT é“¾ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;169.254.7.127&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœç›®æ ‡åœ°å€ä¸º 169.254.7.127ï¼ˆå¯èƒ½æ˜¯ Istio å†…éƒ¨åœ°å€ï¼‰ï¼Œå…è®¸ TCP æµé‡é€šè¿‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x111&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœæ•°æ®åŒ…æ ‡è®°ä¸º 0x111/0xfffï¼Œå…è®¸ TCP æµé‡é€šè¿‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0.0.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;o&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å…è®¸å‘å¾€æœ¬åœ°å›ç¯æ¥å£ï¼ˆä½†ä¸åŒ…æ‹¬ 127.0.0.1ï¼‰çš„æµé‡é€šè¿‡ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_OUTPUT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0.0.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x539&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;REDIRECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ports&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†å‘å¾€é 127.0.0.1 çš„å‡ºç«™ TCP æµé‡ï¼ˆä¸”æ ‡è®°ä¸æ˜¯ 0x539/0xfffï¼‰é‡å®šå‘åˆ°ç«¯å£ 15001ï¼ˆIstio å‡ºç«™æµé‡å…¥å£ï¼‰ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;169.254.7.127&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ACCEPT&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¦‚æœæºåœ°å€ä¸º 169.254.7.127ï¼Œå…è®¸ TCP æµé‡é€šè¿‡ PREROUTING é“¾ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ISTIO_PRERT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;127.0.0.1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dport&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15008&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;!&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mark&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x539&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mh&#34;&gt;0xfff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;REDIRECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ports&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15006&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å°†é 127.0.0.1 ä¸”ç›®æ ‡ç«¯å£ä¸æ˜¯ 15008 çš„å…¥ç«™ TCP æµé‡ï¼ˆæ ‡è®°ä¸æ˜¯ 0x539/0xfffï¼‰é‡å®šå‘åˆ°ç«¯å£ 15006ï¼ˆIstio å…¥ç«™æµé‡å…¥å£ï¼‰ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;COMMIT&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# åº”ç”¨ nat è¡¨è§„åˆ™ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Completed on Thu Nov 14 08:43:17 2024&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç«¯å£å·çš„ä½œç”¨&#34;&gt;ç«¯å£å·çš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;è¿™äº› iptables è§„åˆ™é€šè¿‡ç‰¹å®šçš„ç«¯å£å·æ¥åŒºåˆ†å¹¶å¤„ç†ä¸åŒç±»å‹çš„æµé‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;15008 (HBONE socket)&lt;/strong&gt;ï¼šç”¨äºé€æ˜ä»£ç†åŸºäº HTTP çš„æµé‡ï¼Œæ”¯æŒ HBONE åè®®çš„é€æ˜ä¼ è¾“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;15006 (plaintext socket)&lt;/strong&gt;ï¼šç”¨äºå¤„ç†æœªåŠ å¯†çš„ç½‘æ ¼å†…éƒ¨æµé‡ï¼Œä»¥å®ç° pod ä¹‹é—´çš„æµé‡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;15001 (outbound socket)&lt;/strong&gt;ï¼šç”¨äºç®¡ç†å‡ºç«™æµé‡ï¼Œå®ç°å¯¹å¤–éƒ¨æœåŠ¡è®¿é—®çš„ç­–ç•¥æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›ç«¯å£ä½¿å¾— Istio èƒ½å¤Ÿå¯¹å…¥ç«™ã€å‡ºç«™åŠå†…éƒ¨æµé‡è¿›è¡Œé€æ˜çš„ç®¡ç†ä¸æ§åˆ¶ï¼Œä»è€Œå®ç°ç»†ç²’åº¦çš„å®‰å…¨ç­–ç•¥ä¸æµé‡æ§åˆ¶ã€‚æ›´å¤šå…³äºç«¯å£å·çš„ä½¿ç”¨è¯·å‚è€ƒ &lt;a href=&#34;https://istio.io/latest/docs/ops/deployment/application-requirements/&#34; title=&#34;Istio åº”ç”¨è¦æ±‚&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio åº”ç”¨è¦æ±‚&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ‡è®°-0x539-çš„ä½œç”¨&#34;&gt;æ ‡è®° &lt;code&gt;0x539&lt;/code&gt; çš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;0x539&lt;/code&gt; æ˜¯ç”¨äºæ ‡è¯† Istio ä»£ç†å‘å‡ºçš„æµé‡çš„æ ‡è®°ã€‚è¿™ä¸€æ ‡è®°åœ¨æµé‡è¿›å…¥ iptables è§„åˆ™æ—¶è¢«è®¾ç½®ï¼Œç”¨äºåŒºåˆ†ç”±ä»£ç†ï¼ˆå¦‚ ztunnelï¼‰å¤„ç†è¿‡çš„æ•°æ®åŒ…ï¼Œé˜²æ­¢å…¶è¢«é‡å¤ä»£ç†æˆ–è¯¯å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ‡è®°-0x111-çš„ä½œç”¨&#34;&gt;æ ‡è®° &lt;code&gt;0x111&lt;/code&gt; çš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;0x111&lt;/code&gt; ç”¨äºè¿æ¥çº§åˆ«çš„æ ‡è®°ç®¡ç†ï¼Œåœ¨ Istio ç½‘æ ¼ä¸­æ ‡è¯†å·²ç”±ä»£ç†å¤„ç†è¿‡çš„æ•´ä¸ªè¿æ¥ã€‚é€šè¿‡ iptables çš„ &lt;code&gt;CONNMARK&lt;/code&gt; æ¨¡å—ï¼Œ&lt;code&gt;0x111&lt;/code&gt; æ ‡è®°èƒ½å¤Ÿä»å•ä¸ªæ•°æ®åŒ…æ‰©å±•åˆ°æ•´ä¸ªè¿æ¥çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»è€ŒåŠ é€Ÿåç»­æ•°æ®åŒ…çš„åŒ¹é…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;iptables-è§„åˆ™å¯è§†åŒ–&#34;&gt;iptables è§„åˆ™å¯è§†åŒ–&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†æµé‡åœ¨ iptables è§„åˆ™ä¸­çš„æ‰§è¡Œè·¯å¾„ï¼Œå¸®åŠ©ç†è§£æµé‡çš„åŒ¹é…å’Œé‡å®šå‘è¿‡ç¨‹ï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-inpod-iptables/b99dc3a72ccab48d71e6c502b1089d2d.svg&#34; data-img=&#34;/blog/istio-ambient-inpod-iptables/b99dc3a72ccab48d71e6c502b1089d2d.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio ambient pod å†… iptables å¯è§†åŒ–&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio ambient pod å†… iptables å¯è§†åŒ–&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æƒ³è¿›ä¸€æ­¥äº†è§£ Istio CNI å¦‚ä½•å¤„ç† iptablesï¼Œè¯·å‚è€ƒä»£ç  &lt;a href=&#34;https://github.com/istio/istio/blob/master/cni/pkg/iptables/iptables.go&#34; title=&#34;istio/cni/pkg/iptables/iptables.go at master Â· istio/istio Â· GitHub&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istio/cni/pkg/iptables/iptables.go at master Â· istio/istio Â· GitHub&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æµé‡çš„è·¯ç”±å¯è§†åŒ–&#34;&gt;æµé‡çš„è·¯ç”±å¯è§†åŒ–&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä»¥è·¨èŠ‚ç‚¹çš„ L4 åŠ å¯†æµé‡è·¯å¾„çš„å¯è§†åŒ–å›¾ç¤ºï¼š&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-ambient-inpod-iptables/ambient-traffic-on-the-different-node-l4.svg&#34; data-img=&#34;/blog/istio-ambient-inpod-iptables/ambient-traffic-on-the-different-node-l4.svg&#34; alt=&#34;image&#34; data-caption=&#34;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL4ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;è·¨èŠ‚ç‚¹çš„åŠ å¯†æµé‡ï¼ˆL4ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ç¨‹åºå‘å‡ºè¯·æ±‚&lt;/strong&gt;ï¼šæµé‡ä»åº”ç”¨ç¨‹åºè¿›ç¨‹å‘é€ï¼Œè¿›å…¥ Pod çš„ç½‘ç»œå‘½åç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;iptables è§„åˆ™åŒ¹é…&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡ºç«™æµé‡&lt;/strong&gt;åœ¨ &lt;code&gt;OUTPUT&lt;/code&gt; é“¾ä¸­è¢«åŒ¹é…ï¼Œç¬¦åˆæ¡ä»¶çš„æµé‡è¢«é‡å®šå‘åˆ° &lt;code&gt;ISTIO_OUTPUT&lt;/code&gt; é“¾ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;ISTIO_OUTPUT&lt;/code&gt; é“¾ä¸­ï¼Œæµé‡è¢«æ ‡è®°å¹¶è¢«æ¥å—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;REDIRECT é‡å®šå‘&lt;/strong&gt;ï¼šæµé‡è¢« iptables æ•è·å¹¶é‡å®šå‘åˆ° ztunnel ç›‘å¬ç«¯å£ï¼ˆæ˜æ–‡æµé‡ä¸º 15006ï¼ŒåŠ å¯†æµé‡ä¸º 15008ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ztunnel å¤„ç†æµé‡&lt;/strong&gt;ï¼šztunnel æ¥æ”¶åˆ°æµé‡ï¼Œè¿›è¡Œç­–ç•¥æ£€æŸ¥å’ŒåŠ å¯†ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµé‡è½¬å‘åˆ°ç›®æ ‡æœåŠ¡&lt;/strong&gt;ï¼šztunnel å°†å¤„ç†åçš„æµé‡é€šè¿‡ HBONE éš§é“å‘é€åˆ°ç›®æ ‡æœåŠ¡æ‰€åœ¨èŠ‚ç‚¹çš„ ztunnelï¼Œç„¶åè§£å¯†å‘é€åˆ°ç›®æ ‡æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…³äºå¯¹åŒèŠ‚ç‚¹ã€è·¨èŠ‚ç‚¹ã€L4ã€L7 å±‚çº§çš„æµé‡è·¯ç”±ä»¥åŠé˜²æ­¢æµé‡é€ƒé€¸çš„è¯¦æƒ…è¯·å‚è€ƒåšå®¢ &lt;a href=&#34;https://jimmysong.io/blog/beyond-sidecar/&#34; title=&#34;è¶…è¶Š Sidecarï¼šæ·±å…¥è§£æ Istio Ambient Mode çš„æµé‡æœºåˆ¶ä¸æˆæœ¬æ•ˆç›Š&#34;&gt;è¶…è¶Š Sidecarï¼šæ·±å…¥è§£æ Istio Ambient Mode çš„æµé‡æœºåˆ¶ä¸æˆæœ¬æ•ˆç›Š&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è§£æ Istio ambient æ¨¡å¼ä¸‹çš„ iptables è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒIstio é€šè¿‡ CNI æ’ä»¶åœ¨ pod å†…è®¾ç½®äº†ä¸€ç³»åˆ—é€æ˜çš„æµé‡æ‹¦æˆªè§„åˆ™ã€‚è¿™äº›è§„åˆ™ç¡®ä¿äº†æµé‡åœ¨è¿›å‡º pod æ—¶èƒ½å¤ŸæŒ‰é¢„æœŸè¢« ztunnel ä»£ç†å¤„ç†ï¼Œä»è€Œå®ç°æ›´ç»†ç²’åº¦çš„æµé‡ç®¡ç†å’Œå®‰å…¨ç­–ç•¥åº”ç”¨ã€‚æœªæ¥æˆ‘ä»¬å°†ç»§ç»­æ¢ç´¢æ›´å¤šå…³äº Istio ambient æ¨¡å¼ä¸‹çš„ç½‘ç»œç»†èŠ‚ï¼Œæ•¬è¯·å…³æ³¨ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—ï¼šæ¢ç´¢ Linux å¥—æ¥å­—çš„ä½¿ç”¨</title>
      <link>https://jimmysong.io/blog/cross-network-namespace-socket/</link>
      <pubDate>Thu, 07 Nov 2024 16:48:08 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/cross-network-namespace-socket/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘æˆ‘åœ¨ç ”ç©¶ Istio Ambient æ¨¡å¼ä¸­çš„é€æ˜æµé‡åŠ«æŒï¼Œè¿‡ç¨‹ä¸­æ¶‰åŠäº†è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—çš„åŠŸèƒ½ã€‚åœ¨ Istio å®˜æ–¹çš„åšå®¢ &lt;a href=&#34;https://istio.io/latest/blog/2024/inpod-traffic-redirection-ambient/&#34; title=&#34;Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs&lt;/a&gt; ä¸­ä¹Ÿæåˆ°äº†è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘å¯¹ Linux å¥—æ¥å­— API çš„è¿™ä¸ªåŠŸèƒ½äº§ç”Ÿäº†æµ“åšçš„å…´è¶£ã€‚æ‰€ä»¥ï¼Œæˆ‘å†³å®šå†™ä¸‹è¿™ç¯‡åšå®¢ï¼Œåˆ†äº«å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸­è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç½‘ç»œå‘½åç©ºé—´ç®€ä»‹&#34;&gt;ç½‘ç»œå‘½åç©ºé—´ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;ç½‘ç»œå‘½åç©ºé—´æ˜¯ä¸€ç§ Linux å†…æ ¸ç‰¹æ€§ï¼Œå¯ä»¥æŠŠç³»ç»Ÿçš„ç½‘ç»œèµ„æºï¼ˆä¾‹å¦‚ IP åœ°å€ã€è·¯ç”±è¡¨ç­‰ï¼‰åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„å®ä¾‹ã€‚è¿™æ ·æ¯ä¸ªå®ä¾‹å°±å¯ä»¥ä¸ºä¸åŒçš„è¿›ç¨‹æä¾›ç‹¬ç«‹çš„ç½‘ç»œç¯å¢ƒã€‚æ¯”å¦‚ï¼ŒDocker ä½¿ç”¨ç½‘ç»œå‘½åç©ºé—´ä¸ºæ¯ä¸ªå®¹å™¨æä¾›ç‹¬ç«‹çš„ç½‘ç»œæ ˆï¼Œè®©å®ƒä»¬ä¹‹é—´çš„ç½‘ç»œèµ„æºäº’ç›¸éš”ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ç½‘ç»œå‘½åç©ºé—´ï¼Œä¸åŒçš„è¿›ç¨‹å¯ä»¥æœ‰ç‹¬ç«‹çš„ç½‘ç»œé…ç½®ï¼Œæ¯”å¦‚ä¸åŒçš„ IP åœ°å€å’Œè·¯ç”±è®¾ç½®ã€‚ä½†å³ä½¿ç½‘ç»œå‘½åç©ºé—´å®ç°äº†éš”ç¦»ï¼ŒLinux çš„å¥—æ¥å­— API ä»ç„¶å¯ä»¥è®©è¿›ç¨‹è·¨ç½‘ç»œå‘½åç©ºé—´æ“ä½œå¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—&#34;&gt;è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­è¿è¡Œçš„è¿›ç¨‹å¯ä»¥åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œå¹¶å°†å®ƒæ”¾åˆ°å¦ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´ä¸­ï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥å®ç°éå¸¸çµæ´»çš„ç½‘ç»œé€šä¿¡ã€‚æ¯”å¦‚ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç‰¹å®šçš„ç½‘ç»œå‘½åç©ºé—´ä¸­åˆ›å»ºç›‘å¬å¥—æ¥å­—ï¼Œè®©å…¶ä»–å‘½åç©ºé—´ä¸­çš„è¿›ç¨‹å…±äº«è¿™ä¸ªå¥—æ¥å­—ã€‚è¿™ç§åŠŸèƒ½åœ¨å®¹å™¨ç¼–æ’å’Œå¾®æœåŠ¡æ¶æ„ä¸­éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½¿ç”¨ &lt;code&gt;nc&lt;/code&gt; å‘½ä»¤åˆ›å»ºå¥—æ¥å­—ï¼Œä½¿å…¶ç»‘å®šåˆ°æŒ‡å®šçš„ç½‘ç»œè®¾å¤‡æˆ–å‘½åç©ºé—´ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cross-network-namespace-socket/f04c2c199e66b82ef451c2e3c2be99e1.svg&#34; data-img=&#34;/blog/cross-network-namespace-socket/f04c2c199e66b82ef451c2e3c2be99e1.svg&#34; alt=&#34;image&#34; data-caption=&#34;Mermaid Diagram&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Mermaid Diagram&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä½¿ç”¨-docker-æ¼”ç¤ºè¿™ä¸€åŠŸèƒ½&#34;&gt;ä½¿ç”¨ Docker æ¼”ç¤ºè¿™ä¸€åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä½¿ç”¨çš„ macOS ä¸æ”¯æŒ Linux çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œä½†å¯ä»¥ä½¿ç”¨ Docker Desktop æ¨¡æ‹Ÿç›¸åº”çš„ç¯å¢ƒã€‚ä¸‹é¢æ˜¯åœ¨ macOS ä¸Šä½¿ç”¨ Docker æ¥æ¼”ç¤ºçš„æ–¹æ³•ï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/cross-network-namespace-socket/73a1a7081b41c63c1e7f98a87e4f8580.svg&#34; data-img=&#34;/blog/cross-network-namespace-socket/73a1a7081b41c63c1e7f98a87e4f8580.svg&#34; alt=&#34;image&#34; data-caption=&#34;Mermaid Diagram&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Mermaid Diagram&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… Docker Desktop&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‹è½½å¹¶å®‰è£… Docker Desktopï¼Œå¯ä»¥åœ¨ macOS ä¸Šè¿è¡Œ Linux å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;å¯åŠ¨ Docker Desktop åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨ä¸­æ¨¡æ‹Ÿç½‘ç»œå‘½åç©ºé—´çš„ç›¸å…³æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®è™šæ‹Ÿç½‘ç»œ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºè™šæ‹Ÿç½‘ç»œæ¥å£
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker network create --driver bridge my_bridge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;ä¸ºæ¯ä¸ªå®¹å™¨åˆ†é… IP åœ°å€ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›¸äº’é€šä¿¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºç½‘ç»œå‘½åç©ºé—´ï¼ˆä½¿ç”¨ Docker å®¹å™¨æ¨¡æ‹Ÿï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ Docker åˆ›å»ºä¸¤ä¸ªå®¹å™¨ï¼Œåˆ†åˆ«æ¨¡æ‹Ÿä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run -d --name ns1 --network my_bridge --privileged alpine sleep infinity
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run -d --name ns2 --network my_bridge --privileged alpine sleep infinity
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨æ—¶ç›´æ¥å°†å®ƒä»¬è¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›¸äº’é€šä¿¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¨å‘½åç©ºé—´åˆ›å»ºå¥—æ¥å­—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;docker exec&lt;/code&gt; å‘½ä»¤è¿›å…¥å®¹å™¨å¹¶é…ç½®ç½‘ç»œæ¥å£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ &lt;code&gt;ns1&lt;/code&gt; å®¹å™¨ä¸­è¿è¡Œä¸€ä¸ªç›‘å¬å¥—æ¥å­—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; ns1 sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;nc -l -k -p 8080&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·å– &lt;code&gt;ns1&lt;/code&gt; å®¹å™¨çš„ IP åœ°å€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;NS1_IP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;docker inspect -f &lt;span class=&#34;s1&#34;&gt;&amp;#39;{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}&amp;#39;&lt;/span&gt; ns1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ &lt;code&gt;ns2&lt;/code&gt; å®¹å™¨ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;nc&lt;/code&gt; å‘½ä»¤è®¿é—® &lt;code&gt;ns1&lt;/code&gt; å®¹å™¨ä¸­çš„å¥—æ¥å­—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; ns2 sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;echo &amp;#39;Hello from ns2&amp;#39; | nc &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$NS1_IP&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; 8080&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ &lt;code&gt;ns1&lt;/code&gt; å®¹å™¨çš„ç•Œé¢ä¸­çœ‹åˆ°æ¥è‡ª &lt;code&gt;ns2&lt;/code&gt; å®¹å™¨çš„ &lt;code&gt;Hello from ns2&lt;/code&gt; å­—ç¬¦ä¸²ã€‚å°½ç®¡ &lt;code&gt;ns1&lt;/code&gt; å’Œ &lt;code&gt;ns2&lt;/code&gt; å±äºä¸åŒçš„å®¹å™¨ï¼Œä½†é€šè¿‡æ­£ç¡®çš„é…ç½®ï¼Œ&lt;code&gt;ns2&lt;/code&gt; ä»ç„¶å¯ä»¥è®¿é—® &lt;code&gt;ns1&lt;/code&gt; ä¸­çš„å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥ç†è§£ä¸ºé€šè¿‡åœ¨ &lt;code&gt;ns2&lt;/code&gt; ç›‘å¬ &lt;code&gt;ns1&lt;/code&gt; çš„å¥—æ¥å­—ï¼Œç±»ä¼¼äºå»ºç«‹äº†ä¸€ä¸ªâ€œéš§é“â€æ¥å®ç°é€šä¿¡ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯å»ºç«‹äº†ä¸€æ¡ç›´æ¥çš„é€šä¿¡é€šé“ï¼Œä½¿å¾—ä¸¤ä¸ªå®¹å™¨ä¹‹é—´èƒ½å¤Ÿè¿›è¡Œæ•°æ®äº¤æ¢ã€‚è™½ç„¶å®ƒæ²¡æœ‰çœŸæ­£æ„å»º VPN é‚£æ ·å¤æ‚çš„éš§é“ï¼Œä½†ä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œ&lt;code&gt;ns2&lt;/code&gt; å’Œ &lt;code&gt;ns1&lt;/code&gt; ä¹‹é—´å¯ä»¥é€šè¿‡è¿™ä¸ªå¥—æ¥å­—æ¥ä¼ é€’æ•°æ®ï¼Œç›¸å½“äºå»ºç«‹äº†ä¸€ä¸ªè½»é‡çº§çš„ç‚¹å¯¹ç‚¹è¿æ¥é€šé“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®é™…åº”ç”¨åœºæ™¯&#34;&gt;å®é™…åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;è¿™ç§â€œéš§é“â€å¼çš„é€šä¿¡åœ¨è®¸å¤šå®é™…åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜ä»£ç†å’Œè´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šé€šè¿‡å¥—æ¥å­—éš§é“å¯ä»¥å°†å®¢æˆ·ç«¯è¯·æ±‚è½¬å‘åˆ°æœåŠ¡å®¹å™¨ä¸­ï¼Œå¸¸ç”¨äºé€æ˜ä»£ç†æˆ–è´Ÿè½½å‡è¡¡ã€‚Istioã€&lt;strong&gt;Envoy Proxy&lt;/strong&gt; å’Œ &lt;strong&gt;HAProxy&lt;/strong&gt; ç­‰å·¥å…·åˆ©ç”¨ç±»ä¼¼æœºåˆ¶æ¥ç®¡ç†æœåŠ¡é—´æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨å®¹å™¨æ—¥å¿—æ”¶é›†&lt;/strong&gt;ï¼šé€šè¿‡å¥—æ¥å­—éš§é“ï¼Œå¯ä»¥å°†å¤šä¸ªå®¹å™¨çš„æ—¥å¿—é›†ä¸­æ”¶é›†åˆ°ä¸€ä¸ªå¤„ç†å®¹å™¨ä¸­ã€‚&lt;strong&gt;Fluentd&lt;/strong&gt; å’Œ &lt;strong&gt;Logstash&lt;/strong&gt; æ˜¯å¸¸ç”¨çš„æ—¥å¿—æ”¶é›†å·¥å…·ï¼Œç”¨äºç®€åŒ–æ—¥å¿—å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å®¡æŸ¥å’Œå…¥ä¾µæ£€æµ‹&lt;/strong&gt;ï¼šå°†å¤šä¸ªå‘½åç©ºé—´çš„æµé‡é›†ä¸­åˆ°ä¸€ä¸ªç›‘æ§å®¹å™¨ä¸­è¿›è¡Œç»Ÿä¸€æ£€æµ‹ã€‚&lt;strong&gt;Suricata&lt;/strong&gt;ã€&lt;strong&gt;Snort&lt;/strong&gt; å’Œ &lt;strong&gt;Zeek&lt;/strong&gt; ç­‰å¼€æºå·¥å…·å¯ç”¨äºç½‘ç»œå®‰å…¨åˆ†æå’Œå®¡æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•å’Œæµ‹è¯•&lt;/strong&gt;ï¼šå¼€å‘äººå‘˜å¯ä»¥å°†æµ‹è¯•æµé‡è½¬å‘åˆ°å…¶ä»–å‘½åç©ºé—´çš„æœåŠ¡ï¼Œç”¨äºéªŒè¯å’Œè°ƒè¯•ã€‚&lt;strong&gt;Wireshark&lt;/strong&gt; å¯ä»¥ç”¨äºæ•è·ç½‘ç»œåŒ…ï¼Œä»¥ä¾¿è¿›è¡Œæ·±å…¥çš„ç½‘ç»œè°ƒè¯•å’Œåˆ†æã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è·¨ç½‘ç»œå‘½åç©ºé—´ç®¡ç†å¥—æ¥å­—åœ¨å®¹å™¨ç®¡ç†ã€è°ƒåº¦ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„ä¸­æœ‰å¾ˆå¤šåº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼å®ç°æœåŠ¡çš„é€æ˜è´Ÿè½½å‡è¡¡ï¼Œå»ºç«‹éš§é“æˆ–è¿›è¡Œç½‘ç»œæµé‡è°ƒè¯•ã€‚ä½†è¿™ç§çµæ´»æ€§ä¹Ÿè¦æ±‚æˆ‘ä»¬åœ¨è®¾è®¡ç½‘ç»œå®‰å…¨ç­–ç•¥æ—¶æ›´åŠ è°¨æ…ï¼Œä»¥é˜²æ­¢ä¸åŒå‘½åç©ºé—´ä¹‹é—´çš„æ½œåœ¨é€šä¿¡å¸¦æ¥çš„å®‰å…¨é—®é¢˜ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä» AWS App Mesh è¿ç§»åˆ° Istio å…¨é¢æŒ‡å—</title>
      <link>https://jimmysong.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/</link>
      <pubDate>Wed, 30 Oct 2024 14:20:22 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/</guid>
      <description>
        
        
        &lt;p&gt;éšç€ &lt;a href=&#34;https://aws.amazon.com/cn/blogs/containers/migrating-from-aws-app-mesh-to-amazon-ecs-service-connect/&#34; title=&#34;AWS å®£å¸ƒå°†åœ¨ 2026 å¹´ 9 æœˆ 30 æ—¥åœç”¨ AWS App Mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS å®£å¸ƒå°†åœ¨ 2026 å¹´ 9 æœˆ 30 æ—¥åœç”¨ AWS App Mesh&lt;/a&gt;ï¼Œè®¸å¤šä¼ä¸šæ­£åœ¨è¯„ä¼°ç»§ç»­ä½¿ç”¨æœåŠ¡ç½‘æ ¼çš„æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœæ‚¨ä¹Ÿåœ¨å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆï¼ŒIstio å°†æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”åŠŸèƒ½ä¸°å¯Œçš„é€‰é¡¹ï¼Œå°¤å…¶é€‚åˆ Kubernetes åŸç”Ÿç¯å¢ƒã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä» AWS App Mesh è¿ç§»åˆ° Istio çš„è¿‡ç¨‹ï¼Œå¯¹æ¯”è¿™ä¸¤ç§æœåŠ¡ç½‘æ ¼ï¼Œå¹¶ä»‹ç»æˆ‘ä»¬å¼€å‘çš„ Tetrate Istio è¿ç§»å·¥å…·ï¼Œå¸®åŠ©ç®€åŒ–è¿™ä¸€è¿ç§»è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;app-mesh-vs-istioè¿ç§»å‡†å¤‡&#34;&gt;App Mesh vs Istioï¼šè¿ç§»å‡†å¤‡&lt;/h2&gt;
&lt;p&gt;ç”±äº AWS App Mesh å³å°†åœç”¨ï¼Œäº†è§£ App Mesh å’Œ Istio ä¹‹é—´çš„ç›¸ä¼¼æ€§å’Œå·®å¼‚å¯¹äºæˆåŠŸè¿ç§»è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®æ¯”è¾ƒç‚¹ï¼Œå¸®åŠ©æ‚¨å°†å½“å‰çš„åŸºç¡€è®¾æ–½ä¸ Istio æä¾›çš„åŠŸèƒ½å¯¹é½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¨é¢çš„åŠŸèƒ½&lt;/strong&gt;ï¼šApp Mesh å’Œ Istio éƒ½æä¾›æµé‡ç®¡ç†ã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨åŠŸèƒ½ï¼Œä½† Istio æä¾›äº†æ›´å¤šå¯è‡ªå®šä¹‰çš„é€‰é¡¹ï¼ŒåŒ…æ‹¬é«˜çº§æµé‡è·¯ç”±å’Œå¢å¼ºçš„é¥æµ‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘æ— å…³æ€§&lt;/strong&gt;ï¼šä¸ç´§å¯†é›†æˆ AWS çš„ App Mesh ä¸åŒï¼ŒIstio æ˜¯äº‘æ— å…³çš„ï¼Œå¯åœ¨å¤šäº‘æˆ–æ··åˆç¯å¢ƒä¸­æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜çº§å®‰å…¨&lt;/strong&gt;ï¼šIstio é»˜è®¤æ”¯æŒ mTLSï¼Œä¸ App Mesh ç›¸æ¯”ï¼Œæä¾›äº†æ›´å¹¿æ³›çš„å®‰å…¨åŠŸèƒ½å’Œç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;AWS å»ºè®® ECS å®¢æˆ·è¿ç§»åˆ° &lt;a href=&#34;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/service-connect.html&#34; title=&#34;Service Connect&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Service Connect&lt;/a&gt; è€Œ EKS å®¢æˆ·è¿ç§»åˆ° &lt;a href=&#34;https://aws.amazon.com/vpc/lattice/&#34; title=&#34;VPC Lattice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;VPC Lattice&lt;/a&gt;ã€‚å¯¹äºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å¼€æºè§£å†³æ–¹æ¡ˆï¼ŒIstio æ˜¯ä¸€ä¸ªå¾ˆæœ‰å¸å¼•åŠ›çš„é€‰æ‹©ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä» AWS App Mesh è¿ç§»åˆ° Istio çš„è¿‡ç¨‹ï¼Œå¹¶ä½¿ç”¨ Tetrate çš„è¿ç§»å·¥å…·è¿›è¡Œæ”¯æŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¯”è¾ƒ-app-meshservice-connectvpc-lattice-å’Œ-istio&#34;&gt;æ¯”è¾ƒ App Meshã€Service Connectã€VPC Lattice å’Œ Istio&lt;/h2&gt;
&lt;p&gt;åœ¨å¼€å§‹è¿ç§»ä¹‹å‰ï¼Œäº†è§£ AWS App Meshã€Service Connectã€VPC Lattice å’Œ Istio ä¹‹é—´çš„å…³é”®åŒºåˆ«éå¸¸é‡è¦ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;App Mesh&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Service Connect&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;VPC Lattice&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Istio&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç½‘ç»œå¯é æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ &lt;a href=&#34;https://envoyproxy.io/&#34; title=&#34;Envoy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; ä½œä¸º Sidecar ä»£ç†ï¼Œè¿›è¡Œå¼‚å¸¸æ£€æµ‹ã€å¥åº·æ£€æŸ¥å’Œé‡è¯•ï¼Œæ”¯æŒç²¾ç»†è°ƒæ•´ã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ Envoy ä½œä¸º Sidecar ä»£ç†ï¼Œä»…æ”¯æŒè¶…æ—¶è°ƒæ•´ã€‚&lt;/td&gt;
          &lt;td&gt;å†…ç½®å¥åº·æ£€æŸ¥å’Œé‡è¯•ï¼Œç”± AWS ç®¡ç†çš„å¯é æ€§ï¼Œä¸éœ€è¦ Sidecar ä»£ç†ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ Sidecar å’Œ Ambient æ¨¡å¼ï¼Œä½¿ç”¨ Envoy å¹¶å®Œå…¨æ”¯æŒç²¾ç»†åŒ–è°ƒæ•´ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;é«˜çº§æµé‡è·¯ç”±&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒé«˜çº§æµé‡è·¯ç”±ï¼Œå¦‚ A/B æµ‹è¯•å’Œé‡‘ä¸é›€å‘å¸ƒã€‚&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒé«˜çº§æµé‡è·¯ç”±ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒåŸºæœ¬çš„æµé‡è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒåŒ…æ‹¬ A/B æµ‹è¯•å’Œé‡‘ä¸é›€å‘å¸ƒåœ¨å†…çš„é«˜çº§æµé‡æ§åˆ¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¯è§‚æµ‹æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;éœ€è¦æ‰‹åŠ¨æ”¶é›†å’Œç›‘æ§æŒ‡æ ‡ã€‚&lt;/td&gt;
          &lt;td&gt;è‡ªåŠ¨å°†æŒ‡æ ‡å‘é€åˆ° Amazon CloudWatchã€‚&lt;/td&gt;
          &lt;td&gt;é›†æˆ AWS CloudWatch å’Œ X-Ray ç›‘æ§ã€‚&lt;/td&gt;
          &lt;td&gt;å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹æ€§ï¼Œæ”¯æŒ Prometheusã€Grafana å’Œ Jaegerã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é›†æˆ AWS Cloud Mapã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ AWS Cloud Mapã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ AWS æœåŠ¡å‘ç°æœºåˆ¶ã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ Kubernetes åŸç”Ÿçš„æœåŠ¡å‘ç°æœºåˆ¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒä¸ AWS PCA çš„ TLS å’ŒåŒå‘ TLSï¼ˆmTLSï¼‰ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ TLSï¼Œä¸æ”¯æŒ mTLSã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ mTLSã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ mTLS å’Œç»†ç²’åº¦çš„å®‰å…¨ç­–ç•¥ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;èµ„æºå…±äº«&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ª AWS è´¦æˆ·å…±äº«ç½‘æ ¼ã€‚&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒè·¨è´¦æˆ·å…±äº«å‘½åç©ºé—´ã€‚&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ª AWS è´¦æˆ·å…±äº«èµ„æºã€‚&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ªé›†ç¾¤å’Œäº‘éƒ¨ç½²ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;ä»‹ç»-tetrate-çš„-istio-è¿ç§»å·¥å…·&#34;&gt;ä»‹ç» Tetrate çš„ Istio è¿ç§»å·¥å…·&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ä½¿è¿ç§»è¿‡ç¨‹æ›´åŠ é¡ºåˆ©ï¼ŒTetrate å¼€å‘äº†ä¸€ä¸ª Istio è¿ç§»å·¥å…·åŒ…ï¼Œç›®å‰å¤„äºç§æœ‰çŠ¶æ€ï¼Œä½†å¯ä¾›å†…éƒ¨æˆ–ç»è¿‡æ‰¹å‡†çš„å®¢æˆ·é€šè¿‡ &lt;a href=&#34;https://resources.tetrate.dev/app-mesh-istio?__hstc=218802950.edcf2542a8010c44aa57b98adaef028a.1721092227167.1729818643207.1730268606576.91&amp;amp;__hssc=218802950.2.1730268606576&amp;amp;__hsfp=872206273&#34; title=&#34;æ­¤è¡¨å•&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤è¡¨å•&lt;/a&gt; ç”³è¯·ä½¿ç”¨ã€‚è¯¥å·¥å…·åŒ…å¸®åŠ©è‡ªåŠ¨è½¬æ¢ AWS App Mesh é…ç½®ä¸º Istio çš„ç­‰æ•ˆé…ç½®ï¼ŒåŒ…æ‹¬ Virtual Nodesã€Virtual Routers å’Œå…¶ä»–ç½‘ç»œç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®è€ƒé‡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;ï¼šApp Mesh å’Œ Istio çš„æœåŠ¡å‘ç°æ–¹å¼ä¸åŒã€‚Istio ä¾èµ– Kubernetes åŸç”Ÿçš„æœåŠ¡å‘ç°ï¼Œè€Œ App Mesh åˆ™é›†æˆ AWS Cloud Mapã€‚è¿ç§»è¿‡ç¨‹ä¸­ï¼Œéœ€ç›¸åº”è°ƒæ•´æœåŠ¡å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šIstio åŸç”Ÿæ”¯æŒæœåŠ¡ä¹‹é—´çš„ mTLSã€‚è™½ç„¶ AWS App Mesh ä¹Ÿæ”¯æŒ mTLSï¼Œä½†è¿ç§»è‡³ Istio éœ€è¦é…ç½® CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰å¹¶æ›´æ–°è¯ä¹¦ä»¥é€‚åº” Istio çš„å®‰å…¨æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµé‡ç®¡ç†&lt;/strong&gt;ï¼šIstio çš„ Virtual Services å’Œ Destination Rules æä¾›äº†æ¯” App Mesh çš„ Virtual Routers å’Œ Nodes æ›´é«˜çº§çš„æµé‡è·¯ç”±èƒ½åŠ›ã€‚è¿ç§»è¿‡ç¨‹ä¸­ï¼Œéœ€é¢å¤–é…ç½®ä»¥å»ºç«‹ç±»ä¼¼çš„è·¯ç”±è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä½¿ç”¨-tetrate-è¿ç§»å·¥å…·é€æ­¥å®Œæˆè¿ç§»&#34;&gt;ä½¿ç”¨ Tetrate è¿ç§»å·¥å…·é€æ­¥å®Œæˆè¿ç§»&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä½¿ç”¨æ­¤å·¥å…·çš„æœ‰æ•ˆæ­¥éª¤ï¼š&lt;/p&gt;
&lt;h3 id=&#34;å‰ææ¡ä»¶&#34;&gt;å‰ææ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¼€å§‹è¿ç§»ä¹‹å‰ï¼Œç¡®ä¿å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/doc/install&#34; title=&#34;Go&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/tools/#kubectl&#34; title=&#34;kubectl&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kubectl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/setup/getting-started/#download&#34; title=&#34;istioctl&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istioctl&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¡®ä¿åœ¨ EKS é›†ç¾¤ä¸Šæ­£ç¡®å®‰è£…å’Œé…ç½® AWS App Meshã€‚æ‚¨è¿˜éœ€è¦ä¸€ä¸ªåä¸º tetrate-tis-creds çš„ Kubernetes secretï¼Œç”¨äº Istio å®‰è£…ï¼Œè¯¦è§å·¥å…·æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥å·¥å…·è¿˜æä¾›é¢„æ£€æŸ¥å‘½ä»¤ï¼Œä»¥è¯†åˆ«è¿ç§»å‰çš„ä»»ä½•æ½œåœ¨é˜»ç¢å› ç´ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿è¡Œé¢„æ£€æŸ¥&#34;&gt;è¿è¡Œé¢„æ£€æŸ¥&lt;/h3&gt;
&lt;p&gt;ä¸ºç¡®ä¿è®¾ç½®å‡†å¤‡å°±ç»ªï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim precheck
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å‘½ä»¤å°†æ‰«æ App Mesh ç¯å¢ƒï¼Œæ ‡å‡ºä»»ä½•éœ€è¦è°ƒæ•´çš„é¡¹ï¼Œä»¥ç¡®ä¿æˆåŠŸè¿ç§»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿ç§»è¿‡ç¨‹&#34;&gt;è¿ç§»è¿‡ç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… Istio&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Istio è¿ç§»å·¥å…·åŒ…ç”Ÿæˆ IstioOperator é…ç½®å¹¶å®‰è£… Istioï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim generate iop &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; istioctl install â€“skip-confirmation -f â€“
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨ Istio ç½‘ç»œè§„åˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œç”Ÿæˆå¹¶åº”ç”¨ Istio ç½‘ç»œè§„åˆ™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim generate networking &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; kubectl apply -f â€“
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç§»é™¤ AWS App Mesh æ ‡ç­¾&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»å‘½åç©ºé—´ä¸­ç§»é™¤ç°æœ‰çš„ App Mesh æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¯¹äº default å‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace default &lt;span class=&#34;s2&#34;&gt;&amp;#34;appmesh.k8s.aws/sidecarInjectorWebhook-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨ Istio Sidecar æ³¨å…¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ·»åŠ æ ‡ç­¾ä»¥å¯ç”¨ Istio çš„è‡ªåŠ¨ Sidecar æ³¨å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace default istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å¯éƒ¨ç½²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºåº”ç”¨æ›´æ”¹å¹¶å¯åŠ¨æ–°çš„ Envoy Sidecar æ³¨å…¥ï¼Œé‡å¯éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl rollout restart deployment &amp;lt;deployment-name&amp;gt; -n &amp;lt;deployment-namespace&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è¿ç§»ç­–ç•¥&#34;&gt;è¿ç§»ç­–ç•¥&lt;/h3&gt;
&lt;p&gt;ä» AWS App Mesh è¿ç§»åˆ° Istio æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚åŸåœ°è¿ç§»ã€é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿éƒ¨ç½²ç­‰ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥ä¸è¿ç§»åˆ° VPC Lattice çš„ç­–ç•¥ç›¸ä¼¼ã€‚åˆé€‚çš„ç­–ç•¥å–å†³äºåº”ç”¨éœ€æ±‚ï¼Œå¦‚æ˜¯å¦éœ€è¦é›¶åœæœºæˆ–å®‰æ’ç»´æŠ¤çª—å£ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸåœ°è¿ç§»&lt;/strong&gt;ï¼šç”¨é…ç½®ä¸º Istio çš„æ–° Pods æ›¿æ¢å½“å‰ App Mesh çš„ Kubernetes Podsï¼Œé€‚åˆå¯å®¹å¿è¿ç§»è¿‡ç¨‹ä¸­çš„åœæœºçš„åº”ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è“ç»¿éƒ¨ç½²&lt;/strong&gt;ï¼šåœ¨æ–°å‘½åç©ºé—´ä¸­é…ç½®ä¸º Istio çš„åº”ç”¨å‰¯æœ¬ï¼Œè€ŒåŸå§‹éƒ¨ç½²ç»§ç»­è¿è¡Œ App Meshï¼Œæ— åœæœºåœ°é€æ­¥å°†æµé‡ä» App Mesh è¿ç§»åˆ° Istioã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡‘ä¸é›€å‘å¸ƒ&lt;/strong&gt;ï¼šä¸ App Mesh å¹¶è¡Œéƒ¨ç½² Istioï¼Œé€æ­¥å°†å°‘é‡æµé‡è½¬ç§»åˆ° Istioï¼Œç›‘æ§æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œé€æ­¥å¢åŠ æµé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†é˜¶æ®µè¿ç§»&lt;/strong&gt;ï¼šé€æ­¥è¿ç§»ç»„ä»¶æˆ–æœåŠ¡ï¼Œè€Œéä¸€æ¬¡æ€§è¿ç§»ï¼Œä»¥å‡å°‘é£é™©å¹¶å¸®åŠ©è¯†åˆ«æ½œåœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ‹è¯•å’ŒéªŒè¯&lt;/strong&gt;ï¼šåœ¨å®Œå…¨åˆ‡æ¢å‰ï¼Œè¿›è¡Œå…¨é¢æµ‹è¯•ï¼ŒéªŒè¯æœåŠ¡åŠŸèƒ½ã€å®‰å…¨æ€§å’Œæ€§èƒ½æŒ‡æ ‡ç¬¦åˆæˆ–è¶…å‡ºé¢„æœŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;ä» AWS App Mesh è¿ç§»åˆ° Istio å¯ä»¥è§£é”æµé‡ç®¡ç†ã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨æ–¹é¢çš„æ–°åŠŸèƒ½ã€‚Tetrate çš„ Istio è¿ç§»å·¥å…·ç®€åŒ–äº†è¿‡ç¨‹ï¼Œæä¾›äº†åˆ†æ­¥éª¤æ–¹æ³•ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®ï¼Œç¡®ä¿å¹³ç¨³è¿‡æ¸¡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨æœ‰å…´è¶£è¯•ç”¨ Tetrate çš„ Istio è¿ç§»å·¥å…·ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬â€”â€”è¯¥å·¥å…·ç›®å‰å¯ç§å¯†ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†å¾ˆä¹æ„è®¨è®ºè®¿é—®æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ¬¡è¿ç§»ä¸ä»…æ˜¯é‡‡ç”¨æ–°çš„æœåŠ¡ç½‘æ ¼ï¼Œæ›´æ˜¯ä¸€ä¸ªå……åˆ†åˆ©ç”¨ Istio å…¨é¢åŠŸèƒ½ã€æ”¯æŒå¤šäº‘éƒ¨ç½²ã€å¢å¼ºåŸºç¡€è®¾æ–½å¼¹æ€§çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æœ¬æ–‡æœ€åˆå‘è¡¨äº &lt;a href=&#34;https://tetrate.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/&#34; title=&#34;tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tetrate.io&lt;/a&gt;ã€‚&lt;/em&gt;&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>åœ°ä¸Šæ–‡ç‰©çœ‹å±±è¥¿ï¼šå®è—æ–‡ç‰©å¤§çœä¸è¯¥è¢«åŸ‹æ²¡</title>
      <link>https://jimmysong.io/blog/shanxi-trip/</link>
      <pubDate>Sat, 26 Oct 2024 12:07:25 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/shanxi-trip/</guid>
      <description>
        
        
        &lt;p&gt;æˆ‘å‰åä¸‰æ¬¡åˆ°è®¿è¿‡å±±è¥¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡æ˜¯ 2017 å¹´ 12 æœˆï¼Œå…¬å¸ç»„ç»‡å›¢å»ºï¼Œå»äº†å±±è¥¿å¤§åŒï¼Œæ¸¸è§ˆäº†æ‚¬ç©ºå¯ºã€äº‘å†ˆçŸ³çªŸå’ŒåŒ—å²³æ’å±±&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ¬¡æ˜¯ 2019 å¹´ 4 æœˆï¼Œæ¸…æ˜èŠ‚æœŸé—´ï¼Œå’Œå‡ ä½å¥½å‹è‡ªé©¾å»äº†å±±è¥¿äº”å°å±±ã€ä½›å…‰å¯ºã€é›é—¨å…³å’Œåº”å¿æœ¨å¡”&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ¬¡æ˜¯ 2021 å¹´ 6 æœˆï¼Œåˆ°å±±è¥¿æ™‹åŸå‚åŠ æœ‹å‹å©šç¤¼ï¼Œå› ä¸ºå½“æ—¶æ­£å€¼ç–«æƒ…æœŸï¼Œæ²¡æœ‰åŠæ³•è¿›åˆ°æ™¯åŒºæ¸¸è§ˆï¼Œåªæ˜¯ç”¨æ— äººæœºä¿¯ç°äº†ä¸‹ã€Œçš‡åŸç›¸åºœã€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å»å±±è¥¿å°±è¢«å±±è¥¿åšé‡çš„æ–‡åŒ–å†…æ¶µæ‰€æ‰“åŠ¨ï¼Œè€Œæœ€è¿‘éšç€é¦–æ¬¾å›½äº§ 3A æ¸¸æˆã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„ç«çˆ†ï¼Œæ¸¸æˆä¸­çš„å–æ™¯åœ°å±±è¥¿çš„å„ç§å¤å»ºç­‘æ¥è¿å‡ºåœˆã€‚ä¿—è¯è¯´â€åœ°ä¸‹æ–‡ç‰©çœ‹é™•è¥¿ï¼Œåœ°ä¸Šæ–‡ç‰©çœ‹å±±è¥¿â€œï¼Œå¦‚æ­¤å®è—æ–‡ç‰©å¤§çœä¸è¯¥è¢«åŸ‹æ²¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤§åŒ&#34;&gt;å¤§åŒ&lt;/h2&gt;
&lt;p&gt;å»å¤§åŒçš„æ—¶å€™æ˜¯ 12 æœˆï¼Œå½“åœ°çš„å¤©æ°”ä¸æ˜¯å¾ˆå¥½ï¼Œåˆ°å¤„éƒ½æ˜¯ç°è’™è’™çš„ã€‚å¤§åŒæ˜¯å±±è¥¿çœçœåŸŸå‰¯ä¸­å¿ƒåŸå¸‚ã€‚æ›¾æ˜¯åŒ—é­äº¬éƒ½ã€è¾½é‡‘é™ªéƒ½ï¼Œæœ‰â€œä¸‰ä»£äº¬åã€ä¸¤æœé‡é•‡â€ä¹‹ç§°ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/datong.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/datong.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¤§åŒä¸€éš…&#34;&gt;
  
  
  &lt;figcaption&gt;å¤§åŒä¸€éš…&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;äº‘å†ˆçŸ³çªŸ&#34;&gt;äº‘å†ˆçŸ³çªŸ&lt;/h3&gt;
&lt;p&gt;äº‘å†ˆçŸ³çªŸè”šä¸ºå£®è§‚ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¸¸è§ˆå¤ä»£çŸ³çªŸã€‚äº‘å†ˆçŸ³çªŸæ˜¯ä¸­å›½å››å¤§çŸ³çªŸä¹‹ä¸€ã€‚å…¶å§‹å‡¿äºåŒ—é­æ–‡æˆå¸æ—¶æœŸï¼Œå†æ—¶ 64 å¹´ã€‚çŸ³çªŸä¾å±±å¼€å‡¿ï¼Œä¸œè¥¿ç»µå»¶çº¦ 1 å…¬é‡Œï¼Œç°å­˜ä¸»è¦æ´çªŸ 45 ä¸ªï¼Œé™„å±æ´çªŸ 209 ä¸ªï¼Œå®ƒäº 2001 å¹´è¢«åˆ—å…¥â€œä¸–ç•Œæ–‡åŒ–é—äº§â€åå½•ï¼Œ2007 å¹´æˆä¸ºå›½å®¶é¦–æ‰¹ 5A çº§æ—…æ¸¸æ™¯åŒºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/yungangshiku.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/yungangshiku.webp&#34; alt=&#34;image&#34; data-caption=&#34;äº‘å†ˆçŸ³çªŸ&#34;&gt;
  
  
  &lt;figcaption&gt;äº‘å†ˆçŸ³çªŸ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;86 ç‰ˆã€Šè¥¿æ¸¸è®°ã€‹ç¬¬ 18 é›†ã€Šæ‰«å¡”è¾¨å¥‡å†¤ã€‹åœ¨äº‘å†ˆçŸ³çªŸæœ‰å¤šå¤„å–æ™¯ã€‚è¯¥é›†ä¸€å¼€å§‹ï¼Œå¸ˆå¾’å››äººåˆšæŠµè¾¾ç¥­èµ›å›½æ—¶è¡Œèµ°çš„åœºæ™¯ï¼Œå°±æ˜¯åœ¨äº‘å†ˆçŸ³çªŸè¥¿éƒ¨æ´çªŸå‰æ‹æ‘„çš„ã€‚åæ¥ï¼Œå­™æ‚Ÿç©ºèº²åœ¨çŸ³çªŸä¸Šé¢æŸ¥çœ‹åƒ§ä¼—è¢«æ®´æ‰“çš„åœºé¢ï¼Œä¹Ÿæ˜¯åœ¨æ­¤æ‹æ‘„ã€‚å†åæ¥ï¼Œä¸€ä½åƒ§ä¾£å‘å”åƒ§å¸ˆå¾’é€éœ²å†¤æƒ…ï¼Œç”±äºå‡ å¹´å‰å¯ºä¸­å¡”é¡¶çš„èˆåˆ©å­ä½›å®è¢«ç›—ï¼Œåƒ§ä¾£ä»¬å› æ­¤é­å—ä¸ç™½ä¹‹å†¤å’Œè‹¦éš¾ï¼Œè¿™ä¸€å¯¹è¯åœºæ™¯å®é™…ä¸Šæ˜¯åœ¨äº‘å†ˆçŸ³çªŸçš„ç¬¬äº”çªŸæ‹æ‘„å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŒ—å²³æ’å±±&#34;&gt;åŒ—å²³æ’å±±&lt;/h3&gt;
&lt;p&gt;æ”€çˆ¬åŒ—å²³æ’å±±ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ï¼Œæ’å±±çš„å±±åŠ¿è™½ç„¶é™©å³»ï¼Œä½†æ”€ç™»è¿‡ç¨‹ä¸­å¡åº¦ç›¸å¯¹è¾ƒä¸ºç¼“å’Œï¼Œæ²¡æœ‰ç‰¹åˆ«é™¡å³­éš¾è¡Œçš„è·¯æ®µã€‚æ’å±±çš„æµ·æ‹”çº¦ 2016.1 ç±³ã€‚æ’å±±çš„å‚ç›´è½å·®ç›¸å¯¹å…¶ä»–ä¸€äº›è‘—åé«˜å±±æ¥è¯´ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œå¤§çº¦åœ¨ 1000 å¤šç±³ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/hengshan.jpg&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/hengshan.jpg&#34; alt=&#34;image&#34; data-caption=&#34;åŒ—å²³æ’å±±&#34;&gt;
  
  
  &lt;figcaption&gt;åŒ—å²³æ’å±±&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æ‚¬ç©ºå¯º&#34;&gt;æ‚¬ç©ºå¯º&lt;/h3&gt;
&lt;p&gt;æ‚¬ç©ºå¯ºä½äºæ’å±±é‡‘é¾™å³¡è¥¿ä¾§ç¿ å±å³°å³­å£é—´ã€‚å§‹å»ºäºåŒ—é­åæœŸï¼Œä¸ºæœ¨è´¨æ¡†æ¶ç»“æ„ï¼Œå‘ˆâ€œä¸€é™¢ä¸¤æ¥¼â€å¸ƒå±€ï¼Œæ˜¯ä½›ã€é“ã€å„’ä¸‰æ•™åˆä¸€çš„ç‹¬ç‰¹å¯ºåº™ã€‚å®ƒä¸æ’å±±åœ°ç†ä½ç½®ç´§å¯†ç›¸é‚»ï¼Œæ¸¸å®¢æ¸¸è§ˆæ’å±±æ—¶å¸¸å°†æ‚¬ç©ºå¯ºä½œä¸ºé‡è¦æ™¯ç‚¹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/xuankongsi.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/xuankongsi.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ‚¬ç©ºå¯º&#34;&gt;
  
  
  &lt;figcaption&gt;æ‚¬ç©ºå¯º&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;å¿»å·&#34;&gt;å¿»å·&lt;/h2&gt;
&lt;p&gt;å¿»å·å¤ç§°â€œç§€å®¹â€ã€‚å®ƒæ˜¯å±±è¥¿é¢ç§¯æœ€å¤§çš„å¸‚ï¼Œæœ‰â€œæ™‹åŒ—é”é’¥â€ä¹‹ç§°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äº”å°å±±&#34;&gt;äº”å°å±±&lt;/h3&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/wutaishan.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/wutaishan.webp&#34; alt=&#34;image&#34; data-caption=&#34;äº”å°å±±&#34;&gt;
  
  
  &lt;figcaption&gt;äº”å°å±±&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;äº”å°å±±æ˜¯ä¸­å›½ä½›æ•™å››å¤§åå±±ä¹‹é¦–ã€‚å› äº”åº§å±±å³°å³°é¡¶å¹³å¦å¦‚å°å¾—åï¼Œæœ‰ä¸œå°æœ›æµ·å³°ã€è¥¿å°æŒ‚æœˆå³°ã€å—å°é”¦ç»£å³°ã€åŒ—å°å¶æ–—å³°ã€ä¸­å°ç¿ å²©å³°ã€‚å…¶æœ€é«˜æµ·æ‹” 3061 ç±³ï¼Œæœ‰â€œååŒ—å±‹è„Šâ€ä¹‹ç§°ã€‚è¿™é‡Œå¯ºåº™æ—ç«‹ï¼Œç°å­˜åŒ—é­ã€å”ç­‰æœä»£å¯ºåº™å»ºç­‘ 68 å¤„ï¼Œå¦‚æ˜¾é€šå¯ºã€å¡”é™¢å¯ºç­‰ã€‚å®ƒè¿˜æ˜¯ä¸–ç•Œæ–‡åŒ–é—äº§ï¼Œè‡ªç„¶æ™¯è§‚ä¸äººæ–‡æ™¯è§‚å®Œç¾èåˆï¼Œæ˜¯è‘—åçš„é¿æš‘èƒœåœ°å’Œä½›æ•™åœ£åœ°ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113371735134030&amp;amp;bvid=BV1Jb1pYHEtA&amp;amp;cid=26467238392&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;äº”å°å±±çš„ä½›å¯ºä¸­æœ‰å¤§é‡çš„å£ç”»ï¼Œä½†æ˜¯æƒ³è¦ç†è§£å®ƒä»¬å°±éœ€è¦ä¸€å®šçš„çŸ¥è¯†ç§¯ç´¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/fuhuluohan.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/fuhuluohan.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä¼è™ç½—æ±‰&#34;&gt;
  
  
  &lt;figcaption&gt;ä¼è™ç½—æ±‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¼è™ç½—æ±‰æ˜¯ä½›æ•™åå…«ç½—æ±‰ä¸­çš„ä¸€ä½ï¼Œä»–çš„æ•…äº‹è±¡å¾ç€é™æœé‡æ€§ã€å¹³æ¯äººç±»å†…å¿ƒçš„ç‹‚é‡å’Œæ¬²æœ›ã€‚è€è™é€šå¸¸è¢«è§†ä¸ºä¸€ç§å¼ºå¤§ä¸”å±é™©çš„åŠ¨ç‰©ï¼Œè±¡å¾ç€äººç±»çš„ææƒ§ã€æ¬²æœ›æˆ–å…¶ä»–è´Ÿé¢æƒ…ç»ªã€‚è€Œç½—æ±‰é™ä¼è€è™çš„å½¢è±¡ï¼Œå±•ç¤ºäº†é€šè¿‡ä¿®è¡Œã€æ™ºæ…§å’Œæ…ˆæ‚²æ¥é™ä¼å†…åœ¨å’Œå¤–åœ¨çš„å›°å¢ƒä¸æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/liudaolunhui.jpg&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/liudaolunhui.jpg&#34; alt=&#34;image&#34; data-caption=&#34;å…­é“è½®å›&#34;&gt;
  
  
  &lt;figcaption&gt;å…­é“è½®å›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™å¼ å›¾ç‰‡æ˜¾ç¤ºçš„æ˜¯â€œè½®å›å›¾â€ï¼Œä¹Ÿç§°ä¸ºâ€œç”Ÿå‘½ä¹‹è½®â€ï¼ˆè—è¯­ï¼šà½¦à¾à½¢à¼‹à½ à½à½¼à½¢, è‹±æ–‡ï¼šWheel of Lifeï¼‰ã€‚è¿™æ˜¯ä½›æ•™è‰ºæœ¯ä¸­çš„ä¸€ä¸ªé‡è¦è±¡å¾ï¼Œæè¿°äº†ä¼—ç”Ÿåœ¨å…­é“è½®å›ä¸­çš„ç”Ÿå‘½çŠ¶æ€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸­å¿ƒéƒ¨åˆ†çš„ä¸‰ç§åŠ¨ç‰©&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸­å¿ƒæœ‰ä¸‰ç§åŠ¨ç‰©ï¼š&lt;strong&gt;å…¬é¸¡&lt;/strong&gt;ã€&lt;strong&gt;è›‡&lt;/strong&gt;å’Œ&lt;strong&gt;çŒª&lt;/strong&gt;ï¼Œè±¡å¾ç€è½®å›çš„ä¸‰æ¯’ï¼Œåˆ†åˆ«æ˜¯&lt;strong&gt;è´ª&lt;/strong&gt;ã€&lt;strong&gt;å—”&lt;/strong&gt;å’Œ&lt;strong&gt;ç—´&lt;/strong&gt;ã€‚è¿™äº›æ˜¯å¯¼è‡´ä¼—ç”Ÿè½®å›çš„æ ¹æœ¬åŸå› ï¼š
&lt;ul&gt;
&lt;li&gt;å…¬é¸¡è±¡å¾â€œè´ªâ€ã€‚&lt;/li&gt;
&lt;li&gt;è›‡è±¡å¾â€œå—”â€ã€‚&lt;/li&gt;
&lt;li&gt;çŒªè±¡å¾â€œç—´â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤–åœˆçš„é»‘ç™½è‰²éƒ¨åˆ†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç´§é‚»ä¸­å¿ƒçš„é»‘ç™½åœ†ç¯ä»£è¡¨è½®å›ä¸­çš„&lt;strong&gt;å–„é“&lt;/strong&gt;å’Œ&lt;strong&gt;æ¶é“&lt;/strong&gt;ã€‚ç™½è‰²éƒ¨åˆ†æ˜¾ç¤ºä¼—ç”Ÿé€šè¿‡å–„è¡Œç´¯ç§¯åŠŸå¾·è¿›å…¥æ›´å¥½çš„å¢ƒç•Œï¼Œè€Œé»‘è‰²éƒ¨åˆ†ä»£è¡¨æ¶è¡Œå¯¼è‡´å •å…¥ä½åŠ£çš„å¢ƒç•Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…­é“è½®å›&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾ä¸­çš„å…­ä¸ªåŒºåŸŸä»£è¡¨â€œå…­é“è½®å›â€ï¼Œå³ä¼—ç”Ÿå¯èƒ½ç»å†çš„å…­ç§å­˜åœ¨çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤©é“&lt;/strong&gt;ï¼ˆä¸Šæ–¹ï¼‰ï¼šå–„ä¸šç§¯ç´¯å¤šçš„ä¼—ç”Ÿä¼šç”Ÿäºå¤©ç•Œï¼Œäº«å—è¾ƒä¸ºå®‰ä¹çš„ç”Ÿæ´»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äººé“&lt;/strong&gt;ï¼ˆå³ä¸Šï¼‰ï¼šäººç±»çš„å¢ƒç•Œï¼Œæœ€æœ‰å¯èƒ½ä¿®è¡Œæˆä½›ï¼Œè„±ç¦»è½®å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜¿ä¿®ç½—é“&lt;/strong&gt;ï¼ˆå³ä¸‹ï¼‰ï¼šå¥½æ–—çš„ä¼—ç”Ÿï¼Œæ‹¥æœ‰å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†å†…å¿ƒå¸¸æ€€å«‰å¦’å’Œæ„¤æ€’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç•œç”Ÿé“&lt;/strong&gt;ï¼ˆå·¦ä¸‹ï¼‰ï¼šä»¥æ„šæ˜§å’Œæ— çŸ¥ä¸ºç‰¹ç‚¹çš„ç”Ÿå‘½çŠ¶æ€ï¼Œå¸¸å—è‹¦å½¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¥¿é¬¼é“&lt;/strong&gt;ï¼ˆå·¦ä¸Šï¼‰ï¼šè´ªæ¬²æ— å°½çš„çŠ¶æ€ï¼Œé¥¿é¬¼æ°¸è¿œæ— æ³•æ»¡è¶³è‡ªå·±çš„æ¬²æœ›ï¼Œå¤„äºæåº¦ç—›è‹¦ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°ç‹±é“&lt;/strong&gt;ï¼ˆä¸‹æ–¹ï¼‰ï¼šæœ€ç—›è‹¦çš„å¢ƒç•Œï¼Œå› æ¶ä¸šè€Œå •å…¥ï¼Œå—æå¤§çš„æŠ˜ç£¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤–åœˆä»£è¡¨åäºŒå› ç¼˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾å¤–çš„æœ€å¤–åœˆä»£è¡¨åäºŒå› ç¼˜ï¼Œæ˜¯è½®å›çš„å› æœé“¾ï¼Œè¯´æ˜äº†ä¼—ç”Ÿå¦‚ä½•å› æ— æ˜å’Œä¸šåŠ›é™·å…¥è½®å›çš„å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ä½›å…‰å¯º&#34;&gt;ä½›å…‰å¯º&lt;/h3&gt;
&lt;p&gt;ä½›å…‰å¯ºåœ¨å¿»å·ã€‚å…·ä½“ä½äºå±±è¥¿çœå¿»å·å¸‚äº”å°å¿è±†æ‘é•‡ä¸œåŒ—çš„ä½›å…‰å±±ä¸­ã€‚ä½›å…‰å¯ºå§‹å»ºäºåŒ—é­å­æ–‡å¸æ—¶æœŸï¼ˆ471ï¼499 å¹´ï¼‰ï¼Œå”å¤§ä¸­åä¸€å¹´ï¼ˆ857 å¹´ï¼‰é‡å»ºã€‚å¯ºå†…ç°æœ‰æ®¿ã€å ‚ã€æ¥¼ã€é˜ç­‰ä¸€ç™¾äºŒåä½™é—´ï¼Œå…¶ä¸­ä¸œå¤§æ®¿ä¸ºå”ä»£å»ºç­‘ï¼Œæ–‡æ®Šæ®¿ä¸ºé‡‘ä»£å»ºç­‘ï¼Œå…¶ä½™å»ºç­‘ä¸»è¦ä¸ºæ˜ã€æ¸…æ—¶æœŸçš„é£æ ¼ã€‚å…¶å”ä»£å»ºç­‘ã€é›•å¡‘ã€å£ç”»ã€é¢˜è®°ï¼Œå…·æœ‰æé«˜çš„å†å²ä»·å€¼å’Œè‰ºæœ¯ä»·å€¼ã€‚1961 å¹´ï¼Œä½›å…‰å¯ºè¢«å›½åŠ¡é™¢å…¬å¸ƒä¸ºç¬¬ä¸€æ‰¹å…¨å›½é‡ç‚¹æ–‡ç‰©ä¿æŠ¤å•ä½ï¼›2009 å¹´ï¼ŒåŒ…æ‹¬ä½›å…‰å¯ºåœ¨å†…çš„äº”å°å±±è¢«è”åˆå›½æ•™ç§‘æ–‡ç»„ç»‡ä¸–ç•Œé—äº§å§”å‘˜ä¼šåˆ—å…¥ã€Šä¸–ç•Œé—äº§åå½•ã€‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/shanxi-trip/foguangsi.jpg&#34; data-img=&#34;https://jimmysong.io/img/blog/shanxi-trip/foguangsi.jpg&#34; alt=&#34;image&#34; data-caption=&#34;ä½›å…‰å¯º&#34;&gt;
  
  
  &lt;figcaption&gt;ä½›å…‰å¯º&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;é›é—¨å…³&#34;&gt;é›é—¨å…³&lt;/h3&gt;
&lt;p&gt;é›é—¨å…³æ˜¯ä½äºå¿»å·å¸‚ä»£å¿å¿åŸä»¥åŒ—çº¦20å…¬é‡Œå¤„é›é—¨å±±ä¸­ï¼Œæ˜¯ä¸€ä¸ªå’½å–‰è¦é“ï¼Œå®ƒæ˜¯é•¿åŸä¸Šçš„é‡è¦å…³éš˜ï¼Œä»¥åœ°åŠ¿é™©è¦ã€å†å²ä¸Šæˆ˜äº‹é¢‘ç¹è€Œé—»åï¼Œè§è¯äº†ä¼—å¤šæœä»£çš„å†›äº‹é˜²å¾¡å’Œæ°‘æ—äº¤èã€‚ç¬¬ä¸€æ¬¡å¬è¯´é›é—¨è¿™ä¸ªåœ°åè¿˜æ˜¯ä»å”ä»£è¯—äººæè´ºçš„ã€Šé›é—¨å¤ªå®ˆè¡Œã€‹ï¼šâ€œé»‘äº‘å‹åŸåŸæ¬²æ‘§ï¼Œç”²å…‰å‘æ—¥é‡‘é³å¼€ã€‚è§’å£°æ»¡å¤©ç§‹è‰²é‡Œï¼Œå¡ä¸Šç‡•è„‚å‡å¤œç´«ã€‚åŠå·çº¢æ——ä¸´æ˜“æ°´ï¼Œéœœé‡é¼“å¯’å£°ä¸èµ·ã€‚æŠ¥å›é»„é‡‘å°ä¸Šæ„ï¼Œææºç‰é¾™ä¸ºå›æ­»ã€‚â€æè´ºå†™ã€Šé›é—¨å¤ªå®ˆè¡Œã€‹æ—¶çº¦åœ¨814å¹´ï¼ˆå…ƒå’Œä¹å¹´ï¼‰å…«æœˆå‰ååŒ—æ¸¸é›é—¨ã€‚è™½ç„¶è¯—ä¸­æè¿°çš„å¹¶éé›é—¨å…³çš„ç‰¹å®šæˆ˜äº‰ï¼Œä½†åˆ›ä½œåœ°ç‚¹é è¿‘é›é—¨å…³ï¼Œé›é—¨åœ°åŒºçš„è¾¹å¡æ°›å›´ã€æˆ˜äº‰å†å²ç­‰å¯¹æè´ºçš„åˆ›ä½œäº§ç”Ÿäº†å½±å“ï¼Œä½¿å…¶åœ¨è¯—ä¸­è¥é€ å‡ºäº†ç´§å¼ ã€æ‚²å£®çš„æˆ˜äº‰åœºæ™¯å’Œæ°›å›´ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113371668022523&amp;amp;bvid=BV1bg1pYeEsZ&amp;amp;cid=26467043445&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;å»è¿‡é’å²›çš„äººåº”è¯¥éƒ½çŸ¥é“é’å²›æœ‰ä¸€ä¸ªè‘—åçš„â€œå…«å¤§å…³â€ï¼ŒåŸä»¥ä¸ºé›é—¨å…³ä¼šå±äºâ€œå…«å¤§å…³â€ä¹‹ä¸€ï¼Œæœªæ–™åˆ°å±…ç„¶ä¸åœ¨å…¶ä¸­ã€‚è¿™é‡Œæ˜¯å¤ä»£ä¸­åŸåœ°åŒºä¸åŒ—æ–¹æ¸¸ç‰§æ°‘æ—çš„åˆ†ç•Œçº¿ï¼Œå…¶åœ°åŠ¿é™©è¦ï¼Œâ€œå¤–å£®å¤§åŒä¹‹è—©å«ï¼Œå†…å›ºå¤ªåŸä¹‹é”é’¥ï¼Œæ ¹æŠµä¸‰å…³ï¼Œå’½å–‰å…¨æ™‹â€ï¼Œè®¸å¤šæœä»£éƒ½åœ¨æ­¤é‡å…µæŠŠå®ˆï¼Œæ˜¯å¤ä»£å…µå®¶å¿…äº‰ä¹‹åœ°ã€‚å†å²ä¸Šï¼Œæ— æ•°æ¬¡çš„æˆ˜äº‰éƒ½å›´ç»•é›é—¨å…³å±•å¼€ã€‚ä¾‹å¦‚ï¼ŒåŒ—å®‹æ—¶æœŸï¼Œæ¨å®¶å°†å°±æ›¾åœ¨æ­¤æŠµå¾¡è¾½å†›çš„å…¥ä¾µã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœ”å·&#34;&gt;æœ”å·&lt;/h2&gt;
&lt;p&gt;æœ”å·çš„æ—…æ¸¸èµ„æºç›¸å¯¹äºå¿»å·åŒ®ä¹äº†è®¸å¤šï¼Œä¸ºäººæ‰€ç†ŸçŸ¥çš„å¤§æ¦‚åªæœ‰åº”å¿æœ¨å¡”ã€æ¡‘å¹²æ²³ã€‚æˆ‘ä¹Ÿåªå»è¿‡åº”å¿æœ¨å¡”ï¼Œå¯¹äºå¾ˆå¤šå¤–çœäººï¼Œå¯èƒ½éƒ½ä¸çŸ¥é“åº”å¿å±äºæœ”å·å§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åº”å¿æœ¨å¡”&#34;&gt;åº”å¿æœ¨å¡”&lt;/h3&gt;
&lt;p&gt;åº”å¿æœ¨å¡”ä½äºä¸€ä¸ªå°å¿åŸï¼Œå¯ä»¥è¯´è¿™ä¸ªå¿åŸå› è¯¥æœ¨å¡”è€Œé—»åï¼Œä»èˆªæ‹è§†è§’æ¥çœ‹ï¼Œè¯¥å¡”å·²æœ‰ä¸€å®šç¨‹åº¦çš„æ­ªæ–œã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113371550648022&amp;amp;bvid=BV1a11pY6EaJ&amp;amp;cid=26466584412&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;åº”å¿æœ¨å¡”å…¨ç§°ä½›å®«å¯ºé‡Šè¿¦å¡”ï¼Œä½äºå±±è¥¿çœæœ”å·å¸‚åº”å¿ã€‚å»ºäºè¾½æ¸…å®äºŒå¹´ï¼ˆ1056 å¹´ï¼‰ã€‚å¡”é«˜ 67.31 ç±³ï¼Œåº•å±‚ç›´å¾„ 30.27 ç±³ï¼Œå‘ˆå¹³é¢å…«è§’å½¢ã€‚å®ƒæ˜¯ä¸–ç•Œä¸Šç°å­˜æœ€é«˜ã€æœ€å¤è€çš„çº¯æœ¨ç»“æ„æ¥¼é˜å¼å»ºç­‘ã€‚å…¨å¡”æ— é’‰æ— é“†ï¼Œç”±æ•°ä¸‡ä¸ªæœ¨æ„ä»¶æ­å»ºï¼Œå…±ç”¨æ–—æ ± 54 ç§ï¼Œæœ‰â€œæ–—æ ±åšç‰©é¦†â€ä¹‹ç§°ã€‚æœ¨å¡”å†ç»é£é›¨ã€åœ°éœ‡ã€ç‚®å‡»ç­‰ä»å±¹ç«‹ä¸å€’ï¼Œä¸æ¯”è¨æ–œå¡”ã€åŸƒè²å°”é“å¡”å¹¶ç§°â€œä¸–ç•Œä¸‰å¤§å¥‡å¡”â€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ™‹åŸ&#34;&gt;æ™‹åŸ&lt;/h2&gt;
&lt;p&gt;æ™‹åŸæ˜¯ä½äºå±±è¥¿çœä¸œå—éƒ¨çš„åŸå¸‚ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„ç…¤ç‚­èµ„æºï¼Œæ˜¯å±±è¥¿çœé‡è¦çš„èƒ½æºé‡åŒ–å·¥åŸºåœ°ã€‚å› ä¸ºå»å±±è¥¿æ˜¯ä¸ºäº†å‚åŠ æœ‹å‹çš„å©šç¤¼ï¼Œå¾…çš„æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œè€Œä¸”è¿˜æ˜¯åœ¨ç–«æƒ…æœŸé—´ï¼Œå¾ˆå¤šæ™¯åŒºéƒ½æœªå¼€æ”¾ï¼Œåªæ˜¯ç”¨æ— äººæœºåŒ†åŒ†æ¸¸è§ˆäº†ä¸‹çš‡åŸç›¸åºœã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113371970012277&amp;amp;bvid=BV1Yc1pY6E2n&amp;amp;cid=26468090617&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;çš‡åŸç›¸åºœæ˜¯ä½äºå±±è¥¿çœæ™‹åŸå¸‚é˜³åŸå¿åŒ—ç•™é•‡çš„ä¸€åº§æ˜æ¸…åŸå ¡å¼å®˜å®…å»ºç­‘ç¾¤ï¼Œä¸ºåº·ç†™å¤§å¸çš„è€å¸ˆã€ã€Šåº·ç†™å­—å…¸ã€‹çš„æ€»è£å®˜é™ˆå»·æ•¬çš„æ•…å±…ï¼Œæœ‰â€œä¸­å›½åŒ—æ–¹ç¬¬ä¸€æ–‡åŒ–å·¨æ—ä¹‹å®…â€çš„ç¾èª‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ„Ÿæƒ³&#34;&gt;æ„Ÿæƒ³&lt;/h2&gt;
&lt;p&gt;å‡ æ¬¡å»å±±è¥¿ï¼Œä½“ä¼šåˆ°â€œè¡¨é‡Œå±±æ²³â€å’Œç…¤ç‚­å¤§çœèµ„æºç¦€èµ‹ã€‚ä½†å»è¿‡çš„åŸå¸‚ä¸é€‚åˆåº¦å‡ï¼Œæ›´é€‚åˆæœæ‹œå’Œè®¿å¤ã€‚å±±è¥¿æ™¯åŒºåˆ†æ•£ï¼Œæ¶µç›–å¤šé¢†åŸŸæ—…æ¸¸èµ„æºå´åˆ†å¸ƒä¸åŒåœ°åŒºï¼Œè·ç¦»è¿œã€‚æ¸¸å®¢å¥”æ³¢è€—æ—¶è€—åŠ›ï¼Œå¢åŠ æˆæœ¬å’Œç–²åŠ³åº¦ï¼Œé™ä½æ¸¸ç©æ•ˆç‡å’Œä½“éªŒæ„Ÿã€‚éƒ¨åˆ†æ™¯åŒºè¿‡åº¦ä¾èµ–é—¨ç¥¨ç›ˆåˆ©æœ‰å¼Šç«¯ï¼Œé…å¥—è®¾æ–½ä¸å®Œå–„ï¼Œé¤é¥®è´­ç‰©é€‰æ‹©æœ‰é™ä¸”å“è´¨ä¸ä¸€ï¼Œæ´»åŠ¨é¡¹ç›®å¼€å‘æ»åï¼Œæ¸¸å®¢åœç•™çŸ­ï¼Œéš¾æ„Ÿå—é­…åŠ›ä»·å€¼ã€‚æ–‡ç‰©ä¿æŠ¤æœ‰ä¸è¶³ï¼Œå±±è¥¿æ–‡ç‰©å¤§çœå´ä¿®ç¼®ä¸åŠæ—¶ã€ä¿æŠ¤ä¸åˆ°ä½ï¼Œå½±å“ä¿å­˜å±•ç¤ºï¼Œæ¸¸å®¢éš¾é¢†ç•¥ä»·å€¼ï¼Œå¨èƒæ–‡ç‰©å®‰å…¨å¯æŒç»­ã€‚å±±è¥¿æ—…æ¸¸èµ„æºæ–‡åŒ–å†…æ¶µæ·±ï¼Œå¯¹æ¸¸å®¢æ–‡åŒ–ç´ å…»è¦æ±‚é«˜ã€‚æ™¯ç‚¹ä¸“ä¸šçŸ¥è¯†å¤šï¼Œæ¸¸å®¢æ˜“èµ°é©¬è§‚èŠ±ï¼Œæ™¯åŒºæ–‡åŒ–è®²è§£æ™®åŠä¸è¶³ï¼Œå½±å“ä½“éªŒæ·±åº¦æ»¡æ„åº¦ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¸Œæœ›éšç€ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹è®©å±±è¥¿æ—…æ¸¸çˆ†ç«ä¹‹é™…ï¼Œè®©æ›´å¤šäººå…³æ³¨å¤å»ºç­‘å’Œé—è¿¹ä¿æŠ¤ï¼Œä¸ªäººè¿˜è¦å¢åŠ å¯¹å¤å»ºç­‘å’Œæ–‡ç‰©çš„æ–‡åŒ–ç´ å…»ï¼Œæ‰èƒ½æ›´å¥½é¢†ç•¥å…¶ä¸­çš„æ–‡åŒ–å†…æ¶µã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å¤šé›†ç¾¤ PKI ä¸ Istio å®è·µï¼šä¸ºæœåŠ¡ç½‘æ ¼æ„å»ºå¯ä¿¡ä¸”å¯æ‰©å±•çš„ PKI</title>
      <link>https://jimmysong.io/blog/multi-cluster-pki-istio-recipe/</link>
      <pubDate>Wed, 16 Oct 2024 11:51:57 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/multi-cluster-pki-istio-recipe/</guid>
      <description>
        
        
        &lt;p&gt;ä½œè€…ï¼šCristofer TenEyckï¼ˆKeyfactor é«˜çº§è§£å†³æ–¹æ¡ˆå·¥ç¨‹å¸ˆï¼‰å’Œ Jimmy Songï¼ˆTetrate å¸ƒé“å¸ˆï¼‰&lt;/p&gt;
&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨äº‘åŸç”Ÿåº”ç”¨ç¨‹åºä¸æ–­å‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œç¡®ä¿è·¨å¤šä¸ªé›†ç¾¤çš„æœåŠ¡ç½‘æ ¼å®‰å…¨å¯¹äºä¿è¯å®‰å…¨æ€§å’Œåˆè§„æ€§è‡³å…³é‡è¦ã€‚Istio ä½œä¸ºé¢†å…ˆçš„å¼€æºæœåŠ¡ç½‘æ ¼ï¼Œæä¾›äº†ç”¨äºä¿æŠ¤å¾®æœåŠ¡ä¹‹é—´é€šä¿¡çš„å·¥å…·ã€‚ç„¶è€Œï¼Œåœ¨æ­¤ç¯å¢ƒä¸­å®æ–½ä¸€ä¸ªå¼ºå¤§ä¸”å¯æ‰©å±•çš„å…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰æ¥ç®¡ç†è¯ä¹¦ä»ç„¶æ˜¯ä¸€ä¸ªé‡å¤§æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä½¿ç”¨ EJBCA å¼€æº PKI ä¸ºè·¨å¤šä¸ªé›†ç¾¤çš„ Istio æœåŠ¡ç½‘æ ¼å®ç° PKI è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»è®¾ç½® EJBCAã€é…ç½® cert-manager çš„ EJBCA å¤–éƒ¨ç­¾å‘å™¨ï¼Œä»¥åŠç¡®ä¿ Istio å·¥ä½œè´Ÿè½½çš„è¯ä¹¦è‡ªåŠ¨ç»­æœŸçš„è¿‡ç¨‹ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ æ„å»ºå¯ä¿¡ä¸”å¯æ‰©å±•çš„ PKIï¼Œå®ç°å®‰å…¨ã€åˆè§„ä¸”å…·æœ‰å¼¹æ€§çš„æœåŠ¡ç½‘æ ¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆé€‰æ‹©å¤šé›†ç¾¤ï¼Ÿéšç€ç»„ç»‡æ‰©å¤§å…¶ Kubernetes åŸºç¡€è®¾æ–½ï¼Œå¤šé›†ç¾¤éƒ¨ç½²æ­£å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚å¤šé›†ç¾¤ Istio è®¾ç½®æä¾›äº†å¢å¼ºçš„å¯ç”¨æ€§ã€å®¹é”™æ€§ä»¥åŠè·¨é›†ç¾¤çš„å·¥ä½œè´Ÿè½½éš”ç¦»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç†è§£-pki-åŠå…¶åœ¨æœåŠ¡ç½‘æ ¼ä¸­çš„ä½œç”¨&#34;&gt;ç†è§£ PKI åŠå…¶åœ¨æœåŠ¡ç½‘æ ¼ä¸­çš„ä½œç”¨&lt;/h2&gt;
&lt;p&gt;PKI æ˜¯ç°ä»£æ•°å­—å®‰å…¨çš„åŸºçŸ³ã€‚å®ƒæ¶‰åŠç®¡ç†å¯†é’¥å’Œè¯ä¹¦ï¼Œä»¥ç¡®ä¿ç”¨æˆ·ã€åº”ç”¨ç¨‹åºæˆ–æœåŠ¡ç­‰å®ä½“ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚åœ¨åƒ Istio è¿™æ ·çš„æœåŠ¡ç½‘æ ¼ä¸­ï¼Œæœ‰æ•ˆçš„ PKI å¯¹äºä¿æŠ¤å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œå°¤å…¶æ˜¯åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­ï¼Œè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;EJBCA æä¾›äº†ä¸€ä¸ªç”¨äºå¤§è§„æ¨¡ç®¡ç† PKI çš„å¼€æºè§£å†³æ–¹æ¡ˆã€‚ä¸ OpenSSL æˆ– Istio å†…ç½®çš„ PKI ç­‰å…¶ä»–é€‰é¡¹ç›¸æ¯”ï¼ŒEJBCA æä¾›äº†ä¸€ä¸ªåŠŸèƒ½é½å…¨ã€ä¼ä¸šçº§çš„ PKIï¼Œé€‚ç”¨äºä»ç®€å•åˆ°æ›´å¤æ‚å’Œå¤šç”¨é€”çš„éƒ¨ç½²ã€‚EJBCA çš„èƒ½åŠ›è¶…è¶Šäº†ä»…ä»…ç­¾å‘ mTLS è¯ä¹¦ï¼Œæä¾›äº†åˆè§„æ€§ç‰¹æ€§ã€å®‰å…¨çš„å¯æ‰©å±•æ€§ã€å¯†ç çµæ´»æ€§ï¼Œä»¥åŠä¸å¹¿æ³›çš„åº”ç”¨ç¨‹åºé›†æˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;istioejbca-å’Œ-cert-manager&#34;&gt;Istioã€EJBCA å’Œ cert-manager&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ EJBCA ä¸ºå¤šé›†ç¾¤ Istio ç¯å¢ƒè®¾ç½® PKIã€‚ä»¥ä¸‹æ˜¯åŒ…å«çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒå‡†å¤‡&lt;/strong&gt;ï¼šæˆ‘ä»¬ä½¿ç”¨äº†ç”±ä¸»é›†ç¾¤å’Œè¿œç¨‹é›†ç¾¤ç»„æˆçš„ MicroK8s å¤šé›†ç¾¤ Istio è®¾ç½®ã€‚ä¸¤ä¸ªé›†ç¾¤éƒ½é…ç½®ä¸ºä½¿ç”¨ EJBCA ä½œä¸ºæ ¹è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cert-manager é›†æˆ&lt;/strong&gt;ï¼šæˆ‘ä»¬å±•ç¤ºäº† cert-manager ä¸ EJBCA çš„é›†æˆï¼ŒåŒ…æ‹¬ EJBCA è‡ªå®šä¹‰ç­¾å‘å™¨çš„é…ç½®ã€‚cert-manager å°†å¤„ç†è¯ä¹¦çš„ç­¾å‘å’Œç»­æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨è¯ä¹¦ç»­æœŸ&lt;/strong&gt;ï¼šPKI ç®¡ç†ä¸­çš„ä¸€ä¸ªå…³é”®æŒ‘æˆ˜æ˜¯ç¡®ä¿è¯ä¹¦åœ¨åˆ°æœŸå‰è‡ªåŠ¨ç»­æœŸã€‚cert-manager ä¸ EJBCA ä¸€èµ·ï¼Œå¯ä»¥åœ¨æ‰€æœ‰é›†ç¾¤ä¸­å®ç°æ— ç¼ã€å¯¹åº”ç”¨ç¨‹åºé€æ˜çš„è¯ä¹¦ç»­æœŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/multi-cluster-pki-istio-recipe/arch.webp&#34; data-img=&#34;/blog/multi-cluster-pki-istio-recipe/arch.webp&#34; data-width=&#34;3444&#34; data-height=&#34;1824&#34; alt=&#34;image&#34; data-caption=&#34;æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä½¿ç”¨-ejbca-ä½œä¸ºå¤–éƒ¨-ca-çš„-istio-æ¶æ„è®¾ç½®é«˜çº§æ‘˜è¦&#34;&gt;ä½¿ç”¨ EJBCA ä½œä¸ºå¤–éƒ¨ CA çš„ Istio æ¶æ„è®¾ç½®é«˜çº§æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;æœ¬èŠ‚æ¦‚è¿°äº†ä½¿ç”¨ EJBCA ä½œä¸ºå¤–éƒ¨è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰åœ¨ Kubernetes é›†ç¾¤ä¸Šè®¾ç½® Istio çš„æ­¥éª¤ã€‚è¯¥è®¾ç½®æ¶‰åŠé…ç½®ä¸¤ä¸ªå¸¦æœ‰ MetalLB ç”¨äºè´Ÿè½½å‡è¡¡çš„ MicroK8s é›†ç¾¤ï¼Œé›†æˆ EJBCA è¿›è¡Œè¯ä¹¦ç®¡ç†ï¼Œå¹¶ä½¿ç”¨ Helm å®‰è£… Istio ç»„ä»¶ã€‚å®Œæ•´æŒ‡å—å¯åœ¨&lt;a href=&#34;https://docs.keyfactor.com/ejbca/latest/tutorial-deploy-istio-service-mesh-in-a-multi&#34; title=&#34;æ­¤å¤„&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®æ­¥éª¤åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®‰è£…å’Œé…ç½® Helm ä»“åº“&lt;/strong&gt;ï¼šä¸º Istioã€cert-manager å’Œ EJBCA æ·»åŠ å¿…è¦çš„ Helm ä»“åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½² cert-manager å’Œ EJBCA&lt;/strong&gt;ï¼šåœ¨ä¸»é›†ç¾¤å’Œè¿œç¨‹é›†ç¾¤ä¸­ä½¿ç”¨ Helm å®‰è£… cert-managerï¼Œç„¶åéƒ¨ç½²å¸¦æœ‰è‡ªå®šä¹‰ç­¾å‘å™¨çš„ EJBCAã€‚æ­¤æ­¥éª¤è¿˜åŒ…æ‹¬ç”Ÿæˆå¹¶å°†å¿…è¦çš„è¯ä¹¦å­˜å‚¨ä¸º Kubernetes å¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ EJBCA é…ç½® Istio&lt;/strong&gt;ï¼šåœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ªæŒ‡å‘ EJBCA å®ä¾‹çš„è‡ªå®šä¹‰ç­¾å‘å™¨ç”¨äºç­¾å‘è¯ä¹¦ã€‚ç„¶åå°†æ­¤ç­¾å‘å™¨é›†æˆåˆ° Istio é…ç½®ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰è£… Istio ç»„ä»¶&lt;/strong&gt;ï¼šéƒ¨ç½² cert-manager-istio-csr ä»¥å¤„ç† Istio çš„è¯ä¹¦ç­¾åè¯·æ±‚ï¼Œç„¶åå®‰è£… Istio çš„åŸºç¡€ç»„ä»¶ã€Istio CNIï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰ã€Istiodï¼ˆIstio æ§åˆ¶å¹³é¢ï¼‰å’Œ Istio å…¥å£ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰å’Œè¦†ç›–&lt;/strong&gt;ï¼šåº”ç”¨è‡ªå®šä¹‰å€¼ä»¥å®šåˆ¶ Istio çš„è¡Œä¸ºï¼Œä¾‹å¦‚ç‰¹å®šçš„é›†ç¾¤ IDã€ä¿¡ä»»åŸŸå’Œç”¨äºæœåŠ¡é—´å®‰å…¨é€šä¿¡çš„ DNS é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨è¯ä¹¦ç»­æœŸ&lt;/strong&gt;ï¼šè®¾ç½®é…ç½®ä¸º cert-manager åœ¨è¯ä¹¦åˆ°æœŸå‰è‡ªåŠ¨ç»­æœŸï¼Œè€Œä¸ä¼šå¯¹æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºé€ æˆä¸­æ–­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/multi-cluster-pki-istio-recipe/cert-renew-flow.webp&#34; data-img=&#34;/blog/multi-cluster-pki-istio-recipe/cert-renew-flow.webp&#34; data-width=&#34;1214&#34; data-height=&#34;755&#34; alt=&#34;image&#34; data-caption=&#34;è¯ä¹¦æ›´æ–°æµç¨‹å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;è¯ä¹¦æ›´æ–°æµç¨‹å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯è¡¨ç¤º Istio ä¸­ mTLS è¯ä¹¦ç­¾å‘å’Œç»­æœŸæµç¨‹çš„æµç¨‹å›¾ã€‚å®ƒå±•ç¤ºäº†ä» Istiod æ§åˆ¶å¹³é¢æ¨é€ Envoy é…ç½®åˆ° EJBCA æœ€ç»ˆç­¾å‘è¯ä¹¦çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pki-æœ€ä½³å®è·µå’Œåˆè§„æ€§&#34;&gt;PKI æœ€ä½³å®è·µå’Œåˆè§„æ€§&lt;/h2&gt;
&lt;p&gt;ä¸ºä½ çš„ Istio æœåŠ¡ç½‘æ ¼æ„å»ºå®‰å…¨çš„ PKIï¼Œä¸ä»…ä»…æ˜¯è®¾ç½®ä»»æ„ PKI å¹¶å¼€å§‹ç­¾å‘è¯ä¹¦ã€‚å®ƒéœ€è¦éµå¾ªæœ€ä½³å®è·µå¹¶ç¬¦åˆæ³•è§„è¦æ±‚ï¼Œä»¥ä¿æŒå®‰å…¨æ€§å’Œæœªæ¥é€‚ç”¨æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦è€ƒè™‘çš„å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éµå®ˆæ³•è§„&lt;/strong&gt;ï¼šç¡®ä¿ä½ çš„ PKI å®æ–½ç¬¦åˆå¦‚æ¬§ç›Ÿç½‘ç»œå¼¹æ€§æ³•æ¡ˆå’Œç¾å›½æå‡å›½å®¶ç½‘ç»œå®‰å…¨çš„è¡Œæ”¿å‘½ä»¤ç­‰æ³•è§„è¦æ±‚ã€‚è¿™åŒ…æ‹¬å®æ–½å¼¹æ€§çš„æ¶æ„ï¼Œç»´æŠ¤å®¡è®¡è·Ÿè¸ªï¼Œå¹¶ç¡®ä¿ç¨³å¥çš„å¯†é’¥ç®¡ç†å®è·µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯†ç çµæ´»æ€§å’Œé‡å­å‡†å¤‡&lt;/strong&gt;ï¼šéšç€å¯†ç æ ‡å‡†çš„å‘å±•ï¼Œä½ çš„ PKI å¿…é¡»å…·å¤‡è¶³å¤Ÿçš„çµæ´»æ€§ä»¥é€‚åº”æ–°çš„ç®—æ³•å’Œå¯†é’¥é•¿åº¦ã€‚éšç€é‡å­è®¡ç®—çš„æ½œåœ¨å‡ºç°ï¼Œå…·å¤‡é‡å­å‡†å¤‡æ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ä¿¡æ¯å®‰å…¨å›¢é˜Ÿåˆä½œ&lt;/strong&gt;ï¼šä¸ä½ çš„ä¿¡æ¯å®‰å…¨ï¼ˆInfoSecï¼‰å›¢é˜Ÿæœ‰æ•ˆåˆä½œå¯¹äºç»´æŠ¤ PKI çš„å®‰å…¨æ€§å’Œåˆè§„æ€§è‡³å…³é‡è¦ã€‚è¿™åŒ…æ‹¬å®šæœŸå®¡æŸ¥å®‰å…¨ç­–ç•¥ã€æŒç»­åŸ¹è®­ï¼Œä»¥åŠç¡®ä¿ PKI ç®¡ç†æµç¨‹ä¸ç»„ç»‡çš„å®‰å…¨ç›®æ ‡ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­ä¸º Istio æœåŠ¡ç½‘æ ¼å®æ–½ PKI çœ‹ä¼¼è‰°å·¨ï¼Œä½†ä½¿ç”¨æ­£ç¡®çš„å·¥å…·å’Œå®è·µï¼Œå¯ä»¥é«˜æ•ˆä¸”æœ‰æ•ˆåœ°å®ç°ã€‚EJBCA ç»“åˆ cert-managerï¼Œæä¾›äº†ä¸€ä¸ªç”¨äºå¤§è§„æ¨¡ç®¡ç†è¯ä¹¦çš„è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿ä½ çš„ Istio æœåŠ¡ç½‘æ ¼ PKI æ—¢å®‰å…¨åˆåˆè§„ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡éµå¾ªæœ¬æŒ‡å—ä¸­æ¦‚è¿°çš„æ­¥éª¤ï¼Œä½ å°†èƒ½å¤Ÿå»ºç«‹ä¸€ä¸ªå¯ä¿¡çš„ PKIï¼Œå®ç°æ— ç¼ä¸”å¼ºå¤§çš„è¯ä¹¦ç®¡ç†ï¼Œå¹¶ä¸ä½ çš„ä¿¡æ¯å®‰å…¨å›¢é˜Ÿæœ‰æ•ˆåˆä½œï¼Œç»´æŠ¤æœåŠ¡ç½‘æ ¼çš„å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³æœ¬æ–‡ä¸­æ¶µç›–çš„ä¸»é¢˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œè¿›ä¸€æ­¥èµ„æºï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹ä¸‹é¢æä¾›çš„é“¾æ¥å’Œå‚è€ƒèµ„æ–™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èµ„æº&#34;&gt;èµ„æº&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.keyfactor.com/ejbca/latest/tutorial-deploy-istio-service-mesh-in-a-multi&#34; title=&#34;æ•™ç¨‹â€”â€”ä½¿ç”¨ EJBCA ä½œä¸ºå¤–éƒ¨ PKI æä¾›å•†åœ¨å¤šé›†ç¾¤ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Istio æœåŠ¡ç½‘æ ¼&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ•™ç¨‹â€”â€”ä½¿ç”¨ EJBCA ä½œä¸ºå¤–éƒ¨ PKI æä¾›å•†åœ¨å¤šé›†ç¾¤ Kubernetes ç¯å¢ƒä¸­éƒ¨ç½² Istio æœåŠ¡ç½‘æ ¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/&#34; title=&#34;Istio æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ejbca.org/&#34; title=&#34;EJBCA ç¤¾åŒºç‰ˆ&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;EJBCA ç¤¾åŒºç‰ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cert-manager.io/docs/&#34; title=&#34;cert-manager æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cert-manager æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://digital-strategy.ec.europa.eu/en/policies/cyber-resilience-act&#34; title=&#34;æ¬§ç›Ÿç½‘ç»œå¼¹æ€§æ³•æ¡ˆ&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¬§ç›Ÿç½‘ç»œå¼¹æ€§æ³•æ¡ˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.whitehouse.gov/briefing-room/statements-releases/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/&#34; title=&#34;ç¾å›½ç½‘ç»œå®‰å…¨è¡Œæ”¿å‘½ä»¤&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¾å›½ç½‘ç»œå®‰å…¨è¡Œæ”¿å‘½ä»¤&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/&#34; title=&#34;å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼çš„è·¨é›†ç¾¤æ— ç¼è®¿é—®æŒ‡å—&#34;&gt;å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼çš„è·¨é›†ç¾¤æ— ç¼è®¿é—®æŒ‡å—&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æœ¬æ–‡é¦–å‘ä¸ºè‹±æ–‡ç‰ˆï¼š&lt;a href=&#34;https://tetrate.io/blog/multi-cluster-pki-istio-recipe-practical-example-for-a-trusted-and-scalable-pki-for-your-service-mesh/&#34; title=&#34;Multi-Cluster PKI &amp;#43; Istio Recipe: Practical Example for a Trusted and Scalable PKI for Your Service Mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Multi-Cluster PKI + Istio Recipe: Practical Example for a Trusted and Scalable PKI for Your Service Mesh&lt;/a&gt;&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Envoy ä»£ç†å¦‚ä½•å¤„ç†ç”¨æˆ·è¯·æ±‚ä»¥å®ç°è¿½è¸ª</title>
      <link>https://jimmysong.io/blog/envoy-tracing/</link>
      <pubDate>Thu, 26 Sep 2024 15:24:35 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/envoy-tracing/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œæå‡å¯¹åº”ç”¨ç¨‹åºçš„å¯è§‚æµ‹æ€§ä»¥æ›´å¥½åœ°ç†è§£ç”¨æˆ·ä½“éªŒæ˜¯è‡³å…³é‡è¦çš„ã€‚ç„¶è€Œï¼Œå•çº¯ä¾é æŒ‡æ ‡å’Œæ—¥å¿—æ— æ³•æä¾›ä¸ªåˆ«æ¡ˆä¾‹çš„å…·ä½“ç»†èŠ‚ã€‚è¿™æ—¶ï¼Œè¿½è¸ªï¼ˆTracingï¼‰æŠ€æœ¯å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¿½è¸ªçš„åŸºæœ¬åŸç†&#34;&gt;è¿½è¸ªçš„åŸºæœ¬åŸç†&lt;/h2&gt;
&lt;p&gt;è¿½è¸ªé€šè¿‡ä¸ºæ¯ä¸ªç”¨æˆ·è¯·æ±‚é™„åŠ ä¸€ä¸ªå…³è” IDï¼Œå‘å¼€å‘äººå‘˜æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªå…³è” ID å°±åƒä¸€æ ¹çº¿ï¼Œå°†è·¨è¶Šå¤šä¸ªæœåŠ¡çš„è¿½è¸ªä¸²è”èµ·æ¥ï¼Œä»è€Œå®ç°å…¨é¢çš„å¯è§‚æµ‹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† Envoy å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æµç¨‹ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/98285f54b4811bd9ece87523444f4e02.svg&#34; data-img=&#34;/blog/envoy-tracing/98285f54b4811bd9ece87523444f4e02.svg&#34; alt=&#34;image&#34; data-caption=&#34;ç”¨æˆ·è¯·æ±‚ä¸ Envoy ä»£ç†çš„å¤„ç†æµç¨‹å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ç”¨æˆ·è¯·æ±‚ä¸ Envoy ä»£ç†çš„å¤„ç†æµç¨‹å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;è¿½è¸ª&lt;/strong&gt;å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªç”¨æˆ·è¯·æ±‚é™„åŠ ä¸€ä¸ªå…³è” IDï¼Œå‘å¼€å‘äººå‘˜æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªå…³è” ID å°±åƒä¸€æ ¹çº¿ï¼Œå°†è·¨è¶Šå¤šä¸ªæœåŠ¡çš„è¿½è¸ªä¸²è”èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡æ‰€æœ‰è¯·æ±‚éƒ½ä¼šç»è¿‡ Envoy ä»£ç†ï¼Œä½† Envoy æ— æ³•ç‹¬ç«‹æä¾›å®Œæ•´çš„è¿½è¸ªä¿¡æ¯ã€‚å®ƒåªçœ‹åˆ°åº”ç”¨ç¨‹åºä½œä¸ºç½‘ç»œçš„ä¸€éƒ¨åˆ†ï¼Œæ— æ³•æ´å¯Ÿå†…éƒ¨å¤„ç†ã€‚è¿™ä½¿å¾— Envoy æ— æ³•åŒºåˆ†å…¥ç«™è¯·æ±‚å’Œå‡ºç«™è¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€ä¸ªç”¨æˆ·ï¼Œå› æ­¤æ— æ³•è‡ªåŠ¨è½¬å‘è¿½è¸ªä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡ç½‘æ ¼ä¸­çš„è¯·æ±‚ä¸Šä¸‹æ–‡&#34;&gt;æœåŠ¡ç½‘æ ¼ä¸­çš„è¯·æ±‚ä¸Šä¸‹æ–‡&lt;/h2&gt;
&lt;p&gt;Envoy å¯ä»¥åœ¨ Istio æœåŠ¡ç½‘æ ¼ä¸­ä½œä¸º Sidecar æˆ– Waypoint ä»£ç†ï¼Œä¸‹å›¾å±•ç¤ºäº† Envoy åœ¨æœåŠ¡ç½‘æ ¼ä¸­å¦‚ä½•å¤„ç†è¯·æ±‚ä¸Šä¸‹æ–‡çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&#34;&gt;1. ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&lt;/h3&gt;
&lt;p&gt;è¿½è¸ªæ¶‰åŠé€šè¿‡å¤šä¸ªæœåŠ¡è·Ÿè¸ªè·¯å¾„ï¼Œä»¥ç†è§£ç”¨æˆ·ä½“éªŒçš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚è¿½è¸ªä»ä¸€ä¸ªç”¨æˆ·è¯·æ±‚å¼€å§‹ï¼Œè¯¥è¯·æ±‚è¢«åˆ†é…äº†ä¸€ä¸ªå…³è” IDã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/51fd90d791099a4f158c823a821fba6d.svg&#34; data-img=&#34;/blog/envoy-tracing/51fd90d791099a4f158c823a821fba6d.svg&#34; alt=&#34;image&#34; data-caption=&#34;ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;2-è¯·æ±‚é€šè¿‡-envoy-ä»£ç†&#34;&gt;2. è¯·æ±‚é€šè¿‡ Envoy ä»£ç†&lt;/h3&gt;
&lt;p&gt;Envoy ä½äºåº”ç”¨ç¨‹åºæ—è¾¹ï¼Œæ‰€æœ‰è¿›å…¥çš„è¯·æ±‚éƒ½ä¼šç»è¿‡ Envoyã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/aebbb0ea064ee93575ec5a1ec9bdf329.svg&#34; data-img=&#34;/blog/envoy-tracing/aebbb0ea064ee93575ec5a1ec9bdf329.svg&#34; alt=&#34;image&#34; data-caption=&#34;ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ç”¨æˆ·è¯·æ±‚çš„å¼€å§‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;3-envoy-é™„åŠ é¢å¤–çš„-headers&#34;&gt;3. Envoy é™„åŠ é¢å¤–çš„ Headers&lt;/h3&gt;
&lt;p&gt;Envoy å¯ä»¥åœ¨è¯·æ±‚ä¸­é™„åŠ é¢å¤–çš„ Headersï¼Œä»¥æ”¶é›†å…³äºåº”ç”¨ç¨‹åºå†…éƒ¨å‘ç”Ÿæƒ…å†µçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/7ab35160ac9d07cfdcaa9436b8706548.svg&#34; data-img=&#34;/blog/envoy-tracing/7ab35160ac9d07cfdcaa9436b8706548.svg&#34; alt=&#34;image&#34; data-caption=&#34;Envoy é™„åŠ é¢å¤–çš„ Headers&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Envoy é™„åŠ é¢å¤–çš„ Headers&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;4-åº”ç”¨ç¨‹åºå¤„ç†è¯·æ±‚å¹¶è°ƒç”¨åç«¯æœåŠ¡&#34;&gt;4. åº”ç”¨ç¨‹åºå¤„ç†è¯·æ±‚å¹¶è°ƒç”¨åç«¯æœåŠ¡&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºåœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦è”ç³»å…¶ä»–ç³»ç»Ÿæ¥å¤„ç†è¯¥è¯·æ±‚ã€‚æ¯”å¦‚å¤–éƒ¨çš„è®¤è¯å’ŒæˆæƒæœåŠ¡ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/d1016c81280b99d35a642a80caa3af52.svg&#34; data-img=&#34;/blog/envoy-tracing/d1016c81280b99d35a642a80caa3af52.svg&#34; alt=&#34;image&#34; data-caption=&#34;åº”ç”¨ç¨‹åºå¤„ç†è¯·æ±‚å¹¶è°ƒç”¨åç«¯æœåŠ¡&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åº”ç”¨ç¨‹åºå¤„ç†è¯·æ±‚å¹¶è°ƒç”¨åç«¯æœåŠ¡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;5-åº”ç”¨ç¨‹åºéœ€è¦å¤åˆ¶å…³è”-id&#34;&gt;5. åº”ç”¨ç¨‹åºéœ€è¦å¤åˆ¶å…³è” ID&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºçŸ¥é“å‡ºç«™è¯·æ±‚æ˜¯ä»£è¡¨å“ªä¸ªå…¥ç«™è¯·æ±‚å‘èµ·çš„ï¼ˆä¾‹å¦‚ Trace ID ä¸º 1234 çš„è¯·æ±‚ï¼‰ã€‚ä½†æ˜¯ï¼ŒEnvoy å¹¶ä¸çŸ¥é“è¿™ä¸€ç‚¹ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦å°†å…³è” ID ç­‰ä¸Šä¸‹æ–‡ä»å…¥ç«™è¯·æ±‚å¤åˆ¶åˆ°å‡ºç«™è¯·æ±‚ä¸­ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/1409785fdd6f8909dffee3c5bd1b44ba.svg&#34; data-img=&#34;/blog/envoy-tracing/1409785fdd6f8909dffee3c5bd1b44ba.svg&#34; alt=&#34;image&#34; data-caption=&#34;åº”ç”¨ç¨‹åºéœ€è¦å¤åˆ¶å…³è” ID&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åº”ç”¨ç¨‹åºéœ€è¦å¤åˆ¶å…³è” ID&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;6-å¤šä¸ªè¯·æ±‚çš„å¹¶å‘å¤„ç†&#34;&gt;6. å¤šä¸ªè¯·æ±‚çš„å¹¶å‘å¤„ç†&lt;/h3&gt;
&lt;p&gt;åœ¨å®é™…åœºæ™¯ä¸­ï¼Œåº”ç”¨ç¨‹åºåŒæ—¶å¤„ç†å¤šä¸ªç”¨æˆ·è¯·æ±‚ï¼Œè¿™å¯¼è‡´äº†å¹¶å‘æ€§ã€‚ç”±äº Envoy åªèƒ½çœ‹åˆ°ç½‘ç»œå±‚é¢çš„è¯·æ±‚å’Œå“åº”ï¼Œæ— æ³•åŒºåˆ†è¿™äº›è¯·æ±‚ä¹‹é—´çš„å› æœå…³ç³»ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/2aebfd544f726da5fe6f4389aed924bd.svg&#34; data-img=&#34;/blog/envoy-tracing/2aebfd544f726da5fe6f4389aed924bd.svg&#34; alt=&#34;image&#34; data-caption=&#34;å¤šä¸ªè¯·æ±‚çš„å¹¶å‘å¤„ç†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¤šä¸ªè¯·æ±‚çš„å¹¶å‘å¤„ç†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;7-envoy-çš„å±€é™æ€§&#34;&gt;7. Envoy çš„å±€é™æ€§&lt;/h3&gt;
&lt;p&gt;å› ä¸º Envoy æ— æ³•çœ‹åˆ°åº”ç”¨ç¨‹åºå†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼Œå®ƒåªèƒ½çœ‹åˆ°ä¸€ç³»åˆ—çš„ç½‘ç»œè¯·æ±‚å’Œå“åº”ï¼Œæ— æ³•çŸ¥é“å“ªäº›å‡ºç«™è¯·æ±‚æ˜¯ç”±å“ªäº›å…¥ç«™è¯·æ±‚è§¦å‘çš„ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/d048f6f9fc9af6f29a9f2e4bfe599613.svg&#34; data-img=&#34;/blog/envoy-tracing/d048f6f9fc9af6f29a9f2e4bfe599613.svg&#34; alt=&#34;image&#34; data-caption=&#34;Envoy çš„å±€é™æ€§&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Envoy çš„å±€é™æ€§&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;éœ€è¦åº”ç”¨ç¨‹åºçš„å‚ä¸&#34;&gt;éœ€è¦åº”ç”¨ç¨‹åºçš„å‚ä¸&lt;/h2&gt;
&lt;p&gt;ç”±äº Envoy æ— æ³•è‡ªåŠ¨è½¬å‘è¿½è¸ªä¸Šä¸‹æ–‡ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«éœ€è¦è´Ÿè´£å°†å…¥ç«™è¯·æ±‚çš„ Headers å¤åˆ¶åˆ°å‡ºç«™è¯·æ±‚ä¸­ï¼Œä»¥ä¿æŒè¿½è¸ªä¿¡æ¯çš„å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åº”ç”¨ç¨‹åºå¤åˆ¶-headers&#34;&gt;åº”ç”¨ç¨‹åºå¤åˆ¶ Headers&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºåœ¨å¤„ç†å…¥ç«™è¯·æ±‚æ—¶ï¼Œéœ€è¦å°†å¿…è¦çš„ Headersï¼ˆå¦‚å…³è” IDã€ç”¨æˆ·èº«ä»½ç­‰ï¼‰å¤åˆ¶åˆ°ä»»ä½•å‡ºç«™è¯·æ±‚ä¸­ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/d1f00ba65d1c61edf996a19a6b5145d7.svg&#34; data-img=&#34;/blog/envoy-tracing/d1f00ba65d1c61edf996a19a6b5145d7.svg&#34; alt=&#34;image&#34; data-caption=&#34;åº”ç”¨ç¨‹åºå¤åˆ¶ Headers&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åº”ç”¨ç¨‹åºå¤åˆ¶ Headers&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;å“åº”è¿”å›ç»™ç”¨æˆ·&#34;&gt;å“åº”è¿”å›ç»™ç”¨æˆ·&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºå®Œæˆå¯¹ç”¨æˆ·è¯·æ±‚çš„å¤„ç†åï¼Œå°†å“åº”è¿”å›ç»™ç”¨æˆ·ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/envoy-tracing/ed0816d0cb881c7c7d5eb19e6d0826bf.svg&#34; data-img=&#34;/blog/envoy-tracing/ed0816d0cb881c7c7d5eb19e6d0826bf.svg&#34; alt=&#34;image&#34; data-caption=&#34;å“åº”è¿”å›ç»™ç”¨æˆ·&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å“åº”è¿”å›ç»™ç”¨æˆ·&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆä¸æ¨è&#34;&gt;è§£å†³æ–¹æ¡ˆä¸æ¨è&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿è¿½è¸ªä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œåº”ç”¨ç¨‹åºéœ€è¦ä¸»åŠ¨å¤åˆ¶å’Œä¼ é€’è¿½è¸ªç›¸å…³çš„ Headersã€‚è¿™å¯ä»¥é€šè¿‡é›†æˆå¦‚ &lt;a href=&#34;https://skywalking.apache.org/&#34; title=&#34;Apache SkyWalking&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache SkyWalking&lt;/a&gt; çš„å·¥å…·æ¥å®ç°ï¼ŒSkyWalking ä¸ä»…æ”¯æŒåˆ†å¸ƒå¼è¿½è¸ªï¼Œè¿˜åŒ…æ‹¬æ€§èƒ½ç›‘æ§ã€æ—¥å¿—åˆ†æç­‰åŠŸèƒ½ã€‚åˆ©ç”¨ SkyWalking çš„åº“å’Œä»£ç†ï¼Œå¯ä»¥ç®€åŒ– Headers çš„å¤åˆ¶å’Œè¿½è¸ªä¿¡æ¯çš„ä¼ é€’ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºå¦‚ä½•åœ¨ Istio ä¸­ä½¿ç”¨ SkyWalking å®ç°åˆ†å¸ƒå¼è¿½è¸ªè¯¦è§&lt;a href=&#34;https://jimmysong.io/blog/distributed-tracing-with-skywalking-in-istio/&#34; title=&#34;è¿™ç¯‡åšå®¢&#34;&gt;è¿™ç¯‡åšå®¢&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½è¸ªçš„é‡è¦æ€§&lt;/strong&gt;ï¼šè¿½è¸ªä¸ºå¼€å‘äººå‘˜æä¾›äº†ç”¨æˆ·è¯·æ±‚çš„å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œå¸®åŠ©æ›´å¥½åœ°ç†è§£å’Œæ”¹è¿›ç”¨æˆ·ä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Envoy çš„å±€é™æ€§&lt;/strong&gt;ï¼šEnvoy åªèƒ½çœ‹åˆ°ç½‘ç»œå±‚é¢çš„è¯·æ±‚å’Œå“åº”ï¼Œæ— æ³•è·Ÿè¸ªè¯·æ±‚çš„å› æœå…³ç³»ï¼Œå› æ­¤æ— æ³•è‡ªåŠ¨è½¬å‘è¿½è¸ªä¸Šä¸‹æ–‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ç¨‹åºçš„è§’è‰²&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºéœ€è¦ä¸»åŠ¨å¤åˆ¶å’Œä¼ é€’è¿½è¸ªç›¸å…³çš„ Headersï¼Œä»¥ç¡®ä¿è¿½è¸ªä¿¡æ¯çš„å®Œæ•´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èçš„å·¥å…·&lt;/strong&gt;ï¼šä½¿ç”¨ SkyWalking ç­‰è¿½è¸ªå·¥å…·çš„åº“ï¼Œå¯ä»¥ç®€åŒ–åœ¨åº”ç”¨ç¨‹åºä¸­å®ç° Headers å¤åˆ¶çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tetrate.io/blog/how-the-envoy-proxy-handles-a-user-request/&#34; title=&#34;How the Envoy proxy handles a user request - tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;How the Envoy proxy handles a user request - tetrate.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jimmysong.io/blog/distributed-tracing-with-skywalking-in-istio/&#34; title=&#34;å¦‚ä½•åœ¨ Istio ä¸­ä½¿ç”¨ SkyWalking è¿›è¡Œåˆ†å¸ƒå¼è¿½è¸ªï¼Ÿ- jimmysong.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¦‚ä½•åœ¨ Istio ä¸­ä½¿ç”¨ SkyWalking è¿›è¡Œåˆ†å¸ƒå¼è¿½è¸ªï¼Ÿ- jimmysong.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ä¸€å‘¨ç›®è¯„æµ‹ï¼šç‘•ä¸æ©ç‘œï¼ŒæœŸå¾…æ›´ä¸°å¯Œå†…å®¹</title>
      <link>https://jimmysong.io/blog/black-myth-wukong-review/</link>
      <pubDate>Mon, 16 Sep 2024 12:15:06 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/black-myth-wukong-review/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘å®Œæˆäº†ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„ä¸€å‘¨ç›®ä½“éªŒã€‚æ€»ä½“æ¥è¯´ï¼ŒéŸ³ä¹å’Œç¾æœ¯è¡¨ç°å‡ºè‰²ï¼Œä½†æˆ˜æ–—ç³»ç»Ÿç•¥æ˜¾å•è°ƒï¼Œåœ°å›¾è®¾è®¡ä¸å¤Ÿç†æƒ³ï¼Œæ•´ä½“å†…å®¹åå°‘ï¼Œè®©äººæ„Ÿåˆ°æ„çŠ¹æœªå°½ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/wukong.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/wukong.webp&#34; alt=&#34;image&#34; data-caption=&#34;é»‘ç¥è¯ï¼šæ‚Ÿç©º&#34;&gt;
  
  
  &lt;figcaption&gt;é»‘ç¥è¯ï¼šæ‚Ÿç©º&lt;/figcaption&gt;
  
&lt;/figure&gt;



&lt;div class=&#34;alert alert-tip-container&#34;&gt;
  
  &lt;div class=&#34;alert-tip-title px-2 py-2&#34;&gt;
    ä»€ä¹ˆæ˜¯ä¸€å‘¨ç›®ï¼Ÿ
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-tip px-2&#34;&gt;
    â€œä¸€å‘¨ç›®â€æŒ‡çš„æ˜¯ç©å®¶é¦–æ¬¡å®Œæ•´è¿›è¡Œæ¸¸æˆçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªé˜¶æ®µå……æ»¡æ–°é²œæ„Ÿå’Œæ¢ç´¢æ€§ï¼Œå¯ä»¥ä½“éªŒåˆ°å®Œæ•´çš„å‰§æƒ…ä¸ç©æ³•ï¼Œä¸ºåç»­çš„æ¸¸æˆä½“éªŒå¥ å®šåŸºç¡€ï¼Œé€šå¸¸éš¾åº¦é€‚ä¸­ã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;éŸ³ä¹&#34;&gt;éŸ³ä¹&lt;/h2&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=113055920818374&amp;amp;bvid=BV1S9noeREf3&amp;amp;cid=25673204847&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;ç¬¬äºŒç« å¼€å¤´ï¼Œç†Šç«¹è‹±è€å¸ˆç”¨é™•åŒ—è¯´ä¹¦çš„å½¢å¼æ¼”ç»äº†ã€Šé»„é£èµ·å…®ã€‹ï¼Œä»¤äººå°è±¡æ·±åˆ»ã€‚ç†Šç«¹è‹±æ˜¯é™•åŒ—è¯´ä¹¦çš„éé—ä¼ æ‰¿äººã€‚é™•åŒ—è¯´ä¹¦èµ·æºäºé™•è¥¿åŒ—éƒ¨çš„å»¶å®‰å’Œæ¦†æ—åœ°åŒºï¼Œæœ€åˆç”±è´«è‹¦ç›²äººç”¨é™•åŒ—æ°‘æ­Œå°è°ƒæ¼”å”±æ°‘é—´ä¼ è¯´å’Œæ•…äº‹ï¼Œåæ¥èå…¥äº†å¤šç§æ›²è°ƒï¼Œå½¢æˆäº†ç‹¬ç‰¹çš„è¯´å”±è‰ºæœ¯ã€‚é€šå¸¸æ˜¯ä¸€äººè‡ªå¼¹è‡ªå”±ï¼Œä¼´å¥ä¹å™¨ä»¥ä¸‰å¼¦ä¸ºä¸»ï¼Œè¿˜ä¼šç”¨ç»‘åœ¨å°è…¿çš„ç”©æ¿å’Œæ‰‹è…•çš„â€œå˜›å–³å–³â€å°æœ¨æ¿æ¥æ‰“èŠ‚å¥ã€‚2006 å¹´ï¼Œé™•åŒ—è¯´ä¹¦è¢«åˆ—å…¥å›½å®¶çº§éç‰©è´¨æ–‡åŒ–é—äº§åå½•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¾æœ¯è®¾è®¡&#34;&gt;ç¾æœ¯è®¾è®¡&lt;/h2&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/jietu.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/jietu.webp&#34; alt=&#34;image&#34; data-caption=&#34;é»‘ç¥è¯æ‚Ÿç©ºæˆªå›¾&#34;&gt;
  
  
  &lt;figcaption&gt;é»‘ç¥è¯æ‚Ÿç©ºæˆªå›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¸¸æˆå‰ä¸¤ç« çš„ç¾æœ¯è®¾è®¡éå¸¸å‡ºè‰²ï¼Œå¤å»ºç­‘çš„è¿˜åŸç›¸å½“ç²¾è‡´ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¯¹æ¯ä¸ªç« èŠ‚çš„æ„Ÿå—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å›ï¼šç«ç…§é»‘äº‘ï¼ˆé»‘é£å±±ï¼‰&lt;/strong&gt;ï¼šæˆ‘å¾ˆå–œæ¬¢å¼€å¤´ç¿ ç»¿çš„ä¸›æ—ï¼Œè¿˜æœ‰å¶å°”å‡ºç°çš„å¦–æ€ªï¼Œè¥é€ å‡ºä¸€ç§ç¥ç§˜çš„æ°›å›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒå›ï¼šé£èµ·é»„æ˜ï¼ˆé»„é£å²­ï¼‰&lt;/strong&gt;ï¼šæ¼«å¤©é»„æ²™å¸¦æ¥äº†ä¸€ç§è‹å‡‰å’Œç ´è´¥çš„æ„Ÿè§‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸‰å›ï¼šå¤œç”Ÿç™½éœ²ï¼ˆå°é›·éŸ³å¯ºï¼‰&lt;/strong&gt;ï¼šæµ®å± ç•Œè®©æˆ‘å¤´æ™•ç›®çœ©ï¼Œè¿‡æ¡¥æ—¶ç»å¸¸è¢«æ‰“è½ï¼ŒèŒ«èŒ«é›ªåœ°æ—¢åˆºçœ¼åˆè®©äººè¿·å¤±æ–¹å‘ï¼Œå”¯ä¸€è§‰å¾—å¥½äº›çš„æ˜¯&lt;strong&gt;å®‰èº«å¯º&lt;/strong&gt;çš„éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬å››å›ï¼šæ›²åº¦ç´«é¸³ï¼ˆç›˜ä¸æ´ï¼‰&lt;/strong&gt;ï¼šå±‚å±‚æ´çªŸè®©äººå®¹æ˜“è¿·è·¯ï¼Œä¸è¿‡é»„èŠ±è§‚å’Œç´«äº‘å±±çš„æ™¯è‰²è¿˜ä¸é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äº”å›ï¼šæ—¥è½çº¢å°˜ï¼ˆç«ç„°å±±ï¼‰&lt;/strong&gt;ï¼šè¿™ç§åœºæ™¯ä¸å¤ªå¯¹æˆ‘èƒƒå£ï¼Œä¸ç”±å¾—è®©æˆ‘è”æƒ³åˆ°ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹ä¸­çš„ç«å±±åœ°å½¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬å…­å›ï¼šæœªç«Ÿï¼ˆèŠ±æœå±±ï¼‰&lt;/strong&gt;ï¼šåœ°å›¾å¾ˆå¤§ï¼Œä½†æ›´å®¹æ˜“è¿·è·¯äº†ï¼Œåªèƒ½ä¸æ–­ç”¨ç­‹æ–—äº‘åœ¨ç©ºä¸­é£æ¥é£å»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/jindouyun.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/jindouyun.webp&#34; alt=&#34;image&#34; data-caption=&#34;èŠ±æœå±±&#34;&gt;
  
  
  &lt;figcaption&gt;èŠ±æœå±±&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ€»ä½“æ¥è¯´ï¼Œç¼ºå°‘åœ°å›¾åŠŸèƒ½è®©äººéå¸¸æ— è¯­ï¼Œå³ä¾¿æ²¡æœ‰åœ°å›¾ï¼Œæä¸ªæŒ‡å—é’ˆä¹Ÿä¸éš¾ï¼Œä½†æ¸¸æˆä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåªèƒ½é ç©ºæ°”å¢™æ¥åˆ¤æ–­è¾¹ç•Œã€‚ç©å®¶åœ¨æ¸¸æˆä¸­ä¸æ–­å…œåœˆå­ï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´åœ¨æ‰¾è·¯ä¸Šï¼ŒçœŸæ­£ç©æ¸¸æˆçš„æ—¶é—´å¯èƒ½ä¸è¶³ä¸ƒæˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•…äº‹&#34;&gt;æ•…äº‹&lt;/h2&gt;
&lt;p&gt;ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„æ•…äº‹è®¾å®šå¾ˆç®€å•ï¼ŒèƒŒæ™¯å‘ç”Ÿåœ¨å”åƒ§å¸ˆå¾’å–ç»ä¹‹åã€‚å­™æ‚Ÿç©ºè™½è¢«å°ä¸ºæ–—æˆ˜èƒœä½›ï¼Œå´è¾å»ä½›ä½å›åˆ°èŠ±æœå±±ã€‚å¤©åº­ä¸æ»¡ï¼Œæ´¾äºŒéƒç¥ç­‰å‰æ¥æ‰æ‹¿ï¼Œç´§ç®å’’å†ç°ä½¿æ‚Ÿç©ºè½è´¥ï¼Œä»–çš„â€œå…­æ ¹â€ï¼ˆçœ¼ã€è€³ã€é¼»ã€èˆŒã€èº«ã€æ„ï¼‰è¢«åˆ†ä¸ºå…­å—ã€‚â€œæ„â€åŒ–ä½œå¤©å‘½äººï¼ˆç©å®¶ï¼‰ï¼Œå…¶ä½™äº”å—è¢«åˆ†ç»™äº”ä¸ªå¦–ç‹ã€‚èŠ±æœå±±çš„çŒ´å­çŒ´å­™è¸ä¸Šå¯»æ‰¾â€œå…­æ ¹â€å¤æ´»æ‚Ÿç©ºçš„å¾ç¨‹ã€‚ç©å®¶æ‰®æ¼”çš„å¤©å‘½äººåœ¨è€çŒ´å­çš„æŒ‡å¼•ä¸‹ï¼Œä¸€è·¯æ‰“æ€ªå‡çº§ï¼Œé›†é½æ‚Ÿç©ºçš„â€œäº”æ ¹â€ï¼Œæœ€ç»ˆæˆ˜èƒœæ‚Ÿç©ºçš„æ„å¿µå’Œèº«èº¯ï¼Œå­™æ‚Ÿç©ºå¤æ´»å´åˆé‡æ–°æˆ´ä¸Šç´§ç®å’’ï¼Œåœ¨çŸ³å¤´ä¸­ç­‰å¾…æ–°çš„å®¿å‘½ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€å›çš„æ•…äº‹æ¯”è¾ƒç›´ç™½ï¼Œé‡‘æ± é•¿è€å› è´ªè´¢è§Šè§å”åƒ§çš„è¢ˆè£Ÿï¼Œæœ€ç»ˆè‘¬èº«ç«æµ·ï¼Œè¿™ä¹Ÿå¥‘åˆäº†å¤§åœ£çš„å…­æ ¹ä¹‹ä¸€â€”â€”â€œçœ¼è§å–œâ€ã€‚è§‚éŸ³è©è¨çš„é‚£å¥â€œè‹¥ä¸æŠ«ä¸Šè¿™ä»¶è¡£è£³ï¼Œä¼—ç”Ÿåˆæ€çŸ¥æˆ‘å°˜ç¼˜å·²æ–­ï¼Œé‡‘æµ·å°½å¹²ã€‚â€ï¼ˆç¬¬ä¸€ç« ç»“å°¾ CGã€Šçœ‹è§ã€‹ï¼‰ä¹Ÿå¯è°“ç»å…¸ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/lingjipusa.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/lingjipusa.webp&#34; alt=&#34;image&#34; data-caption=&#34;çµå‰è©è¨&#34;&gt;
  
  
  &lt;figcaption&gt;çµå‰è©è¨&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘æœ€å–œæ¬¢çš„æ˜¯ç¬¬äºŒç« å…³äºé»„é£å¤§åœ£çš„æ•…äº‹ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šè§£è¯»ï¼Œæˆ‘æ¯”è¾ƒè®¤å¯çš„è¯´æ³•æ˜¯çµå‰è©è¨ä½œç¥Ÿï¼Œæƒ©ç½šé»„é‡‘ä½›å›½çš„ç™¾å§“ï¼Œè€Œé»„é£å¤§åœ£æ˜¯ä¸ªå¥½å¦–ã€‚å°¤å…¶æ˜¯é»„é£å¤§åœ£çš„é‚£å¥â€œæˆ‘æ¥åŠ©ä½ â€ï¼Œå–Šåœ¨äº†å¤šå°‘äººçš„å¿ƒåä¸Šã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/wolaizhuni.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/wolaizhuni.webp&#34; alt=&#34;image&#34; data-caption=&#34;é»„é£å¤§åœ£ï¼šæˆ‘æ¥åŠ©ä½ &#34;&gt;
  
  
  &lt;figcaption&gt;é»„é£å¤§åœ£ï¼šæˆ‘æ¥åŠ©ä½ &lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;é‡‘å¥&#34;&gt;é‡‘å¥&lt;/h2&gt;
&lt;p&gt;é™¤äº†è§‚éŸ³è©è¨å¯¹é»‘ç†Šç²¾è¯´çš„é‚£å¥â€œé‡‘æµ·å°½å¹²â€å¤–ï¼Œæ¸¸æˆä¸­è¿˜æœ‰è®¸å¤šé‡‘å¥ï¼Œå¤§å¤šä»¥æ—ç™½çš„å½¢å¼å‡ºç°ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯è§’è‰²çš„å¯¹ç™½ã€‚æœ€ç²¾å½©çš„å½“å±é»„çœ‰å¤§ç‹ boss æˆ˜ä¸­çš„é‚£å¤§æ®µå¯¹ç™½ã€‚ä»¥ä¸‹æ˜¯æˆ‘æ”¶é›†çš„ä¸€äº›ç²¾å½©å¯¹ç™½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œåªè¦å¿ƒä¸­è¿˜æœ‰æ”¾ä¸ä¸‹çš„å¶åƒï¼Œç»ˆæœ‰ä¸€å¤©ï¼Œå®ƒå°†åŒ–ä¸ºä¿®è¡Œè·¯ä¸Šçš„æ— è§£ä¸šéšœã€‚â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œæœ‰åœ£å°±æœ‰ç›—ï¼Œæœ‰é«˜å±±å°±æœ‰æ·±æ¸Šï¼Œæœ‰å¤©åœ°æ‚¬æ®Šå°±æœ‰è…¥é£è¡€é›¨ï¼Œæˆ‘é€ƒä¸æ‰ï¼Œä½ ä¹Ÿé€ƒä¸æ‰ï¼â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œä»–ä»¬æƒ³çœ‹çš„ï¼Œæ˜¯å¦‚ä»Šæˆ‘ä»¬è·ªç€çš„æ¨¡æ ·ï¼â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œäººä¹Ÿï¼Œå…½ä¹Ÿï¼Œä½›ä¹Ÿï¼Œå¦–ä¹Ÿï¼Œä¼—ç”Ÿè‡ªæœ‰æ ¹å™¨ï¼ŒæŒä¼˜åŠ£ä¸ºæ¬¡ç¬¬ï¼Œå¯ä¹±æ¥ä¸å¾—ã€‚ä½ è¯´ï¼Œå¯¹å—ï¼Ÿå­™æ‚Ÿç©ºï¼Ÿâ€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œä¿¡ä»€ä¹ˆç‹—å±å¦‚æ¥ï¼Œä¸å¦‚æˆ‘è‡ªå·±æ¥ï¼â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œæ—¢è§æœªæ¥ï¼Œä¸ºä½•ä¸æ‹œï¼Ÿâ€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œä¸æ€ç”Ÿï¼Œä»‡æ¨æ°¸æ— æ­¢æ¯ï¼›ä¸å·ç›—ï¼Œå¼ºå¼±å¦‚æˆ‘ä½•å¼‚ï¼›ä¸é‚ªæ·«ï¼Œä¸€åˆ‡æœ‰æƒ…çš†å­½ï¼›ä¸å¦„è¯­ï¼Œæ¢¦å¹»æ³¡å½±ç©ºè™šï¼›ä¸é¦‹é…’ï¼Œå¿§æ€–æ¶¨è½æ— å¸¸ï¼›ä¸è€½ä¹ï¼ŒèŠ³ååˆ¹é‚£è€Œå·²ï¼›ä¸è´ªçœ ï¼Œè‹¦è‹¦ä¸å¾—è§£è„±ï¼›ä¸çºµæ¬²ï¼Œè¯¸è¡Œäº†æ— ç”Ÿè¶£ã€‚â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œå¯å‘½è¿å‘ï¼Œå°±åƒçˆ±äººçš„èˆŒå¤´ï¼Œå˜´é‡Œä¸€å¥—ï¼Œå¿ƒé‡Œä¸€å¥—ã€‚å“ªæ€•äº²å£å°åˆ°ï¼Œä¹Ÿä¸çŸ¥åˆ°åº•æ˜¯æƒ³è¦ï¼Œè¿˜æ˜¯ä¸æƒ³è¦ã€‚â€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œåæ¥å•Šï¼Œè¿™ç¦…é™¢åˆè¢«é‡å»ºäº†ã€‚å¯äººå¿ƒè‹¥æ˜¯çƒ§æ²¡äº†ï¼Œä¿®å¥½ä¸€åº§ç ´åº™ï¼Œåˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿâ€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—ç™½&lt;/strong&gt;ï¼šâ€œå¤©åœ°ä¸‡ç‰©çš†ç‚‰é¼ï¼Œå”¯æœ‰ä¸Šå“å¾—æˆ‘å¿ƒã€‚â€ï¼ˆæˆŒç‹—ç‚¼ä¸¹å®Œæˆæ—¶è¯´ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»‘é£å¤§ç‹&lt;/strong&gt;ï¼šâ€œå‰ç¨‹æš—æ¼†æœ¬éš¾çŸ¥ï¼Œä¹˜é£å¾—åŠ¿å„æœ‰æ—¶ã€‚æ—¢æˆå—æµ·ä¿®çœŸå£«ï¼Œå´å«è´¢è¿·ä½œé’±ç—´ã€‚â€ï¼ˆé»‘é£å¤§ç‹ç›¸å…³å‰§æƒ…ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯…è™&lt;/strong&gt;ï¼šâ€œå…­ä¸å…­ç”²ï¼Œä»ä¸åƒç´ ã€‚&amp;quot;ï¼ˆå‡»è´¥ç©å®¶åï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™å…ˆé”‹&lt;/strong&gt;ï¼šâ€œæ‰“ä¸è¿‡ï¼Œå°±è·ªä¸‹ã€‚çŒ´å¤´ç•™ç€ä¸‹é…’ï¼Œå‰©ä¸‹çš„äº¤ç»™å¤§ç‹ã€‚â€ï¼ˆå‡»è´¥ç©å®¶åï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æˆ˜æ–—ç³»ç»Ÿ&#34;&gt;æˆ˜æ–—ç³»ç»Ÿ&lt;/h2&gt;
&lt;p&gt;ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„æˆ˜æ–—ç³»ç»Ÿæå…·ç‰¹è‰²ã€‚ä¸»è§’ä»¥å¤šæ ·æ£æ³•æˆ˜æ–—ï¼Œåˆ†ä¸ºè½»æ£ã€é‡æ£ç­‰å¤šç§ç±»å‹ï¼Œå„ç§æ£æ³•çš„è¡¨ç°å’Œæ‰“å‡»èŒƒå›´å„å¼‚ã€‚ä½†åœ¨ä¸€å‘¨ç›®æ—¶ï¼Œæˆ‘åªä½¿ç”¨äº†åŠˆæ£ï¼Œå› ä¸ºçµå…‰ç‚¹æœ‰é™ï¼Œæ— æ³•åŒæ—¶åŠ åˆ°å¤šä¸ªæ£æ³•ä¸Šï¼ŒäºŒå‘¨ç›®å†å°è¯•å…¶ä»–æ£æ³•å§ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œæ¸¸æˆä¸­è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ­¦å™¨å’Œå¤šç§æ³•æœ¯ç¥é€šï¼Œå¦‚å¥‡æœ¯ã€èº«æ³•ã€æ¯«æ¯›å’Œå˜èº«ç­‰ã€‚é—ªé¿æœºåˆ¶ç›¸å½“çµæ´»ï¼Œå¹¶å¸¦æœ‰æ— æ•Œå¸§æ•ˆæœï¼Œè¿™ç‚¹åœ¨æ¸¸æˆåˆšå¼€å§‹æ—¶æˆ‘æ²¡æ³¨æ„åˆ°ï¼Œä¸€ä¸Šæ¥å°±ç›²ç›®æ”»å‡»ï¼Œä¸æ‡‚å¾—èº²é¿ï¼Œå› æ­¤æ­»äº†æ— æ•°æ¬¡æ‰æ˜ç™½ã€‚&lt;/p&gt;
&lt;p&gt;æ¸¸æˆä¸­æœ‰ç”Ÿå‘½å€¼ã€æ³•åŠ›å€¼å’Œæ°”åŠ›å€¼ä¸‰ç§æ•°å€¼æ¡ï¼Œå„è‡ªå¯¹åº”ä¸åŒçš„æ¢å¤æœºåˆ¶ã€‚ä¸å…¶ä»–é­‚ç±»æ¸¸æˆä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¾æ¸¸æˆç«Ÿç„¶æ²¡æœ‰æ¢å¤æ³•åŠ›çš„è¯æ°´ï¼Œç›´åˆ°äºŒå‘¨ç›®æˆ‘æ‰æ‰¾åˆ°è¿™ç§ä¸¹è¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/guangzhi.webp&#34; data-img=&#34;https://rootsongjc.github.io/img/blog/black-myth-wukong-review/guangzhi.webp&#34; alt=&#34;image&#34; data-caption=&#34;å‡»è´¥å¹¿æ™º&#34;&gt;
  
  
  &lt;figcaption&gt;å‡»è´¥å¹¿æ™º&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è‡³äºæ¸¸æˆä¸­çš„é‚£äº›ç²¾é­„ï¼Œå¤§éƒ¨åˆ†æˆ‘éƒ½æ²¡ç”¨è¿‡ï¼Œä¸€ç›´åˆ°ä¸€å‘¨ç›®è¿‡åŠï¼Œæˆ‘åŸºæœ¬ä¸Šåªä½¿ç”¨äº†å¹¿æ™ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœŸå¾…&#34;&gt;æœŸå¾…&lt;/h2&gt;
&lt;p&gt;ç©è¿™æ¬¾æ¸¸æˆæ—¶æˆ‘ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆå¤©å‘½äººä¸èƒ½å¼€å£è¯´è¯ï¼Ÿè€Œä¸”æ¸¸æˆè¿‡ç¨‹ä¸­ä¹Ÿæ— æ³•æ§åˆ¶å¤©å‘½äººçš„å§¿åŠ¿ï¼Œä¸åƒã€Šè‰¾å°”ç™»æ³•ç¯ã€‹é‚£æ ·å¯ä»¥æ‘†ä¸ª pose æ‹ç…§ï¼Œè¿™åœ¨æ‹ç…§æ¨¡å¼ä¸­è¿˜æ˜¯æŒºå®ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œå¸Œæœ›åœ¨æœªæ¥çš„ DLC ä¸­èƒ½å¢åŠ åœ°å›¾å’Œæ›´å¤šç« èŠ‚ï¼Œç°åœ¨çš„æ¸¸æˆå†…å®¹ç¡®å®æœ‰äº›å•è–„ï¼Œç†Ÿæ‚‰åœ°å›¾åï¼ŒäºŒå‘¨ç›®çœŸçš„å¾ˆå¿«å°±èƒ½å®Œæˆã€‚æ­¤å¤–ï¼Œå¸Œæœ›èƒ½å¼•å…¥æ›´å¤šçš„æ­¦å™¨ç³»ç»Ÿã€‚æˆ‘ä»¬éƒ½çŸ¥é“æ‚Ÿç©ºçš„ç»å…¸æ­¦å™¨æ˜¯æ£å­ï¼Œä½†å¦‚æœèƒ½æœ‰æ›´å¤šæ­¦å™¨é€‰æ‹©ï¼Œæˆ˜æ–—ä¼šä¸ä¼šæ›´ç²¾å½©äº›ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹æ˜¯ä¸€éƒ¨å……æ»¡è¯šæ„çš„ä½œå“ï¼Œä½†å†…å®¹ç•¥æ˜¾ä¸è¶³ã€‚å¸Œæœ›æœªæ¥çš„ç»­ä½œèƒ½åœ¨ä¿æŒç°æœ‰ä¼˜ç‚¹çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ¸¸æˆä½“éªŒï¼Œå¢åŠ æ›´å¤šå†…å®¹å’Œç©æ³•ï¼Œä½¿ã€Šé»‘ç¥è¯ã€‹ç³»åˆ—æˆä¸ºå›½äº§æ¸¸æˆçš„ç»å…¸ä¹‹ä½œï¼Œä¹Ÿå¸Œæœ›æœªæ¥èƒ½æœ‰æ›´å¤šä¼˜ç§€çš„ 3A å¤§ä½œä»å›½å†…è¯ç”Ÿã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¾³é—¨ City Walkï¼šæ„Ÿå—ç²¾è‡´æ¿ æ±Ÿ</title>
      <link>https://jimmysong.io/blog/macao-trip/</link>
      <pubDate>Sat, 14 Sep 2024 17:21:27 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/macao-trip/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨å†³å®šå»æ¾³é—¨ä¹‹å‰ï¼Œæˆ‘å¯¹è¿™åº§å°åŸçš„å°è±¡ä»…é™äºå¤§ä¸‰å·´ã€å®˜ä¹Ÿè¡—ã€è‘¡å¼è›‹æŒã€ä½•é¸¿ç‡Šï¼Œä»¥åŠä¸ƒå­ä¹‹æ­Œé‡Œé‚£å¥â€œä½ å¯çŸ¥ macao ä¸æ˜¯æˆ‘çœŸå§“â€¦â€ã€‚ä½†å½“æˆ‘äº²è‡ªè¸ä¸Šè¿™ç‰‡ 33.3 å¹³æ–¹å…¬é‡Œçš„åœŸåœ°æ—¶ï¼Œæ‰å‘ç°è¿™ä¸ªä¸­å›½æœ€å°çš„ä¸€çº§è¡Œæ”¿åŒºï¼Œç«Ÿç„¶å……æ»¡äº†ç‹¬ç‰¹çš„éŸµå‘³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯¹æ¾³é—¨çš„ç¬¬ä¸€å°è±¡&#34;&gt;å¯¹æ¾³é—¨çš„ç¬¬ä¸€å°è±¡&lt;/h2&gt;
&lt;p&gt;è¿™æ¬¡æˆ‘æ˜¯ä»é¦™æ¸¯ä¹˜åå¤§å·´ä»æ¸¯ç æ¾³å¤§æ¡¥è¿›å…¥æ¾³é—¨ã€‚åœ¨æ­¤ä¹‹å‰æˆ‘å°±å¯¹æŸ¥é˜…è¿‡èµ„æ–™ï¼Œäº†è§£åˆ°æ¾³é—¨é¢ç§¯ä¸å¤§ï¼Œåªæœ‰ 33.3 å¹³æ–¹å…¬é‡Œï¼Œè€ŒåŒ—äº¬äºŒç¯å†…çš„é¢ç§¯æœ‰ 62 å…¬é‡Œï¼Œè¿‘ä¹æ¾³é—¨çš„ä¸¤å€ã€‚æ¾³é—¨è¡Œæ”¿åŒºåŸŸå†…åŒ…å«åŒ…æ‹¬æ¾³é—¨åŠå²›ã€æ°¹ä»”å²›å’Œè·¯ç¯å²›ã€‚æ¾³é—¨çš„é™†åœ°é¢ç§¯æ˜¯ç»è¿‡é•¿æœŸä¸æ–­å¡«æµ·é€æ¸æ‰©å¤§çš„ã€‚æ¾³é—¨ä¸ç æµ·éš”æ²³ç›¸æœ›ï¼Œå¦‚æœè¯´ä¸¤åœ°â€œé¸¡çŠ¬ç›¸é—»â€é‚£å¥½ä¸ä¸ºè¿‡ã€‚æ¾³é—¨ä¸å†…åœ°çš„è·ç¦»è¿œæ²¡æœ‰é¦™æ¸¯ä¸å†…åœ°é‚£ä¹ˆè¿œã€‚&lt;/p&gt;
&lt;p&gt;ä»æ¾³é—¨å¦ˆé˜å±±çœºæœ›å¯¹å²¸ï¼Œç æµ·è¿‘åœ¨çœ¼å‰ã€‚ç æµ·å’Œæ¾³é—¨ä»¥å‰å±±æ°´é“ç›¸éš”ï¼Œè·ç¦»ä¸è¿‡ 300 å¤šç±³ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/zhuhai.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/zhuhai.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»æ¾³é—¨è¿œçœºç æµ·&#34;&gt;
  
  
  &lt;figcaption&gt;ä»æ¾³é—¨è¿œçœºç æµ·&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¾³é—¨åŠå²›æ˜¯è€åŸåŒºï¼Œè¡—é“ä¸Šè½¦æ°´é©¬é¾™ï¼Œç•™ç»™è¡Œäººæ­¥è¡Œçš„ç©ºé—´ååˆ†æœ‰é™ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/street.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/street.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ¾³é—¨åŠå²›çš„è¡—é“&#34;&gt;
  
  
  &lt;figcaption&gt;æ¾³é—¨åŠå²›çš„è¡—é“&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;åŸå¸‚æ¼«æ­¥city-walk&#34;&gt;åŸå¸‚æ¼«æ­¥ï¼šCity Walk&lt;/h2&gt;
&lt;p&gt;æ­¥è¡Œåˆ°å¤§ä¸‰å·´ç‰ŒåŠï¼Œå®ƒæ˜¯åœ£ä¿ç¦„å¤§æ•™å ‚å‰å£é—å€ï¼Œä½äºèŠ±ç‹å ‚åŒºç‚®å°å±±ä¸‹ï¼Œå·¦é‚»æ¾³é—¨åšç‰©é¦†å’Œå¤§ç‚®å°ã€‚ç‰ŒåŠæ€»å…±æœ‰äº”å±‚ï¼Œä¸»è¦ä»¥èŠ±å²—å²©å»ºæˆï¼Œå®½ 23 ç±³ï¼Œé«˜ 25.5 ç±³ï¼ŒåŠå‰æœ‰ 68 çº§å°é˜¶ã€‚å¤§ä¸‰å·´ç‰ŒåŠä½åˆ—â€œæ¾³é—¨å…«æ™¯â€ä¹‹é¦–ï¼Œ2005 å¹´ï¼ŒåŒ…å«å¤§ä¸‰å·´ç‰ŒåŠåœ¨å†…çš„â€œæ¾³é—¨å†å²åŸåŒºâ€åˆ—å…¥ä¸–ç•Œæ–‡åŒ–é—äº§åå½•ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/renqun.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/renqun.webp&#34; alt=&#34;image&#34; data-caption=&#34;å‰å¾€å¤§ä¸‰å·´çš„è¡—é“&#34;&gt;
  
  
  &lt;figcaption&gt;å‰å¾€å¤§ä¸‰å·´çš„è¡—é“&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨å‰å¾€å¤§ä¸‰å·´ç‰ŒåŠçš„è·¯ä¸Šç»è¿‡ä¸€æ®µå°åƒè¡—ï¼Œè¡—é“ä¸Šäººå£°é¼æ²¸ï¼Œæ‘©è‚©æ¥è¸µï¼Œå› ä¸ºå½“å¤©çš„å¤©æ°”æ¯”è¾ƒç‚çƒ­ï¼Œå†åŠ ä¸Šå°åƒè¡—ä¸Šæ•£å‘çš„ç‰›æ‚ã€çŒªè‚‰é“ºã€è›‹æŒç­‰çš„å‘³é“ï¼Œè®©äººå¿ƒé‡Œäº”å‘³æ‚é™ˆã€‚åŸä»¥ä¸ºå¤§ä¸‰å·´ç‰ŒåŠå‰ä¼šæœ‰ä¸€å—å¼€é˜”çš„å¹¿åœºï¼Œæ²¡æƒ³åˆ°åªæœ‰å°é˜¶ï¼Œè€Œä¸”å°é˜¶ä¸Šè¿˜åäº†å¾ˆå¤šäººã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/dasanba.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/dasanba.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¤§ä¸‰å·´ç‰ŒåŠçš„èƒŒé¢è¿˜åœ¨æ–½å·¥&#34;&gt;
  
  
  &lt;figcaption&gt;å¤§ä¸‰å·´ç‰ŒåŠçš„èƒŒé¢è¿˜åœ¨æ–½å·¥&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨ç‚®å°å±±ä¸Šå¯ä»¥ä¿¯ç°æ¾³é—¨åŠå²›ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/paotai.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/paotai.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»ç‚®å°å±±ä¸Šä¿¯ç°æ¾³é—¨åŠå²›&#34;&gt;
  
  
  &lt;figcaption&gt;ä»ç‚®å°å±±ä¸Šä¿¯ç°æ¾³é—¨åŠå²›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ­¤åœ°ä¸å®œä¹…ç•™ï¼Œæˆ‘ç»§ç»­æ‹¾é˜¶è€Œä¸Šï¼Œå‰å¾€ä¸»æ•™åº§å ‚ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/churt.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/churt.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä¸»æ•™åº§å ‚&#34;&gt;
  
  
  &lt;figcaption&gt;ä¸»æ•™åº§å ‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¾³é—¨çš„è¡—é“ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå¢¨ç»¿è‰²çš„é˜²æ’æŸ±ï¼Œå«©ç»¿è‰²çš„å¢™ï¼Œæ˜é»„çš„å»ºç­‘ï¼Œé…è‰²è®©äººçœ¼å‰ä¸€äº®ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/wall.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/wall.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¤§å ‚é™„è¿‘çš„å»ºç­‘&#34;&gt;
  
  
  &lt;figcaption&gt;å¤§å ‚é™„è¿‘çš„å»ºç­‘&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿˜æœ‰è¥¿æœ›æ´‹çœºæœ›ä¸»æ•™å±±å°å ‚ï¼Œåœ¨ç™»ä¸Šæ–œå¡çš„æ—¶å€™æˆ‘çœ‹åˆ°æœ‰äººåœ¨ç”¨æŠ¹å¸ƒæ¸…æ´å¢™å£ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/hill.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/hill.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»è¥¿æœ›æ´‹çœºæœ›ä¸»æ•™å±±å°å ‚&#34;&gt;
  
  
  &lt;figcaption&gt;ä»è¥¿æœ›æ´‹çœºæœ›ä¸»æ•™å±±å°å ‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¾³é—¨åŠé“ä¸Šæœ€æƒ¹çœ¼çš„å»ºç­‘éæ–°è‘¡äº¬è«å±äº†ã€‚æ–°è‘¡äº¬çš„å…¨ç§°æ˜¯æ–°è‘¡äº¬é…’åº—ï¼Œå®ƒçš„é€ å‹è®¾è®¡æåº¦æµ®å¤¸ï¼Œå†…éƒ¨è£…é¥°æ›´æ˜¯å¥¢åï¼Œå®ƒæ˜¯æ¾³é—¨â€œèµŒç‹â€ä½•é¸¿ç‡Šè€—èµ„ 50 äº¿å…ƒå…´å»ºçš„ä½äºæ¾³é—¨è‘¡äº¬è·¯ç«¯çš„èµŒåœºé…’åº—ï¼Œå…¶å¤–å½¢å¦‚å·¨å¤§é‡‘è²èŠ±ï¼Œæ˜¯æ¾³é—¨æœ€çŸ¥åçš„åœ°æ ‡å»ºç­‘ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä¸–ç•Œ 20 åº§æœ€å…·æ ‡å¿—æ€§å¤§æ¥¼ä¹‹ä¸€ã€‚å®ƒæ˜¯æ¾³é—¨é¦–å®¶æ‰“é€ â€œä¸ƒæ˜Ÿçº§â€çš„è±ªåé…’åº—ï¼Œé›†èµŒåœºã€ä½å®¿ã€é¤é¥®ã€å¨±ä¹ã€è‰ºæœ¯å±•è§ˆç­‰å¤šç§åŠŸèƒ½äºä¸€ä½“ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/xinpujing.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/xinpujing.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¯ä»¥åœ¨æ¾³é—¨åŠå²›ä¸Šéšå¤„ä»°æœ›å¯è§çš„æ–°è‘¡äº¬é…’åº—&#34;&gt;
  
  
  &lt;figcaption&gt;å¯ä»¥åœ¨æ¾³é—¨åŠå²›ä¸Šéšå¤„ä»°æœ›å¯è§çš„æ–°è‘¡äº¬é…’åº—&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¾³é—¨è™½å°ï¼Œä½†æ˜¯å„ç§äº¤é€šå·¥å…·éƒ½å¾ˆé½å…¨ï¼Œæ¾³é—¨ç°æœ‰ä¸€æ¡è¿è¥ä¸­çš„è½»è½¨çº¿è·¯ï¼Œä»å¦ˆé˜åº™åˆ°æ¾³é—¨æœºåœºå’Œç å¤´ï¼Œå·²ç»è¿æ¥äº†æ¾³é—¨çš„ä¸‰å¤§åŒºåŸŸåŠäº¤é€šæ¢çº½ã€‚æ®æ‚‰ï¼Œè¿˜æœ‰å¦å¤–ä¸¤æ¡çº¿è·¯åœ¨å»ºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/macao-trip/weinisiren.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/macao-trip/weinisiren.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¨å°¼æ–¯äººå¨±ä¹åœº&#34;&gt;
  
  
  &lt;figcaption&gt;å¨å°¼æ–¯äººå¨±ä¹åœº&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¤œå¹•å°†è‡³ï¼Œæˆ‘æ¥åˆ°äº†è·¯å‡¼çš„å¨å°¼æ–¯äººå¨±ä¹åœºï¼ˆå†…è®¾èµŒåœºï¼‰ï¼Œæ²¡æƒ³åˆ°è¿™é‡Œé—¨å£å‡ åè¾†å¤§å·´æ’åˆ—æˆè¡Œï¼Œè¡Œäººå…¥èŒï¼Œå†…éƒ¨æ›´æ˜¯åƒä¸€ä¸ªè¿·å®«ï¼Œä¸‰å¤§ä¸»ä½“å»ºç­‘â€”â€”å¨å°¼æ–¯äººã€å·´é»äººã€ä¼¦æ•¦äººä¸²è”åœ¨ä¸€èµ·ï¼Œè®©äººç»•æ¥ç»•èµ·ï¼Œå°±æ˜¯èµ°ä¸å‡ºå»ã€‚å¨å°¼æ–¯äººå¨±ä¹åœºé‡Œçš„é‚£æ¡äººå·¥æ²³å……æ–¥ç€æ¶ˆæ¯’æ°´å‘³ï¼Œè¿™é‡Œé¢æˆ‘æ˜¯ä¸€åˆ»ä¹Ÿå¾…ä¸ä¸‹å»ï¼ŒçœŸæä¸æ‡‚ä¸ºä»€ä¹ˆè¦åœ¨è¿™é‡Œè®¾ç½®ä¸€æ¡æ²³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¾³é—¨çš„å ‚åŒº&#34;&gt;æ¾³é—¨çš„å ‚åŒº&lt;/h2&gt;
&lt;p&gt;åœ¨æŸ¥çœ‹åœ°å›¾ä¸Šæˆ‘å‘ç°æ¾³é—¨æœ‰å¾ˆå¤šâ€œå ‚åŒºâ€ï¼Œé‚£æ˜¯æ¾³é—¨åœ¨è‘¡è„ç‰™æ®–æ°‘ç»Ÿæ²»æ—¶æœŸï¼Œä»¥å¤©ä¸»æ•™çš„å ‚åŒºä½œä¸ºè¡Œæ”¿åŒºåˆ’çš„åŸºç¡€ï¼Œä¸è¿‡ç°åœ¨â€œå ‚åŒºâ€å·²ç»ä¸æ˜¯æ­£å¼çš„è¡Œæ”¿æœºæ„å»ºç½®ï¼Œä¸å…·æ³•å¾‹åœ°ä½ã€‚æ¾³é—¨æœ‰ä¸ƒä¸ªå ‚åŒºå’Œä¸€ä¸ªæ— å ‚åŒºåˆ’åˆ†åŒºåŸŸã€‚å…¶ä¸­æ¾³é—¨åŠå²›æœ‰äº”ä¸ªå ‚åŒºï¼Œåˆ†åˆ«æ˜¯èŠ±åœ°ç›å ‚åŒºã€åœ£å®‰å¤šå°¼å ‚åŒºã€å¤§å ‚åŒºã€æœ›å¾·å ‚åŒºã€é£é¡ºå ‚åŒºï¼›æ¾³é—¨ç¦»å²›æœ‰ä¸¤ä¸ªå ‚åŒºï¼Œåˆ†åˆ«æ˜¯å˜‰æ¨¡å ‚åŒºã€åœ£æ–¹æµå„å ‚åŒºã€‚ä½äºæ°¹ä»”å’Œè·¯ç¯ä¹‹é—´çš„å¡«æµ·åœ°æ®µä¸ºç§°ä¸ºè·¯æ°¹åŸï¼Œä¸å±äºä»»ä½•å ‚åŒºã€‚&lt;/p&gt;
&lt;p&gt;è‘¡è„ç‰™ä»¥å¤©ä¸»æ•™ä¿¡ä»°ä¸ºé‡è¦çš„ç¤¾ä¼šå’Œæ–‡åŒ–æ ¸å¿ƒï¼Œåœ¨æµ·å¤–æ®–æ°‘åœ°ä¹Ÿæ¨è¡Œä»¥æ•™å ‚ä¸ºä¸­å¿ƒçš„å ‚åŒºåˆ’åˆ†åˆ¶åº¦ã€‚æ•™å ‚åœ¨å ‚åŒºçš„å½¢æˆå’Œå‘å±•è¿‡ç¨‹ä¸­èµ·åˆ°äº†å…³é”®çš„æºå¤´æ€§ä½œç”¨ï¼Œä¸€ä¸ªåœ°åŒºå¾€å¾€å…ˆæœ‰é‡è¦çš„æ•™å ‚å»ºç«‹ï¼Œéšåå›´ç»•æ•™å ‚é€æ¸å½¢æˆäº†å…·æœ‰ä¸€å®šäººå£è§„æ¨¡å’Œç¤¾ä¼šç»æµæ´»åŠ¨çš„èšå±…åŒºåŸŸï¼Œè¿›è€Œè¢«åˆ’å®šä¸ºä¸€ä¸ªå ‚åŒºã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ¾³é—¨è™½å°ï¼Œä½†æ¯ä¸ªè§’è½éƒ½æœ‰å®ƒçš„æ•…äº‹ã€‚æ— è®ºæ˜¯å¤§ä¸‰å·´çš„å®ä¼Ÿé—è¿¹ï¼Œè¿˜æ˜¯è¡—å¤´å°åƒçš„çƒŸç«æ°”æ¯ï¼Œè¿™åº§å°åŸæ€»èƒ½ç»™äººç•™ä¸‹æ·±åˆ»å°è±¡ã€‚å°è€Œç²¾ï¼Œè¿™å°±æ˜¯æ¾³é—¨çš„é­…åŠ›æ‰€åœ¨ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä»‹ç» Kmeshï¼šç”¨å†…æ ¸åŸç”ŸæŠ€æœ¯é©æ–°æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢</title>
      <link>https://jimmysong.io/blog/introducing-kmesh-kernel-native-service-mesh/</link>
      <pubDate>Sat, 14 Sep 2024 16:16:04 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/introducing-kmesh-kernel-native-service-mesh/</guid>
      <description>
        
        
        &lt;p&gt;åœ¨è¿‘æœŸæ•´ç†æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢çš„å‡ ç§éƒ¨ç½²æ¨¡å¼æ—¶ï¼Œæˆ‘å…³æ³¨åˆ°äº†å¾ä¸­è™åœ¨ KubeCon China 2024 çš„åˆ†äº«ã€Š&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYWy/a-new-choice-for-istio-data-plane-architectural-innovation-for-a-brand-new-performance-experience-istioxiao-zha-sao-daepxia-mo-zha-zhonghu-xu-huawei?iframe=no&#34; title=&#34;Istio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°&lt;/a&gt;ã€‹ã€‚è¯¥åˆ†äº«ä»‹ç»äº† Kmeshï¼Œå®ƒåˆ©ç”¨ eBPF å’Œå†…æ ¸å¢å¼ºæŠ€æœ¯ï¼Œæ¶ˆé™¤äº† Sidecarï¼Œå¹¶æå‡ºäº†åŒå¼•æ“æ¨¡å¼ï¼Œæ˜¯ä¸€ç§åˆ›æ–°æ€§çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆã€‚å»å¹´æˆ‘å·²å¬é—» Kmeshï¼Œå€Ÿæ­¤å¥‘æœºæˆ‘æ·±å…¥ç ”ç©¶äº† Kmeshï¼Œæ’°å†™æ­¤åšå®¢ä¸å¤§å®¶åˆ†äº«ã€‚&lt;/p&gt;



&lt;div class=&#34;alert alert-note-container&#34;&gt;
  
  &lt;div class=&#34;alert-note-title px-2 py-2&#34;&gt;
    æ³¨æ„
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-note px-2&#34;&gt;
    &lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæœ¬æ–‡ä¸­æ‰€å±•ç¤ºçš„æ‰€æœ‰æ•°æ®å‡å¼•ç”¨è‡ª &lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYWy/a-new-choice-for-istio-data-plane-architectural-innovation-for-a-brand-new-performance-experience-istioxiao-zha-sao-daepxia-mo-zha-zhonghu-xu-huawei?iframe=no&#34; title=&#34;ã€ŠIstio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°ã€‹&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã€ŠIstio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°ã€‹&lt;/a&gt;ï¼Œæˆ‘å¹¶æœªå¯¹è¿™äº›æ•°æ®çš„å‡†ç¡®æ€§è¿›è¡Œç‹¬ç«‹éªŒè¯ã€‚è¯·è¯»è€…è‡ªè¡Œåˆ¤æ–­å’Œæ ¸å®è¿™äº›æ•°æ®çš„å¯é æ€§ã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;åƒ Istio è¿™æ ·çš„æœåŠ¡ç½‘æ ¼å·²æˆä¸ºç®¡ç†å¤æ‚å¾®æœåŠ¡æ¶æ„çš„æ ¸å¿ƒï¼Œæä¾›æµé‡ç®¡ç†ã€å®‰å…¨æ€§å’Œå¯è§‚æµ‹æ€§ç­‰åŠŸèƒ½ã€‚Sidecar æ¨¡å‹ï¼Œå³åœ¨æ¯ä¸ªæœåŠ¡å®ä¾‹æ—è¿è¡Œä¸€ä¸ªä»£ç†ï¼Œå·²æˆä¸ºä¸»è¦æ–¹æ³•ã€‚è™½ç„¶åŠŸèƒ½æœ‰æ•ˆï¼Œä½†è¿™ç§æ¶æ„å¼•å…¥äº†æ˜¾è‘—çš„å»¶è¿Ÿå’Œèµ„æºå¼€é”€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¼ ç»Ÿ-sidecar-æ¶æ„çš„å±€é™æ€§&#34;&gt;ä¼ ç»Ÿ Sidecar æ¶æ„çš„å±€é™æ€§&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»¶è¿Ÿå¼€é”€&lt;/strong&gt;ï¼šå¢åŠ  Sidecar ä»£ç†ä¼šå¯¼è‡´ç½‘ç»œè·³æ•°å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¢åŠ ï¼Œæ¯æ¬¡æœåŠ¡è°ƒç”¨å¼•å…¥é¢å¤– &lt;strong&gt;2 è‡³ 3 æ¯«ç§’&lt;/strong&gt; çš„å»¶è¿Ÿã€‚å¯¹äºå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼Œè¿™ç§å»¶è¿Ÿæ˜¯ä¸å¯æ¥å—çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;ï¼šæ¯ä¸ª Sidecar éƒ½ä¼šæ¶ˆè€— CPU å’Œå†…å­˜èµ„æºã€‚åœ¨æ‹¥æœ‰æ•°åƒä¸ªæœåŠ¡çš„å¤§è§„æ¨¡éƒ¨ç½²ä¸­ï¼Œç´¯ç§¯çš„èµ„æºå¼€é”€å·¨å¤§ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ä¸€å®šçš„æŠ€æœ¯æ‰‹æ®µè¿›è¡Œä¼˜åŒ–ï¼Œä½†ä¾ç„¶é™ä½äº†éƒ¨ç½²å¯†åº¦å¹¶å¢åŠ äº†è¿è¥æˆæœ¬ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Istio çš„æ€§èƒ½æµ‹é‡æ˜¾ç¤ºï¼Œå³ä½¿æ²¡æœ‰æµé‡åˆ†å‘ï¼Œä»å­˜åœ¨çº¦ 3 æ¯«ç§’çš„å›ºæœ‰å»¶è¿Ÿå¼€é”€ã€‚éšç€è¿æ¥æ•°é‡çš„å¢é•¿ï¼Œå»¶è¿Ÿç›¸åº”å¢åŠ ï¼Œè¿™çªæ˜¾äº† Sidecar æ¨¡å‹åœ¨é«˜æ€§èƒ½åº”ç”¨ä¸­çš„ä½æ•ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¡Œä¸šåº”å¯¹æŒ‘æˆ˜çš„å°è¯•&#34;&gt;è¡Œä¸šåº”å¯¹æŒ‘æˆ˜çš„å°è¯•&lt;/h2&gt;
&lt;p&gt;å·²ç»æå‡ºäº†å¤šç§è§£å†³æ–¹æ¡ˆæ¥ç¼“è§£ Sidecar æ¶æ„çš„ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;cilium-æœåŠ¡ç½‘æ ¼&#34;&gt;Cilium æœåŠ¡ç½‘æ ¼&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ³•&lt;/strong&gt;ï¼šå°† eBPF ä¸ Envoy ç›¸ç»“åˆï¼Œåˆ›å»ºä¸€ä¸ªæ—  Sidecar çš„æœåŠ¡ç½‘æ ¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;L4 æµé‡&lt;/strong&gt;ï¼šä½¿ç”¨ eBPF è¿›è¡Œé«˜æ•ˆçš„å†…æ ¸çº§æ•°æ®è·¯ç”±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;L7 æµé‡&lt;/strong&gt;ï¼šä¾èµ– Envoy è¿›è¡Œåº”ç”¨å±‚è§£æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;L7 é¢å¤–è·³æ•°&lt;/strong&gt;ï¼šé€šè¿‡ Envoy è¿›è¡Œ L7 ç®¡ç†å¼•å…¥äº†é¢å¤–çš„ç½‘ç»œè·³æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•…éšœéš”ç¦»&lt;/strong&gt;ï¼šåœ¨ç¡®ä¿æ²»ç†æ•…éšœéš”ç¦»æ–¹é¢å­˜åœ¨æŒ‘æˆ˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;istio-ambient-mesh&#34;&gt;Istio Ambient Mesh&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ³•&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;ztunnel&lt;/strong&gt; å’Œ &lt;strong&gt;waypoint&lt;/strong&gt; ä»£ç†ï¼Œå¼•å…¥æ—  Sidecar çš„æ¶æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç©ºé—´å¤„ç†&lt;/strong&gt;ï¼šæ‰€æœ‰æµé‡æ‹¦æˆªå’Œç®¡ç†éƒ½åœ¨ç”¨æˆ·ç©ºé—´è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚çš„æµé‡æ‹¦æˆª&lt;/strong&gt;ï¼šç”¨æˆ·ç©ºé—´çš„æ‹¦æˆªå¢åŠ äº†å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·³æ•°å¢åŠ &lt;/strong&gt;ï¼šL7 è¿æ¥æ¶‰åŠå¤šä¸ªç½‘ç»œè·³æ•°ï¼Œå¢åŠ äº†å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›è§£å†³æ–¹æ¡ˆè™½ç„¶åˆ›æ–°ï¼Œä½†å¹¶æœªå®Œå…¨è§£å†³ Sidecar æ¶æ„å›ºæœ‰çš„å»¶è¿Ÿå’Œèµ„æºå¼€é”€é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š&lt;a href=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/&#34; title=&#34;æ•°æ®å¹³é¢çš„å‡ ç§éƒ¨ç½²æ¨¡å¼&#34;&gt;æ•°æ®å¹³é¢çš„å‡ ç§éƒ¨ç½²æ¨¡å¼&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»‹ç»-kmeshä¸€ç§å†…æ ¸åŸç”Ÿçš„æ–¹æ³•&#34;&gt;ä»‹ç» Kmeshï¼šä¸€ç§å†…æ ¸åŸç”Ÿçš„æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/kmesh-net/kmesh&#34; title=&#34;Kmesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kmesh&lt;/a&gt; é€šè¿‡å°†æµé‡æ²»ç†ç›´æ¥é›†æˆåˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå®šä¹‰äº†ä¸€ç§æ–°çš„æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢ã€‚åˆ©ç”¨ eBPFï¼ˆæ‰©å±•ä¼¯å…‹åˆ©æ•°æ®åŒ…è¿‡æ»¤å™¨ï¼‰å’Œå†…æ ¸å¢å¼ºï¼ŒKmesh æä¾›é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿå’Œèµ„æºé«˜æ•ˆçš„æœåŠ¡ç½‘æ ¼èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŠ€æœ¯æ¶æ„&#34;&gt;æŠ€æœ¯æ¶æ„&lt;/h3&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† Kmesh çš„æ¶æ„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/introducing-kmesh-kernel-native-service-mesh/kmesh-arch.svg&#34; data-img=&#34;/blog/introducing-kmesh-kernel-native-service-mesh/kmesh-arch.svg&#34; alt=&#34;image&#34; data-caption=&#34;Kmesh æ¶æ„å›¾ï¼šï¼ˆæ ¹æ® &amp;lt;a href=&amp;#34;https://github.com/kmesh-net/kmesh&amp;#34; title=&amp;#34;Kmesh GitHub&amp;#34; target=&amp;#34;_blank&amp;#34; rel=&amp;#34;noopener&amp;#34;&amp;gt;Kmesh GitHub&amp;lt;/a&amp;gt; ç»˜åˆ¶ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Kmesh æ¶æ„å›¾ï¼šï¼ˆæ ¹æ® &lt;a href=&#34;https://github.com/kmesh-net/kmesh&#34; title=&#34;Kmesh GitHub&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kmesh GitHub&lt;/a&gt; ç»˜åˆ¶ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒç»„ä»¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Kmesh-Daemon&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„ç®¡ç†ç»„ä»¶ï¼Œè´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®¡ç† eBPF ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;ä»æ§åˆ¶å¹³é¢ï¼ˆå¦‚ Istiodï¼‰è®¢é˜… xDS é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;å¤„ç†å¯è§‚æµ‹æ€§å’ŒæŒ‡æ ‡æ”¶é›†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;eBPF ç¼–æ’&lt;/strong&gt;ï¼šåœ¨å†…æ ¸çº§å®ç°æµé‡æ‹¦æˆªå’Œç®¡ç†ï¼Œæ”¯æŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;L4 è´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;æµé‡åŠ å¯†å’Œè§£å¯†ã€‚&lt;/li&gt;
&lt;li&gt;ç›‘æ§å’Œç®€å•çš„ L7 åŠ¨æ€è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Waypoint Proxyï¼ˆåŒå¼•æ“æ¨¡å¼ä¸‹å¯é€‰ï¼‰&lt;/strong&gt;ï¼šå¤„ç†é«˜çº§ L7 æµé‡æ²»ç†ï¼Œå¯æŒ‰å‘½åç©ºé—´æˆ–æœåŠ¡è¿›è¡Œéƒ¨ç½²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å…³é”®ä¼˜åŠ¿&#34;&gt;å…³é”®ä¼˜åŠ¿&lt;/h3&gt;
&lt;p&gt;è¯¥åˆ†äº«ä¸­æŒ‡å‡º Kmesh å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼Œå°¤å…¶æ˜¯æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ä¸Šï¼š&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/introducing-kmesh-kernel-native-service-mesh/performance.webp&#34; data-img=&#34;/blog/introducing-kmesh-kernel-native-service-mesh/performance.webp&#34; data-width=&#34;2208&#34; data-height=&#34;746&#34; alt=&#34;image&#34; data-caption=&#34;Kmesh vs Sidecar vs Ambientï¼ˆ&amp;lt;a href=&amp;#34;https://kccncossaidevchn2024.sched.com/event/1eYWy/a-new-choice-for-istio-data-plane-architectural-innovation-for-a-brand-new-performance-experience-istioxiao-zha-sao-daepxia-mo-zha-zhonghu-xu-huawei?iframe=no&amp;#34; title=&amp;#34;æ¥æº&amp;#34; target=&amp;#34;_blank&amp;#34; rel=&amp;#34;noopener&amp;#34;&amp;gt;æ¥æº&amp;lt;/a&amp;gt;ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Kmesh vs Sidecar vs Ambientï¼ˆ&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYWy/a-new-choice-for-istio-data-plane-architectural-innovation-for-a-brand-new-performance-experience-istioxiao-zha-sao-daepxia-mo-zha-zhonghu-xu-huawei?iframe=no&#34; title=&#34;æ¥æº&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¥æº&lt;/a&gt;ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜æ€§èƒ½&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿé™ä½&lt;/strong&gt;ï¼šä¸ä¼ ç»Ÿ Sidecar æ¶æ„ç›¸æ¯”ï¼Œå†…æ ¸åŸç”Ÿçš„ L7 ç®¡ç†å°†è½¬å‘å»¶è¿Ÿé™ä½äº†è¶…è¿‡ &lt;strong&gt;60%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨å¯åŠ¨æ”¹è¿›&lt;/strong&gt;ï¼šç”±äºæ¶ˆé™¤äº† Sidecar åˆå§‹åŒ–ï¼Œåº”ç”¨å¯åŠ¨æ—¶é—´æå‡äº† &lt;strong&gt;40%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½èµ„æºå¼€é”€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ•ˆç‡&lt;/strong&gt;ï¼šæ— éœ€ Sidecar ä»£ç†ï¼Œèµ„æºæ¶ˆè€—å‡å°‘äº†è¶…è¿‡ &lt;strong&gt;70%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— ç¼å‡çº§&lt;/strong&gt;ï¼šå†…æ ¸çº§æµé‡ç®¡ç†ç¡®ä¿å‡çº§æˆ–é‡å¯ Kmesh ç»„ä»¶ä¸ä¼šä¸­æ–­ç°æœ‰çš„æœåŠ¡è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰å…¨éš”ç¦»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºçš„å®‰å…¨æ€§&lt;/strong&gt;ï¼šåˆ©ç”¨åŸºäº BPF çš„è™šæ‹Ÿæœºå®‰å…¨å’Œ cgroup çº§åˆ«çš„æ²»ç†éš”ç¦»ï¼Œç¡®ä¿å®‰å…¨çš„å¤šç§Ÿæˆ·ç¯å¢ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çµæ´»çš„æ²»ç†æ¨¡å‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²æ¨¡å¼&lt;/strong&gt;ï¼šæä¾›å†…æ ¸åŸç”Ÿæ¨¡å¼ä»¥å®ç°æœ€å¤§æ€§èƒ½ï¼Œå’ŒåŒå¼•æ“æ¨¡å¼ä»¥è·å¾—éƒ¨ç½²çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ— ç¼å…¼å®¹æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶å¹³é¢é›†æˆ&lt;/strong&gt;ï¼šå®Œå…¨å…¼å®¹ xDS åè®®ï¼Œå…è®¸ä¸ Istio æ§åˆ¶å¹³é¢é›†æˆï¼Œæ”¯æŒ Istio API å’Œ Gateway APIã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;kmesh-vs-ambient-vs-cilium-mesh&#34;&gt;Kmesh vs Ambient vs Cilium mesh&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¸Šæ–‡ä¸­å¯¹ Kmesh çš„ä»‹ç»ï¼Œä½ ä¼šå‘ç°å®ƒä¸ Istio Ambient æ¨¡å¼åŠ Cilium mesh æœ‰å¾ˆå¤šç›¸ä¼¼æ€§ï¼Œä¸‹è¡¨å°†ä»å¤šä¸ªç»´åº¦å¯¹æ¯”å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æ¯”è¾ƒç»´åº¦&lt;/th&gt;
          &lt;th&gt;Kmesh&lt;/th&gt;
          &lt;th&gt;Istio Ambient æ¨¡å¼&lt;/th&gt;
          &lt;th&gt;Cilium Mesh&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æµé‡æ‹¦æˆªä¸å¤„ç†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;å†…æ ¸çº§å¤„ç†ï¼š&lt;/strong&gt; åˆ©ç”¨ eBPF å’Œå†…æ ¸å¢å¼ºï¼Œå°†æµé‡æ²»ç†ç›´æ¥é›†æˆåˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­ã€‚&lt;br&gt;â€¢&lt;strong&gt;æ¨¡å¼é€‰æ‹©ï¼š&lt;/strong&gt;&lt;br&gt;Â Â â€¢Â &lt;strong&gt;å†…æ ¸åŸç”Ÿæ¨¡å¼ï¼š&lt;/strong&gt; L4 å’Œ L7 æµé‡å…¨éƒ¨åœ¨å†…æ ¸ä¸­å¤„ç†ï¼Œæ— éœ€ç”¨æˆ·ç©ºé—´ä»£ç†ã€‚&lt;br&gt;Â Â â€¢ &lt;strong&gt;åŒå¼•æ“æ¨¡å¼ï¼š&lt;/strong&gt; L4 åœ¨å†…æ ¸ä¸­å¤„ç†ï¼ŒL7 ç”± Waypoint Proxy å¤„ç†ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;ç”¨æˆ·ç©ºé—´å¤„ç†ï¼š&lt;/strong&gt; å¼•å…¥ &lt;strong&gt;ztunnel&lt;/strong&gt; å’Œ &lt;strong&gt;Waypoint Proxy&lt;/strong&gt;ï¼Œåœ¨ç”¨æˆ·ç©ºé—´è¿›è¡Œæµé‡æ‹¦æˆªå’Œç®¡ç†ã€‚&lt;br&gt;â€¢ &lt;strong&gt;æ—  Sidecar æ¶æ„ï¼š&lt;/strong&gt; æ¶ˆé™¤äº† Sidecarï¼Œä½†å¢åŠ äº†æ–°çš„ç”¨æˆ·ç©ºé—´ç»„ä»¶ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;æ··åˆå¤„ç†ï¼š&lt;/strong&gt; ç»“åˆ eBPF å’Œ Envoyã€‚&lt;br&gt;â€¢ &lt;strong&gt;L4 æµé‡ï¼š&lt;/strong&gt; åœ¨å†…æ ¸ä¸­ä½¿ç”¨ eBPF å¤„ç†ã€‚&lt;br&gt;â€¢ &lt;strong&gt;L7 æµé‡ï¼š&lt;/strong&gt; ç”±ç”¨æˆ·ç©ºé—´çš„ Envoy ä»£ç†å¤„ç†ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€§èƒ½ä¸å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;é«˜æ€§èƒ½ï¼š&lt;/strong&gt; å†…æ ¸çº§å¤„ç†ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´ã€‚&lt;br&gt;â€¢ &lt;strong&gt;å»¶è¿Ÿé™ä½ï¼š&lt;/strong&gt; è½¬å‘å»¶è¿Ÿé™ä½è¶…è¿‡ &lt;strong&gt;60%&lt;/strong&gt;ã€‚&lt;br&gt;â€¢ &lt;strong&gt;ä½å»¶è¿Ÿå¯åŠ¨ï¼š&lt;/strong&gt; åº”ç”¨å¯åŠ¨æ—¶é—´æé«˜ &lt;strong&gt;40%&lt;/strong&gt;ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;æ€§èƒ½æ”¹è¿›ä½†ä»æœ‰å»¶è¿Ÿï¼š&lt;/strong&gt; æ¯”ä¼ ç»Ÿ Sidecar æ¶æ„æœ‰æ‰€æå‡ï¼Œä½†ç”¨æˆ·ç©ºé—´å¤„ç†å’Œå¢åŠ çš„ç½‘ç»œè·³æ•°ä»å¸¦æ¥å»¶è¿Ÿã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;L4 æ€§èƒ½ä¼˜å¼‚ï¼š&lt;/strong&gt; L4 æµé‡å†…æ ¸å¤„ç†ï¼Œé«˜æ•ˆã€‚&lt;br&gt;â€¢ &lt;strong&gt;L7 å­˜åœ¨å¼€é”€ï¼š&lt;/strong&gt; L7 æµé‡é€šè¿‡ Envoyï¼Œå¢åŠ ç½‘ç»œè·³æ•°å’Œæ½œåœ¨å»¶è¿Ÿã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ¶æ„å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;å†…æ ¸ä¾èµ–ï¼š&lt;/strong&gt; éœ€è¦ç‰¹å®šå†…æ ¸ç‰ˆæœ¬æˆ–å¢å¼ºï¼Œéƒ¨ç½²å¤æ‚åº¦å¢åŠ ã€‚&lt;br&gt;â€¢ &lt;strong&gt;ç»„ä»¶ç®€æ´ï¼š&lt;/strong&gt; å†…æ ¸å¤„ç†ï¼Œå‡å°‘å¯¹ç”¨æˆ·ç©ºé—´ç»„ä»¶çš„ä¾èµ–ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;æ–°å¢ç»„ä»¶ï¼š&lt;/strong&gt; å¼•å…¥ ztunnel å’Œ Waypoint Proxyï¼Œæ¶æ„æ›´å¤æ‚ã€‚&lt;br&gt;â€¢ &lt;strong&gt;Istio ç”Ÿæ€ï¼š&lt;/strong&gt; ç»§æ‰¿ Istio çš„å¤æ‚æ€§ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;åŒé‡ç»„ä»¶ï¼š&lt;/strong&gt; éœ€è¦ç®¡ç† eBPF å’Œ Envoyã€‚&lt;br&gt;â€¢ &lt;strong&gt;L7 å¤æ‚æ€§ï¼š&lt;/strong&gt; å¤„ç† L7 æµé‡æ—¶æ¶æ„æ›´å¤æ‚ã€‚&lt;br&gt;â€¢ &lt;strong&gt;CNI é›†æˆï¼š&lt;/strong&gt; ç®€åŒ–éƒ¨åˆ†ç½‘ç»œé…ç½®ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§ä¸éš”ç¦»&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;å†…æ ¸çº§å®‰å…¨ï¼š&lt;/strong&gt; åˆ©ç”¨ BPF è™šæ‹Ÿæœºå’Œ cgroup éš”ç¦»ï¼Œæä¾›é«˜å®‰å…¨ä¿éšœã€‚&lt;br&gt;â€¢ &lt;strong&gt;mTLS å†…æ ¸æ”¯æŒï¼š&lt;/strong&gt; å†…æ ¸å®ç°åŒå‘ TLSï¼ŒåŠ å¯†æ€§èƒ½é«˜ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;ç”¨æˆ·ç©ºé—´å®‰å…¨ï¼š&lt;/strong&gt; é€šè¿‡ç”¨æˆ·ç©ºé—´ç»„ä»¶å®ç°å®‰å…¨åŠŸèƒ½ï¼Œå¯èƒ½å¢åŠ æ”»å‡»é¢ã€‚&lt;br&gt;â€¢ &lt;strong&gt;ä¸°å¯Œç­–ç•¥æ”¯æŒï¼š&lt;/strong&gt; ç»§æ‰¿ Istio çš„å®‰å…¨ç­–ç•¥å’Œé…ç½®èƒ½åŠ›ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;eBPF å®‰å…¨ç‰¹æ€§ï¼š&lt;/strong&gt; åˆ©ç”¨ eBPF çš„å®‰å…¨æ¨¡å‹ã€‚&lt;br&gt;â€¢ &lt;strong&gt;éš”ç¦»æŒ‘æˆ˜ï¼š&lt;/strong&gt; æ²»ç†æ•…éšœéš”ç¦»éœ€é¢å¤–è€ƒè™‘ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å…¼å®¹æ€§ä¸é›†æˆ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;Istio æ§åˆ¶å¹³é¢ï¼š&lt;/strong&gt; é›†æˆ Istio æ§åˆ¶å¹³é¢ï¼Œæ”¯æŒ xDS åè®®ï¼Œå…¼å®¹ Istio API å’Œ Gateway APIã€‚&lt;br&gt;â€¢ &lt;strong&gt;Kubernetes åŸç”Ÿï¼š&lt;/strong&gt; æ— ç¼è¿è¡Œåœ¨ Kubernetes ä¸Šã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;å®Œå…¨å…¼å®¹ï¼š&lt;/strong&gt; ä½œä¸º Istio çš„ä¸€éƒ¨åˆ†ï¼Œå®Œå…¨å…¼å®¹ Istio API å’Œç”Ÿæ€ç³»ç»Ÿã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;CNI è§’è‰²ï¼š&lt;/strong&gt; ä½œä¸º Kubernetes çš„ CNI æ’ä»¶ï¼Œæä¾›ç½‘ç»œå’ŒæœåŠ¡ç½‘æ ¼åŠŸèƒ½ã€‚&lt;br&gt;â€¢ &lt;strong&gt;ç½‘ç»œç­–ç•¥ï¼š&lt;/strong&gt; æä¾›å¼ºå¤§çš„ç½‘ç»œç­–ç•¥å’Œå®‰å…¨åŠŸèƒ½ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;éƒ¨ç½²ä¸è¿ç»´è€ƒè™‘&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;å†…æ ¸è¦æ±‚ï¼š&lt;/strong&gt; éœ€ä¿®æ”¹å†…æ ¸æˆ–ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼Œæ³¨æ„å…¼å®¹æ€§ã€‚&lt;br&gt;â€¢ &lt;strong&gt;æ€§èƒ½ä¼˜å…ˆï¼š&lt;/strong&gt; é€‚åˆè¿½æ±‚æè‡´æ€§èƒ½çš„åœºæ™¯ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;æ˜“äºè¿ç§»ï¼š&lt;/strong&gt; ä¸º Istio ç”¨æˆ·æä¾›æ—  Sidecar æ›¿ä»£æ–¹æ¡ˆï¼Œä¾¿äºè¿‡æ¸¡ã€‚&lt;br&gt;â€¢ &lt;strong&gt;å¤æ‚æ€§ç®¡ç†ï¼š&lt;/strong&gt; éœ€ç®¡ç†æ–°å¢ç”¨æˆ·ç©ºé—´ç»„ä»¶ã€‚&lt;/td&gt;
          &lt;td&gt;â€¢ &lt;strong&gt;ç°æœ‰ Cilium ç”¨æˆ·ï¼š&lt;/strong&gt; å·²ä½¿ç”¨ Cilium æ—¶ï¼Œé›†æˆæœåŠ¡ç½‘æ ¼åŠŸèƒ½ç®€å•ã€‚&lt;br&gt;â€¢ &lt;strong&gt;å­¦ä¹ æ›²çº¿ï¼š&lt;/strong&gt; éœ€ç†Ÿæ‚‰ eBPF ä¸ Envoy çš„ç»“åˆã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Kmesh&lt;/strong&gt;ï¼šé€šè¿‡å°†æµé‡æ²»ç†ä¸‹æ²‰åˆ°å†…æ ¸ï¼Œå®ç°é«˜æ€§èƒ½å’Œä½å»¶è¿Ÿï¼Œé€‚ç”¨äºå¯¹æ€§èƒ½å’Œèµ„æºæ•ˆç‡è¦æ±‚æé«˜çš„åº”ç”¨ã€‚ä½†éœ€è¦ç‰¹å®šçš„å†…æ ¸æ”¯æŒï¼Œéƒ¨ç½²æ—¶éœ€è€ƒè™‘å…¼å®¹æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Istio Ambient Mesh&lt;/strong&gt;ï¼šæ¶ˆé™¤äº† Sidecarï¼Œæ”¹è¿›äº†æ€§èƒ½ï¼Œä¿ç•™äº† Istio çš„ä¸°å¯ŒåŠŸèƒ½ï¼Œä½†ç”¨æˆ·ç©ºé—´å¤„ç†å¯èƒ½å¸¦æ¥æ–°çš„å¤æ‚æ€§å’Œå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Cilium Mesh&lt;/strong&gt;ï¼šåˆ©ç”¨ eBPF æé«˜ L4 æ€§èƒ½ï¼Œä½† L7 æµé‡å¤„ç†ä¾èµ– Envoyï¼Œå¯èƒ½å¢åŠ å¤æ‚æ€§å’Œå»¶è¿Ÿã€‚é€‚åˆå·²ç»ä½¿ç”¨ Cilium çš„ç¯å¢ƒï¼Œæä¾›å¼ºå¤§çš„ç½‘ç»œç­–ç•¥å’Œå®‰å…¨åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;kmesh-çš„ä¸¤ç§è¿è¡Œæ¨¡å¼&#34;&gt;Kmesh çš„ä¸¤ç§è¿è¡Œæ¨¡å¼&lt;/h2&gt;
&lt;p&gt;Kmesh æä¾›ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éƒ¨ç½²éœ€æ±‚ï¼š&lt;/p&gt;
&lt;h3 id=&#34;å†…æ ¸åŸç”Ÿæ¨¡å¼&#34;&gt;å†…æ ¸åŸç”Ÿæ¨¡å¼&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ¦‚è¿°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æè‡´æ€§èƒ½&lt;/strong&gt;ï¼šåœ¨ L4 å’Œ L7 æµé‡ä¸­å®ç°æœ€ä½çš„å»¶è¿Ÿï¼Œæ— é¢å¤–çš„ç½‘ç»œè·³æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸å¢å¼º&lt;/strong&gt;ï¼šä½¿ç”¨ eBPF å’Œå†…æ ¸æ¨¡å—ï¼ˆkoï¼‰å¢å¼ºå†…æ ¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ªé€ çš„ TCP è¿æ¥&lt;/strong&gt;ï¼šåœ¨å†…æ ¸ä¸­åˆ©ç”¨â€œä¼ªå»ºé“¾â€æ¥ç®¡ç†å¤æ‚çš„åº”ç”¨å±‚æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµé‡ç®¡ç†&lt;/strong&gt;ï¼šåœ¨å®¢æˆ·ç«¯å‘èµ·é€šä¿¡æ—¶ç›´æ¥ç®¡ç†æµé‡ï¼Œæ¶ˆé™¤ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;



&lt;div class=&#34;alert alert-tip-container&#34;&gt;
  
  &lt;div class=&#34;alert-tip-title px-2 py-2&#34;&gt;
    ä¼ªå»ºé“¾
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-tip px-2&#34;&gt;
    Kmesh é‡‡ç”¨äº†ä¸€ç§ç§°ä¸ºâ€œä¼ªå»ºé“¾â€çš„æŠ€æœ¯ï¼Œå½“æ”¶åˆ° downstream çš„ TCP è¯·æ±‚æ—¶ï¼ŒeBPF ç¨‹åºé¦–å…ˆä¸ downstream åˆ›å»ºä¸€ä¸ªâ€œä¼ª TCP è¿æ¥â€ï¼Œè€Œä¸ä¼šç«‹å³ä¸ upstream æœåŠ¡å»ºç«‹å®é™…è¿æ¥ã€‚eBPF ç¨‹åºåœ¨è·å–åˆ° downstream å‘å‡ºçš„ HTTP æ¶ˆæ¯åï¼Œæ ¹æ®æ¶ˆæ¯è¿›è¡Œ L7 è·¯ç”±å¤„ç†ï¼Œæ‰¾åˆ°ç›®æ ‡æœåŠ¡åå†ä¸ upstream å»ºç«‹è¿æ¥ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒKmesh å°† L7 å±‚çš„å¤„ç†ä¸‹æ²‰åˆ°å†…æ ¸ä¸­ï¼Œæé«˜äº†å¤„ç†æ•ˆç‡ã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿé™ä½&lt;/strong&gt;ï¼šè½¬å‘å»¶è¿Ÿå‡å°‘è¶…è¿‡ 60%ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— éœ€ç”¨æˆ·ç©ºé—´ä»£ç†&lt;/strong&gt;ï¼šæ•´ä¸ªæµé‡ç®¡ç†åœ¨å†…æ ¸å†…å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è€ƒè™‘å› ç´ &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸ç‰ˆæœ¬è¦æ±‚&lt;/strong&gt;ï¼šå¯èƒ½éœ€è¦ç‰¹å®šçš„å†…æ ¸ç‰ˆæœ¬æˆ–å¢å¼ºï¼Œè¿™å¯èƒ½å½±å“éƒ¨ç½²çš„çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åŒå¼•æ“æ¨¡å¼&#34;&gt;åŒå¼•æ“æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ¦‚è¿°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ²»ç†&lt;/strong&gt;ï¼šåœ¨æ€§èƒ½å’Œæ›´å¹¿æ³›çš„å…¼å®¹æ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸çº§æ‹¦æˆª&lt;/strong&gt;ï¼šä½¿ç”¨ eBPF åœ¨å†…æ ¸ç©ºé—´æ‹¦æˆªæµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Waypoint Proxy&lt;/strong&gt;ï¼šéƒ¨ç½²è¿œç¨‹çš„ Waypoint Proxy æ¥å¤„ç†å¤æ‚çš„ L7 æµé‡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±‚æ¬¡åˆ†ç¦»&lt;/strong&gt;ï¼šå°† L4 å’Œ L7 çš„æ²»ç†åœ¨å†…æ ¸ç©ºé—´ï¼ˆeBPFï¼‰å’Œç”¨æˆ·ç©ºé—´ï¼ˆWaypointï¼‰ä¹‹é—´åˆ†ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿé™ä½&lt;/strong&gt;ï¼šç›¸æ¯” Istio çš„ Ambient Meshï¼Œå»¶è¿Ÿå‡å°‘äº† &lt;strong&gt;30%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–çš„æµé‡æ‹¦æˆª&lt;/strong&gt;ï¼šå†…æ ¸ç©ºé—´çš„æ‹¦æˆªæ¯”ç”¨æˆ·ç©ºé—´æ›´å®‰å…¨ã€æ›´ç®€å•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™ä½é‡‡ç”¨é—¨æ§›&lt;/strong&gt;ï¼šå‡å°‘å¯¹ç‰¹å®šå†…æ ¸ç‰ˆæœ¬çš„ä¾èµ–ï¼Œä¾¿äºç”¨æˆ·é‡‡ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¸ Ambient Mesh çš„æ¯”è¾ƒ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ›´å°‘çš„ç½‘ç»œè·³æ•°&lt;/strong&gt;ï¼šKmesh å¯¹äº L7 è¿æ¥ä»…å¢åŠ ä¸€ä¸ªé¢å¤–è·³æ•°ï¼Œè€Œ Ambient Mesh å¯èƒ½å¢åŠ å¤šè¾¾ä¸‰ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´ç®€å•çš„æ¶æ„&lt;/strong&gt;ï¼šå†…æ ¸çº§æ‹¦æˆªé¿å…äº†ç”¨æˆ·ç©ºé—´æ‹¦æˆªæœºåˆ¶çš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ·±å…¥äº†è§£-kmesh-çš„æŠ€æœ¯&#34;&gt;æ·±å…¥äº†è§£ Kmesh çš„æŠ€æœ¯&lt;/h2&gt;
&lt;h3 id=&#34;ebpf-å’Œå†…æ ¸å¢å¼º&#34;&gt;eBPF å’Œå†…æ ¸å¢å¼º&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;eBPFï¼ˆæ‰©å±•ä¼¯å…‹åˆ©æ•°æ®åŒ…è¿‡æ»¤å™¨ï¼‰&lt;/strong&gt; æ˜¯ä¸€ç§å¼ºå¤§çš„æŠ€æœ¯ï¼Œå…è®¸å®‰å…¨é«˜æ•ˆåœ°å°†è‡ªå®šä¹‰ä»£ç æ³¨å…¥åˆ° Linux å†…æ ¸ã€‚Kmesh åˆ©ç”¨ eBPF æ¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹¦æˆªç½‘ç»œæµé‡&lt;/strong&gt;ï¼šå°† eBPF ç¨‹åºé™„åŠ åˆ°ç½‘ç»œäº‹ä»¶ï¼Œå®ç°å¯¹æ•°æ®åŒ…çš„å®æ—¶æ‹¦æˆªå’Œæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šæ ¹æ®ç­–ç•¥å°†æµé‡å¯¼å‘åˆé€‚çš„æœåŠ¡å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæµé‡åŠ å¯†&lt;/strong&gt;ï¼šåœ¨å†…æ ¸ä¸­å¤„ç† mTLS åŠ è§£å¯†ï¼ˆå¼€å‘ä¸­ï¼Œè®¡åˆ’ 2024 å¹´åº•æ”¯æŒï¼‰ï¼Œé™ä½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¶é›†å¯è§‚æµ‹æ€§æ•°æ®&lt;/strong&gt;ï¼šåœ¨ä¸å½±å“åº”ç”¨æ€§èƒ½çš„æƒ…å†µä¸‹æ”¶é›†æŒ‡æ ‡å’Œé¥æµ‹æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æµé‡æ‹¦æˆªå’Œç®¡ç†&#34;&gt;æµé‡æ‹¦æˆªå’Œç®¡ç†&lt;/h3&gt;
&lt;p&gt;åœ¨å†…æ ¸åŸç”Ÿæ¨¡å¼ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼ªé€ çš„è¿æ¥&lt;/strong&gt;ï¼šKmesh åœ¨å†…æ ¸ä¸­åˆ›å»ºä¼ªé€ çš„ TCP è¿æ¥ï¼Œé¿å…æ¶‰åŠç”¨æˆ·ç©ºé—´ä»£ç†æ¥ç®¡ç†æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›´æ¥çš„æ•°æ®åŒ…æ“ä½œ&lt;/strong&gt;ï¼šåœ¨å†…æ ¸çº§æ‹¦æˆªå’Œé‡å®šå‘æ•°æ®åŒ…ï¼Œæ¶ˆé™¤åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´ç§»åŠ¨æ•°æ®åŒ…æ—¶çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨åŒå¼•æ“æ¨¡å¼ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;eBPF æ‹¦æˆª&lt;/strong&gt;ï¼šeBPF ç¨‹åºå¤„ç†åˆå§‹çš„æµé‡æ‹¦æˆªå’ŒåŸºæœ¬çš„ L4 ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Waypoint Proxy&lt;/strong&gt;ï¼šå¯¹äºè·¯ç”±ã€é‡è¯•å’Œå¤´éƒ¨æ“ä½œç­‰é«˜çº§ L7 åŠŸèƒ½ï¼Œæµé‡è¢«è½¬å‘åˆ°æŒ‰æœåŠ¡æˆ–å‘½åç©ºé—´éƒ¨ç½²çš„ Waypoint Proxyã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®‰å…¨å’Œéš”ç¦»&#34;&gt;å®‰å…¨å’Œéš”ç¦»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BPF è™šæ‹Ÿæœºå®‰å…¨&lt;/strong&gt;ï¼šeBPF åœ¨å†…æ ¸ä¸­çš„å—é™è™šæ‹Ÿæœºä¸­è¿è¡Œï¼Œç¡®ä¿æ³¨å…¥çš„ä»£ç ä¸ä¼šç ´åå†…æ ¸ç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cgroup çº§åˆ«éš”ç¦»&lt;/strong&gt;ï¼šåœ¨ cgroup çº§åˆ«åº”ç”¨æ²»ç†ç­–ç•¥ï¼Œä¸ºä¸åŒçš„æœåŠ¡å’Œå·¥ä½œè´Ÿè½½æä¾›éš”ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;mTLS æ”¯æŒ&lt;/strong&gt;ï¼šè®¡åˆ’åœ¨å†…æ ¸ä¸­å®ç°åŒå‘ TLSï¼Œæä¾›é›¶ä¿¡ä»»å®‰å…¨ï¼Œè€Œæ— éœ€ç”¨æˆ·ç©ºé—´çš„åŠ å¯†å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€§èƒ½åˆ†æ&#34;&gt;æ€§èƒ½åˆ†æ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æµ‹è¯•è®¾ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºå‡†å·¥å…·&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;a href=&#34;https://github.com/fortio/fortio&#34; title=&#34;Fortio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fortio&lt;/a&gt; ç”Ÿæˆè´Ÿè½½å¹¶æµ‹é‡å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯”è¾ƒå¯¹è±¡&lt;/strong&gt;ï¼šåœ¨å››ç§é…ç½®ä¸‹æµ‹é‡æ€§èƒ½ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸºçº¿&lt;/strong&gt;ï¼šæ²¡æœ‰ä»»ä½•æœåŠ¡ç½‘æ ¼çš„ç›´æ¥é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio Sidecar&lt;/strong&gt;ï¼šä¼ ç»Ÿçš„ Sidecar éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio Ambient Mesh&lt;/strong&gt;ï¼šä½¿ç”¨ ztunnel å’Œ Waypoint çš„æ—  Sidecar éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kmesh&lt;/strong&gt;ï¼šåŒ…æ‹¬å†…æ ¸åŸç”Ÿæ¨¡å¼å’ŒåŒå¼•æ“æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kmesh å†…æ ¸åŸç”Ÿæ¨¡å¼&lt;/strong&gt;ï¼šç›¸æ¯” Istio Sidecarï¼Œè½¬å‘å»¶è¿Ÿé™ä½äº†è¶…è¿‡ &lt;strong&gt;60%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kmesh åŒå¼•æ“æ¨¡å¼&lt;/strong&gt;ï¼šç›¸æ¯” Istio Ambient Meshï¼Œå»¶è¿Ÿå‡å°‘äº† &lt;strong&gt;30%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPU å’Œå†…å­˜&lt;/strong&gt;ï¼šKmesh å°†èµ„æºå¼€é”€é™ä½äº†è¶…è¿‡ &lt;strong&gt;70%&lt;/strong&gt;ï¼Œå› ä¸ºæ— éœ€ Sidecar ä»£ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨å¯åŠ¨æ—¶é—´&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æé«˜äº† &lt;strong&gt;40%&lt;/strong&gt;ï¼Œå› ä¸ºåº”ç”¨ä¸å†éœ€è¦ç­‰å¾… Sidecar åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è§£è¯»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kmesh æ¥è¿‘åŸºçº¿æ€§èƒ½ï¼Œä½¿æœåŠ¡ç½‘æ ¼çš„å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆé™¤ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ•°æ®æ‹·è´å¯¹æ€§èƒ½æå‡è´¡çŒ®æ˜¾è‘—ã€‚&lt;/li&gt;
&lt;li&gt;å†…æ ¸åŸç”Ÿæ–¹æ³•ç¡®ä¿å³ä½¿æœåŠ¡æ•°é‡å¢åŠ ï¼Œæ€§èƒ½ä¹Ÿèƒ½ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äº‘åŸç”Ÿé›†æˆä¸å…¼å®¹æ€§&#34;&gt;äº‘åŸç”Ÿé›†æˆä¸å…¼å®¹æ€§&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes åŸç”Ÿ&lt;/strong&gt;ï¼šKmesh æ— ç¼è¿è¡Œåœ¨ Kubernetes ä¸Šï¼Œç®¡ç† Pod çš„è¿›å‡ºæµé‡ï¼Œæ— éœ€æ›´æ”¹åº”ç”¨ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶å¹³é¢é›†æˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;xDS åè®®æ”¯æŒ&lt;/strong&gt;ï¼šä» Istiod è®¢é˜… xDS é…ç½®ï¼Œç¡®ä¿ä¸ Istio æ§åˆ¶å¹³é¢å…¼å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio API å…¼å®¹æ€§&lt;/strong&gt;ï¼šæ”¯æŒç°æœ‰çš„ Istio APIï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨ç†Ÿæ‚‰çš„é…ç½®å’Œç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gateway API æ”¯æŒ&lt;/strong&gt;ï¼šå…¼å®¹ Gateway APIï¼Œæ”¯æŒæ›´çµæ´»å’Œä¸°å¯Œçš„æµé‡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è§‚æµ‹æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é›†æˆ Prometheus è¿›è¡ŒæŒ‡æ ‡æ”¶é›†ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ eBPF é«˜æ•ˆåœ°æ”¶é›†æ•°æ®ï¼Œä¸å½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ”¯æŒç°æœ‰çš„ Istio å®‰å…¨ç­–ç•¥ï¼ŒåŒ…æ‹¬è®¤è¯å’Œæˆæƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;Kmesh é€šè¿‡å°†æµé‡ç®¡ç†ç§»å…¥å†…æ ¸ï¼Œä»£è¡¨äº†æœåŠ¡ç½‘æ ¼æŠ€æœ¯çš„èŒƒå¼è½¬å˜ã€‚åˆ©ç”¨ eBPF å’Œå†…æ ¸å¢å¼ºï¼Œå®ƒè§£å†³äº†ä¼ ç»Ÿ Sidecar æ¶æ„ä¸­å»¶è¿Ÿå’Œèµ„æºå¼€é”€çš„å…³é”®é—®é¢˜ã€‚Kmesh ä¸ºç°ä»£äº‘åŸç”Ÿåº”ç”¨æä¾›äº†çµæ´»ã€é«˜æ€§èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦ä½å»¶è¿Ÿå’Œé«˜ååé‡çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ”¶è·&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šé€šè¿‡æ¶ˆé™¤ä¸å¿…è¦çš„å¼€é”€ï¼Œå®ç°æ¥è¿‘åŸºçº¿çš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ•ˆç‡&lt;/strong&gt;ï¼šé™ä½ CPU å’Œå†…å­˜æ¶ˆè€—ï¼Œæå‡éƒ¨ç½²å¯†åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;ï¼šæä¾›å¤šç§è¿è¡Œæ¨¡å¼ï¼Œé€‚åº”ä¸åŒçš„éƒ¨ç½²åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šé€šè¿‡å†…æ ¸çº§çš„æ‰§è¡Œå’Œéš”ç¦»æœºåˆ¶å¢å¼ºå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ï¼šä¸åŒ…æ‹¬ Kubernetes å’Œ Istio åœ¨å†…çš„ç°æœ‰äº‘åŸç”Ÿç”Ÿæ€ç³»ç»Ÿæ— ç¼é›†æˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zhaohuabing.com/post/2023-09-26-istiocon-china/&#34; title=&#34;IstioCon 2023 è¦ç‚¹æ€»ç»“&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IstioCon 2023 è¦ç‚¹æ€»ç»“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYWy/a-new-choice-for-istio-data-plane-architectural-innovation-for-a-brand-new-performance-experience-istioxiao-zha-sao-daepxia-mo-zha-zhonghu-xu-huawei?iframe=no&#34; title=&#34;Istio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ•°æ®å¹³é¢çš„æ–°é€‰æ‹©ï¼šå…¨æ–°æ€§èƒ½ä½“éªŒçš„æ¶æ„åˆ›æ–°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>æ·±å…¥è§£ææœåŠ¡ç½‘æ ¼çš„å››ç§æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼ï¼šæ€§èƒ½ã€å®‰å…¨æ€§ä¸æˆæœ¬åˆ†æ</title>
      <link>https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/</link>
      <pubDate>Tue, 10 Sep 2024 11:09:40 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/</guid>
      <description>
        
        
        &lt;p&gt;æœ¬æ–‡å°†å‘ä½ ä»‹ç» Istio æœåŠ¡ç½‘æ ¼çš„å››ç§å¹³é¢éƒ¨ç½²æ¨¡å¼ï¼Œé€šè¿‡åˆ†æå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œæ ¹æ®ä»–ä»¬çš„æ€§èƒ½ã€å¯é æ€§å’Œå®‰å…¨æ€§ç»™å‡ºé€‰æ‹©å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼&#34;&gt;ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼æ˜¯ä¸€ç§åŸºç¡€è®¾æ–½å±‚ï¼Œé€šå¸¸ä½¿ç”¨åº”ç”¨ä»£ç†æ¥å®ç°å„ç§åŠŸèƒ½ã€‚ä»¥ Istio ä¸ºä¾‹ï¼Œå®ƒé€šè¿‡åº”ç”¨ä»£ç†è®©ç”¨æˆ·èƒ½å¤Ÿå°†åº”ç”¨æ„ŸçŸ¥çš„æµé‡ç®¡ç†ã€å¼ºå¤§çš„å¯è§‚æµ‹æ€§å’Œç¨³å¥çš„å®‰å…¨èƒ½åŠ›ç¼–ç¨‹åˆ°ç½‘ç»œä¸­ã€‚Istio ç¡®ä¿äº‘åŸç”Ÿå’Œåˆ†å¸ƒå¼ç³»ç»Ÿå…·æœ‰å¼¹æ€§ï¼Œä½¿ç°ä»£ä¼ä¸šèƒ½å¤Ÿåœ¨ä¸åŒå¹³å°ä¸Šç»´æŠ¤å…¶å·¥ä½œè´Ÿè½½ï¼ŒåŒæ—¶ä¿æŒè¿æ¥å’Œå—ä¿æŠ¤ã€‚å®ƒçš„åŠŸèƒ½åŒ…æ‹¬é›¶ä¿¡ä»»å®‰å…¨ã€ç­–ç•¥ç®¡ç†å’Œè®¿é—®æ§åˆ¶ç­‰å®‰å…¨å’Œæ²»ç†æ§åˆ¶ï¼Œä»¥åŠé‡‘ä¸é›€éƒ¨ç½²ã€A/B æµ‹è¯•ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ç­‰ç½‘ç»œåŠŸèƒ½ï¼Œè¿˜èƒ½æä¾›å¯¹æ•´ä¸ªç½‘ç»œæµé‡çš„å¯è§‚æµ‹æ€§ã€‚Istio ä¸å—å•ä¸€é›†ç¾¤ã€ç½‘ç»œæˆ–è¿è¡Œæ—¶çš„é™åˆ¶ï¼Œå¯ä»¥å°†åœ¨ Kubernetes æˆ–è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„æœåŠ¡ã€å¤šäº‘ã€æ··åˆæˆ–æœ¬åœ°çš„æœåŠ¡åŒ…å«åœ¨å•ä¸ªç½‘æ ¼ä¸­ã€‚å…¶è®¾è®¡å¯æ‰©å±•ï¼Œå¹¶å¾—åˆ°å¹¿æ³›ç”Ÿæ€ç³»ç»Ÿçš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼çš„æ¶æ„åˆ†ä¸ºæ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢ï¼Œä»¥ Istio ä¸ºä¾‹ï¼Œ&lt;code&gt;istiod&lt;/code&gt; æ˜¯å®ƒçš„æ§åˆ¶å¹³é¢ï¼Œè€Œæ•°æ®å¹³é¢æœ‰ä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹© sidecar æˆ– ambient æ¨¡å¼ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/service-mesh.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/service-mesh.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio æœåŠ¡ç½‘æ ¼çš„æ¶æ„å›¾ï¼ˆæ¥æº &amp;lt;a href=&amp;#34;https://istio.io/latest/about/service-mesh/&amp;#34; title=&amp;#34;istio.io&amp;#34; target=&amp;#34;_blank&amp;#34; rel=&amp;#34;noopener&amp;#34;&amp;gt;istio.io&amp;lt;/a&amp;gt;ï¼‰&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio æœåŠ¡ç½‘æ ¼çš„æ¶æ„å›¾ï¼ˆæ¥æº &lt;a href=&#34;https://istio.io/latest/about/service-mesh/&#34; title=&#34;istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istio.io&lt;/a&gt;ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å®é™…ä¸ŠæœåŠ¡ç½‘æ ¼çš„æ•°æ®å¹³é¢çš„éƒ¨ç½²æ¨¡å¼ä¸æ­¢è¿™ä¸¤ç§ï¼ŒåŠ ä¸Š Istio æ”¯æŒçš„ &lt;a href=&#34;https://istio.io/latest/blog/2021/proxyless-grpc/&#34; title=&#34;gRPC æ—  sidecar çš„æœåŠ¡ç½‘æ ¼&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;gRPC æ—  sidecar çš„æœåŠ¡ç½‘æ ¼&lt;/a&gt;ï¼Œä»¥åŠ &lt;a href=&#34;https://cilium.io/use-cases/service-mesh/&#34; title=&#34;Cilium service mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium service mesh&lt;/a&gt;ï¼Œä¸€å…±æœ‰å››ç§éƒ¨ç½²æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼&#34;&gt;æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;ä¸‹è¡¨æ ¼ä»å¤šä¸ªç»´åº¦å¯¹æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢çš„éƒ¨ç½²æ¨¡å¼è¿›è¡Œäº†æ¯”è¾ƒã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;æ•°æ®å¹³é¢æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;å¹³å°å®‰å…¨æ€§&lt;/strong&gt; å¨èƒè¯„ä¼°ã€é£é™©&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;èµ„æºæ•ˆç‡&lt;/strong&gt; â€“ åŸºç¡€è®¾æ–½/èµ„æºæ¶ˆè€—ç­‰&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;å¯ç®¡ç†æ€§&lt;/strong&gt; â€“ å‡çº§ã€æ¼æ´ç­‰&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt; â€“ å»¶è¿Ÿç­‰&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;ï¼šæ¯ä¸ªæœåŠ¡å®ä¾‹çš„L4å’ŒL7ä»£ç†&lt;/td&gt;
          &lt;td&gt;é«˜å®‰å…¨æ€§ï¼Œå› ä¸ºæ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç†ï¼Œå‡å°‘äº†æ”»å‡»é¢ã€‚é£é™©ç®¡ç†å–å†³äºæ§åˆ¶å¹³é¢é…ç½®ã€‚&lt;/td&gt;
          &lt;td&gt;è¾ƒé«˜çš„èµ„æºæ¶ˆè€—ï¼Œå› ä¸ºæ¯ä¸ªå®ä¾‹éœ€è¦ç‹¬ç«‹çš„ä»£ç†ã€‚&lt;/td&gt;
          &lt;td&gt;éœ€è¦é›†ä¸­ç®¡ç†å’Œé…ç½®ï¼Œå‡çº§ç›¸å¯¹å¤æ‚ï¼Œä½†å¯ä»¥é€šè¿‡æ§åˆ¶å¹³é¢ç®€åŒ–ã€‚&lt;/td&gt;
          &lt;td&gt;è¯·æ±‚éœ€è¦é€šè¿‡ä»£ç†è½¬å‘ï¼Œå¯èƒ½å¢åŠ å»¶è¿Ÿã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ï¼šå…±äº«L4 â€“ L7æ¯ä¸ªæœåŠ¡æ¨¡å‹&lt;/td&gt;
          &lt;td&gt;é€šè¿‡ztunnelè¿›è¡Œæœ¬åœ°è·¯ç”±è®¾è®¡çš„å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œå…±äº«ä»£ç†å¯èƒ½ä¼šå¸¦æ¥é£é™©ï¼Œå…¶æ•´ä½“å®‰å…¨æˆç†Ÿåº¦ä»åœ¨å‘å±•ä¸­ã€‚&lt;/td&gt;
          &lt;td&gt;æ•ˆç‡è¾ƒé«˜ï¼Œå› ä¸ºå¤šä¸ªæœåŠ¡å…±äº«ç›¸åŒçš„ä»£ç†ã€‚&lt;/td&gt;
          &lt;td&gt;ç®¡ç†ç›¸å¯¹ç®€å•ï¼Œä½†å¯èƒ½å› å…±äº«ä»£ç†è€Œé¢ä¸´æ¼æ´ã€‚&lt;/td&gt;
          &lt;td&gt;æœ¬åœ°è·¯ç”±æ€§èƒ½è‰¯å¥½ï¼Œä½†åœ¨waypointä»£ç†ä¸‹å¯èƒ½ä¼šäº§ç”Ÿè·¨AZçš„æˆæœ¬ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Cilium Meshæ¨¡å¼&lt;/strong&gt;ï¼šå…±äº«L4å’ŒL7æ¨¡å‹&lt;/td&gt;
          &lt;td&gt;ä¸­ç­‰å®‰å…¨æ€§ï¼Œä¸“æ³¨äºeBPFå’Œç»†ç²’åº¦è®¿é—®æ§åˆ¶ã€‚ç„¶è€Œï¼Œèº«ä»½å’Œä¿¡ä»»æ¨¡å‹æ–¹é¢å­˜åœ¨å·²çŸ¥é—®é¢˜ã€‚&lt;/td&gt;
          &lt;td&gt;å†…æ ¸çº§å¤„ç†æé«˜æ•ˆç‡ï¼Œå‡å°‘åŸºç¡€è®¾æ–½å¼€é”€ã€‚&lt;/td&gt;
          &lt;td&gt;ç®¡ç†æ›´å¤æ‚ï¼Œéœ€è¦å¤„ç†å¤šä¸ªæœåŠ¡çš„é…ç½®ã€‚&lt;/td&gt;
          &lt;td&gt;æ€§èƒ½å¯å˜ï¼›æŸäº›åœºæ™¯å¯èƒ½ä¼šå¼•å…¥æ˜¾è‘—çš„å»¶è¿Ÿã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;ï¼šL4å’ŒL7é›†æˆåœ¨åº”ç”¨æ¨¡å‹ä¸­&lt;/td&gt;
          &lt;td&gt;è™½ç„¶gRPCå°†ä»£ç†åŠŸèƒ½é›†æˆåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç†è®ºä¸Šå‡å°‘äº†æ”»å‡»é¢ï¼Œä½†åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å’Œå¤šæ ·æ€§å®é™…ä¸Šå¯èƒ½æ‰©å¤§å®ƒã€‚gRPCæ¨¡å¼çš„å®‰å…¨æ€§ä¾èµ–äºå…·ä½“çš„ç”¨ä¾‹ï¼Œéœ€è¦å¯¹æ½œåœ¨å¨èƒå’Œæ”»å‡»é¢è¿›è¡Œä»”ç»†è¯„ä¼°ã€‚&lt;/td&gt;
          &lt;td&gt;æ›´é«˜çš„æ•ˆç‡ï¼Œå› ä¸ºä»£ç†åœ¨ä¸åº”ç”¨ç›¸åŒçš„è¿›ç¨‹ä¸­å®ç°ã€‚&lt;/td&gt;
          &lt;td&gt;ç®¡ç†å¤æ‚ï¼Œéœ€è¦å®šæœŸæ›´æ–°å’Œç»´æŠ¤åº”ç”¨å±‚ä»£ç†ã€‚&lt;/td&gt;
          &lt;td&gt;æ€§èƒ½ä¼˜è¶Šï¼Œå»¶è¿Ÿä½ï¼Œé€‚åˆå®æ—¶åº”ç”¨ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;figcaption class=&#34;text-center&#34;&gt;
    
    æœåŠ¡ç½‘æ ¼çš„å››ç§éƒ¨ç½²æ¨¡å¼å¯¹æ¯”
    
&lt;/figcaption&gt;

&lt;p&gt;ä½ å¯ä»¥ä»ä¸‹å›¾ä¸­æ›´ç›´è§‚åœ°çœ‹åˆ°è¿™å››ç§æ¨¡å¼åœ¨æˆæœ¬å’Œå®‰å…¨æ€§æ–¹é¢çš„æ¯”è¾ƒï¼š&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/istio-data-plane-deployment-modes.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/istio-data-plane-deployment-modes.svg&#34; alt=&#34;image&#34; data-caption=&#34;æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ¨¡å¼å¯¹æ¯”&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ¨¡å¼å¯¹æ¯”&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹å›¾è¯´æ˜äº†æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢çš„ä¸åŒéƒ¨ç½²æ¨¡å¼ä¸­ä»£ç†çš„æ½œåœ¨ä½ç½®ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/overview.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/overview.svg&#34; alt=&#34;image&#34; data-caption=&#34;æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢çš„ä¸åŒéƒ¨ç½²æ¨¡å¼ä¸­çš„ä»£ç†ä½ç½®&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢çš„ä¸åŒéƒ¨ç½²æ¨¡å¼ä¸­çš„ä»£ç†ä½ç½®&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Sidecar æ¨¡å¼&lt;/strong&gt;ï¼šä»£ç†ä¸åº”ç”¨ç¨‹åºå®¹å™¨ä½äºåŒä¸€ä¸ª Pod ä¸­&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ambient æ¨¡å¼&lt;/strong&gt;ï¼šL4 ä»£ç†ä¸åº”ç”¨ç¨‹åºå®¹å™¨ä½äºåŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒL7 ä»£ç†ä¸ä¸€å®šè·Ÿåº”ç”¨ç¨‹åºå®¹å™¨åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium æ¨¡å¼&lt;/strong&gt;ï¼šL4 å’Œ L7 ä»£ç†ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸åº”ç”¨ç¨‹åºå®¹å™¨åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gRPC æ¨¡å¼&lt;/strong&gt;ï¼šgRPC æ¡†æ¶é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œå…±åŒéƒ¨ç½²åœ¨ä¸€ä¸ªå®¹å™¨ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;sidecar-æ¨¡å¼æ¯ä¸ªæœåŠ¡å®ä¾‹ä¸€ä¸ª-l4-å’Œ-l7-çš„ä»£ç†&#34;&gt;Sidecar æ¨¡å¼ï¼šæ¯ä¸ªæœåŠ¡å®ä¾‹ä¸€ä¸ª L4 å’Œ L7 çš„ä»£ç†&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢å±•ç¤ºçš„æ˜¯ sidecar æ¨¡å¼ä¸­ Application 1 è®¿é—®åŒèŠ‚ç‚¹ä¸Šçš„ Application 2 åŠè·¨èŠ‚ç‚¹ä¸Šçš„ Application 3 çš„é€šä¿¡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/sidecar-mode.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/sidecar-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;Sidecar æ¨¡å¼ï¼šæ¯ä¸ªæœåŠ¡å®ä¾‹ä¸€ä¸ª L4 å’Œ L7 ä»£ç†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Sidecar æ¨¡å¼ï¼šæ¯ä¸ªæœåŠ¡å®ä¾‹ä¸€ä¸ª L4 å’Œ L7 ä»£ç†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ¨¡å¼ï¼Œä¹Ÿæ˜¯ &lt;a href=&#34;https://istio.io&#34; title=&#34;Istio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; æœåŠ¡ç½‘æ ¼èµ·åˆæ”¯æŒçš„æ¨¡å¼ã€‚æ¯ä¸ªæœåŠ¡å®ä¾‹æ—è¾¹éƒ¨ç½²ä¸€ä¸ªä»£ç†ï¼ˆå¦‚ &lt;a href=&#34;https://envoyproxy.io&#34; title=&#34;Envoy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt;ï¼‰ï¼Œè¯¥ä»£ç†å¤„ç†è¿›å‡ºè¯¥æœåŠ¡çš„æ‰€æœ‰ç½‘ç»œé€šä¿¡ï¼ŒåŒ…æ‹¬ L4 å’Œ L7 ç½‘ç»œé€šä¿¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®‰å…¨æ€§é«˜ï¼Œå› ä¸ºæ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½æ˜¯éš”ç¦»çš„ï¼Œå‡å°‘äº†æ½œåœ¨çš„æ”»å‡»é¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šèµ„æºæ¶ˆè€—è¾ƒé«˜ï¼Œå› ä¸ºæ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½éœ€è¦å•ç‹¬çš„ä»£ç†ï¼Œå¢åŠ äº†åŸºç¡€è®¾æ–½æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆç†Ÿåº¦&lt;/strong&gt;ï¼šIstio Sidecar æ¨¡å¼çš„æˆç†Ÿåº¦å·²ç»è¾¾åˆ°ç”Ÿäº§çº§åˆ«ï¼Œå®ƒä»¬ç»è¿‡å¹¿æ³›æµ‹è¯•å¹¶å‡†å¤‡å¥½åœ¨å®é™…ç¯å¢ƒä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ambient-æ¨¡å¼èŠ‚ç‚¹å…±äº«-l4-ä»£ç†æœåŠ¡è´¦æˆ·å…±äº«-l7-ä»£ç†&#34;&gt;Ambient æ¨¡å¼ï¼šèŠ‚ç‚¹å…±äº« L4 ä»£ç†ï¼ŒæœåŠ¡è´¦æˆ·å…±äº« L7 ä»£ç†&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢å±•ç¤ºçš„æ˜¯ ambient æ¨¡å¼ä¸­ Application 1 è®¿é—®åŒèŠ‚ç‚¹ä¸Šçš„ Application 2 åŠè·¨èŠ‚ç‚¹ä¸Šçš„ Application 3 çš„é€šä¿¡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/ambient-mode.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/ambient-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;Ambient æ¨¡å¼ï¼šèŠ‚ç‚¹å…±äº« L4 ä»£ç†ï¼ŒæœåŠ¡è´¦æˆ·å…±äº« L7 ä»£ç†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Ambient æ¨¡å¼ï¼šèŠ‚ç‚¹å…±äº« L4 ä»£ç†ï¼ŒæœåŠ¡è´¦æˆ·å…±äº« L7 ä»£ç†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å…±äº«L4ä»£ç†ä¸ºåŒä¸€ç‰©ç†ä¸»æœºä¸Šçš„æ‰€æœ‰æœåŠ¡å®ä¾‹æä¾›æœåŠ¡ï¼Œè€Œæ¯ä¸ªæœåŠ¡è´¦æˆ·éƒ½æœ‰ä¸€ä¸ªä¸“ç”¨çš„L7ä»£ç†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæˆæœ¬è¾ƒä½ï¼Œå› ä¸ºå¤šä¸ªæœåŠ¡å…±äº«åŒä¸€ä¸ªä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå°½ç®¡ztunnelï¼ˆIstioç½‘æ ¼ä¸­ï¼‰ç»„ä»¶æ˜¯ä¸ºå®‰å…¨æ€§è®¾è®¡çš„ï¼Œå…±äº«ä»£ç†å¯èƒ½ä¼šå¸¦æ¥é£é™©ã€‚æ­¤æ¨¡å‹çš„å®‰å…¨æˆç†Ÿåº¦ä»åœ¨å‘å±•ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆç†Ÿåº¦&lt;/strong&gt;ï¼šIstioçš„Ambientæ¨¡å¼ç›®å‰å¤„äºbetaé˜¶æ®µï¼Œæ²¡æœ‰å¤§è§„æ¨¡çš„ç”Ÿäº§çº§æœ€ä½³å®è·µï¼Œä¹Ÿä¸æ”¯æŒå¤šé›†ç¾¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cilium-mesh-æ¨¡å¼å…±äº«çš„-l4-å’Œ-l7-ä»£ç†&#34;&gt;Cilium mesh æ¨¡å¼ï¼šå…±äº«çš„ L4 å’Œ L7 ä»£ç†&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢å±•ç¤ºçš„æ˜¯ Cilium mesh æ¨¡å¼ä¸­ Application 1 è®¿é—®åŒèŠ‚ç‚¹ä¸Šçš„ Application 2 åŠè·¨èŠ‚ç‚¹ä¸Šçš„ Application 3 çš„é€šä¿¡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/cilium-mesh-mode.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/cilium-mesh-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;Cilium mesh æ¨¡å¼ï¼šå…±äº«çš„ L4 å’Œ L7 ä»£ç†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Cilium mesh æ¨¡å¼ï¼šå…±äº«çš„ L4 å’Œ L7 ä»£ç†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™ç§æ¨¡å¼ä»‹äºå®Œå…¨ç‹¬ç«‹å’Œå®Œå…¨å…±äº«ä¹‹é—´ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå…±äº«çš„L7ä»£ç†ã€‚ç„¶è€Œï¼Œèº«ä»½å’Œä¿¡ä»»æ¨¡å‹æ–¹é¢å­˜åœ¨å·²çŸ¥é—®é¢˜ã€‚ä½¿ç”¨eBPFçš„CiliumæœåŠ¡ç½‘æ ¼å…è®¸é€šè¿‡å†…æ ¸ç¨‹åºå®ç°æ— éœ€ä»£ç†çš„ç½‘ç»œç­–ç•¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå†…æ ¸çº§æ•ˆç‡å¯ä»¥é™ä½åŸºç¡€è®¾æ–½æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šç®¡ç†æ›´å¤æ‚ï¼ŒæŸäº›åœºæ™¯å¯èƒ½ä¼šå¯¼è‡´å»¶è¿Ÿå¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆç†Ÿåº¦&lt;/strong&gt;ï¼šCilium Meshé€šè¿‡eBPFç›´æ¥ç®¡ç†L4æµé‡ï¼Œå¹¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé…ç½®Envoyä»£ç†ä»¥é€šè¿‡CRDï¼ˆå¦‚CiliumEnvoyConfigï¼‰æ§åˆ¶L7æµé‡ã€‚ç„¶è€Œï¼Œç”±äºèº«ä»½æ¨¡å‹ä¸ä¸€è‡´ï¼Œå…¶å®‰å…¨æ€§ä»¤äººæ‹…å¿§ã€‚è¯¥&lt;a href=&#34;https://github.com/cilium/proxy&#34; title=&#34;ä»£ç†&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä»£ç†&lt;/a&gt;æ˜¯ç»è¿‡å®šåˆ¶è¿‡çš„ï¼Œå®ƒå…·æœ‰æœ€å°‘çš„ Envoy æ‰©å±•å’Œ Cilium ç­–ç•¥æ‰§è¡Œè¿‡æ»¤å™¨ã€‚å› æ­¤ï¼Œè¯¥ Cilium mesh å¯èƒ½æ— æ³•æ”¯æŒ Envoy ä»£ç†çš„å…¨éƒ¨åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šè¯¥æ¨¡å¼å¹¶é Istio çš„æ•°æ®å¹³é¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;grpc-æ¨¡å¼l4-å’Œ-l7-ä»£ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºå†…&#34;&gt;gRPC æ¨¡å¼ï¼šL4 å’Œ L7 ä»£ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºå†…&lt;/h2&gt;
&lt;p&gt;åœ¨gRPCæ¨¡å¼ä¸­ï¼Œæ²¡æœ‰éƒ¨ç½²å¤–éƒ¨ä»£ç†ï¼›è€Œæ˜¯é€šè¿‡RPCæ¡†æ¶å°†ä»£ç†åŠŸèƒ½ç›´æ¥é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œå¯¼è‡´å¯¹åº”ç”¨ç¨‹åºçš„æ˜¾è‘—ä¾µå…¥ã€‚æœåŠ¡ç½‘æ ¼æ§åˆ¶å¹³é¢ä½¿ç”¨ä¸€ç»„ç§°ä¸ºxDS APIçš„å‘ç°APIæ¥åŠ¨æ€é…ç½®åº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºä¸­çš„gRPCå®¢æˆ·ç«¯åº“æä¾›å¯¹xDS APIçš„å¹¿æ³›æ”¯æŒã€‚åˆ©ç”¨è¿™ç§èƒ½åŠ›ï¼ŒæœåŠ¡ç½‘æ ¼æ§åˆ¶å¹³é¢å¯ä»¥åœ¨æœåŠ¡å®¹å™¨å†…çš„è¿™ä¸ªåº“ä¸­ç›´æ¥ç¼–ç¨‹L4å’ŒL7ä»£ç†åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†åœ¨ Istio çš„ gRPC æ¨¡å¼ä¸­ï¼Œæ§åˆ¶å¹³é¢å¦‚ä½•ä¸åº”ç”¨ç¨‹åºé€šä¿¡ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/service-mesh-data-plane-deployment-modes/grpc-mode.svg&#34; data-img=&#34;/blog/service-mesh-data-plane-deployment-modes/grpc-mode.svg&#34; alt=&#34;image&#34; data-caption=&#34;gRPC æ¨¡å¼ï¼šL4 å’Œ L7 ä»£ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºå†…&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;gRPC æ¨¡å¼ï¼šL4 å’Œ L7 ä»£ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºå†…&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå½“gRPCæœåŠ¡ä¸æ§åˆ¶å¹³é¢é€šä¿¡æ—¶ï¼Œä¸éœ€è¦ä¼ ç»Ÿçš„Sidecarä»£ç†ï¼Œè€Œæ˜¯ä½¿ç”¨ç‰¹å®šçš„ä»£ç†è¿›è¡Œåˆå§‹åŒ–å’Œä¸æ§åˆ¶å¹³é¢çš„é€šä¿¡ã€‚æ­¤è®¾è®¡å‡å°‘äº†èµ„æºæ¶ˆè€—å’Œéƒ¨ç½²å¤æ‚æ€§ï¼ŒåŒæ—¶ä»èƒ½å®ç°æœåŠ¡å‘ç°ã€æµé‡ç®¡ç†ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé«˜æ€§èƒ½ï¼Œç”±äºä»£ç†ä¸åº”ç”¨ç¨‹åºç´§å¯†é›†æˆï¼Œå‡å°‘äº†ç½‘ç»œè·³è·ƒå’Œé¢å¤–çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šé«˜å¤æ‚æ€§ï¼Œéœ€è¦åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å®ç°å¤æ‚çš„ç½‘ç»œå¤„ç†åŠŸèƒ½ï¼Œè¿™å¯èƒ½å¢åŠ å¼€å‘æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§è€ƒè™‘&lt;/strong&gt;ï¼šè¿™ç§æ¨¡å¼çš„å®‰å…¨æ€§å­˜åœ¨äº‰è®®ã€‚è™½ç„¶å°†ä»£ç†åŠŸèƒ½é›†æˆåœ¨åº”ç”¨ç¨‹åºä¸­ç†è®ºä¸Šå‡å°‘äº†å¤–éƒ¨æ”»å‡»é¢ï¼Œä½†åº”ç”¨ç¨‹åºçš„å¤šæ ·æ€§å’Œå¤æ‚æ€§å¯èƒ½ä¼šæ‰©å¤§æ•´ä½“æ”»å‡»é¢ã€‚å› æ­¤ï¼Œåœ¨è€ƒè™‘gRPCæ¨¡å¼çš„å®‰å…¨æ€§æ—¶ï¼Œå¿…é¡»ä»”ç»†åˆ†æå…¶å…·ä½“ç”¨ä¾‹ä¸­çš„å®‰å…¨å¨èƒæ¨¡å‹å’Œæ”»å‡»é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆç†Ÿåº¦&lt;/strong&gt;ï¼šIstioçš„gRPCæ¨¡å¼ä»å¤„äºå®éªŒé˜¶æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¦‚ä½•é€‰æ‹©&#34;&gt;å¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼Œé€‰æ‹©æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼çš„å†³å®šå› ç´ æœ‰å¤šä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆç†Ÿåº¦&lt;/li&gt;
&lt;li&gt;ä¼ä¸šçš„å®‰å…¨éœ€æ±‚&lt;/li&gt;
&lt;li&gt;èµ„æºé™åˆ¶&lt;/li&gt;
&lt;li&gt;æ€§èƒ½è¦æ±‚&lt;/li&gt;
&lt;li&gt;ç½‘ç»œå¼€é”€&lt;/li&gt;
&lt;li&gt;ç®¡ç†å¤æ‚æ€§çš„å®¹å¿åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æˆç†Ÿåº¦&#34;&gt;æˆç†Ÿåº¦&lt;/h3&gt;
&lt;p&gt;åœ¨è€ƒè™‘æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼æ—¶ï¼Œæˆç†Ÿåº¦æ˜¯ä¸€ä¸ªå…³é”®å› ç´ ã€‚æ¯ç§æ¨¡å¼çš„æˆç†Ÿåº¦éƒ½ä¼šå½±å“å…¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„å¯é æ€§å’Œæ”¯æŒç¨‹åº¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æˆç†Ÿçš„æœåŠ¡ç½‘æ ¼éƒ¨ç½²æ¨¡å¼ï¼Œå¹¿æ³›åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå¹¶å¾—åˆ°è‰¯å¥½æ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ï¼šå°½ç®¡è¯¥æ¨¡å¼æä¾›äº†ä¸€äº›æˆæœ¬å’Œæ€§èƒ½ä¼˜åŠ¿ï¼Œä½†å®ƒä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œå¯èƒ½ç¼ºä¹æˆç†Ÿçš„æœ€ä½³å®è·µå’Œå¹¿æ³›çš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium Meshæ¨¡å¼&lt;/strong&gt;ï¼šä½œä¸ºä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„é€‰æ‹©ï¼Œå®ƒåœ¨ä½¿ç”¨eBPFçš„åœºæ™¯ä¸­æä¾›äº†ç‹¬ç‰¹çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚ç„¶è€Œï¼Œå…¶å®‰å…¨æ¨¡å‹å’Œèº«ä»½ç®¡ç†çš„æ‹…å¿§è¡¨æ˜ï¼Œå®ƒå¯èƒ½ä¸åƒå…¶ä»–æ¨¡å¼é‚£æ ·æˆç†Ÿæˆ–å¯é ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;ï¼šå°½ç®¡æ€§èƒ½å‡ºè‰²ï¼Œä½†è¿™ç§æ¨¡å¼çš„å¤æ‚æ€§å’Œä¾µå…¥æ€§æ„å‘³ç€å®ƒå¯èƒ½éœ€è¦æ›´å¤šçš„å®šåˆ¶å¼€å‘ï¼Œç›®å‰ä»å¤„äºå®éªŒé˜¶æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®‰å…¨éœ€æ±‚&#34;&gt;å®‰å…¨éœ€æ±‚&lt;/h3&gt;
&lt;p&gt;å¦‚æœæ‚¨çš„ä¸šåŠ¡æœ‰è¾ƒé«˜çš„å®‰å…¨éœ€æ±‚ï¼Œå¦‚é‡‘èæˆ–åŒ»ç–—è¡Œä¸šï¼Œé‚£ä¹ˆ&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;å¯èƒ½æ˜¯æœ€ä½³é€‰æ‹©ã€‚è¿™ç§æ¨¡å¼é€šè¿‡ç¡®ä¿æ¯ä¸ªæœåŠ¡å®ä¾‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä»£ç†ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å®ç°æœåŠ¡éš”ç¦»ã€‚å¯¹äºé‚£äº›æ¢ç´¢è¾ƒæ–°æ¨¡å¼ï¼ˆå¦‚&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ï¼‰çš„ç”¨æˆ·æ¥è¯´ï¼Œå¿…é¡»äº†è§£è™½ç„¶ztunnelæ—¨åœ¨å®ç°å®‰å…¨çš„æœ¬åœ°è·¯ç”±ï¼Œä½†è¯¥æ¨¡å¼çš„æ•´ä½“å®‰å…¨ç­–ç•¥ä»åœ¨å‘å±•ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;èµ„æºé™åˆ¶&#34;&gt;èµ„æºé™åˆ¶&lt;/h3&gt;
&lt;p&gt;åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­ï¼Œä¸ºæ¯ä¸ªæœåŠ¡å®ä¾‹éƒ¨ç½²ä¸€ä¸ªå•ç‹¬çš„ä»£ç†å¯èƒ½ä¸åˆ‡å®é™…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;æˆ–&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ã€‚&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;ç‰¹åˆ«é€‚åˆå·²ç»å¹¿æ³›ä½¿ç”¨gRPCä¸”æ„¿æ„åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å¤„ç†å¤æ‚ç½‘ç»œåŠŸèƒ½çš„ç»„ç»‡ã€‚å¦ä¸€æ–¹é¢ï¼Œ&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;é€šè¿‡å…±äº«ä»£ç†æ¥å‡å°‘èµ„æºæ¶ˆè€—ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ€§èƒ½è¦æ±‚&#34;&gt;æ€§èƒ½è¦æ±‚&lt;/h3&gt;
&lt;p&gt;å¯¹äºéœ€è¦é«˜æ€§èƒ½å’Œä½å»¶è¿Ÿçš„åº”ç”¨ç¨‹åºï¼Œ&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;æä¾›äº†æœ€ä½³æ€§èƒ½ï¼Œå› ä¸ºå®ƒæ¶ˆé™¤äº†ä¼ ç»Ÿä»£ç†å¼•å…¥çš„é¢å¤–ç½‘ç»œè·³è·ƒã€‚ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒgRPCæ¨¡å¼ä»å¤„äºå®éªŒé˜¶æ®µï¼Œå¯èƒ½ä¸æ”¯æŒIstioçš„æ‰€æœ‰åŠŸèƒ½ã€‚è¯·æ ¹æ®æ‚¨çš„æœåŠ¡ç½‘æ ¼åŠŸèƒ½éœ€æ±‚è¿›è¡Œè€ƒè™‘ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç½‘ç»œå¼€é”€&#34;&gt;ç½‘ç»œå¼€é”€&lt;/h3&gt;
&lt;p&gt;æ¯ç§æ•°æ®å¹³é¢æ¨¡å¼å¯¹ç½‘ç»œå¼€é”€éƒ½æœ‰ä¸åŒçš„å½±å“ã€‚&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;é€šè¿‡æœ¬åœ°åŒ–è·¯ç”±å‡å°‘äº†è·¨åŒºåŸŸæµé‡ï¼Œä½†å¢åŠ äº†ç½‘ç»œè·³è·ƒï¼Œå¢åŠ äº†å»¶è¿Ÿå’Œè®¡ç®—ä½¿ç”¨ã€‚&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ä½¿ç”¨ztunnelè¿›è¡Œæœ¬åœ°è·¯ç”±ï¼Œä½†åœ¨waypointä»£ç†ä¸‹å¯èƒ½ä¼šäº§ç”Ÿè·¨AZçš„æˆæœ¬ã€‚&lt;strong&gt;Ciliumæ¨¡å¼&lt;/strong&gt;å°†ä»£ç†æ”¾ç½®åœ¨ä¸åº”ç”¨ç¨‹åºç›¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå¯èƒ½å‡å°‘èŠ‚ç‚¹é—´çš„æµé‡ï¼Œä½†å¯èƒ½å¼•å…¥æ›´å¤šçš„å»¶è¿Ÿã€‚&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;å°†RPCæ¡†æ¶é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œæœ€å°åŒ–ç½‘ç»œè·³è·ƒå’Œå¼€é”€ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯¹ç®¡ç†å¤æ‚æ€§çš„å®¹å¿åº¦&#34;&gt;å¯¹ç®¡ç†å¤æ‚æ€§çš„å®¹å¿åº¦&lt;/h3&gt;
&lt;p&gt;é€‰æ‹©æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢æ¨¡å¼æ—¶ï¼Œç®¡ç†å¤æ‚æ€§ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„è€ƒè™‘å› ç´ ã€‚&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;å’Œ&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;å¯èƒ½éœ€è¦æ›´å¤æ‚çš„é…ç½®å’Œç»´æŠ¤ï¼Œè€Œåœ¨æŸäº›éƒ¨ç½²ç¯å¢ƒä¸­ï¼Œ&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;å¯èƒ½æä¾›æ›´ç®€åŒ–çš„ç®¡ç†ä½“éªŒã€‚&lt;strong&gt;Ciliumæ¨¡å¼&lt;/strong&gt;ç”±äºä¾èµ–äºeBPFå’Œå¤šä¸ªé…ç½®ç‚¹ï¼Œå¯èƒ½éœ€è¦æ›´å¤æ‚çš„ç®¡ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;é€‰æ‹©æ­£ç¡®çš„æœåŠ¡ç½‘æ ¼æ•°æ®å¹³é¢éƒ¨ç½²æ¨¡å¼å–å†³äºå¤šä¸ªç‰¹å®šå› ç´ ï¼ŒåŒ…æ‹¬æˆç†Ÿåº¦ã€å®‰å…¨æ€§ã€èµ„æºé™åˆ¶ã€æ€§èƒ½å’Œç®¡ç†å¤æ‚æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¿«é€ŸæŒ‡å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Sidecaræ¨¡å¼&lt;/strong&gt;ï¼šæœ€é€‚åˆé«˜å®‰å…¨éœ€æ±‚ï¼Œæä¾›æœ€å¤§çš„éš”ç¦»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gRPCæ¨¡å¼&lt;/strong&gt;ï¼šé€‚ç”¨äºé«˜æ€§èƒ½éœ€æ±‚ä¸”å·²åœ¨ä½¿ç”¨gRPCçš„ç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ambientæ¨¡å¼&lt;/strong&gt;ï¼šé€‚åˆæˆæœ¬æ•ˆç›Šå’Œè¾ƒä½éš”ç¦»éœ€æ±‚ï¼Œä½†å®‰å…¨æ¨¡å‹æ­£åœ¨æ¼”å˜ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium Meshæ¨¡å¼&lt;/strong&gt;ï¼šå¯èƒ½é€‚ç”¨äºåˆ©ç”¨eBPFæŠ€æœ¯çš„åŸºç¡€è®¾æ–½ï¼Œä½†éœ€è€ƒè™‘å®‰å…¨æ€§å’Œç®¡ç†å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ä½³é€‰æ‹©å°†ä¸æ‚¨çš„åº”ç”¨ç¨‹åºéœ€æ±‚ã€å®‰å…¨ç­–ç•¥å’ŒæŠ€æœ¯ç†Ÿæ‚‰åº¦ç›¸ä¸€è‡´ã€‚ç†è§£æ¯ç§æ¨¡å¼çš„ä¼˜åŠ¿å’Œå±€é™æ€§ï¼Œä»¥åšå‡ºå¹³è¡¡æ”¶ç›Šã€é£é™©å’Œæˆæœ¬çš„æ˜æ™ºå†³ç­–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://csrc.nist.gov/pubs/sp/800/233/ipd&#34; title=&#34;äº‘åŸç”Ÿåº”ç”¨çš„æœåŠ¡ç½‘æ ¼ä»£ç†æ¨¡å‹&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿåº”ç”¨çš„æœåŠ¡ç½‘æ ¼ä»£ç†æ¨¡å‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>æœåŠ¡ç½‘æ ¼æ¶æ„ï¼šSidecar vs. Sidecarlessï¼Œè°æ‰æ˜¯æœªæ¥ï¼Ÿ</title>
      <link>https://jimmysong.io/blog/service-mesh-sidecar-vs-sidecarless-debate/</link>
      <pubDate>Mon, 09 Sep 2024 11:45:58 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/service-mesh-sidecar-vs-sidecarless-debate/</guid>
      <description>
        
        
        &lt;p&gt;æœåŠ¡ç½‘æ ¼å·²ç»æˆä¸ºç°ä»£äº‘åŸç”Ÿåº”ç”¨æ¶æ„ä¸­è‡³å…³é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œå¸®åŠ©å›¢é˜Ÿåœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç®¡ç†å¾®æœåŠ¡é€šä¿¡ã€æé«˜å®‰å…¨æ€§å¹¶ä¼˜åŒ–æ€§èƒ½ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼Œå…³äºæœåŠ¡ç½‘æ ¼æ¶æ„çš„æœ€ä½³å®è·µå‡ºç°äº†æ¿€çƒˆçš„äº‰è®ºï¼Œå°¤å…¶æ˜¯å…³äº sidecar ä¸ sidecarless æ¨¡å¼çš„é€‰æ‹©é—®é¢˜ã€‚è¿™åœºäº‰è®ºçš„æ ¸å¿ƒåœ¨äºå¦‚ä½•åœ¨æ€§èƒ½ã€èµ„æºåˆ©ç”¨ã€å®‰å…¨æ€§å’Œæ“ä½œå¤æ‚æ€§ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚è¿‘å¹´æ¥ï¼ŒCilium å¼•å…¥äº†æ—  sidecar æ¶æ„çš„ eBPF æŠ€æœ¯ï¼Œè€Œ Istio ä¹Ÿæ¨å‡ºäº† Ambient æ¨¡å¼ï¼Œç»“åˆäº†ä¼ ç»Ÿ sidecar ä¸æ—  sidecar çš„ä¼˜ç‚¹ã€‚ä¸æ­¤åŒæ—¶ï¼ŒLinkerd åˆ™åšå®ˆ sidecar æ¶æ„ï¼Œå¹¶å¯¹æ–°å…´çš„æ—  sidecar æ–¹æ³•æŒä¿å®ˆæ€åº¦ã€‚è¿™ç¯‡æ–‡ç« å°†æ·±å…¥æ¢è®¨è¿™äº›æœåŠ¡ç½‘æ ¼æ¶æ„çš„ä¸»è¦è§‚ç‚¹å’Œäº‰è®®ï¼Œå¹¶åˆ†ææ¯ç§æ–¹æ³•çš„ä¼˜åŠ¿ä¸æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºæœåŠ¡ç½‘æ ¼æœ‰æ— -sidecar-çš„äº‰è®º&#34;&gt;å…³äºæœåŠ¡ç½‘æ ¼æœ‰æ—  sidecar çš„äº‰è®º&lt;/h2&gt;
&lt;p&gt;å…³äºæœåŠ¡ç½‘æ ¼çš„ sidecar ä¸æ—  sidecar çš„äº‰è®ºæ˜¯éšç€ Cilium çš„æ¨å‡ºå’Œå„å¤§æœåŠ¡ç½‘æ ¼æŠ€æœ¯çš„æ¼”å˜è€Œé€æ¸åŠ å‰§çš„ï¼Œå°¤å…¶æ˜¯åœ¨ 2021 å¹´ä¹‹åï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Cilium Service Mesh çš„æ¨å‡ºï¼ˆ2021 å¹´ 12 æœˆï¼‰&lt;/strong&gt;  ï¼šCilium é€šè¿‡ eBPF æŠ€æœ¯å¼•å…¥äº†æ—  sidecar çš„æœåŠ¡ç½‘æ ¼æ¶æ„ï¼Œå¼€å§‹å¼•å‘å¯¹ä¼ ç»Ÿ sidecar æ¨¡å¼çš„è®¨è®ºã€‚è¿™ä¸€æ¦‚å¿µçš„æå‡ºæ ‡å¿—ç€æ—  sidecar æ¶æ„çš„å…´èµ·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Linkerd ä¸ Istio çš„ååº”ï¼ˆ2021 å¹´ 12 æœˆè‡³ 2022 å¹´åˆï¼‰&lt;/strong&gt; ï¼šLinkerd çš„åˆ›å§‹äºº William Morgan åŠå…¶å›¢é˜Ÿå¯¹ Cilium çš„æ—  sidecar æ–¹æ³•è¡¨ç¤ºæ‹…å¿§ï¼Œè®¤ä¸ºè¿™ç§æ–¹æ³•å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨å’Œæ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚è¿™ä¸€è®¨è®ºé€æ¸æ¼”å˜ä¸ºå¯¹ sidecar ä¸æ—  sidecar æ¶æ„çš„æ›´å¹¿æ³›äº‰è¾©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Istio çš„ Ambient æ¦‚å¿µï¼ˆ2022 å¹´ 5 æœˆï¼‰&lt;/strong&gt; ï¼šIstio æå‡ºäº† Ambient Meshï¼Œå°è¯•ç»“åˆ sidecar å’Œä¸»æœºçº§ä»£ç†çš„ä¼˜åŠ¿ï¼Œè¿™è¿›ä¸€æ­¥åŠ å‰§äº†å„æ–¹å¯¹æœåŠ¡ç½‘æ ¼æ¶æ„çš„è®¨è®ºã€‚æ­¤æ—¶ï¼Œä¸šç•Œå¯¹ä¸åŒæœåŠ¡ç½‘æ ¼æ¶æ„çš„çœ‹æ³•å¼€å§‹åˆ†åŒ–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸“å®¶è§‚ç‚¹çš„å‘è¡¨ï¼ˆ2021 å¹´ 12 æœˆè‡³ 2023 å¹´ï¼‰&lt;/strong&gt;  ï¼šå¤šä½è¡Œä¸šä¸“å®¶å¦‚ Thomas Graf å’Œ William Morgan ç­‰åœ¨ä¸åŒåœºåˆå‘è¡¨äº†å¯¹ sidecar ä¸æ—  sidecar æ¶æ„çš„çœ‹æ³•ï¼Œå½¢æˆäº†æ›´ä¸ºç³»ç»Ÿçš„äº‰è®ºã€‚è¿™äº›è§‚ç‚¹åœ¨å¤šä¸ªä¼šè®®å’Œæ–‡ç« ä¸­è¢«å¹¿æ³›è®¨è®ºï¼Œæ¨åŠ¨äº†å¯¹æœåŠ¡ç½‘æ ¼æ¶æ„çš„æ·±å…¥ç†è§£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å„æ–¹è§‚ç‚¹&#34;&gt;å„æ–¹è§‚ç‚¹&lt;/h2&gt;
&lt;p&gt;ä¸‹è¡¨æ‘˜å½•äº†å„æœåŠ¡ç½‘æ ¼æä¾›å•†åŠç”¨æˆ·çš„å…¬å¼€è§‚ç‚¹ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;äººç‰©&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;èŒä½/å…¬å¸&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;è§‚ç‚¹&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Andrey Rybka&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Bloomberg&lt;/td&gt;
          &lt;td&gt;å€¾å‘äºé€‰æ‹©æˆç†Ÿåº¦æ›´é«˜çš„ Istioï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰ Google ç­‰å¤§å…¬å¸æ”¯æŒçš„æƒ…å†µä¸‹ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Ara Pulido&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Datadog å¼€å‘è€…å…³ç³»ä¸“å®¶&lt;/td&gt;
          &lt;td&gt;è®¤ä¸º eBPF å·¥å…·ï¼ˆå¦‚ Ciliumï¼‰æ˜¯ Kubernetes ç½‘ç»œæ‰©å±•é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ Cilium å¯ä»¥å®Œå…¨æ›¿ä»£ kube-proxyï¼Œå®ç°æ›´ç»†ç²’åº¦çš„å®¹å™¨å®‰å…¨ç‰¹æ€§ï¼›ç§»é™¤ kube-proxy åï¼Œæ“ä½œç®€åŒ–ï¼Œæ€§èƒ½æå‡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Dale Ragan&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;SAP Concur Technologies é¦–å¸­è½¯ä»¶è®¾è®¡å·¥ç¨‹å¸ˆ&lt;/td&gt;
          &lt;td&gt;è®¤ä¸º eBPF åœ¨å®‰å…¨æ–¹é¢æä¾›äº†æ›´å¥½çš„ä¼˜åŠ¿ï¼Œå¯åŒæ—¶åº”ç”¨äºæ•´ä¸ªé›†ç¾¤å’Œå„ä¸ªæœåŠ¡ï¼›æ­£åœ¨ä½¿ç”¨ Cilium æ›¿ä»£ Flannel ä½œä¸ºå…¶ç”Ÿäº§ç¯å¢ƒä¸­çš„å®¹å™¨ç½‘ç»œæ¥å£ï¼ˆCNIï¼‰æ’ä»¶ï¼Œå¹¶æµ‹è¯• Isovalent çš„ä¸“æœ‰ SecOps æ’ä»¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Dan Wendlandt&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Isovalent CEO&lt;/td&gt;
          &lt;td&gt;è®¤ä¸º eBPF å’ŒæœåŠ¡ç½‘æ ¼æ˜¯äº’è¡¥çš„æŠ€æœ¯ï¼ŒeBPF å¯ä½œä¸ºæœåŠ¡ç½‘æ ¼çš„åŸºç¡€ï¼Œä¸ºæœåŠ¡ç½‘æ ¼ä»£ç†ï¼ˆå¦‚ Envoyï¼‰æä¾›é«˜æ•ˆçš„æ•°æ®è¿›å‡ºæœåŠ¡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;David Ortiz&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Constant Contact é¦–å¸­è½¯ä»¶å·¥ç¨‹å¸ˆ&lt;/td&gt;
          &lt;td&gt;å¯¹ Istio çš„ Ambient Mesh éå¸¸æ„Ÿå…´è¶£ï¼Œè®¤ä¸ºå…¶æ˜¾è‘—ç®€åŒ–äº† Istio çš„æ“ä½œæµç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨å‡çº§æ–¹é¢ï¼Œè®¡åˆ’å°½å¿«é‡‡ç”¨è¿™ä¸€æŠ€æœ¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Filip Nikolic&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;PostFinance&lt;/td&gt;
          &lt;td&gt;è®¤ä¸º eBPF åŸºç¡€çš„æ—  sidecar æœåŠ¡ç½‘æ ¼å…·æœ‰æ›´é«˜çš„ç½‘ç»œæ€§èƒ½å’Œæ•ˆç‡ï¼Œå¹¶ä¸”å®‰å…¨å®è·µä¹Ÿåœ¨ä¸æ–­è¿›åŒ–ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Greg Otto&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Comcast äº‘æœåŠ¡æ‰§è¡Œè‘£äº‹&lt;/td&gt;
          &lt;td&gt;å¯¹ Istio Ambient Mesh æ„Ÿå…´è¶£ï¼Œè®¡åˆ’åœ¨å…¶æˆç†Ÿåè¿›è¡Œè¯„ä¼°ï¼›å¸Œæœ›èƒ½å¤Ÿåˆ†åˆ«æ‰©å±•å’ŒæœåŠ¡ç¬¬ 7 å±‚ï¼ˆL7ï¼‰å’Œç¬¬ 4 å±‚ï¼ˆL4ï¼‰åŠŸèƒ½ï¼Œè®¤ä¸ºå‡å°‘ä¸å¿…è¦çš„ L7 è¿‡æ»¤å¯ä»¥å‡å°‘å®‰å…¨æš´éœ²é¢å’Œæ¼æ´é£é™©ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;John Mitchell&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ç‹¬ç«‹æ•°å­—åŒ–è½¬å‹é¡¾é—®&lt;/td&gt;
          &lt;td&gt;è®¤ä¸º eBPF æ­£ç»å†ä¸€ä¸ªç‚’ä½œå‘¨æœŸï¼Œä½†å®ƒç¡®å®æœ‰æ½œåŠ›ä¸º Kubernetes æä¾›é«˜çº§ç½‘ç»œå®‰å…¨ç‰¹æ€§ï¼Œè€Œæ— éœ€æ”¹å˜åº”ç”¨ç¨‹åºä»£ç ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Kasper Nissen&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Lunar çš„é¦–å¸­å¹³å°æ¶æ„å¸ˆ&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ sidecar æ¶æ„ï¼Œè®¤ä¸ºå®ƒç®€å•æ˜“ç”¨ï¼Œå¹¶ä¸å…¶ä»–å®¹å™¨æŠ€æœ¯ç›¸åŒï¼›åœ¨å…¨é¢éƒ¨ç½²æœåŠ¡ç½‘æ ¼åï¼Œèµ„æºæ¶ˆè€—å¢åŠ ä¸å¤šä½†åŠŸèƒ½å¢å¤šï¼›æŒ‡å‡º sidecar åŒæ­¥é—®é¢˜æºäº Kubernetes ç½‘ç»œå±‚çš„é—®é¢˜ï¼Œå»ºè®®åœ¨ Kubernetes å±‚é¢è¿›è¡Œä¿®å¤ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Louis Ryan&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Solo.io CTO&lt;/td&gt;
          &lt;td&gt;å¼ºè°ƒ Istio 1.23 ç‰ˆå¼•å…¥çš„ Ambient Mesh çš„ä¼˜åŠ¿ï¼ŒåŒ…æ‹¬å‡å°‘ sidecar çš„ä½¿ç”¨ï¼Œç®€åŒ–æ¶æ„ï¼Œæé«˜æ€§èƒ½ï¼Œé™ä½å¤æ‚æ€§ï¼Œå¹¶å¢å¼ºäº†çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ã€‚ä»–è®¤ä¸ºï¼ŒAmbient Mesh èƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿæ›´è½»æ¾åœ°ç®¡ç†å¾®æœåŠ¡æ¶æ„ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Thomas Graf&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Isovalent CTO&lt;/td&gt;
          &lt;td&gt;ä¸»å¼ é€šè¿‡ eBPF å’Œ Cilium æä¾›æ— è¾¹è½¦çš„æœåŠ¡ç½‘æ ¼ï¼Œä¼˜åŒ– mTLS è®¤è¯ï¼Œæ¶ˆé™¤ sidecar çš„ä½¿ç”¨ï¼Œä»è€Œæé«˜æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚è®¤ä¸ºåˆ†ç¦»è®¤è¯æ¡æ‰‹å’Œæ•°æ®ä¼ è¾“çš„æ¨¡å¼èƒ½å¤Ÿå®ç°æ›´é«˜æ•ˆã€æ›´çµæ´»çš„æœåŠ¡é—´è®¤è¯ï¼ŒåŒæ—¶å‡å°‘ç®¡ç†å¤æ‚æ€§ï¼Œå¹¶æä¾›å¯¹å¤šç§ç½‘ç»œåè®®çš„æ”¯æŒã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;William Morgan&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Linkerd åˆ›å§‹äººå…¼ Buoyant CEO&lt;/td&gt;
          &lt;td&gt;å¼ºçƒˆæ‰¹è¯„æ—  sidecar çš„ eBPF æ–¹æ³•ï¼Œè®¤ä¸º sidecar æä¾›äº†æ›´å¥½çš„å®‰å…¨éš”ç¦»å’Œæ€§èƒ½é¢„æµ‹æ€§ï¼ŒæŒ‡å‡º sidecarless æ¶æ„å¯èƒ½é‡è¹ˆ Linkerd 1 çš„è¦†è¾™ã€‚ä»–è®¤ä¸ºï¼ŒeBPF å’Œ sidecar ä¸æ˜¯å¯¹ç«‹çš„ï¼ŒeBPF å¯ä»¥ç”¨äºç½‘ç»œä¼˜åŒ–ï¼Œä½†ä¸åº”æ›¿ä»£ sidecarã€‚ä¸»å¼ ç»§ç»­ä½¿ç”¨æ›´è½»é‡çš„ sidecar ä»£ç†ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;Zachary Butcher&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;Tetrate åˆ›å§‹å·¥ç¨‹å¸ˆ&lt;/td&gt;
          &lt;td&gt;å¯¹ Ambient Mesh æŒå®¡æ…ä¹è§‚æ€åº¦ï¼Œè®¤ä¸ºå®ƒæœ‰åŠ©äºé™ä½æœåŠ¡ç½‘æ ¼çš„é‡‡ç”¨éš¾åº¦ï¼Œä½†å½“å‰æ€§èƒ½è¡¨ç°è¾ƒå·®ã€åŠŸèƒ½æœ‰é™ï¼Œè·ç¦»ç”Ÿäº§å°±ç»ªè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚ä»–å»ºè®®ç”¨æˆ·æš‚æ—¶ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Ambient Meshï¼Œç›´åˆ°å…¶æˆç†Ÿåº¦æé«˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;figcaption class=&#34;text-center&#34;&gt;
    
    å…³äºæœåŠ¡ç½‘æ ¼æŠ€æœ¯é€‰å‹çš„å…¬å¼€è§‚ç‚¹
    
&lt;/figcaption&gt;

&lt;h2 id=&#34;ä¸ªäººè§‚ç‚¹&#34;&gt;ä¸ªäººè§‚ç‚¹&lt;/h2&gt;
&lt;p&gt;è¿‘å¹´æ¥ï¼Œæˆ‘æœ‰å¹¸è§è¯å¹¶å‚ä¸äº†è®¸å¤šå…³äºæœåŠ¡ç½‘æ ¼æ¶æ„é€‰æ‹©çš„è®¨è®ºå’Œå®è·µã€‚æˆ‘è®¤ä¸ºæœåŠ¡ç½‘æ ¼é€‰æ‹©ä¸åº”ä»…ä»…åŸºäºæŠ€æœ¯ç‰¹æ€§çš„æ¯”è¾ƒï¼Œæ›´åº”è€ƒè™‘åˆ°å›¢é˜Ÿçš„å…·ä½“éœ€æ±‚ã€ç°æœ‰æŠ€æœ¯æ ˆçš„å…¼å®¹æ€§ä»¥åŠæœªæ¥çš„æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ sidecar ä¸ sidecarless çš„é€‰æ‹©é—®é¢˜ä¸Šï¼Œæˆ‘çš„çœ‹æ³•æ˜¯ä¸¤è€…å„æœ‰åƒç§‹ã€‚Sidecar æ¨¡å‹è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¸¦æ¥èµ„æºå ç”¨å’Œç®¡ç†å¤æ‚æ€§çš„å¢åŠ ï¼Œä½†å®ƒæä¾›äº†æ›´ç»†ç²’åº¦çš„æµé‡æ§åˆ¶å’Œå®‰å…¨ç­–ç•¥å®æ–½ï¼Œè¿™å¯¹äºéœ€è¦é«˜åº¦ç²¾ç»†åŒ–ç®¡ç†çš„ä¼ä¸šç¯å¢ƒæ˜¯éå¸¸å®è´µçš„ã€‚ä¸æ­¤åŒæ—¶ï¼Œsidecarless æ¨¡å‹ï¼Œå°¤å…¶æ˜¯é€šè¿‡ eBPF æŠ€æœ¯å®ç°çš„ï¼Œä¸ºæœåŠ¡ç½‘æ ¼å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æ€§èƒ½ä¼˜åŒ–å’Œèµ„æºåˆ©ç”¨ç‡æå‡ï¼Œå®ƒå¯¹äºæ„å»ºé«˜æ•ˆç‡çš„å¤§è§„æ¨¡æœåŠ¡ç½‘æ ¼åŒæ ·å…·æœ‰é‡è¦ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼Œä¼ä¸šåœ¨é€‰æ‹©æœåŠ¡ç½‘æ ¼æ¶æ„æ—¶ï¼Œåº”è¯¥ä»è‡ªèº«çš„ä¸šåŠ¡éœ€æ±‚å‡ºå‘ï¼Œç»¼åˆè€ƒè™‘å®‰å…¨æ€§ã€æ€§èƒ½ã€æˆæœ¬ä»¥åŠå›¢é˜Ÿçš„è¿ç»´èƒ½åŠ›ï¼Œé€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ€»ç»“ä¸‹ç›®å‰å…³äºè¿™ä¸‰ä¸ªæµè¡Œçš„æœåŠ¡ç½‘æ ¼é¡¹ç›®çš„ä¸»æµçœ‹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Linkerd&lt;/strong&gt;ï¼šå¼ºè°ƒ sidecar çš„å®‰å…¨éš”ç¦»å’Œæ€§èƒ½ç¨³å®šæ€§ï¼Œå¯¹ eBPF æ—  sidecar æ¨¡å¼æŒæ‰¹è¯„æ€åº¦ï¼Œè®¤ä¸ºå…¶å¤æ‚æ€§å’Œå®‰å…¨é£é™©å¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio&lt;/strong&gt;ï¼šå¼•å…¥ Ambient Meshï¼Œéƒ¨åˆ†é‡‡ç”¨æ—  sidecar æ–¹æ³•ï¼Œä»¥é™ä½å¤æ‚æ€§å’Œæé«˜æ€§èƒ½ï¼Œä½†ä»ä¿ç•™ sidecar çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œä½“ç°å‡ºå¯¹ç°æœ‰ sidecar æ¶æ„çš„ä¿ç•™ä¸åˆ›æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cilium&lt;/strong&gt;ï¼šä¸»å¼ é€šè¿‡ eBPF æ—  sidecar æ¨¡å¼æ¥ä¼˜åŒ–ç½‘ç»œæ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œç®€åŒ–æ“ä½œï¼ŒåŒæ—¶ä¿æŒå¯¹å¤šç§åè®®çš„æ”¯æŒï¼Œæ¨åŠ¨æœåŠ¡ç½‘æ ¼åŠŸèƒ½é›†æˆåˆ° Linux å†…æ ¸ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸åŒçš„è§‚ç‚¹åæ˜ äº†å„è‡ªå¯¹æœåŠ¡ç½‘æ ¼æ¶æ„è®¾è®¡çš„åå¥½ä¸å…³æ³¨ç‚¹ï¼Œä¸åŒä¼ä¸šåº”æ ¹æ®è‡ªèº«éœ€æ±‚å’ŒæŠ€æœ¯èƒŒæ™¯é€‰æ‹©åˆé€‚çš„æœåŠ¡ç½‘æ ¼æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.techtarget.com/searchitoperations/news/365535362/Sidecarless-eBPF-service-mesh-sparks-debate&#34; title=&#34;Sidecarless eBPF service mesh sparks debate&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Sidecarless eBPF service mesh sparks debate&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://thenewstack.io/ebpf-or-not-sidecars-are-the-future-of-the-service-mesh/&#34; title=&#34;eBPF or not: Sidecars are the future of the service mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;eBPF or not: Sidecars are the future of the service mesh&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://isovalent.com/blog/post/2021-12-08-ebpf-servicemesh/&#34; title=&#34;eBPF Service Mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;eBPF Service Mesh&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.techtarget.com/searchitoperations/news/252483517/Linux-kernel-utility-could-solve-Kubernetes-networking-woes&#34; title=&#34;Linux kernel utility could solve Kubernetes networking woes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linux kernel utility could solve Kubernetes networking woes&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://isovalent.com/blog/post/2022-05-03-servicemesh-security/&#34; title=&#34;Service Mesh Security&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Service Mesh Security&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://thenewstack.io/istio-1-23-drops-the-sidecars-for-a-simpler-ambient-mesh&#34; title=&#34;Istio 1.23 drops the sidecars for a simpler ambient mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio 1.23 drops the sidecars for a simpler ambient mesh&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://tetrate.io/blog/ambient-mesh-what-you-need-to-know-about-this-experimental-new-deployment-model-for-istio/&#34; title=&#34;Ambient Mesh: What you need to know about this experimental new deployment model for Istio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient Mesh: What you need to know about this experimental new deployment model for Istio&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.techtarget.com/searchitoperations/news/252526651/Sidecarless-service-mesh-fad-or-the-future&#34; title=&#34;Sidecarless service mesh: fad or the future?&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Sidecarless service mesh: fad or the future?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>é¦™æ¸¯â€”â€”å†…åœ°çš„ä¸€é¢çš„é•œå­</title>
      <link>https://jimmysong.io/blog/hong-kong-trip/</link>
      <pubDate>Fri, 06 Sep 2024 19:14:52 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/hong-kong-trip/</guid>
      <description>
        
        
        &lt;p&gt;ä¸Šä¸ªæœˆï¼Œå› ä¸ºå‚åŠ  KubeCon Chinaï¼Œæˆ‘ç¬¬ä¸€æ¬¡å‰å¾€é¦™æ¸¯ï¼Œè¿™è®©æˆ‘æœ‰æœºä¼šè¿‘è·ç¦»å®¡è§†è¿™é¢—â€œä¸œæ–¹æ˜ç â€ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/jianshazui.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/jianshazui.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»å°–æ²™å’€çœºæœ›é¦™æ¸¯å²›&#34;&gt;
  
  
  &lt;figcaption&gt;ä»å°–æ²™å’€çœºæœ›é¦™æ¸¯å²›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘ä¸è®°å¾—ä¹‹å‰åœ¨å“ªé‡Œçœ‹åˆ°ä¸€ä¸ªè¯´æ³•ï¼Œè¯´æ˜¯â€œé¦™æ¸¯æ˜¯ä¸­å›½å†…åœ°çš„ä¸€é¢é•œå­â€ã€‚é¦™æ¸¯å› å…¶ç‰¹æ®Šçš„å†å²èƒŒæ™¯ã€ç»æµå‘å±•è½¨è¿¹ä»¥åŠåœ¨å›å½’åçš„ä¸€ç³»åˆ—è¡¨ç°ç­‰ï¼Œè®¸å¤šäººéƒ½åœ¨åˆ†æç ”ç©¶è¿‡ç¨‹ä¸­ä¼šå°†é¦™æ¸¯çš„å‘å±•æƒ…å†µã€ç¤¾ä¼šæ²»ç†ç»éªŒæ•™è®­ç­‰ä¸å†…åœ°è¿›è¡Œå…³è”å’Œæ¯”è¾ƒï¼Œè®¤ä¸ºå…¶åœ¨æŸäº›æ–¹é¢å¯ä»¥ä¸ºå†…åœ°æä¾›å‚è€ƒå€Ÿé‰´ï¼Œå°±å¦‚åŒé•œå­ä¸€æ ·åæ˜ å‡ºä¸€äº›ç°è±¡å’Œé—®é¢˜çš„ä¸åŒä¾§é¢åŠè§£å†³è·¯å¾„çš„å¯èƒ½æ€§ç­‰ã€‚æ¯”å¦‚ä¸€äº›ç ”ç©¶åŒºåŸŸå‘å±•å’Œç¤¾ä¼šæ²»ç†çš„ä¸“å®¶å­¦è€…åœ¨ç›¸å…³è®ºè¿°ä¸­å¯èƒ½å°±ä¼šæ¶‰åŠåˆ°ç±»ä¼¼çš„è§‚ç‚¹è¡¨è¾¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¦™æ¸¯ä¸å†…åœ°çš„ä¸åŒ&#34;&gt;é¦™æ¸¯ä¸å†…åœ°çš„ä¸åŒ&lt;/h2&gt;
&lt;p&gt;é¦™æ¸¯ä¸å†…åœ°å­˜åœ¨ç€è¯¸å¤šä¸åŒï¼Œè¿™äº›ä¸åŒä¸å…‰æ˜¯è¡¨é¢ä¸Šçš„ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»´åº¦&lt;/th&gt;
          &lt;th&gt;é¦™æ¸¯&lt;/th&gt;
          &lt;th&gt;å†…åœ°&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;æ”¿æ²»åˆ¶åº¦&lt;/td&gt;
          &lt;td&gt;èµ„æœ¬ä¸»ä¹‰åˆ¶åº¦ï¼Œè¡Œæ”¿é•¿å®˜æ˜¯ç‰¹åˆ«è¡Œæ”¿åŒºé¦–é•¿ã€‚&lt;/td&gt;
          &lt;td&gt;ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ï¼Œäººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ³•å¾‹ä½“ç³»&lt;/td&gt;
          &lt;td&gt;è‹±ç¾æ³•ç³»ï¼Œåˆ¤ä¾‹æ³•é‡è¦ã€‚&lt;/td&gt;
          &lt;td&gt;å¤§é™†æ³•ç³»ï¼Œä»¥æˆæ–‡æ³•ä¸ºä¸»ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç»æµä½“åˆ¶&lt;/td&gt;
          &lt;td&gt;è‡ªç”±å¸‚åœºç»æµï¼ŒæœåŠ¡ä¸šå’Œé‡‘èä¸ºä¸»ã€‚&lt;/td&gt;
          &lt;td&gt;ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµï¼Œå…¬æœ‰åˆ¶ä¸ºä¸»ä½“ï¼Œå¤šç§æ‰€æœ‰åˆ¶å‘å±•ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ–‡åŒ–æ–¹é¢&lt;/td&gt;
          &lt;td&gt;ä¸­è¥¿æ–‡åŒ–äº¤èï¼Œä¿ç•™å¤§é‡ä¸­åä¼ ç»Ÿæ–‡åŒ–ã€‚&lt;/td&gt;
          &lt;td&gt;ä»¥ä¸­åæ–‡åŒ–ä¸ºä¸»ï¼Œåœ°åŸŸæ–‡åŒ–å¤šæ ·ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ•™è‚²ä½“ç³»&lt;/td&gt;
          &lt;td&gt;æ¨è¡Œâ€œä¸‰ä¸‰å››â€å­¦åˆ¶ï¼Œå¤šè¯­è¨€æ•™å­¦ï¼Œæ³¨é‡ç´ è´¨æ•™è‚²ã€‚&lt;/td&gt;
          &lt;td&gt;å›½å®¶æŒ‡å¯¼ï¼Œåœ°æ–¹è´Ÿè´£ï¼Œåº”è¯•æ•™è‚²ä¸ºä¸»ï¼Œç»Ÿä¸€æ•™æã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åŒ»ç–—ä½“ç³»&lt;/td&gt;
          &lt;td&gt;å…¬ç«‹ç§ç«‹å¹¶å­˜ï¼Œè°¨æ…ç”¨è¯ï¼Œç¤¾åŒºåŒ»é™¢ä¸ºä¸»ã€‚&lt;/td&gt;
          &lt;td&gt;åŒ»ç–—ä½“ç³»å¤šå…ƒï¼Œå¤§åŒ»é™¢èµ„æºç´§å¼ ï¼Œç”¨è¯ä¾æ®ç—…æƒ…ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç¨æ”¶åˆ¶åº¦&lt;/td&gt;
          &lt;td&gt;åœ°åŸŸæ¥æºå¾ç¨ï¼Œç¨ç§å°‘ï¼Œç¨ç‡ä½ã€‚&lt;/td&gt;
          &lt;td&gt;å±…æ°‘èº«ä»½å¾ç¨ï¼Œç¨ç§å¤šï¼Œç¨è´Ÿè¾ƒé«˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å…»è€ä¿éšœ&lt;/td&gt;
          &lt;td&gt;å¼ºç§¯é‡‘åˆ¶åº¦ï¼Œé›‡ä¸»å’Œé›‡å‘˜å…±åŒä¾›æ¬¾ã€‚&lt;/td&gt;
          &lt;td&gt;èŒå·¥å’Œå±…æ°‘åŸºæœ¬å…»è€ä¿é™©ï¼Œç¼´è´¹æ¯”ä¾‹ä¸åŒã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è¯­è¨€ä½¿ç”¨&lt;/td&gt;
          &lt;td&gt;ç²¤è¯­ä¸ºä¸»ï¼Œè‹±è¯­å¹¿æ³›ä½¿ç”¨ã€‚&lt;/td&gt;
          &lt;td&gt;æ™®é€šè¯ä¸ºä¸»ï¼Œå„åœ°æ–¹è¨€ä¼—å¤šã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ–‡å­—å½¢å¼&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ç¹ä½“ä¸­æ–‡ã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ç®€ä½“ä¸­æ–‡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç”Ÿæ´»ä¹ æƒ¯&lt;/td&gt;
          &lt;td&gt;é¥®é£Ÿæ¸…æ·¡ï¼Œç…²æ±¤æ–‡åŒ–ï¼Œéƒ¨åˆ†è¥¿æ–¹ç”Ÿæ´»ä¹ æƒ¯ã€‚&lt;/td&gt;
          &lt;td&gt;é¥®é£Ÿä¸°å¯Œå¤šæ ·ï¼Œç”Ÿæ´»ä¹ æƒ¯å› åœ°åŸŸæ–‡åŒ–ä¸åŒã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ¶ˆè´¹è§‚å¿µ&lt;/td&gt;
          &lt;td&gt;æ¶ˆè´¹å¤šå…ƒåŒ–ï¼Œæ³¨é‡å“è´¨ï¼Œé«˜ç«¯å“ç‰Œæ¥å—åº¦é«˜ã€‚&lt;/td&gt;
          &lt;td&gt;æ¶ˆè´¹è§‚å¿µå¤šæ ·åŒ–ï¼Œä¸ç»æµæ°´å¹³æœ‰å…³ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;äº¤é€šè§„åˆ™&lt;/td&gt;
          &lt;td&gt;é å·¦è¡Œé©¶ï¼Œé©¾é©¶ä½åœ¨å³ä¾§ã€‚&lt;/td&gt;
          &lt;td&gt;é å³è¡Œé©¶ï¼Œé©¾é©¶ä½åœ¨å·¦ä¾§ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ä½æˆ¿æƒ…å†µ&lt;/td&gt;
          &lt;td&gt;åœŸåœ°å°‘ï¼Œæˆ¿ä»·é«˜ï¼Œå…¬å±‹åˆ¶åº¦å®Œå–„ã€‚&lt;/td&gt;
          &lt;td&gt;ä½æˆ¿ç±»å‹å¤šæ ·ï¼Œæˆ¿ä»·å·®å¼‚å¤§ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç”µå½±åˆ†çº§&lt;/td&gt;
          &lt;td&gt;æœ‰æ˜ç¡®çš„ç”µå½±åˆ†çº§åˆ¶åº¦ã€‚&lt;/td&gt;
          &lt;td&gt;æ— æ˜ç¡®ç”µå½±åˆ†çº§ï¼Œå®¡æŸ¥ä¸¥æ ¼ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ–°é—»å‡ºç‰ˆå®¡æŸ¥&lt;/td&gt;
          &lt;td&gt;æ–°é—»å‡ºç‰ˆè¾ƒè‡ªç”±ï¼Œä½†æœ‰ç›‘ç®¡ã€‚&lt;/td&gt;
          &lt;td&gt;ä¸¥æ ¼çš„æ–°é—»å‡ºç‰ˆå®¡æŸ¥åˆ¶åº¦ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç½‘ç»œå¼€æ”¾åº¦&lt;/td&gt;
          &lt;td&gt;äº’è”ç½‘ç›¸å¯¹å¼€æ”¾ï¼Œå…¨çƒå¤§å¤šæ•°ç½‘ç«™å¯è®¿é—®ã€‚&lt;/td&gt;
          &lt;td&gt;äº’è”ç½‘ç›‘ç®¡ä¸¥æ ¼ï¼Œéƒ¨åˆ†å›½å¤–ç½‘ç«™è¢«å±è”½ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æŠ¤ç…§å«é‡‘é‡&lt;/td&gt;
          &lt;td&gt;å¯å…ç­¾æˆ–è½åœ°ç­¾å‰å¾€çº¦ 170 ä¸ªå›½å®¶å’Œåœ°åŒºã€‚&lt;/td&gt;
          &lt;td&gt;å¯å…ç­¾æˆ–è½åœ°ç­¾å‰å¾€çº¦ 80 ä¸ªå›½å®¶å’Œåœ°åŒºã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è®¡é‡å•ä½ä½¿ç”¨&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨è‹±åˆ¶å’Œå…¬åˆ¶å•ä½ã€‚&lt;/td&gt;
          &lt;td&gt;ä¸»è¦ä½¿ç”¨å…¬åˆ¶å•ä½ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç”µå‹å’Œæ’åº§ç±»å‹&lt;/td&gt;
          &lt;td&gt;220Vï¼Œè‹±å¼ä¸‰æ’ï¼ˆG å‹ï¼‰ã€‚&lt;/td&gt;
          &lt;td&gt;220Vï¼ŒåŒå­”å’Œä¸‰å­”æ’åº§ï¼ˆA å‹ã€I å‹ï¼‰ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ‰‹æœºæ”¯ä»˜æ™®åŠåº¦&lt;/td&gt;
          &lt;td&gt;ç°é‡‘å’Œä¿¡ç”¨å¡æ™®åŠï¼Œå…«è¾¾é€šå¡ä½¿ç”¨å¹¿æ³›ã€‚&lt;/td&gt;
          &lt;td&gt;æ‰‹æœºæ”¯ä»˜éå¸¸æ™®åŠï¼Œå¾®ä¿¡æ”¯ä»˜å’Œæ”¯ä»˜å®å¸¸ç”¨ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è´­ç‰©å’Œé›¶å”®æ¨¡å¼&lt;/td&gt;
          &lt;td&gt;å›½é™…å“ç‰Œä¸æœ¬åœ°å“ç‰Œå¹¶å­˜ï¼Œå¤œå¸‚å’Œè¡—è¾¹å°åº—å¸¸è§ã€‚&lt;/td&gt;
          &lt;td&gt;å¤§å‹è´­ç‰©ä¸­å¿ƒã€è¶…å¸‚ã€å¤œå¸‚ã€ç”µå•†å¹³å°å¤šæ ·ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç¤¾äº¤ä¹ æƒ¯&lt;/td&gt;
          &lt;td&gt;è‹±è¯­ä½¿ç”¨æ™®éï¼Œè¥¿æ–¹ç¤¾äº¤ç¤¼ä»ªã€‚&lt;/td&gt;
          &lt;td&gt;æ™®é€šè¯ä¸ºä¸»ï¼Œä¼ ç»Ÿç¤¾äº¤ç¤¼ä»ªã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å®—æ•™ä¿¡ä»°&lt;/td&gt;
          &lt;td&gt;å¤šå…ƒå®—æ•™ç¯å¢ƒï¼Œå®—æ•™è‡ªç”±ã€‚&lt;/td&gt;
          &lt;td&gt;å®—æ•™ä¿¡ä»°æœ‰é™åˆ¶ï¼Œä¿¡ä»°è‡ªç”±å—æ³•å¾‹ä¿æŠ¤ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;é£Ÿå“å®‰å…¨æ ‡å‡†&lt;/td&gt;
          &lt;td&gt;é£Ÿå“è¿›å£å’Œç›‘æ§ä¸¥æ ¼ï¼Œå›½é™…æ ‡å‡†ã€‚&lt;/td&gt;
          &lt;td&gt;æ ‡å‡†é€æ¸å®Œå–„ï¼Œå¶æœ‰é—®é¢˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å·¥ä½œæ—¶é—´å’Œå‡æœŸ&lt;/td&gt;
          &lt;td&gt;æ¯å‘¨ 44 å°æ—¶ï¼Œå…¬å…±å‡æœŸå¤šã€‚&lt;/td&gt;
          &lt;td&gt;æ¯å‘¨ 40 å°æ—¶ï¼Œæ³•å®šèŠ‚å‡æ—¥è¾ƒå°‘ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;é¦™æ¸¯æ‹¥æŒ¤çš„äº¤é€š&#34;&gt;é¦™æ¸¯æ‹¥æŒ¤çš„äº¤é€š&lt;/h2&gt;
&lt;p&gt;é¦™æ¸¯å²›æ˜¯é¦™æ¸¯æœ€ç¹åçš„åœ°æ–¹ï¼Œé¢ç§¯çº¦ 78.10 å¹³æ–¹å…¬é‡Œï¼Œè¿™é‡Œé›†ä¸­äº†å¤§é‡çš„å•†ä¸šã€åŠå…¬å’Œä½å®…åŒºåŸŸï¼Œå¸å¼•äº†ä¼—å¤šäººå£å’Œè½¦è¾†ï¼Œäº¤é€šå‹åŠ›è¾ƒå¤§ã€‚åœ¨é¦™æ¸¯å²›ä¸Šï¼Œæœ‰ä¸€ç§æå…·ç‰¹è‰²çš„äº¤é€šå·¥å…·â€”â€”å®å½“è½¦ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºæœ‰è½¨ç”µè½¦ã€‚å®å½“è½¦å…¨éƒ¨åˆ†å¸ƒåœ¨æ¸¯å²›åŒ—éƒ¨ç‹­é•¿çš„åœ°å¸¦ï¼Œå…±æœ‰ 6 æ¡çº¿è·¯ï¼Œå…¨éƒ½ç»è¿‡æ¸¯å²›ç¹åçƒ­é—¹çš„åœ°åŒºï¼Œå¦‚é“œé”£æ¹¾ã€è·‘é©¬åœ°ã€ä¸­ç¯ç­‰ã€‚å®ƒçš„è½¦èº«é€šå¸¸ä¸ºåŒå±‚ï¼Œé€ å‹å¤æœ´ï¼Œå½“å¸æœºè¸©åˆ°è¸è„šæ—¶ï¼Œè½¦å­ä¼šå‘å‡ºâ€œå®å½“ã€å®å½“â€çš„å£°å“ï¼Œæ•…è€Œå¾—åã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/dingdingche.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/dingdingche.webp&#34; alt=&#34;image&#34; data-caption=&#34;é¦™æ¸¯å²›ä¸Šçš„å®å½“è½¦&#34;&gt;
  
  
  &lt;figcaption&gt;é¦™æ¸¯å²›ä¸Šçš„å®å½“è½¦&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨é¦™æ¸¯æ—ºè§’çš„è¡—å¤´ï¼Œäººç¾¤å¦‚æ½®æ°´èˆ¬æ¶ŒåŠ¨ã€‚è¿™é‡Œæ˜¯ç¹åéƒ½å¸‚çš„ç¼©å½±ï¼Œå–§åš£ä¸çƒ­é—¹äº¤ç»‡æˆä¸€å¹…ç‹¬ç‰¹çš„ç”»å·ã€‚æ‘©è‚©æ¥è¸µçš„äººä»¬ï¼Œæ€€æ£ç€å„è‡ªçš„æ¢¦æƒ³ä¸æ•…äº‹ï¼Œåœ¨è¿™ä¸ªå……æ»¡æ´»åŠ›çš„åœ°æ–¹ç©¿æ¢­ã€‚æ—¶å°šçš„åº—é“ºã€ç¾å‘³çš„å°åƒã€ç’€ç’¨çš„ç¯å…‰ï¼Œå…±åŒæ„æˆäº†æ—ºè§’çš„é­…åŠ›ã€‚æ¯ä¸€ä¸ªåŒ†å¿™çš„è„šæ­¥ï¼Œæ¯ä¸€å¼ æ´‹æº¢ç€ç¬‘å®¹çš„è„¸åºï¼Œéƒ½åœ¨è¯‰è¯´ç€è¿™åº§åŸå¸‚çš„æ— é™å¯èƒ½ã€‚æ—ºè§’ï¼Œä¸€ä¸ªè®©äººæ„Ÿå—é¦™æ¸¯è„‰æè·³åŠ¨çš„åœ°æ–¹ï¼Œæ°¸è¿œå……æ»¡ç€ç”Ÿæœºä¸æ´»åŠ›ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/wangjiao.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/wangjiao.webp&#34; alt=&#34;image&#34; data-caption=&#34;æ—ºè§’çš„å¤œæ™šè¡—æ™¯&#34;&gt;
  
  
  &lt;figcaption&gt;æ—ºè§’çš„å¤œæ™šè¡—æ™¯&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;é¦™æ¸¯å²›åœ°å½¢ä»¥å±±åœ°ä¸ºä¸»ï¼Œåœ°åŠ¿è¾ƒé«˜ï¼Œè‡ªåŒ—å‘å—åœ°åŠ¿æ¸ç¼“ï¼Œç¯å²›æ²¿å²¸æ›²æŠ˜ï¼Œå¤šç¾æ™¯æ¸¯æ¹¾ã€‚å²›ä¸Šçš„ä¸»è¦å±±å³°åŒ…æ‹¬å¤ªå¹³å±±ã€æŸæ¶å±±ã€å¥‡åŠ›å±±ç­‰ï¼Œå…¶ä¸­å¤ªå¹³å±±æ˜¯é¦™æ¸¯å²›çš„æœ€é«˜å³°ï¼Œæµ·æ‹” 554 ç±³ã€‚&lt;/p&gt;
&lt;p&gt;å…°æ¡‚åŠä½äºé¦™æ¸¯å²›ä¸­è¥¿åŒºä¸­ç¯ï¼Œæ˜¯ä¸€ä¸ªèšé›†å¤§å°é…’å§ä¸é¤é¦†çš„ä¸­é«˜æ¡£æ¶ˆè´¹åŒºã€‚å®ƒç”±å¾·å·±ç«‹è¡—ã€å¨çµé¡¿è¡—ã€äº‘å’¸è¡—ã€å’Œå®‰é‡Œã€ä»å¯¿é‡ŒåŠè£åé‡Œæ„æˆï¼Œå®½çº¦ 20 ç±³ï¼Œé•¿çº¦ 300 ç±³ã€‚20 ä¸–çºªä¸­æœŸï¼Œé¦™æ¸¯ç»æµè…¾é£ï¼Œå•†ä¸šé«˜é€Ÿå‘å±•ï¼Œå¤œæ€»ä¼šæ–‡åŒ–å¼€å§‹åœ¨é¦™æ¸¯æµè¡Œï¼Œå¾ˆå¤šåœ¨é¦™æ¸¯å·¥ä½œæˆ–æš‚å±…çš„å¤–å›½äººæ¸´æ±‚é€‚åˆä»–ä»¬å“å‘³å’Œè¦æ±‚çš„å¨±ä¹åœºæ‰€ï¼Œå…°æ¡‚åŠä¾¿åº”è¿è€Œç”Ÿã€‚æ¯å½“å¤œå¹•é™ä¸´ï¼Œè¿™é‡Œä¾¿ä¼šç¯çº¢é…’ç»¿ï¼Œè§¥ç­¹äº¤é”™ï¼Œç½®èº«è¿™é‡Œè®©æˆ‘ä»¿ä½›ç½®èº«ä¸œå—äºšï¼Œæ„Ÿè§‰è·Ÿæ³°å›½å¾ˆåƒã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/languifang.jpg&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/languifang.jpg&#34; alt=&#34;image&#34; data-caption=&#34;å…°æ¡‚åŠå‘¨è¾¹çš„è¡—é“å¤œæ™¯&#34;&gt;
  
  
  &lt;figcaption&gt;å…°æ¡‚åŠå‘¨è¾¹çš„è¡—é“å¤œæ™¯&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æœ¬åœ°ç‰¹è‰²&#34;&gt;æœ¬åœ°ç‰¹è‰²&lt;/h2&gt;
&lt;p&gt;æˆ‘åœ¨é¦™æ¸¯ City walk çš„æ—¶å€™å‘ç°çš„ä¸€äº›æœ¬åœ°ç‰¹è‰²ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å‘ç°å¾ˆå¤šå»ºç­‘ä½¿ç”¨ç«¹å­æ­å»ºçš„è„šæ‰‹æ¶ï¼Œç°åœ¨ç«¹å­è„šæ‰‹æ¶åœ¨å¤§åŸå¸‚ä¸­å¾ˆå°‘è§åˆ°äº†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/zhuzi.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/zhuzi.webp&#34; alt=&#34;image&#34; data-caption=&#34;å †æ”¾åœ¨åœ°ä¸Šçš„ç«¹å­&#34;&gt;
  
  
  &lt;figcaption&gt;å †æ”¾åœ¨åœ°ä¸Šçš„ç«¹å­&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/jiaoshoujia.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/jiaoshoujia.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä½¿ç”¨ç«¹å­æ­å»ºçš„è„šæ‰‹æ¶&#34;&gt;
  
  
  &lt;figcaption&gt;ä½¿ç”¨ç«¹å­æ­å»ºçš„è„šæ‰‹æ¶&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘è¿˜åœ¨åº™è¡—çœ‹åˆ°ç®—å‘½ä¸€æ¡è¡—ï¼Œè¿˜æœ‰ä¸€å®¶åº—ä»£å®¢çƒ§é¦™ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/suanming.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/suanming.webp&#34; alt=&#34;image&#34; data-caption=&#34;ç®—å‘½ä¸€æ¡è¡—&#34;&gt;
  
  
  &lt;figcaption&gt;ç®—å‘½ä¸€æ¡è¡—&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/baozhi.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/baozhi.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä»£å®¢æ‹œå…ˆäºº&#34;&gt;
  
  
  &lt;figcaption&gt;ä»£å®¢æ‹œå…ˆäºº&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æœ€åæœ¬åœ°çš„ç²¤èœçœŸçš„å¾ˆå¥½åƒï¼Œæˆ‘åƒäº†ä¸€é“ç‚¸çŒªæ’ï¼Œå¤–ç„¦é‡Œå«©ï¼Œå£æ°´ç›´æµã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/hong-kong-trip/zhazhupai.jpg&#34; data-img=&#34;https://jimmysong.io/img/blog/hong-kong-trip/zhazhupai.jpg&#34; alt=&#34;image&#34; data-caption=&#34;ç‚¸çŒªæ’&#34;&gt;
  
  
  &lt;figcaption&gt;ç‚¸çŒªæ’&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨é¦™æ¸¯çš„è¿™æ¬¡æ—…è¡Œä¸­ï¼Œæˆ‘ä¸ä»…é¢†ç•¥äº†è¿™åº§åŸå¸‚çš„ç¹åä¸å¤šæ ·æ€§ï¼Œè¿˜æ„Ÿå—åˆ°äº†å®ƒä½œä¸ºä¸€é¢â€œé•œå­â€æ‰€å¸¦æ¥çš„æ€è€ƒã€‚é¦™æ¸¯çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå®ƒä¸œè¥¿æ–¹æ–‡åŒ–çš„äº¤èã€ç°ä»£ä¸ä¼ ç»Ÿçš„ç»“åˆï¼Œä»¥åŠå…¶ä¸å†…åœ°åœ¨æ”¿æ²»ã€ç»æµã€æ–‡åŒ–ç­‰æ–¹é¢çš„æ˜¾è‘—å·®å¼‚ã€‚æ— è®ºæ˜¯ä¹˜åå®å½“è½¦ç©¿è¡Œåœ¨æ¸¯å²›ç¹åçš„è¡—é“ï¼Œè¿˜æ˜¯æ¼«æ­¥åœ¨å…°æ¡‚åŠä½“éªŒå¤œç”Ÿæ´»çš„ä¸°å¯Œå¤šå½©ï¼Œäº¦æˆ–æ˜¯åœ¨è¡—å¤´å··å°¾å‘ç°æœ¬åœ°çš„ç‰¹è‰²æ–‡åŒ–ï¼Œè¿™ä¸€åˆ‡éƒ½è®©æˆ‘æ›´åŠ ç†è§£ä¸ºä»€ä¹ˆæœ‰äººè¯´é¦™æ¸¯æ˜¯ä¸­å›½å†…åœ°çš„ä¸€é¢é•œå­ã€‚é€šè¿‡è¿™é¢é•œå­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªä¸åŒçš„è§†è§’ï¼Œè¿™ä¸ä»…è®©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£é¦™æ¸¯ï¼Œä¹Ÿèƒ½åæ€å†…åœ°çš„è®¸å¤šæ–¹é¢ï¼Œä¸ºæœªæ¥çš„ç¤¾ä¼šå’Œç»æµå‘å±•æä¾›æ›´å¤šçš„å€Ÿé‰´å’Œå¯ç¤ºã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>KubeCon China 2024 å›é¡¾ï¼šå¼•é¢†äº‘åŸç”ŸæŠ€æœ¯çš„å‰æ²¿åŠ¨æ€</title>
      <link>https://jimmysong.io/blog/kubecon-china-2024-recap/</link>
      <pubDate>Tue, 27 Aug 2024 10:23:48 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/kubecon-china-2024-recap/</guid>
      <description>
        
        
        &lt;p&gt;ä»Šå¹´çš„&lt;a href=&#34;https://events.linuxfoundation.org/kubecon-cloudnativecon-open-source-summit-ai-dev-china/&#34; title=&#34;KubeCon China&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;KubeCon China&lt;/a&gt;æ˜¯é¦–æ¬¡åœ¨é¦™æ¸¯ä¸¾åŠçš„ç››ä¼šï¼ŒæŒç»­äº†ä¸‰å¤©ã€‚ä½œä¸ºä¼šè®®çš„å‚ä¸è€…åŠä¸€ä¸ªè®ºå›çš„ä¸»æŒäººï¼Œæˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­å°†åˆ†äº«ä¼šè®®çš„ç²¾å½©å†…å®¹å’Œå¯¹æœåŠ¡ç½‘æ ¼åŠç½‘å…³æŠ€æœ¯çš„æ·±å…¥è®¨è®ºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/kubecon-china-2024-recap/kubecon-china-2024-hall.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/kubecon-china-2024-recap/kubecon-china-2024-hall.webp&#34; alt=&#34;image&#34; data-caption=&#34;KubeCon China ç°åœºç”»é¢&#34;&gt;
  
  
  &lt;figcaption&gt;KubeCon China ç°åœºç”»é¢&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä¸»é¢˜ç„¦ç‚¹&#34;&gt;ä¸»é¢˜ç„¦ç‚¹&lt;/h2&gt;
&lt;p&gt;æœ¬æ¬¡ KubeCon æ–°å¢äº† AI ä¸å¼€å‘è€…ä¸»é¢˜ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†é‡ç‚¹å†…å®¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‘åŸç”ŸæŠ€æœ¯åœ¨è¡Œä¸šä¸­çš„å®é™…åº”ç”¨&lt;/strong&gt;ï¼šç‰¹åˆ«æ˜¯ç”µåŠ¨æ±½è½¦å’Œç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œå¦‚ Huawei å’Œ NIO çš„å…±åŒæ¢è®¨äº‘åŸç”ŸæŠ€æœ¯å¦‚ä½•åŠ é€Ÿç”µåŠ¨æ±½è½¦åˆ›æ–°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Kubernetes ç¤¾åŒºçš„åŠ›é‡&lt;/strong&gt;ï¼šè¯¦ç»†è®¨è®ºäº†ä¸­å›½ Kubernetes ç¤¾åŒºçš„å½±å“åŠ›åŠå…¶åœ¨æ¨åŠ¨åŒºåŸŸäº‘åŸç”Ÿæ´»åŠ¨ä¸­çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼€æºæŠ€æœ¯ä¸äººå·¥æ™ºèƒ½çš„èåˆ&lt;/strong&gt;ï¼šæ¢è®¨äº†ä¸­å›½åŠé¦™æ¸¯åœ¨å¼€æºä¸ AI æŠ€æœ¯é¢†åŸŸçš„å…ˆè¿›åœ°ä½åŠå¯¹åŒºåŸŸæŠ€æœ¯åˆ›æ–°çš„æ¨åŠ¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ç½‘æ ¼ä¸ API ç½‘å…³çš„æœ€æ–°è¿›å±•&lt;/strong&gt;ï¼šåŒ…æ‹¬æœåŠ¡ç½‘æ ¼çš„æœ€æ–°æŠ€æœ¯æ›´æ–°åŠå…¶ä¸ Kubernetes è°ƒåº¦å™¨çš„ååŒå·¥ä½œæé«˜ç³»ç»Ÿååé‡çš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾›åº”é“¾å®‰å…¨çš„æ–°ç­–ç•¥&lt;/strong&gt;ï¼šå…³æ³¨ä¿éšœä¾›åº”é“¾å®‰å…¨çš„æœ€æ–°åŠ¨æ€ï¼Œç‰¹åˆ«æ˜¯ SLSA åˆè§„æ€§çš„å®è·µæŒ‡å—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šé›†ç¾¤ç®¡ç†ä¸è¾¹ç¼˜è®¡ç®—&lt;/strong&gt;ï¼šæ¢è®¨äº†åœ¨ä¸åŒæ¶æ„ä¸‹è¿›è¡Œæœ‰æ•ˆç®¡ç†ä¸åˆ›æ–°çš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;AI å¤§æ¨¡å‹çš„æ¨ç†æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šè®¨è®ºäº†æ— æœåŠ¡å™¨æ¶æ„ä¸‹çš„ AI å¤§æ¨¡å‹æ¨ç†æ€§èƒ½ä¼˜åŒ–åŠç›¸å…³æŠ€æœ¯è¿›å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;istio-ä¸ç°ä»£-api-ç½‘å…³æ¢ç´¢æœåŠ¡ç½‘æ ¼çš„æœªæ¥&#34;&gt;Istio ä¸ç°ä»£ API ç½‘å…³ï¼šæ¢ç´¢æœåŠ¡ç½‘æ ¼çš„æœªæ¥&lt;/h2&gt;
&lt;p&gt;æˆ‘ä¸æ¥è‡ª Tetrateã€é˜¿é‡Œäº‘å’Œ Kong Inc.çš„è¡Œä¸šé¢†è¢–å…±åŒå‚ä¸çš„&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYY6/istio-and-modern-api-gateways-navigating-the-future-of-service-meshes-istiorejiong-apijie-daepqiu-jie-zha-jimmy-song-jianpeng-he-tetrate-jiaqi-zhang-alibaba-cloud-jintao-zhang-kong-inc-xunzhuo-liu-tencent&#34; title=&#34;åœ†æ¡Œè®¨è®º&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ†æ¡Œè®¨è®º&lt;/a&gt;ï¼Œæ·±å…¥æ¢è®¨äº† Istio å’Œ API ç½‘å…³çš„æœ€æ–°è¿›å±•åŠå…¶èåˆå¸¦æ¥çš„é©æ–°ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/kubecon-china-2024-recap/kubecon-china-2024-panel.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/kubecon-china-2024-recap/kubecon-china-2024-panel.webp&#34; alt=&#34;image&#34; data-caption=&#34;KubeCon China 2024 Istio å’Œç°ä»£ API ç½‘å…³çš„åœ†æ¡Œè®ºå›&#34;&gt;
  
  
  &lt;figcaption&gt;KubeCon China 2024 Istio å’Œç°ä»£ API ç½‘å…³çš„åœ†æ¡Œè®ºå›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Istio çš„é©æ–°&lt;/strong&gt;ï¼šä»‹ç»äº† Istio 1.123 ç‰ˆæœ¬ä¸­çš„ Ambient æ¨¡å¼ä¼˜åŒ–ï¼Œæ­¤æ¨¡å¼ä½œä¸ºæ–°çš„æ¶æ„é€‰æ‹©ï¼Œå‡å°‘èµ„æºæ¶ˆè€—åŒæ—¶æå‡æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ambient æ¨¡å¼ä¸ Sidecar æ¨¡å¼çš„å®ç”¨å¯¹æ¯”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© Sidecar&lt;/strong&gt;ï¼šéœ€è¦é«˜åº¦éš”ç¦»ä¸è¯¦å°½æµé‡ç®¡ç†æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© Ambient&lt;/strong&gt;ï¼šè¿½æ±‚æè‡´æ€§èƒ½ä¸èµ„æºæ•ˆç‡æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ambient æ¨¡å¼çš„å‘å±•æŒ‘æˆ˜&lt;/strong&gt;ï¼šå°½ç®¡æœ‰è¯¸å¤šä¼˜åŠ¿ï¼ŒAmbient æ¨¡å¼åœ¨å¤æ‚æµé‡ç®¡ç†ä¸å¤šç§Ÿæˆ·ç¯å¢ƒä¸­ä»é¢ä¸´æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ç½‘æ ¼ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;ï¼šè®¨è®ºäº†æœåŠ¡ç½‘æ ¼çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå¦‚ä½•æå‡äº‘åº”ç”¨çš„æ€§èƒ½ä¸æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ç½‘æ ¼ä¸ API ç½‘å…³çš„æ•´åˆ&lt;/strong&gt;ï¼šå±•ç¤ºäº†è¿™ä¸¤å¤§æŠ€æœ¯å¦‚ä½•å…±åŒä½œç”¨ï¼Œæ”¯æŒæ›´å¤æ‚çš„éƒ¨ç½²ä¸è¿ç»´æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;istio-çš„æœªæ¥å±•æœ›&#34;&gt;Istio çš„æœªæ¥å±•æœ›&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYcG/what-is-the-future-of-service-mesh-sidecar-or-sidecarless-jie-zha-dyagsyi-wu-pi-yi-wu-zhonghu-xu-huawei&#34; title=&#34;å¾ä¸­è™å’Œä½•å»ºé¹çš„åˆ†äº«&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾ä¸­è™å’Œä½•å»ºé¹çš„åˆ†äº«&lt;/a&gt;ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°äº† Istio æœªæ¥çš„å¯èƒ½å‘å±•æ–¹å‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒæ¨¡é©±åŠ¨&lt;/strong&gt;ï¼šIstio å°†åŒæ—¶æ”¯æŒ Ambient æ¨¡å¼å’Œä¼ ç»Ÿçš„ Sidecar æ¨¡å¼ã€‚Ambient æ¨¡å¼é€‚åˆè¿½æ±‚æ€§èƒ½å’Œèµ„æºæˆæœ¬ä¼˜åŒ–çš„ç”¨æˆ·ï¼Œè€Œ Sidecar æ¨¡å¼å°†ä¸ºéœ€è¦æ›´å…¨é¢åŠŸèƒ½çš„ç”¨æˆ·é•¿æœŸæ”¯æŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Gateway API çš„æ”¯æŒ&lt;/strong&gt;ï¼šIstio å¯¹ Gateway API çš„æ”¯æŒï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´çµæ´»çš„è·¯ç”±ä¸ç­–ç•¥é…ç½®é€‰é¡¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Waypoints çš„ç­–ç•¥åº”ç”¨&lt;/strong&gt;ï¼šWaypoints ä¸å¿…å±€é™äº Istio æˆ– Envoyã€‚é€šè¿‡ä½¿ç”¨ Gateway API å’Œ GAMMAï¼Œä»»ä½•ç¬¦åˆæ ‡å‡†çš„å®ç°éƒ½å¯ä»¥ä½œä¸º Waypointï¼Œè¿™ä¸ºæœåŠ¡ç½‘æ ¼æä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;sandwich-waypoint&#34;&gt;Sandwich Waypoint&lt;/h3&gt;
&lt;p&gt;ä»–ä»¬ç€é‡ä»‹ç»äº† Sandwich Waypointï¼Œè¿™æ˜¯ä¸€ç§åœ¨ Istio å†…ç®¡ç†å’Œå¼•å¯¼æµé‡çš„å¤æ‚æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨ç¯å¢ƒæ¨¡å¼ä¸‹ã€‚è¿™ç§ Waypoint ä»£ç†æ¨¡å¼æ—¨åœ¨é€šè¿‡å……å½“å¤„ç†ã€è½¬æ¢å’Œè½¬å‘å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æµé‡çš„ä¸­ä»‹å±‚æ¥ç®€åŒ–å’Œæé«˜æµé‡è·¯ç”±çš„æ•ˆç‡ã€‚å®ƒåˆ©ç”¨äº†åŒ zTunnel è®¾ç½®ï¼Œå…¶ä¸­ä½äºé€šä¿¡é€šé“ä¸¤ç«¯çš„æ¯ä¸ª zTunnel åä½œå°è£…å’Œè§£ç æµé‡ã€‚Waypoint æœ¬èº«è´Ÿè´£æ‰§è¡Œé¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚æµé‡æ•´å½¢ã€å®‰å…¨æ£€æŸ¥å’Œåè®®è½¬æ¢ï¼Œä»è€Œåœ¨æ²¡æœ‰ä¼ ç»Ÿè¾¹è½¦å¼€é”€çš„æƒ…å†µä¸‹ä¸°å¯ŒæœåŠ¡ç½‘æ ¼åŠŸèƒ½ã€‚è¿™ç§æ–¹æ³•å…è®¸ Istio ä¿æŒå¼ºå¤§çš„æµé‡ç®¡ç†å’Œå®‰å…¨åŠŸèƒ½ï¼ŒåŒæ—¶ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡å¹¶å‡å°‘å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;Sandwich Waypoint æ”¯æŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµé‡é‡å®šå‘&lt;/strong&gt;ï¼šå¯é€šè¿‡è®¾ç½®  &lt;code&gt;istio.io/use-waypoint: {namespace}/{gateway-name}&lt;/code&gt; æ³¨è§£ï¼Œå°†ç›®æ ‡æœåŠ¡ã€Pod æˆ–å‘½åç©ºé—´å†…çš„æµé‡é‡å®šå‘åˆ°åŒä¸€ä¸ª Waypointã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Waypoint éƒ¨ç½²&lt;/strong&gt;ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª Gateway å¯¹è±¡æ¥éƒ¨ç½² Waypointã€‚ä¸åŸå§‹çš„ Waypoint å®ç°ä¸åŒï¼Œæ–°çš„éƒ¨ç½²æ–¹å¼å°†åŒ…æ‹¬ç›¸å…³è”çš„æœåŠ¡å’ŒæœåŠ¡è´¦æˆ·ï¼Œä¸ä»…ä»…æ˜¯ Waypoint å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±ä¸æ”¿ç­–é…ç½®&lt;/strong&gt;ï¼šä½¿ç”¨ Gateway API è¿›è¡Œè·¯ç”±å’Œæ”¿ç­–é…ç½®ï¼Œè¿™ä¸ºç”¨æˆ·å’Œä¾›åº”å•†æä¾›äº†æ›´å¤šçš„è‡ªå®šä¹‰é€‰é¡¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§ Istio Ambient æ¨¡å¼ä¸­æ•è·ä¸ƒå±‚æµé‡æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/kubecon-china-2024-recap/istio-ambient-traffic-capture.svg&#34; data-img=&#34;/blog/kubecon-china-2024-recap/istio-ambient-traffic-capture.svg&#34; alt=&#34;image&#34; data-caption=&#34;Sandwich Waypoint æ•è·æµé‡&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Sandwich Waypoint æ•è·æµé‡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;Istio Sandwich Waypoint æ•è·ä¸ƒå±‚æµé‡çš„æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡ zTunnel ç»ˆæ­¢ HBONE è¿æ¥ï¼Œåˆ°è¾¾ Waypointï¼ŒzTunnel è´Ÿè´£è§£ç  HBONE åè®®ã€‚&lt;/li&gt;
&lt;li&gt;Waypoint æå–ç›®çš„åœ°åœ°å€ã€æºåœ°å€ç­‰ä¿¡æ¯ç”¨äºå¤„ç†æµé‡åŠç¡®å®šè½¬å‘ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;Waypoint æ‰©å±•æˆ–è§£æä¼ è¾“å±‚å°è£…ï¼ˆTLVï¼‰æ•°æ®ï¼Œä»£ç†æ”¯æŒå¤„ç† TLV ä»¥æä¾›æ›´å¤šä¸Šä¸‹æ–‡ã€‚&lt;/li&gt;
&lt;li&gt;Waypoint ä¸åŒä½ zTunnel é€šä¿¡ï¼Œä¸æœåŠ¡ç«¯ zTunnel åè°ƒç¡®ä¿æµé‡æ­£ç¡®è½¬ç§»ã€‚&lt;/li&gt;
&lt;li&gt;å°è£… HBONEï¼Œç”±æœåŠ¡ç«¯ zTunnel å‘é€åˆ°æœ€ç»ˆæœåŠ¡å™¨ç›®çš„åœ°ã€‚å®ç° Istio ç¯å¢ƒä¸­æœåŠ¡çš„ç»†ç²’åº¦æµé‡ç®¡ç†å’Œè·¯ç”±å¹¶ä¿æŒä¸ç°æœ‰ç½‘ç»œåè®®å…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;envoy-gateway-çš„å‰æ²¿æ‰©å±•&#34;&gt;Envoy Gateway çš„å‰æ²¿æ‰©å±•&lt;/h2&gt;
&lt;p&gt;èµµåŒ–å†°åœ¨ KubeCon ä¸Šä»‹ç»äº† Envoy Gateway å¦‚ä½•é€šè¿‡æ‰©å±• Kubernetes Gateway API æ¥å¢å¼ºåŠŸèƒ½ä¸çµæ´»æ€§çš„&lt;a href=&#34;https://kccncossaidevchn2024.sched.com/event/1eYcX/gateway-api-and-beyond-introducing-envoy-gateways-gateway-api-extensions-jie-api-daeptao-envoyjie-zha-jie-api-huabing-zhao-tetrate&#34; title=&#34;æ¼”è®²&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¼”è®²&lt;/a&gt;ï¼Œæ¶µç›–äº†å¤šç§åŒ¹é…ä¸è·¯ç”±èƒ½åŠ›çš„æ‰©å±•ã€æ–°çš„èµ„æºå’Œç­–ç•¥æ¨¡å‹ä»¥åŠå®‰å…¨ç­–ç•¥çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘å…³ API å…¼å®¹æ€§&lt;/strong&gt;ï¼šEnvoy ç½‘å…³å®Œå…¨å…¼å®¹ç½‘å…³ APIï¼Œå¹¶æä¾›äº†å¹¿æ³›çš„åŒ¹é…å’Œè·¯ç”±é€‰é¡¹ã€‚è¿™äº›åŒ…æ‹¬ HTTP ä¸»æœºå’Œè·¯å¾„åŒ¹é…ã€åŸºäº HTTP å¤´çš„æ“ä½œã€æƒé‡è´Ÿè½½å‡è¡¡ï¼Œä»¥åŠå¯¹ gRPCã€UDP å’Œ TCP è·¯ç”±çš„æ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜çº§æµé‡ç®¡ç†ç­–ç•¥&lt;/strong&gt;ï¼šå¼•å…¥çš„ &lt;code&gt;ClientTrafficPolicy&lt;/code&gt; å’Œ &lt;code&gt;BackendTrafficPolicy&lt;/code&gt; ä¸ºç”¨æˆ·æä¾›äº†æ›´ç»†ç²’åº¦çš„æµé‡ç®¡ç†æ§åˆ¶ï¼Œé€‚ç”¨äºä¸Šæ¸¸å’Œä¸‹æ¸¸è¿æ¥ï¼ŒåŒ…æ‹¬å¦‚é™é€Ÿã€é‡è¯•ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ç­‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ä¸è®¤è¯å¢å¼º&lt;/strong&gt;ï¼šæ–°å¼•å…¥çš„ &lt;code&gt;SecurityPolicy&lt;/code&gt; æ”¯æŒ CORSã€HTTP åŸºç¡€è®¤è¯ã€OIDCã€JWT è®¤è¯ï¼Œå¹¶èƒ½ä¸å„ç§èº«ä»½æä¾›å•†é›†æˆã€‚å®ƒè¿˜æä¾›äº†è¯¦ç»†çš„è®¿é—®æ§åˆ¶ï¼Œå…è®¸æ ¹æ®è¯·æ±‚è€…çš„åŸå§‹ IPã€JWT å£°æ˜ç­‰è¿›è¡Œæˆæƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰æ‰©å±•åŠŸèƒ½&lt;/strong&gt;ï¼šEnvoy ç½‘å…³æ”¯æŒé€šè¿‡ WASMï¼ˆWebAssemblyï¼‰å’Œå¤–éƒ¨è¿›ç¨‹æ‰©å±•æ¥æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ã€‚è¿™å…è®¸ç”¨æˆ·é€šè¿‡é›†æˆä»–ä»¬è‡ªå·±ä¸ºç‰¹å®šç”¨ä¾‹å’Œæ“ä½œéœ€æ±‚é‡èº«å®šåˆ¶çš„æ‰©å±•æ¥å¢å¼ºç½‘å…³çš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥æ¢ç´¢&lt;/strong&gt;ï¼šæœªæ¥ç‰ˆæœ¬é¢„è®¡å°†æ”¯æŒé Kubernetes ç¯å¢ƒéƒ¨ç½²ï¼Œä¼˜åŒ–æ§åˆ¶å¹³é¢çš„å†…å­˜ä½¿ç”¨ï¼Œå¹¶æ‰©å±•æˆæƒèƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡æœ¬æ¬¡ä¼šè®®æˆ‘ä»¬äº†è§£äº† Istio çš„ Ambient æ¨¡å¼å’Œ Envoy Gateway çš„è¿›å±•ã€‚è¿™äº›æŠ€æœ¯çš„è®¨è®ºä¸ä»…å±•æœ›äº†æœªæ¥è¶‹åŠ¿ï¼Œä¹Ÿæä¾›äº†å®ç”¨çš„æ´å¯Ÿï¼ŒåŠ©åŠ›æŠ€æœ¯å®æ–½ä¸åˆ›æ–°ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä»é»‘ç¥è¯æ‚Ÿç©ºèŠèµ·ï¼šæˆ‘å¿ƒç›®ä¸­çš„ 3A å¤§ä½œ</title>
      <link>https://jimmysong.io/blog/black-myth-wukong-game-life/</link>
      <pubDate>Fri, 23 Aug 2024 14:47:39 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/black-myth-wukong-game-life/</guid>
      <description>
        
        
        &lt;p&gt;éšç€ 8 æœˆ 20 æ—¥ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„æ­£å¼å‘å”®ï¼Œç¬é—´ç‚¹ç‡ƒäº†ç©å®¶ä»¬å¯¹ 3A æ¸¸æˆæ— å°½çš„çƒ­æƒ…ä¸è®¨è®ºã€‚åœ¨è¿™ç¯‡éšç¬”ä¸­ï¼Œæˆ‘å°†æ¼«æ­¥äºè®°å¿†çš„é•¿å»Šï¼Œä»å­©ææ—¶ä»£çš„æŒä¸­ä¸–ç•Œåˆ°ä»Šæ—¥çš„æ¬¡ä¸–ä»£ä¸»æœºï¼Œç»†æ•°é‚£äº›é™ªä¼´æˆ‘çš„æ¸¸æˆæ—¶å…‰ï¼Œå¹¶æ·±å…¥æ¢è®¨æˆ‘å¿ƒç›®ä¸­ 3A å¤§ä½œçš„ç‹¬ç‰¹é­…åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘çš„æ¸¸æˆå…»æˆå²&#34;&gt;æˆ‘çš„æ¸¸æˆå…»æˆå²&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸­å›½ï¼Œæ¸¸æˆæ›¾ä¸€åº¦è¢«è§†ä¸ºæ•™è‚²çš„ç»Šè„šçŸ³ï¼Œæ˜¯å®¶é•¿çœ¼ä¸­çš„æ´ªæ°´çŒ›å…½ã€‚ç„¶è€Œï¼Œæ­£æ˜¯è¿™äº›çœ‹ä¼¼å¾®ä¸è¶³é“çš„æ¸¸æˆæœºï¼Œæ‚„ç„¶å¼€å¯äº†æˆ‘æ¢ç´¢æœªçŸ¥ä¸–ç•Œçš„å¥‡å¦™ä¹‹æ—…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŒä¸Šæ¸¸æˆæœº&#34;&gt;æŒä¸Šæ¸¸æˆæœº&lt;/h3&gt;
&lt;p&gt;åœ¨æˆ‘åå²å·¦å³ï¼Œæˆ‘è·å¾—äº†ä¸€ä¸ªç¬¬ä¸€å°æ¸¸æˆæœºï¼Œä¸€å°ç±»ä¼¼ Gameboy çš„æŒä¸Šæ¸¸æˆæœºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/gameboy.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/gameboy.webp&#34; alt=&#34;image&#34; data-caption=&#34;90 å¹´ä»£çš„æŒä¸Šæ¸¸æˆæœºï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œå¤å¤æ¸¸æˆæœºï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;90 å¹´ä»£çš„æŒä¸Šæ¸¸æˆæœºï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œå¤å¤æ¸¸æˆæœºï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘æœ€æ—©æ¥è§¦çš„æ¸¸æˆæœºï¼Œè¿˜æœ‰æˆ‘æœ€æ—©æ¥è§¦çš„æ¸¸æˆã€Šä¿„ç½—æ–¯æ–¹å—ã€‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¸¸æˆæœºå…&#34;&gt;æ¸¸æˆæœºå…&lt;/h3&gt;
&lt;p&gt;ä¹Ÿè¿›è¿‡æ¸¸æˆæœºå…ï¼Œå°å­¦æ—¶æ¯å¹´å¯’æš‘å‡å‰éƒ½è¦å†™ä¿è¯ä¹¦ï¼Œåå«ã€Šæš‘/å¯’å‡å…¬çº¦ã€‹ï¼Œå…¶ä¸­ä¸€å®šä¼šæœ‰ä¸€æ¡â€”â€”â€œä¸å»æ¸¸æˆæœºå…â€ã€‚æˆ‘åªå»è¿‡ä¸€ä¸¤æ¬¡ï¼Œè¿™äº›æ¸¸æˆæœºéœ€è¦æŠ•å¸ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/game-machine.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/game-machine.webp&#34; alt=&#34;image&#34; data-caption=&#34;ä¹åå¹´ä»£æ¸¸æˆæœºå…é‡Œçš„æ¸¸æˆæœºï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;ä¹åå¹´ä»£æ¸¸æˆæœºå…é‡Œçš„æ¸¸æˆæœºï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¿™ç±»æ¸¸æˆæœºä¸Šå¸¸ç©çš„æ¸¸æˆæ˜¯ã€Šè¡—å¤´éœ¸ç‹ï¼ˆStreet Fightersï¼‰ã€‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/street-fighter.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/street-fighter.webp&#34; alt=&#34;image&#34; data-caption=&#34;FC æ¸¸æˆï¼šè¡—å¤´éœ¸ç‹&#34;&gt;
  
  
  &lt;figcaption&gt;FC æ¸¸æˆï¼šè¡—å¤´éœ¸ç‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;å°éœ¸ç‹å­¦ä¹ æœº&#34;&gt;å°éœ¸ç‹å­¦ä¹ æœº&lt;/h3&gt;
&lt;p&gt;å°éœ¸ç‹å­¦ä¹ æœºï¼Œå¯ä»¥æ›´æ¢å¡å¸¦ï¼Œæ¥ä¸Šç”µè§†å°±èƒ½ç©ï¼Œé‚£æ—¶å€™ç»å¸¸ç”¨å®ƒç©é«˜æ¡¥åäººçš„ã€Šå†’é™©å²›ã€‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/xiaobawang.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/xiaobawang.webp&#34; alt=&#34;image&#34; data-caption=&#34;å°éœ¸ç‹å­¦ä¹ æœº&#34;&gt;
  
  
  &lt;figcaption&gt;å°éœ¸ç‹å­¦ä¹ æœº&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è™½ç„¶å·ç§°æ˜¯å­¦ä¹ æœºï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è§è¿‡æœ‰è°ç”¨å®ƒæ¥å­¦ä¹ çš„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/maoxiandao.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/maoxiandao.webp&#34; alt=&#34;image&#34; data-caption=&#34;FC æ¸¸æˆï¼šå†’é™©å²›&#34;&gt;
  
  
  &lt;figcaption&gt;FC æ¸¸æˆï¼šå†’é™©å²›&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;ç½‘å§&#34;&gt;ç½‘å§&lt;/h3&gt;
&lt;p&gt;ä¸–çºªä¹‹äº¤çš„æ—¶å€™ï¼Œç½‘å§å¼€å§‹å…´èµ·ï¼Œ2000 å¹´çš„æ—¶å€™æˆ‘æ‰ç¬¬ä¸€æ¬¡æ¥è§¦ç”µè„‘ï¼Œæš‘æœŸçš„æ—¶å€™è¿˜å‚åŠ ç”µè„‘åŸ¹è®­ï¼Œç»ƒä¹ è¿‡äº”ç¬”æ‰“å­—ï¼Œé‚£æ—¶å€™ä¹Ÿæ²¡å­¦ä¼šï¼Œå…‰é¡¾ç€ç©æ¸¸æˆäº†ï¼Œæˆ‘è®°å¾—é‚£æ—¶å€™è¿˜ä½¿ç”¨çš„æ˜¯ 3.5 è‹±å¯¸è½¯ç›˜ï¼Œæ“ä½œç³»ç»Ÿè¿˜æ˜¯ Windows 98ï¼Œä½¿ç”¨çš„æ˜¯ç¬¨é‡çš„ CRT æ˜¾ç¤ºå™¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/netbar.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/netbar.webp&#34; alt=&#34;image&#34; data-caption=&#34;90 å¹´ä»£æœ« 2000 å¹´åˆçš„ç½‘å§ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;90 å¹´ä»£æœ« 2000 å¹´åˆçš„ç½‘å§ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;2000 å¹´å·¦å³ï¼Œç”µè„‘ä¸Šçš„æ¸¸æˆæœ‰ã€Šçº¢è‰²è­¦æˆ’ã€‹ã€ã€Šæš´åŠ›æ‘©æ‰˜ã€‹ã€ã€Šä¸‰è§’æ´²éƒ¨é˜Ÿã€‹ã€ã€Šæ‹³çš‡ã€‹ï¼Œä½†æ˜¯æˆ‘æœ€å–œæ¬¢çš„è¿˜æ˜¯ã€Šçº¢è‰²è­¦æˆ’ 2ã€‹ï¼Œä» 2000 å¹´ä¸€ç›´åˆ° 2008 å¹´ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/red-alert.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/red-alert.webp&#34; alt=&#34;image&#34; data-caption=&#34;çº¢è‰²è­¦æˆ’ï¼ˆçº¢è­¦ 2ï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;çº¢è‰²è­¦æˆ’ï¼ˆçº¢è­¦ 2ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æœ€å¼€å§‹ç©çº¢è­¦çš„æ—¶å€™å¹´çºªè¿˜å°ï¼Œæ˜¯æˆ‘è‡ªå·±ä¸€ä¸ªäººæ¢ç´¢ç€ç©ï¼Œä¸€å¼€å§‹åšä»»åŠ¡ï¼Œç”šè‡³ä¸çŸ¥é“æ€æ ·å±•å¼€åŸºåœ°è½¦ï¼Œå› ä¸ºæ¸¸æˆæ˜¯ç¹ä½“å­—ï¼Œå¾ˆå¤šæˆ‘è¿˜çœ‹ä¸æ‡‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å•æœºæ¸¸æˆ2000---2008&#34;&gt;å•æœºæ¸¸æˆï¼š2000 - 2008&lt;/h3&gt;
&lt;p&gt;é™¤äº†çº¢è‰²è­¦æˆ’ä¹‹å¤–ï¼Œæˆ‘ç©è¿‡çš„æ¸¸æˆè¿˜æœ‰ã€Šåæç²¾è‹±ã€‹ã€ã€ŠåŠæ¡å‘½ã€‹ã€ã€Šæš—é»‘ç ´åç¥ã€‹ã€ã€Šä»™å‰‘å¥‡ä¾ ä¼ ã€‹ã€ã€Šé­”å…½äº‰éœ¸ã€‹ï¼Œä½†è¿™äº›æ¸¸æˆéƒ½ä¸æ˜¯æˆ‘çš„èœï¼Œå¤§å¤šä¹Ÿç©ä¸å¥½ï¼Œæˆ‘è¿˜æ˜¯é’Ÿæƒ…äºçº¢è­¦ï¼Œè¿˜æœ‰å®ƒçš„å„ç§ modã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç½‘ç»œæ¸¸æˆ2005---2008&#34;&gt;ç½‘ç»œæ¸¸æˆï¼š2005 - 2008&lt;/h3&gt;
&lt;p&gt;åœ¨å¼€å§‹ç©ç½‘ç»œæ¸¸æˆä¹‹å‰ï¼Œä»æ¥æ²¡æœ‰ä¸ºç©æ¸¸æˆèŠ±è¿‡é’±ï¼Œå› ä¸ºä¸­å›½çš„å„ç§ç›—ç‰ˆæ¸¸æˆæ³›æ»¥ï¼Œç½‘ä¸Šåˆ°å¤„éƒ½å¯ä»¥ä¸‹è½½åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹åå°±æ˜¯ç½‘æ¸¸çš„æ—¶ä»£äº†ï¼Œä»€ä¹ˆã€Šä¼ å¥‡ã€‹ã€ã€Šå¤§è¯è¥¿æ¸¸ã€‹ï¼Œè…¾è®¯çš„å„ç§æ¸¸æˆæ¯”å¦‚ã€Šæ³¡æ³¡å ‚ã€‹ã€ã€ŠåŠ²èˆå›¢ã€‹ã€ã€Šåœ°ä¸‹åŸä¸å‹‡å£«ã€‹ã€ã€ŠQQ é£è½¦ã€‹è¿™äº›æˆ‘éƒ½ç©è¿‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¼‘é—²æ¸¸æˆ2009---2013&#34;&gt;ä¼‘é—²æ¸¸æˆï¼š2009 - 2013&lt;/h3&gt;
&lt;p&gt;æ›¾ç»æœ‰ä¸€æ®µæ—¶é—´ï¼Œå¤§æ¦‚ 2008 åˆ° 2013 å¹´ï¼Œæ ¡å‹ç½‘ã€QQ ç©ºé—´ä¸Šè¯ç”Ÿçš„ç½‘é¡µæ¸¸æˆï¼Œæ¯”å¦‚ã€ŠæŠ¢è½¦ä½ã€‹ã€ã€Šå¼€å¿ƒå†œåœºã€‹ç­‰ç«çˆ†ä¸€æ—¶ï¼Œå¾ˆå¤šäººå®šé—¹é’Ÿå·èœï¼Œä¹Ÿè¯ç”Ÿäº†ä¸€äº›åšç½‘é¡µæ¸¸æˆçš„ç½‘ç«™ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€äº›æµè¡Œçš„ä¼‘é—²æ¸¸æˆï¼Œæ¯”å¦‚ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸ã€‹ä¹Ÿæ˜¯æˆ‘ç‰¹åˆ«å–œæ¬¢çš„ä¸€æ¬¾æ¸¸æˆã€‚è·Ÿå®ƒåŒæ—¶æœŸçš„ä¸€äº›æ¸¸æˆä¹Ÿä¸é”™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ‰‹æœºæ¸¸æˆ2014---2023&#34;&gt;æ‰‹æœºæ¸¸æˆï¼š2014 - 2023&lt;/h3&gt;
&lt;p&gt;ã€Šå¼€å¿ƒæ¶ˆæ¶ˆä¹ã€‹ã€ã€ŠåŸç¥ã€‹ã€ã€Šè¾å°„ï¼šé¿éš¾æ‰€ã€‹ã€‚ä¸è¿‡å¾ˆå¤šæµè¡Œçš„æ‰‹æœºæ¸¸æˆæ¯”å¦‚ã€Šç»åœ°æ±‚ç”Ÿã€‹ã€ã€Šç©¿è¶Šç«çº¿ã€‹æˆ‘éƒ½æ²¡æœ‰ç©è¿‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸»æœºæ¸¸æˆ2023-è‡³ä»Š&#34;&gt;ä¸»æœºæ¸¸æˆï¼š2023 è‡³ä»Š&lt;/h3&gt;
&lt;p&gt;ä» 2009 å¹´åˆ° 2023 å¹´å¯ä»¥è¯´æˆ‘å°±æ²¡æœ‰å†æ¥è§¦ä¸»æœºæ¸¸æˆå’Œç½‘æ¸¸äº†ï¼Œå¹³æ—¶ä¹Ÿå¾ˆå°‘ç©æ¸¸æˆï¼Œç›´åˆ° 2023 å¹´ 12 æœˆï¼Œæˆ‘è·å¾—äº†æˆ‘çš„ç¬¬ä¸€å°æ¸¸æˆä¸»æœº PS5ï¼Œæƒ…å†µæ‰å‘ç”Ÿäº†æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰æˆ‘æ›¾ç©è¿‡æœ‹å‹çš„ä»»å¤©å ‚ä¸»æœºï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å¾ˆå–œæ¬¢ä»»å¤©å ‚ä¸»æœºçš„æ¸¸æˆï¼Œç”»é¢è´¨é‡ï¼Œæ¸¸æˆç±»å‹éƒ½ä¸æ˜¯æˆ‘å–œçˆ±çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä»æˆ‘æ¥è§¦çš„ç¬¬ä¸€ä¸ª PS5 ä¸»æœºæ¸¸æˆã€ŠåŒäººæˆè¡Œã€‹å¼€å§‹ï¼Œæˆ‘å¯¹ä¸»æœºæ¸¸æˆç”šè‡³è¯´å¯¹ç”µå­æ¸¸æˆçš„çœ‹æ³•å¤§å¤§æ”¹è§‚äº†ã€‚ä¸€èµ·æˆ‘å¯¹å¤§éƒ¨åˆ†æ¸¸æˆéƒ½æä¸èµ·å…´è¶£ï¼Œæ„Ÿè§‰é‚£äº›æ¸¸æˆå°±æ˜¯æ‰“å‘æ‰“å‘æ—¶é—´ï¼Œç©ä¹…äº†å°±å¾ˆæ— èŠï¼Œä½†æ˜¯æ¥ä¸‹æ¥çš„å‡ æ¬¾æ¸¸æˆè®©æˆ‘ä½“éªŒåˆ°äº†ä»€ä¹ˆæ˜¯ 3A å¤§ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;3a-å¤§ä½œ&#34;&gt;3A å¤§ä½œ&lt;/h2&gt;
&lt;p&gt;åœ¨æ‹¥æœ‰äº† PS5 ä¹‹åï¼Œç©ä»€ä¹ˆæ¸¸æˆå°±æ˜¯ä¸€ä¸ªé—®é¢˜äº†ã€‚æˆ‘è®¢é˜…äº†äºŒæŒ¡ä¼šå‘˜ï¼Œæ‰€ä»¥èµ·åˆæˆ‘ä¸‹è½½å’Œç©äº†ä¸€äº›æ¸¸æˆåº“é‡Œçš„æ¸¸æˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŒäººæˆè¡Œ&#34;&gt;åŒäººæˆè¡Œ&lt;/h3&gt;
&lt;p&gt;ã€ŠåŒäººæˆè¡Œã€‹è¿™æ˜¯ä¸€ä¸ªå¿…é¡»ä¸¤ä¸ªäººé…åˆæ‰èƒ½å®Œæˆçš„æ¸¸æˆï¼Œé€šè¿‡ PS5 çš„æ‰‹æŸ„æ¥æ“æ§ï¼Œç»ˆäºè®©æˆ‘ä½“ä¼šåˆ°ç©æ¸¸æˆçš„å¿«æ„Ÿã€‚è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è´­ä¹°çš„å®ä½“æ¸¸æˆï¼Œæˆ‘è´­ä¹°äº†æ¸¸æˆå…‰ç›˜ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/it-takes-two.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/it-takes-two.webp&#34; alt=&#34;image&#34; data-caption=&#34;åŒäººæˆè¡Œ&#34;&gt;
  
  
  &lt;figcaption&gt;åŒäººæˆè¡Œ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;åœ°å¹³çº¿è¥¿ä¹‹ç»å¢ƒ&#34;&gt;åœ°å¹³çº¿ï¼šè¥¿ä¹‹ç»å¢ƒ&lt;/h3&gt;
&lt;p&gt;ã€Šåœ°å¹³çº¿ï¼šè¥¿ä¹‹ç»å¢ƒã€‹åœ¨ PlayStation çš„äºŒæŒ¡ä¼šå‘˜åº“é‡Œï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸‹è½½å’Œæ¸¸ç©äº†è¿™æ¬¾æ¸¸æˆã€‚è¿™æ¬¾æ¸¸æˆä»¥åºŸåœŸä¸–ç•Œçš„æ—§é‡‘å±±ä¸ºèƒŒæ™¯ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¥‡æ€å¦™æƒ³çš„æœªæ¥æœºæ¢°ç”Ÿç‰©ã€‚ä½†æ˜¯æˆ‘å¯¹å®ƒçš„å‰§æƒ…å’Œéƒ¨è½å®Œå…¨ä¸æ„Ÿå…´è¶£ï¼Œåªæ˜¯äº«å—å…¶ä¸­æ‰“æ–—çš„ä¹è¶£ï¼Œå› ä¸ºä¸»è§’å¯ä»¥ä½¿ç”¨çš„æ­¦å™¨å’ŒæŠ€èƒ½æœ‰å¾ˆå¤šã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/horizontal.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/horizontal.webp&#34; alt=&#34;image&#34; data-caption=&#34;åœ°å¹³çº¿ï¼šè¥¿ä¹‹ç»å¢ƒ&#34;&gt;
  
  
  &lt;figcaption&gt;åœ°å¹³çº¿ï¼šè¥¿ä¹‹ç»å¢ƒ&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;å¯¹é©¬å²›ä¹‹é­‚&#34;&gt;å¯¹é©¬å²›ä¹‹é­‚&lt;/h3&gt;
&lt;p&gt;ã€Šå¯¹é©¬å²›ä¹‹é­‚ã€‹ï¼Œæ•…äº‹å‘ç”Ÿåœ¨å¤ä»£æ—¥æœ¬çš„å¯¹é©¬å²›ï¼Œè™½ç„¶æ™¯è‰²å¾ˆç¾ï¼Œä½†æ˜¯æ‰“æ–—é£æ ¼åŠå‰§æƒ…è®©æˆ‘æä¸èµ·å…´è¶£ï¼Œä¸€ä¸ªæ—¥æœ¬äººåæŠ—è’™å¤ä¾µç•¥è€…çš„æ•…äº‹ï¼Œæˆ‘åªç©äº†å‡ ä¸ªå°æ—¶å°±å¸è½½äº†æ¸¸æˆã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/ghost-of-tsushima.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/ghost-of-tsushima.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¯¹é©¬å²›ä¹‹é­‚&#34;&gt;
  
  
  &lt;figcaption&gt;å¯¹é©¬å²›ä¹‹é­‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;èœ˜è››ä¾ miles-morales&#34;&gt;èœ˜è››ä¾ ï¼šMiles Morales&lt;/h3&gt;
&lt;p&gt;ã€Šèœ˜è››ä¾ ï¼šMiles Moralesã€‹ï¼Œä»¥çº½çº¦ä¸ºèƒŒæ™¯ï¼ŒåŒ–èº«èœ˜è››ä¾ åœ¨çº½çº¦çš„åŸå¸‚ä¸Šç©ºé£æ¥é£å»ï¼Œè¿˜æœ‰çˆ½å¿«çš„æ‰“æ–—ï¼Œç¡®å®æ˜¯ä¸€æ¬¾å¾ˆåˆºæ¿€çš„æ¸¸æˆï¼Œä½†æ˜¯æˆ‘å¯¹æ¼«ç”»äººç‰©ä¸ºä¸»è§’çš„æ¸¸æˆä¹Ÿä¸æ˜¯ç‰¹åˆ«å–œæ¬¢ï¼Œè¿™æ¬¾æ¸¸æˆçš„æ•…äº‹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¾ˆå¿«å°±é€šå…³äº†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/spiderman.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/spiderman.webp&#34; alt=&#34;image&#34; data-caption=&#34;èœ˜è››ä¾ ï¼šMiles Morales&#34;&gt;
  
  
  &lt;figcaption&gt;èœ˜è››ä¾ ï¼šMiles Morales&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æåœ°æˆ˜åš-6&#34;&gt;æåœ°æˆ˜åš 6&lt;/h3&gt;
&lt;p&gt;ã€Šæåœ°æˆ˜åš 6ã€‹ï¼Œæ˜¯ä¸€ä¸ªè™šæ„çš„ç°ä»£å›½å®¶ Yara ä¸ºèƒŒæ™¯ï¼ˆå®é™…ä¸Šæ˜¯æ˜ å°„å¤å·´ï¼‰çš„æ¸¸å‡»é˜ŸåæŠ—æ”¿åºœå†›çš„æ•…äº‹ï¼Œè¿™æ˜¯è‚²ç¢§æ——ä¸‹çš„æ¸¸æˆï¼Œå·²ç»å‡ºåˆ°ç¬¬å…­ä»£ï¼Œæœ‰ç‚¹åƒç½å¤´æ¸¸æˆï¼Œå®Œæˆä¸»çº¿ä»»åŠ¡ä¹Ÿå¾ˆå¿«ï¼Œæˆ‘å–œæ¬¢é‡Œé¢çš„å„ç§æªæ¢°å’Œé‡è·¯å­æ­¦å™¨ï¼Œå‰§æƒ…èƒ½å¤Ÿå‘äººæ·±çœã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/far-cry.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/far-cry.webp&#34; alt=&#34;image&#34; data-caption=&#34;æåœ°æˆ˜åš 6&#34;&gt;
  
  
  &lt;figcaption&gt;æåœ°æˆ˜åš 6&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;è’é‡å¤§é•–å®¢-2&#34;&gt;è’é‡å¤§é•–å®¢ 2&lt;/h3&gt;
&lt;p&gt;ã€Šè’é‡å¤§é•–å®¢ 2ã€‹æ˜¯ä»¥ 19 ä¸–çºªæœ«çš„ç¾å›½è¥¿éƒ¨ä¸ºèƒŒæ™¯ï¼Œç©äº†ä¸åˆ° 1 ä¸ªå°æ—¶ï¼Œå®åœ¨æ— æ³•å¸¦å…¥å‰§æƒ…ï¼Œå¯¹è¿™ä¸ªçš„æ•…äº‹å’ŒèƒŒæ™¯ä¹Ÿä¸æ„Ÿå…´è¶£ï¼Œç´¢æ€§ä¸ç©äº†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/red-dead-2.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/red-dead-2.webp&#34; alt=&#34;image&#34; data-caption=&#34;è’é‡å¤§é•–å®¢ 2&#34;&gt;
  
  
  &lt;figcaption&gt;è’é‡å¤§é•–å®¢ 2&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;è‰¾å°”ç™»æ³•ç¯&#34;&gt;è‰¾å°”ç™»æ³•ç¯&lt;/h3&gt;
&lt;p&gt;æˆ‘ç©è¿‡çš„æœ€åä¸€ä¸ª 3A å¤§ä½œæ˜¯ã€Šè‰¾å°”ç™»æ³•ç¯ã€‹ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ç©é­‚ç³»æ¸¸æˆï¼Œå…¶ä¸­çš„ä¸–ç•Œè§‚ï¼Œå¤æ‚çš„æŠ€èƒ½ç‚¹åŠ æˆï¼Œåºå¤§çš„åœ°å›¾ï¼Œå¼€æ”¾ä¸–ç•Œéƒ½ç»™æˆ‘é€ æˆå¾ˆå¤§çš„å›°æƒ‘ï¼Œå°¤å…¶æ˜¯å¼ºå¤§çš„æ€ªç‰©ï¼Œæˆ‘ä¸€å¼€å§‹ç©äº†å‡ ä¸ªå°æ—¶ï¼Œå°±æ­»è¿‡æ— æ•°æ¬¡ï¼Œè¢«å¤§æ ‘å®ˆå«å¾ˆè½»æ˜“å°±ç§’æ€ï¼Œç”šè‡³ä¸€ä¸ªæ™®é€šæ€ªç‰©ä¸‰ä¸¤ä¸‹å°±æŠŠæˆ‘å¹²æ‰ï¼Œæˆ‘æ„Ÿè§‰ç©è¿™ä¸ªæ¸¸æˆå¾ˆç—›è‹¦ï¼Œå®Œå…¨æ— æ³•ä½“ä¼šå…¶ä¸­çš„ä¹è¶£ï¼Œç›´åˆ°æˆ‘äº†è§£å¯ä»¥è´­ä¹°å¢æ©ï¼Œå°†è§’è‰²å‡çº§åˆ°æ»¡çº§ï¼Œç„¶åç©è¿™ä¸ªæ¸¸æˆå°±å¯ä»¥è½»æ¾å¾ˆå¤šã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/elden-ring.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/elden-ring.webp&#34; alt=&#34;image&#34; data-caption=&#34;è‰¾å°”ç™»æ³•ç¯&#34;&gt;
  
  
  &lt;figcaption&gt;è‰¾å°”ç™»æ³•ç¯&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¸ªæ¸¸æˆå¶å°”è¿˜æ˜¯ä¼šè®©äººæ„Ÿè§‰å¾ˆä¸é€‚ï¼Œå°¤å…¶æ˜¯å„ç§è¿·å®«ä¸€æ ·çš„å¢“åœ°ï¼Œé˜´æš—çš„ç¯å¢ƒï¼Œä¸‹æ°´é“ï¼Œæ¶å¿ƒçš„æ€ªç‰©ã€‚ä½†æ˜¯é¢å¯¹é‚£äº›å¼ºå¤§çš„æ€ªç‰©ï¼Œå½“æ—¶æ­»äº¡æ— æ•°æ¬¡åå°†å…¶æ‰“è´¥ï¼Œå¯ä»¥ä½“ä¼šåˆ°å…¶ä¸­çš„å¿«æ„Ÿï¼Œä»¥åŠæ¸¸æˆåºå¤§çš„åœ°å›¾ï¼Œç³ç…æ»¡ç›®çš„æ­¦å™¨ï¼Œæ˜¯æˆ‘åšæŒç©ä¸‹å»çš„åŠ¨åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯æˆ‘æƒ³è¦çš„-3a-æ¸¸æˆ&#34;&gt;ä»€ä¹ˆæ˜¯æˆ‘æƒ³è¦çš„ 3A æ¸¸æˆ&lt;/h2&gt;
&lt;p&gt;åœ¨ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹è¯ç”Ÿä¹‹å‰ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªè®©æˆ‘çœ¼å‰ä¸€äº®çš„ 3A å¤§ä½œï¼Œå®ƒçš„å‡ºç°å°±åƒä¸€é¢—é—ªè€€çš„æ–°æ˜Ÿã€‚ä¸‹é¢æˆ‘å°†è°ˆè°ˆä»€ä¹ˆæ˜¯æˆ‘å¿ƒç›®ä¸­çš„ 3A å¤§ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ·±å…¥çµé­‚çš„å™äº‹ç¯‡ç« &#34;&gt;æ·±å…¥çµé­‚çš„å™äº‹ç¯‡ç« &lt;/h3&gt;
&lt;p&gt;æˆ‘å¿ƒç›®ä¸­çš„ 3A å¤§ä½œï¼Œé¦–å…ˆå¿…é¡»æ‹¥æœ‰ä¸€æ®µæ·±å…¥äººå¿ƒçš„æ•…äº‹ã€‚å®ƒåº”å½“å¦‚åŒä¸€éƒ¨å®å¤§çš„å²è¯—ï¼Œè®©ç©å®¶åœ¨è·Œå®•èµ·ä¼çš„å‰§æƒ…ä¸­ä¸è§’è‰²åŒæ‚²å…±å–œï¼Œä½“éªŒä¸€æ®µæ®µéš¾å¿˜çš„æ—…ç¨‹ã€‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ä»¥å…¶ç‹¬ç‰¹çš„ä¸­å›½ç¥è¯èƒŒæ™¯ï¼Œæ­£æ˜¯æˆ‘æ‰€æœŸå¾…çš„é‚£ä¸€æŠ¹äº®è‰²ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è§†è§‰ä¸å¬è§‰çš„åŒé‡ç››å®´&#34;&gt;è§†è§‰ä¸å¬è§‰çš„åŒé‡ç››å®´&lt;/h3&gt;
&lt;p&gt;é«˜è´¨é‡çš„ç¾æœ¯ä¸éŸ³ä¹æ˜¯ 3A å¤§ä½œçš„å¦ä¸€å¤§äº®ç‚¹ã€‚ç²¾ç¾çš„ç”»é¢ã€é€¼çœŸçš„åœºæ™¯ã€ç»†è…»çš„è§’è‰²è®¾è®¡ï¼Œä»¥åŠåŠ¨äººå¿ƒå¼¦çš„èƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆï¼Œå…±åŒæ„å»ºäº†ä¸€ä¸ªä»¤äººå‘å¾€çš„è™šæ‹Ÿä¸–ç•Œã€‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„é¢„å‘Šç‰‡å·²ç»å±•ç°å‡ºäº†å…¶åœ¨è¿™æ–¹é¢çš„éå‡¡å®åŠ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµç•…æ“ä½œä¸æ— é™ç©æ³•&#34;&gt;æµç•…æ“ä½œä¸æ— é™ç©æ³•&lt;/h3&gt;
&lt;p&gt;æµç•…çš„æ“ä½œæ‰‹æ„Ÿä¸ä¸°å¯Œçš„æ¸¸æˆç©æ³•æ˜¯ 3A å¤§ä½œçš„åŸºçŸ³ã€‚æ— è®ºæ˜¯æˆ˜æ–—ç³»ç»Ÿçš„çˆ½å¿«æ„Ÿã€è§£è°œæœºåˆ¶çš„å·§å¦™è®¾è®¡ï¼Œè¿˜æ˜¯æ¢ç´¢å…ƒç´ çš„æ— é™å¯èƒ½ï¼Œéƒ½åº”è®©ç©å®¶åœ¨äº«å—æ¸¸æˆçš„è¿‡ç¨‹ä¸­æ„Ÿå—åˆ°æ— å°½çš„ä¹è¶£ä¸æŒ‘æˆ˜ã€‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ä½œä¸ºåŠ¨ä½œå†’é™©æ¸¸æˆï¼Œå…¶åœ¨è¿™æ–¹é¢çš„è¡¨ç°æ— ç–‘å€¼å¾—æœŸå¾…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ–‡åŒ–å†…æ¶µçš„æ·±åº¦æŒ–æ˜&#34;&gt;æ–‡åŒ–å†…æ¶µçš„æ·±åº¦æŒ–æ˜&lt;/h3&gt;
&lt;p&gt;å¯¹äºå›½å†…ç©å®¶è€Œè¨€ï¼Œæ¸¸æˆä¸­èå…¥çš„æ–‡åŒ–å†…æ¶µå¾€å¾€èƒ½å¼•å‘æ›´æ·±çš„å…±é¸£ä¸è®¤åŒã€‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ä»¥ä¸­å›½ç¥è¯ä¸ºèƒŒæ™¯ï¼Œä¸ä»…å±•ç°äº†ä¸°å¯Œçš„ä¼ ç»Ÿæ–‡åŒ–å…ƒç´ ï¼Œæ›´é€šè¿‡æ¸¸æˆè¿™ä¸€è½½ä½“å°†ä¸­åæ–‡åŒ–çš„é­…åŠ›ä¼ æ’­è‡³ä¸–ç•Œå„åœ°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŒç»­çš„åˆ›æ–°ä¸æ”¯æŒ&#34;&gt;æŒç»­çš„åˆ›æ–°ä¸æ”¯æŒ&lt;/h3&gt;
&lt;p&gt;ä¸€æ¬¾ä¼˜ç§€çš„ 3A å¤§ä½œä¸ä»…éœ€è¦åœ¨å‘å¸ƒæ—¶æƒŠè‰³å››åº§ï¼Œæ›´éœ€è¦åœ¨åç»­çš„å¼€å‘ä¸è¿è¥ä¸­ä¿æŒæ´»åŠ›ä¸åˆ›æ–°ã€‚æŒç»­çš„æ›´æ–°ä¸æ”¯æŒä¸ä»…èƒ½å¤Ÿä¸ºç©å®¶å¸¦æ¥æ–°é²œæ„Ÿä¸æƒŠå–œï¼Œæ›´æ˜¯æ¸¸æˆç”Ÿå‘½åŠ›çš„ä½“ç°ã€‚ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ä½œä¸ºå›½äº§ 3A çš„ä½¼ä½¼è€…ï¼Œå…¶åç»­çš„æ›´æ–°ä¸æ”¯æŒåŒæ ·å€¼å¾—æˆ‘ä»¬æœŸå¾…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹çš„å‘å¸ƒä¸ä»…æ˜¯å¯¹å›½äº§æ¸¸æˆçš„ä¸€æ¬¡é‡å¤§çªç ´ï¼Œæ›´æ˜¯å¯¹å…¨çƒæ¸¸æˆç•Œçš„ä¸€æ¬¡éœ‡æ’¼å®£è¨€ã€‚å®ƒè®©æˆ‘çœ‹åˆ°äº†å›½äº§ 3A å¤§ä½œçš„æ— é™å¯èƒ½ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/black-myth.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/black-myth-wukong-game-life/black-myth.webp&#34; alt=&#34;image&#34; data-caption=&#34;é»‘ç¥è¯ï¼šæ‚Ÿç©º&#34;&gt;
  
  
  &lt;figcaption&gt;é»‘ç¥è¯ï¼šæ‚Ÿç©º&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä»Šå¤©æˆ‘å°±è´­å…¥äº†ã€Šé»‘ç¥è¯ï¼šæ‚Ÿç©ºã€‹ï¼Œåœ¨æ¸¸ç©ä¸€æ®µæ—¶é—´åæˆ‘ä¼šå‘å¸ƒæ–°çš„åšå®¢è°ˆè°ˆæˆ‘çš„æ¸¸ç©ä½“éªŒã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>é›†æˆ Envoy Gateway ä½œä¸º Istio æœåŠ¡ç½‘æ ¼ä¸­çš„å…¥å£ç½‘å…³</title>
      <link>https://jimmysong.io/blog/envoy-gateway-integration-istio-mesh/</link>
      <pubDate>Tue, 13 Aug 2024 13:43:16 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/envoy-gateway-integration-istio-mesh/</guid>
      <description>
        
        
        &lt;p&gt;&lt;a href=&#34;https://istio.io&#34; title=&#34;Istio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; æä¾›äº†å¯¹å…¥å£ç½‘å…³çš„å¼ºå¤§è€Œçµæ´»çš„æ”¯æŒï¼Œåˆ©ç”¨ Envoy ä»£ç†åœ¨å…¶ sidecar æ¨¡å¼ä¸‹è¿è¡Œã€‚å°½ç®¡ Istio ä¸“æ³¨äºç®¡ç†é›†ç¾¤å†…æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œ&lt;a href=&#34;https://gateway.envoyproxy.io&#34; title=&#34;Envoy Gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway&lt;/a&gt; æ—¨åœ¨å°†åº”ç”¨ç¨‹åºæš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¹¶æ”¯æŒé«˜çº§åŠŸèƒ½ï¼Œå¦‚ OIDC å•ç‚¹ç™»å½•ã€‚é€šè¿‡ç»“åˆ Istio æœåŠ¡ç½‘æ ¼çš„åŠŸèƒ½å’Œ Envoy Gateway çš„é«˜çº§ç½‘å…³åŠŸèƒ½ï¼Œå¯ä»¥å¢å¼ºæ•´ä½“åº”ç”¨ç¨‹åºçš„å¯è®¿é—®æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†ä½¿ç”¨ &lt;a href=&#34;https://docs.tetrate.io/envoy-gateway/&#34; title=&#34;Tetrate Envoy Gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tetrate Envoy Gateway&lt;/a&gt; æ¥å®‰è£… Envoy Gatewayã€‚TEG æ˜¯ Tetrate çš„ä¼ä¸šçº§äº§å“ï¼Œå³ Envoy ç½‘å…³ï¼ˆEGï¼‰ï¼Œå®ƒåˆ©ç”¨ Kubernetes Gateway API æ¥ç®¡ç† Envoy å¹¶å…¬å¼€æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾æ˜¾ç¤ºäº†åœ¨ä½¿ç”¨ Ingress Gateway æ—¶ Istio ç½‘æ ¼ä¸­å…¥å£ç½‘å…³çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-ingress-sidecar.svg&#34; data-img=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-ingress-sidecar.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio å…¥å£ç½‘å…³æµé‡è·¯å¾„&#34;&gt;
  
  
  &lt;figcaption&gt;Istio å…¥å£ç½‘å…³æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹ä¸€ä¸ªå›¾è¡¨æ˜¾ç¤ºäº†åœ¨å¼•å…¥ TEG åï¼Œæµé‡å¦‚ä½•ä» Istio ç½‘æ ¼çš„è¾¹ç¼˜æµå…¥å†…éƒ¨ç½‘ç»œã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-teg-integration.svg&#34; data-img=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-teg-integration.svg&#34; alt=&#34;image&#34; data-caption=&#34;å¼•å…¥ Envoy Gateway åçš„æµé‡è·¯å¾„&#34;&gt;
  
  
  &lt;figcaption&gt;å¼•å…¥ Envoy Gateway åçš„æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;å‡†å¤‡-envoy-gateway-ä¸-istio-ä¹‹é—´çš„äº’æ“ä½œæ€§&#34;&gt;å‡†å¤‡ Envoy Gateway ä¸ Istio ä¹‹é—´çš„äº’æ“ä½œæ€§&lt;/h3&gt;
&lt;p&gt;è¦å°† Envoy Gateway ç”¨ä½œ Istio çš„å…¥å£ç½‘å…³ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Istio å®‰è£…æœŸé—´é¿å…å¯ç”¨å…¥å£ç½‘å…³ã€‚æˆ‘ä»¬å°†æ‰‹åŠ¨å®‰è£…å¹¶é…ç½® Envoy Gateway ä½œä¸ºå…¥å£ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äº Istio å’Œ Envoy Gateway éƒ½ä½¿ç”¨ Envoy ä½œä¸ºä»£ç†ï¼Œç¡®ä¿ Istio å°† Envoy sidecar æ³¨å…¥åˆ° Envoy Gateway çš„ç½‘å…³ Pod ä¸­ï¼Œä»¥å…è®¸ä¸ Istio çš„æ•°æ®å¹³é¢å®‰å…¨é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®ç”± Envoy Gateway åˆ›å»ºçš„ Envoy ä»£ç†çš„è·¯ç”±ç±»å‹ä¸º &lt;code&gt;Service&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;Endpoint&lt;/code&gt;ï¼Œä»¥ç¡®ä¿æ­£ç¡®è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒ‰ç…§ &lt;a href=&#34;https://docs.tetrate.io/envoy-gateway/installation/quickstart&#34; title=&#34;å¿«é€Ÿå¯åŠ¨æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¿«é€Ÿå¯åŠ¨æ–‡æ¡£&lt;/a&gt; å®‰è£… Envoy Gatewayã€‚æ ‡è®° Envoy Gateway çš„å‘½åç©ºé—´ä»¥ç¡®ä¿æ•°æ®å¹³é¢è·å¾— Istio sidecar æ³¨å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace envoy-gateway-system --overwrite&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½® Envoy Gateway çš„ sidecar ä»¥ä¸æ‹¦æˆªè¿›å…¥ç½‘å…³çš„æµé‡ã€‚æ³¨å…¥çš„ sidecar ç¡®ä¿ Envoy Gateway çš„ç»„ä»¶åŠå…¶åˆ›å»ºçš„ä»£ç†è¢«åŒ…å«åœ¨ Istio ç½‘æ ¼ä¸­ï¼Œå¹¶å®‰è£…æ­£ç¡®çš„è¯ä¹¦ä»¥è¿›è¡Œå®‰å…¨é€šä¿¡ã€‚&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;control-plane-tls.yaml&#34; download&gt;control-plane-tls.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;18000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;appProtocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨è¡¥ä¸ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl patch service -n envoy-gateway-system envoy-gateway --type strategic --patch-file control-plane-tls.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½® Envoy Gateway ä¸æ‹¦æˆªå…¥ç«™æµé‡ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;teg-sidecars-no-inbound.yaml&#34; download&gt;teg-sidecars-no-inbound.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.envoyproxy.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyProxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;data-plane-sidecars&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy-gateway-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Kubernetes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoyDeployment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;pod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;traffic.sidecar.istio.io/includeInboundPorts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;routingType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f teg-sidecars-no-inbound.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹ GatewayClass é…ç½®ä»¥å°† sidecar é…ç½®åº”ç”¨äº Envoy Gateway æ•°æ®å¹³é¢ä¸­çš„æ‰€æœ‰ &lt;code&gt;EnvoyProxy&lt;/code&gt;ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;gtwcls-use-envoyproxy.yaml&#34; download&gt;gtwcls-use-envoyproxy.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parametersRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.envoyproxy.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyProxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy-gateway-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;data-plane-sidecars&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨è¡¥ä¸ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl patch gatewayclass teg --patch-file gtwcls-use-envoyproxy.yaml --type merge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®‰è£…-istio&#34;&gt;å®‰è£… Istio&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ minimal é…ç½®æ–‡ä»¶éƒ¨ç½² Istio ä»¥é¿å…éƒ¨ç½²å…¥å£ç½‘å…³ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl install --set &lt;span class=&#34;nv&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;minimal -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é‡å¯-envoy-gateway-æ§åˆ¶å¹³é¢&#34;&gt;é‡å¯ Envoy Gateway æ§åˆ¶å¹³é¢&lt;/h3&gt;
&lt;p&gt;åœ¨ Istio çš„ sidecar æ³¨å…¥å‡†å¤‡å¥½åï¼Œé‡å¯æ‰€æœ‰ Envoy Gateway æ§åˆ¶å¹³é¢çš„ podï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; d in envoy-gateway envoy-ratelimit teg-envoy-gateway teg-redis&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; kubectl rollout restart deployment -n envoy-gateway-system &lt;span class=&#34;nv&#34;&gt;$d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;éƒ¨ç½²æµ‹è¯•åº”ç”¨ç¨‹åº&#34;&gt;éƒ¨ç½²æµ‹è¯•åº”ç”¨ç¨‹åº&lt;/h3&gt;
&lt;p&gt;åœ¨å®‰è£… Istio åéƒ¨ç½²æµ‹è¯•åº”ç”¨ç¨‹åºï¼Œä»¥ç¡®ä¿å®ƒä»¬ä¹Ÿæ¥æ”¶åˆ° sidecar æ³¨å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create namespace httpbin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace httpbin --overwrite&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -n httpbin -f https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®-envoy-gateway&#34;&gt;é…ç½® Envoy Gateway&lt;/h3&gt;
&lt;p&gt;ç°åœ¨é…ç½® Envoy Gateway ä»¥å¤„ç†è¾¹ç¼˜æµé‡ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;apps-gateway.yaml&#34; download&gt;apps-gateway.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;teg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f apps-gateway.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éƒ¨ç½²åº”ç”¨ç½‘å…³ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å®¹å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;istio-init&lt;/code&gt;ï¼šç”± Istio æ³¨å…¥ä»¥ä¿®æ”¹ pod iptablesã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;envoy&lt;/code&gt;ï¼šç”± Envoy Gateway æ§åˆ¶ï¼Œå……å½“å…¥å£ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;istio-proxy&lt;/code&gt;ï¼šç”± Istio æ³¨å…¥ï¼Œè´Ÿè´£ä¸å†…éƒ¨é›†ç¾¤ pod çš„é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shutdown-manager&lt;/code&gt;ï¼šç”± Envoy Gateway æ§åˆ¶ï¼Œè´Ÿè´£ pod ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ª HTTP è·¯ç”±ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;httpbin-route.yaml&#34; download&gt;httpbin-route.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.example.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/httpbin/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;URLRewrite&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;urlRewrite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.httpbin.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ReplacePrefixMatch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replacePrefixMatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨è·¯ç”±é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f httpbin-route.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å‘é€æµ‹è¯•è¯·æ±‚&#34;&gt;å‘é€æµ‹è¯•è¯·æ±‚&lt;/h3&gt;
&lt;p&gt;è·å–ç½‘å…³çš„è´Ÿè½½å¹³è¡¡å™¨ IP åœ°å€å¹¶å‘é€æµ‹è¯•è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get svc -n envoy-gateway-system -l gateway.envoyproxy.io/owning-gateway-name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;apps -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].status.loadBalancer.ingress[0].ip}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -v -H Host:www.example.com http://&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;/httpbin/get
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ åº”è¯¥èƒ½çœ‹åˆ°æ¥è‡ª &lt;code&gt;httpbin&lt;/code&gt; æœåŠ¡çš„æ­£ç¡®å“åº”ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;*   Trying 34.41.0.90:80...
* Connected to 34.41.0.90 (34.41.0.90) port 80
&amp;gt; GET /httpbin/get HTTP/1.1
&amp;gt; Host:www.example.com
&amp;gt; User-Agent: curl/8.7.1
&amp;gt; Accept: */*
&amp;gt;
* Request completely sent off
&amp;lt; HTTP/1.1 200 OK
&amp;lt; server: envoy
&amp;lt; date: Wed, 31 Jul 2024 08:21:58 GMT
&amp;lt; content-type: application/json
&amp;lt; content-length: 282
&amp;lt; access-control-allow-origin: *
&amp;lt; access-control-allow-credentials: true
&amp;lt; x-envoy-upstream-service-time: 11
&amp;lt;
{
  &amp;#34;args&amp;#34;: {},
  &amp;#34;headers&amp;#34;: {
    &amp;#34;Accept&amp;#34;: &amp;#34;*/*&amp;#34;,
    &amp;#34;Host&amp;#34;: &amp;#34;www.example.com&amp;#34;,
    &amp;#34;User-Agent&amp;#34;: &amp;#34;curl/8.7.1&amp;#34;,
    &amp;#34;X-Envoy-Attempt-Count&amp;#34;: &amp;#34;1&amp;#34;,
    &amp;#34;X-Envoy-External-Address&amp;#34;: &amp;#34;123.120.227.173&amp;#34;
  },
  &amp;#34;origin&amp;#34;: &amp;#34;123.120.227.173&amp;#34;,
  &amp;#34;url&amp;#34;: &amp;#34;http://www.example.com/get&amp;#34;
}
* Connection #0 to host 34.41.0.90 left intact
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å¯ç”¨ä¸¥æ ¼-mtls&#34;&gt;å¯ç”¨ä¸¥æ ¼ mTLS&lt;/h3&gt;
&lt;p&gt;é€šè¿‡åº”ç”¨ä»¥ä¸‹é…ç½®å¯ç”¨ä¸¥æ ¼ mTLSï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;strict-mtls.yaml&#34; download&gt;strict-mtls.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PeerAuthentication&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;istio-system&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mtls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;STRICT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f strict-mtls.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¸ºç½‘å…³å¯ç”¨-tls&#34;&gt;ä¸ºç½‘å…³å¯ç”¨ TLS&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºæœåŠ¡ç­¾åçš„æ ¹è¯ä¹¦å’Œç§é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir example_certs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -x509 -sha256 -nodes -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; -newkey rsa:2048 -subj &lt;span class=&#34;s1&#34;&gt;&amp;#39;/O=example Inc./CN=example.com&amp;#39;&lt;/span&gt; -keyout example_certs/example.com.key -out example_certs/example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸º &lt;code&gt;www.example.com&lt;/code&gt; åˆ›å»ºè¯ä¹¦å’Œç§é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -out example_certs/www.example.com.csr -newkey rsa:2048 -nodes -keyout example_certs/www.example.com.key -subj &lt;span class=&#34;s2&#34;&gt;&amp;#34;/CN=www.example.com/O=www organization&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -req -sha256 -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; -CA example_certs/example.com.crt -CAkey example_certs/example.com.key -set_serial &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; -in example_certs/www.example.com.csr -out example_certs/www.example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºå…¥å£ç½‘å…³åˆ›å»ºä¸€ä¸ªå¯†é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create -n httpbin secret tls httpbin-credential --key&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;example_certs/www.example.com.key --cert&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;example_certs/www.example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½®å…¥å£ç½‘å…³ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;tls-apps-gateway.yaml&#34; download&gt;tls-apps-gateway.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;teg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Terminate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certificateRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin-credential&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f tls-apps-gateway.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘é€æµ‹è¯•è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -v -H Host:www.example.com --resolve &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.example.com:443:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; --cacert example_certs/example.com.crt &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://www.example.com:443/httpbin/get&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ åº”è¯¥å¯ä»¥é€šè¿‡ HTTPS åœ¨ç½‘æ ¼å†…è®¿é—® &lt;code&gt;httpbin&lt;/code&gt; æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h3&gt;
&lt;p&gt;é€šè¿‡å°† Envoy Gateway é›†æˆä¸º Istio æœåŠ¡ç½‘æ ¼ä¸­çš„å…¥å£ç½‘å…³ï¼Œä½ å¯ä»¥åˆ©ç”¨ä¸¤è€…çš„ä¼˜åŠ¿ï¼šIstio çš„å¼ºå¤§æœåŠ¡ç½‘æ ¼èƒ½åŠ›å’Œ Envoy Gateway çš„é«˜çº§ç½‘å…³åŠŸèƒ½ã€‚è¿™ç§è®¾ç½®å¢å¼ºäº†ä½ çš„åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œæä¾›äº†æ— ç¼ä¸”å®‰å…¨çš„ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡ä»”ç»†çš„é…ç½®å’Œæ­£ç¡®çš„å·¥å…·ï¼Œç®¡ç†æœåŠ¡ç½‘æ ¼å†…å¤–çš„æµé‡å˜å¾—æ›´åŠ é«˜æ•ˆå’Œæœ‰æ•ˆï¼Œç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºå§‹ç»ˆå¯è®¿é—®å¹¶ä¸”å®‰å…¨ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>Istio é…ç½®å®‰å…¨ï¼šå¦‚ä½•é¿å…é”™è¯¯é…ç½®</title>
      <link>https://jimmysong.io/blog/istio-configuration-safety-common-misconfigurations/</link>
      <pubDate>Tue, 06 Aug 2024 11:03:02 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/istio-configuration-safety-common-misconfigurations/</guid>
      <description>
        
        
        &lt;p&gt;Istio æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆï¼Œæä¾›é›¶ä¿¡ä»»å®‰å…¨æ€§ã€å¯è§‚æµ‹æ€§å’Œé«˜çº§æµé‡ç®¡ç†ç­‰åŠŸèƒ½ï¼Œä¸”æ— éœ€ä¿®æ”¹ä»£ç å³å¯å®ç°ã€‚ç„¶è€Œï¼Œç”±äºé…ç½®é”™è¯¯ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚æœ¬æ–‡å°†ä»‹ç»å‡ ç§å¸¸è§çš„ Istio é…ç½®é”™è¯¯ï¼Œè§£æå…¶èƒŒåçš„åŸç†ï¼Œå¹¶é€šè¿‡ç¤ºæ„å›¾å±•ç¤ºå¦‚ä½•è¯†åˆ«å’Œè§£å†³è¿™äº›é—®é¢˜ã€‚æˆ‘ä»¬è¿˜å°†ä»‹ç» Tetrate æä¾›çš„å·¥å…·â€”â€”&lt;a href=&#34;https://docs.tetrate.io/istio-subscription/dashboard/analyzers/config&#34; title=&#34;TIS Config Analyzer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TIS Config Analyzer&lt;/a&gt;ï¼Œè¿™æ˜¯ä¸€ç§ä¼˜åŒ– Istio æ“ä½œæ•ˆç‡å’Œå®‰å…¨æ€§çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®é”™è¯¯å¯¼è‡´çš„äº‹æ•…æ¡ˆä¾‹&#34;&gt;é…ç½®é”™è¯¯å¯¼è‡´çš„äº‹æ•…æ¡ˆä¾‹&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸¤ä¸ªç”±äºé…ç½®é”™è¯¯å¯¼è‡´çš„å…¸å‹äº‹æ•…æ¡ˆä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://www.theverge.com/2017/3/2/14792442/amazon-s3-outage-cause-typo-internet-server&#34; title=&#34;Amazon Web Services 2017 å¹´åœæœºäº‹ä»¶&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Amazon Web Services 2017 å¹´åœæœºäº‹ä»¶&lt;/a&gt;&lt;/strong&gt;ï¼šä¸€æ¬¡ç®€å•çš„è¾“å…¥é”™è¯¯å¯¼è‡´äº†å¹¿æ³›çš„æœåŠ¡ä¸­æ–­ï¼Œå½±å“äº†æ•°åƒä¸ªåœ¨çº¿æœåŠ¡å’Œåº”ç”¨ï¼Œçªæ˜¾äº†å³ä½¿åœ¨æˆç†Ÿçš„äº‘åŸºç¡€è®¾æ–½ä¸­ï¼Œä¸€ä¸ªå°å°çš„é…ç½®é”™è¯¯ä¹Ÿä¼šå¼•å‘ä¸¥é‡åæœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://about.gitlab.com/blog/2017/02/01/gitlab-dot-com-database-incident/&#34; title=&#34;GitLab 2017 å¹´æ•°æ®ä¸¢å¤±äº‹æ•…&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitLab 2017 å¹´æ•°æ®ä¸¢å¤±äº‹æ•…&lt;/a&gt;&lt;/strong&gt;ï¼šç”±äºé…ç½®é”™è¯¯ï¼ŒGitLab åœ¨è¿›è¡Œæ•°æ®åº“ç»´æŠ¤æ—¶è¯¯åˆ é™¤äº†å¤§é‡ç”Ÿäº§æ•°æ®ã€‚å°½ç®¡å¤‡ä»½æœºåˆ¶è¢«é…ç½®å¥½ï¼Œä½†é”™è¯¯çš„é…ç½®é˜»æ­¢äº†æ•°æ®çš„åŠæ—¶æ¢å¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™äº›æ¡ˆä¾‹è¡¨æ˜ï¼Œæ­£ç¡®çš„é…ç½®ç®¡ç†å¯¹äºé˜²æ­¢æœåŠ¡ä¸­æ–­å’Œæ•°æ®ä¸¢å¤±è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¸¸è§çš„-istio-é…ç½®é”™è¯¯ç±»å‹&#34;&gt;å¸¸è§çš„ Istio é…ç½®é”™è¯¯ç±»å‹&lt;/h2&gt;
&lt;p&gt;Istio é…ç½®é”™è¯¯ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ å¤§ç±»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;AuthorizationPolicyï¼ˆæˆæƒç­–ç•¥ï¼‰&lt;/strong&gt;ï¼šå‘½åç©ºé—´ä¸å­˜åœ¨ã€ä»…å…è®¸ HTTP æ–¹æ³•å’Œå®Œå…¨é™å®šçš„ gRPC åç§°ã€ä¸»æœºæ²¡æœ‰åŒ¹é…çš„æœåŠ¡æ³¨å†Œè¡¨æ¡ç›®ã€å­—æ®µéœ€è¦å¯ç”¨ mTLSã€æœªæ‰¾åˆ°æœåŠ¡å¸æˆ·ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DestinationRuleï¼ˆç›®æ ‡è§„åˆ™ï¼‰&lt;/strong&gt;ï¼šåŒä¸€ä¸»æœºå­é›†ç»„åˆçš„å¤šä¸ªç›®æ ‡è§„åˆ™ã€ä¸»æœºåœ¨æœåŠ¡æ³¨å†Œè¡¨ä¸­æ²¡æœ‰åŒ¹é…æ¡ç›®ã€å­é›†æ ‡ç­¾åœ¨ä»»ä½•åŒ¹é…ä¸»æœºä¸­æœªæ‰¾åˆ°ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gatewayï¼ˆç½‘å…³ï¼‰&lt;/strong&gt;ï¼šåŒä¸€ä¸»æœºç«¯å£ç»„åˆçš„å¤šä¸ªç½‘å…³ã€ç½‘å…³é€‰æ‹©å™¨åœ¨å‘½åç©ºé—´ä¸­æœªæ‰¾åˆ°åŒ¹é…çš„å·¥ä½œè´Ÿè½½ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Portï¼ˆç«¯å£ï¼‰&lt;/strong&gt;ï¼šç«¯å£åç§°å¿…é¡»éµå¾ªç‰¹å®šæ ¼å¼ã€ç«¯å£çš„åº”ç”¨åè®®å¿…é¡»éµå¾ªç‰¹å®šæ ¼å¼ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Serviceï¼ˆæœåŠ¡ï¼‰&lt;/strong&gt;ï¼šæœªæ‰¾åˆ°æš´éœ²ä¸æœåŠ¡ç›¸åŒç«¯å£çš„éƒ¨ç½²ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VirtualServiceï¼ˆè™šæ‹ŸæœåŠ¡ï¼‰&lt;/strong&gt;ï¼šç›®æ ‡æƒé‡çš„è·¯ç”±æ²¡æœ‰æœ‰æ•ˆçš„æœåŠ¡ã€æŒ‡å‘ä¸å­˜åœ¨ç½‘å…³çš„è™šæ‹ŸæœåŠ¡ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¸¸è§çš„-istio-é…ç½®é”™è¯¯ç¤ºä¾‹&#34;&gt;å¸¸è§çš„ Istio é…ç½®é”™è¯¯ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;åœ¨ Istio çš„æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ€å¸¸è§çš„é…ç½®é”™è¯¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šæ‹ŸæœåŠ¡æŒ‡å‘ä¸å­˜åœ¨çš„ç½‘å…³ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;details&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bookinfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;details&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;non-existent-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;code&gt;details&lt;/code&gt; è™šæ‹ŸæœåŠ¡è¯•å›¾é€šè¿‡ä¸€ä¸ªä¸å­˜åœ¨çš„ &lt;code&gt;non-existent-gateway&lt;/code&gt; è¿›è¡Œè·¯ç”±ï¼Œå¯¼è‡´æµé‡ç®¡ç†å¤±è´¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šæ‹ŸæœåŠ¡å¼•ç”¨ä¸å­˜åœ¨çš„æœåŠ¡å­é›†ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;details&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bookinfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;details&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœ &lt;code&gt;details&lt;/code&gt; æœåŠ¡æ²¡æœ‰å®šä¹‰ç›¸åº”çš„å­é›†ï¼Œè¯·æ±‚å°†å› æ— æ³•æ‰¾åˆ°æ­£ç¡®çš„æœåŠ¡å®ä¾‹è€Œè¢«æ‹’ç»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç½‘å…³æ‰¾ä¸åˆ°æŒ‡å®šçš„æœåŠ¡å™¨å‡­è¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cert-not-found-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bookinfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SIMPLE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;credentialName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;not-exist&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¼šå¯¼è‡´ TLS æ¡æ‰‹å¤±è´¥ï¼Œå› ä¸ºæŒ‡å®šçš„å‡­è¯ &lt;code&gt;not-exist&lt;/code&gt; ä¸å­˜åœ¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é…ç½®éªŒè¯&#34;&gt;é…ç½®éªŒè¯&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å‡å°‘ç”±äºé…ç½®é”™è¯¯è€Œå¯¼è‡´çš„æœåŠ¡ä¸­æ–­é£é™©ï¼Œé…ç½®éªŒè¯æˆä¸ºäº†ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„æ­¥éª¤ã€‚é…ç½®éªŒè¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æ€é…ç½®éªŒè¯&lt;/strong&gt;ï¼šåœ¨é…ç½®åº”ç”¨åˆ°ç³»ç»Ÿä¹‹å‰è¿›è¡ŒéªŒè¯ã€‚è¿™åŒ…æ‹¬æ£€æŸ¥è¯­æ³•é”™è¯¯ã€å®Œæ•´æ€§ä»¥åŠé…ç½®é¡¹çš„æœ‰æ•ˆæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰éœ€é…ç½®éªŒè¯&lt;/strong&gt;ï¼šåœ¨é…ç½®å·²ç»åº”ç”¨ä½†å¯èƒ½éœ€è¦æ ¹æ®å®æ—¶æ•°æ®è¿›è¡Œè°ƒæ•´æ—¶è¿›è¡ŒéªŒè¯ã€‚è¿™ç§ç±»å‹çš„éªŒè¯æœ‰åŠ©äºé€‚åº”åŠ¨æ€ç¯å¢ƒä¸­çš„å˜åŒ–ï¼Œç¡®ä¿é…ç½®çš„æŒç»­æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ¨èçš„é…ç½®éªŒè¯å·¥å…·&#34;&gt;æ¨èçš„é…ç½®éªŒè¯å·¥å…·&lt;/h3&gt;
&lt;h4 id=&#34;istioctl-validate&#34;&gt;&lt;code&gt;istioctl validate&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;istioctl validate&lt;/code&gt; ç”¨äºéªŒè¯ Istio é…ç½®æ–‡ä»¶ï¼ˆå¦‚ YAML æ–‡ä»¶ï¼‰çš„è¯­æ³•å’ŒåŸºæœ¬ç»“æ„ï¼Œç¡®ä¿é…ç½®æ–‡ä»¶ç¬¦åˆ Istio API çš„è§„èŒƒã€‚å®ƒå¯ä»¥åœ¨é…ç½®åº”ç”¨åˆ°é›†ç¾¤ä¹‹å‰æ£€æµ‹å‡ºè¯­æ³•é”™è¯¯å’Œæ ¼å¼é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªé™æ€åˆ†æå·¥å…·ï¼Œé€šå¸¸ç»“åˆ CI æµç¨‹ä½¿ç”¨ï¼Œé˜²æ­¢æ— æ•ˆé…ç½®æ–‡ä»¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚&lt;/p&gt;
&lt;h4 id=&#34;istioctl-analyze&#34;&gt;&lt;code&gt;istioctl analyze&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://istio.io/latest/docs/ops/diagnostic-tools/istioctl-analyze/&#34; title=&#34;istioctl analyze&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;istioctl analyze&lt;/code&gt;&lt;/a&gt; æ˜¯ä¸€ä¸ªå¼ºå¤§çš„è¯Šæ–­å·¥å…·ï¼Œç”¨äºåˆ†æ Istio é›†ç¾¤çš„è¿è¡ŒçŠ¶æ€å’Œé…ç½®ä¸€è‡´æ€§ã€‚å®ƒä¸ä»…æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•ï¼Œè¿˜å¯ä»¥æ£€æŸ¥é›†ç¾¤ä¸­å®é™…åº”ç”¨çš„é…ç½®ï¼Œæ‰¾å‡ºæ½œåœ¨çš„é—®é¢˜å’Œå†²çªã€‚&lt;code&gt;istioctl analyze&lt;/code&gt; æä¾›åŠ¨æ€åˆ†æåŠŸèƒ½ï¼Œèƒ½å¤Ÿè¯†åˆ«é›†ç¾¤è¿è¡Œæ—¶çš„é…ç½®é”™è¯¯å’Œæ½œåœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;istioctl analyze&lt;/code&gt; çš„é…ç½®æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ”¶é›†é…ç½®æ•°æ®&lt;/strong&gt;ï¼šé¦–å…ˆï¼Œ&lt;code&gt;istioctl analyze&lt;/code&gt; æ”¶é›†æ¥è‡ªæŒ‡å®šæºçš„ Istio é…ç½®æ•°æ®ã€‚è¿™äº›æºå¯ä»¥æ˜¯æ´»åŠ¨çš„ Kubernetes é›†ç¾¤ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°çš„é…ç½®æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£æå’Œæ„å»ºæ¨¡å‹&lt;/strong&gt;ï¼šå·¥å…·è§£ææ”¶é›†çš„é…ç½®æ•°æ®ï¼Œæ„å»ºä¸€ä¸ªå†…éƒ¨è¡¨ç¤º Istio é…ç½®çš„æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åˆ†æè§„åˆ™&lt;/strong&gt;ï¼šéšåï¼Œå®ƒåº”ç”¨ä¸€ç³»åˆ—é¢„å®šä¹‰çš„è§„åˆ™æ¥åˆ†æè¿™ä¸ªæ¨¡å‹ï¼Œæ£€æµ‹æ½œåœ¨çš„é…ç½®é—®é¢˜ã€‚è¿™äº›è§„åˆ™æ¶µç›–ä»å®‰å…¨æ¼æ´åˆ°æ€§èƒ½é—®é¢˜çš„å„ç§æ½œåœ¨é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”ŸæˆæŠ¥å‘Š&lt;/strong&gt;ï¼šåˆ†æå®Œæˆåï¼Œ&lt;code&gt;istioctl analyze&lt;/code&gt; è¾“å‡ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å‘ç°é—®é¢˜çš„è¯¦ç»†æŠ¥å‘Šã€‚å¦‚æœæ²¡æœ‰å‘ç°é—®é¢˜ï¼Œå®ƒä¼šé€šçŸ¥ç”¨æˆ·é…ç½®çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ &lt;code&gt;istioctl analyze&lt;/code&gt; çš„å·¥ä½œæµç¨‹å›¾ï¼š&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/istio-configuration-safety-common-misconfigurations/4eb4d5bbb7c8856d609944835aa03993.svg&#34; data-img=&#34;/blog/istio-configuration-safety-common-misconfigurations/4eb4d5bbb7c8856d609944835aa03993.svg&#34; alt=&#34;image&#34; data-caption=&#34;istioctl analyze çš„å·¥ä½œæµç¨‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;istioctl analyze çš„å·¥ä½œæµç¨‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h4 id=&#34;kiali&#34;&gt;Kiali&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;https://kiali.io&#34; title=&#34;Kiali&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kiali&lt;/a&gt; æ˜¯ç®¡ç†å’Œå¯è§†åŒ– Istio æœåŠ¡ç½‘æ ¼çš„é‡è¦å·¥å…·ï¼Œæä¾›å¯¹ç½‘æ ¼å¥åº·çŠ¶å†µã€æ€§èƒ½å’Œé…ç½®çŠ¶æ€çš„å®æ—¶æ´å¯Ÿã€‚é€šè¿‡å°† Kiali é›†æˆåˆ° Istio ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¢å¼ºé…ç½®å®‰å…¨æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯è§†åŒ–&lt;/strong&gt;ï¼šKiali æä¾›æœåŠ¡ç½‘æ ¼çš„å›¾å½¢è¡¨ç¤ºï¼Œæ›´å®¹æ˜“å‘ç°é…ç½®é”™è¯¯ï¼Œå¦‚è·¯ç”±é”™è¯¯æˆ–ç¼ºå¤±çš„ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯&lt;/strong&gt;ï¼šæœ‰åŠ©äºéªŒè¯ Istio é…ç½®ï¼Œçªå‡ºæ˜¾ç¤ºå¦‚é…ç½®é”™è¯¯çš„ç½‘å…³æˆ–ç›®æ ‡è§„åˆ™ç­‰é—®é¢˜ï¼Œä»¥é˜²è¿™äº›é—®é¢˜å¼•èµ·éº»çƒ¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ´å¯Ÿ&lt;/strong&gt;ï¼šKiali æä¾›å¯¹å®‰å…¨ç­–ç•¥çš„å¯è§æ€§ï¼Œç¡®ä¿ mTLS å’Œæˆæƒè®¾ç½®æ­£ç¡®å®æ–½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°† Kiali ä¸ &lt;code&gt;istioctl validate&lt;/code&gt; å’Œ &lt;code&gt;istioctl analyze&lt;/code&gt; ç­‰å·¥å…·ç»“åˆä½¿ç”¨ï¼Œèƒ½ç¡®ä¿æ›´ä¸ºç¨³å¥çš„æ–¹æ³•æ¥é¢„é˜²å’Œè§£å†³ Istio é…ç½®é”™è¯¯ï¼Œè¿›è€Œæå‡æœåŠ¡ç½‘æ ¼çš„å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;tetrate-çš„-tis-ä¸­çš„-config-analyzer-å·¥å…·ä»‹ç»&#34;&gt;Tetrate çš„ TIS ä¸­çš„ Config Analyzer å·¥å…·ä»‹ç»&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©å¼€å‘è€…å’Œè¿ç»´äººå‘˜é¿å…å¸¸è§çš„é…ç½®å¤±è¯¯ï¼ŒTetrate å¼€å‘äº† TIS Dashboard ä¸­çš„ &lt;a href=&#34;https://docs.tetrate.io/istio-subscription/dashboard/analyzers/config&#34; title=&#34;Config Analyzer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Config Analyzer&lt;/a&gt; å·¥å…·ã€‚è¯¥å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨éªŒè¯ Istio çš„é…ç½®ï¼Œæ ¹æ®æœ€ä½³å®è·µåˆ†ææœåŠ¡ç½‘æ ¼çš„é…ç½®é—®é¢˜ï¼Œå¹¶æä¾›ä¼˜åŒ–å»ºè®®ã€‚Config Analyzer å¯ä»¥è‡ªåŠ¨æ£€æµ‹ Istio æœåŠ¡ç½‘æ ¼ä¸­çš„é…ç½®é—®é¢˜ï¼Œæä¾›è§£é‡ŠåŠè§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæŒ‰éœ€æ£€æµ‹é…ç½®ä¸­çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          
          &lt;picture&gt;
           &lt;source srcset=&#34;https://jimmysong.io/blog/istio-configuration-safety-common-misconfigurations/config-validate_hu_8833602f7b46d60b.webp&#34; type=&#34;image/webp&#34;&gt;
           &lt;img src=&#34;https://jimmysong.io/blog/istio-configuration-safety-common-misconfigurations/config-validate.png&#34; data-img=&#34;/blog/istio-configuration-safety-common-misconfigurations/config-validate.png&#34; data-width=&#34;3358&#34; data-height=&#34;1812&#34; alt=&#34;image&#34; data-caption=&#34;TIS Config Analyzer å¯ä»¥æŒ‰éœ€æ£€æµ‹é…ç½®ä¸­çš„é—®é¢˜&#34;&gt;
          &lt;/picture&gt;
        
      
    
  
  
  &lt;figcaption&gt;TIS Config Analyzer å¯ä»¥æŒ‰éœ€æ£€æµ‹é…ç½®ä¸­çš„é—®é¢˜&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ­£ç¡®é…ç½® Istio æ˜¯ç¡®ä¿æœåŠ¡ç½‘æ ¼å¥åº·è¿è¡Œçš„å…³é”®ã€‚é€šè¿‡äº†è§£å’Œé¿å…å¸¸è§é…ç½®é”™è¯¯ï¼Œä»¥åŠåˆ©ç”¨å¦‚ Tetrate çš„ TIS Config Analyzer è¿™æ ·çš„é«˜çº§å·¥å…·ï¼Œæ‚¨å¯ä»¥ç¡®ä¿ Istio ç¯å¢ƒçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚è®°ä½ï¼Œä¸€ä¸ªå°å°çš„é…ç½®é”™è¯¯å¯èƒ½å¯¼è‡´æ•´ä¸ªæœåŠ¡ç½‘æ ¼çš„æ•…éšœï¼Œå› æ­¤æŒç»­ç›‘æ§å’Œå®¡æ ¸é…ç½®æ˜¯éå¸¸å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kiali.io/docs/features/validations/&#34; title=&#34;Validation - kiali.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Validation - kiali.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>ä¿éšœ Istio å®‰å…¨ï¼šè§£å†³å…³é”®å®‰å…¨æ¼æ´åŠæœ€ä½³å®è·µ</title>
      <link>https://jimmysong.io/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/</link>
      <pubDate>Thu, 25 Jul 2024 14:09:37 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/</guid>
      <description>
        
        
        &lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;è¿‘æœŸï¼ŒWiz ç ”ç©¶å›¢é˜Ÿå‘å¸ƒäº†&lt;a href=&#34;https://jimmysong.io/trans/sapwned-sap-ai-vulnerabilities-ai-security/&#34; title=&#34;åšå®¢&#34;&gt;åšå®¢&lt;/a&gt;ï¼Œæ­ç¤ºäº† AI æœåŠ¡ä¸­çš„ç§Ÿæˆ·éš”ç¦»æ¼æ´ï¼Œå¼•èµ·äº†å¹¿æ³›å…³æ³¨ã€‚è¯¥ç ”ç©¶è¯¦ç»†é˜è¿°äº†å¤šä¸ª AI æœåŠ¡ä¾›åº”å•†å­˜åœ¨çš„å®‰å…¨ç¼ºé™·ï¼Œç‰¹åˆ«æ˜¯ SAP AI Core å¹³å°ã€‚é€šè¿‡åˆæ³•çš„ AI è®­ç»ƒè¿‡ç¨‹ï¼Œç ”ç©¶äººå‘˜èƒ½å¤Ÿç»•è¿‡ Istio æœåŠ¡ç½‘æ ¼ä¸­çš„æµé‡åŠ«æŒï¼Œè¿›è€Œæ¨ªå‘ç§»åŠ¨å¹¶æ¥ç®¡æœåŠ¡ï¼Œè·å–å®¢æˆ·çš„ç§äººæ–‡ä»¶å’Œäº‘ç¯å¢ƒå‡­è¯ã€‚è¿™äº›å‘ç°å‡¸æ˜¾äº†å½“ä»Šäº‘æœåŠ¡å’Œç®¡ç†å¹³å°åœ¨ç¡®ä¿éš”ç¦»å’Œæ²™ç›’ç¯å¢ƒæ–¹é¢é¢ä¸´çš„æŒ‘æˆ˜ã€‚&lt;/p&gt;



&lt;div class=&#34;alert alert-tip-container&#34;&gt;
  
  &lt;div class=&#34;alert-tip-title px-2 py-2&#34;&gt;
    å…³äº UID 1337
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-tip px-2&#34;&gt;
    Istio é€‰æ‹© UID 1337ï¼ˆleet çš„å˜ä½“ï¼‰ä½œä¸º &lt;code&gt;istio-proxy&lt;/code&gt; å®¹å™¨ä¸­çš„ç”¨æˆ· ID æ˜¯ä¸ºäº†ä¾¿äºé…ç½®å¹¶é¿å…æƒé™å†²çªã€‚è¿™ä¸ªæ•°å­—åœ¨æŠ€æœ¯å’Œæ¸¸æˆæ–‡åŒ–ä¸­è±¡å¾â€œç²¾è‹±â€ï¼ˆeliteï¼‰ï¼Œæœ‰åŠ©äºé˜²æ­¢ä¸å…¶ä»–å¸¸è§„ç”¨æˆ· ID å†²çªï¼Œç¡®ä¿æµé‡ç®¡ç†æ“ä½œä¸å—æƒé™é—®é¢˜å¹²æ‰°ã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼ŒIstio ä½œä¸ºä¸€ä¸ªé‡è¦çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆï¼ŒåŒæ ·é¢ä¸´ç€ç±»ä¼¼çš„å®‰å…¨é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨ sidecar æ³¨å…¥å’Œæµé‡ç®¡ç†ç­‰å…³é”®åŠŸèƒ½ä¸Šã€‚è¿™ç¯‡åšå®¢æ—¨åœ¨æ¢è®¨å¦‚ä½•ä¿æŠ¤ Istio æœåŠ¡ç½‘æ ¼çš„å®‰å…¨ï¼Œå¹¶æä¾›ä¸€å¥—å…¨é¢çš„ç¼“è§£æªæ–½ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºå¤šå±‚å®‰å…¨ç­–ç•¥å¦‚ä½•æœ‰æ•ˆå¢å¼º Istio çš„å®‰å…¨æ€§ï¼Œä»¥åº”å¯¹ç±»ä¼¼ Wiz æŠ¥å‘Šä¸­æåˆ°çš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¦‚è¿°&#34;&gt;æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;Istio ä¸»è¦ç”¨äºç®¡ç† Kubernetes ä¸­çš„ä¸œè¥¿å‘æµé‡ï¼Œæä¾›è¯¦ç»†çš„æµé‡ç®¡ç†åŠŸèƒ½ï¼Œå¦‚è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ç­–ç•¥ã€‚è™½ç„¶ Istio æä¾›äº†æµé‡åŠ å¯†ã€è®¤è¯å’Œæˆæƒç­‰å®‰å…¨åŠŸèƒ½ï¼Œä½†å®ƒæœ¬èº«ä¸åº”è¢«è§†ä¸ºé˜²ç«å¢™ã€‚ä¸ºäº†ç¡®ä¿ Istio ç½‘æ ¼ä¸­çš„æœåŠ¡å®‰å…¨ï¼Œé™¤äº†ä½¿ç”¨ Istio è‡ªèº«çš„å®‰å…¨åŠŸèƒ½ï¼Œè¿˜éœ€è¦ç»“åˆåº•å±‚ç½‘ç»œå’ŒåŸºç¡€è®¾æ–½çš„å®‰å…¨æªæ–½ï¼Œæ¯”å¦‚ CNI å’Œå®‰å…¨å®¹å™¨ã€‚æ­¤å¤–ï¼Œå¾®åˆ†æ®µæŠ€æœ¯å¯ä»¥ç”¨æ¥å®ç°æ›´ç»†ç²’åº¦çš„éš”ç¦»ï¼Œæé«˜å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è®ºæ˜¯ Sidecar æ¨¡å¼è¿˜æ˜¯ Ambient æ¨¡å¼ï¼Œéƒ½æ˜¯é€šè¿‡åŠ«æŒåº”ç”¨ç¨‹åº Pod çš„æµé‡åˆ°æ•°æ®å¹³é¢ä»£ç†ä¸­è¿›è¡Œå¤„ç†å’Œè½¬å‘çš„ã€‚å¦‚æœæ²¡æœ‰æˆåŠŸæ‹¦æˆªåˆ°åº”ç”¨ç¨‹åºæµé‡æˆ–è€…è¢«ä»¿å†’ç¨‹åºå†’å……äº† Istio è€Œæ‰§è¡Œæ“ä½œï¼Œå°±ä¼šæœ‰å®‰å…¨æ¼æ´å‡ºç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†é€šè¿‡ç»•è¿‡æˆ–ä»¿å†’ Istio ç³»ç»Ÿç”¨æˆ·è€Œé€ æˆçš„å®‰å…¨æ¼æ´å­˜åœ¨çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/bypass-sidecar-traffic-hijack.svg&#34; data-img=&#34;/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/bypass-sidecar-traffic-hijack.svg&#34; alt=&#34;image&#34; data-caption=&#34;èƒ½å¤Ÿç»•è¿‡ Istio ä¸­æµé‡åŠ«æŒçš„â€œå®‰å…¨æ¼æ´&amp;#34;&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;èƒ½å¤Ÿç»•è¿‡ Istio ä¸­æµé‡åŠ«æŒçš„â€œå®‰å…¨æ¼æ´&#34;&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢è®¨â€œå®‰å…¨æ¼æ´â€äº§ç”Ÿçš„å…·ä½“æƒ…å†µåŠåº”å¯¹ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»•è¿‡-istio-sidecar-æ³¨å…¥&#34;&gt;ç»•è¿‡ Istio Sidecar æ³¨å…¥&lt;/h2&gt;
&lt;h3 id=&#34;åœ¨å‘½åç©ºé—´çº§åˆ«ç¦ç”¨æ³¨å…¥&#34;&gt;åœ¨å‘½åç©ºé—´çº§åˆ«ç¦ç”¨æ³¨å…¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿæ»¥ç”¨å‘½åç©ºé—´æ ‡ç­¾ï¼Œåœ¨å‘½åç©ºé—´çº§åˆ«ç¦ç”¨ Istio Sidecar æ³¨å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜ŸæŠ½è±¡åŒ–åº”ç”¨éƒ¨ç½²ï¼Œé™åˆ¶å¯¹åŸå§‹ Kubernetes å‘½åç©ºé—´èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šä½¿ç”¨ç­–ç•¥å¼•æ“ï¼ˆå¦‚ OPA Gatekeeperï¼‰æ¥ç¡®ä¿å‘½åç©ºé—´æ ‡ç­¾çš„åˆè§„æ€§ï¼Œå®šæœŸå®¡æŸ¥å‘½åç©ºé—´çš„é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åœ¨-pod-çº§åˆ«ç¦ç”¨æ³¨å…¥&#34;&gt;åœ¨ Pod çº§åˆ«ç¦ç”¨æ³¨å…¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿæ»¥ç”¨ Pod æ ‡ç­¾ï¼Œåœ¨ Pod çº§åˆ«ç¦ç”¨ Istio Sidecar æ³¨å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜ŸæŠ½è±¡åŒ–åº”ç”¨éƒ¨ç½²ï¼Œé™åˆ¶å¯¹åŸå§‹ Kubernetes Pod èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šä½¿ç”¨ Admission Webhook å¼ºåˆ¶å¯ç”¨ Sidecar æ³¨å…¥ï¼Œç¦æ­¢ä½¿ç”¨æ’é™¤æ ‡ç­¾ï¼Œå®šæœŸæ‰«æå’Œå®¡è®¡æ‰€æœ‰ Podï¼Œç¡®ä¿æ‰€æœ‰éœ€è¦çš„ Pod éƒ½æ³¨å…¥äº† Sidecarã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç»•è¿‡æµé‡é‡å®šå‘åˆ°-istio-sidecar&#34;&gt;ç»•è¿‡æµé‡é‡å®šå‘åˆ° Istio Sidecar&lt;/h2&gt;
&lt;h3 id=&#34;æ»¥ç”¨æµé‡é‡å®šå‘æ³¨è§£&#34;&gt;æ»¥ç”¨æµé‡é‡å®šå‘æ³¨è§£&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿæ»¥ç”¨ Pod æ³¨è§£ï¼Œæ’é™¤ç‰¹å®šçš„å…¥ç«™æˆ–å‡ºç«™ç«¯å£æˆ– IP åœ°å€ï¼Œä»è€Œç»•è¿‡æµé‡é‡å®šå‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜ŸæŠ½è±¡åŒ–åº”ç”¨éƒ¨ç½²ï¼Œé™åˆ¶å¯¹åŸå§‹ Kubernetes Pod èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šä½¿ç”¨ç­–ç•¥å¼•æ“æ¥æ£€æµ‹å’Œè­¦å‘Šä¸åˆè§„çš„æ³¨è§£ä½¿ç”¨ï¼Œå®šæœŸå®¡æŸ¥ Pod æ³¨è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»¥ç”¨-pod-çš„-uid&#34;&gt;æ»¥ç”¨ Pod çš„ UID&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿæ»¥ç”¨ UID 1337ï¼ˆsidecar ä»£ç†çš„ IDï¼‰ï¼Œç»•è¿‡ Istio Iptables é‡å®šå‘è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¼ºåˆ¶æ‰€æœ‰ Pod æŒ‡å®šé 1337 çš„ UIDã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æ‰€æœ‰å®¹å™¨é•œåƒä»¥æ£€æŸ¥ UID 1337 å¹¶æ‹’ç»è¿™äº›é•œåƒã€‚æ­¤æ£€æŸ¥å¯ä»¥ä½¿ç”¨å‡†å…¥ Webhook æˆ–ç”±ç®¡ç†é•œåƒæ³¨å†Œè¡¨çš„ä¸­å¤®å›¢é˜Ÿæ¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šç¦ç”¨æˆ–é™åˆ¶ UID 1337 çš„ä½¿ç”¨ï¼Œå®šæœŸå®¡è®¡ Pod çš„ UID é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ç»•è¿‡è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»¥ç”¨-pod-èƒ½åŠ›net_adminnet_raw&#34;&gt;æ»¥ç”¨ Pod èƒ½åŠ›ï¼ˆNET_ADMINã€NET_RAWï¼‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿæ»¥ç”¨ NET_ADMIN å’Œ NET_RAW èƒ½åŠ›ï¼Œç§»é™¤ Istio Iptables è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿå¯ç”¨ Istio CNIï¼ˆä»¥é¿å…æˆäºˆåº”ç”¨å›¢é˜Ÿæå‡çš„æƒé™ï¼‰ï¼Œå¹¶é™åˆ¶å¯¹åŸå§‹ Kubernetes Pod èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥å’Œç›‘æ§ Pod çš„æƒé™é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰è¶Šæƒè¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç»•è¿‡å…¥ç«™æµé‡çº¦æŸ&#34;&gt;ç»•è¿‡å…¥ç«™æµé‡çº¦æŸ&lt;/h2&gt;
&lt;h3 id=&#34;æ»¥ç”¨-peerauthentication&#34;&gt;æ»¥ç”¨ PeerAuthentication&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿåˆ›å»ºä¸€ä¸ªé’ˆå¯¹æ¯ä¸ªå‘½åç©ºé—´/æ¯ä¸ªå·¥ä½œè´Ÿè½½çš„ PeerAuthentication èµ„æºï¼Œå¯ç”¨ PERMISSIVE è®¤è¯æ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿé™åˆ¶å¯¹åŸå§‹ Istio PeerAuthentication èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥ PeerAuthentication é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰å…¥ç«™æµé‡éƒ½æŒ‰ç…§è¦æ±‚åŠ å¯†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç»•è¿‡å‡ºç«™æµé‡çº¦æŸ&#34;&gt;ç»•è¿‡å‡ºç«™æµé‡çº¦æŸ&lt;/h2&gt;
&lt;h3 id=&#34;æ»¥ç”¨-serviceentry&#34;&gt;æ»¥ç”¨ ServiceEntry&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿåˆ›å»ºä¸€ä¸ª ServiceEntryï¼Œç›´æ¥è®¿é—®å¤–éƒ¨æœåŠ¡ï¼Œè€Œæ— éœ€ç»è¿‡ Egress ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿé™åˆ¶å¯¹åŸå§‹ Istio ServiceEntry èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥ ServiceEntry é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ç»•è¿‡è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»¥ç”¨-externalname-æœåŠ¡&#34;&gt;æ»¥ç”¨ ExternalName æœåŠ¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º ExternalName çš„ Kubernetes Serviceï¼Œç›´æ¥è®¿é—®å¤–éƒ¨æœåŠ¡ï¼Œè€Œæ— éœ€ç»è¿‡ Egress ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿé™åˆ¶å¯¹åŸå§‹ Kubernetes Service èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥ Kubernetes Service çš„ç±»å‹é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ç»•è¿‡è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ— æ³•æ§åˆ¶åœ°æ›´æ”¹-istio-sidecar-é…ç½®&#34;&gt;æ— æ³•æ§åˆ¶åœ°æ›´æ”¹ Istio Sidecar é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;æ»¥ç”¨-sidecar-èµ„æº&#34;&gt;æ»¥ç”¨ Sidecar èµ„æº&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿåˆ›å»ºä¸€ä¸ªé’ˆå¯¹æ¯ä¸ªå·¥ä½œè´Ÿè½½çš„ Istio Sidecar èµ„æºï¼Œå¹¶å°† &lt;code&gt;outboundTrafficPolicy&lt;/code&gt; å­—æ®µè®¾ç½®ä¸º &lt;code&gt;ALLOW_ANY&lt;/code&gt;ï¼ˆè¦†ç›–å¯èƒ½çš„å…¨å±€å€¼ &lt;code&gt;REGISTRY_ONLY&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿé™åˆ¶å¯¹åŸå§‹ Istio Sidecar èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥ Sidecar èµ„æºé…ç½®ï¼Œç¡®ä¿æ²¡æœ‰è¦†ç›–å…¨å±€è®¾ç½®çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ»¥ç”¨-envoyfilter&#34;&gt;æ»¥ç”¨ EnvoyFilter&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šåº”ç”¨å›¢é˜Ÿåˆ›å»º EnvoyFilterï¼Œå¯¼è‡´ä¸ç°æœ‰ Istio å¯¹è±¡å†²çªï¼Œä»è€Œå¼•å‘ DoS æ”»å‡»æˆ–è¿åå®‰å…¨ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“è§£ç­–ç•¥&lt;/strong&gt;ï¼šå¹³å°å›¢é˜Ÿé™åˆ¶å¯¹åŸå§‹ Istio EnvoyFilter èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šå®šæœŸå®¡æŸ¥ EnvoyFilter é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ä¸å½“ä½¿ç”¨è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æœåŠ¡ç½‘æ ¼åº”ä½œä¸ºåˆ†å±‚é˜²å¾¡çš„ä¸€éƒ¨åˆ†&#34;&gt;æœåŠ¡ç½‘æ ¼åº”ä½œä¸ºåˆ†å±‚é˜²å¾¡çš„ä¸€éƒ¨åˆ†&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼è¢«æè¿°ä¸ºç°æœ‰å®‰å…¨æ¨¡å‹çš„ä¸€ä¸ªè¡¥å……å±‚ï¼Œé€šè¿‡åœ¨ä¼ ç»Ÿå®‰å…¨æ§åˆ¶ä¹‹ä¸Šæ·»åŠ æ›´ç»†ç²’åº¦çš„å®‰å…¨ç­–ç•¥æ¥å¢å¼ºå¾®æœåŠ¡çš„å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œæ–‡ç« å¼ºè°ƒäº†æœåŠ¡ç½‘æ ¼æ— æ³•ç‹¬ç«‹ä¿éšœå¾®æœåŠ¡çš„å…¨é¢å®‰å…¨ï¼Œè€Œæ˜¯åº”å½“ä½œä¸ºæ•´ä½“å®‰å…¨ç­–ç•¥çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/security-layers.svg&#34; data-img=&#34;/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/security-layers.svg&#34; alt=&#34;image&#34; data-caption=&#34;å¾®æœåŠ¡å®‰å…¨åˆ†å±‚æ¶æ„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¾®æœåŠ¡å®‰å…¨åˆ†å±‚æ¶æ„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼ä¸»è¦é€šè¿‡åœ¨æ¯ä¸ªæœåŠ¡å®ä¾‹æ—éƒ¨ç½²ä¸€ä¸ªè½»é‡çº§çš„ä»£ç†ï¼ˆsidecarï¼‰ï¼Œæ¥ç®¡ç†å’Œæ§åˆ¶ç½‘ç»œæµé‡ã€‚è¿™ä½¿å¾—å®ƒèƒ½å¤Ÿåœ¨ç½‘ç»œå±‚é¢ä¸Šå®ç°ç²¾ç»†çš„æµé‡æ§åˆ¶å’Œç­–ç•¥æ‰§è¡Œï¼Œå¦‚æµé‡åŠ å¯†ã€èº«ä»½è®¤è¯å’Œæˆæƒã€‚å°½ç®¡æœåŠ¡ç½‘æ ¼èƒ½å¤Ÿæä¾›è¯¸å¦‚æµé‡æ§åˆ¶ã€æœåŠ¡å‘ç°å’Œæ–­è·¯å™¨ç­‰åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æœ¬è´¨ä¸Šæ˜¯å¯¹ç½‘ç»œæµé‡çš„ç®¡ç†ï¼Œæ— æ³•è§£å†³æ‰€æœ‰å®‰å…¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå®ƒä¸èƒ½æ›¿ä»£åº”ç”¨å±‚é˜²ç«å¢™ã€å…¥ä¾µæ£€æµ‹ç³»ç»Ÿå’Œæ•°æ®å®‰å…¨ç­‰æ›´ä¼ ç»Ÿçš„å®‰å…¨æªæ–½ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒæœåŠ¡ç½‘æ ¼ä¾èµ–äºæ­£ç¡®çš„é…ç½®å’Œç®¡ç†ï¼Œé…ç½®ä¸å½“å¯èƒ½å¯¼è‡´å®‰å…¨æ¼æ´ã€‚å› æ­¤ï¼Œå°½ç®¡æœåŠ¡ç½‘æ ¼æ˜¯ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒåº”è¯¥ä¸ä¼ ç»Ÿçš„å®‰å…¨æªæ–½ç›¸ç»“åˆï¼Œå…±åŒæ„æˆä¸€ä¸ªå…¨é¢çš„ã€å¤šå±‚æ¬¡çš„å®‰å…¨ç­–ç•¥æ¡†æ¶ã€‚å‚è€ƒ&lt;a href=&#34;https://jimmysong.io/trans/how-service-mesh-layers-microservices-security-with-traditional-security-to-move-fast-safely/&#34; title=&#34;å¦‚ä½•é€šè¿‡æœåŠ¡ç½‘æ ¼å¢å¼ºå¾®æœåŠ¡çš„å®‰å…¨æ€§&#34;&gt;å¦‚ä½•é€šè¿‡æœåŠ¡ç½‘æ ¼å¢å¼ºå¾®æœåŠ¡çš„å®‰å…¨æ€§&lt;/a&gt;ä»¥è¿›ä¸€æ­¥äº†è§£å¦‚ä½•åŠ å¼ºæœåŠ¡ç½‘æ ¼çš„å®‰å…¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é•¿æœŸè§£å†³æ–¹æ¡ˆå’Œç¤¾åŒºåˆä½œ&#34;&gt;é•¿æœŸè§£å†³æ–¹æ¡ˆå’Œç¤¾åŒºåˆä½œ&lt;/h2&gt;
&lt;p&gt;Istio ç¤¾åŒºæ¯å¹´éƒ½ä¼šè¿›è¡Œä¸€æ¬¡å®‰å…¨å®¡è®¡ï¼Œè§ &lt;a href=&#34;https://istio.io/latest/blog/2021/ncc-security-assessment/&#34; title=&#34;2021 å¹´&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;2021 å¹´&lt;/a&gt;ã€&lt;a href=&#34;https://istio.io/latest/blog/2023/ada-logics-security-assessment/&#34; title=&#34;2022 å¹´&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;2022 å¹´&lt;/a&gt; çš„å®‰å…¨å®¡è®¡ç»“æœã€‚ä»ç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒIstio çš„å®‰å…¨æ€åŠ¿æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚ç¡®ä¿ä½ çš„ Istio æœåŠ¡ç½‘æ ¼ç¬¦åˆ&lt;a href=&#34;https://istio.io/latest/docs/ops/best-practices/security/&#34; title=&#34;å®‰å…¨æœ€ä½³å®è·µ&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®‰å…¨æœ€ä½³å®è·µ&lt;/a&gt;ã€‚å¦å¤–ï¼Œä½ è¿˜éœ€è¦å…³æ³¨ &lt;a href=&#34;https://istio.io/latest/news/security/&#34; title=&#34;Istio CVE å…¬å‘Šæ &#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio CVE å…¬å‘Šæ &lt;/a&gt;ï¼Œæˆ–è€…ä½¿ç”¨å¦‚ &lt;a href=&#34;https://tetrate.io/tetrate-istio-subscription/&#34; title=&#34;Tetrate Istio Subscription&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tetrate Istio Subscription&lt;/a&gt; è¿™ç±»å·¥å…·æ¥æ‰«æ Istio æœåŠ¡ç½‘æ ¼çš„å„ç§ CVEï¼Œéƒ¨ç½²ç¬¦åˆ FIPS å¹¶ç»è¿‡ FIPS éªŒè¯çš„ Istio å‘è¡Œç‰ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼é€šè¿‡åœ¨åº”ç”¨ç¨‹åºå¤–éƒ¨ç®¡ç†æ§åˆ¶æµï¼Œä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†é¢å¤–çš„å®‰å…¨å±‚ã€‚è¿™å…è®¸åœ¨ä¸å½±å“åº”ç”¨ç¨‹åºæ€§èƒ½çš„å‰æä¸‹ï¼ŒåŠ å¼ºæœåŠ¡ä¹‹é—´çš„é€šä¿¡å®‰å…¨ã€‚åœ¨éƒ¨ç½²æœåŠ¡ç½‘æ ¼æ—¶ï¼Œæ¨èä½¿ç”¨ Istio çš„ Egress Gateway æ¥ç®¡ç†å‡ºå£æµé‡ï¼Œç»“åˆ Kubernetes çš„ NetworkPolicyï¼Œç¡®ä¿æ‰€æœ‰å‡ºå£æµé‡éƒ½å¿…é¡»ç»è¿‡ç½‘å…³ï¼Œä»è€Œé˜²æ­¢æ½œåœ¨çš„æ•°æ®æ³„éœ²å’Œå…¶ä»–å®‰å…¨å¨èƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tetrate.io/blog/istio-how-to-enforce-egress-traffic-using-istios-authorization-policies/&#34; title=&#34;How to enforce egress traffic using Istioâ€™s authorization policies - tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;How to enforce egress traffic using Istioâ€™s authorization policies - tetrate.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/ops/best-practices/security/&#34; title=&#34;Istio Security Best Practice - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Security Best Practice - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tetrate.io/blog/optimize-traffic-management-and-security-with-these-service-mesh-best-practices/&#34; title=&#34;Optimize Traffic Management and Security with These Service Mesh Best Practices - tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Optimize Traffic Management and Security with These Service Mesh Best Practices - tetrate.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2023/ada-logics-security-assessment/&#34; title=&#34;Istio publishes results of 2022 security audit - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio publishes results of 2022 security audit - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2021/ncc-security-assessment/&#34; title=&#34;Announcing the results of Istioâ€™s first security assessment - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Announcing the results of Istioâ€™s first security assessment - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>ä¹Œå…°å¯Ÿå¸ƒä¹‹æ—…ï¼šæ¢ç´¢ç«å±±ä¸å¤±è½çš„æ‘åº„</title>
      <link>https://jimmysong.io/blog/ulanqab-trip/</link>
      <pubDate>Tue, 23 Jul 2024 15:24:08 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/ulanqab-trip/</guid>
      <description>
        
        
        &lt;p&gt;ä¸Šä¸ªå‘¨æœ«ï¼Œæˆ‘ä»åŒ—äº¬è‡ªé©¾å‰å¾€ä¹Œå…°å¯Ÿå¸ƒï¼Œç»å†äº†ä¸€æ®µå…¨ç¨‹ 995 å…¬é‡Œçš„æ—…ç¨‹ã€‚å‘¨äº”æ™šä¸Šï¼Œæˆ‘ä»åŒ—äº¬ä¸œå››ç¯å‡ºå‘ï¼Œé©¶è¿‡ 295 å…¬é‡Œï¼ŒæŠµè¾¾ä¹Œå…°å¯Ÿå¸ƒå…´å’Œå¿ï¼Œæš‚ä½ä¸€æ™šã€‚æ¸…æ™¨ï¼Œæˆ‘ä»¬æ»¡æ€€æœŸå¾…åœ°å‡ºå‘ï¼Œè¿æ¥ä¹Œå…°å“ˆè¾¾ç«å±±çš„å£®ä¸½æ™¯è§‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­æ˜¯ä¸€ä¸ªå…è´¹å¼€æ”¾çš„æ™¯åŒºï¼Œæ™¯åŒºå…¬è·¯å’Œä¸€äº›é…å¥—è®¾æ–½è¿˜åœ¨å»ºè®¾ä¸­ã€‚æˆ‘ä»åŒ—é¢è¿›å…¥å…¬å›­ï¼Œé¦–å…ˆåˆ°è¾¾çš„æ˜¯ 3 å·ç«å±±ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=1806349286&amp;amp;bvid=BV1Wb421J7ju&amp;amp;cid=1624436740&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;å½“å¤©è™½ç„¶æ¸©åº¦åªæœ‰ 31Â°Cï¼Œä½†ç´«å¤–çº¿æ ¼å¤–å¼ºçƒˆã€‚11 ç‚¹é’Ÿï¼Œæˆ‘ä»¬å¼€å§‹æ”€ç™» 3 å·ç«å±±ã€‚çƒˆæ—¥å½“ç©ºï¼Œç´«å¤–çº¿ç‚™çƒ­ï¼Œæˆ‘ç©¿ç€é˜²æ™’æœï¼ŒT æ¤å·²ç»è¢«æ±—æ°´æµ¸æ¹¿ï¼Œæ±—ç å¦‚è±†ç²’èˆ¬å¤§å°ä¸æ–­æ»´è½ï¼Œä»¿ä½›åœ¨ä¸è¿™ç‰‡å¹¿è¢¤çš„å¤©åœ°è¿›è¡Œä¸€åœºæ¿€çƒˆçš„å¯¹æŠ—ã€‚å½“åœ°çš„æµ·æ‹”è¾¾åˆ°äº† 1600 ç±³ï¼Œç©ºæ°”æ¸…æ–°è€Œç¨€è–„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­&#34;&gt;ä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­&lt;/h2&gt;
&lt;p&gt;ä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­ä½äºå†…è’™å¤ä¹Œå…°å¯Ÿå¸ƒå¸‚ï¼Œè¿™é‡Œä¿å­˜ç€ä¸€ç‰‡å®Œå¥½çš„ç«å±±ç¾¤ï¼Œå±•ç°ç€å¤§è‡ªç„¶çš„é¬¼æ–§ç¥å·¥å’Œåœ°è´¨å˜è¿çš„å£®ä¸½ç”»å·ã€‚ç«å±±ç¾¤ç”±å¤šåº§ç«å±±ç»„æˆï¼Œå…¶ä¸­æœ€è‘—åçš„ 3 å·å’Œ 6 å·ç«å±±ï¼Œè¢«åˆ†åˆ«ç§°ä¸ºâ€œåŒ—ç‚¼ä¸¹ç‚‰â€å’Œâ€œå—ç‚¼ä¸¹ç‚‰â€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆæ”€ç™»äº† 3 å·ç«å±±ï¼Œä»å±±é¡¶ä¿¯ç°ï¼Œç«å±±å£æ¸…æ™°å¯è§ï¼Œå‘¨å›´çš„ç«å±±å²©çŸ³å±•ç°å‡ºå¥‡ç‰¹çš„åœ°è´¨æ„é€ ï¼Œä»¿ä½›åœ¨è¯‰è¯´ç€é‚£æ®µé¥è¿œè€Œç¥ç§˜çš„å†å²ã€‚éšåï¼Œæˆ‘ä»¬è‡ªé©¾é€”å¾„ 6 å·ç«å±±ï¼Œç”±äºäº¤é€šå µå¡ï¼Œä¸å¾—ä¸æ‰å¤´è¿”å›ã€‚3 å·ç«å±±çš„å—é¢å·²ç»è¢«æŒ–å¾—é¢ç›®å…¨éï¼Œåªæœ‰ä»åŒ—é¢çœ‹æ‰èƒ½çœ‹å‡ºå®Œæ•´çš„ç«å±±å½¢çŠ¶ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-number-three.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-number-three.webp&#34; alt=&#34;image&#34; data-caption=&#34;å†…è’™å¤ä¹Œå…°å¯Ÿå¸ƒä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­ï¼Œ3 å·ç«å±±ï¼ˆåŒ—ç‚¼ä¸¹ç‚‰ï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;å†…è’™å¤ä¹Œå…°å¯Ÿå¸ƒä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­ï¼Œ3 å·ç«å±±ï¼ˆåŒ—ç‚¼ä¸¹ç‚‰ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-number-five.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-number-five.webp&#34; alt=&#34;image&#34; data-caption=&#34;å†…è’™å¤ä¹Œå…°å¯Ÿå¸ƒä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­ï¼Œ6 å·ç«å±±ï¼ˆå—ç‚¼ä¸¹ç‚‰ï¼‰&#34;&gt;
  
  
  &lt;figcaption&gt;å†…è’™å¤ä¹Œå…°å¯Ÿå¸ƒä¹Œå…°å“ˆè¾¾ç«å±±åœ°è´¨å…¬å›­ï¼Œ6 å·ç«å±±ï¼ˆå—ç‚¼ä¸¹ç‚‰ï¼‰&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¤œæ™šï¼Œæˆ‘ä»¬ä½åœ¨ç°ä»£åŒ–çš„â€œè’™å¤åŒ…â€é‡Œã€‚è’™å¤åŒ…çš„æ„é€ ç‹¬ç‰¹ï¼Œåœ†å½¢è®¾è®¡ä¸ä»…æŠµå¾¡é£æ²™ï¼Œè¿˜èƒ½ä¿æŒå†…éƒ¨æ¸©æš–ã€‚ç°ä»£è’™å¤åŒ…åˆ™åœ¨ä¼ ç»ŸåŸºç¡€ä¸Šèåˆäº†ç°ä»£å…ƒç´ ï¼Œæä¾›äº†æ›´ä¸ºèˆ’é€‚çš„å±…ä½ä½“éªŒã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-mongolian-yurt.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-mongolian-yurt.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¤œæ™šä½å®¿åœ¨ç°ä»£ã€Œè’™å¤åŒ…ã€&#34;&gt;
  
  
  &lt;figcaption&gt;å¤œæ™šä½å®¿åœ¨ç°ä»£ã€Œè’™å¤åŒ…ã€&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ç«å±±å²©çŸ³å…·æœ‰ç‹¬ç‰¹çš„åœ°è´¨ç‰¹å¾ï¼Œè¿™äº›å²©çŸ³å½¢æˆäºæ•°ç™¾ä¸‡å¹´å‰ç«å±±å–·å‘çš„ç†”å²©å†·å´åã€‚å®ƒä»¬è´¨åœ°åšç¡¬ï¼Œé¢œè‰²å¤šæ ·ï¼Œä»é»‘è‰²åˆ°çº¢è‰²ä¸ç­‰ã€‚è¿™äº›å²©çŸ³ä¸ä»…æ˜¯å¤§è‡ªç„¶çš„æ°ä½œï¼Œä¹Ÿæ˜¯åœ°è´¨å­¦ç ”ç©¶çš„å®è´µææ–™ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-close-up.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-volcano-close-up.webp&#34; alt=&#34;image&#34; data-caption=&#34;ç«å±±ç¯å¢ƒç‰¹å†™&#34;&gt;
  
  
  &lt;figcaption&gt;ç«å±±ç¯å¢ƒç‰¹å†™&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ç”Ÿæ€ä¿æŠ¤çº¢çº¿&#34;&gt;ç”Ÿæ€ä¿æŠ¤çº¢çº¿&lt;/h2&gt;
&lt;p&gt;ç”Ÿæ€ä¿æŠ¤çº¢çº¿æ˜¯ä¸ºäº†ä¿æŠ¤ç”Ÿæ€ç³»ç»Ÿã€ç»´æŠ¤ç”Ÿæ€å®‰å…¨è€Œåˆ’å®šçš„ä¸¥æ ¼ä¿æŠ¤åŒºåŸŸã€‚ä¹Œå…°å¯Ÿå¸ƒåœ°åŒºçš„ç”Ÿæ€ä¿æŠ¤çº¢çº¿ç¡®ä¿äº†ç«å±±åœ°è´¨å…¬å›­å’Œå‘¨è¾¹ç”Ÿæ€ç¯å¢ƒçš„åŸå§‹é£è²Œå¾—ä»¥ä¿å­˜ã€‚è¿™ç‰‡å¤§åœ°ä¸Šçš„ç”Ÿæ€ä¿æŠ¤çº¢çº¿ï¼Œåƒæ˜¯ä¸€é“æ— å½¢çš„å±éšœï¼Œå®ˆæŠ¤ç€è¿™ç‰‡å¤è€è€Œç¥ç§˜çš„åœŸåœ°ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-ecological-wealth.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-ecological-wealth.webp&#34; alt=&#34;image&#34; data-caption=&#34;å¯Ÿå“ˆå°”å³ç¿¼åæ——ç”Ÿæ€ä¿æŠ¤çº¢çº¿&#34;&gt;
  
  
  &lt;figcaption&gt;å¯Ÿå“ˆå°”å³ç¿¼åæ——ç”Ÿæ€ä¿æŠ¤çº¢çº¿&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å“èµ„å¿ï¼Œä½äºä¹Œå…°å¯Ÿå¸ƒçš„åè¿œè§’è½ã€‚ç”±äºç»æµå‘å±•æ»åï¼Œäººå£é€å¹´å‡å°‘ï¼Œè®¸å¤šæ‘åº„å› æ­¤è¢«åºŸå¼ƒã€‚è¿™äº›åºŸå¼ƒçš„æ‘åº„è§è¯äº†äººå£è¿ç§»å’ŒåŸé•‡åŒ–çš„å†å²å˜è¿ï¼Œä»¿ä½›åœ¨æ— å£°åœ°è¯‰è¯´ç€ä¸€ä¸ªä¸ªæ—¶ä»£çš„æ•…äº‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-wild.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-wild.webp&#34; alt=&#34;image&#34; data-caption=&#34;å“èµ„å¿çš„æ‘åº„é‡Œç¾Šæ¯”äººå¤š&#34;&gt;
  
  
  &lt;figcaption&gt;å“èµ„å¿çš„æ‘åº„é‡Œç¾Šæ¯”äººå¤š&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸Šå›¾ä¸­ä¸Šæ–¹å·¦äºŒä¸ºæˆ˜å›½èµµé•¿åŸé—å€ï¼Œå…¬å…ƒå‰ 300 å¹´ï¼Œèµµæ­¦çµç‹ä¿®å»ºçš„é•¿åŸï¼Œä»Šå¤ä½•åœ¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;èµµé•¿åŸï¼Œä¸ºèµµæ­¦çµç‹æ—¶æ‰€ç­‘ï¼Œæ•…ä¹Ÿç§°èµµæ­¦çµç‹é•¿åŸã€‚æ®ã€Šå²è®°Â·åŒˆå¥´åˆ—ä¼ ã€‹è®°è½½ï¼šâ€œèµµæ­¦çµç‹å˜ä¿—ï¼Œèƒ¡æœï¼Œä¹ éª‘å°„ï¼ŒåŒ—ç ´æ—èƒ¡ã€æ¥¼çƒ¦ï¼Œç­‘é•¿åŸï¼Œè‡ªä»£å¹¶é˜´å±±ä¸‹ï¼Œè‡³é«˜é˜™ä¸ºå¡ã€‚â€&lt;/p&gt;
&lt;p&gt;æ‹æ‘„äºä¹Œå…°å¯Ÿå¸ƒå¸‚å¯Ÿå“ˆå°”å³ç¿¼åæ——å››èƒœè·¯é©¬æˆ¿æ²Ÿé™„è¿‘çš„æ ‘æ—é‡Œï¼Œæˆç™¾ä¸Šåƒåªé¸Ÿæ—¶è€Œéšè—åœ¨æ ‘æ—é‡Œï¼Œæ—¶è€Œé£åˆ°è¿œå¤„çš„å±±å¡ä¸Šï¼Œè”šä¸ºå£®è§‚ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=1606455527&amp;amp;bvid=BV1t2421Z7tv&amp;amp;cid=1624561303&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;æˆ‘ä»¬åœ¨ç”Ÿæ€ä¿æŠ¤çº¢çº¿çš„åœ°å›¾ä¸Šé‡‡ç”¨æŠ•é£é•–çš„æ–¹å¼éšæœºé€ è®¿ä¸€ä¸ªæ‘å­ï¼ŒæŠ•ä¸­äº†èƒœåˆ©æ‘ã€‚å‡ ç»è¾—è½¬ï¼Œæˆ‘ä»¬å‘ç°èƒœåˆ©æ‘åœ¨æ‰‹æœºåœ°å›¾ä¸Šç”šè‡³æ²¡æœ‰è·¯çº¿æŒ‡å¼•ã€‚æœ€ç»ˆåˆ°è¾¾çš„æ‘å­å·²ç»ä¸å¤å­˜åœ¨ï¼Œåªç•™ä¸‹ä¸€äº›è’åºŸçš„æˆ¿å­ï¼Œé™é™åœ°ä¼«ç«‹åœ¨è¿™ç‰‡å¹¿è¢¤çš„åœŸåœ°ä¸Šã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-abandoned-village.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/ulanqab-trip/ulanqab-abandoned-village.webp&#34; alt=&#34;image&#34; data-caption=&#34;å“èµ„å¿ä½äºç”Ÿæ€ä¿æŠ¤çº¢çº¿å†…è’åºŸçš„æˆ¿å­&#34;&gt;
  
  
  &lt;figcaption&gt;å“èµ„å¿ä½äºç”Ÿæ€ä¿æŠ¤çº¢çº¿å†…è’åºŸçš„æˆ¿å­&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è¿™æ¬¡ä¹Œå…°å¯Ÿå¸ƒä¹‹æ—…è®©æˆ‘æ·±åˆ»æ„Ÿå—åˆ°äº†å†…è’™å¤ç‹¬ç‰¹çš„è‡ªç„¶æ™¯è§‚å’Œäººæ–‡å†å²ã€‚ä»å£®ä¸½çš„ç«å±±åœ°è´¨å…¬å›­åˆ°å¤±è½çš„ä¹¡æ‘ï¼Œæ¯ä¸€å¤„æ™¯ç‚¹éƒ½ç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ã€‚è¿™æ¬¡æ—…ç¨‹ä¸ä»…è®©æˆ‘æ”¾æ¾äº†èº«å¿ƒï¼Œä¹Ÿè®©æˆ‘å¯¹ç”Ÿæ€ä¿æŠ¤å’Œäººå£æµåŠ¨æœ‰äº†æ›´å¤šçš„æ€è€ƒã€‚åœ¨è¿™ç‰‡è¾½é˜”çš„åœŸåœ°ä¸Šï¼Œæˆ‘çœ‹åˆ°äº†è‡ªç„¶çš„å£®ä¸½ä¸äººç±»å†å²çš„æ²‰æµ®ï¼Œå†…å¿ƒä¹Ÿéšä¹‹å˜å¾—æ›´åŠ ä¸°ç›ˆå’Œå®é™ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>ä»‹ç» Tetrate Enterprise Gateway åŠä¸ Istio é›†æˆï¼šäº‘åŸç”Ÿåº”ç”¨çš„å…¨é¢ç½‘å…³è§£å†³æ–¹æ¡ˆ</title>
      <link>https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/</link>
      <pubDate>Mon, 22 Jul 2024 16:43:16 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/</guid>
      <description>
        
        
        &lt;h2 id=&#34;teg-ç®€ä»‹&#34;&gt;TEG ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Tetrate Enterprise Gatewayï¼ˆTEGï¼‰æ˜¯åŸºäº &lt;a href=&#34;https://gateway.envoyproxy.io/&#34; title=&#34;Envoy Gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway&lt;/a&gt; (EG) çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Œä¸“é—¨é’ˆå¯¹ Envoy Proxy è®¾è®¡ï¼Œé€šè¿‡ &lt;a href=&#34;https://gateway-api.sigs.k8s.io/&#34; title=&#34;Kubernetes Gateway API&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes Gateway API&lt;/a&gt; æä¾›æ›´æ˜“äºæ¶ˆè´¹çš„ Envoy ä»£ç†é…ç½®å’Œç®¡ç†åŒ…ã€‚TEG ç»“åˆäº† Kubernetes Gateway API çš„ç‰¹æ€§ï¼Œæ”¯æŒåœ¨ Kubernetes ä¸­è½»æ¾æš´éœ²æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;TEG ç›¸å¯¹äº Envoy Gateway çš„ä¸»è¦æ–°å¢ç‰¹æ€§åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰&lt;/strong&gt;ï¼šTEG æ”¯æŒåŸºäº IP 5-tupleã€è¯·æ±‚å¤´ç­‰è¿›è¡Œæµé‡æ§åˆ¶ï¼Œéœ€è¦é€šè¿‡ Redis å®ä¾‹ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WAF åŠŸèƒ½ï¼ˆWeb Application Firewallï¼‰&lt;/strong&gt;ï¼šTEG æä¾›äº†ä¸ &lt;code&gt;mod_security&lt;/code&gt; å…¼å®¹çš„ WAF åŠŸèƒ½ï¼Œå¢å¼ºäº†å®‰å…¨é˜²æŠ¤èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OIDC/OAuth2è®¤è¯&lt;/strong&gt;ï¼šæ”¯æŒåœ¨ç½‘å…³çº§åˆ«è¿›è¡Œ OIDC/OAuth2 è®¤è¯ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æŒ‰è·¯ç”±é…ç½®è®¤è¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ Kubernetes Gateway API&lt;/strong&gt;ï¼šç›¸è¾ƒäºå…¶ä»– APIï¼ŒKubernetes Gateway API çš„è®¾è®¡æ›´åŠ ç°ä»£ï¼Œç»“åˆäº†ä¼—å¤š Ingress å®ç°çš„ç»éªŒï¼Œå°†ç½‘å…³çš„é…ç½®ä¸æµé‡çš„è·¯ç”±åˆ†ç¦»ï¼Œä½¿å¹³å°æ‰€æœ‰è€…å¯ä»¥ç®¡ç†ç½‘å…³ï¼Œè€Œåº”ç”¨å›¢é˜Ÿå¯ä»¥æŒæ§æµé‡è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;TEG å°† Envoy çš„é«˜çº§ç½‘ç»œæµé‡å¤„ç†èƒ½åŠ›å¸¦å…¥ Kubernetes ç¯å¢ƒï¼Œæä¾›äº†ä¸€ç§ç®€åŒ–çš„æ–¹æ³•æ¥éƒ¨ç½²å’Œç®¡ç†è´Ÿè½½å¹³è¡¡ã€API ç½‘å…³åŠŸèƒ½ã€å®‰å…¨æ§åˆ¶ç­‰ï¼ŒåŒæ—¶æ”¯æŒç°ä»£çš„ã€å¼€æ”¾çš„åº”ç”¨ç¨‹åºæš´éœ² APIï¼Œå¦‚ Kubernetes Gateway APIã€‚è¿™äº›ç‰¹æ€§ä½¿ TEG æˆä¸ºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œã€æ˜“äºç®¡ç†çš„ä¼ä¸šçº§ç½‘å…³è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;teg-çš„èƒ½åŠ›&#34;&gt;TEG çš„èƒ½åŠ›&lt;/h2&gt;
&lt;p&gt;Tetrate Enterprise Gateway for Envoy (TEG) æ„å»ºäº Envoy Gateway é¡¹ç›®ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ç§æ˜“äºä½¿ç”¨å’Œæ“ä½œçš„å…¥å£ï¼Œå…·æœ‰å…ˆè¿›çš„æŒ‰è¯·æ±‚æµé‡æ§åˆ¶åŠŸèƒ½ã€ä¸ç°æœ‰ç¯å¢ƒçš„è½»æ¾é›†æˆï¼Œä»¥åŠä¸€æµçš„å¯è§‚æµ‹æ€§ï¼Œä»¥ç†è§£åº”ç”¨æµé‡å’Œå…¥å£å¥åº·çŠ¶å†µã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ˜“äºå®‰è£…æ“ä½œå’Œå‡çº§&#34;&gt;æ˜“äºå®‰è£…ã€æ“ä½œå’Œå‡çº§&lt;/h3&gt;
&lt;p&gt;TEG ä»å¤´åˆ°å°¾æ³¨é‡æ˜“ç”¨æ€§ï¼šä»é¦–æ¬¡å®‰è£…åˆ°å¯ç”¨åº”ç”¨å›¢é˜Ÿï¼Œä»æ•…éšœæ’æŸ¥åˆ°æ‰§è¡Œå‡çº§ã€‚TEG çš„åˆå§‹å®‰è£…åªéœ€å‡ åˆ†é’Ÿï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼Œå¦‚é€Ÿç‡é™åˆ¶ã€å•ç‚¹ç™»å½•å’Œé‡‘ä¸é›€æµé‡è·¯ç”±ã€‚TEG è¿˜ç®€åŒ–äº†è¿ç»´æµç¨‹ï¼Œä¸ä½ ç°æœ‰çš„æŒ‡æ ‡ã€è·Ÿè¸ªå’Œæ—¥å¿—è®°å½•ç®¡é“ç›¸é€‚åº”ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ã€é¢„é…ç½®çš„å¯è§‚æµ‹æ€§å †æ ˆï¼Œä»¥è¯„ä¼° EG äº§ç”Ÿçš„æ•°æ®ï¼Œå¹¶å¸®åŠ©ä½ è®¡åˆ’å¦‚ä½•å°† TEG é›†æˆåˆ°ä½ çš„ç°æœ‰æŒ‡æ ‡å †æ ˆä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ“ä½œæ€§ä¸€æµçš„åŠŸèƒ½&#34;&gt;æ“ä½œæ€§ï¼šä¸€æµçš„åŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;TEG ç”±åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œå¤§å‹ã€å…³é”®ç³»ç»Ÿçš„ç»éªŒä¸°å¯Œå›¢é˜Ÿæ„å»ºã€‚TEG ç®€åŒ–äº†æ¼æ´æ£€æŸ¥å’ŒæŒç»­å‡çº§è¿‡ç¨‹ï¼Œä¸ä½ ç°æœ‰çš„æŒ‡æ ‡å’Œè·Ÿè¸ªæä¾›å•†è½»æ¾é›†æˆï¼Œå¹¶ä¸ºä½ ç°æœ‰çš„ Grafana éƒ¨ç½²æä¾›äº†ä¸€å¥—å¼ºå¤§çš„å…¥å£å¯è§‚æµ‹æ€§ä»ªè¡¨æ¿ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸ç°æœ‰çš„ç¯å¢ƒé›†æˆ&#34;&gt;ä¸ç°æœ‰çš„ç¯å¢ƒé›†æˆ&lt;/h3&gt;
&lt;p&gt;TEG ä¸ä»…é€‚ç”¨äºç»¿åœ°éƒ¨ç½²çš„å¯åŠ¨ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¸ä¼ ç»Ÿç¯å¢ƒä»¥åŠç°ä»£äº‘åŸç”Ÿç¯å¢ƒé›†æˆã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ç°æœ‰çš„åº”ç”¨ç”Ÿæ€ç³»ç»Ÿå’Œä½ æ­£åœ¨æ„å»ºçš„äº‘åŸç”Ÿç›®æ ‡ä¹‹é—´æ¶èµ·æ¡¥æ¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¼•å…¥ç°æœ‰çš„å¯è§‚æµ‹æ€§å †æ ˆ&#34;&gt;å¼•å…¥ç°æœ‰çš„å¯è§‚æµ‹æ€§å †æ ˆ&lt;/h3&gt;
&lt;p&gt;ä½ çš„ç»„ç»‡å¯èƒ½å·²ç»æœ‰ä¸€ä¸ªå¯è§‚æµ‹æ€§ç³»ç»Ÿï¼Œä½ çš„åº”ç”¨å’Œè¿è¥å›¢é˜Ÿå·²ç»è®­ç»ƒæœ‰ç´ åœ°ä½¿ç”¨å®ƒã€‚TEG å¯ä»¥è½»æ¾åœ°åµŒå…¥åˆ°ç°æœ‰çš„åŸºç¡€è®¾æ–½ä¸­ï¼Œå¹¶åœ¨ä½ çš„ç»„ç»‡ä¸­è¿è¡Œã€‚TEG å°†ä½¿ Envoy çš„ä¸°å¯ŒæŒ‡æ ‡é›†å¯¼å‡ºï¼Œè®©ä½ çš„åº”ç”¨å›¢é˜Ÿå¯¹å…¶åº”ç”¨æµé‡çš„è¡Œä¸ºæœ‰æœ€ä½³çš„æ´å¯Ÿï¼Œå¹¶çœ‹åˆ°ä»–ä»¬æ‰€åšé…ç½®æ›´æ”¹çš„æ•ˆæœã€‚TEG è¿˜ä¸ºè¿è¡Œå®ƒçš„å¹³å°å›¢é˜Ÿæä¾›äº†ä»ªè¡¨æ¿å’Œè­¦æŠ¥åŠŸèƒ½ï¼Œä½¿ä½ èƒ½å¤Ÿè‡ªä¿¡åœ°æ“ä½œå¹¶å¿«é€Ÿè§£å†³å‘ç°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç®€å•çš„è´Ÿè½½å¹³è¡¡&#34;&gt;ç®€å•çš„è´Ÿè½½å¹³è¡¡&lt;/h3&gt;
&lt;p&gt;Envoy éå¸¸å¼ºå¤§ï¼Œä½†è¦ä½¿å…¶å¯åŠ¨å¹¶è¿è¡Œç®€å•ç”¨ä¾‹å¯èƒ½å¾ˆéš¾â€”â€”åƒ Istio è¿™æ ·çš„ç³»ç»Ÿæä¾› Envoy å…¥å£ç®¡ç†ä½œä¸ºæ›´å¹¿æ³›åŠŸèƒ½å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿé™„å¸¦äº†è®¸å¤šä¸ç®€å•ã€æµç•…çš„æ“ä½œä½“éªŒç›¸å†²çªçš„é¢å¤–åŠŸèƒ½ã€‚è¿™å°±æ˜¯ Envoy Gateway å­˜åœ¨çš„åŸå› ï¼šä½¿ Envoy çš„å¼ºå¤§åŠŸèƒ½æ˜“äºç”¨äºå…¥å£ç”¨ä¾‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç®€å•çš„-api-ç½‘å…³&#34;&gt;ç®€å•çš„ API ç½‘å…³&lt;/h3&gt;
&lt;p&gt;ç»„ç»‡ä¸­ç»å¤§å¤šæ•° API ç½‘å…³çš„ä½¿ç”¨å½’ç»“ä¸ºä¸‰ä»¶äº‹ï¼šè®¤è¯å‘èµ·è¯·æ±‚çš„ç”¨æˆ·ï¼›é™åˆ¶ç”¨æˆ·å¯¹æœåŠ¡çš„è®¿é—®ï¼›åœ¨æ­¤ API ç«¯ç‚¹çš„æœåŠ¡å®ä¾‹ä¹‹é—´è¿›è¡Œè´Ÿè½½å¹³è¡¡ã€‚TEG ç®€åŒ–äº†åœ¨ä¼ ç»Ÿå’Œäº‘åŸç”Ÿç¯å¢ƒä¸­å®Œæˆè¿™ä¸‰é¡¹ä»»åŠ¡çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;teg-çš„æ¶æ„&#34;&gt;TEG çš„æ¶æ„&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºçš„æ˜¯ TEG çš„æ¶æ„å›¾ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/teg-architecture.svg&#34; data-img=&#34;/blog/explore-tetrate-enterprise-gateway/teg-architecture.svg&#34; alt=&#34;image&#34; data-caption=&#34;TEG æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;TEG æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä»æ¶æ„å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒTetrate Enterprise Gateway for Envoy (TEG) çš„æ¶æ„è®¾è®¡åŒ…æ‹¬ä»¥ä¸‹ä¸»è¦ç»„ä»¶å’Œæµç¨‹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;ä¸»è¦ç»„ä»¶&#34;&gt;ä¸»è¦ç»„ä»¶&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Kubernetes Cluster&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Envoy Gateway&lt;/strong&gt;ï¼šä½œä¸ºæ§åˆ¶å¹³é¢ï¼Œé…ç½®å’Œç®¡ç† Envoy ä»£ç†ï¼Œæ¶ˆè´¹ Kubernetes Gateway API çš„é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Metrics Collection&lt;/strong&gt;ï¼šä½¿ç”¨ Prometheus æˆ– OpenTelemetry (OTEL) ä½œä¸ºæŒ‡æ ‡æ”¶é›†ç‚¹ï¼Œç”¨äºç›‘æ§ Envoy Proxy çš„æ€§èƒ½å’Œå¥åº·çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Envoy Proxy&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºæ•°æ®å¹³é¢ï¼Œç›´æ¥å¤„ç†æ‰€æœ‰è¿›å…¥çš„æµé‡ï¼Œæ”¯æŒåŸºäº Kubernetes Gateway API çš„é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Coraza WAF&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œä¸º TEG çš„ä¸€éƒ¨åˆ†éƒ¨ç½²ï¼Œæ‰§è¡Œ WAF è§„åˆ™ä»¥ä¿æŠ¤åº”ç”¨å…å—æ¶æ„è¯·æ±‚æ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Redis Rate Limit Store&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œä¸ºå…¨å±€é€Ÿç‡é™åˆ¶çš„å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œç”¨äºè·¨æ‰€æœ‰ Envoy å®ä¾‹ç»´æŠ¤ç»Ÿä¸€çš„é€Ÿç‡é™åˆ¶è®¡æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Your OIDC Server&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤„ç† OAuth2.0 å’Œ OIDC è®¤è¯æµç¨‹ï¼Œç¡®ä¿åªæœ‰ç»è¿‡è®¤è¯çš„ç”¨æˆ·å¯ä»¥è®¿é—®ç‰¹å®šçš„è·¯ç”±å’ŒæœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å·¥ä½œæµç¨‹&#34;&gt;å·¥ä½œæµç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµé‡å…¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰å¤–éƒ¨æµé‡é¦–å…ˆé€šè¿‡ä¸Šæ¸¸çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œç„¶åè¢«è·¯ç”±åˆ° Envoy Proxyã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Envoy Proxy å¤„ç†&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envoy Proxy æ ¹æ® Kubernetes Cluster ä¸­çš„ Envoy Gateway çš„é…ç½®å¤„ç†æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®ä¿¡æ¯åŒ…æ‹¬è·¯ç”±è§„åˆ™ã€å®‰å…¨ç­–ç•¥ï¼ˆå¦‚ WAF å’Œé€Ÿç‡é™åˆ¶ï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰å…¨å’Œè®¤è¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Coraza WAF&lt;/strong&gt;ï¼šåœ¨æµé‡åˆ°è¾¾åº”ç”¨å‰ï¼Œæ ¹æ®é…ç½®çš„ WAF è§„åˆ™è¿›è¡Œæ£€æŸ¥å’Œè¿‡æ»¤ï¼Œæé«˜å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OIDC è®¤è¯&lt;/strong&gt;ï¼šOIDC Server å¤„ç†è®¤è¯ï¼ŒEnvoy Proxy æ ¹æ® OIDC Server çš„éªŒè¯ç»“æœå†³å®šæ˜¯å¦å…è®¸è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€Ÿç‡é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ Redis å­˜å‚¨è¿›è¡Œé€Ÿç‡é™åˆ¶ï¼ŒEnvoy Proxy å°†æ ¹æ®ä» Redis è·å–çš„æ•°æ®æ‰§è¡Œé€Ÿç‡é™åˆ¶ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ç›‘æ§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Envoy Proxy çš„æ€§èƒ½å’Œå¥åº·çŠ¶æ€é€šè¿‡é›†æˆçš„æŒ‡æ ‡æ”¶é›†ç³»ç»Ÿï¼ˆPrometheus æˆ– OTELï¼‰è¿›è¡Œç›‘æ§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é…ç½®å’Œç®¡ç†&#34;&gt;é…ç½®å’Œç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·å¯ä»¥é€šè¿‡ Kubernetes Gateway API å®šä¹‰å’Œåº”ç”¨ Envoy Proxy çš„é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;è¿™åŒ…æ‹¬å®šä¹‰ä¸“ç”¨ç½‘å…³çš„å…·ä½“é…ç½®ï¼Œå¦‚å®‰å…¨è§„åˆ™ã€è·¯ç”±ç­–ç•¥ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æ¶æ„è®¾è®¡åˆ©ç”¨äº† Kubernetes çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œå¹¶é€šè¿‡ Envoy æä¾›äº†å¼ºå¤§çš„æµé‡ç®¡ç†å’Œå®‰å…¨åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²-teg&#34;&gt;éƒ¨ç½² TEG&lt;/h2&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤éƒ¨ç½² TEG V0.0.0ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;REGISTRY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;oci://docker.io/tetrate&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;CHART_VERSION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;v0.0.0-latest&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm install teg &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;REGISTRY&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/teg-envoy-gateway-helm &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --version &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CHART_VERSION&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; -n envoy-gateway-system --create-namespace
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ£€æŸ¥éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get pod -n envoy-gateway-system
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;NAMESPACE              NAME                                                       READY   STATUS    RESTARTS        AGE
envoy-gateway-system   envoy-gateway-596dfbcb88-tx7xb                             1/1     Running   0               3m55s
envoy-gateway-system   envoy-ratelimit-674b8c955c-jhlfn                           2/2     Running   2 (3m48s ago)   3m54s
envoy-gateway-system   teg-envoy-gateway-64fd8c8fbb-59b4l                         1/1     Running   0               3m55s
envoy-gateway-system   teg-redis-86bb7d9b9d-27n44                                 1/1     Running   0               3m55s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éƒ¨ç½²ç¤ºä¾‹åº”ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create namespace httpbin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -n httpbin -f https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éƒ¨ç½² Envoy Proxyï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF | kubectl apply -f -
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;apiVersion: gateway.networking.k8s.io/v1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;kind: Gateway
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;metadata:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  name: dedicated-gateway
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  namespace: httpbin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;spec:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  gatewayClassName: teg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  listeners:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - name: http
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      protocol: HTTP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      port: 80
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä½ ä¼šåœ¨ &lt;code&gt;envoy-gateway-system&lt;/code&gt; å‘½åç©ºé—´ä¸‹çœ‹åˆ°ä¸€ä¸ªæ–°çš„ Envoy ä»£ç†ã€‚&lt;/p&gt;
&lt;p&gt;éƒ¨ç½² HTTPRouteï¼Œç»™ç½‘å…³é…ç½®è·¯ç”±ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF | kubectl apply -f -
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;apiVersion: gateway.networking.k8s.io/v1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;kind: HTTPRoute
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;metadata:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  name: httpbin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  namespace: httpbin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;spec:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  parentRefs:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - group: gateway.networking.k8s.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      kind: Gateway
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      name: dedicated-gateway
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  rules:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - matches:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        - path:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;            type: PathPrefix
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;            value: /httpbin/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      filters:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        - type: URLRewrite
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          urlRewrite:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;            path:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;              type: ReplacePrefixMatch
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;              replacePrefixMatch: /
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      backendRefs:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        - group: &amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          kind: Service
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          name: httpbin
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          port: 8000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªè·¯ç”±é…ç½®ä¸­æœ‰ä¸€ä¸ª URLRewrite filterï¼Œé‡å†™ URL å‰ç¼€ï¼Œå»æ‰äº† &lt;code&gt;/httpbin/&lt;/code&gt; éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;å‘é€æµé‡æµ‹è¯•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;DEDICATED_GATEWAY_IP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get gateway/dedicated-gateway -n httpbin -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.status.addresses[0].value}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -i http://&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;DEDICATED_GATEWAY_IP&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/httpbin/get
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;div class=&#34;alert alert-note-container&#34;&gt;
  
  &lt;div class=&#34;alert-note-title px-2 py-2&#34;&gt;
    ä¸ºä»€ä¹ˆä½¿ç”¨ &lt;code&gt;/httpbin/get&lt;/code&gt;?
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-note px-2&#34;&gt;
    &lt;p&gt;åœ¨é€šè¿‡ Tetrate Enterprise Gateway for Envoy (TEG) æš´éœ² &lt;code&gt;httpbin&lt;/code&gt; åº”ç”¨æ—¶ï¼Œé€‰æ‹© &lt;code&gt;/httpbin/get&lt;/code&gt; ä½œä¸ºè®¿é—®è·¯å¾„çš„åŸå› ä¸»è¦æ˜¯ä¸ºäº†åœ¨åŒä¸€ä¸ª Envoy ç½‘å…³ä¸‹èƒ½å¤ŸåŒæ—¶æ”¯æŒå¤šä¸ªåº”ç”¨æˆ–æœåŠ¡ï¼Œå¹¶èƒ½æ ¹æ®ä¸åŒçš„è·¯å¾„å°†æµé‡æ­£ç¡®åœ°è·¯ç”±åˆ°æŒ‡å®šçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§è·¯å¾„å‰ç¼€çš„è®¾ç½®æ–¹æ³•å…è®¸ç³»ç»Ÿç®¡ç†å‘˜æˆ–å¼€å‘äººå‘˜ä¸ºæ¯ä¸ªæœåŠ¡é…ç½®ç‹¬ç«‹çš„è·¯å¾„å‰ç¼€ï¼Œä»è€Œé€šè¿‡å•ä¸€çš„å…¥å£ç‚¹ï¼ˆå³ Envoy ç½‘å…³ï¼‰æ¥ç®¡ç†å¯¹å¤šä¸ªåç«¯æœåŠ¡çš„è®¿é—®ã€‚è¿™æ ·çš„é…ç½®å¢åŠ äº†è·¯ç”±çš„çµæ´»æ€§ï¼Œä½¿å¾—åœ¨ä¸æ›´æ”¹ç°æœ‰æœåŠ¡é…ç½®çš„æƒ…å†µä¸‹ï¼Œè½»æ¾åœ°æ‰©å±•æˆ–ä¿®æ”¹æœåŠ¡çš„æš´éœ²æ–¹å¼ã€‚&lt;/p&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;ä½œä¸º-istio-çš„å…¥å£ç½‘å…³&#34;&gt;ä½œä¸º Istio çš„å…¥å£ç½‘å…³&lt;/h2&gt;
&lt;p&gt;Istio æä¾›äº†æˆç†Ÿä¸”çµæ´»çš„å…¥å£ç½‘å…³æ”¯æŒï¼ŒåŸºäºä¸ Tetrate Enterprise Gatewayï¼ˆTEGï¼‰ç›¸åŒçš„ Envoy ä»£ç†ã€‚Istio ä¸»è¦ä¸“æ³¨äºå¤„ç†é›†ç¾¤å†…æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚ç›¸è¾ƒä¹‹ä¸‹ï¼ŒTEG è®¾è®¡ç”¨äºå‘å¤–ç•Œæš´éœ²åº”ç”¨ï¼Œå¤„ç†äººç±»ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¯æŒå¦‚ OIDC å•ç‚¹ç™»å½•ç­‰é«˜çº§åŠŸèƒ½ã€‚é€šè¿‡ç»“åˆ Istio ç½‘æ ¼å’Œ TEG çš„é«˜çº§ç½‘å…³åŠŸèƒ½ï¼Œä¸¤è€…å¯ä»¥å…±åŒä½¿ç”¨ï¼Œä»¥æå‡æ•´ä½“åº”ç”¨çš„å¯è®¿é—®æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç¤ºå±•ç¤ºäº† Istio ç½‘æ ¼ä¸­å…¥å£ç½‘å…³çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-ingress-sidecar.svg&#34; data-img=&#34;/blog/explore-tetrate-enterprise-gateway/istio-ingress-sidecar.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio ä¸­å…¥å£ç½‘å…³çš„æµé‡è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio ä¸­å…¥å£ç½‘å…³çš„æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†åœ¨å¼•å…¥ TEG ä¹‹åï¼Œæµé‡å¦‚ä½•ä» Istio ç½‘æ ¼è¾¹ç¼˜è¿›å…¥åˆ°å†…éƒ¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/explore-tetrate-enterprise-gateway/istio-teg-integration.svg&#34; data-img=&#34;/blog/explore-tetrate-enterprise-gateway/istio-teg-integration.svg&#34; alt=&#34;image&#34; data-caption=&#34;å¼•å…¥ TEG åæµé‡ä» Istio ç½‘æ ¼è¾¹ç¼˜è¿›å…¥å†…éƒ¨çš„æµé‡è·¯å¾„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¼•å…¥ TEG åæµé‡ä» Istio ç½‘æ ¼è¾¹ç¼˜è¿›å…¥å†…éƒ¨çš„æµé‡è·¯å¾„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å°† TEG é›†æˆåˆ° Istio ç½‘æ ¼ä¸­ï¼Œé€šè¿‡åœ¨ TEG ä¸Šé…ç½® sidecar æ¥é¢å‘è¯ä¹¦ï¼ŒåŒæ—¶é¿å… sidecar æ‹¦æˆª TEG ä¸­çš„æµé‡ã€‚ç„¶åé€šè¿‡ Envoy Gateway æ§åˆ¶å…¥å£ç½‘å…³çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸º-teg-ä¸-istio-çš„äº’æ“ä½œåšå‡†å¤‡&#34;&gt;ä¸º TEG ä¸ Istio çš„äº’æ“ä½œåšå‡†å¤‡&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†ä½¿ TEG ä½œä¸º Istio çš„å…¥å£ç½‘å…³ï¼Œåº”æ³¨æ„ä»¥ä¸‹å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å®‰è£… Istio æ—¶ï¼Œé¿å…å¯ç”¨ Ingress Gatewayã€‚æˆ‘ä»¬å°†æ‰‹åŠ¨å®‰è£…å¹¶é…ç½® TEG ä½œä¸º Istio çš„å…¥å£ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äº Istio å’Œ TEG éƒ½ä½¿ç”¨ Envoy ä½œä¸ºä»£ç†ï¼Œæˆ‘ä»¬éœ€è¦è®© Istio ä¸º TEG çš„ç½‘å…³ Pod æ³¨å…¥ Envoy sidecarï¼Œä»¥ä¾¿ TEG å¯ä»¥å®‰å…¨åœ°ä¸ Istio æ•°æ®å¹³é¢é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½® Envoy Gateway åˆ›å»ºçš„ Envoy ä»£ç†çš„&lt;a href=&#34;https://gateway.envoyproxy.io/latest/api/extension_types/#routingtype&#34; title=&#34;è·¯ç”±ç±»å‹&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è·¯ç”±ç±»å‹&lt;/a&gt;ä¸º &lt;code&gt;Service&lt;/code&gt; è€Œé &lt;code&gt;Endpoint&lt;/code&gt;ï¼Œç¡®ä¿ Envoy ä»£ç†èƒ½æ­£ç¡®æ‰¾åˆ°è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸º TEG çš„å‘½åç©ºé—´æ·»åŠ æ ‡ç­¾ï¼Œä»¥ç¡®ä¿æ•°æ®å¹³é¢è·å¾— Istio sidecar çš„æ³¨å…¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace envoy-gateway-system --overwrite&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦é…ç½® TEG çš„ sidecarï¼Œä½¿å…¶ä¸å¤„ç†è¿›å…¥ç½‘å…³çš„ Envoy æµé‡ã€‚æ³¨å…¥ sidecar çš„ç›®çš„æ˜¯ä½¿ Envoy Gateway çš„ç»„ä»¶åŠå…¶åˆ›å»ºçš„ä»£ç†èƒ½å¤Ÿè¢«çº³å…¥ Istio ç½‘æ ¼ï¼Œå¹¶æŒ‚è½½æ­£ç¡®çš„è¯ä¹¦è¿›è¡Œå®‰å…¨é€šä¿¡ã€‚&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;control-plane-tls.yaml&#34; download&gt;control-plane-tls.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;18000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;appProtocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl patch service -n envoy-gateway-system envoy-gateway &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;     --type strategic --patch-file control-plane-tls.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½® Envoy Gateway ä¸­çš„ sidecar ä¸æ‹¦æˆªæµé‡ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;teg-sidecars-no-inbound.yaml&#34; download&gt;teg-sidecars-no-inbound.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.envoyproxy.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyProxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;data-plane-sidecars&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy-gateway-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;provider&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Kubernetes&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;envoyDeployment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;pod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;traffic.sidecar.istio.io/includeInboundPorts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;routingType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f teg-sidecars-no-inbound.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹ GatewayClass çš„é…ç½®ï¼Œå°†ä¸Šè¿° sidecar é…ç½®åº”ç”¨åˆ° Envoy Gateway æ•°æ®å¹³é¢çš„æ‰€æœ‰ &lt;code&gt;EnvoyProxy&lt;/code&gt; ä¸Šï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;gtwcls-use-envoyproxy.yaml&#34; download&gt;gtwcls-use-envoyproxy.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parametersRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.envoyproxy.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyProxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy-gateway-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;data-plane-sidecars&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl patch gatewayclass teg --patch-file gtwcls-use-envoyproxy.yaml --type merge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®‰è£…-istio&#34;&gt;å®‰è£… Istio&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ minimal profile éƒ¨ç½² Istioï¼Œä»è€Œä¸éƒ¨ç½² Ingress Gatewayï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl install --set &lt;span class=&#34;nv&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;minimal -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é‡å¯-teg-æ§åˆ¶å¹³é¢&#34;&gt;é‡å¯ TEG æ§åˆ¶å¹³é¢&lt;/h3&gt;
&lt;p&gt;ç°åœ¨ Istio çš„ sidecar æ³¨å…¥å·²å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å°†é‡å¯æ‰€æœ‰ TEG æ§åˆ¶å¹³é¢ Podï¼Œå®ƒä»¬å°†å¸¦æœ‰ sidecar é‡æ–°å¯åŠ¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; d in envoy-gateway envoy-ratelimit teg-envoy-gateway teg-redis&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; kubectl rollout restart deployment -n envoy-gateway-system &lt;span class=&#34;nv&#34;&gt;$d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;éƒ¨ç½²æµ‹è¯•åº”ç”¨&#34;&gt;éƒ¨ç½²æµ‹è¯•åº”ç”¨&lt;/h3&gt;
&lt;p&gt;æ­¤æ­¥åº”åœ¨å®‰è£… Istio ä¹‹åè¿›è¡Œï¼Œä»¥ç¡®ä¿å®ƒä»¬ä¹Ÿè·å¾— sidecar çš„æ³¨å…¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create namespace httpbin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace httpbin --overwrite&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -n httpbin -f https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®-teg&#34;&gt;é…ç½® TEG&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬é…ç½® TEG å¤„ç†è¾¹ç¼˜æµé‡ã€‚&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;apps-gateway.yaml&#34; download&gt;apps-gateway.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;teg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f apps-gateway.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éƒ¨ç½²åº”ç”¨ç½‘å…³ï¼ŒåŒ…å«ä»¥ä¸‹å®¹å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;istio-init&lt;/code&gt;ï¼šç”± Istio æ³¨å…¥ï¼Œè´Ÿè´£ä¿®æ”¹ pod ä¸­çš„ iptables&lt;/li&gt;
&lt;li&gt;&lt;code&gt;envoy&lt;/code&gt;ï¼šç”± TEG æ§åˆ¶ï¼Œä½œä¸ºå…¥å£ç½‘å…³&lt;/li&gt;
&lt;li&gt;&lt;code&gt;istio-proxy&lt;/code&gt;ï¼šç”± Istio æ³¨å…¥ï¼Œè´Ÿè´£ä¸é›†ç¾¤å†…éƒ¨ pod è”ç³»&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shutdown-manager&lt;/code&gt;ï¼šç”± TEG æ§åˆ¶ï¼Œè´Ÿè´£ Pod å¯åœ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ›å»º HTTP è·¯ç”±ï¼š&lt;/p&gt;







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;httpbin-route.yaml&#34; download&gt;httpbin-route.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.example.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/httpbin/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;URLRewrite&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;urlRewrite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.httpbin.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ReplacePrefixMatch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replacePrefixMatch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f httpbin-route.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å‘é€æµ‹è¯•è¯·æ±‚&#34;&gt;å‘é€æµ‹è¯•è¯·æ±‚&lt;/h3&gt;
&lt;p&gt;è·å–ç½‘å…³çš„è´Ÿè½½å‡è¡¡å™¨ IP åœ°å€ï¼Œå¹¶å‘é€æµ‹è¯•è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get svc -n envoy-gateway-system -l gateway.envoyproxy.io/owning-gateway-name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;apps -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].status.loadBalancer.ingress[0].ip}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -v -H Host:www.example.com http://&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;/httpbin/get
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†çœ‹åˆ°æ¥è‡ª &lt;code&gt;httpbin&lt;/code&gt; æœåŠ¡çš„æ­£ç¡®å“åº”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;*   Trying 34.41.0.90:80...
* Connected to 34.41.0.90 (34.41.0.90) port 80
&amp;gt; GET /httpbin/get HTTP/1.1
&amp;gt; Host:www.example.com
&amp;gt; User-Agent: curl/8.7.1
&amp;gt; Accept: */*
&amp;gt;
* Request completely sent off
&amp;lt; HTTP/1.1 200 OK
&amp;lt; server: envoy
&amp;lt; date: Wed, 31 Jul 2024 08:21:58 GMT
&amp;lt; content-type: application/json
&amp;lt; content-length: 282
&amp;lt; access-control-allow-origin: *
&amp;lt; access-control-allow-credentials: true
&amp;lt; x-envoy-upstream-service-time: 11
&amp;lt;
{
  &amp;#34;args&amp;#34;: {},
  &amp;#34;headers&amp;#34;: {
    &amp;#34;Accept&amp;#34;: &amp;#34;*/*&amp;#34;,
    &amp;#34;Host&amp;#34;: &amp;#34;www.example.com&amp;#34;,
    &amp;#34;User-Agent&amp;#34;: &amp;#34;curl/8.7.1&amp;#34;,
    &amp;#34;X-Envoy-Attempt-Count&amp;#34;: &amp;#34;1&amp;#34;,
    &amp;#34;X-Envoy-External-Address&amp;#34;: &amp;#34;123.120.227.173&amp;#34;
  },
  &amp;#34;origin&amp;#34;: &amp;#34;123.120.227.173&amp;#34;,
  &amp;#34;url&amp;#34;: &amp;#34;http://www.example.com/get&amp;#34;
}
* Connection #0 to host 34.41.0.90 left intact
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å¯ç”¨ä¸¥æ ¼çš„-mtls&#34;&gt;å¯ç”¨ä¸¥æ ¼çš„ mTLS&lt;/h3&gt;
&lt;p&gt;è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¯ç”¨ä¸¥æ ¼çš„ mTLSï¼š







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;strict-mtls.yaml&#34; download&gt;strict-mtls.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PeerAuthentication&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;istio-system&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mtls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;STRICT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f strict-mtls.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¸ºç½‘å…³å¯ç”¨-tls&#34;&gt;ä¸ºç½‘å…³å¯ç”¨ TLS&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºç”¨äºæœåŠ¡ç­¾åçš„æ ¹è¯ä¹¦å’Œç§é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir example_certs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -x509 -sha256 -nodes -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; -newkey rsa:2048 -subj &lt;span class=&#34;s1&#34;&gt;&amp;#39;/O=example Inc./CN=example.com&amp;#39;&lt;/span&gt; -keyout example_certs/example.com.key -out example_certs/example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸º &lt;code&gt;www.example.com&lt;/code&gt; åˆ›å»ºè¯ä¹¦å’Œç§é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -out example_certs/www.example.com.csr -newkey rsa:2048 -nodes -keyout example_certs/www.example.com.key -subj &lt;span class=&#34;s2&#34;&gt;&amp;#34;/CN=www.example.com/O=www organization&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -req -sha256 -days &lt;span class=&#34;m&#34;&gt;365&lt;/span&gt; -CA example_certs/example.com.crt -CAkey example_certs/example.com.key -set_serial &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; -in example_certs/www.example.com.csr -out example_certs/www.example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºå…¥å£ç½‘å…³åˆ›å»º secretï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create -n httpbin secret tls httpbin-credential &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --key&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;example_certs/www.example.com.key &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --cert&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;example_certs/www.example.com.crt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½®å…¥å£ç½‘å…³ï¼š







  


&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;tls-apps-gateway.yaml&#34; download&gt;tls-apps-gateway.yaml&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;teg&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Terminate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certificateRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin-credential&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f tls-apps-gateway.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘é€æµ‹è¯•è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -v -H Host:www.example.com --resolve &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.example.com:443:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --cacert example_certs/example.com.crt &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://www.example.com:443/httpbin/get&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¯ä»¥é€šè¿‡ HTTPS è®¿é—®ç½‘æ ¼å†…çš„ &lt;code&gt;httpbin&lt;/code&gt; æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Tetrate Enterprise Gateway ä¸ºä¼ä¸šæä¾›äº†ä¸€ç§å¼ºå¤§çš„ç½‘å…³è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­é«˜æ•ˆåœ°æš´éœ²å’Œç®¡ç†åº”ç”¨æœåŠ¡ã€‚é€šè¿‡å…¶åŸºäº Envoy çš„æ¶æ„å’Œå¯¹ Kubernetes Gateway API çš„æ”¯æŒï¼ŒTEG ä¸ä»…ç¡®ä¿äº†é«˜æ€§èƒ½çš„æµé‡ç®¡ç†ï¼Œè¿˜å¤§å¹…ç®€åŒ–äº†ç½‘å…³çš„éƒ¨ç½²å’Œç»´æŠ¤ã€‚æ— è®ºæ˜¯é¢å¯¹å¤æ‚çš„å®‰å…¨éœ€æ±‚è¿˜æ˜¯é«˜æµé‡çš„ä¸šåŠ¡åœºæ™¯ï¼ŒTEG éƒ½èƒ½æä¾›å¯é çš„æ”¯æŒï¼Œå¸®åŠ©ä¼ä¸šå®ç°å…¶ä¸šåŠ¡è¿ç»­æ€§å’ŒæŠ€æœ¯åˆ›æ–°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.tetrate.io/envoy-gateway/v0.0.0-latest/howto/eg-and-istio&#34; title=&#34;Using TEG in Conjunction with an Istio Service Mesh - docs.tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Using TEG in Conjunction with an Istio Service Mesh - docs.tetrate.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¢ç´¢ Envoy 1.31.0ï¼šæ–°ç‰¹æ€§ä¸æ€§èƒ½æå‡å…¨è§£æ</title>
      <link>https://jimmysong.io/blog/exploring-envoy-1-31-features-performance/</link>
      <pubDate>Sat, 20 Jul 2024 07:30:55 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/exploring-envoy-1-31-features-performance/</guid>
      <description>
        
        
        &lt;p&gt;ä»Šå¤© Envoy Proxy 1.31.0 å‘å¸ƒï¼Œè¿™æ˜¯ä»Šå¹´ç»§ 1.29ã€1.30 ä»¥æ¥å‘å¸ƒçš„ç¬¬ä¸‰ä¸ªå¤§ç‰ˆæœ¬ã€‚Envoy Proxy 1.31.0 çš„å‘å¸ƒæ ‡å¿—ç€æ­¤å¼€æºç½‘ç»œä»£ç†é¡¹ç›®åœ¨æ€§èƒ½ä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼ºæ–¹é¢åˆè¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ã€‚æ­¤ç‰ˆæœ¬åŒ…æ‹¬äº†ä¸€ç³»åˆ—å¼•äººæ³¨ç›®çš„æ–°ç‰¹æ€§ã€è¡Œä¸ºå˜åŒ–å’Œæ–°é…ç½®é€‰é¡¹ï¼Œä¸‹é¢æˆ‘ä»¬å°†é€ä¸€è§£æè¿™äº›æ›´æ–°ï¼Œå¸®åŠ©ä½ å……åˆ†åˆ©ç”¨ Envoy çš„æœ€æ–°èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–°ç‰¹æ€§&#34;&gt;æ–°ç‰¹æ€§&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;HTTP/3 &amp;ldquo;Happy Eyeballs&amp;rdquo; ç‰¹æ€§&lt;/strong&gt;: HTTP/3çš„æ”¯æŒç°åœ¨æ›´ä¸ºæ™ºèƒ½ï¼Œæ–°åŠ å…¥çš„â€œhappy eyeballsâ€ç®—æ³•å¯ä»¥åœ¨å¤šä¸ª IP åœ°å€æ—ä¸­æ›´å¿«æ‰¾åˆ°æœ€ä¼˜è¿æ¥è·¯å¾„ï¼Œæå‡è¿æ¥çš„å¯é æ€§å’Œé€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proxy Protocol ç±»å‹å…ƒæ•°æ®æ”¯æŒ&lt;/strong&gt;: åœ¨ä»£ç†åè®®ç›‘å¬å™¨ä¸­ï¼Œé»˜è®¤ç°åœ¨ä¼šå¡«å……ç±»å‹åŒ–çš„å…ƒæ•°æ®ï¼Œä¸ºé«˜çº§è·¯ç”±å’Œç­–ç•¥å®æ–½æä¾›æ›´å¤šçš„çµæ´»æ€§å’Œç²¾ç¡®æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Redis å‘½ä»¤æ”¯æŒ&lt;/strong&gt;: Envoy ç°åœ¨æ”¯æŒæ‰€æœ‰ Bloom 1.0.0 çš„ Redis å‘½ä»¤ï¼Œæ‰©å±•äº†ä¸ Redis äº¤äº’çš„èƒ½åŠ›ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦é«˜çº§æ•°æ®ç»“æ„æ“ä½œçš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ol&gt;



&lt;div class=&#34;alert alert-note-container&#34;&gt;
  
  &lt;div class=&#34;alert-note-title px-2 py-2&#34;&gt;
    Happy Eyeballs
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-note px-2&#34;&gt;
    &lt;p&gt;Happy Eyeballsï¼ˆå¿«ä¹çš„çœ¼ç›ï¼‰æ˜¯ä¸€ç§ç½‘ç»œç®—æ³•ï¼Œä¸»è¦ç”¨äºå½“ä¸€ä¸ªè®¾å¤‡åŒæ—¶æ”¯æŒ IPv4 å’Œ IPv6 æ—¶ï¼Œå¿«é€Ÿå†³å®šåº”è¯¥ä½¿ç”¨å“ªç§ IP åè®®æ¥å»ºç«‹è¿æ¥ã€‚è¯¥ç®—æ³•é€šè¿‡å‡ ä¹åŒæ—¶å¯åŠ¨ä¸¤ä¸ªè¿æ¥å°è¯•â€”â€”ä¸€ä¸ªä½¿ç”¨ IPv4ï¼Œå¦ä¸€ä¸ªä½¿ç”¨ IPv6â€”â€”å¹¶ä½¿ç”¨å“ªä¸ªé¦–å…ˆæˆåŠŸå»ºç«‹çš„è¿æ¥ï¼Œä»è€Œå‡å°‘äº†è¿æ¥å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ HTTP/3 ä¸­åº”ç”¨ Happy Eyeballs ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯ Envoy 1.31 ç‰ˆæœ¬ä¸­çš„å®ç°ï¼Œå¯ä»¥æ”¹è¿›æœåŠ¡åœ¨æ”¯æŒå¤šç§ç½‘ç»œåè®®çš„ç¯å¢ƒä¸­çš„è¡¨ç°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡çš„ IPv4 è¿æ¥é€Ÿåº¦æ¯” IPv6 å¿«ï¼ŒEnvoy ä¼šåå¥½ IPv4ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å‡å°‘äº†å°è¯•è¿æ¥çš„æ€»æ—¶é—´ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒå’ŒæœåŠ¡æ•ˆç‡ã€‚&lt;/p&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;è¡Œä¸ºå˜åŒ–&#34;&gt;è¡Œä¸ºå˜åŒ–&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Thread Local å­˜å‚¨å˜æ›´&lt;/strong&gt;: &lt;code&gt;SlotImpl&lt;/code&gt; ç±»çš„è¡Œä¸ºæ›´æ–°ï¼Œå…¶ææ„å‡½æ•°ç°å¯åœ¨ä»»ä½•çº¿ç¨‹ä¸Šè¢«è°ƒç”¨ï¼Œæé«˜äº†çº¿ç¨‹å±€éƒ¨å­˜å‚¨çš„çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP/2 å’Œ QUIC æ€§èƒ½æå‡&lt;/strong&gt;: é»˜è®¤å¯ç”¨æ–°çš„ HTTP/2 ç¼–è§£ç å™¨å’Œå¯¹ HTTP/3 çš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ€§èƒ½æ”¹è¿›å’Œæ–°çš„è¿æ¥å°è¯•æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†æ€§èƒ½å’Œç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¼ƒç”¨ä¸ç§»é™¤&#34;&gt;å¼ƒç”¨ä¸ç§»é™¤&lt;/h2&gt;
&lt;p&gt;æ­¤ç‰ˆæœ¬ä¸­ï¼Œå¤šä¸ªæ—§æœ‰çš„é…ç½®å’Œè¿è¡Œæ—¶æ ‡å¿—è¢«æ­£å¼å¼ƒç”¨å’Œç§»é™¤ï¼Œä»¥æ¸…ç†ä»£ç åº“å¹¶æå‡ç»´æŠ¤æ•ˆç‡ã€‚è¿™åŒ…æ‹¬ä¸€äº›è€æ—§çš„ TLS å’Œ HTTP é…ç½®é€‰é¡¹ï¼Œç”¨æˆ·åº”æ£€æŸ¥å¹¶æ›´æ–°ä»–ä»¬çš„é…ç½®ä»¥å…å—åˆ°å½±å“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;Envoy 1.31.0 çš„å‘å¸ƒæä¾›äº†è®¸å¤šå€¼å¾—å…³æ³¨çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ï¼Œä¸ä»…å¢å¼ºäº†å…¶ä½œä¸ºç°ä»£å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒç»„ä»¶çš„åœ°ä½ï¼Œä¹Ÿè¿›ä¸€æ­¥è¯æ˜äº†å…¶ä½œä¸ºä¸šç•Œé¢†å…ˆä»£ç†è§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚æ— è®ºæ˜¯åœ¨æ€§èƒ½æå‡è¿˜æ˜¯åŠŸèƒ½æ‹“å±•æ–¹é¢ï¼ŒEnvoy 1.31.0 éƒ½ä¸ºç”¨æˆ·å¸¦æ¥äº†å®è´¨æ€§çš„å¥½å¤„ã€‚&lt;/p&gt;
&lt;p&gt;ç¡®ä¿æŸ¥çœ‹å®Œæ•´&lt;a href=&#34;https://github.com/envoyproxy/envoy/releases/tag/v1.31.0&#34; title=&#34;æ›´æ–°æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ›´æ–°æ–‡æ¡£&lt;/a&gt;ï¼Œäº†è§£æ‰€æœ‰è¯¦ç»†çš„é…ç½®æŒ‡å—å’Œæ›´æ–°è¯´æ˜ï¼Œä»¥å……åˆ†åˆ©ç”¨ Envoy 1.31.0 çš„æ½œåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;Envoy çš„æ¯æ¬¡æ›´æ–°éƒ½æ˜¯åŸºäºç¤¾åŒºçš„åé¦ˆå’Œè´¡çŒ®ï¼Œæˆ‘ä»¬æœŸå¾…çœ‹åˆ°ä½ å¦‚ä½•åˆ©ç”¨è¿™äº›æ–°ç‰¹æ€§æ¥ä¼˜åŒ–ä½ çš„åº”ç”¨å’ŒæœåŠ¡ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œæ¬¢è¿åœ¨ Slack æˆ– GitHub ä¸Šä¸ç¤¾åŒºäº¤æµã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å¦‚ä½•å‚ä¸ Envoy Gateway ç¤¾åŒºï¼šè´¡çŒ®æˆ–æäº¤ä»£ç æŒ‡å—</title>
      <link>https://jimmysong.io/blog/envoy-gateway-contributor-guide/</link>
      <pubDate>Wed, 17 Jul 2024 13:36:15 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/envoy-gateway-contributor-guide/</guid>
      <description>
        
        
        &lt;p&gt;Envoy Gateway æ˜¯ç”± Envoy Proxy ç¤¾åŒºæ¨åŠ¨çš„ä¸€ä¸ªå¼€æº API ç½‘å…³é¡¹ç›®ï¼Œç»“åˆäº† Contourã€Emissary ç­‰é¡¹ç›®åŠ›é‡ã€‚è¿™ä¸ªæŒ‡å—å°†å¸®åŠ©ä½ ç†è§£å¦‚ä½•è´¡çŒ®ä»£ç å’Œå‚ä¸ç¤¾åŒºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼€å§‹ä¹‹å‰&#34;&gt;å¼€å§‹ä¹‹å‰&lt;/h2&gt;
&lt;p&gt;äº†è§£é¡¹ç›®çš„&lt;a href=&#34;https://github.com/envoyproxy/gateway/blob/main/GOALS.md&#34; title=&#34;ç›®æ ‡å’Œæ„¿æ™¯&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›®æ ‡å’Œæ„¿æ™¯&lt;/a&gt;æ˜¯éå¸¸é‡è¦çš„ã€‚Envoy Gateway æ—¨åœ¨ä½œä¸ºä¸€ä¸ªç‹¬ç«‹æˆ–åŸºäº Kubernetes çš„åº”ç”¨ç¨‹åºç½‘å…³ï¼Œä½¿ç”¨ Gateway API èµ„æºæ¥ç®¡ç† Envoy ä»£ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å‚ä¸&#34;&gt;å¦‚ä½•å‚ä¸&lt;/h2&gt;
&lt;h3 id=&#34;1-æ²Ÿé€šåä½œ&#34;&gt;1. æ²Ÿé€šåä½œ&lt;/h3&gt;
&lt;p&gt;åœ¨å¼€å‘å‰ï¼Œå»ºè®®é€šè¿‡&lt;a href=&#34;https://github.com/envoyproxy/gateway&#34; title=&#34;GitHub&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt;æˆ–&lt;a href=&#34;https://communityinviter.com/apps/envoyproxy/envoy&#34; title=&#34;Slack&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Slack&lt;/a&gt;ä¸ç¤¾åŒºäº¤æµã€‚å§‹ç»ˆåˆ›å»ºä¸€ä¸ª GitHub Issue æ¥è®¨è®ºä½ çš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-è´¡çŒ®å‡†åˆ™&#34;&gt;2. è´¡çŒ®å‡†åˆ™&lt;/h3&gt;
&lt;p&gt;éµå®ˆ&lt;a href=&#34;https://gateway.envoyproxy.io/contributions/contributing/&#34; title=&#34;è´¡çŒ®å‡†åˆ™&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è´¡çŒ®å‡†åˆ™&lt;/a&gt;ï¼Œå®ƒåŒ…æ‹¬ä»£ç è§„èŒƒå’Œç¤¾åŒºè¡Œä¸ºå‡†åˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-æäº¤ä»£ç &#34;&gt;3. æäº¤ä»£ç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç­¾ç½² DCO&lt;/strong&gt;ï¼šç¡®ä¿ä½ çš„æäº¤ä¿¡æ¯åŒ…å« DCO ç­¾åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»º PR&lt;/strong&gt;ï¼šFork ä»“åº“åï¼Œæäº¤ PRã€‚ç¡®ä¿é€šè¿‡æ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç å®¡æŸ¥&lt;/strong&gt;ï¼šPR ä¼šè¢«ç»´æŠ¤äººå‘˜å®¡æŸ¥ï¼Œä¸€æ—¦æ»¡è¶³æ¡ä»¶ï¼Œå°†ä¼šè¢«åˆå¹¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ„å»ºå’Œæµ‹è¯•æŒ‡å—&#34;&gt;æ„å»ºå’Œæµ‹è¯•æŒ‡å—&lt;/h2&gt;
&lt;h3 id=&#34;ç¯å¢ƒå‡†å¤‡&#34;&gt;ç¯å¢ƒå‡†å¤‡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€å·¥å…·&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Goï¼ˆç‰ˆæœ¬ 1.22+ï¼‰&lt;/li&gt;
&lt;li&gt;Makeï¼ˆç‰ˆæœ¬ 4.0+ï¼‰&lt;/li&gt;
&lt;li&gt;Dockerï¼ˆå¯é€‰ï¼Œç‰ˆæœ¬ 20.10.16+ï¼Œç”¨äºæ„å»ºé•œåƒï¼‰&lt;/li&gt;
&lt;li&gt;Python3&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®æ­¥éª¤&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰å·¥å…·å‡å·²å®‰è£…å¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»£ç æ„å»º&#34;&gt;ä»£ç æ„å»º&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå‘½ä»¤&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ„å»ºå…¨éƒ¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼š&lt;code&gt;make build&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä»…æ„å»º Envoy Gatewayï¼š&lt;code&gt;make build BINS=&amp;quot;envoy-gateway&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ„å»ºæ§åˆ¶å·¥å…· &lt;code&gt;egctl&lt;/code&gt;ï¼š&lt;code&gt;make build BINS=&amp;quot;egctl&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æµ‹è¯•&#34;&gt;æµ‹è¯•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œæµ‹è¯•&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;make test&lt;/code&gt; æ¥è¿›è¡Œ Go è¯­è¨€çš„æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆæµ‹è¯•æ•°æ®&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;make testdata&lt;/code&gt; æ¥ç”Ÿæˆ YAML æ ¼å¼çš„æµ‹è¯•æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;lint-æ£€æŸ¥&#34;&gt;Lint æ£€æŸ¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ Lint&lt;/strong&gt;ï¼šè¿è¡Œ &lt;code&gt;make lint&lt;/code&gt; ç¡®ä¿ä»£ç é£æ ¼å’Œæ ‡å‡†ä¸€è‡´æ€§ï¼ˆæ³¨æ„ä¿®æ­£ç°æœ‰çš„æ‹¼å†™é”™è¯¯ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é•œåƒæ“ä½œ&#34;&gt;é•œåƒæ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºé•œåƒ&lt;/strong&gt;ï¼š&lt;code&gt;IMAGE=docker.io/&amp;lt;dockerhub-id&amp;gt;/gateway-dev make image&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨é€å¤šæ¶æ„é•œåƒ&lt;/strong&gt;ï¼š&lt;code&gt;IMAGE=docker.io/&amp;lt;dockerhub-id&amp;gt;/gateway-dev make push-multiarch&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;éƒ¨ç½²å’Œè°ƒè¯•&#34;&gt;éƒ¨ç½²å’Œè°ƒè¯•&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°é›†ç¾¤åˆ›å»º&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;make create-cluster&lt;/code&gt; åœ¨ Kind ä¸Šåˆ›å»ºæµ‹è¯•/å¼€å‘ç”¨çš„é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²åˆ° Kubernetes&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;IMAGE=docker.io/&amp;lt;dockerhub-id&amp;gt;/gateway-dev TAG=&amp;lt;image-tag&amp;gt; make kube-deploy&lt;/code&gt; å°† Envoy Gateway éƒ¨ç½²è‡³ Kubernetesã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²ç¤ºä¾‹åº”ç”¨&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;make kube-demo&lt;/code&gt; éƒ¨ç½² demo åç«¯æœåŠ¡åŠç›¸å…³ç½‘ç»œèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤éƒ¨ç½²&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;make kube-demo-undeploy&lt;/code&gt; åˆ é™¤ç¤ºä¾‹åº”ç”¨ã€‚æ‰§è¡Œ &lt;code&gt;make kube-undeploy&lt;/code&gt; åˆ é™¤ Envoy Gatewayã€‚&lt;/li&gt;
&lt;/ul&gt;



&lt;div class=&#34;alert alert-note-container&#34;&gt;
  
  &lt;div class=&#34;alert-note-title px-2 py-2&#34;&gt;
    Kind ä¸­è¿è¡Œçš„ Pod åˆ—è¡¨
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-note px-2&#34;&gt;
    &lt;p&gt;å½“ä½ å®Œæˆ Envoy Gateway å’Œç¤ºä¾‹åº”ç”¨éƒ¨ç½²åï¼Œè¿è¡Œ &lt;code&gt;kubectl get pod -A&lt;/code&gt; å‘½ä»¤ï¼Œä½ å°†çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ Pod åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;details class=&#34;spoiler&#34; id=&#34;spoiler-0&#34;&gt;
  &lt;summary&gt;æŸ¥çœ‹ Kind ä¸­è¿è¡Œçš„ Pod&lt;/summary&gt;
  &lt;p&gt;&lt;pre&gt;&lt;code&gt; NAMESPACE              NAME                                                  READY   STATUS    RESTARTS      AGE
 default                backend-96f75bbf-tcdf7                                1/1     Running   1 (97s ago)   13h
 envoy-gateway-system   envoy-default-eg-e41e7b31-668f754989-wb7xr            2/2     Running   2 (97s ago)   13h
 envoy-gateway-system   envoy-gateway-b457dc69b-l77cr                         1/1     Running   2 (97s ago)   13h
 kube-system            coredns-5dd5756b68-b494d                              1/1     Running   1 (97s ago)   14h
 kube-system            coredns-5dd5756b68-j46bx                              1/1     Running   1 (97s ago)   14h
 kube-system            etcd-envoy-gateway-control-plane                      1/1     Running   1 (97s ago)   14h
 kube-system            kindnet-sq4b4                                         1/1     Running   1 (97s ago)   14h
 kube-system            kube-apiserver-envoy-gateway-control-plane            1/1     Running   1 (97s ago)   14h
 kube-system            kube-controller-manager-envoy-gateway-control-plane   1/1     Running   2 (97s ago)   14h
 kube-system            kube-proxy-4x72s                                      1/1     Running   1 (97s ago)   14h
 kube-system            kube-scheduler-envoy-gateway-control-plane            1/1     Running   2 (97s ago)   14h
 local-path-storage     local-path-provisioner-6f8956fb48-shjcz               1/1     Running   2 (59s ago)   14h
 metallb-system         controller-5c6b6c8447-kjl4n                           1/1     Running   2 (59s ago)   14h
 metallb-system         speaker-6zlrb                                         1/1     Running   1 (97s ago)   14h
&lt;/code&gt;&lt;/pre&gt;
&lt;/p&gt;
&lt;/details&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&#34;è°ƒè¯•-envoy-é…ç½®&#34;&gt;è°ƒè¯• Envoy é…ç½®&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç«¯å£è½¬å‘è®¾ç½®&lt;/strong&gt;ï¼š
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ENVOY_DEPLOYMENT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get deploy -n envoy-gateway-system --selector&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gateway.envoyproxy.io/owning-gateway-namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;default,gateway.envoyproxy.io/owning-gateway-name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eg -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl port-forward deploy/&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ENVOY_DEPLOYMENT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; -n envoy-gateway-system 19000:19000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®&lt;/strong&gt;ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ &lt;code&gt;http://localhost:19000&lt;/code&gt; è®¿é—® Envoy ç®¡ç†ç•Œé¢è¿›è¡Œé…ç½®è°ƒè¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œç¯å¢ƒé€‚é…&lt;/strong&gt;ï¼šåœ¨ä¸­å›½å¤§é™†è¿›è¡Œæ„å»ºå’Œæ¨é€é•œåƒæ—¶ï¼Œå¯èƒ½éœ€è¦è®¾ç½® Docker ä»£ç†ä»¥ç¡®ä¿ä¾èµ–çš„é•œåƒèƒ½å¤Ÿä¸‹è½½ã€‚è¯¦ç»†æ“ä½œå¯å‚è€ƒ&lt;a href=&#34;https://docs.docker.com/network/proxy/&#34; title=&#34;è®¾ç½® Docker ä»£ç†&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®¾ç½® Docker ä»£ç†&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;



&lt;div class=&#34;alert alert-warning-container&#34;&gt;
  
  &lt;div class=&#34;alert-warning-title px-2 py-2&#34;&gt;
    æ³¨æ„äº‹é¡¹
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-warning px-2&#34;&gt;
    &lt;p&gt;è‹¥ä½ åœ¨ä¸­å›½å¤§é™†çš„ç½‘ç»œç¯å¢ƒä¸‹æ„å»ºå’Œæ¨é€é•œåƒï¼Œéœ€è¦ä¸º Docker è®¾ç½®ä»£ç†ï¼Œå¦åˆ™ä½ å°†æ— æ³•ä¸‹è½½ä¸€äº›ä¾èµ–é•œåƒã€‚ä½ å¯ä»¥å°†å®ƒä»¬ä¸‹è½½åˆ°æœ¬åœ°åå†ç”¨ &lt;code&gt;kind load&lt;/code&gt; å‘½ä»¤åŠ è½½åˆ° kind é‡Œã€‚éœ€è¦ä¸‹è½½å’ŒåŠ è½½åˆ° kind é‡Œçš„é•œåƒè§ä¸‹é¢çš„ä»£ç ã€‚&lt;/p&gt;
&lt;details class=&#34;spoiler&#34; id=&#34;spoiler-0&#34;&gt;
  &lt;summary&gt;pull-and-load-images-for-kind.sh&lt;/summary&gt;
  &lt;p&gt;&lt;div class=&#34;internal-file&#34;&gt;
  &lt;a href=&#34;pull-and-load-images-for-kind.sh&#34; download&gt;pull-and-load-images-for-kind.sh&lt;/a&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Pull the images and load them into the kind cluster...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker pull envoy-gateway-control-plane quay.io/metallb/controller:v0.13.10
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker pull envoy-gateway-control-plane quay.io/metallb/speaker:v0.13.10
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker pull envoy-gateway-control-plane docker.io/jimmysong/gateway-dev:435a4dc1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker pull envoy-gateway-control-plane envoyproxy/envoy:distroless-dev
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker pull envoy-gateway-control-plane gcr.io/k8s-staging-gateway-api/echo-basic:v20231214-v1.0.0-140-gf544a46e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kind load docker-image -n envoy-gateway --nodes envoy-gateway-control-plane quay.io/metallb/controller:v0.13.10
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kind load docker-image -n envoy-gateway --nodes envoy-gateway-control-plane quay.io/metallb/speaker:v0.13.10
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kind load docker-image -n envoy-gateway --nodes envoy-gateway-control-plane docker.io/jimmysong/gateway-dev:435a4dc1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kind load docker-image -n envoy-gateway --nodes envoy-gateway-control-plane envoyproxy/envoy:distroless-dev
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kind load docker-image -n envoy-gateway --nodes envoy-gateway-control-plane gcr.io/k8s-staging-gateway-api/echo-basic:v20231214-v1.0.0-140-gf544a46e
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/p&gt;
&lt;/details&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&#34;æ›´å¤šèµ„æº&#34;&gt;æ›´å¤šèµ„æº&lt;/h3&gt;
&lt;p&gt;æƒ³æ·±å…¥äº†è§£å¦‚ä½•è¿›è¡Œé«˜çº§æµ‹è¯•å’Œè´¡çŒ®ï¼Œè¯¦è§ &lt;a href=&#34;https://gateway.envoyproxy.io/contributions/develop/&#34; title=&#34;Envoy Gateway å¼€å‘æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway å¼€å‘æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åŠ å…¥æˆ‘ä»¬ï¼Œä¸å…¨çƒå¼€å‘è€…å…±åŒæ¨è¿› Envoy Gateway çš„æˆé•¿ï¼ŒåŒæ—¶æå‡ä½ çš„å¼€å‘æŠ€èƒ½å’Œå¯¹å¼€æºç¤¾åŒºçš„ç†è§£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŠ å…¥-envoy-gateway-ä¸­æ–‡äº¤æµç¾¤&#34;&gt;åŠ å…¥ Envoy Gateway ä¸­æ–‡äº¤æµç¾¤&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ä¾¿äºä¸­æ–‡å’Œä¸­å›½æ—¶åŒºçš„ç”¨æˆ·äº¤æµï¼ŒEnvoy Gateway ç¤¾åŒºæˆç«‹çš„å¾®ä¿¡ç¾¤ï¼Œè¯¦è§&lt;a href=&#34;https://jimmysong.io/notice/envoy-gateway-group/&#34; title=&#34;é€šçŸ¥&#34;&gt;é€šçŸ¥&lt;/a&gt;ï¼Œè¯¥ç¾¤æˆç«‹äº 2023 å¹´ 4 æœˆï¼Œç›®å‰å·²æœ‰ 400 å¤šåæˆå‘˜ã€‚ä½ å¯ä»¥è”ç³»&lt;a href=&#34;https://jimmysong.io/contact/&#34; title=&#34;è”ç³»æˆ‘&#34;&gt;è”ç³»æˆ‘&lt;/a&gt;ã€&lt;a href=&#34;https://www.liuxunzhuo.com/&#34; title=&#34;åˆ˜è®­ç¼&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åˆ˜è®­ç¼&lt;/a&gt;ã€&lt;a href=&#34;https://zhaohuabing.com/&#34; title=&#34;èµµåŒ–å†°&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;èµµåŒ–å†°&lt;/a&gt;ç­‰å…¥ç¾¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gateway.envoyproxy.io/contributions/develop/&#34; title=&#34;Envoy Gateway Developer Guide - gateway.envoyproxy.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway Developer Guide - gateway.envoyproxy.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>Fantastic Planetï¼šæƒåŠ›ã€è§£æ”¾ä¸æ–‡æ˜é—´çš„å¾®å¦™å¹³è¡¡ â€” æ·±å…¥æ¢ç´¢åŸå§‹æ˜Ÿçƒä¸­çŸ¥è¯†å’Œè‡ªç”±çš„åŠ›é‡</title>
      <link>https://jimmysong.io/blog/exploring-fantastic-planet/</link>
      <pubDate>Fri, 12 Jul 2024 11:51:52 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/exploring-fantastic-planet/</guid>
      <description>
        
        
        &lt;p&gt;æœ€è¿‘æˆ‘è§‚çœ‹äº†ä¸€éƒ¨åä¸º &lt;a href=&#34;https://movie.douban.com/subject/1291989/&#34; title=&#34;Fantastic Planet&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fantastic Planet&lt;/a&gt; çš„ç”µå½±ï¼Œè¿™éƒ¨ç”µå½±ç»™äº†æˆ‘æå¤§çš„éœ‡æ’¼ï¼Œä»¤äººæ„æƒ³ä¸åˆ°çš„æ˜¯ï¼Œè¿™å±…ç„¶æ˜¯ä¸€éƒ¨ä¸Šä¸–çºªä¸ƒåå¹´ä»£çš„ä½œå“ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-poster.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-poster.webp&#34; alt=&#34;image&#34; data-caption=&#34;Fantastic Planet ç”µå½±æµ·æŠ¥&#34;&gt;
  
  
  &lt;figcaption&gt;Fantastic Planet ç”µå½±æµ·æŠ¥&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘æƒ³è·Ÿä½ åˆ†äº«ä¸€ä¸‹è¿™éƒ¨ç”µå½±ï¼ŒåŠå…¶å¼•ç”³ä½œå“ï¼Œè¿˜æœ‰æˆ‘å¯¹è¿™éƒ¨ç”µå½±çš„ä¸€äº›çœ‹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŸå§‹æ˜Ÿçƒä¸­çš„ä¸–ç•Œè§‚&#34;&gt;åŸå§‹æ˜Ÿçƒä¸­çš„ä¸–ç•Œè§‚&lt;/h2&gt;
&lt;p&gt;ã€ŠFantastic Planetã€‹ï¼ˆæ³•è¯­åŸåâ€œLa PlanÃ¨te sauvageâ€ï¼Œä¸­æ–‡è¯‘åâ€œåŸå§‹æ˜Ÿçƒâ€ï¼‰ä»¥å…¶ç‹¬ç‰¹çš„ä¸–ç•Œè§‚å’Œå¼ºçƒˆçš„è±¡å¾æ„ä¹‰å¸å¼•äº†æ— æ•°è§‚ä¼—ã€‚è¿™éƒ¨ç”µå½±æç»˜äº†ä¸€ä¸ªåä¸º Ygam çš„æ˜Ÿçƒï¼Œä¸Šé¢å±…ä½ç€æ™ºæ…§è€Œåºå¤§çš„è“è‰²ç”Ÿç‰© Draags å’Œäººç±»å¤§å°çš„ Omsã€‚Draags å¯¹ Oms æ—¢æ˜¯å® ç‰©åˆæ˜¯å®éªŒå¯¹è±¡ï¼Œè¿™ç§å…³ç³»è±¡å¾ç€æƒåŠ›å’Œå‹è¿«ã€‚ç”µå½±é€šè¿‡è¿™ç§è¶…ç°å®çš„è®¾å®šï¼Œæ¢è®¨äº†å¥´å½¹ä¸åæŠ—ã€æ–‡åŒ–å†²çªä¸å…±ç”Ÿçš„æ·±åˆ»ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¯·çœ‹ä¸‹é¢çš„ç‰‡æ®µã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=413834098&amp;amp;bvid=BV1oV411674e&amp;amp;cid=212076690&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;ç”µå½±ä¸­å¤„å¤„éƒ½æœ‰ä¸€ç§è¯¡å¼‚çš„æ°›å›´ï¼Œå…¶ä¸­çš„é…ä¹ä¹Ÿæå…·ç‰¹è‰²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‰§æƒ…ä»‹ç»&#34;&gt;å‰§æƒ…ä»‹ç»&lt;/h2&gt;
&lt;p&gt;ã€ŠFantastic Planetã€‹çš„æ•…äº‹ä¸»è¦å›´ç»•ä¸€ä¸ªå¹´è½»çš„ Omï¼ˆäººç±»ï¼‰ï¼Œåä¸º Terr å±•å¼€ã€‚Terr æ˜¯åœ¨ Draags çš„ä¸–ç•Œä¸­è¢«å½“ä½œå® ç‰©å…»å¤§çš„ï¼Œä½†ä»–åˆ©ç”¨ä¸€æ¬¡å¶å‘çš„æœºä¼šé€ƒè„±äº†ã€‚å½“ä»–çš„â€œä¸»äººâ€Tiwa åœ¨ä¸€æ¬¡å­¦ä¹ è¿‡ç¨‹ä¸­åˆ†å¿ƒæ—¶ï¼ŒTerr æŠ“ä½æœºä¼šé€ƒç¦»ï¼Œå¹¶æœ€ç»ˆæ‰¾åˆ°äº†ä¸€ç¾¤é‡ç”Ÿçš„ Omsã€‚ç”µå½±ä¸­ï¼ŒDraags æ˜¯æ™ºæ…§è€Œé«˜å¤§çš„è“è‰²ç”Ÿç‰©ï¼Œå¯¹ Oms å®æ–½ç€ç±»ä¼¼å® ç‰©å’Œå¥´éš¶çš„ç®¡ç†ã€‚åœ¨ Terr çš„å¸¦é¢†ä¸‹ï¼Œä»–å’Œä»–çš„åŒä¼´ä»¬å¼€å§‹æ¢ç´¢ Ygam æ˜Ÿçƒï¼Œå­¦ä¹  Draags çš„æŠ€æœ¯å’ŒçŸ¥è¯†ï¼Œå¹¶æœ€ç»ˆæ‰¾åˆ°äº†åæŠ— Draags ç»Ÿæ²»çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;è¿™éƒ¨ç”µå½±çš„å‰§æƒ…å……æ»¡è½¬æŠ˜ï¼Œä¸ä»…å±•ç°äº† Terr æˆé•¿çš„æ—…ç¨‹ï¼Œè¿˜æ­ç¤ºäº†ä¸¤ç§æ–‡æ˜ä¹‹é—´çš„å†²çªä¸å’Œè§£ï¼Œæœ€ç»ˆè¿«ä½¿ Draags é‡æ–°è€ƒè™‘å¯¹ Oms çš„æ€åº¦ï¼Œå¯¼è‡´äº†ä¸¤ä¸ªç§æ—ä¹‹é—´çš„å’Œè§£ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-screenshots.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-screenshots.webp&#34; alt=&#34;image&#34; data-caption=&#34;Fantastic Planet ç”µå½±æˆªå›¾&#34;&gt;
  
  
  &lt;figcaption&gt;Fantastic Planet ç”µå½±æˆªå›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;æ•…äº‹çº¿&#34;&gt;æ•…äº‹çº¿&lt;/h3&gt;
&lt;p&gt;ç”µå½±çš„æƒ…èŠ‚ä¸»è¦å›´ç»• Terr çš„æˆé•¿å’Œä»–æœ€ç»ˆé¢†å¯¼ Om åæŠ— Draags çš„ç»Ÿæ²»å±•å¼€ã€‚æ•…äº‹çš„ä¸»è¦é˜¶æ®µåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æˆé•¿ä¸å­¦ä¹ &lt;/strong&gt;ï¼šåœ¨ Tiwa çš„å®¶ä¸­ï¼ŒTerr æ¥è§¦åˆ°äº† Draags çš„å­¦ä¹ è£…ç½®ï¼Œè¿™äº›è£…ç½®é€šè¿‡ç›´æ¥å‘å¤§è„‘ä¼ é€’ä¿¡æ¯çš„æ–¹å¼æ•™æˆçŸ¥è¯†ã€‚è™½ç„¶è¿™äº›è£…ç½®ä¸»è¦æ˜¯ä¸º Draags è®¾è®¡çš„ï¼Œä½† Terr åˆ©ç”¨å®ƒä»¬ç§˜å¯†å­¦ä¹ äº† Draags çš„è¯­è¨€å’Œç§‘æŠ€çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€ƒç¦»ä¸è‡ªç”±&lt;/strong&gt;ï¼šéšç€å¯¹ Draags æ–‡åŒ–çš„ç†è§£åŠ æ·±ï¼ŒTerr æ„è¯†åˆ°è‡ªå·±çš„å¥´å½¹åœ°ä½ï¼Œå†³å®šé€ƒç¦» Tiwa çš„å®¶ã€‚ä»–å¸¦èµ°äº†ä¸€ä¸ªé‡è¦çš„å­¦ä¹ è£…ç½®ï¼Œè¿™æˆä¸ºä»–å’Œå…¶ä»– Om åæŠ— Draags çš„å…³é”®å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ç”Ÿ Om ç¤¾åŒº&lt;/strong&gt;ï¼šé€ƒç¦»åï¼ŒTerr åŠ å…¥äº†ä¸€ä¸ªé‡ç”Ÿ Om ç¤¾åŒºï¼Œä»–ä»¬å±…ä½åœ¨ Ygam æ˜Ÿçƒçš„è’é‡ä¸­ã€‚åœ¨é‚£é‡Œï¼ŒTerr åˆ†äº«äº†ä»–ä» Draags é‚£é‡Œå­¦åˆ°çš„çŸ¥è¯†ï¼Œå¸®åŠ©ä»–ä»¬æé«˜æŠ€æœ¯æ°´å¹³ï¼Œä»è€Œæ›´å¥½åœ°æŠµæŠ— Draags çš„è¿«å®³ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åæŠ—ä¸å†²çª&lt;/strong&gt;ï¼šéšç€æŠ€æœ¯å’Œç»„ç»‡çš„å‘å±•ï¼ŒTerr å’Œå…¶ä»– Om å¼€å§‹æ›´åŠ ç§¯æåœ°åæŠ— Draagsã€‚ä»–ä»¬ç­–åˆ’å¹¶æ‰§è¡Œäº†å¤šæ¬¡è¡ŒåŠ¨ï¼Œå¹²æ‰° Draags çš„å†¥æƒ³ï¼Œæœ€ç»ˆå¼•å‘äº†åŒæ–¹çš„ç›´æ¥å†²çªã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å’Œè§£ä¸å…±å­˜&lt;/strong&gt;ï¼šç”µå½±çš„ç»“å°¾ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„æ–—äº‰å’Œç ´åï¼ŒåŒæ–¹è¾¾åˆ°äº†ä¸€ç§è„†å¼±çš„å’Œè§£ã€‚Draags å¼€å§‹é‡æ–°è€ƒè™‘å¯¹ Oms çš„æ€åº¦ï¼Œè€Œ Oms ä¹Ÿè·å¾—äº†æ›´å¤šçš„è‡ªç”±å’Œç”Ÿå­˜ç©ºé—´ã€‚æ•…äº‹ä»¥ä¸€ç§æš—ç¤ºæœªæ¥å¯èƒ½çš„å’Œå¹³å…±å­˜çš„æ–¹å¼ç»“æŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;draags-çš„å¼±ç‚¹&#34;&gt;Draags çš„å¼±ç‚¹&lt;/h3&gt;
&lt;p&gt;Draags çš„ä¸»è¦å¼±ç‚¹ä¹‹ä¸€æ˜¯ä»–ä»¬å¯¹ç²¾ç¥å†¥æƒ³å’Œå­¦ä¹ çš„ä¾èµ–ï¼Œè¿™æ˜¯ä»–ä»¬æ–‡åŒ–çš„ä¸€ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚Draags é€šè¿‡å†¥æƒ³å’Œç²¾ç¥æŠ•å°„æ¥ç»´æŒä»–ä»¬çš„ç¤¾ä¼šç»“æ„å’ŒçŸ¥è¯†ä¼ æ‰¿ã€‚è¿™ç§ç²¾ç¥æ´»åŠ¨è™½ç„¶å±•ç¤ºäº†ä»–ä»¬çš„é«˜åº¦æ™ºæ…§ï¼Œä½†ä¹Ÿä½¿ä»–ä»¬åœ¨æŸç§ç¨‹åº¦ä¸Šä¾èµ–äºå›ºå®šçš„ç¯å¢ƒå’Œä»ªå¼ï¼Œä¸€æ—¦è¿™ç§å¹³è¡¡è¢«æ‰“ç ´ï¼Œä»–ä»¬çš„ç¤¾ä¼šç§©åºå’Œä¸ªä½“èƒ½åŠ›å°±ä¼šå—åˆ°å½±å“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;oms-å¦‚ä½•æ‰“è´¥-draags&#34;&gt;Oms å¦‚ä½•æ‰“è´¥ Draags&lt;/h3&gt;
&lt;p&gt;åœ¨ç”µå½±ä¸­ï¼ŒOms æœ€åˆæ˜¯å¤„äºè¢«åŠ¨å’Œå—å‹è¿«çš„çŠ¶æ€ï¼Œä»–ä»¬è¢«è§†ä¸ºå® ç‰©æˆ–å®éªŒå¯¹è±¡ã€‚ç„¶è€Œï¼Œéšç€æ•…äº‹çš„å‘å±•ï¼ŒOms å¼€å§‹ç§¯ç´¯çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨ Terr çš„é¢†å¯¼ä¸‹ï¼Œä»–å·å­¦äº† Draags çš„çŸ¥è¯†å¹¶åˆ†äº«ç»™å…¶ä»– Omsã€‚Oms ä½¿ç”¨è¿™äº›çŸ¥è¯†åˆ¶é€ äº†è‡ªå·±çš„æ­¦å™¨å’Œé€šè®¯è®¾å¤‡ï¼Œç»„ç»‡èµ·æ¥è¿›è¡ŒæŠµæŠ—ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-meditation-ritual.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-meditation-ritual.webp&#34; alt=&#34;image&#34; data-caption=&#34;Draags çš„å†¥æƒ³ä»ªå¼&#34;&gt;
  
  
  &lt;figcaption&gt;Draags çš„å†¥æƒ³ä»ªå¼&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;Oms çš„è½¬å˜ç‚¹æ˜¯ä»–ä»¬å­¦ä¼šäº†å¹²æ‰° Draags çš„å†¥æƒ³ä»ªå¼ã€‚ä»–ä»¬å‘ç°ï¼Œé€šè¿‡ç ´å Draags è¿›è¡Œç²¾ç¥æŠ•å°„çš„ç‰¹å®šè®¾æ–½ï¼Œå¯ä»¥ç›´æ¥å½±å“ Draags çš„ç²¾ç¥å’Œèº«ä½“å¥åº·ã€‚æœ€ç»ˆï¼ŒOms é€šè¿‡ä¸€ç³»åˆ—ç­–ç•¥å’Œæˆ˜æ–—ï¼Œè¿«ä½¿ Draags é‡è§†ä»–ä»¬çš„éœ€æ±‚å’Œæƒåˆ©ï¼Œä»è€Œè¾¾åˆ°äº†ä¸€ç§æ–°çš„å¹³è¡¡å’Œç›¸äº’ç†è§£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç”µå½±çš„å¯“æ„å’Œæ—¶ä»£èƒŒæ™¯&#34;&gt;ç”µå½±çš„å¯“æ„å’Œæ—¶ä»£èƒŒæ™¯&lt;/h3&gt;
&lt;p&gt;ã€ŠFantastic Planetã€‹åœ¨ä¸ƒåå¹´ä»£çš„ç¤¾ä¼šæ”¿æ²»èƒŒæ™¯ä¸‹å…·æœ‰ä¸°å¯Œçš„è±¡å¾æ„ä¹‰ã€‚è¿™ä¸€æ—¶æœŸï¼Œä¸–ç•Œå„åœ°éƒ½å……æ–¥ç€ç¤¾ä¼šåŠ¨è¡ï¼ŒåŒ…æ‹¬è¶Šå—æˆ˜äº‰ã€æ°‘æƒè¿åŠ¨ã€ä»¥åŠå¯¹ä¼ ç»Ÿæƒå¨å’Œç¤¾ä¼šç»“æ„çš„å¹¿æ³›è´¨ç–‘ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç§æ—å’Œé˜¶çº§å†²çª&lt;/strong&gt;ï¼šDraags å’Œ Oms ä¹‹é—´çš„å…³ç³»è±¡å¾ç€ç§æ—å’Œé˜¶çº§å†²çªï¼Œåæ˜ äº†ç°å®ä¸–ç•Œä¸­çš„å‹è¿«å’Œä¸å¹³ç­‰ã€‚ç”µå½±é€šè¿‡å±•ç¤º Oms çš„å¥‹æ–—å’Œæœ€ç»ˆçš„æŠ—äº‰æˆåŠŸï¼Œä¼ é€’äº†å¯¹è‡ªç”±å’Œå¹³ç­‰çš„è¿½æ±‚ï¼Œä¸ä¸–ç•Œå„åœ°çš„è§£æ”¾è¿åŠ¨å’Œç¤¾ä¼šå˜é©å‘¼åº”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯å’Œä¼¦ç†&lt;/strong&gt;ï¼šDraags çš„å…ˆè¿›æŠ€æœ¯å’Œæ–‡åŒ–å¹¶æ²¡æœ‰ä½¿ä»–ä»¬å¯¹ Oms çš„å¯¹å¾…æ›´åŠ äººé“ï¼Œè¿™å¼•å‘äº†å…³äºç§‘æŠ€è¿›æ­¥ä¸ä¼¦ç†è´£ä»»ä¹‹é—´çš„å…³ç³»çš„è®¨è®ºã€‚è¿™ä¸€ä¸»é¢˜åœ¨å½“æ—¶ç§‘æŠ€è¿…é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹å°¤ä¸ºé‡è¦ï¼Œæç¤ºè§‚ä¼—ç§‘æŠ€åº”è¯¥å¦‚ä½•æœåŠ¡äºç¤¾ä¼šçš„æ•´ä½“ç¦ç¥‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒæ„è¯†&lt;/strong&gt;ï¼šç”µå½±ä¸­å¯¹ç¯å¢ƒå’Œå…¶ä»–ç‰©ç§çš„æç»˜ä¹Ÿåæ˜ äº†å½“æ—¶æ—¥ç›Šå¢é•¿çš„ç¯ä¿æ„è¯†ã€‚Draags å’Œ Oms å¯¹ç¯å¢ƒçš„ä¸åŒæ€åº¦å’Œå½±å“æš—ç¤ºäº†äººç±»æ´»åŠ¨å¯¹åœ°çƒç”Ÿæ€ç³»ç»Ÿçš„å½±å“ï¼Œä»¥åŠå¿…é¡»é‡‡å–è¡ŒåŠ¨ä»¥é¿å…ç¾éš¾æ€§åæœçš„ç´§è¿«æ„Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“å±€&#34;&gt;ç»“å±€&lt;/h2&gt;
&lt;p&gt;åœ¨ã€ŠFantastic Planetã€‹çš„ç»“å°¾ï¼Œä¸¤ä¸ªç§æ—ä¹‹é—´çš„å’Œè§£å¹¶ä¸æ˜¯åŸºäºå®Œå…¨çš„å’Œè°æˆ–ç†æƒ³åŒ–çš„æƒ…æ„Ÿè”ç³»ï¼Œè€Œæ˜¯åŸºäºåŠ›é‡å‡è¡¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å’Œè§£çš„ä¿æŒ&#34;&gt;å’Œè§£çš„ä¿æŒ&lt;/h3&gt;
&lt;p&gt;ç”µå½±ä¸­çš„å’Œè§£é€šè¿‡å±•ç¤ºä¸¤ç§æ–‡æ˜ä¹‹é—´è¾¾æˆçš„ä¸€ç§å¹³è¡¡æ¥æç»˜ï¼Œå…¶ä¸­ Oms é€šè¿‡è·å¾—çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œèƒ½å¤Ÿåœ¨æŸç§ç¨‹åº¦ä¸Šä¸ Draags ç«™åœ¨åŒä¸€ä¸ªæ°´å¹³çº¿ä¸Šã€‚Oms å­¦ä¼šäº†å¹²æ‰° Draags çš„å†¥æƒ³ä»ªå¼ï¼Œæ˜¾ç¤ºäº†ä»–ä»¬èƒ½å¤Ÿå½±å“ Draags çš„ç”Ÿæ´»å’Œå¹¸ç¦ã€‚è¿™ç§èƒ½åŠ›çš„è¯æ˜è¿«ä½¿ Draags é‡æ–°è¯„ä¼°ä»–ä»¬å¯¹ Oms çš„çœ‹æ³•ï¼Œå¹¶æ¥å— Oms ä½œä¸ºå¹³ç­‰çš„å­˜åœ¨ã€‚å› æ­¤ï¼ŒåŒæ–¹çš„å’Œè§£æ›´å¤šåœ°åŸºäºåŠ›é‡å¹³è¡¡å’Œç›¸äº’ä¾èµ–ï¼Œè€Œä¸ä»…ä»…æ˜¯å•æ–¹é¢çš„å®½æ•æˆ–è®©æ­¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ ¸å¤§æˆ˜çš„å…±åŒæ¯ç­&#34;&gt;æ ¸å¤§æˆ˜çš„å…±åŒæ¯ç­&lt;/h3&gt;
&lt;p&gt;è¿™ç§é€šè¿‡æ˜¾ç¤ºç ´ååŠ›æ¥è¾¾æˆå’Œè§£çš„æ–¹å¼ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šç±»ä¼¼äºå†·æˆ˜æ—¶æœŸçš„â€œå…±åŒæ¯ç­â€æ¦‚å¿µã€‚åœ¨æ ¸å¤§æˆ˜ç­–ç•¥ä¸­ï¼Œå…±åŒæ¯ç­ï¼ˆMutually Assured Destruction, MADï¼‰æ˜¯ä¸€ç§é˜»æ­¢æ ¸æˆ˜äº‰çš„ç†è®ºï¼Œå®ƒåŸºäºçš„å‡è®¾æ˜¯ä¸¤ä¸ªæ‹¥æœ‰å¤§é‡æ ¸æ­¦å™¨çš„å¯¹æ‰‹å¦‚æœå‘åŠ¨æ ¸æˆ˜äº‰ï¼Œå°†å¯¼è‡´åŒæ–¹çš„å½»åº•æ¯ç­ã€‚å› æ­¤ï¼Œææƒ§å’Œè‡ªæˆ‘ä¿æŠ¤çš„æœ¬èƒ½é˜»æ­¢äº†æ ¸æˆ˜äº‰çš„å‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ã€ŠFantastic Planetã€‹ä¸­ï¼Œè™½ç„¶æ²¡æœ‰ç›´æ¥çš„æ ¸æ­¦å™¨ï¼Œä½† Oms é€šè¿‡è·å¾—è¶³å¤Ÿçš„çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œä»¥åŠèƒ½å¤Ÿå¹²é¢„ Draags çš„ç”Ÿæ´»æ–¹å¼çš„èƒ½åŠ›ï¼Œå»ºç«‹äº†ä¸€ç§å½¢å¼çš„æˆ˜ç•¥å¹³è¡¡ã€‚è¿™ä½¿å¾— Draags å¿…é¡»æ‰¿è®¤ Oms çš„æƒåˆ©å’Œåœ°ä½ï¼Œä»è€Œé˜²æ­¢äº†è¿›ä¸€æ­¥çš„å†²çªå’Œç ´åï¼Œç¡®ä¿äº†ä¸¤ä¸ªç§æ—çš„å…±å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„å’Œè§£å’Œå¹³è¡¡å±•ç°äº†ä¸€ç§åŸºäºç›¸äº’å°Šé‡å’Œç†è§£çš„å…±å­˜æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿæé†’äº†ç°å®ä¸–ç•Œä¸­åŠ›é‡å¹³è¡¡çš„è„†å¼±æ€§å’Œç»´æŒå’Œå¹³çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºç”µå½±åŠè§’è‰²åç§°çš„è§£è¯»&#34;&gt;å…³äºç”µå½±åŠè§’è‰²åç§°çš„è§£è¯»&lt;/h2&gt;
&lt;p&gt;è¿™éƒ¨ç”µå½±çš„è¯‘ååŠå…¶ä¸­çš„è§’è‰²åç§°ä¹Ÿå¯Œæœ‰æ·±æ„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç”µå½±çš„è¯‘åä¸æ—¶ä»£èƒŒæ™¯&#34;&gt;ç”µå½±çš„è¯‘åä¸æ—¶ä»£èƒŒæ™¯&lt;/h3&gt;
&lt;p&gt;ã€ŠFantastic Planetã€‹çš„ä¸åŒè¯‘åæ˜ å°„å‡ºä¸åŒæ–‡åŒ–å¯¹è¿™éƒ¨ç”µå½±çš„è§£è¯»ã€‚æ³•è¯­åŸåâ€œLa PlanÃ¨te sauvageâ€å¸¦æœ‰â€œé‡æ€§â€çš„æš—ç¤ºï¼Œå¼ºè°ƒäº†ç”µå½±ä¸­é‡ç”Ÿä¸æ–‡æ˜çš„å¯¹æ¯”ï¼›è€Œè‹±æ–‡åâ€œFantastic Planetâ€åˆ™æ›´å¼ºè°ƒå¥‡å¹»å…ƒç´ ã€‚ä¸­æ–‡è¯‘åæœ‰â€œåŸå§‹æ˜Ÿçƒâ€ã€â€œç¥å¥‡æ˜Ÿçƒâ€ã€â€œå¥‡å¹»æ˜Ÿçƒâ€ç­‰ï¼Œç»“åˆäº†è¿™ä¸¤ç§å…ƒç´ ï¼Œæ—¢ä½“ç°äº†ç”µå½±çš„å¥‡å¼‚ç¾å­¦ï¼Œä¹Ÿæš—ç¤ºäº†å…¶æ·±åˆ»çš„å“²ç†ã€‚è¿™äº›è¯‘ååæ˜ äº†ä¸Šä¸–çºªä¸ƒåå¹´ä»£çš„æ–‡åŒ–èƒŒæ™¯ï¼Œå½“æ—¶ç¤¾ä¼šåŠ¨è¡å’Œå¯¹æƒå¨çš„è´¨ç–‘æ­£é…é…¿ä¹‹ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§’è‰²åç§°è§£è¯»&#34;&gt;è§’è‰²åç§°è§£è¯»&lt;/h2&gt;
&lt;p&gt;Fantastic Planet ä¸­çš„è§’è‰²å’Œåç§°å¯Œæœ‰è±¡å¾æ„ä¹‰ï¼Œæ¯ä¸ªåå­—èƒŒåéƒ½æºå¸¦ç€ä¸€å®šçš„æ–‡åŒ–æˆ–å“²å­¦å«ä¹‰ï¼Œæœ‰åŠ©äºå¢å¼ºç”µå½±çš„ä¸»é¢˜å’Œæ•…äº‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-roles.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/fantastic-planet-roles.webp&#34; alt=&#34;image&#34; data-caption=&#34;Fantastic Planet ä¸­çš„è§’è‰²ï¼Œä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ä¸€æ¬¡æ˜¯ï¼šå¹´å¹¼çš„æ­£åœ¨ç© Oms çš„ Draagsã€æˆå¹´çš„ Omsã€å¹´å¹¼çš„ Tiwaã€å¹´å¹¼çš„ Terr&#34;&gt;
  
  
  &lt;figcaption&gt;Fantastic Planet ä¸­çš„è§’è‰²ï¼Œä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ä¸€æ¬¡æ˜¯ï¼šå¹´å¹¼çš„æ­£åœ¨ç© Oms çš„ Draagsã€æˆå¹´çš„ Omsã€å¹´å¹¼çš„ Tiwaã€å¹´å¹¼çš„ Terr&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Draags&lt;/strong&gt; - è¿™ä¸ªåå­—å¯èƒ½æ´¾ç”Ÿè‡ªâ€œdragâ€æˆ–â€œdragoonâ€ï¼Œè±¡å¾ç€ä»–ä»¬çš„ç»Ÿæ²»åœ°ä½å’ŒåŠ›é‡ã€‚Draags è¿™ä¸ªåå­—æš—ç¤ºäº†ä»–ä»¬å¯¹ Oms çš„æ”¯é…å’Œå†·æ¼ æ€åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Oms&lt;/strong&gt; - è¿™ä¸ªåå­—å¯èƒ½æ¥æºäºæ³•è¯­å•è¯â€œhommeâ€ï¼Œæ„å‘³â€œäººâ€ã€‚è¿™ä¸ªåç§°å¼ºè°ƒäº†ä»–ä»¬çš„äººæ€§å’Œåœ¨ Draags çœ¼ä¸­è¢«è§†ä¸ºæ¬¡ç­‰çš„åœ°ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Terr&lt;/strong&gt; - ä¸»è§’ Terr çš„åå­—æ¥æºäºâ€œterreâ€ï¼Œæ³•è¯­ä¸­çš„â€œåœ°çƒâ€æˆ–â€œåœŸåœ°â€ã€‚è¿™ä¸ªåå­—å¼ºè°ƒäº†ä»–ä½œä¸º Omï¼ˆç±»äººç§æ—ï¼‰ä¸è‡ªç„¶å’Œåœ°çƒçš„ç´§å¯†è”ç³»ï¼ŒåŒæ—¶ä¹Ÿä½“ç°äº†ä»–çš„åœ°ä½å’Œä»–çš„æˆé•¿æ—…ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tiwa&lt;/strong&gt; - Terr çš„â€œä¸»äººâ€ï¼Œä¸€ä½å¹´è½»çš„ Draag å¥³æ€§ã€‚å¥¹çš„åå­—å¯èƒ½æ¥æºäºâ€œtweeâ€ï¼Œè·å…°è¯­ä¸­çš„â€œäºŒâ€æˆ–è¡¨ç¤ºå¹¼å°ã€å¯çˆ±çš„æ„æ€ï¼Œè¿™åæ˜ äº†å¥¹ç›¸å¯¹å¹´è½»å’Œå¥¹å¯¹ Terr çš„çœ‹å¾…æ–¹å¼ï¼Œå³ä½œä¸ºä¸€ä¸ªå® ç‰©æˆ–å°å­©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç²¾å½©çš„é…ä¹&#34;&gt;ç²¾å½©çš„é…ä¹&lt;/h2&gt;
&lt;p&gt;ã€ŠFantastic Planetã€‹ï¼ˆå¥‡å¹»æ˜Ÿçƒï¼‰çš„é…ä¹æ˜¯ç”±æ³•å›½ä½œæ›²å®¶ Alain Goraguer åˆ›ä½œçš„ï¼Œè¿™éƒ¨éŸ³ä¹æˆä¸ºäº†ç”µå½±çš„ä¸€ä¸ªæ˜¾è‘—ç‰¹è‰²ï¼Œä¸å…¶ç‹¬ç‰¹çš„è§†è§‰é£æ ¼å’Œæ·±åˆ»çš„ä¸»é¢˜å®Œç¾ç»“åˆã€‚Goraguer çš„éŸ³ä¹é£æ ¼èåˆäº†çˆµå£«ã€ç”µå­ä¹å’Œç®¡å¼¦ä¹ï¼Œä¸ºç”µå½±å¸¦æ¥äº†ä¸€ç§æ¢¦å¹»èˆ¬çš„ã€è¶…ç°å®çš„æ°›å›´ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 56.25%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=20447062&amp;amp;bvid=BV1XW411x7Mf&amp;amp;cid=33425312&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”µå­éŸ³ä¹å…ƒç´ &lt;/strong&gt;ï¼šGoraguer åœ¨éŸ³ä¹ä¸­å¹¿æ³›ä½¿ç”¨äº†ç”µå­åˆæˆå™¨ï¼Œä¸ºç”µå½±æä¾›äº†ä¸€ç§å‰å«çš„ç§‘æŠ€æ„Ÿã€‚è¿™ç§ä½¿ç”¨åœ¨ 1970 å¹´ä»£åˆæœŸæ˜¯ç›¸å¯¹æ–°é¢–çš„ï¼Œä¸ç”µå½±ä¸­çš„ç§‘å¹»ä¸»é¢˜å’Œæœªæ¥ä¸»ä¹‰ç¾å­¦å½¢æˆäº†å’Œè°çš„ç»Ÿä¸€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çˆµå£«é£æ ¼çš„å½±å“&lt;/strong&gt;ï¼šé…ä¹ä¸­è¿˜èå…¥äº†çˆµå£«éŸ³ä¹çš„å…ƒç´ ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›è½»æ¾æˆ–ä¸å®‰çš„åœºæ™¯ä¸­ã€‚è¿™äº›çˆµå£«é£æ ¼çš„æ›²ç›®å¢åŠ äº†éŸ³ä¹çš„åŠ¨æ€èŒƒå›´ï¼Œä½¿è§‚ä¼—åœ¨æƒ…æ„Ÿä¸Šæ›´åŠ æŠ•å…¥ç”µå½±çš„ä¸–ç•Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡å¼¦ä¹çš„è¿ç”¨&lt;/strong&gt;ï¼šç”µå½±éŸ³ä¹è¿˜åŒ…æ‹¬äº†ä¼ ç»Ÿçš„ç®¡å¼¦ä¹éƒ¨åˆ†ï¼Œå°¤å…¶æ˜¯åœ¨æç»˜ Draags çš„æ–‡åŒ–å’Œä»ªå¼æ—¶ã€‚è¿™ç§ä¼ ç»Ÿå…ƒç´ ä¸ç”µå­å’Œçˆµå£«çš„ç°ä»£æ„Ÿå½¢æˆå¯¹æ¯”ï¼Œå¼ºè°ƒäº† Draags ç¤¾ä¼šçš„å¤æ‚æ€§å’Œé«˜åº¦å‘å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èŠ‚å¥å’Œæ°›å›´&lt;/strong&gt;ï¼šæ•´ä¸ªé…ä¹åœ¨èŠ‚å¥å’Œæ°›å›´ä¸Šéƒ½éå¸¸ç‹¬ç‰¹ï¼Œæ—¢æœ‰æ‚¬ç–‘å’Œç´§å¼ çš„ç‰‡æ®µï¼Œä¹Ÿæœ‰å¹³é™å’Œæ²‰æ€çš„ç‰‡æ®µã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—éŸ³ä¹æœ¬èº«å‡ ä¹æˆä¸ºç”µå½±å™äº‹çš„ä¸€ä¸ªè§’è‰²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Alain Goraguer çš„é…ä¹ä¸ºã€ŠFantastic Planetã€‹å¢æ·»äº†ä¸€å±‚é¢å¤–çš„æ„ä¹‰å’Œæƒ…æ„Ÿæ·±åº¦ï¼Œä½¿å…¶æˆä¸ºè§‚ä¼—å’Œæ‰¹è¯„å®¶èµèª‰çš„å¯¹è±¡ã€‚è¿™ç§éŸ³ä¹ä¸ç”µå½±çš„ç»“åˆï¼Œä¸ºè§‚ä¼—æä¾›äº†ä¸€æ¬¡å…¨é¢çš„æ„Ÿå®˜ä½“éªŒï¼Œæ˜¯ç”µå½±å—æ¬¢è¿çš„é‡è¦å› ç´ ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯¼æ¼”åŠå…¶å½±å“&#34;&gt;å¯¼æ¼”åŠå…¶å½±å“&lt;/h2&gt;
&lt;p&gt;RenÃ© Laloux çš„å¯¼æ¼”ç”Ÿæ¶¯ä»¥å…¶ç‹¬æ ‘ä¸€å¸œçš„è§†è§‰é£æ ¼å’Œæ·±åˆ»çš„å¯“æ„è‘—ç§°ã€‚ã€ŠFantastic Planetã€‹çš„è§†è§‰è®¾è®¡å’Œæ•…äº‹å™è¿°å¯¹è®¸å¤šåæ¥çš„ç”µå½±åˆ¶ä½œäººäº§ç”Ÿäº†å½±å“ï¼Œå…¶ä¸­åŒ…æ‹¬å°åº¦å¯¼æ¼” Tarsem Singhã€‚Singh çš„ä½œå“å¦‚ã€Š&lt;a href=&#34;https://movie.douban.com/subject/1293171/&#34; title=&#34;The Cell&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Cell&lt;/a&gt;ã€‹ï¼ˆ2000 å¹´ï¼‰å’Œã€Š&lt;a href=&#34;https://movie.douban.com/subject/1890572/&#34; title=&#34;The Fall&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;The Fall&lt;/a&gt;ã€‹ï¼ˆ2006 å¹´ï¼‰ä¸­ï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ°å¯¹ Laloux å¥‡å¹»å’Œè¶…ç°å®é£æ ¼çš„è‡´æ•¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The Cell&lt;/em&gt; æ˜¯ä¸€éƒ¨ç§‘å¹»æƒŠæ‚šç‰‡ï¼Œä¸­æ–‡è¯‘ä½œâ€œå…¥ä¾µè„‘ç»†èƒâ€ï¼Œè®²è¿°äº†ä¸€ä¸ªç”·å­çªç„¶æ¥åˆ°ä¸€ä¸ªè¢«ç»‘æ¶å¥³å­çš„ç”µè¯ï¼Œéšåå±•å¼€äº†ä¸€åœºæ¨ªè·¨æ•´ä¸ªåŸå¸‚çš„ç´§å¼ è¥æ•‘è¡ŒåŠ¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/the-cell-screenshot.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/the-cell-screenshot.webp&#34; alt=&#34;image&#34; data-caption=&#34;ã€Šå…¥ä¾µè„‘ç»†èƒã€‹ç”µå½±æˆªå›¾&#34;&gt;
  
  
  &lt;figcaption&gt;ã€Šå…¥ä¾µè„‘ç»†èƒã€‹ç”µå½±æˆªå›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;The Fall&lt;/em&gt; æ˜¯ä¸€éƒ¨è§†è§‰è‰ºæœ¯ç”µå½±ï¼Œä¸­æ–‡è¯‘ä½œâ€œå å…¥â€ï¼Œé€šè¿‡ä¸€ä¸ªå—ä¼¤çš„ç‰¹æŠ€æ¼”å‘˜åœ¨åŒ»é™¢é‡Œå‘ä¸€ä¸ªå°å¥³å­©è®²è¿°çš„äº”ä¸ªå¥‡å¹»è‹±é›„çš„æ•…äº‹ï¼Œæ¢ç´¢äº†æ•…äº‹è®²è¿°çš„åŠ›é‡å’Œç°å®ä¸æƒ³è±¡çš„ç•Œé™ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/the-fall-screenshot.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/exploring-fantastic-planet/the-fall-screenshot.webp&#34; alt=&#34;image&#34; data-caption=&#34;ã€Šå å…¥ã€‹ç”µå½±æˆªå›¾&#34;&gt;
  
  
  &lt;figcaption&gt;ã€Šå å…¥ã€‹ç”µå½±æˆªå›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä¸ªäººæ„Ÿæƒ³&#34;&gt;ä¸ªäººæ„Ÿæƒ³&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ Terr çš„ç»å†ï¼Œç”µå½±ã€ŠFantastic Planetã€‹æ·±å…¥æ¢è®¨äº†çŸ¥è¯†ã€è‡ªç”±ä¸è‡ªæˆ‘å®ç°çš„é‡è¦æ€§ï¼Œå¹¶ä¸”é€šè¿‡ Terr è¿™ä¸€è§’è‰²å±•ç¤ºäº†ä¸åŒæ–‡æ˜é—´çš„å†²çªã€ç†è§£ä¸å’Œè§£ã€‚Terr ä¸ä»…ä»…æ˜¯åå›çš„è±¡å¾ï¼Œæ›´æ˜¯è¿æ¥ä¸åŒä¸–ç•Œã€å¼€å¯å’Œå¹³å…±å­˜å¯èƒ½æ€§çš„æ¡¥æ¢ã€‚&lt;/p&gt;
&lt;p&gt;Oms å¦‚ä½•åˆ©ç”¨æŠ€æœ¯å’ŒçŸ¥è¯†æˆ˜èƒœ Draags çš„è¿‡ç¨‹çªæ˜¾äº†æ•™è‚²å’Œæ™ºæ…§åœ¨ç¤¾ä¼šå˜é©ä¸­çš„æ ¸å¿ƒä½œç”¨ï¼ŒåŒæ—¶ä¹Ÿå±•ç°äº†å¦‚ä½•é€šè¿‡å›¢ç»“å’Œç­–ç•¥æˆ˜èƒœå¼ºå¤§å¯¹æ‰‹çš„æ™ºæ…§ã€‚ç”µå½±ä¸­çš„å’Œè§£æ˜¯ä¸€ç§è„†å¼±çš„å¹³è¡¡ï¼Œéšæ—¶å¯èƒ½å› æ–°çš„å†²çªè€Œè¢«æ‰“ç ´ã€‚&lt;/p&gt;
&lt;p&gt;è§‚çœ‹ã€ŠFantastic Planetã€‹æ˜¯ä¸€æ¬¡è§†è§‰ä¸æ€ç»´çš„åŒé‡éœ‡æ’¼ï¼Œç”µå½±ä¸­çš„è¶…ç°å®åœºæ™¯å’Œä¸°å¯Œçš„ç¤¾ä¼šéšå–»ä¿ƒä½¿æˆ‘æ·±æ€ç°å®ä¸–ç•Œä¸­çš„ç±»ä¼¼é—®é¢˜ã€‚è¿™éƒ¨ä½œå“å¯¹æƒåŠ›ã€å‹è¿«åŠè§£æ”¾çš„æ·±åˆ»æç»˜ï¼Œä¸ä»…ä»…æ˜¯è§†è§‰ä¸Šçš„äº«å—ï¼Œæ›´æ˜¯å¯¹äººç±»ç¤¾ä¼šçš„æ·±åˆ»åæ€ï¼Œæä¾›äº†å®è´µçš„å¯ç¤ºå’Œæ€è€ƒã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼çš„è·¨é›†ç¾¤æ— ç¼è®¿é—®æŒ‡å—</title>
      <link>https://jimmysong.io/blog/seamless-cross-cluster-access-istio/</link>
      <pubDate>Thu, 11 Jul 2024 19:45:20 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/seamless-cross-cluster-access-istio/</guid>
      <description>
        
        
        &lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;éšç€ä¼ä¸šä¿¡æ¯ç³»ç»Ÿè¶Šæ¥è¶Šå¤šåœ°é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå¦‚ä½•åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­å®ç°æœåŠ¡çš„é«˜æ•ˆã€å®‰å…¨åœ°è·¨é›†ç¾¤è®¿é—®æˆä¸ºäº†ä¸€ä¸ªé‡è¦çš„æŒ‘æˆ˜ã€‚Istio ä½œä¸ºä¸€ç§æµè¡Œçš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥æ”¯æŒè·¨é›†ç¾¤æœåŠ¡çš„æ— ç¼è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨éƒ¨ç½²å’Œä½¿ç”¨å¤šé›†ç¾¤æœåŠ¡ç½‘æ ¼æ—¶æœ‰ä»¥ä¸‹éš¾ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è·¨é›†ç¾¤çš„æœåŠ¡æ³¨å†Œå‘ç°ä¸è·¯ç”±&lt;/li&gt;
&lt;li&gt;é›†ç¾¤é—´æœåŠ¡çš„èº«ä»½è¯†åˆ«ä¸è®¤è¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨å¤šé›†ç¾¤å¤šç½‘æ ¼çš„ Istio éƒ¨ç½²ä¸­ï¼Œé€šè¿‡å®æ–½ SPIRE è”é‚¦å’Œä¸œè¥¿å‘ç½‘å…³æš´éœ²æœåŠ¡çš„æ–¹å¼ï¼Œå®ç°è·¨é›†ç¾¤çš„æ— ç¼è®¿é—®ã€‚é€šè¿‡ä¸€ç³»åˆ—é…ç½®å’Œéƒ¨ç½²ç¤ºä¾‹ï¼Œæœ¬æ–‡æ—¨åœ¨ä¸ºè¯»è€…æä¾›ä¸€ä¸ªæ¸…æ™°çš„æŒ‡å—ï¼Œå¸®åŠ©ç†è§£å’Œè§£å†³å¤šé›†ç¾¤æœåŠ¡ç½‘æ ¼éƒ¨ç½²ä¸­é‡åˆ°çš„å¸¸è§é—®é¢˜å’ŒæŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-çš„éƒ¨ç½²æ¨¡å‹&#34;&gt;Istio çš„éƒ¨ç½²æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://istio.io/latest/docs/setup/install/multicluster/&#34; title=&#34;Istio æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ–‡æ¡£&lt;/a&gt;ä¸­æ ¹æ®é›†ç¾¤ã€ç½‘ç»œã€æ§åˆ¶å¹³é¢ã€ç½‘æ ¼ã€ä¿¡ä»»åŸŸåŠç§Ÿæˆ·ç­‰ç»´åº¦åˆ’åˆ†äº†å¤šç§éƒ¨ç½²æ¨¡å‹ï¼Œæˆ‘å°†å…¶æ€»ç»“å¹¶é™„ä¸Šé€‚ç”¨åœºæ™¯è¯´æ˜å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»´åº¦&lt;/th&gt;
          &lt;th&gt;å•ä¸€é…ç½®&lt;/th&gt;
          &lt;th&gt;å¤šå…ƒé…ç½®&lt;/th&gt;
          &lt;th&gt;é€‚ç”¨åœºæ™¯è¯´æ˜&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;é›†ç¾¤&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸€ä¸ªé›†ç¾¤æ‰˜ç®¡æ‰€æœ‰æœåŠ¡ä¸æ§åˆ¶å¹³é¢ã€‚&lt;/td&gt;
          &lt;td&gt;è·¨å¤šä¸ªé›†ç¾¤åˆ†å¸ƒæœåŠ¡ï¼Œå¯ä»¥å…±äº«æˆ–åˆ†ç¦»æ§åˆ¶å¹³é¢ã€‚&lt;/td&gt;
          &lt;td&gt;å•é›†ç¾¤é€‚ç”¨äºèµ„æºéœ€æ±‚è¾ƒå°ã€ç®¡ç†ç›¸å¯¹ç®€å•çš„ç¯å¢ƒï¼›å¤šé›†ç¾¤é€‚åˆäºéœ€è¦é«˜å¯ç”¨æ€§ã€åœ°ç†å†—ä½™æˆ–éµå®ˆæ•°æ®é©»ç•™æ”¿ç­–çš„å¤§å‹ç»„ç»‡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç½‘ç»œ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ‰€æœ‰æœåŠ¡åœ¨å•ä¸€ç½‘ç»œå†…é€šä¿¡ï¼Œæ— éœ€è·¨ç½‘ç»œé€šä¿¡ã€‚&lt;/td&gt;
          &lt;td&gt;æœåŠ¡è·¨è¶Šå¤šä¸ªç½‘ç»œï¼Œéœ€é€šè¿‡ Istio ç½‘å…³è¿›è¡Œé€šä¿¡ã€‚&lt;/td&gt;
          &lt;td&gt;å•ç½‘ç»œé€‚ç”¨äºç½‘ç»œç®€å•ã€æ— å¤æ‚è·¨ç½‘ç»œé€šä¿¡éœ€æ±‚çš„åœºæ™¯ï¼›å¤šç½‘ç»œé€‚åˆåœ¨å¤šäº‘ã€æ··åˆäº‘ç¯å¢ƒä¸­éƒ¨ç½²ï¼Œæˆ–éœ€è¦è·¨è¡Œæ”¿è¾¹ç•Œéƒ¨ç½²çš„åœºæ™¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ§åˆ¶å¹³é¢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸€ä¸ªæ§åˆ¶å¹³é¢ç®¡ç†æ‰€æœ‰æœåŠ¡ã€‚&lt;/td&gt;
          &lt;td&gt;æ¯ä¸ªæ§åˆ¶å¹³é¢ç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ªé›†ç¾¤ï¼Œå¢å¼ºéš”ç¦»ä¸å¯ç”¨æ€§ã€‚&lt;/td&gt;
          &lt;td&gt;å•æ§åˆ¶å¹³é¢é€‚ç”¨äºå°å‹è‡³ä¸­å‹éƒ¨ç½²ï¼Œæ˜“äºç®¡ç†ï¼›å¤šæ§åˆ¶å¹³é¢é€‚ç”¨äºå¤§è§„æ¨¡éƒ¨ç½²ï¼Œéœ€è¦é«˜åº¦çš„å®¹é”™èƒ½åŠ›å’Œå®‰å…¨éš”ç¦»ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç½‘æ ¼&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ‰€æœ‰æœåŠ¡åœ¨ä¸€ä¸ªè¿ç»­çš„æœåŠ¡ç½‘æ ¼ä¸­ã€‚&lt;/td&gt;
          &lt;td&gt;æœåŠ¡ç½‘æ ¼ä¹‹é—´é€šè¿‡è”ç›Ÿè¿›è¡Œé€šä¿¡ï¼Œé€‚ç”¨äºä¸åŒç»„ç»‡æˆ–åŒºåŸŸã€‚&lt;/td&gt;
          &lt;td&gt;å•ç½‘æ ¼é€‚ç”¨äºç»„ç»‡å†…éƒ¨å¯†åˆ‡åä½œçš„æœåŠ¡ï¼›å¤šç½‘æ ¼é€‚åˆäºéœ€è¦éš”ç¦»ä¸åŒä¸šåŠ¡çº¿æˆ–åˆä½œä¼™ä¼´é—´çš„æœåŠ¡ï¼Œæˆ–å®æ–½å¼ºéš”ç¦»çš„å¤§å‹ç»„ç»‡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ä¿¡ä»»åŸŸ&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ‰€æœ‰æœåŠ¡ä½¿ç”¨åŒä¸€å¥—å¯†é’¥å’Œè¯ä¹¦ä½“ç³»ã€‚&lt;/td&gt;
          &lt;td&gt;ä¸åŒä¿¡ä»»åŸŸä½¿ç”¨ä¸åŒçš„å¯†é’¥å’Œè¯ä¹¦ï¼Œéœ€è¿›è¡Œä¿¡ä»»é“¾äº¤æ¢ã€‚&lt;/td&gt;
          &lt;td&gt;å•ä¿¡ä»»åŸŸé€‚ç”¨äºä¿¡ä»»çº§åˆ«ç»Ÿä¸€çš„ç¯å¢ƒï¼›å¤šä¿¡ä»»åŸŸé€‚ç”¨äºéœ€è¦ä¸¥æ ¼éš”ç¦»ã€æ»¡è¶³ä¸åŒå®‰å…¨çº§åˆ«éœ€æ±‚çš„å¤æ‚ç»„ç»‡æˆ–å¤šæ–¹åˆä½œåœºæ™¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç§Ÿæˆ·&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ•´ä¸ªç½‘æ ¼ä¸ºå•ä¸€ç§Ÿæˆ·æˆ–ç”¨æˆ·æœåŠ¡ã€‚&lt;/td&gt;
          &lt;td&gt;é€šè¿‡å‘½åç©ºé—´éš”ç¦»ï¼Œæ”¯æŒå¤šä¸ªç§Ÿæˆ·åœ¨åŒä¸€ç½‘æ ¼ä¸­è¿è¡ŒæœåŠ¡ã€‚&lt;/td&gt;
          &lt;td&gt;å•ç§Ÿæˆ·é€‚ç”¨äºæ‰€æœ‰èµ„æºå’ŒæœåŠ¡ç”±å•ä¸€ç»„ç»‡ç®¡ç†çš„åœºæ™¯ï¼›å¤šç§Ÿæˆ·é€‚ç”¨äºäº‘æœåŠ¡æä¾›å•†æˆ–éœ€è¦åœ¨åŒä¸€ç‰©ç†åŸºç¡€è®¾æ–½ä¸Šè¿è¥å¤šä¸ªå®¢æˆ·çš„åœºæ™¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;figcaption class=&#34;text-center&#34;&gt;
    
    Istio çš„å¤šç»´åº¦éƒ¨ç½²æ¨¡å‹åŠé€‚ç”¨åœºæ™¯
    
&lt;/figcaption&gt;

&lt;p&gt;é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ¨¡å‹éœ€è¦è€ƒè™‘åˆ°å®é™…çš„ä¸šåŠ¡éœ€æ±‚ã€å®‰å…¨è¦æ±‚ã€ç®¡ç†å¤æ‚åº¦ä»¥åŠæˆæœ¬ç­‰å› ç´ ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¾€å¾€æ˜¯å¯¹å¤šç§éƒ¨ç½²æ¨¡å‹çš„ç»„åˆä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è¡¨å±•ç¤ºäº†åœ¨å®é™…åº”ç”¨ä¸­å¦‚ä½•ç»“åˆä¸åŒçš„éƒ¨ç½²æ¨¡å‹æ¥æ»¡è¶³æ›´å¤æ‚çš„ä¸šåŠ¡å’ŒæŠ€æœ¯éœ€æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;æ··åˆéƒ¨ç½²æ¨¡å‹&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;æè¿°&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¤šé›†ç¾¤ + å¤šç½‘æ ¼ + å¤šæ§åˆ¶å¹³é¢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸åŒçš„é›†ç¾¤å¯ä»¥é…ç½®æˆä¸åŒçš„ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼éƒ½æœ‰è‡ªå·±çš„æ§åˆ¶å¹³é¢ã€‚é€šè¿‡ç½‘æ ¼è”é‚¦å…±äº«æœåŠ¡å’Œç­–ç•¥ã€‚&lt;/td&gt;
          &lt;td&gt;é€‚åˆå¤§å‹ç»„ç»‡ï¼Œå…¶ä¸­ä¸åŒçš„ä¸šåŠ¡å•ä½éœ€è¦ç‹¬ç«‹è¿è¡Œå¹¶ç®¡ç†è‡ªå·±çš„æœåŠ¡ï¼ŒåŒæ—¶éœ€è¦ä¸€å®šçº§åˆ«çš„æœåŠ¡å…±äº«å’Œåä½œã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¤šä¿¡ä»»åŸŸè”é‚¦ + å‘½åç©ºé—´éš”ç¦»çš„å¤šç§Ÿæˆ·&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä¸åŒçš„ç½‘æ ¼å¯ä»¥æ‹¥æœ‰ä¸åŒçš„ä¿¡ä»»åŸŸï¼Œé€šè¿‡ä¿¡ä»»åŸŸè”é‚¦å…±äº«å¯†é’¥å’Œè¯ä¹¦ã€‚åŒæ—¶åœ¨ä¸€ä¸ªç½‘æ ¼å†…éƒ¨é€šè¿‡å‘½åç©ºé—´å®ç°ç§Ÿæˆ·éš”ç¦»ã€‚&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºéœ€è¦å¼ºéš”ç¦»ä½†åˆè¦æ±‚è·¨ç»„ç»‡æˆ–è·¨ä¸šåŠ¡çº¿åä½œçš„ç¯å¢ƒï¼Œå¦‚è·¨å›½å…¬å¸æˆ–åˆä½œä¼™ä¼´ç½‘ç»œã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¤šé›†ç¾¤ + å•ç½‘æ ¼ + å¤šæ§åˆ¶å¹³é¢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¤šä¸ªé›†ç¾¤å…±äº«ä¸€ä¸ªæœåŠ¡ç½‘æ ¼ï¼Œä½†æ¯ä¸ªé›†ç¾¤æ‹¥æœ‰è‡ªå·±çš„æ§åˆ¶å¹³é¢æ¥ç®¡ç†æœ¬åœ°æœåŠ¡çš„é…ç½®ã€‚&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºéœ€è¦é«˜å¯ç”¨æ€§å’Œç¾éš¾æ¢å¤èƒ½åŠ›çš„åº”ç”¨ï¼Œå„åœ°åŒºçš„é›†ç¾¤å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œå‡å°‘å•ç‚¹æ•…éšœé£é™©ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¤šé›†ç¾¤ + å¤šç½‘æ ¼ + å•æ§åˆ¶å¹³é¢&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¤šä¸ªé›†ç¾¤åˆ†å¸ƒåœ¨ä¸åŒçš„ç½‘æ ¼ä¸­ï¼Œä½†æ‰€æœ‰ç½‘æ ¼å…±äº«ä¸€ä¸ªä¸­å¿ƒæ§åˆ¶å¹³é¢ã€‚&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºä¸­å¿ƒåŒ–ç®¡ç†çš„å¤§è§„æ¨¡éƒ¨ç½²ï¼Œå¯ä»¥å‡å°‘ç®¡ç†çš„å¤æ‚æ€§ï¼Œä½†å¯¹æ§åˆ¶å¹³é¢çš„å¯ç”¨æ€§è¦æ±‚æé«˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¤šä¿¡ä»»åŸŸ + å¤šç½‘æ ¼ + å‘½åç©ºé—´éš”ç¦»çš„å¤šç§Ÿæˆ·&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å„ç½‘æ ¼æ‹¥æœ‰ç‹¬ç«‹çš„ä¿¡ä»»åŸŸï¼Œå¢å¼ºå®‰å…¨æ€§å’Œéš”ç¦»æ€§ã€‚åœ¨å•ä¸ªç½‘æ ¼å†…ä½¿ç”¨å‘½åç©ºé—´æ¥éš”ç¦»ä¸åŒçš„ç§Ÿæˆ·ã€‚&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºæä¾›äº‘æœåŠ¡çš„ç»„ç»‡ï¼Œéœ€è¦éš”ç¦»ä¸åŒå®¢æˆ·çš„æ•°æ®å’ŒæœåŠ¡ï¼ŒåŒæ—¶åœ¨ä¸åŒçš„æ³•å¾‹å’Œåˆè§„ç¯å¢ƒä¸‹æ“ä½œã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;figcaption class=&#34;text-center&#34;&gt;
    
    Istio çš„éƒ¨ç½²æ¨¡å‹ç»„åˆ
    
&lt;/figcaption&gt;

&lt;p&gt;è¿™äº›æ··åˆæ¨¡å‹æä¾›äº†é«˜åº¦çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œèƒ½å¤Ÿæ»¡è¶³å„ç§å¤æ‚çš„éƒ¨ç½²è¦æ±‚ã€‚åœ¨é€‰æ‹©æ··åˆæ¨¡å‹æ—¶ï¼Œç»„ç»‡éœ€è¦è€ƒè™‘åˆ°ç®¡ç†å¤æ‚æ€§ã€æˆæœ¬ã€å®‰å…¨è¦æ±‚ä»¥åŠä¸šåŠ¡éœ€æ±‚ï¼Œä»¥ç¡®å®šæœ€åˆé€‚çš„éƒ¨ç½²ç­–ç•¥ã€‚é€šè¿‡é€‚å½“çš„è§„åˆ’å’Œè®¾è®¡ï¼ŒIstio çš„çµæ´»éƒ¨ç½²æ¨¡å‹å¯ä»¥å¸®åŠ©ç»„ç»‡æ„å»ºå‡ºæ—¢å®‰å…¨åˆé«˜æ•ˆçš„æœåŠ¡ç½‘æ ¼æ¶æ„ã€‚åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå•ä¿¡ä»»åŸŸçš„å¤šé›†ç¾¤ + å•ç½‘æ ¼ + å¤šæ§åˆ¶å¹³é¢å·²è¶³å¤Ÿæ»¡è¶³éœ€è¦ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†èšç„¦å¤šé›†ç¾¤ + å¤šç½‘æ ¼ + å¤šæ§åˆ¶å¹³é¢ + å¤šä¿¡ä»»åŸŸçš„æ··åˆéƒ¨ç½²æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ç§ç›¸å½“å¤æ‚çš„åœºæ™¯ï¼Œå¦‚æœä½ å¯ä»¥å®Œæˆè¿™ç§åœºæ™¯çš„éƒ¨ç½²ï¼Œé‚£ä¹ˆå…¶ä»–åœºæ™¯ä¹Ÿå°±ä¸åœ¨è¯ä¸‹äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤šé›†ç¾¤-istio-æœåŠ¡ç½‘æ ¼ä¸­çš„-fqdn&#34;&gt;å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼ä¸­çš„ FQDN&lt;/h2&gt;
&lt;p&gt;ç½‘æ ¼é—´çš„æœåŠ¡è¦æƒ³äº’ç›¸è®¿é—®ï¼Œå¿…é¡»äº†è§£å„è‡ªçš„ FQDNã€‚FQDN é€šå¸¸ç”±æœåŠ¡åã€å‘½åç©ºé—´å’Œé¡¶çº§åŸŸï¼ˆå¦‚ &lt;code&gt;svc.cluster.local&lt;/code&gt;ï¼‰ç»„æˆã€‚åœ¨ Istio çš„å¤šé›†ç¾¤æˆ–å¤šç½‘æ ¼è®¾ç½®ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„æœºåˆ¶ï¼ˆå¦‚&lt;code&gt;ServiceEntry&lt;/code&gt;ã€&lt;code&gt;VirtualService&lt;/code&gt;ã€&lt;code&gt;Gateway&lt;/code&gt; é…ç½®ï¼‰æ¥æ§åˆ¶å’Œç®¡ç†æœåŠ¡çš„è·¯ç”±å’Œè®¿é—®ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹ FQDN æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å¤šé›†ç¾¤æœåŠ¡ç½‘æ ¼ä¸­çš„ FQDN ä¸å•é›†ç¾¤å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œé€šå¸¸éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;service-name&amp;gt;.&amp;lt;namespace&amp;gt;.svc.cluster.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿè®¸ä½ ä¼šæƒ³åˆ°é€šè¿‡ &lt;code&gt;meshID&lt;/code&gt; æ¥åŒºåˆ†ç½‘æ ¼ï¼Ÿ&lt;code&gt;meshID&lt;/code&gt; ä¸»è¦ç”¨äºåŒºåˆ†å’Œç®¡ç†åœ¨åŒä¸€ç¯å¢ƒä¸­æˆ–è·¨ç¯å¢ƒçš„å¤šä¸ª Istio ç½‘æ ¼ï¼Œ&lt;code&gt;meshID&lt;/code&gt; å¹¶ä¸ç”¨äºç›´æ¥æ„é€ æœåŠ¡çš„ FQDNã€‚&lt;/p&gt;



&lt;div class=&#34;alert alert-note-container&#34;&gt;
  
  &lt;div class=&#34;alert-note-title px-2 py-2&#34;&gt;
    &lt;code&gt;meshID&lt;/code&gt; çš„ä¸»è¦ä½œç”¨
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-note px-2&#34;&gt;
    &lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘æ ¼çº§çš„é¥æµ‹æ•°æ®èšåˆ&lt;/strong&gt;ï¼šåŒºåˆ†ä¸åŒç½‘æ ¼çš„æ•°æ®ï¼Œä»¥ä¾¿åœ¨ç»Ÿä¸€å¹³å°ä¸Šè¿›è¡Œç›‘æ§å’Œåˆ†æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘æ ¼è”é‚¦&lt;/strong&gt;ï¼šåœ¨ç½‘æ ¼ä¹‹é—´å»ºç«‹è”é‚¦å…³ç³»ï¼Œå…è®¸ç½‘æ ¼é—´å…±äº«ä¸€äº›é…ç½®å’ŒæœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨ç½‘æ ¼çš„ç­–ç•¥å®æ–½&lt;/strong&gt;ï¼šè¯†åˆ«å’Œåº”ç”¨ç‰¹å®šäºç½‘æ ¼çš„ç­–ç•¥ï¼Œå¦‚å®‰å…¨ç­–ç•¥å’Œè®¿é—®æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;è·¨é›†ç¾¤çš„æœåŠ¡æ³¨å†Œå‘ç°ä¸è·¯ç”±&#34;&gt;è·¨é›†ç¾¤çš„æœåŠ¡æ³¨å†Œå‘ç°ä¸è·¯ç”±&lt;/h2&gt;
&lt;p&gt;åœ¨ Istio å¤šç½‘æ ¼ç¯å¢ƒä¸­ï¼Œä¸œè¥¿å‘ç½‘å…³ï¼ˆEast-West Gatewayï¼‰èµ·ç€å…³é”®ä½œç”¨ï¼Œå®ƒä¸ä»…å¤„ç†ç½‘æ ¼é—´çš„å…¥å£å’Œå‡ºå£æµé‡ï¼Œè¿˜æ”¯æŒæœåŠ¡çš„å‘ç°å’Œè¿æ¥ã€‚å½“ä¸€ä¸ªé›†ç¾¤éœ€è¦è®¿é—®å¦ä¸€ä¸ªé›†ç¾¤ä¸­çš„æœåŠ¡æ—¶ï¼Œå®ƒé€šè¿‡è¿™ä¸ªç½‘å…³è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†è·¨é›†ç¾¤çš„æœåŠ¡æ³¨å†Œå‘ç°ä¸è·¯ç”±çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è·¨é›†ç¾¤çš„ Istio ç½‘æ ¼é…ç½®ä¸­ï¼ŒæœåŠ¡æ³¨å†Œã€å‘ç°å’Œè·¯ç”±çš„æµç¨‹æ˜¯è‡³å…³é‡è¦çš„ï¼Œå®ƒä»¬ç¡®ä¿äº†ä¸åŒé›†ç¾¤ä¸­çš„æœåŠ¡å¯ä»¥ç›¸äº’å‘ç°å¹¶é€šä¿¡ã€‚ä»¥ä¸‹æ˜¯è·¨é›†ç¾¤ Istio ç½‘æ ¼ä¸­æœåŠ¡æ³¨å†Œã€å‘ç°ä¸è·¯ç”±çš„åŸºæœ¬æµç¨‹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-æœåŠ¡æ³¨å†Œ&#34;&gt;1. æœåŠ¡æ³¨å†Œ&lt;/h3&gt;
&lt;p&gt;åœ¨æ¯ä¸ª Kubernetes é›†ç¾¤ä¸­ï¼Œå½“ä¸€ä¸ªæœåŠ¡è¢«éƒ¨ç½²æ—¶ï¼Œå®ƒçš„ä¿¡æ¯ä¼šè¢«æ³¨å†Œåˆ° Kubernetes çš„ API Serverã€‚è¿™åŒ…æ‹¬æœåŠ¡çš„åç§°ã€æ ‡ç­¾ã€é€‰æ‹©å™¨ã€ç«¯å£ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-åŒæ­¥åˆ°-istiod&#34;&gt;2. åŒæ­¥åˆ° Istiod&lt;/h3&gt;
&lt;p&gt;Istiodï¼Œä½œä¸ºæ§åˆ¶å¹³é¢ï¼Œè´Ÿè´£ç›‘æ§ Kubernetes API Server çš„çŠ¶æ€å˜åŒ–ã€‚æ¯å½“æœ‰æ–°çš„æœåŠ¡è¢«æ³¨å†Œæˆ–ç°æœ‰æœåŠ¡è¢«æ›´æ–°æ—¶ï¼ŒIstiod ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°è¿™äº›å˜åŒ–ã€‚Istiod æ¥ç€æå–å¿…è¦çš„æœåŠ¡ä¿¡æ¯å¹¶æ„å»ºå†…éƒ¨çš„æœåŠ¡å’Œç«¯ç‚¹çš„é…ç½®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-è·¨é›†ç¾¤æœåŠ¡å‘ç°&#34;&gt;3. è·¨é›†ç¾¤æœåŠ¡å‘ç°&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†ä½¿ä¸€ä¸ªé›†ç¾¤ä¸­çš„æœåŠ¡èƒ½å¤Ÿå‘ç°å¹¶é€šä¿¡åˆ°å¦ä¸€ä¸ªé›†ç¾¤çš„æœåŠ¡ï¼ŒIstiod éœ€è¦å°†æœåŠ¡ç«¯ç‚¹ä¿¡æ¯åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³é›†ç¾¤ã€‚è¿™é€šå¸¸é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¹‹ä¸€å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DNS è§£æ&lt;/strong&gt;ï¼šIstio å¯é…ç½®ä¸ºåˆ©ç”¨ CoreDNS æˆ–ç±»ä¼¼æœåŠ¡ï¼Œåœ¨ DNS æŸ¥è¯¢ä¸­è¿”å›è·¨é›†ç¾¤çš„æœåŠ¡ç«¯ç‚¹ã€‚å½“ä¸€ä¸ªæœåŠ¡å°è¯•è§£æå¦ä¸€ä¸ªé›†ç¾¤ä¸­çš„æœåŠ¡æ—¶ï¼ŒDNS æŸ¥è¯¢ä¼šè¿”å›å¯ä»¥è®¿é—®çš„è¿œç¨‹æœåŠ¡çš„ IP åœ°å€ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†å¯ç”¨ Istio çš„ &lt;a href=&#34;https://istio.io/latest/docs/ops/configuration/traffic-management/dns-proxy/&#34; title=&#34;DNS ä»£ç†&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DNS ä»£ç†&lt;/a&gt;å®ç°è·¨é›†ç¾¤çš„æœåŠ¡å‘ç°ã€‚åœ¨ä¸€ä¸ªæœåŠ¡åŒæ—¶å­˜åœ¨äºæœ¬åœ°å’Œè¿œç¨‹é›†ç¾¤ä¸­æ—¶ï¼Œåœ¨æœ¬åœ°æ‰§è¡Œ DNS æŸ¥è¯¢åªä¼šè¿”å›æœ¬åœ°æœåŠ¡çš„ ClusterIPï¼Œè‹¥è¯¥æœåŠ¡åªå­˜åœ¨äºè¿œç¨‹é›†ç¾¤ä¸­æ—¶ï¼ŒDNS æŸ¥è¯¢å°†è¿”å›è¿œç¨‹æœåŠ¡æ‰€åœ¨é›†ç¾¤çš„ä¸œè¥¿å‘ç½‘å…³çš„è´Ÿè½½å‡è¡¡å™¨åœ°å€ï¼Œè¯¥ç‰¹æ€§ä¹Ÿå¯ä»¥ç”¨äºè·¨é›†ç¾¤çš„æ•…éšœæ¢å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å…¥å£åŒæ­¥&lt;/strong&gt;ï¼šé€šè¿‡è®¾ç½®ç‰¹å®šçš„ ServiceEntry é…ç½®ï¼Œä½¿å¾—ä¸€ä¸ªé›†ç¾¤çš„ Envoy ä»£ç†çŸ¥é“å¦‚ä½•é€šè¿‡ä¸œè¥¿å‘ç½‘å…³æ‰¾åˆ°å¹¶è·¯ç”±åˆ°å¦ä¸€ä¸ªé›†ç¾¤çš„æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-è·¯ç”±å’Œè´Ÿè½½å‡è¡¡&#34;&gt;4. è·¯ç”±å’Œè´Ÿè½½å‡è¡¡&lt;/h3&gt;
&lt;p&gt;å½“æœåŠ¡ A éœ€è¦ä¸æœåŠ¡ B é€šä¿¡æ—¶ï¼Œå®ƒçš„ Envoy ä»£ç†é¦–å…ˆè§£ææœåŠ¡ B çš„åç§°è·å– IP åœ°å€ï¼Œå³æœåŠ¡ B æ‰€åœ¨é›†ç¾¤çš„ä¸œè¥¿å‘ç½‘å…³çš„è´Ÿè½½å‡è¡¡å™¨åœ°å€ã€‚æ¥ç€è¯¥ä¸œè¥¿å‘ç½‘å…³å°†è¯·æ±‚è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡ã€‚Envoy ä»£ç†å¯ä»¥æ ¹æ®é…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆå¦‚è½®è¯¢ã€æœ€å°‘è¿æ¥æ•°ç­‰ï¼‰ï¼Œé€‰æ‹©æœ€ä½³çš„æœåŠ¡å®ä¾‹æ¥å‘é€è¯·æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-æµé‡ç®¡ç†&#34;&gt;5. æµé‡ç®¡ç†&lt;/h3&gt;
&lt;p&gt;Istio æä¾›äº†ä¸°å¯Œçš„æµé‡ç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚è¯·æ±‚è·¯ç”±ã€æ•…éšœæ³¨å…¥ã€æµé‡å¤åˆ¶ç­‰ã€‚è¿™äº›è§„åˆ™åœ¨ Istio çš„æ§åˆ¶å¹³é¢ä¸­å®šä¹‰ï¼Œå¹¶æ¨é€åˆ°å„ä¸ª Envoy ä»£ç†æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥åœ¨è·¨é›†ç¾¤ç¯å¢ƒä¸­çµæ´»åœ°æ§åˆ¶å’Œä¼˜åŒ–æœåŠ¡é—´çš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é›†ç¾¤é—´æœåŠ¡çš„èº«ä»½è¯†åˆ«ä¸è®¤è¯&#34;&gt;é›†ç¾¤é—´æœåŠ¡çš„èº«ä»½è¯†åˆ«ä¸è®¤è¯&lt;/h2&gt;
&lt;p&gt;å½“ä¸åŒé›†ç¾¤ä¸­è¿è¡Œçš„æœåŠ¡éœ€è¦ç›¸äº’é€šä¿¡æ—¶ï¼Œæ­£ç¡®çš„èº«ä»½è®¤è¯å’Œæˆæƒæ˜¯ç¡®ä¿æœåŠ¡å®‰å…¨çš„å…³é”®ã€‚ä½¿ç”¨ SPIFFE å¯ä»¥å¸®åŠ©æ ‡è¯†å’ŒéªŒè¯æœåŠ¡çš„èº«ä»½ï¼Œä½†åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­éœ€è¦ç¡®ä¿è¿™äº›èº«ä»½æ˜¯å”¯ä¸€ä¸”å¯éªŒè¯çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†è®¾ç½® SPIRE è”é‚¦æ¥ä¸ºå¤šé›†ç¾¤çš„æœåŠ¡åˆ†é…èº«ä»½å¹¶å®ç°è·¨é›†ç¾¤çš„èº«ä»½è®¤è¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ SPIFFE æ¥æ ‡è¯†æœåŠ¡èº«ä»½&lt;/strong&gt;ï¼šåœ¨ SPIFFE æ¡†æ¶ä¸‹ï¼Œæ¯ä¸ªæœåŠ¡éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæ ¼å¼ä¸º&lt;code&gt;spiffe://&amp;lt;trust-domain&amp;gt;/&amp;lt;namespace&amp;gt;/&amp;lt;service&amp;gt;&lt;/code&gt;çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡åŒ…æ‹¬é›†ç¾¤åç§°åœ¨å†…çš„â€œtrust domainâ€æ¥ç¡®ä¿èº«ä»½çš„å”¯ä¸€æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®&lt;code&gt;spiffe://foo.com/ns/default/svc/service1&lt;/code&gt;å’Œ&lt;code&gt;spiffe://bar.com/ns/default/svc/service1&lt;/code&gt;ï¼Œä»¥åŒºåˆ†ä¸åŒé›†ç¾¤ä¸­ç›¸åŒåç§°çš„æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ SPIRE è”é‚¦æ¥ç®¡ç†é›†ç¾¤é—´çš„è¯ä¹¦&lt;/strong&gt;ï¼šå®ƒå¯ä»¥å¢å¼ºå¤šé›†ç¾¤æœåŠ¡ç½‘æ ¼ä¸­çš„å®‰å…¨æ€§ã€‚SPIREï¼ˆSPIFFE Runtime Environmentï¼‰æä¾›äº†ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„å¹³å°ï¼Œç”¨äºæœåŠ¡èº«ä»½éªŒè¯å’Œè¯ä¹¦é¢å‘ã€‚å½“ä½¿ç”¨ SPIRE è”é‚¦æ—¶ï¼Œå¯ä»¥å®ç°è·¨é›†ç¾¤çš„æœåŠ¡è®¤è¯ï¼Œé€šè¿‡ä¸ºæ¯ä¸ª SPIRE é›†ç¾¤åˆ›å»º Trust Bundle å®ç°è·¨é›†ç¾¤çš„èº«ä»½è®¤è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å®ç° SPIRE è”é‚¦çš„æ­¥éª¤è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1--é…ç½®-trust-domain&#34;&gt;1.  é…ç½® Trust Domain&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ªé›†ç¾¤éƒ½é…ç½®ä¸ºä¸€ä¸ªå•ç‹¬çš„ trust domainã€‚è¿™æ ·ï¼Œæ¯ä¸ªé›†ç¾¤å†…çš„æœåŠ¡éƒ½å°†å…·æœ‰åŸºäºå…¶æ‰€åœ¨ trust domain çš„å”¯ä¸€ SPIFFE IDã€‚ä¾‹å¦‚ï¼Œé›†ç¾¤ 1 çš„æœåŠ¡å¯èƒ½æ‹¥æœ‰ ID &lt;code&gt;spiffe://cluster1/ns/default/svc/service1&lt;/code&gt;ï¼Œè€Œé›†ç¾¤ 2 çš„ç›¸åŒæœåŠ¡åˆ™ä¸º &lt;code&gt;spiffe://cluster2/ns/default/svc/service1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-å»ºç«‹-trust-bundle&#34;&gt;2. å»ºç«‹ Trust Bundle&lt;/h3&gt;
&lt;p&gt;åœ¨ SPIRE ä¸­é…ç½® trust relationships ä»¥å…è®¸ä¸åŒ trust domain çš„èŠ‚ç‚¹å’Œå·¥ä½œè´Ÿè½½ç›¸äº’éªŒè¯ã€‚è¿™æ¶‰åŠåˆ° trust domain ä¹‹é—´äº¤æ¢å’Œæ¥å—å½¼æ­¤çš„ CA è¯ä¹¦æˆ– JWT keysï¼Œç¡®ä¿è·¨é›†ç¾¤é€šä¿¡çš„å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;3-é…ç½®-spire-server-å’Œ-agent&#34;&gt;3. é…ç½® SPIRE Server å’Œ Agent&lt;/h3&gt;
&lt;p&gt;åœ¨æ¯ä¸ªé›†ç¾¤ä¸­éƒ¨ç½² SPIRE Server å’Œ SPIRE Agentã€‚SPIRE Server è´Ÿè´£ç®¡ç†è¯ä¹¦é¢å‘å’Œç»­ç­¾ï¼Œè€Œ SPIRE Agent è´Ÿè´£å°†è¯ä¹¦å’Œå¯†é’¥å®‰å…¨åœ°åˆ†å‘ç»™é›†ç¾¤å†…çš„æœåŠ¡ã€‚&lt;/p&gt;



&lt;div class=&#34;alert alert-warning-container&#34;&gt;
  
  &lt;div class=&#34;alert-warning-title px-2 py-2&#34;&gt;
    Istio ä½¿ç”¨ SPIRE è”é‚¦æ—¶çš„å·¥ä½œè´Ÿè½½æ³¨å†Œå…¼å®¹æ€§é—®é¢˜
  &lt;/div&gt;
  
  &lt;div class=&#34;alert-warning px-2&#34;&gt;
    åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨ SPRIE Server ä¸­ä½¿ç”¨ä¼ ç»Ÿçš„ Kubernetes Workload Registrar æ¥è´Ÿè´£é›†ç¾¤ä¸­çš„å·¥ä½œè´Ÿè½½æ³¨å†Œã€‚ä» SPIRE v1.5.4 èµ·å¼ƒç”¨äº† Kubernetes Workload Registrarï¼Œè½¬è€Œæ˜¯ä½¿ç”¨ SPIRE Controller Manager ä»£æ›¿ï¼Œç»æˆ‘æµ‹è¯•å¹¶ä¸èƒ½ä¸ Istio å¾ˆå¥½çš„è¿è¡Œã€‚
  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&#34;4-ä½¿ç”¨-workload-api&#34;&gt;4. ä½¿ç”¨ Workload API&lt;/h3&gt;
&lt;p&gt;æœåŠ¡å¯ä»¥é€šè¿‡ SPIRE çš„ Workload API è¯·æ±‚å’Œæ›´æ–°å…¶èº«ä»½è¯ä¹¦ã€‚è¿™æ ·ï¼ŒæœåŠ¡å³ä½¿åœ¨ä¸åŒé›†ç¾¤ä¸­è¿è¡Œï¼Œä¹Ÿèƒ½æŒç»­éªŒè¯å…¶èº«ä»½ï¼Œå¹¶å®‰å…¨åœ°ä¸å…¶ä»–æœåŠ¡é€šä¿¡ã€‚æˆ‘ä»¬å°†é…ç½® Istio ç½‘æ ¼ä¸­çš„ä»£ç†å…±äº« SPIRE Agent ä¸­çš„ Unix Domain Socketï¼Œä»è€Œè®¿é—® Workload API æ¥ç®¡ç†è¯ä¹¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-è‡ªåŠ¨åŒ–è¯ä¹¦è½®æ¢&#34;&gt;5. è‡ªåŠ¨åŒ–è¯ä¹¦è½®æ¢&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ cert-manager ä½œä¸º SPIRE çš„ &lt;a href=&#34;https://github.com/spiffe/spire/blob/v1.9.5/doc/plugin_server_upstreamauthority_cert_manager.md&#34; title=&#34;UpstreamAuthority&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;UpstreamAuthority&lt;/a&gt;ï¼Œé…ç½® SPIRE è‡ªåŠ¨è½®æ¢æœåŠ¡è¯ä¹¦å’Œå¯†é’¥ï¼Œå¢å¼ºç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚é€šè¿‡è‡ªåŠ¨åŒ–è½®æ¢ï¼Œå³ä½¿è¯ä¹¦è¢«æ³„éœ²ï¼Œæ”»å‡»è€…ä¹Ÿåªèƒ½åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…åˆ©ç”¨è¿™äº›è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å¯ä»¥å»ºç«‹ä¸€ä¸ªè·¨é›†ç¾¤çš„ã€å®‰å…¨çš„æœåŠ¡èº«ä»½éªŒè¯æ¡†æ¶ï¼Œä½¿å¾—å„ä¸ªé›†ç¾¤çš„æœåŠ¡èƒ½å¤Ÿå®‰å…¨åœ°è¯†åˆ«å’Œé€šä¿¡ï¼Œä»è€Œæœ‰æ•ˆåœ°é™ä½å®‰å…¨é£é™©å¹¶ç®€åŒ–è¯ä¹¦ç®¡ç†ã€‚è¿™æ ·çš„é…ç½®ä¸ä»…å¢å¼ºäº†å®‰å…¨æ€§ï¼Œè¿˜é€šè¿‡åˆ†æ•£çš„ä¿¡ä»»åŸŸæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²å¤šé›†ç¾¤&#34;&gt;éƒ¨ç½²å¤šé›†ç¾¤&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† Istio å¤šé›†ç¾¤åŠ SPIRE è”é‚¦çš„éƒ¨ç½²æ¨¡å‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/multi-cluster-deployment.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/multi-cluster-deployment.svg&#34; alt=&#34;image&#34; data-caption=&#34;å¤šé›†ç¾¤ç½‘æ ¼éƒ¨ç½²æ¨¡å‹&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¤šé›†ç¾¤ç½‘æ ¼éƒ¨ç½²æ¨¡å‹&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æˆ‘å°†æ¼”ç¤ºå¦‚ä½•åœ¨å¤šé›†ç¾¤ Istio ç½‘æ ¼ä¸­å®ç°æ— ç¼åœ°è·¨é›†ç¾¤æ— ç¼è®¿é—®ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ GKE ä¸­åˆ›å»ºä¸¤ä¸ª Kubernetes é›†ç¾¤ï¼Œåˆ†åˆ«å‘½åä¸º &lt;code&gt;cluster-1&lt;/code&gt; å’Œ &lt;code&gt;cluster-2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªé›†ç¾¤ä¸­éƒ¨ç½² SPIRE å¹¶è®¾ç½®è”é‚¦&lt;/li&gt;
&lt;li&gt;åˆ†åˆ«åœ¨ä¸¤ä¸ªé›†ç¾¤ä¸­å®‰è£… Istioï¼Œæ³¨æ„é…ç½®ä¿¡ä»»åŸŸã€ä¸œè¥¿å‘ç½‘å…³ã€å…¥å£ç½‘å…³ã€ &lt;code&gt;sidecarInjectorWebhook&lt;/code&gt; æŒ‚è½½ SPIFFE UDS çš„ &lt;code&gt;workload-socket&lt;/code&gt;ï¼Œå¹¶å¯ç”¨ DNS ä»£ç†&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²æµ‹è¯•åº”ç”¨å¹¶éªŒè¯è·¨é›†ç¾¤çš„æ— ç¼è®¿é—®&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬éƒ¨ç½²çš„å„ç»„ä»¶ç‰ˆæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes: v1.29.4&lt;/li&gt;
&lt;li&gt;Istio: v1.22.1&lt;/li&gt;
&lt;li&gt;SPIRE: v1.5.1&lt;/li&gt;
&lt;li&gt;cert-manager: v1.15.1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘å°†æ‰€æœ‰å‘½ä»¤åŠæ­¥éª¤è¯´æ˜ä¿å­˜åœ¨ Github ä¸Šï¼š&lt;a href=&#34;https://github.com/rootsongjc/istio-multi-cluster&#34; title=&#34;rootsongjc/istio-multi-cluster&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;rootsongjc/istio-multi-cluster&lt;/a&gt;ï¼Œä½ å¯ä»¥æŒ‰ç…§è¯¥é¡¹ç›®ä¸­çš„è¯´æ˜æ“ä½œã€‚ä¸‹é¢æ˜¯å¯¹å„ä¸»è¦æ­¥éª¤çš„è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-å‡†å¤‡-kubernetes-é›†ç¾¤&#34;&gt;1. å‡†å¤‡ Kubernetes é›†ç¾¤&lt;/h3&gt;
&lt;p&gt;æ‰“å¼€ Google Cloud Shell æˆ–æœ¬åœ°ç»ˆç«¯ï¼Œå¹¶ç¡®ä¿ä½ å·²ç»å®‰è£…äº† &lt;code&gt;gcloud&lt;/code&gt; CLIã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸¤ä¸ªé›†ç¾¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gcloud container clusters create cluster-1 --zone us-central1-a --num-nodes &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gcloud container clusters create cluster-2 --zone us-central1-b --num-nodes &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-éƒ¨ç½²-cert-manager&#34;&gt;2. éƒ¨ç½² cert-manager&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ cert-manager ä½œä¸ºæ ¹ CA ä¸º istiod å’Œ SPIRE é¢å‘è¯ä¹¦ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./cert-manager/install-cert-manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-éƒ¨ç½²-spire-è”é‚¦&#34;&gt;3. éƒ¨ç½² SPIRE è”é‚¦&lt;/h3&gt;
&lt;p&gt;SPIRE è”é‚¦çš„åŸºæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Cluster Alias&lt;/th&gt;
          &lt;th&gt;Trust Domain&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;cluster-1&lt;/td&gt;
          &lt;td&gt;foo.com&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;cluster-2&lt;/td&gt;
          &lt;td&gt;bar.com&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ³¨æ„ï¼šä¿¡ä»»åŸŸä¸éœ€è¦ä¸ DNS åç§°ä¸€è‡´ï¼Œä½†éœ€è¦ä¸ Istio Operator é…ç½®ä¸­çš„ä¿¡ä»»åŸŸç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤éƒ¨ç½² SPIRE è”é‚¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./spire/install-spire.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æƒ³äº†è§£ Istio ä¸­ä½¿ç”¨ SPIRE è¿›è¡Œèº«ä»½ç®¡ç†çš„è¯¦æƒ…ï¼Œè¯·å‚è€ƒ&lt;a href=&#34;https://jimmysong.io/blog/cert-manager-spire-istio/&#34; title=&#34;ä½¿ç”¨ cert-manager å’Œ SPIRE ç®¡ç† Istio ä¸­çš„è¯ä¹¦&#34;&gt;ä½¿ç”¨ cert-manager å’Œ SPIRE ç®¡ç† Istio ä¸­çš„è¯ä¹¦&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;4-å®‰è£…-istio&#34;&gt;4. å®‰è£… Istio&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ IstioOperator æ¥å®‰è£… Istioï¼Œå…¶ä¸­ä¸ºæ¯ä¸ªé›†ç¾¤é…ç½®äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨ Sidecar æ³¨å…¥&lt;/li&gt;
&lt;li&gt;å…¥å£ç½‘å…³&lt;/li&gt;
&lt;li&gt;ä¸œè¥¿å‘ç½‘å…³&lt;/li&gt;
&lt;li&gt;DNS ä»£ç†&lt;/li&gt;
&lt;li&gt;SPIRE é›†æˆ&lt;/li&gt;
&lt;li&gt;è®¿é—®è¿œç¨‹ Kubernetes é›†ç¾¤çš„ Secret&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£… Istioï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio/install-istio.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;éªŒè¯æµé‡è”é‚¦&#34;&gt;éªŒè¯æµé‡è”é‚¦&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†éªŒè¯å¤šé›†ç¾¤å®‰è£…çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬å°†åœ¨ä¸¤ä¸ªé›†ç¾¤ä¸­åˆ†åˆ«éƒ¨ç½²ä¸åŒç‰ˆæœ¬çš„ &lt;code&gt;helloworld&lt;/code&gt; åº”ç”¨ï¼Œç„¶ååœ¨ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­è®¿é—® &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡ï¼Œä»¥æµ‹è¯•ä»¥ä¸‹è·¨é›†ç¾¤è®¿é—®åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šè·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™&lt;/li&gt;
&lt;li&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šå¤„ç†éæœ¬åœ°ç›®æ ‡æœåŠ¡&lt;/li&gt;
&lt;li&gt;å—åŒ—å‘æµé‡è”é‚¦ï¼šé€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åœ¨ä¸¤ä¸ªé›†ç¾¤ä¸­éƒ¨ç½² &lt;code&gt;helloworld&lt;/code&gt; åº”ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./example/deploy-helloword.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¸œè¥¿å‘æµé‡è”é‚¦è·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™&#34;&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šè·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™&lt;/h3&gt;
&lt;p&gt;éƒ¨ç½²å®Œæˆ &lt;code&gt;helloworld&lt;/code&gt; åº”ç”¨åï¼Œä» &lt;code&gt;cluster-1&lt;/code&gt; çš„ &lt;code&gt;sleep&lt;/code&gt; pod è®¿é—® &lt;code&gt;hellowrold&lt;/code&gt; æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 -n sleep deployment/sleep -c sleep &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;	-- sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;while :; do curl -sS helloworld.helloworld:5000/hello; sleep 1; done&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸‹å›¾å±•ç¤ºçš„æ˜¯è¯¥åœºæ™¯ä¸‹çš„éƒ¨ç½²æ¶æ„åŠæµé‡è·¯ç”±è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/east-west-traffic-federation-between-clusters-without-dns-proxying.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/east-west-traffic-federation-between-clusters-without-dns-proxying.svg&#34; alt=&#34;image&#34; data-caption=&#34;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šè·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šè·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä»è¯·æ±‚ç»“æœæ—¢æœ‰ &lt;code&gt;helloworld-v1&lt;/code&gt; åˆæœ‰ &lt;code&gt;helloworld-v2&lt;/code&gt; çš„å“åº”æ¥çœ‹ï¼Œè¯´æ˜è·¨é›†ç¾¤çš„æœåŠ¡å†—ä½™ç”Ÿæ•ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;éªŒè¯ DNS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå› ä¸º &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡æ—¢å­˜åœ¨äºæœ¬åœ°åˆåœ¨è¿œç¨‹é›†ç¾¤ä¸­ï¼Œè‹¥ä½ åœ¨ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­æŸ¥è¯¢ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡çš„ DNS åç§°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it deploy/sleep --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 -n sleep -- nslookup helloworld.helloworld.svc.cluster.local
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¾—åˆ°  &lt;code&gt;cluster-1&lt;/code&gt; é›†ç¾¤ä¸­çš„ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡çš„ ClusterIPã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;éªŒè¯æµé‡è·¯ç”±&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡æŸ¥çœ‹ Envoy ä»£ç†é…ç½®æ¥éªŒè¯è·¨é›†ç¾¤çš„æµé‡è·¯ç”±è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­æŸ¥çœ‹ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡çš„ç«¯ç‚¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl proxy-config endpoints deployment/sleep.sleep --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 --cluster &lt;span class=&#34;s2&#34;&gt;&amp;#34;outbound|5000||helloworld.helloworld.svc.cluster.local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ENDPOINT               STATUS      OUTLIER CHECK     CLUSTER
10.76.3.22:5000        HEALTHY     OK                outbound|5000||helloworld.helloworld.svc.cluster.local
34.136.67.85:15443     HEALTHY     OK                outbound|5000||helloworld.helloworld.svc.cluster.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸¤ä¸ªç«¯ç‚¹ï¼Œä¸€ä¸ªæ˜¯ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­çš„ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡çš„ç«¯ç‚¹ï¼Œå¦ä¸€ä¸ªæ˜¯ &lt;code&gt;cluster-2&lt;/code&gt; çš„ &lt;code&gt;istio-eastwestgateway&lt;/code&gt; æœåŠ¡çš„è´Ÿè½½å‡è¡¡å™¨åœ°å€ã€‚Istio å°†ä¸ºè·¨é›†ç¾¤çš„ TLS è¿æ¥è®¾ç½® SNIï¼Œåœ¨ &lt;code&gt;cluster-2&lt;/code&gt; ä¸­å°†é€šè¿‡ SNI åŒºåˆ†ç›®æ ‡æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨ &lt;code&gt;cluster-2&lt;/code&gt; ä¸­æŸ¥è¯¢å‰é¢ SNI çš„ç«¯ç‚¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl proxy-config endpoints deploy/istio-eastwestgateway.istio-system --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-2 --cluster &lt;span class=&#34;s2&#34;&gt;&amp;#34;outbound_.5000_._.helloworld.helloworld.svc.cluster.local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„ç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ENDPOINT           STATUS      OUTLIER CHECK     CLUSTER
10.88.2.4:5000     HEALTHY     OK                outbound_.5000_._.helloworld.helloworld.svc.cluster.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªç«¯ç‚¹å°±æ˜¯ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡åœ¨ &lt;code&gt;cluster-2&lt;/code&gt; é›†ç¾¤ä¸­çš„ç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ åº”è¯¥äº†è§£äº†è·¨é›†ç¾¤å†—ä½™æœåŠ¡çš„æµé‡è·¯å¾„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ é™¤ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­çš„ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡ï¼Œä¸éœ€è¦å¯¹ Istio åšä»»ä½•é…ç½®ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®ç°æ•…éšœè½¬ç§»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸œè¥¿å‘æµé‡è”é‚¦æ•…éšœè½¬ç§»&#34;&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šæ•…éšœè½¬ç§»&lt;/h3&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°† &lt;code&gt;cluster-1&lt;/code&gt;  ä¸­çš„ &lt;code&gt;helloworld&lt;/code&gt; å‰¯æœ¬æ•°é‡ç¼©å®¹ä¸º 0ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n helloworld scale deploy helloworld-v1 --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 --replicas &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¬¡ä» &lt;code&gt;cluster-1&lt;/code&gt; ä¸­è®¿é—® &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 -n sleep deployment/sleep -c sleep &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;	-- sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;while :; do curl -sS helloworld.helloworld:5000/hello; sleep 1; done&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¾ç„¶å¯ä»¥è·å¾—æ¥è‡ª &lt;code&gt;helloworld-v2&lt;/code&gt; çš„å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œç›´æ¥åˆ é™¤ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­çš„ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl delete service helloworld -n helloworld --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¾ç„¶å¯ä»¥è·å¾—æ¥è‡ª &lt;code&gt;helloworld-v2&lt;/code&gt; çš„å“åº”ï¼Œè¿™è¯´æ˜è·¨é›†ç¾¤çš„æ•…éšœè½¬ç§»ç”Ÿæ•ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†è¯¥åœºæ™¯ä¸‹çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/east-west-traffic-federation-between-clusters-failover.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/east-west-traffic-federation-between-clusters-failover.svg&#34; alt=&#34;image&#34; data-caption=&#34;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šæ•…éšœè½¬ç§»&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ä¸œè¥¿å‘æµé‡è”é‚¦ï¼šæ•…éšœè½¬ç§»&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;éªŒè¯ DNS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå› ä¸º &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡æ—¢å­˜åœ¨äºæœ¬åœ°åˆåœ¨è¿œç¨‹é›†ç¾¤ä¸­ï¼Œè‹¥ä½ åœ¨ &lt;code&gt;cluster-1&lt;/code&gt; ä¸­æŸ¥è¯¢ &lt;code&gt;helloworld&lt;/code&gt; æœåŠ¡çš„ DNS åç§°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it deploy/sleep --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 -n sleep -- nslookup helloworld.helloworld.svc.cluster.local
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¾—åˆ°  &lt;code&gt;cluster-2&lt;/code&gt; é›†ç¾¤ä¸­ä¸œè¥¿å‘ç½‘å…³çš„åœ°å€å’Œ 15443 ç«¯å£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å—åŒ—å‘æµé‡è”é‚¦é€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡&#34;&gt;å—åŒ—å‘æµé‡è”é‚¦ï¼šé€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡&lt;/h3&gt;
&lt;p&gt;é€šè¿‡å…¥å£ç½‘å…³è®¿é—®è¿œç¨‹é›†ç¾¤ä¸­çš„æœåŠ¡ï¼Œæ˜¯æœ€ä¼ ç»Ÿçš„è·¨é›†ç¾¤è®¿é—®æ–¹å¼ï¼Œä¸‹å›¾å±•ç¤ºäº†è¯¥åœºæ™¯ä¸‹çš„æµé‡è·¯å¾„ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/north-south-traffic-federation-between-clusters.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/north-south-traffic-federation-between-clusters.svg&#34; alt=&#34;image&#34; data-caption=&#34;å—åŒ—å‘æµé‡è”é‚¦ï¼šé€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å—åŒ—å‘æµé‡è”é‚¦ï¼šé€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åœ¨ &lt;code&gt;cluster-2&lt;/code&gt; ä¸­åˆ›å»º Gateway å’Œ VirtualServiceï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;	-f ./examples/helloworld-gateway.yaml -n helloworld
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è·å– &lt;code&gt;cluster-2&lt;/code&gt; ä¸­çš„å…¥å£ç½‘å…³åœ°å€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl -n istio-ingress --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-2 get service istio-ingressgateway -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.status.loadBalancer.ingress[0].ip}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„éªŒè¯å¯ä»¥é€šè¿‡è¿œç¨‹å…¥å£ç½‘å…³è®¿é—®æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CTX_CLUSTER1&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -n sleep deployment/sleep -c sleep &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;	-- sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;while :; do curl -s http://&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$GATEWAY_URL&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/hello; sleep 1; done&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†å¾—åˆ°æ¥è‡ª &lt;code&gt;helloworld-v2&lt;/code&gt; çš„å“åº”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éªŒè¯èº«ä»½&#34;&gt;éªŒè¯èº«ä»½&lt;/h2&gt;
&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è·å– &lt;code&gt;cluster-1&lt;/code&gt; é›†ç¾¤ä¸­ &lt;code&gt;sleep&lt;/code&gt; pod ä¸­çš„è¯ä¹¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl proxy-config secret deployment/sleep -o json --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq -r &lt;span class=&#34;s1&#34;&gt;&amp;#39;.dynamicActiveSecrets[0].secret.tlsCertificate.certificateChain.inlineBytes&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 --decode &amp;gt; chain.pem
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;split -p &lt;span class=&#34;s2&#34;&gt;&amp;#34;-----BEGIN CERTIFICATE-----&amp;#34;&lt;/span&gt; chain.pem cert-
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -noout -text -in cert-ab
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -noout -text -in cert-aa
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœåœ¨è¾“å‡ºçš„æ¶ˆæ¯ä¸­çœ‹åˆ°ä¸‹é¢çš„å­—æ®µï¼Œè¯´æ˜èº«ä»½åˆ†é…æ­£ç¡®ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Subject: C=US, O=SPIFFE

URI:spiffe://foo.com/ns/sample/sa/sleep
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥çœ‹ SPIRE ä¸­çš„èº«ä»½ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl --context&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-1 &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -i -t -n spire spire-server-0 -c spire-server &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;	-- ./bin/spire-server entry show -socketPath /run/spire/sockets/server.sock --spiffeID spiffe://foo.com/ns/sleep/sa/sleep
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Found 1 entry
Entry ID         : 9b09080d-3b67-44c2-a5b8-63c42ee03a3a
SPIFFE ID        : spiffe://foo.com/ns/sleep/sa/sleep
Parent ID        : spiffe://foo.com/k8s-workload-registrar/cluster-1/node/gke-cluster-1-default-pool-18d66649-z1lm
Revision         : 1
X509-SVID TTL    : default
JWT-SVID TTL     : default
Selector         : k8s:node-name:gke-cluster-1-default-pool-18d66649-z1lm
Selector         : k8s:ns:sleep
Selector         : k8s:pod-uid:6800aca8-7627-4a30-ba30-5f9bdb5acdb2
FederatesWith    : bar.com
DNS name         : sleep-86bfc4d596-rgdkf
DNS name         : sleep.sleep.svc
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ç”Ÿäº§ç¯å¢ƒå»ºè®®&#34;&gt;ç”Ÿäº§ç¯å¢ƒå»ºè®®&lt;/h2&gt;
&lt;p&gt;å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨&lt;a href=&#34;https://docs.tetrate.io/service-bridge/howto/gateway/unified-gateway&#34; title=&#34;ç»Ÿä¸€ç½‘å…³&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç»Ÿä¸€ç½‘å…³&lt;/a&gt;ï¼Œé€šè¿‡ Tier-2 æ¶æ„ï¼Œåœ¨ Tier-1 è¾¹ç¼˜ç½‘å…³é…ç½®å…¨å±€çš„æµé‡è·¯ç”±ï¼Œè¯¥è¾¹ç¼˜ç½‘å…³å°†æŠŠè½¬å†™çš„ Istio é…ç½®ä¸‹å‘ç»™ Tier-2 é›†ç¾¤ä¸­çš„å„ä¸ªå…¥å£ç½‘å…³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨ TSB éƒ¨ç½²çš„ Tier2 æ¶æ„çš„ Istio æœåŠ¡ç½‘æ ¼ï¼Œå…¶ä¸­ä½¿ç”¨ SPIRE è”é‚¦ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/tsb-multi-cluster-architeture.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/tsb-multi-cluster-architeture.svg&#34; alt=&#34;image&#34; data-caption=&#34;ä½¿ç”¨ SPIREã€Tier2 æ¶æ„çš„ TSB éƒ¨ç½²çš„å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ä½¿ç”¨ SPIREã€Tier2 æ¶æ„çš„ TSB éƒ¨ç½²çš„å¤šé›†ç¾¤ Istio æœåŠ¡ç½‘æ ¼æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å°†è¿™å››ä¸ª Kubernetes é›†ç¾¤åˆ†ä¸º Tier1 é›†ç¾¤ï¼ˆ&lt;code&gt;tier1&lt;/code&gt;ï¼‰å’Œ Tier2 é›†ç¾¤ï¼ˆ&lt;code&gt;cp-cluster-1&lt;/code&gt;ã€&lt;code&gt;cp-cluster-2&lt;/code&gt; å’Œ &lt;code&gt;cp-cluster-3&lt;/code&gt;ï¼‰ã€‚åœ¨ T1 ä¸­å®‰è£… Edge Gatewayï¼Œè€Œåœ¨ T2 ä¸­å®‰è£… bookinfo å’Œ httpbin åº”ç”¨ç¨‹åºã€‚æ¯ä¸ªé›†ç¾¤å°†æ‹¥æœ‰ç‹¬ç«‹çš„ä¿¡ä»»åŸŸï¼Œæ‰€æœ‰è¿™äº›é›†ç¾¤å°†æ„æˆ SPIRE è”é‚¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†ç”¨æˆ·é€šè¿‡å…¥å£ç½‘å…³è®¿é—® bookinfo å’Œ httpbin æœåŠ¡çš„æµé‡è·¯ç”±ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/seamless-cross-cluster-access-istio/tsb-unified-gateway.svg&#34; data-img=&#34;/blog/seamless-cross-cluster-access-istio/tsb-unified-gateway.svg&#34; alt=&#34;image&#34; data-caption=&#34;ç»Ÿä¸€ç½‘å…³æ¶æ„å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ç»Ÿä¸€ç½‘å…³æ¶æ„å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä½ éœ€è¦åœ¨ Istio ä¹‹ä¸Šåˆ›å»ºä¸€ä¸ªé€‚ç”¨äºå¤šé›†ç¾¤çš„é€»è¾‘æŠ½è±¡å±‚ï¼Œå…³äº TSB ä¸­çš„ç»Ÿä¸€ç½‘å…³çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ &lt;a href=&#34;https://docs.tetrate.io/service-bridge/howto/gateway/unified-gateway#scenario-1-cluster-based-routing-with-http-path-and-header-match&#34; title=&#34;TSB æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TSB æ–‡æ¡£&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åœ¨ Istio å¤šé›†ç¾¤ç½‘æ ¼ç¯å¢ƒä¸­å®ç°æœåŠ¡èº«ä»½éªŒè¯ã€DNS è§£æå’Œè·¨é›†ç¾¤æµé‡ç®¡ç†çš„å…³é”®æŠ€æœ¯å’Œæ–¹æ³•ã€‚é€šè¿‡ç²¾ç¡®é…ç½® Istio å’Œ SPIRE è”é‚¦ï¼Œæˆ‘ä»¬ä¸ä»…å¢å¼ºäº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œè¿˜æé«˜äº†æœåŠ¡é—´é€šä¿¡çš„æ•ˆç‡å’Œå¯é æ€§ã€‚éµå¾ªè¿™äº›æ­¥éª¤ï¼Œä½ å°†èƒ½å¤Ÿæ„å»ºä¸€ä¸ªå¼ºå¤§çš„ã€å¯æ‰©å±•çš„å¤šé›†ç¾¤æœåŠ¡ç½‘æ ¼ï¼Œæ»¡è¶³ç°ä»£åº”ç”¨çš„å¤æ‚éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://spiffe.io/docs/latest/architecture/federation/readme/&#34; title=&#34;Deploying a Federated SPIRE Architecture - spiffe.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Deploying a Federated SPIRE Architecture - spiffe.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/setup/install/multicluster/multi-primary_multi-network/&#34; title=&#34;Install Multi-Primary on different networks -istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Install Multi-Primary on different networks -istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/ops/integrations/spire&#34; title=&#34;Istio SPIRE Integration - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio SPIRE Integration - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/ops/configuration/traffic-management/dns-proxy/&#34; title=&#34;DNS Proxying - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DNS Proxying - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.ibm.com/articles/istio-identity-spiffe-spire/&#34; title=&#34;Attesting Istio workload identities with SPIFFE and SPIRE - developer.ibm.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Attesting Istio workload identities with SPIFFE and SPIRE - developer.ibm.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2020/dns-proxy/&#34; title=&#34;Expanding into New Frontiers - Smart DNS Proxying in Istio - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Expanding into New Frontiers - Smart DNS Proxying in Istio - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jimmysong.io/blog/cert-manager-spire-istio/&#34; title=&#34;ä½¿ç”¨ cert-manager å’Œ SPIRE ç®¡ç† Istio ä¸­çš„è¯ä¹¦ - jimmysong.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ cert-manager å’Œ SPIRE ç®¡ç† Istio ä¸­çš„è¯ä¹¦ - jimmysong.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>æ¢ç´¢ Kubernetes Ingressã€Gateway API ä¸ Istio çš„æ¼”è¿›å’Œè½¬å‹</title>
      <link>https://jimmysong.io/blog/gateway-api-istio-ingress-evolution/</link>
      <pubDate>Tue, 02 Jul 2024 19:40:40 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/gateway-api-istio-ingress-evolution/</guid>
      <description>
        
        
        &lt;p&gt;éšç€ Istio 1.22 ç‰ˆæœ¬çš„å‘å¸ƒï¼ŒIstio API å·²æ­£å¼å‡çº§è‡³ v1 ç‰ˆæœ¬ï¼ŒåŒæœŸï¼ŒKubernetes Gateway API ä¹Ÿæ›´æ–°è‡³ v1.1 ç‰ˆæœ¬ã€‚æœ¬ç¯‡æ–‡ç« æ—¨åœ¨æ·±å…¥æ¢ç´¢ Ingress APIã€Istio API ä¸ Kubernetes Gateway API ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«ï¼Œå¹¶è¯¦è¿°å®ƒä»¬åœ¨ç°å®åº”ç”¨ä¸­çš„é€‰æ‹©åŠè¿ç§»ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰ï¼Œæˆ‘æ›¾æ’°å†™ä¸€ç¯‡æ–‡ç« ï¼Œè®¨è®ºäº† &lt;a href=&#34;https://jimmysong.io/blog/why-gateway-api-is-the-future-of-ingress-and-mesh/&#34; title=&#34;ä¸ºä½• Gateway API æ˜¯ Kubernetes ä¸æœåŠ¡ç½‘æ ¼å…¥å£ä¸­çš„æœªæ¥æ–¹å‘&#34;&gt;ä¸ºä½• Gateway API æ˜¯ Kubernetes ä¸æœåŠ¡ç½‘æ ¼å…¥å£ä¸­çš„æœªæ¥æ–¹å‘&lt;/a&gt;ã€‚æ–‡ç« ä¸­æŒ‡å‡ºï¼Œä½œä¸º Kubernetes çš„åˆå§‹å…¥å£ç½‘å…³ï¼ŒIngress çš„èµ„æºæ¨¡å‹ç”±äºè¿‡äºç®€å•ï¼Œéš¾ä»¥æ»¡è¶³å½“ä¸‹çš„å¯ç¼–ç¨‹ç½‘ç»œéœ€æ±‚ã€‚ä½œä¸ºå…¶æ¥ç­äººï¼ŒGateway API è¿‘å¹´æ¥å‘å±•è¿…é€Ÿï¼Œè·å¾—äº†å¹¿æ³›æ”¯æŒï¼ŒåŒ…æ‹¬ä¼—å¤šæ–°å…´çš„å¼€æºç½‘å…³é¡¹ç›®å¦‚ &lt;a href=&#34;https://gateway.envoyproxy.io&#34; title=&#34;Envoy Gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway&lt;/a&gt; ä¹Ÿé€‰æ‹©åŸºäº Gateway API å¼€å‘ã€‚æ­¤å¤–ï¼Œä¸€äº›ä¼ ç»Ÿç½‘å…³é¡¹ç›®ä¹Ÿå¼€å§‹é€‚é… Gateway APIï¼Œæˆ–é€šè¿‡ &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; title=&#34;ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt; è¿™æ ·çš„å·¥å…·è¿›è¡Œè¿ç§»ã€‚&lt;/p&gt;
&lt;p&gt;Gateway APIï¼Œä½œä¸º Kubernetes å…¥å£ç½‘å…³çš„æœ€æ–°æˆæœï¼Œé€šè¿‡è§’è‰²åˆ’åˆ†æ¥åˆ†ç¦»å…³æ³¨ç‚¹ï¼Œå¹¶æ”¯æŒè·¨ namespaceï¼Œæ›´é€‚åˆå¤šäº‘ç¯å¢ƒã€‚å®ƒæ•´åˆäº†å…¥å£ç½‘å…³ï¼ˆå—åŒ—å‘ï¼‰ä¸æœåŠ¡ç½‘æ ¼ï¼ˆä¸œè¥¿å‘ï¼Œé›†ç¾¤å†…è·¯ç”±ï¼‰çš„é‡å åŠŸèƒ½ï¼Œä¸ºäº‘åŸç”Ÿæ—¶ä»£çš„ç»Ÿä¸€æµé‡ç®¡ç†æä¾›äº†æ–°çš„å‚è€ƒæ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;Ingress APIã€Gateway API ä¸ Istio API éƒ½èƒ½å®ç°ç½‘å…³åŠŸèƒ½ï¼Œå®ƒä»¬ä¹‹é—´å…·ä½“æœ‰ä½•è”ç³»ä¸åŒºåˆ«ï¼Ÿæœ¬æ–‡å°†ä¸ºä½ æ­æ™“è¿™ä¸€è¿·é¢˜ï¼Œå¹¶æä¾› Kubernetes ç¯å¢ƒä¸­ç½‘å…³çš„é€‰æ‹©å’Œè¿ç§»ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-ä¸­çš„æµé‡ç®¡ç†&#34;&gt;Kubernetes ä¸­çš„æµé‡ç®¡ç†&lt;/h2&gt;
&lt;p&gt;éšç€å¾®æœåŠ¡æ¶æ„çš„å¹¿æ³›åº”ç”¨å’Œæ—¥ç›Šå¢é•¿çš„å¤æ‚æ€§ï¼ŒKubernetes çš„æµé‡ç®¡ç†å·¥å…·ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ä»¥é€‚åº”å„ç§æŠ€æœ¯éœ€æ±‚ã€‚Ingress APIã€Istio API ä¸ Kubernetes Gateway API åˆ†åˆ«æ ‡å¿—ç€è¿™ä¸€æ¼”å˜çš„ä¸åŒé˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ingress API&lt;/strong&gt; æä¾›äº† Kubernetes çš„åŸºæœ¬æµé‡ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å®šä¹‰ç®€å•çš„è·¯ç”±è§„åˆ™ï¼ˆä¾‹å¦‚ HTTP å’Œ HTTPSï¼‰æ¥ç®¡ç†å¤–éƒ¨è®¿é—®é›†ç¾¤å†…æœåŠ¡çš„æµé‡ã€‚å…¶è®¾è®¡è™½ç®€æ´ï¼Œä½†åŠŸèƒ½æœ‰é™ï¼Œä¸»è¦é€‚ç”¨äºè§„æ¨¡è¾ƒå°ã€ç»“æ„è¾ƒç®€å•çš„åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼Œ&lt;strong&gt;Istio API&lt;/strong&gt; ä½œä¸ºæœåŠ¡ç½‘æ ¼çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸€ç³»åˆ—é«˜çº§æµé‡ç®¡ç†åŠŸèƒ½ï¼Œå¦‚æµé‡é•œåƒã€é‡‘ä¸é›€å‘å¸ƒå’Œæ–­è·¯å™¨ï¼Œé€‚åˆäºéœ€è¦å¤æ‚æµé‡ç®¡ç†çš„å¤§è§„æ¨¡å¾®æœåŠ¡æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å…‹æœ Ingress API çš„å±€é™æ€§å¹¶é›†æˆç±»ä¼¼ Istio çš„é«˜çº§åŠŸèƒ½ï¼Œ&lt;strong&gt;Kubernetes Gateway API&lt;/strong&gt; å› åº”è€Œç”Ÿã€‚å®ƒä¸ä»…åœ¨è®¾è®¡ä¸Šæä¾›äº†æ›´é«˜çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œè¿˜é€šè¿‡ç¤¾åŒºçš„å¹¿æ³›æ”¯æŒï¼Œæˆä¸ºè¿æ¥ä¼ ç»Ÿ Ingress å®ç°å’Œç°ä»£æœåŠ¡ç½‘æ ¼æŠ€æœ¯å¦‚ Istio çš„æ¡¥æ¢ï¼Œç›®å‰ä¸»æµçš„å¼€æºç½‘å…³éƒ½æ˜¯åŸºäº Gateway API æˆ–å·²è¿›è¡Œé€‚é…ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹è¡¨æ ¼æ¦‚è¿°äº†è¿™ä¸‰è€…çš„æ ¸å¿ƒç‰¹ç‚¹å’Œæ¨èä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;API åç§°&lt;/th&gt;
          &lt;th&gt;å¯¹è±¡ç±»å‹&lt;/th&gt;
          &lt;th&gt;çŠ¶æ€&lt;/th&gt;
          &lt;th&gt;æ¨èä½¿ç”¨åœºæ™¯&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Ingress API&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;Ingress&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;ç¨³å®š (Kubernetes v1.19)&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºå°è§„æ¨¡å’Œç®€å•çš„åº”ç”¨åœºæ™¯ï¼Œä¸»è¦ç”¨äºåŸºæœ¬çš„è·¯ç”±é…ç½®&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Istio API&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;VirtualService&lt;/code&gt;ã€&lt;code&gt;Gateway&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;ç¨³å®š (Istio 1.22)&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºé«˜åº¦å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼Œéœ€ç»†ç²’åº¦æ§åˆ¶å’Œé«˜çº§æµé‡ç®¡ç†ç‰¹æ€§çš„åœºæ™¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Gateway API&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;HTTPRoute&lt;/code&gt;ã€&lt;code&gt;Gateway&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;ç¨³å®š (Gateway API v1.1)&lt;/td&gt;
          &lt;td&gt;é€‚ç”¨äºæ–°éƒ¨ç½²æˆ–ç°æœ‰éƒ¨ç½²ï¼Œéœ€æé«˜çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯ç»“åˆ Istio ä½¿ç”¨&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/blog/2024/05/09/gateway-api-v1-1/&#34; title=&#34;Gateway API v1.1&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API v1.1&lt;/a&gt; çš„æ¨å‡ºï¼Œç‰¹åˆ«æ˜¯å…¶åœ¨æå‡ä¸ç°æœ‰ Ingress é…ç½®å…¼å®¹æ€§æ–¹é¢çš„æ”¹è¿›ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå¹³ç¨³çš„è¿ç§»é€”å¾„ï¼Œä½¿ä»ä¼ ç»Ÿçš„ Ingress è§£å†³æ–¹æ¡ˆå‘æ›´ç°ä»£çš„ã€åŠŸèƒ½æ›´å…¨é¢çš„ Gateway API çš„è¿‡æ¸¡å˜å¾—æ›´ä¸ºé¡ºç•…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»-ingress-è¿ç§»åˆ°-kubernetes-gateway-api&#34;&gt;ä» Ingress è¿ç§»åˆ° Kubernetes Gateway API&lt;/h2&gt;
&lt;p&gt;è‹¥æƒ³ä» Ingress è¿ç§»åˆ° Gateway APIï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£å…³é”®å·®å¼‚&lt;/strong&gt;ï¼šä¸ Ingress ç›¸æ¯”ï¼ŒGateway API å¼•å…¥äº†å¤šç§æ–°çš„æ¦‚å¿µå’Œèµ„æºç±»å‹ï¼Œå¦‚ &lt;code&gt;Gateway&lt;/code&gt;ã€&lt;code&gt;HTTPRoute&lt;/code&gt; å’Œ &lt;code&gt;TLSRoute&lt;/code&gt;ã€‚è¿™äº›èµ„æºæä¾›äº†æ›´å¤šçš„é…ç½®é€‰é¡¹å’Œçµæ´»æ€§ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://gateway-api.sigs.k8s.io/guides/&#34; title=&#34;Gateway API æ–‡æ¡£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API æ–‡æ¡£&lt;/a&gt;ä»¥äº†è§£å…¶é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®å…¥å£ç‚¹&lt;/strong&gt;ï¼šåˆ›å»º &lt;code&gt;Gateway&lt;/code&gt; èµ„æºé…ç½®ï¼Œæ˜ç¡®å®šä¹‰å¦‚ä½•æ¥æ”¶å¤–éƒ¨æµé‡ï¼ŒåŒ…æ‹¬é…ç½®åè®®ã€ç«¯å£å’Œ TLS ç»ˆç«¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ å°„æ—§èµ„æº&lt;/strong&gt;ï¼šå°†ç°æœ‰çš„ Ingress èµ„æºæ˜ å°„åˆ°å¯¹åº”çš„ Gateway API èµ„æºã€‚ä¾‹å¦‚ï¼ŒIngress ä¸­çš„ host å’Œ path è§„åˆ™éœ€è¦è½¬æ¢ä¸º HTTPRoute ä¸­çš„è·¯ç”±è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•ä¸éƒ¨ç½²&lt;/strong&gt;ï¼šåœ¨æ­£å¼è¿ç§»ä¹‹å‰ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯æ–°çš„ Gateway API é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰æµé‡è·¯ç”±æ­£å¸¸ï¼Œæ— å®‰å…¨æ¼æ´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†ç®€åŒ–è¿ç§»è¿‡ç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; title=&#34;ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt;ï¼Œè¯¥å·¥å…·èƒ½è‡ªåŠ¨å°† Ingress é…ç½®è½¬æ¢ä¸º Gateway API æ ¼å¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®é™…è¿ç§»ç¤ºä¾‹&#34;&gt;å®é™…è¿ç§»ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ HTTP ç½‘å…³é…ç½®ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•å°† Ingress è¿ç§»åˆ° Gateway APIã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ç°æœ‰ä¸€ä¸ª Ingress é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;pathType&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¦å°†å…¶è¿ç§»åˆ° Gateway APIï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª Gateway å¯¹è±¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-gateway-class&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allowedRoutes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kinds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·ç¡®ä¿ &lt;code&gt;gatewayClassName&lt;/code&gt; æŒ‡å‘ä½ é›†ç¾¤ä¸­é…ç½®çš„æœ‰æ•ˆ GatewayClassã€‚GatewayClass é€šå¸¸ç”±é›†ç¾¤ç®¡ç†å‘˜è®¾ç½®ï¼Œæ˜¯ä¸€ä¸ªä¸º Gateway æä¾›é…ç½®çš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œåˆ›å»º HTTPRoute èµ„æºæ¥å®šä¹‰è·¯ç”±è§„åˆ™ï¼Œå°†æµé‡è·¯ç”±åˆ°åç«¯æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-httproute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;example.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ingress&lt;/code&gt; å¯¹è±¡ä¸­çš„è§„åˆ™è¢«ç›´æ¥æ˜ å°„åˆ° &lt;code&gt;HTTPRoute&lt;/code&gt; å¯¹è±¡ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;è·¯ç”±è§„åˆ™ä¸­çš„ä¸»æœºååŒ¹é…ã€è·¯å¾„åŒ¹é…ä»¥åŠåç«¯æœåŠ¡é…ç½®ä¿æŒä¸å˜ï¼Œåªæ˜¯å¯¹è±¡å’Œå­—æ®µåç§°æœ‰æ‰€ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è€ƒè™‘çš„æŒ‘æˆ˜&#34;&gt;è€ƒè™‘çš„æŒ‘æˆ˜&lt;/h2&gt;
&lt;p&gt;è™½ç„¶å¯ä»¥å°† Ingress è¿ç§»åˆ° Gateway APIï¼Œå¹¶å¯èƒ½åŒæ—¶è¿è¡Œå®ƒä»¬ï¼Œä½†éœ€è¦è€ƒè™‘ä»¥ä¸‹æŒ‘æˆ˜å’Œè¿ç§»çš„å¿…è¦æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½å·®å¼‚&lt;/strong&gt;ï¼šæŸäº› Ingress æ§åˆ¶å™¨çš„ç‰¹å®šåŠŸèƒ½å¯èƒ½åœ¨ Gateway API ä¸­æ²¡æœ‰ç›´æ¥å¯¹åº”ï¼Œå¯èƒ½éœ€è¦é€šè¿‡é¢å¤–çš„é…ç½®æˆ–è‡ªå®šä¹‰èµ„æºæ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šèµ„æºç®¡ç†&lt;/strong&gt;ï¼šGateway API çš„ä½¿ç”¨å¯èƒ½æ¶‰åŠæ¯” Ingress æ›´å¤šçš„èµ„æºç±»å‹å’Œæ›´å¤æ‚çš„é…ç½®ï¼Œè¿™å¯èƒ½å¢åŠ ç®¡ç†çš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºç°æœ‰çš„ Ingress å’Œ Istio API ç”¨æˆ·ï¼Œæ˜¯å¦éœ€è¦è¿ç§»åˆ° Gateway API å–å†³äºå…·ä½“æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è¿ç§»å»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°éƒ¨ç½²&lt;/strong&gt;ï¼šå»ºè®®ç›´æ¥é‡‡ç”¨ Gateway APIï¼Œä»¥ä¾¿åˆ©ç”¨å…¶å…ˆè¿›ç‰¹æ€§å’Œé¢„è§æœªæ¥çš„å‘å±•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°æœ‰éƒ¨ç½²&lt;/strong&gt;ï¼šå¦‚æœç°æœ‰ç³»ç»Ÿè¿è¡Œç¨³å®šä¸”æ— éœ€é«˜çº§ç‰¹æ€§ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ç°æœ‰ APIï¼›å¦‚æœå¸Œæœ›åˆ©ç”¨ Gateway API çš„æ–°ç‰¹æ€§æˆ–è®¡åˆ’æœªæ¥é•¿æœŸå‘å±•ï¼Œé€æ­¥è¿ç§»åˆ™æ˜¯ä¸€ä¸ªç†æ™ºçš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºä¸åŒç½‘å…³å¯¹ Gateway API çš„æ”¯æŒæƒ…å†µï¼Œå¯ä»¥å‚è€ƒ &lt;a href=&#34;https://gateway-api.sigs.k8s.io/implementations/v1.1/&#34; title=&#34;Gateway API å®ç°é¡¹ç›®çš„ä¸€è‡´æ€§æŠ¥å‘Š&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API å®ç°é¡¹ç›®çš„ä¸€è‡´æ€§æŠ¥å‘Š&lt;/a&gt;äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;Ingress APIã€Istio API å’Œ Kubernetes Gateway API å„å…·ç‰¹è‰²ï¼Œé€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚é€‰æ‹©åˆé€‚çš„ APIï¼Œè¿›è¡Œåˆç†çš„è§„åˆ’å’Œç®¡ç†ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œç¨³å®šæ€§ã€‚éšç€ Gateway API çš„æŒç»­å‘å±•å’Œæˆç†Ÿï¼Œå®ƒå°†è¶Šæ¥è¶Šæˆä¸ºæœªæ¥æµé‡ç®¡ç†çš„ä¸»æµé€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©åˆé€‚çš„ç½‘å…³æŠ€æœ¯ï¼Œç»“åˆä½ çš„å…·ä½“éœ€æ±‚å’Œç°æœ‰æ¶æ„ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œä¼˜åŒ–æµé‡ï¼Œç¡®ä¿åº”ç”¨çš„é«˜æ•ˆå’Œç¨³å®šè¿è¡Œã€‚éšç€æŠ€æœ¯çš„è¿›æ­¥å’Œç¤¾åŒºçš„å‘å±•ï¼ŒGateway API æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„æ¡†æ¶ï¼Œä½¿å¾—ä»ä¼ ç»Ÿçš„ Ingress è¿ç§»åˆ°æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆå˜å¾—æ›´ä¸ºç®€å•å’Œé«˜æ•ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gateway-api.sigs.k8s.io/guides/migrating-from-ingress/&#34; title=&#34;Migrating from Ingress - gateway-api.sigs.k8s.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Migrating from Ingress - gateway-api.sigs.k8s.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/blog/2022/gateway-api-beta/&#34; title=&#34;Extending Gateway API support in Istio - istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Extending Gateway API support in Istio - istio.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
                           
    <item>
      <title>å¦‚ä½•åœ¨ Mac ç”µè„‘ä¸Šå®ç°å¾®ä¿¡å¤šå¼€</title>
      <link>https://jimmysong.io/blog/multiple-wechat-instances-on-mac/</link>
      <pubDate>Wed, 26 Jun 2024 16:55:45 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/multiple-wechat-instances-on-mac/</guid>
      <description>
        
        
        &lt;p&gt;å¾®ä¿¡æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„é€šè®¯å·¥å…·ï¼Œè®¸å¤šç”¨æˆ·éƒ½æœ‰åœ¨åŒä¸€å°è®¾å¤‡ä¸Šç™»å½•å¤šä¸ªå¾®ä¿¡è´¦å·çš„éœ€æ±‚ã€‚å°½ç®¡å®˜æ–¹å®¢æˆ·ç«¯ä¸ç›´æ¥æ”¯æŒè¿™ä¸€åŠŸèƒ½ï¼Œä½†é€šè¿‡ä¸€äº›ç®€å•çš„æŠ€å·§ï¼Œä½ å¯ä»¥åœ¨ Mac ç”µè„‘ä¸Šå®ç°å¾®ä¿¡çš„å¤šå¼€åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½çœ‹åˆ°è¿‡ä¸€äº›ä»‹ç»å¦‚ä½•åœ¨ Mac ä¸Šå®ç°å¾®ä¿¡å¤šå¼€çš„æ–‡ç« æˆ–è§†é¢‘ï¼Œé‚£äº›æŠ€å·§å¤§å¤šå·²ç»å¤±æ•ˆï¼Œæœ‰çš„å¯ç”¨çš„ä¹Ÿåªèƒ½åœ¨ä¸€å°ç”µè„‘ä¸ŠåŒæ—¶ç™»å½•ä¸¤ä¸ªå¾®ä¿¡ï¼Œæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Mac ä¸ŠåŒæ—¶è¿è¡Œä»»æ„å¤šä¸ªå¾®ä¿¡å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ¼”ç¤ºè§†é¢‘ã€‚&lt;/p&gt;
&lt;div class=&#34;video-container&#34; style=&#34;padding-top: 62.5%;&#34;&gt;
    &lt;iframe src=&#34;//player.bilibili.com/player.html?isOutside=true&amp;amp;aid=1755949960&amp;amp;bvid=BV1w4421D7rJ&amp;amp;cid=1596875705&amp;amp;p=1&#34; scrolling=&#34;no&#34; border=&#34;0&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt; 
&lt;p&gt;ä¸‹é¢æ˜¯è¯¦ç»†æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ­¥éª¤ä¸€åˆ›å»ºå¾®ä¿¡çš„å‰¯æœ¬&#34;&gt;æ­¥éª¤ä¸€ï¼šåˆ›å»ºå¾®ä¿¡çš„å‰¯æœ¬&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œä½ éœ€è¦åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å¾®ä¿¡åº”ç”¨ç¨‹åºï¼ˆWeChat.appï¼‰å¹¶åˆ›å»ºå¯åŠ¨å‘½ä»¤å‰¯æœ¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€è®¿è¾¾ï¼ˆFinderï¼‰åï¼ŒæŒ‰ä¸‹å¿«æ·é”® &lt;code&gt;CMD + Shift + G&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨å¼¹å‡ºçš„è¾“å…¥æ¡†ä¸­è¾“å…¥ç›®å½• &lt;code&gt;/Applications/WeChat.app/Contents/MacOS&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨æ–°æ‰“å¼€çš„ç›®å½•ä¸­é€‰ä¸­ &lt;code&gt;WeChat&lt;/code&gt;ï¼Œé¼ æ ‡å³é”®é€‰æ‹© &lt;code&gt;åˆ›å»ºåˆ«åï¼ˆMake Aliasï¼‰&lt;/code&gt; å³åˆ›å»ºäº†ä¸€ä¸ªå¯åŠ¨å¾®ä¿¡çš„å‰¯æœ¬ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡å®‰è£… &lt;code&gt;OPT + CMD&lt;/code&gt; æŒ‰é’®æ‹–åŠ¨ &lt;code&gt;WeChat&lt;/code&gt; æ–‡ä»¶åˆ°å½“å‰æˆ–å¦ä¸ªç›®å½•æ¯”å¦‚æ¡Œé¢ä¸Šæ¥åˆ›å»ºä¸€ä¸ªåˆ«åï¼ˆå¿«æ·æ–¹å¼ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-wechat-alias.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-wechat-alias.webp&#34; alt=&#34;image&#34; data-caption=&#34;åˆ›å»ºå¾®ä¿¡å‰¯æœ¬&#34;&gt;
  
  
  &lt;figcaption&gt;åˆ›å»ºå¾®ä¿¡å‰¯æœ¬&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ­¥éª¤äºŒå¯åŠ¨å¤šä¸ªå¾®ä¿¡å®ä¾‹&#34;&gt;æ­¥éª¤äºŒï¼šå¯åŠ¨å¤šä¸ªå¾®ä¿¡å®ä¾‹&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æƒ³åŒæ—¶ç™»å½• N ä¸ªå¾®ä¿¡ï¼Œåˆ™ä¾æ¬¡åŒå‡»åˆšåˆ›å»ºçš„å¾®ä¿¡å‰¯æœ¬ N + 1 æ¬¡ã€‚æ¯”å¦‚ä½ æƒ³åŒæ—¶ç™»å½• 3 ä¸ªå¾®ä¿¡ï¼Œé‚£å°±æ‰“å¼€è¿™ä¸ªå‰¯æœ¬ 4 æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒè¿™äº›çª—å£åœ¨è¿è¡ŒçŠ¶æ€ï¼Œä½ å¯ä»¥å°†å®ƒä»¬æœ€å°åŒ–ï¼Œä½†æ˜¯ä¸è¦å…³é—­å®ƒä»¬ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç³»ç»Ÿåªä¼šæ‰“å¼€ä¸¤ä¸ªå¾®ä¿¡ç™»å½•ç•Œé¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ­¥éª¤ä¸‰é€€å‡ºå…¶ä¸­ä¸€ä¸ªå¾®ä¿¡&#34;&gt;æ­¥éª¤ä¸‰ï¼šé€€å‡ºå…¶ä¸­ä¸€ä¸ªå¾®ä¿¡&lt;/h2&gt;
&lt;p&gt;å½“ä¸¤ä¸ªå¾®ä¿¡ç™»å½•ç•Œé¢æ‰“å¼€åï¼Œæ‰‹åŠ¨é€€å‡ºå…¶ä¸­ä¸€ä¸ªå·²ç»å¼€å¯çš„å¾®ä¿¡ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-wechat-quit.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-wechat-quit.webp&#34; alt=&#34;image&#34; data-caption=&#34;é€€å‡ºå…¶ä¸­ä¸€ä¸ªå¾®ä¿¡&#34;&gt;
  
  
  &lt;figcaption&gt;é€€å‡ºå…¶ä¸­ä¸€ä¸ªå¾®ä¿¡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ­¥éª¤å››è§¦å‘å¤šå¼€åŠŸèƒ½&#34;&gt;æ­¥éª¤å››ï¼šè§¦å‘å¤šå¼€åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;å…³é—­ä¸€ä¸ªå¾®ä¿¡åï¼Œç³»ç»Ÿä¼šå†æ¬¡æ‰“å¼€ N-1 ä¸ªæ–°çš„å¾®ä¿¡çª—å£ã€‚ç°åœ¨ä½ å°±å¯ä»¥é€šè¿‡è¿™äº›å¾®ä¿¡çš„ç™»å½•ç•Œé¢ç™»å½•åˆ°ä¸åŒçš„å¾®ä¿¡è´¦æˆ·äº†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    &lt;img src=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-multiple-wechat.webp&#34; data-img=&#34;https://jimmysong.io/img/blog/multiple-wechat-instances-on-mac/mac-screenshot-multiple-wechat.webp&#34; alt=&#34;image&#34; data-caption=&#34;åœ¨ Mac ä¸ŠåŒæ—¶ç™»å½•ä¸‰ä¸ªå¾®ä¿¡&#34;&gt;
  
  
  &lt;figcaption&gt;åœ¨ Mac ä¸ŠåŒæ—¶ç™»å½•ä¸‰ä¸ªå¾®ä¿¡&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šæ–¹æ³•åªéœ€è¦ä½¿ç”¨æœ€æ–°çš„å®˜æ–¹ç‰ˆæœ¬çš„å¾®ä¿¡å³å¯ï¼Œå¯ä»¥åšåˆ°ä»»æ„å¤šå¼€ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ æ›´é«˜æ•ˆåœ°ä½¿ç”¨å¾®ä¿¡ï¼Œæ»¡è¶³ä½ çš„å¤šè´¦æˆ·ç®¡ç†éœ€æ±‚ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>æ„Ÿå—æµªæ¼«å·´é»ï¼šæ¢ç´¢åŸå¸‚é£æƒ…ä¸æ–‡åŒ–æ´å¯Ÿ</title>
      <link>https://jimmysong.io/blog/paris-trip/</link>
      <pubDate>Sun, 16 Jun 2024 06:11:53 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/paris-trip/</guid>
      <description>
        
        
        &lt;p&gt;2024 å¹´ 3 æœˆï¼Œä¸€ä¸ªç‰¹åˆ«çš„æœºä¼šå°†æˆ‘å¸¦åˆ°äº†æ³•å›½å·´é»â€”â€”å‚åŠ  &lt;a href=&#34;https://jimmysong.io/blog/kubecon-eu-paris-recap/&#34; title=&#34;KubeCon EU 2024&#34;&gt;KubeCon EU 2024&lt;/a&gt;ã€‚è¿™æ˜¯ä¸€åœºæ±‡é›†äº†æ¥è‡ªå…¨çƒçš„äº‘è®¡ç®—å’Œå¼€æºæŠ€æœ¯çˆ±å¥½è€…çš„ç››ä¼šã€‚åˆ©ç”¨è¿™æ¬¡ä¼šè®®çš„æœºä¼šï¼Œæˆ‘ä¸ä»…æ·±å…¥äº†è§£äº†æœ€æ–°çš„æŠ€æœ¯è¶‹åŠ¿ï¼Œè¿˜æŠ“ä½æœºä¼šä½“éªŒäº†è¿™åº§åŸå¸‚çš„å†å²ã€æ–‡åŒ–å’Œæ—¥å¸¸ç”Ÿæ´»ã€‚æˆ‘çš„å·´é»ä¹‹è¡Œä» 3 æœˆ 16 æ—¥å¼€å§‹ï¼ŒæŒç»­åˆ° 3 æœˆ 24 æ—¥ï¼Œè¿™æœŸé—´æˆ‘å°½å¯èƒ½å¤šåœ°æ¢ç´¢äº†è¿™åº§å……æ»¡é­…åŠ›çš„åŸå¸‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç­¾è¯ç¯‡ç« &#34;&gt;ç­¾è¯ç¯‡ç« &lt;/h2&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬ä¸­å›½äººæ¥è¯´ï¼Œæ— è®ºä½•æ—¶ä½•åœ°ï¼Œå‡ºå›½çš„ç¬¬ä¸€æ­¥æ€»æ˜¯ç­¾è¯çš„ç”³è¯·ã€‚å°¤å…¶æ˜¯æ³•å›½ç”³æ ¹ç­¾è¯ï¼Œéœ€è¦å‡†å¤‡ä¼—å¤šææ–™ï¼ŒåŒ…æ‹¬å…¬å¸è¯æ˜ä¿¡ã€è¡Œç¨‹å•ç­‰ï¼Œä½†å¹¸å¥½æˆ‘æ‰€åœ¨çš„å…¬å¸æ€§è´¨è®©è¿™ä¸€åˆ‡å˜å¾—ç›¸å¯¹å®¹æ˜“ã€‚ä»¤äººæ„Ÿåˆ°ç•¥æœ‰å®‰æ…°çš„æ˜¯ï¼Œä¸ç”³è¯·æ—¥æœ¬ç­¾è¯ç›¸æ¯”ï¼Œæ³•å›½ç­¾è¯ä¸éœ€è¦å†»ç»“å·¨é¢èµ„é‡‘æˆ–æä¾›åºå¤§çš„é“¶è¡Œå­˜æ¬¾è¯æ˜ã€‚è¿™æ¬¡æˆ‘è·å¾—äº†å…­ä¸ªæœˆçš„ç­¾è¯æœ‰æ•ˆæœŸï¼Œè¿™å¯¹äºæˆ‘æœªæ¥çš„æ¬§æ´²è¡Œè®¡åˆ’æä¾›äº†æ›´å¤šçš„çµæ´»æ€§å’Œå¯èƒ½æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ°è¾¾å·´é»&#34;&gt;åˆ°è¾¾å·´é»&lt;/h2&gt;
&lt;p&gt;ä»åŒ—äº¬ç›´é£å·´é»çš„æ—…ç¨‹æ€»æ˜¯å……æ»¡æœŸå¾…ã€‚æˆ‘ä¹˜åçš„æ³•å›½èˆªç©ºå…¬å¸èˆªç­ï¼Œä»åŒ—äº¬æ—¶é—´å‡Œæ™¨èµ·é£ï¼Œç»è¿‡é•¿è¾¾ 13 å°æ—¶çš„æ—…ç¨‹åï¼Œäºå·´é»æ—¶é—´æ—©æ™¨ 6 ç‚¹å¤šæŠµè¾¾ã€‚å½’é€”åˆ™é€‰æ‹©äº†åœ¨ä¼Šæ–¯å¦å¸ƒå°”è½¬æœºï¼Œè®©æ—…è¡Œçš„å›å¿†æ›´æ·»ä¸€åˆ†å¼‚å›½æƒ…è°ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬ä¸€å°è±¡&#34;&gt;ç¬¬ä¸€å°è±¡&lt;/h2&gt;
&lt;p&gt;æˆ´é«˜ä¹æœºåœºå¤„å¤„å¯è§çš„ä¸­æ–‡æ ‡ç‰Œï¼Œå­—å¥ä¼˜é›…ï¼Œæ˜¾ç¤ºäº†æ³•å›½äººå¯¹ç»†èŠ‚çš„ç”¨å¿ƒã€‚å°½ç®¡é€šå…³æ—¶æ’é˜Ÿç­‰å€™äº†è¿‘ä¸€ä¸ªå°æ—¶ï¼Œä½†å¤šæ ·åŒ–çš„äººæµè®©å·´é»çš„å›½é™…åŒ–æ°›å›´æ„ˆå‘æ˜¾è‘—ã€‚ä»æœºåœºä¹˜åç©¿æ¢­åœ°é“æ—¶ï¼Œæˆ‘ä½“éªŒäº†ä¸‰æ¬¡æ‰æˆåŠŸæŒ¤ä¸Šè½¦ï¼Œå¯è§äººæµä¹‹å¤šã€‚ä½¿ç”¨ Bolt æ‰“è½¦æœåŠ¡æ—¶ï¼Œå› ä¸ºè¯­è¨€ä¸é€šï¼Œè¿˜å¾—åˆ°äº†ä¸€ä½å¥½å¿ƒæ³•å›½äººçš„å¸®åŠ©ï¼Œä»–ç”¨æ³•è¯­å¸®æˆ‘ä¸å¸æœºæ²Ÿé€šï¼Œè¿™è®©æˆ‘æ·±æ„Ÿæ³•å›½äººçš„å‹å¥½ä¸çƒ­å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å·´é»æˆ´é«˜ä¹æœºåœºéšå¤„å¯è§ä¸­æ–‡æ ‡è¯†ï¼Œå¾ˆå¤šåœ°æ–¹åªæœ‰è‹±æ–‡ã€æ³•æ–‡å’Œä¸­æ–‡ä¸‰ç§æ–‡å­—çš„æ ‡è¯†ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/custom.webp&#34; data-img=&#34;/blog/paris-trip/custom.webp&#34; data-width=&#34;2400&#34; data-height=&#34;1500&#34; alt=&#34;image&#34; data-caption=&#34;å·´é»æˆ´é«˜ä¹æœºåœº&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å·´é»æˆ´é«˜ä¹æœºåœº&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;å·´é»çš„ç”Ÿæ´»ç»†èŠ‚&#34;&gt;å·´é»çš„ç”Ÿæ´»ç»†èŠ‚&lt;/h2&gt;
&lt;p&gt;åœ¨å·´é»çš„æ¯ä¸€å¤„ï¼Œéƒ½èƒ½çœ‹åˆ°é‚£äº›ç‹¬å…·ç‰¹è‰²çš„åƒåœ¾æ¡¶ï¼Œå®ƒä»¬ä¸ä»…æ–¹ä¾¿å®ç”¨ï¼Œè¿˜åœ¨å®‰å…¨ä¸Šåšäº†è€ƒè™‘ã€‚ä¾‹å¦‚ï¼Œä¸€äº›åƒåœ¾æ¡¶æ˜¯ä¸ºäº†é˜²çˆ†è€Œè®¾è®¡çš„ï¼Œèƒ½å®‰å…¨æŠ•æ”¾ç»ç’ƒç“¶å’Œæ˜“æ‹‰ç½ï¼Œè€Œå¦ä¸€äº›ä»…ç”¨é€æ˜å¡‘æ–™è¢‹è¦†ç›–ï¼Œä¹Ÿæ˜¯å‡ºäºåŒæ ·çš„å®‰å…¨è€ƒé‡ã€‚è¿™äº›ç»†èŠ‚ä½“ç°äº†åŸå¸‚ç®¡ç†çš„ç²¾ç»†ä¸å‘¨åˆ°ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/dustbin.webp&#34; data-img=&#34;/blog/paris-trip/dustbin.webp&#34; data-width=&#34;2400&#34; data-height=&#34;1500&#34; alt=&#34;image&#34; data-caption=&#34;å·´é»è¡—å¤´çš„åƒåœ¾æ¡¶&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å·´é»è¡—å¤´çš„åƒåœ¾æ¡¶&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å·´é»çš„åƒåœ¾åˆ†ç±»é‡‡ç”¨å½©è‰²ç¼–ç åƒåœ¾æ¡¶ç³»ç»Ÿï¼Œæ—¨åœ¨ä¿ƒè¿›é€‚å½“çš„åºŸç‰©å¤„ç†ã€‚åƒåœ¾ç®±æœ‰ä¸åŒçš„é¢œè‰²ï¼šé»„è‰²ç”¨äºçº¸å¼ å’Œå¡‘æ–™ç­‰å¯å›æ”¶ç‰©ï¼Œæ£•è‰²ç”¨äºå¯å †è‚¥é£Ÿç‰©æ®‹æ¸£ï¼Œç™½è‰²ç”¨äºé…’ç“¶ç­‰ç»ç’ƒç‰©å“ï¼Œç»¿è‰²/ç°è‰²ç”¨äºå…¶ä»–åºŸç‰©ã€‚è¯¥ç³»ç»Ÿå¯å¸®åŠ©å±…æ°‘æœ‰æ•ˆåœ°åˆ†ç±»åƒåœ¾ï¼Œä¿ƒè¿›å›æ”¶åˆ©ç”¨å’Œé€‚å½“çš„åºŸç‰©ç®¡ç†å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;é£Ÿåœ¨å·´é»&#34;&gt;é£Ÿåœ¨å·´é»&lt;/h2&gt;
&lt;p&gt;å°½ç®¡è¥¿é¤ä¸­çš„ç‰›æ’å’Œç³•ç‚¹è®©äººéš¾ä»¥æŠ—æ‹’ï¼Œæˆ‘è¿˜æ˜¯æ›´åçˆ±å®¶ä¹¡çš„å‘³é“ã€‚åœ¨å·´é»ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€å®¶åä¸ºæ¨å°å¨çš„å·èœé¦†ï¼Œå…¶ç‰›è‚‰é¢è™½ä¸å›½å†…æœ‰æ‰€ä¸åŒï¼Œä½†å‘³é“å¯å£ï¼Œä»·æ ¼äº²æ°‘ã€‚æ­¤å¤–ï¼Œå·´é»è¡—å¤´çš„æ°´æœä¸æˆ‘åœ¨ç½‘ä¸Šè´­ä¹°çš„ç›¸æ¯”ï¼Œä¸ä»…ä»·æ ¼åˆç†ï¼Œè€Œä¸”å‘³é“ä¹Ÿæä½³ï¼Œç‰¹åˆ«æ˜¯æˆ‘å–œçˆ±çš„å•¤æ¢¨ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/food.webp&#34; data-img=&#34;/blog/paris-trip/food.webp&#34; data-width=&#34;2140&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;å·´é»çš„ä¸­é¤ã€è¥¿é¤åŠé©¬å¡é¾™&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å·´é»çš„ä¸­é¤ã€è¥¿é¤åŠé©¬å¡é¾™&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¦å¤–åœ¨å¾ˆå¤šåœ°é“å£è¿˜æœ‰è¡—å¤´å··å°¾ä¹Ÿæœ‰ç¤¾åŒºå°æ‘ŠåŠçƒ˜ç„™åº—ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/store.webp&#34; data-img=&#34;/blog/paris-trip/store.webp&#34; data-width=&#34;2140&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;è¡—å¤´å°æ‘Šå’Œçƒ˜ç„™åº—&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;è¡—å¤´å°æ‘Šå’Œçƒ˜ç„™åº—&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;ä½åœ¨å·´é»&#34;&gt;ä½åœ¨å·´é»&lt;/h2&gt;
&lt;p&gt;å·´é»ï¼Œæ³•å›½çš„é¦–éƒ½ï¼Œä¸ä»…ä»¥å…¶æµªæ¼«å’Œå†å²è‘—ç§°ï¼ŒåŒæ—¶å…¶è¡Œæ”¿åŒºåˆ’ä¹Ÿå…·æœ‰ç‹¬ç‰¹çš„ç»“æ„ã€‚å·´é»å¸‚é€šå¸¸è¢«åˆ†ä¸ºâ€œå¤§å·´é»â€å’Œâ€œå°å·´é»â€ã€‚å°å·´é»æŒ‡çš„æ˜¯å·´é»å¸‚å†…ç¯ï¼Œå³ç¬¬ä¸€åˆ°äºŒååŒºï¼Œæ¶µç›–äº†å¤§éƒ¨åˆ†è‘—åçš„å†å²åœ°æ ‡å’Œæ–‡åŒ–åœ°åŒºï¼Œæ€»é¢ç§¯çº¦ä¸º 105 å¹³æ–¹å…¬é‡Œã€‚è€Œå¤§å·´é»åˆ™åŒ…æ‹¬å°å·´é»åŠå…¶å‘¨è¾¹çš„éƒŠåŒºï¼Œå½¢æˆä¸€ä¸ªæ›´ä¸ºå¹¿æ³›çš„éƒ½å¸‚åŒºã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/paris-map.webp&#34; data-img=&#34;/blog/paris-trip/paris-map.webp&#34; data-width=&#34;1437&#34; data-height=&#34;1012&#34; alt=&#34;image&#34; data-caption=&#34;å°å·´é»åœ°å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å°å·´é»åœ°å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;ä¸‹å›¾ä¸­ç¯å½¢é“è·¯æ˜¯ &lt;strong&gt;Boulevard PÃ©riphÃ©rique&lt;/strong&gt;ï¼Œå³å·´é»ç¯å½¢é«˜é€Ÿå…¬è·¯ã€‚è¿™æ¡é“è·¯ç¯ç»•ç€å·´é»çš„ 20 ä¸ªåŒºï¼Œè¿™äº›åŒºåŸŸå…±åŒæ„æˆäº†æ‰€è°“çš„â€œå°å·´é»â€ã€‚&lt;/p&gt;
&lt;p&gt;å·´é»çš„ 20 ä¸ªåŒºï¼ˆarrondissementsï¼‰æŒ‰ç…§èºæ—‹çŠ¶çš„é¡ºåºä»å¸‚ä¸­å¿ƒå‘å¤–å»¶ä¼¸ï¼ŒåŒ…æ‹¬äº†å¸‚å†…æœ€æ ¸å¿ƒçš„å•†ä¸šã€å±…ä½ä»¥åŠæ–‡åŒ–åŒºåŸŸã€‚è¿™äº›åŒºåŸŸçš„æ€»é¢ç§¯å¤§çº¦ä¸º 105 å¹³æ–¹å…¬é‡Œï¼ˆçº¦ 40.5 å¹³æ–¹è‹±é‡Œï¼‰ï¼Œä» 1 åŒºçš„å¸‚ä¸­å¿ƒå‘å¤–é€æ¸æ‰©å±•è‡³ 20 åŒºã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›åŒºåŸŸæ˜¯å·´é»å¸‚çš„è¡Œæ”¿åŒºåˆ’ï¼Œè€Œâ€œå°å·´é»â€è¿™ä¸ªåè¯é€šå¸¸æ˜¯æŒ‡çš„è¿™äº›å†…ç¯çš„åŒºåŸŸï¼Œå³ç”±ç¯å½¢å…¬è·¯æ‰€ç¯ç»•çš„å·´é»å¸‚å†…éƒ¨åŒºåŸŸã€‚å› æ­¤ï¼Œå›¾ä¸­æ˜¾ç¤ºçš„ 20 ä¸ªåŒºç¡®å®ç»„æˆäº†â€œå°å·´é»â€ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŒ—äº¬çš„äºŒç¯é¢ç§¯çº¦ä¸º 62 å¹³æ–¹å…¬é‡Œï¼Œä¸‰ç¯é¢ç§¯çº¦ä¸º 159 å¹³æ–¹å…¬é‡Œï¼Œå°å·´é»çš„é¢ç§¯åœ¨äºŒè€…ä¹‹é—´ï¼Œä¸‹å›¾å±•ç¤ºäº†åœ¨åŒç­‰æ¯”ä¾‹å°ºä¸‹çš„å°å·´é»å’ŒåŒ—äº¬ä¸‰ç¯çš„åœ°å›¾ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/paris-vs-beijing.webp&#34; data-img=&#34;/blog/paris-trip/paris-vs-beijing.webp&#34; data-width=&#34;2400&#34; data-height=&#34;1055&#34; alt=&#34;image&#34; data-caption=&#34;å°å·´é»å’ŒåŒ—äº¬ä¸‰ç¯é¢ç§¯å¯¹æ¯”&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å°å·´é»å’ŒåŒ—äº¬ä¸‰ç¯é¢ç§¯å¯¹æ¯”&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æˆ‘æ­¤è¡Œä½å®¿çš„åœ°ç‚¹ä½äºå·´é»çš„ 15 åŒºï¼Œè¿™é‡Œæ˜¯å·´é»æœ€å¤§çš„ä¸€ä¸ªåŒºï¼Œä½äºå¡çº³æ²³å·¦å²¸ï¼ˆæŒ‰å¡çº³æ²³æµå‘ï¼‰ã€‚15 åŒºä¸ä»…å±…ä½ç¯å¢ƒå®œäººï¼Œäº¤é€šä¾¿åˆ©ï¼Œè€Œä¸”è·ç¦»è¯¸å¦‚åŸƒè²å°”é“å¡”ç­‰è‘—åæ™¯ç‚¹ä¹Ÿéå¸¸è¿‘ï¼Œæ­¥è¡Œå¤§çº¦ 20 åˆ†é’Ÿå³å¯åˆ°è¾¾ã€‚æˆ‘ä¸‹æ¦»çš„ä½æ‰€æ˜¯ä¸€æ ‹ä¸‰å±‚é«˜çš„è”æ’å…¬å¯“ï¼Œåº•å±‚è®¾æœ‰è½¦åº“å’Œä¼šå®¢å…ï¼Œè€Œå±…ä½åŒºåˆ™åˆ†å¸ƒåœ¨äºŒæ¥¼å’Œä¸‰æ¥¼ï¼Œå…±æœ‰äº”ä¸ªæˆ¿é—´ï¼Œæ—è¾¹è¿˜æœ‰æŸå›½çš„å¤§ä½¿é¦†å®˜é‚¸ï¼Œå¢æ·»äº†ä¸€ä»½ç‰¹åˆ«çš„å›½é™…æ°›å›´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¡Œåœ¨å·´é»&#34;&gt;è¡Œåœ¨å·´é»&lt;/h2&gt;
&lt;p&gt;å·´é»çš„é“è·¯è§„åˆ’åˆ«å…·ä¸€æ ¼ï¼Œé“è·¯äº¤é”™çºµæ¨ªï¼Œå¹¶éä¸¥æ ¼çš„å—åŒ—èµ°å‘ï¼ŒåŠ ä¹‹çº¢ç»¿ç¯è®¾ç½®åœ¨è¡—è§’ï¼Œä½¿å¾—åˆæ¥ä¹åˆ°çš„äººæœ‰äº›ä¸é€‚åº”ã€‚è¿™é‡Œçš„è‡ªè¡Œè½¦é“ååˆ†å‘è¾¾ï¼Œæˆ‘ç§Ÿäº†ä¸€è¾†åŠ©åŠ›è‡ªè¡Œè½¦ï¼Œç©¿è¡Œåœ¨å·´é»çš„è¡—å¤´å··å°¾ï¼Œæ„Ÿå—åˆ°å‰æ‰€æœªæœ‰çš„è‡ªç”±ä¸æƒ¬æ„ã€‚å·´é»çš„åœ°é“ç³»ç»Ÿå¤æ‚å¤šæ ·ï¼Œä½†æ”¯ä»˜æ–¹å¼æä¸ºæ–¹ä¾¿ï¼Œå¤§éƒ¨åˆ†æ”¯ä»˜éƒ½å¯ä»¥é€šè¿‡ä¿¡ç”¨å¡å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ¸¸å®¢æ¥è¯´ï¼Œåœ¨å°å·´é»çŸ­è·ç¦»å‡ºè¡Œé¦–é€‰æ–¹å¼æ˜¯è‡ªè¡Œè½¦ã€‚å·´é»è¡—å¤´éšå¤„å¯è§å¯ä¾›ç§Ÿèµçš„è‡ªè¡Œè½¦ï¼Œä½ å¯ä»¥ä¸‹è½½ App æ³¨å†Œæ‰«ç æ”¯ä»˜åå³å¯ä½¿ç”¨ï¼Œæ³¨æ„éœ€è¦ç»‘å®šä¿¡ç”¨å¡ã€‚æœ‰äº›è‡ªè¡Œè½¦é“æ˜¯åœ¨è·¯çš„ä¸­é—´ï¼Œè·¯é¢ä¸Šæœ‰æ˜ç¡®æ ‡è¯†è‡ªè¡Œè½¦é“ã€‚è¿™äº›è‡ªè¡Œè½¦éƒ½æ˜¯åŠ©åŠ›è½¦ï¼Œå¤§å¤šç»´æŠ¤çš„æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å­˜åœ¨æ•…éšœï¼Œéœ€è¦ä»”ç»†è¾¨åˆ«ã€‚å¦å¤–å·´é»çš„è¡—é“è¾ƒçª„ï¼Œè¡Œäººä¹Ÿå¾ˆå°‘éµå®ˆçº¢ç»¿ç¯ï¼Œå¯èƒ½æ˜¯å› ä¸ºçº¢ç»¿ç¯å¤ªå¤šäº†å§ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/bike.webp&#34; data-img=&#34;/blog/paris-trip/bike.webp&#34; data-width=&#34;2508&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;å·´é»è¡—å¤´çš„è‡ªè¡Œè½¦é“&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å·´é»è¡—å¤´çš„è‡ªè¡Œè½¦é“&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å·´é»çš„åœ°é“ç¥¨ç§ç±»ç¹å¤šï¼Œä»å•æ¬¡ç¥¨ã€æ—¥ç¥¨åˆ°å‘¨ç¥¨ã€æœˆç¥¨ä¸€åº”ä¿±å…¨ï¼Œé€‚åº”ä¸åŒæ¸¸å®¢çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œè®¸å¤šå¤–åœ°æ¸¸å®¢åœ¨è´­ç¥¨ç¯èŠ‚éƒ½ä¼šé‡åˆ°å›°æƒ‘ï¼Œéœ€è¦ä¸€äº›æ—¶é—´æ¥ç†Ÿæ‚‰ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/metro.webp&#34; data-img=&#34;/blog/paris-trip/metro.webp&#34; data-width=&#34;2140&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;å·´é»åœ°é“&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å·´é»åœ°é“&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å·´é»åœ°é“ï¼ˆMÃ©tro de Parisï¼‰å§‹å»ºäº 1900 å¹´ï¼Œæ˜¯ä¸–ç•Œä¸Šæœ€æ—©çš„åœ°é“ç³»ç»Ÿä¹‹ä¸€ã€‚è¿™ä¸ªå¹¿æ³›çš„åœ°é“ç½‘ç»œåŒ…æ‹¬ 16 æ¡çº¿è·¯ï¼Œè¦†ç›–æ€»é•¿åº¦è¾¾ 225 å…¬é‡Œã€‚å·´é»åœ°é“ä¸ä»…è¿æ¥åŸå¸‚ä¸­å¿ƒå’Œå¤–å›´åŒºåŸŸï¼Œè¿˜æ‰©å±•åˆ°äº†ä¸€äº›è¿‘éƒŠåŒºåŸŸï¼Œæ¯å¹´æœåŠ¡æ•°äº¿ä¹˜å®¢ï¼Œæ˜¯å·´é»å…¬å…±äº¤é€šç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å› ä¸ºå»ºé€ æ—¶é—´æ¯”è¾ƒä¹…è¿œï¼Œå¾ˆå¤šè®¾æ–½éƒ½æ¯”è¾ƒè€æ—§ï¼Œæ¯”å¦‚è½¦å¢é™ˆæ—§ï¼Œè½¦å¢é—¨è¦æ‰‹åŠ¨æ‰“å¼€ï¼Œè¿è¡Œå™ªéŸ³å¤§ï¼Œæ²¡æœ‰ç”µæ¢¯ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŒ»ç–—ä½“éªŒ&#34;&gt;åŒ»ç–—ä½“éªŒ&lt;/h2&gt;
&lt;p&gt;åœ¨å·´é»çš„ç¬¬äºŒå¤©ï¼Œæˆ‘å› é¥®é£Ÿä¸å½“è€Œå¼€å§‹è…¹æ³»ï¼ŒæŒç»­äº†ä¸¤å¤©åæ‰å¥½è½¬ã€‚åœ¨è¿™æœŸé—´ï¼Œæˆ‘å»äº†å½“åœ°çš„è¯åº—ä¹°è¯ã€‚è¯åº—æ—©ä¸Š 8 ç‚¹å‡†æ—¶å¼€é—¨ï¼Œé—¨å£æ€»æ˜¯æœ‰äººæ’é˜Ÿç­‰å€™ï¼Œè¿™ç§å‡†æ—¶å’Œç§©åºè®©æˆ‘å°è±¡æ·±åˆ»ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/drug.webp&#34; data-img=&#34;/blog/paris-trip/drug.webp&#34; data-width=&#34;1200&#34; data-height=&#34;1600&#34; alt=&#34;image&#34; data-caption=&#34;åœ¨å·´é»è´­ä¹°çš„æ­¢æ³»è¯&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åœ¨å·´é»è´­ä¹°çš„æ­¢æ³»è¯&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;æ³•å›½çš„åŒ»ç–—ä½“ç³»è¢«è®¤ä¸ºæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯æ€¥è¯Šè¿˜æ˜¯è¯å“è´­ä¹°ï¼Œéƒ½éå¸¸ä¾¿æ·ã€‚è¯å“çš„è´¨é‡å’Œç§ç±»ä¹Ÿç›¸å½“ä¸°å¯Œï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒç—…ç—‡çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¸¸åœ¨å·´é»&#34;&gt;æ¸¸åœ¨å·´é»&lt;/h2&gt;
&lt;p&gt;åœ¨ KubeCon EU æœŸé—´ï¼Œæˆ‘åˆ©ç”¨ç©ºé—²æ—¶é—´æ¸¸è§ˆäº†å‡ å¤„å·´é»çš„è‘—åæ™¯ç‚¹ã€‚åŸƒè²å°”é“å¡”æ˜¯å¿…é¡»æ‰“å¡çš„åœ°æ–¹ï¼Œæˆ‘ç™»ä¸Šäº†äºŒå±‚å¹³å°ï¼Œä¿¯ç°æ•´ä¸ªå·´é»ï¼Œæ™¯è‰²å£®è§‚ã€‚å¢æµ®å®«åˆ™æ˜¯è‰ºæœ¯çˆ±å¥½è€…çš„å¤©å ‚ï¼Œè’™å¨œä¸½èçš„å¾®ç¬‘å¸å¼•äº†æ— æ•°æ¸¸å®¢é©»è¶³ã€‚è™½ç„¶å·´é»åœ£æ¯é™¢è¿˜åœ¨ç»´ä¿®ä¸­ï¼Œä½†å¤œæ™šçš„åœ£æ¯é™¢ä¾æ—§æ•£å‘ç€æ— å°½çš„é­…åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¢æµ®å®«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¢æµ®å®«ï¼ˆLouvre Museumï¼‰æ˜¯ä¸–ç•Œä¸Šæœ€å¤§å’Œæœ€è‘—åçš„åšç‰©é¦†ä¹‹ä¸€ã€‚å®ƒæœ€åˆå»ºäº 12 ä¸–çºªä½œä¸ºçš‡å®«ï¼Œç›´åˆ° 1793 å¹´å¼€æ”¾ä¸ºå…¬ä¼—åšç‰©é¦†ã€‚å¢æµ®å®«æ”¶è—äº†è¶…è¿‡ 38 ä¸‡ä»¶å±•å“ï¼Œè·¨è¶Šä»å¤ä»£æ–‡æ˜åˆ° 19 ä¸–çºªçš„è‰ºæœ¯ä¸å†å²æ–‡ç‰©ã€‚å…¶ä¸­æœ€è‘—åçš„ä½œå“åŒ…æ‹¬ã€Šè’™å¨œä¸½èã€‹ã€ã€Šç»´çº³æ–¯çš„è¯ç”Ÿã€‹å’Œã€Šèƒœåˆ©å¥³ç¥åƒã€‹ç­‰ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/louvre.webp&#34; data-img=&#34;/blog/paris-trip/louvre.webp&#34; data-width=&#34;2104&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;å¢æµ®å®«&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¢æµ®å®«&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¢æµ®å®«é‡Œäººæµé‡æœ€å¤§çš„åœ°æ–¹å°±æ˜¯ã€Šè’™å¨œä¸½èã€‹ï¼Œå¾ˆå¤šäººåœ¨é‚£é‡Œæ’èµ·äº†é•¿é¾™ï¼Œåªä¸ºä¸€ç¹å¥¹é‚£ç¥ç§˜çš„å¾®ç¬‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‡ç¥æ®¿&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å·´é»ä¸‡ç¥æ®¿ï¼Œæœ€åˆå»ºé€ ä¸ºæ•™å ‚ï¼Œç°ä½œä¸ºä¸€ä¸ªçºªå¿µé¦†ï¼Œä½äºæ³•å›½å·´é»çš„æ‹‰ä¸åŒºã€‚è¿™åº§å»ºç­‘æœ€åˆæ˜¯ä¸ºäº†çºªå¿µåœ£æ—¥å†…ç“¦ç‘ï¼Œåè½¬å˜ä¸ºçºªå¿µæ³•å›½ä¼Ÿå¤§äººç‰©çš„å®‰æ¯ä¹‹åœ°ã€‚å»ºç­‘é£æ ¼èåˆäº†å¤å…¸ä¸æ–°å¤å…¸å…ƒç´ ï¼Œå…¶å®ä¼Ÿçš„åœ†é¡¶å’Œåº„ä¸¥çš„æŸ±å»Šä½¿å®ƒæˆä¸ºå·´é»çš„ä¸€ä¸ªæ˜¾è‘—åœ°æ ‡ã€‚ä¸‡ç¥æ®¿å†…éƒ¨è£…é¥°è±ªåï¼ŒåŒ…æ‹¬å‚…ç§‘æ‘†é”¤å’Œè®¸å¤šé‡è¦æ³•å›½å†å²äººç‰©çš„å¢“ç©´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‡ç¥æ®¿å†…çš„å‚…ç§‘æ‘†ï¼Œç”±æ³•å›½ç‰©ç†å­¦å®¶åˆ©æ˜‚Â·ç¦ç§‘äº 1851 å¹´è®¾è®¡ï¼Œä»¥è¯æ˜åœ°çƒè‡ªè½¬çš„ç›´æ¥æ•ˆåº”ã€‚è¿™ä¸ªç®€å•ä½†å¼•äººæ³¨ç›®çš„å®éªŒåŒ…æ‹¬ä¸€æ ¹æ‚¬æŒ‚çš„é“çƒï¼Œé€šè¿‡å…¶è‡ªç”±æ‘†åŠ¨ï¼Œè§‚å¯Ÿè€…å¯ä»¥çœ‹åˆ°æ‘†åŠ¨å¹³é¢ç›¸å¯¹äºåœ°é¢ç¼“æ…¢æ—‹è½¬çš„ç°è±¡ï¼Œè¿™ä¸€æ—‹è½¬æ˜¯åœ°çƒè‡ªè½¬çš„ç›´æ¥è¯æ®ã€‚ç¦ç§‘æ‘†é”¤ä¸ä»…æ˜¯ç‰©ç†å­¦çš„ä¸€ä¸ªé‡è¦å®éªŒï¼Œä¹Ÿæˆä¸ºäº†ç§‘å­¦ä¸è‰ºæœ¯çš„ç»“åˆè±¡å¾ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/pantheon.webp&#34; data-img=&#34;/blog/paris-trip/pantheon.webp&#34; data-width=&#34;2400&#34; data-height=&#34;1500&#34; alt=&#34;image&#34; data-caption=&#34;ä¸‡ç¥æ®¿å†…çš„å‚…ç§‘æ‘†&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ä¸‡ç¥æ®¿å†…çš„å‚…ç§‘æ‘†&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;å¡çº³æ²³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¸…æ™¨çš„å¡çº³æ²³å¦‚è¯—å¦‚ç”»ï¼Œæ¼«æ­¥åœ¨æ²³ç•”ï¼Œæ„Ÿå—åˆ°å·´é»çš„é™è°§ä¸ç¾å¥½ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/seine.webp&#34; data-img=&#34;/blog/paris-trip/seine.webp&#34; data-width=&#34;4183&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;å¡çº³æ²³&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;å¡çº³æ²³&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;å¡çº³æ²³æ˜¯æ³•å›½çš„ä¸€æ¡ä¸»è¦æ²³æµï¼Œæµç»å·´é»å¸‚ä¸­å¿ƒã€‚æ²³æµå…¨é•¿çº¦ 777 å…¬é‡Œï¼Œèµ·æºäºå‹ƒè‰®ç¬¬åœ°åŒºçš„æ™®æ‹‰ç‰¹é«˜åŸï¼Œæœ€ç»ˆæµå…¥è‹±å‰åˆ©æµ·å³¡ã€‚å¡çº³æ²³ç©¿è¿‡å·´é»æ—¶ï¼Œæ²³ä¸¤å²¸å¸ƒæ»¡äº†å†å²æ‚ ä¹…çš„æ¡¥æ¢å’Œè‘—åçš„æ™¯ç‚¹ï¼Œå¦‚å·´é»åœ£æ¯é™¢å’ŒåŸƒè²å°”é“å¡”ã€‚æ²³æµä¸ä»…æ˜¯å·´é»çš„é‡è¦äº¤é€šæ°´é“ï¼Œä¹Ÿæ˜¯æ—…æ¸¸å’Œä¼‘é—²çš„çƒ­é—¨åœ°ç‚¹ï¼Œå¸¸æœ‰æ¸¸èˆ¹åœ¨æ­¤ç©¿æ¢­ï¼Œæä¾›è§‚å…‰å’Œé¤é¥®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é©¬å¾·è±å¨œæ•™å ‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/madeleine.webp&#34; data-img=&#34;/blog/paris-trip/madeleine.webp&#34; data-width=&#34;2400&#34; data-height=&#34;1500&#34; alt=&#34;image&#34; data-caption=&#34;é©¬å¾·è±å¨œæ•™å ‚&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;é©¬å¾·è±å¨œæ•™å ‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;é©¬å¾·è±å¨œæ•™å ‚ï¼ˆÃ‰glise de la Madeleineï¼‰æ˜¯ä¸€åº§ç½—é©¬å¤©ä¸»æ•™çš„æ•™å ‚ï¼Œä»¥å…¶å¤å…¸å¸Œè…Šç¥åº™é£æ ¼è‘—ç§°ã€‚è¿™åº§æ•™å ‚å»ºäº 19 ä¸–çºªåˆï¼Œå¤–éƒ¨æœ‰ 52 æ ¹ç§‘æ—æ–¯å¼æŸ±å­ç¯ç»•ã€‚è™½ç„¶å¤–è§‚æå…¶åº„ä¸¥ã€ç±»ä¼¼ç¥åº™ï¼Œä½†å†…éƒ¨è£…é¥°åä¸½ï¼Œæ‹¥æœ‰ç²¾ç¾çš„é›•åˆ»å’Œå£ç”»ã€‚é©¬å¾·è±å¨œæ•™å ‚ä¸ä»…æ˜¯å®—æ•™æ´»åŠ¨çš„åœºæ‰€ï¼Œä¹Ÿå¸¸ç”¨äºä¸¾è¡ŒéŸ³ä¹ä¼šï¼Œç‰¹åˆ«æ˜¯å¤å…¸éŸ³ä¹æ¼”å‡ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ£å¿ƒå ‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/basilique.webp&#34; data-img=&#34;/blog/paris-trip/basilique.webp&#34; data-width=&#34;2508&#34; data-height=&#34;1568&#34; alt=&#34;image&#34; data-caption=&#34;åœ£å¿ƒå ‚&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;åœ£å¿ƒå ‚&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;åœ£å¿ƒå ‚ï¼ˆBasilique du SacrÃ©-CÅ“urï¼‰ä½äºæ³•å›½å·´é»è’™é©¬ç‰¹é«˜åœ°ï¼Œæ˜¯ä¸€åº§ç½—é©¬å¤©ä¸»æ•™æ•™å ‚ï¼Œä»¥å…¶ç™½è‰²åœ†é¡¶è‘—ç§°ã€‚è¿™åº§æ•™å ‚å»ºäº 1875 å¹´è‡³ 1914 å¹´é—´ï¼Œæ˜¯ä¸ºäº†çºªå¿µæ™®æ³•æˆ˜äº‰ä¸­çš„æ³•å›½é˜µäº¡å°†å£«è€Œå…´å»ºçš„ã€‚åœ£å¿ƒå ‚é‡‡ç”¨äº†ç½—æ›¼ - æ‹œå åº­é£æ ¼çš„å»ºç­‘è®¾è®¡ï¼Œå†…éƒ¨è£…é¥°åä¸½ï¼Œæ‹¥æœ‰å£®è§‚çš„é©¬èµ›å…‹å’Œé›•å¡‘ã€‚å®ƒä¸ä»…æ˜¯å·´é»çš„ä¸€ä¸ªé‡è¦å®—æ•™åœ°ç‚¹ï¼Œä¹Ÿå› å…¶ä½äºåŸå¸‚ä¹‹å·…ï¼Œæä¾›äº†ä¿¯ç°å·´é»å…¨æ™¯çš„ç»ä½³è§†è§’ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜åœ¨éª‘è¡Œè¿‡ç¨‹ä¸­æ¸¸è§ˆäº†å·´é»åœ£æ¯é™¢ã€é¦™æ¦­ä¸½èˆå¤§é“ã€çˆ±ä¸½èˆå®«ã€å°çš‡å®«ã€å‡¯æ—‹é—¨ã€åå’Œå¹¿åœºã€æœä¹ä¸½èŠ±å›­ã€å¢æ£®å ¡å…¬å›­ç­‰ï¼Œé™äºç¯‡å¹…ä¸åœ¨æ­¤å±•å¼€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºå¥¥è¿ä¼š&#34;&gt;å…³äºå¥¥è¿ä¼š&lt;/h2&gt;
&lt;p&gt;ç°ä»£å¥¥è¿ä¼šæ˜¯æ³•å›½äººåœ¨å·´é»æå€¡çš„ï¼Œå¯èƒ½æ˜¯æ³•å›½äººå¯¹å¥¥è¿ä¼šå·²ç»å¸ç©ºè§æƒ¯ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸ºäº†å°½å¯èƒ½ä¸æ‰“æ‰°æœ¬åœ°äººçš„ç”Ÿæ´»ï¼Œæ­¤æ¬¡å·´é»ä¹‹è¡Œï¼Œæ„Ÿå—ä¸åˆ°ä»»ä½•å¥¥è¿ä¼šå°†åœ¨å·´é»å¬å¼€çš„æ°”æ°›ã€‚åªæœ‰ä¸€äº›æ ‡å¿—æ€§å»ºç­‘æ—åœ¨æ­å»ºä¸€äº›å±•å°å¯èƒ½æ˜¯ä¸ºäº†ä¾›å¥¥è¿ä¼šä½¿ç”¨ï¼Œä»¥åŠä¸€äº›å•†åº—åœ¨å”®å–å¥¥è¿ä¼šçºªå¿µå“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯„è®º&#34;&gt;è¯„è®º&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘åœ¨ä¸­æ–‡äº’è”ç½‘ä¸Šï¼Œç»å¸¸çœ‹åˆ°ä¸€äº›è§†é¢‘ä»‹ç»å·´é»çš„æ²»å®‰ã€ç¯å¢ƒæ˜¯å¦‚ä½•çš„ä¸å ªï¼Œæ¯”å¦‚è¡—é“ä¸Šå¾ˆå¤šå°å·ã€éšåœ°å¤§å°ä¾¿ã€æ‰¾ä¸åˆ°å•æ‰€ç­‰ã€‚å¹¸è¿çš„æ˜¯æˆ‘å¹¶æ²¡æœ‰é‡åˆ°å°å·ï¼Œä¹Ÿæ²¡å¬åˆ°åŒä¼´æœ‰è¿™æ ·çš„é­é‡ã€‚ä½†æ˜¯ç¡®å®åœ¨ä¸€äº›è¡—é“å°¤å…¶æ˜¯æ™¯åŒºå‘¨è¾¹é—»åˆ°ä¸€äº›å°¿éªšå‘³ï¼Œä¹Ÿé­é‡äº†å‡ ä¸ªæµæµªæ±‰é—®æˆ‘è¦çƒŸã€‚è¿˜æœ‰å°±æ˜¯å¢æµ®å®«é‡Œæ‰¾ä¸åˆ°å•æ‰€ï¼Œå”¯ä¸€æ‰¾åˆ°çš„ä¸€ä¸ªç”·å•æ‰€è¿˜åœ¨ç»´ä¿®ä¸­ã€‚&lt;/p&gt;
&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/paris-trip/street.webp&#34; data-img=&#34;/blog/paris-trip/street.webp&#34; data-width=&#34;1200&#34; data-height=&#34;1799&#34; alt=&#34;image&#34; data-caption=&#34;é è¿‘å¢æµ®å®«çš„è¡—é“æ»¡æ˜¯åƒåœ¾å’Œå°¿éªšå‘³&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;é è¿‘å¢æµ®å®«çš„è¡—é“æ»¡æ˜¯åƒåœ¾å’Œå°¿éªšå‘³&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å·´é»è¿™åº§åŸå¸‚ä»¥å…¶ç‹¬ç‰¹çš„é­…åŠ›å’Œä¸°å¯Œçš„æ–‡åŒ–åº•è•´ç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ã€‚è¿™é‡Œçš„äººä»¬çƒ­æƒ…å‹å¥½ï¼Œæ™¯è‰²ç¾ä¸½åŠ¨äººã€‚è™½ç„¶åœ¨ä¸€äº›æ¸¸å®¢å¯†é›†çš„åœ°æ–¹å¯èƒ½ä¼šç¨æ˜¾æ‚ä¹±ï¼Œä½†è¿™ä¹Ÿæ˜¯ä»»ä½•æ—…æ¸¸åŸå¸‚éš¾ä»¥é¿å…çš„ç°è±¡ã€‚å·´é»ä¹‹è¡Œå……æ»¡äº†ç¾å¥½çš„å›å¿†ï¼Œè®©äººæµè¿å¿˜è¿”ï¼ŒæœŸå¾…æœªæ¥å†æ¬¡è¸ä¸Šè¿™ç‰‡æµªæ¼«çš„åœŸåœ°ã€‚ä¹Ÿå¸Œæœ›è¿™ç¯‡æ¸¸è®°èƒ½å¯¹åˆæ¬¡è¸ä¸Šè¿™ç¯‡åœŸåœ°äººæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;

      </description>
    </item>
                           
    <item>
      <title>å¦‚ä½•åœ¨ Istio ä¸­é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨ï¼Ÿ</title>
      <link>https://jimmysong.io/blog/how-to-integrate-third-party-registry-with-istio/</link>
      <pubDate>Fri, 14 Jun 2024 19:14:40 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/how-to-integrate-third-party-registry-with-istio/</guid>
      <description>
        
        
        &lt;p&gt;Istio ä¾èµ– Kubernetes æ¥è¿›è¡ŒæœåŠ¡å‘ç°ï¼Œè¿™é€šå¸¸æ„å‘³ç€å¿…é¡»åœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²å¾®æœåŠ¡å¹¶ä½¿ç”¨ Kubernetes æœåŠ¡å‘ç°ã€‚ç„¶è€Œï¼Œå¾ˆå¤šç°æœ‰çš„å¾®æœåŠ¡é¡¹ç›®è¿˜åœ¨ä½¿ç”¨å¦‚ Consulã€Eureka è¿™æ ·çš„ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨ï¼Œæœ¬æ–‡å°†æ¢è®¨å¦‚ä½•å°†è¿™äº›ç°æœ‰çš„å¾®æœåŠ¡çš„æ³¨å†Œè¡¨ä¸ Istio é›†æˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-å¯¹é-kubernetes-æœåŠ¡çš„æ”¯æŒ&#34;&gt;Istio å¯¹é Kubernetes æœåŠ¡çš„æ”¯æŒ&lt;/h2&gt;
&lt;p&gt;Istio æœ€åˆåªæ”¯æŒ Kubernetes æœåŠ¡ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¸ºäº†é€‚åº”æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œå®ƒå¼€å§‹æ”¯æŒåƒ Consul è¿™æ ·çš„ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨ã€‚é€šè¿‡å¼•å…¥ Mesh Configuration Protocolï¼ˆMCPï¼‰ï¼ŒIstio èƒ½å¤Ÿä¸å„ç§æœåŠ¡å‘ç°åç«¯é€šä¿¡ï¼Œå¦‚ Consulï¼Œä»è€Œç®¡ç†é Kubernetes ç¯å¢ƒä¸­çš„æœåŠ¡ã€‚åœ¨ Istio 1.1 ç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº† ServiceEntry èµ„æºå¯¹è±¡ï¼Œè¿™ä½¿å¾—ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å°†å¤–éƒ¨æœåŠ¡æ·»åŠ åˆ° Istio çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­ï¼Œå¹¶åœ¨ Istio 1.8 ä¸­å–æ¶ˆäº†å¯¹ Consul çš„ç›´æ¥æ”¯æŒï¼Œè½¬è€Œé€šè¿‡ &lt;a href=&#34;https://istio.io/latest/docs/reference/config/networking/service-entry/&#34; title=&#34;ServiceEntry&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ServiceEntry&lt;/a&gt; æä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥é›†æˆå’Œç®¡ç†æ‰€æœ‰æœåŠ¡ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦æ‰˜ç®¡åœ¨ Kubernetes ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-ä»£ç†é…ç½®çš„é«˜å±‚æ¶æ„&#34;&gt;Istio ä»£ç†é…ç½®çš„é«˜å±‚æ¶æ„&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº† Istio ä»£ç†é…ç½®çš„é«˜å±‚æ¶æ„ï¼Œæ­ç¤ºäº†é…ç½®å¦‚ä½•ä»å„ç§æºè¢«æ‘„å–ã€è½¬æ¢ï¼Œå¹¶æœ€ç»ˆæœåŠ¡äº Envoy ä»£ç†ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/how-to-integrate-third-party-registry-with-istio/ba3ac1f8ffc2b172dd0681013c328a09.svg&#34; data-img=&#34;/blog/how-to-integrate-third-party-registry-with-istio/ba3ac1f8ffc2b172dd0681013c328a09.svg&#34; alt=&#34;image&#34; data-caption=&#34;Istio ä»£ç†é…ç½®é«˜å±‚æ¶æ„&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;Istio ä»£ç†é…ç½®é«˜å±‚æ¶æ„&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;p&gt;è¦æƒ³è¯¦ç»†äº†è§£ Istiod çš„æ¶æ„ï¼Œå¯ä»¥å‚è€ƒ &lt;a href=&#34;https://cloudnativecn.com/blog/istiod-architecture/&#34; title=&#34;Istio æ¶æ„è¯¦è§£&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio æ¶æ„è¯¦è§£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®æ‘„å–è¿‡ç¨‹è¯¦è§£&#34;&gt;é…ç½®æ‘„å–è¿‡ç¨‹è¯¦è§£&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ConfigStore&lt;/strong&gt;: è´Ÿè´£è¯»å–å¤šç§ç±»å‹çš„èµ„æºå¹¶è¿›è¡Œèšåˆã€‚åŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XDS Client&lt;/strong&gt;: é€šè¿‡ xDS åè®®è¯»å–èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CRD Client&lt;/strong&gt;: ä» Kubernetes è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆCRDï¼‰è¯»å–èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Filesystem Client&lt;/strong&gt;: ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ServiceDiscovery&lt;/strong&gt;: èšåˆé¢å‘æœåŠ¡çš„å†…éƒ¨èµ„æºã€‚ä½¿ç”¨çš„ç»„ä»¶åŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kube Controller&lt;/strong&gt;: ä¾æ® Kubernetes æ ¸å¿ƒç±»å‹è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ServiceEntry Controller&lt;/strong&gt;: ä¾æ® Istio ç±»å‹è¿è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é…ç½®ç¿»è¯‘ä¸æœåŠ¡&#34;&gt;é…ç½®ç¿»è¯‘ä¸æœåŠ¡&lt;/h3&gt;
&lt;p&gt;é…ç½®ä» ConfigStore å’Œ ServiceDiscovery èšåˆåï¼Œç”± &lt;strong&gt;Config Translator&lt;/strong&gt; ç¿»è¯‘æˆé€‚åˆä»£ç†çš„æ ¼å¼ï¼Œç„¶åé€šè¿‡ &lt;strong&gt;XDS Server&lt;/strong&gt; æœåŠ¡äº Envoy ä»£ç†ã€‚è¿™æ˜¯å°†åŠ¨æ€é…ç½®åº”ç”¨äºä»£ç†çš„æœ€ç»ˆæ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬ä¸‰æ–¹æ³¨å†Œè¡¨åŒæ­¥&#34;&gt;ç¬¬ä¸‰æ–¹æ³¨å†Œè¡¨åŒæ­¥&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ª Operatorï¼Œè¯¥ Operator ç›‘è§†ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨å¹¶å°†æœåŠ¡ä»¥ ServiceEntry å’Œ WorkloadEntry èµ„æºå½¢å¼æ¨é€è‡³ Kubernetes API æœåŠ¡å™¨ã€‚ä»¥ä¸‹æµç¨‹å›¾å±•ç¤ºäº†è¯¥åŒæ­¥è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;figure class=&#34;mx-auto text-center&#34;&gt;
  
  
  
    
      
        
          &lt;img src=&#34;https://jimmysong.io/blog/how-to-integrate-third-party-registry-with-istio/34ee760a4cb26025ecf954077f77eee2.svg&#34; data-img=&#34;/blog/how-to-integrate-third-party-registry-with-istio/34ee760a4cb26025ecf954077f77eee2.svg&#34; alt=&#34;image&#34; data-caption=&#34;ç¬¬ä¸‰æ–¹æ³¨å†Œè¡¨åŒæ­¥æµç¨‹å›¾&#34;&gt;
        
      
    
  
  
  &lt;figcaption&gt;ç¬¬ä¸‰æ–¹æ³¨å†Œè¡¨åŒæ­¥æµç¨‹å›¾&lt;/figcaption&gt;
  
&lt;/figure&gt;
&lt;h3 id=&#34;ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨åŒæ­¥çš„æ­¥éª¤è¯´æ˜&#34;&gt;ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨åŒæ­¥çš„æ­¥éª¤è¯´æ˜&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Operator å‘ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨å‘èµ·æŸ¥è¯¢è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨è¿”å›å½“å‰æ³¨å†Œçš„æœåŠ¡æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;Operator å°†æœåŠ¡æ•°æ®è½¬æ¢ä¸º Istio çš„ ServiceEntry å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;Operator å°† ServiceEntry æ¨é€è‡³ Kubernetes API æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;Kubernetes API æœåŠ¡å™¨å°†å˜æ›´é€šçŸ¥ Istiodã€‚&lt;/li&gt;
&lt;li&gt;Istiod æ›´æ–° Envoy Proxies çš„é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;Operator å®šæœŸæ£€æŸ¥ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨ä»¥ç›‘æ§æœåŠ¡å˜åŒ–ï¼Œå‘ç°å˜æ›´åæ›´æ–° ServiceEntry å¹¶é‡æ–°æ¨é€è‡³ Kubernetes API æœåŠ¡å™¨ï¼Œå®ŒæˆæœåŠ¡åŒæ­¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;istio-registry-sync&#34;&gt;Istio Registry Sync&lt;/h2&gt;
&lt;p&gt;Tetrate å¼€å‘çš„ &lt;a href=&#34;https://docs.tetrate.io/istio-subscription/integrations/registry-sync/introduction&#34; title=&#34;Istio Registry Sync&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Registry Sync&lt;/a&gt; æ˜¯ä¸€ä¸ªæ‰©å±• Operatorï¼Œå¯ä»¥ä½œä¸º &lt;a href=&#34;https://docs.tetrate.io/istio-subscription/&#34; title=&#34;TIS&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TIS&lt;/a&gt; çš„ add-on è¿è¡Œã€‚å®ƒæ”¯æŒé Kubernetes æœåŠ¡æ³¨å†Œè¡¨ï¼ˆå¦‚ AWS Cloud Map å’Œ Consulï¼‰ä¸ Istio çš„é›†æˆã€‚æ­¤å·¥å…·æä¾›äº†ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆåº”ç”¨é›†æˆ&lt;/strong&gt;: åœ¨æ··åˆç¯å¢ƒä¸­ï¼Œå¦‚ä½¿ç”¨ Consul çš„ä¼ ç»Ÿåº”ç”¨ä¸ AWS Cloud Map ä¸­çš„å¾®æœåŠ¡å¯ä»¥é€šè¿‡ Istio Registry Sync å®ç°æ— ç¼çš„æœåŠ¡å‘ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ç«¯ç‚¹ç®¡ç†&lt;/strong&gt;: åœ¨æœåŠ¡é¢‘ç¹æ‰©ç¼©çš„ç¯å¢ƒä¸­ï¼ŒIstio Registry Sync èƒ½å¿«é€Ÿåæ˜ æ¥è‡ªé…ç½®æ³¨å†Œè¡¨çš„å˜æ›´ï¼Œç¡®ä¿ Istio æœåŠ¡ç½‘æ ¼ä¸­çš„æµé‡ç®¡ç†ç­–ç•¥å‡†ç¡®æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»Ÿä¸€çš„ç›‘æ§ä¸å®‰å…¨æ€åŠ¿&lt;/strong&gt;: é€šè¿‡å°†æ‰€æœ‰ç¯å¢ƒçš„æœåŠ¡é›†æˆè‡³ Istioï¼Œå¯ä»¥åˆ©ç”¨ Istio æä¾›çš„æœåŠ¡å¥åº·æŒ‡æ ‡å’Œç»Ÿä¸€çš„å®‰å…¨åè®®ï¼Œå¦‚ mTLSï¼Œç¡®ä¿è·¨æ‰€æœ‰æœåŠ¡çš„åŠ å¯†å’Œè®¤è¯é€šä¿¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¸Šè¿°æ–¹æ³•ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°å°† Istio ä¸ç¬¬ä¸‰æ–¹æœåŠ¡æ³¨å†Œè¡¨é›†æˆï¼Œæ— è®ºæ˜¯é€šè¿‡å¼€å‘è‡ªå®šä¹‰çš„ Operator è¿˜æ˜¯ä½¿ç”¨ç°æˆçš„ Istio Registry Sync å·¥å…·ã€‚è¿™æ ·ä¸ä»…èƒ½å¤Ÿä¿æŒæœåŠ¡çš„ç°ä»£åŒ–ï¼Œè¿˜èƒ½ç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¹‹é—´çš„é«˜æ•ˆååŒå·¥ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/istio/istio/blob/master/pilot/doc/architecture.md&#34; title=&#34;Istio Pilot Architecture - github.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Pilot Architecture - github.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.tetrate.io/istio-subscription/integrations/registry-sync/introduction&#34; title=&#34;Istio Registry Sync Documentation - docs.tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio Registry Sync Documentation - docs.tetrate.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
  </channel>
</rss>
