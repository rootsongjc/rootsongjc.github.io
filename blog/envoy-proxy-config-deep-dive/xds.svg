<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" width="686" height="493" version="1.1" viewBox="-652 -103 686 493"><defs><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="16" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="14" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="517" ascent="951.996" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="16" font-weight="400" panose-1="2 0 5 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue"/></font-face-src></font-face><marker id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#050303" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-1 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 4.8 0 L 0 -1.8 L 0 1.8 Z"/></g></marker><font-face x-height="517" ascent="951.996" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="12" font-weight="400" panose-1="2 0 5 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue"/></font-face-src></font-face><marker id="FilledDiamond_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-6 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M -4.8 0 L -2.4 1.8 L 0 0 L -2.4 -1.8 Z"/></g></marker><font-face x-height="523" ascent="966.995" cap-height="721" descent="-212.997" font-family="Helvetica Neue" font-size="16" font-weight="300" panose-1="2 0 4 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Light"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="18" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face></defs><metadata>Produced by OmniGraffle 7.11.5</metadata><g id="Envoy___" fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"><title>Envoy 架构图</title><rect width="686" height="493" x="-652" y="-103" fill="#fff"/><g id="Envoy___: Layer 1"><title>Layer 1</title><g id="Graphic_3"><path stroke="gray" stroke-dasharray="8 8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M -623.62205 61.32734 L -449.3907 61.32734 L -449.3907 262.15096 L -623.62205 262.15096 Z"/><text fill="#000" transform="translate(-618.62205 66.32734)"><tspan x="51.3" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">xDS API</tspan></text></g><g id="Graphic_45"><rect width="413.799" height="259.228" x="-640.63" y="14.315" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="Graphic_44"><rect width="413.799" height="39" x="-640.63" y="14.315" fill="#0a55a8"/><rect width="413.799" height="39" x="-640.63" y="14.315" stroke="#0a55a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-635.6299 25.11179)"><tspan x="158.836" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">Envoy Proxy</tspan></text></g><g id="Graphic_43"><rect width="152.779" height="20.61" x="-611.997" y="117.675" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-611.997" y="117.675" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-606.9966 118.2476)"><tspan x="54.342" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">CDS</tspan></text></g><g id="Graphic_42"><rect width="152.779" height="20.61" x="-611.852" y="144.89" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-611.852" y="144.89" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-606.85245 145.46283)"><tspan x="55.086" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">EDS</tspan></text></g><g id="Graphic_41"><rect width="152.779" height="20.61" x="-612.141" y="90.46" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-612.141" y="90.46" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-607.1407 91.03239)"><tspan x="54.494" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">RDS</tspan></text></g><g id="Graphic_40"><rect width="152.779" height="20.61" x="-611.708" y="171.352" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-611.708" y="171.352" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-606.7083 171.925)"><tspan x="55.526" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">LDS</tspan></text></g><g id="Graphic_38"><rect width="153.5" height="25.979" x="-411.456" y="171.352" fill="#333"/><rect width="153.5" height="25.979" x="-411.456" y="171.352" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-406.4557 174.6096)"><tspan x="48.214" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">admin</tspan></text></g><g id="Graphic_37"><rect width="153.5" height="25.979" x="-411.456" y="203.762" fill="#333"/><rect width="153.5" height="25.979" x="-411.456" y="203.762" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-406.4557 207.01956)"><tspan x="44.942" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">tracing</tspan></text></g><g id="Graphic_36"><rect width="99.5" height="39" x="-483.48" y="-89.045" fill="#0a55a8"/><rect width="99.5" height="39" x="-483.48" y="-89.045" stroke="#0a55a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-478.4803 -78.248245)"><tspan x="21.93" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">Host C</tspan></text></g><g id="Graphic_35"><rect width="99.5" height="33.923" x="-483.48" y="341.575" fill="#0a55a8"/><rect width="99.5" height="33.923" x="-483.48" y="341.575" stroke="#0a55a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-478.4803 349.83343)"><tspan x="22.322" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">Host A</tspan></text></g><g id="Graphic_32"><text fill="#000" transform="translate(-635.3379 -9.133161)"><tspan x="0" y="15" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="400">Upstream</tspan></text></g><g id="Graphic_31"><text fill="#000" transform="translate(-636.2219 278.5433)"><tspan x="0" y="15" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="400">Downstream</tspan></text></g><g id="Line_30"><line x1="-433.73" x2="-433.73" y1="341.575" y2="286.443" stroke="#050303" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_29"><line x1="-433.73" x2="-433.73" y1="14.315" y2="-37.145" stroke="#050303" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Graphic_28"><rect width="153.5" height="33.923" x="-420.945" y="99.823" fill="#333"/><rect width="153.5" height="33.923" x="-420.945" y="99.823" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="Graphic_27"><rect width="153.5" height="33.923" x="-410.315" y="113.142" fill="#333"/><rect width="153.5" height="33.923" x="-410.315" y="113.142" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="Graphic_26"><rect width="153.5" height="33.923" x="-399.685" y="126.461" fill="#333"/><rect width="153.5" height="33.923" x="-399.685" y="126.461" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-394.68504 133.69098)"><tspan x="40.79" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Listener</tspan></text></g><g id="Graphic_25"><rect width="105.44" height="28.448" x="-420.945" y="300.992" fill="#fff"/><text fill="#000" transform="translate(-415.9449 305.99208)"><tspan x="0" y="15" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="400">Send request</tspan></text></g><g id="Graphic_24"><rect width="99.5" height="39" x="-640.338" y="-89.045" fill="#0a55a8"/><rect width="99.5" height="39" x="-640.338" y="-89.045" stroke="#0a55a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-635.3379 -78.248245)"><tspan x="22.189" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">Host B</tspan></text></g><g id="Line_23"><line x1="-463.323" x2="-550.223" y1="14.315" y2="-42.947" stroke="#050303" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Graphic_13"><text fill="#000" transform="translate(-419.1379 -27.58116)"><tspan x="0" y="15" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="400">Route action:</tspan> <tspan x="0" y="33.448" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="400">route/redirect/direct_response</tspan></text></g><g id="Graphic_11"><rect width="152.779" height="20.61" x="-611.564" y="199.321" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-611.564" y="199.321" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-606.5642 199.89326)"><tspan x="55.078" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">SDS</tspan></text></g><g id="Graphic_9"><rect width="153.5" height="25.979" x="-411.456" y="236.172" fill="#333"/><rect width="153.5" height="25.979" x="-411.456" y="236.172" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-406.4557 239.4295)"><tspan x="52.934" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">stats</tspan></text></g><g id="Group_47"><g id="Graphic_34"><rect width="187.087" height="200.824" x="-164.409" y="34.015" fill="#fff"/><rect width="187.087" height="200.824" x="-164.409" y="34.015" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="Graphic_33"><rect width="187.087" height="27.44" x="-164.409" y="34.015" fill="#fff"/><rect width="187.087" height="27.44" x="-164.409" y="34.015" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 41.93871)"><tspan x="56.545" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">filter_chains</tspan></text></g><g id="Graphic_22"><rect width="187.087" height="19.353" x="-164.409" y="61.455" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="61.455" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 64.93078)"><tspan x="31.867" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.client_ssl_auth</tspan></text></g><g id="Graphic_21"><rect width="187.087" height="18.966" x="-164.409" y="119.109" fill="#fff"/><rect width="187.087" height="18.966" x="-164.409" y="119.109" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 122.37262)"><tspan x="34.531" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.mongo_proxy</tspan></text></g><g id="Graphic_20"><rect width="187.087" height="19.353" x="-164.409" y="80.791" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="80.791" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 84.26702)"><tspan x="58.093" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.echo</tspan></text></g><g id="Graphic_19"><rect width="187.087" height="18.966" x="-164.409" y="100.144" fill="#fff"/><rect width="187.087" height="18.966" x="-164.409" y="100.144" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 103.40685)"><tspan x="1.297" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.http_connection_manager</tspan></text></g><g id="Graphic_18"><rect width="187.087" height="19.353" x="-164.409" y="138.075" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="138.075" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 141.55114)"><tspan x="46.981" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.rate_limit</tspan></text></g><g id="Graphic_17"><rect width="187.087" height="19.353" x="-164.409" y="157.428" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="157.428" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 160.90373)"><tspan x="40.315" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">envoy.redis_proxy</tspan></text></g><g id="Graphic_16"><rect width="187.087" height="19.353" x="-164.409" y="196.133" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="196.133" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 199.6089)"><tspan x="60.319" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">http_filters</tspan></text></g><g id="Graphic_15"><rect width="187.087" height="19.353" x="-164.409" y="215.486" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="215.486" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 218.96148)"><tspan x="58.771" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">thrift_filters</tspan></text></g><g id="Graphic_12"><rect width="187.087" height="19.353" x="-164.409" y="176.78" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="176.78" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 180.2563)"><tspan x="59.875" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">sni_cluster</tspan></text></g><g id="Graphic_10"><rect width="187.087" height="19.353" x="-164.409" y="234.838" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="234.838" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 238.31406)"><tspan x="45.109" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">ext_authz_filters</tspan></text></g><g id="Graphic_7"><rect width="187.087" height="19.353" x="-164.409" y="254.191" fill="#fff"/><rect width="187.087" height="19.353" x="-164.409" y="254.191" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-159.40945 257.66665)"><tspan x="82.543" y="11" fill="#000" font-family="Helvetica Neue" font-size="12" font-weight="400">…</tspan></text></g></g><g id="Graphic_6"><rect width="152.779" height="20.61" x="-611.42" y="227.289" fill="#0a55a8"/><rect width="152.779" height="20.61" x="-611.42" y="227.289" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-606.42006 227.86152)"><tspan x="63.39" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">…</tspan></text></g><g id="Line_39"><line x1="-236.892" x2="-164.918" y1="122.728" y2="98.263" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-start="url(#FilledDiamond_Marker)"/></g><g id="Graphic_48"><text fill="#a5a5a5" transform="translate(-126.53084 333.58604)"><tspan x="0" y="15" fill="#a5a5a5" font-family="Helvetica Neue" font-size="16" font-weight="300">Version: 2022-08-04</tspan> <tspan x=".792" y="33.464" fill="#a5a5a5" font-family="Helvetica Neue" font-size="16" font-weight="300">https://jimmysong.io</tspan></text></g><g id="Graphic_50"><text fill="#000" transform="translate(-198.73684 -84.0452)"><tspan x="0" y="18" fill="#000" font-family="Helvetica Neue" font-size="18" font-weight="700">Envoy Proxy Architecture</tspan></text></g></g></g></svg>