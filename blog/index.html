<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>博客 - Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="专注开源技术、云原生与生活随笔的分享与思考。">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.136.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.f6911c0ac7d2b5b69c3f2d9f2a2b3b496b5da0608580347fdb4dc11ef74f3ec5.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.f6911c0ac7d2b5b69c3f2d9f2a2b3b496b5da0608580347fdb4dc11ef74f3ec5.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/blog/" />
  <meta property="og:title" content="博客 | Jimmy Song" />
  <meta property="twitter:title" content="博客 | Jimmy Song" />

  
  <meta property="og:description" content="专注开源技术、云原生与生活随笔的分享与思考。" />
  <meta property="twitter:description" content="专注开源技术、云原生与生活随笔的分享与思考。" />

  
  <meta property="og:image" content="https://jimmysong.io/images/banner/default.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/default.jpg" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">博客</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">资料</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">公告</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">联系</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/community/">社区</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">视频 <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
              
              
                
                
                
                  
                    
                    <a class="nav-link" href="/en/blog/">English</a>
                    
                  
                
              
              
              
                
                  
                    
                    
                  
                
                
                
              
          </li>
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>搜索</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>站内搜索</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="关闭"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="请输入搜索词" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="请输入搜索词">
        
        <div class="mt-4">
          <span>搜索类型: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">所有</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">原创</label>
              <input type="radio" id="trans" name="search_type" value="trans">
              <label for="trans">译文</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">资料</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">公告</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    博客
                </p>
                <p class="page-description">
                    专注开源技术、云原生与生活随笔的分享与思考。
                </p>
                
            </div>
        </div>
    </div>
</section>

        


<section class="section-sm book-list-section bg-gray">
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          
          
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/ai-ppt-to-hugo/">如何使用通义千问 AI 生成 PPT 并发布到个人网站</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/26</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/ai"> 
             AI
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('如何使用通义千问 AI 生成 PPT 并发布到个人网站', '使用通义千问 AI 快速生成 PPT，并通过 Canva 调整后嵌入 Hugo 网站，展示高效方法。', '\n以下是使用通义千问 AI 快速生成 PPT 并将其发布到个人网站的简单流程：\n\n{{\u003cslide src=\u0022https:\/\/www.canva.cn\/design\/DAGXkFFIYXY\/d7XYxuZkK1Mcpz3Qrb2bfw\/view\u0022\u003e}}\n\n注：PPT 内容由通义 AI 生成，访问 [tongyi.ai 智能](https:\/\/tongyi.aliyun.com\/aippt)生成更多 PPT\n\n## 使用通义千问生成 PPT\n\n- **工具地址**：[通义千问 AI PPT](https:\/\/tongyi.aliyun.com\/aippt)\n- **登录方式**：\n    - 使用淘宝账号和手机号验证码登录。\n- **功能亮点**：\n    1. **主题生成**：输入一个主题，AI 可以自动生成 PPT 内容（适合简单场景）。\n    2. **长文生成**：支持最多 **10 万字**的文本解析，适合将报告或博客生成 PPT。\n    3. **模板个性化**：支持选择多种模板，生成的 PPT 可以导出为 **pptx 格式**。\n- **使用体验**：\n    - 我尝试用自己的博客生成了一份 PPT，AI 自动整理了章节和配图，效果还不错，模板选择提升了个性化展示的效果。\n\n## 导入 Canva 进行调整\n\n- **工具地址**：[Canva.cn](https:\/\/www.canva.cn\/)\n- **调整方法**：\n    1. 将从通义千问生成的 **pptx 文件**导入 Canva。\n    2. 根据需要调整 **排版布局**，补充和调整一些内容。\n    3. 完成调整后，在 Canva 中选择导出为 **嵌入式网页**，生成一个可分享的链接。\n\n## 将 PPT 发布到个人网站\n\n- **工具**：Hugo\n- **操作步骤**：\n    1. 在 Hugo 博客中，使用以下 Shortcode 嵌入 Canva 的分享链接：\n\n        \u0060\u0060\u0060html\n        \u003cslide src=\u0022https:\/\/www.canva.cn\/design\/DAGXjo0P9w0\/view\u0022\u003e\n        \u0060\u0060\u0060\n\n    2. 保存后部署网站，即可在博客中直接展示 PPT。\n\n## 使用场景\n\n博客嵌入 PPT 的适用场景可以涵盖以下几个方面：\n\n1. 提炼长内容的梗概；\n2. 简化多图内容的存储与排版；\n3. 展示数据与图表；\n4. 教程与演示文档；\n5. 总结与复盘；\n6. 对外分享和推广。\n\n## 总结\n\n通过 **通义千问 AI PPT** 和 **Canva** 的结合，可以快速生成并发布高质量的 PPT 到个人网站。这种方法尤其适合将博客内容快速转化为视觉化演示，既省时又高效。\n\n如果需要更多样式和交互，可以进一步自定义 Canva 的模板，满足更高的个性化需求。\n', '\/blog\/ai-ppt-to-hugo\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">使用通义千问 AI 快速生成 PPT，并通过 Canva 调整后嵌入 Hugo 网站，展示高效方法。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/warp-modern-terminal-tool/">新一代终端工具 Warp：重新定义命令行体验</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/25</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             其他
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('新一代终端工具 Warp：重新定义命令行体验', '介绍我最近发现的一款智能命令行终端 Warp。', '\n最近，我在尝试各种终端工具时发现了一个令人耳目一新的产品——**[Warp](https:\/\/www.warp.dev\/)**。这是一款专为开发者设计的现代终端工具，它不仅颠覆了我们对传统命令行工具的认知，还以智能化的交互体验显著提升了生产力。本文将介绍 Warp 的核心功能，并对比传统工具（如 iTerm），探讨它为何可能成为终端工具的新标杆。\n\n## 什么是 Warp？\n\nWarp 是一款现代化终端工具，由 Rust 开发，旨在通过更直观、更高效的交互设计重新定义终端的使用体验。它与传统的终端工具（如 iTerm2 或 macOS 的默认终端）相比，加入了诸多智能化和现代化的功能。\n\n![Warp 命令行界面](https:\/\/jimmysong.io\/img\/blog\/warp-modern-terminal-tool\/warp.webp)\n\nWarp 的设计围绕以下几个核心理念展开：\n\n- **智能化：** 内置 Warp AI，支持通过自然语言与终端交互。\n- **高效化：** 采用块状结构管理命令和输出，便于复制、分享和回溯。\n- **协作性：** 借助 Warp Drive 支持团队共享工作流和脚本。\n- **可定制性：** 提供现代编辑器功能，允许深度定制。\n\n## Warp 的核心功能\n\n### 1. 块（Block）结构\n\nWarp 将每条命令及其输出划分为独立的块。每个块可以单独操作，例如复制、删除或分享，这使得管理和回溯命令变得异常简单。\n\n对比传统终端：\n\n- 在 iTerm 中，所有命令和输出混杂在一起，回溯历史命令时往往需要手动滚动查找。\n- Warp 的块式设计可以一键选定某个命令的所有输出，极大地提高了效率。\n\n### 2. Warp Drive：工作流和协作\n\nWarp Drive 是 Warp 提供的团队协作工具，支持以下功能：\n\n- **个人工作区：** 保存常用命令和工作流，随时调用。\n- **团队共享：** 支持将交互式笔记本或复杂脚本分享给团队成员，方便知识传递。\n- **实时同步：** 团队的所有工作内容在更新后可立即同步，确保大家始终使用最新的配置。\n\n对比传统终端：\n\n- iTerm 更专注于个人使用，协作功能几乎为零。\n- Warp Drive 将终端工具扩展到团队场景，弥补了传统工具在这一点上的不足。\n\n### 3. Agent 模式：自然语言交互\n\nWarp 的 Agent 模式让你可以直接用自然语言向终端发出指令，Warp AI 会将其解析为具体的命令并执行。例如：\n\n- 输入“创建一个 Python 虚拟环境并安装 requests 库”，Warp 会自动生成并执行相关命令。\n\n对比传统终端：\n\n- iTerm 或其他工具需要用户手动输入命令，依赖于用户对命令语法的熟悉程度。\n- Warp 的 Agent 模式显著降低了命令行的学习门槛，并能加速日常任务的执行。\n\n### 4. 现代化编辑器\n\nWarp 提供类似于 IDE 的命令编辑体验：\n\n- 支持多光标操作、语法高亮、自动补全。\n- 提供上下文感知，输入命令时会根据历史记录或环境智能提示。\n\n对比传统终端：\n\n- iTerm 等工具的输入框仅支持最基本的文本输入，没有现代编辑器的智能功能。\n- Warp 的编辑功能大幅提升了用户输入命令的效率和准确性。\n\n### 5. 内置 Warp AI\n\nWarp 集成了 AI 功能，可以：\n\n- **智能建议：** 根据上下文预测你可能需要的命令。\n- **自我纠错：** 如果输入的命令有问题，Warp AI 能检测并建议修正方案。\n- **学习环境：** Warp AI 可学习工具或库的 \u0060--help\u0060 输出，帮助用户生成正确的命令。\n\n对比传统终端：\n\n- iTerm 不具备任何智能化功能，而 Warp 的 AI 提升了终端工具的可用性，尤其对初学者非常友好。\n\n## 与传统工具（如 iTerm）的对比\n\n| 功能             | Warp                                 | iTerm2                           |\n| ---------------- | ------------------------------------ | -------------------------------- |\n| **命令块管理**   | 块状结构，独立管理命令和输出         | 所有内容混杂在一处，需要滚动查找 |\n| **团队协作**     | 支持 Warp Drive 分享和同步           | 不支持                           |\n| **自然语言交互** | Agent 模式，支持自然语言指令         | 不支持                           |\n| **编辑器功能**   | 语法高亮、多光标、智能补全           | 基本的文本输入                   |\n| **智能化支持**   | Warp AI 提供建议、自我纠错和学习     | 不支持                           |\n| **性能**         | GPU 加速、流畅渲染                   | 良好                             |\n| **跨平台支持**   | 支持 macOS 和 Linux（Windows开发中） | 支持 macOS、Linux、Windows       |\n\n## 为什么选择 Warp？\n\n如果你是一名开发者或终端重度用户，Warp 提供了许多无法忽视的优势：\n\n- **免费**：对于个人用户，可以免费使用。\n- **跨平台**：支持 macOS、Linux，Windows 版本即将推出。\n- **高效：** 块式管理和现代化编辑器功能可以节省大量时间。\n- **智能：** AI 支持让复杂命令变得简单，降低了使用门槛。\n- **协作：** Warp Drive 为团队共享知识和工作流提供了极大便利。\n\n## 总结\n\nWarp 是一款令人兴奋的终端工具，它不仅提供了更现代、更智能的用户体验，还弥补了传统工具的多项不足。对于追求效率和智能化的开发者来说，Warp 是值得一试的选择。如果你还在使用 iTerm，不妨尝试一下 Warp，它可能会彻底改变你对终端的认知。\n', '\/blog\/warp-modern-terminal-tool\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">介绍我最近发现的一款智能命令行终端 Warp。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/typora-notion-to-obsidian/">为什么我将笔记从 Notion 迁移到 Obsidian？</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/21</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             其他
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('为什么我将笔记从 Notion 迁移到 Obsidian？', '探索我从 Typora 和 Notion 迁移到 Obsidian 的原因，深入对比三者优缺点，分享最佳实践。', '\n多年来，我尝试过多款笔记和 Markdown 编辑工具，包括 Typora、Notion 和 Obsidian。每一款工具都有它的优缺点，但最终我决定将笔记迁移到 Obsidian。这篇文章将详细记录我的思考过程、对比分析，以及迁移的原因。\n\n![Obsidian 笔记编辑页面](https:\/\/jimmysong.io\/img\/blog\/typora-notion-to-obsidian\/obsidian-app-ui.webp)\n\n## 早期的选择：从 Typora 到 Notion\n\n最初，我使用 Typora 作为主要的 Markdown 编辑工具。Typora 简洁优雅，支持多种文档格式导出，是一款极具吸引力的软件。然而，随着我管理的文档和笔记日益增多，Typora 的缺点也逐渐暴露：\n\n- **缺乏文件管理功能**：Typora 是一个纯编辑器，没有笔记组织或管理的能力。\n- **缺乏插件扩展**：Typora 封闭的生态限制了我的个性化需求。\n- **收费**：作为商业软件，Typora 需要购买授权。\n\n在发现 Typora 的局限性后，我转而使用 Notion。Notion 提供了强大的笔记管理能力，其数据库功能让我能够轻松归档和分类文档，并支持跨平台协作。这一阶段，我还利用 Notion 构建了家庭账本和知识库。然而，随着时间推移，Notion 的一些问题让我逐渐感到不满：\n\n1. **体积庞大**：在手机端，Notion App 的安装包接近 1GB，占用存储空间。\n2. **导出兼容性差**：导出的 Markdown 文件与 Hugo 和 GitHub Pages 不完全兼容，格式调整需要额外工作。\n3. **在线依赖**：Notion 必须联网使用，且需要注册账号，这增加了使用门槛。\n4. **付费订阅问题**：虽然订阅了一年的 Notion AI，但效果不如 ChatGPT，功能冗余。\n\n## Obsidian 的重新发现\n\n最近阅读了 [全面提升 Obsidian 体验：插件与日常技巧分享](https:\/\/atbug.com\/enhance-obsidian-experience-plugins-tips\/)，让我重新审视 Obsidian 的潜力。早年试用时，我觉得 Obsidian 界面“丑陋”，文件组织方式也不够直观。然而，现在的 Obsidian 已今非昔比，丰富的插件生态、灵活的文件管理能力，以及对开源社区的支持，让我再次尝试并最终选择了它。\n\n## 软件对比分析\n\n在迁移到 Obsidian 之前，我仔细对比了 Typora、Notion 和 Obsidian 的优缺点。以下是对比表：\n\n| 特性         | Typora                     | Notion                                 | Obsidian                                 |\n| ------------ | -------------------------- | -------------------------------------- | ---------------------------------------- |\n| **价格**     | 商业软件，需要购买         | 个人用户免费，AI 功能 $10\/月           | 免费，开源软件                           |\n| **优点**     | 界面简洁，导出多种文档格式 | 功能强大，适合协作，数据库功能优秀     | 丰富的插件生态，灵活的文档管理，开源透明 |\n| **缺点**     | 无文件管理，无插件支持     | 在线依赖，不支持本地管理，文件导出问题 | 插件功能复杂，需要手动调整，入门稍陡     |\n| **适用场景** | 单文档编辑                 | 知识库管理与协作                       | 高度定制化的本地知识管理和 Markdown 编辑 |\n\n## 为什么选择 Obsidian？\n\n在使用 Typora 和 Notion 后，我发现自己的需求更倾向于 Obsidian 所提供的功能：\n\n1. **文档组织能力**：Obsidian 支持在统一界面内组织 Markdown 文档，并在移动文件时自动更新引用链接，这大大简化了管理工作。\n2. **插件生态丰富**：Obsidian 拥有大量插件，满足不同需求，比如绘图（Excalidraw）、笔记清理（Clear Unused Images）、文件统计（Vault Full Statistics）等。\n3. **开源与本地化**：所有文件存储在本地 vault 中，不依赖在线服务，支持迁移和备份，同时可以完全掌控数据。\n4. **跨平台同步**：通过 iCloud，我可以在 iPhone 和 MacBook 上无缝同步笔记。\n\n## Obsidian 的不足与解决方法\n\n尽管 Obsidian 非常适合我的需求，但仍存在一些小问题：\n\n1. **笔记内部搜索**：目前没有区分大小写的选项，这对搜索精确性略有影响，可以通过其他编辑器打开文件后执行笔记内搜索和替换。\n2. **云存储对接**：免费版不支持直接集成云存储，但通过 iCloud 手动同步已经足够。\n3. **Mermaid 图表支持**：渲染的图表可能超出页面宽度，安装 Diagram Popup 可以解决。\n\n## 我的 Obsidian 插件推荐\n\n以下是我最常用的插件清单：\n\n- **Excalidraw**：绘制草图。\n- **Linter**：优化 YAML metadata。\n- **Dataview**：数据视图展示。\n- **Templater**：自动化模板。\n- **Advanced Tables**：表格增强。\n\n通过这些插件，我将 Obsidian 打造成了一个功能强大的笔记工具，既满足了个人知识管理需求，又能够支持博客写作。\n\n## 总结\n\n从 Typora 到 Notion，再到最终的 Obsidian，是我对笔记工具需求不断变化的结果。Typora 的简洁、Notion 的强大都吸引过我，但 Obsidian 开源、可扩展、本地化的特性，真正让我感受到自由和高效。虽然使用中仍有一些问题，但通过插件和社区支持，我已经完全适应了 Obsidian 的生态。\n\n如果你也在寻找一款强大的 Markdown 笔记工具，不妨试试 Obsidian。或许它也能成为你的最终选择！\n', '\/blog\/typora-notion-to-obsidian\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">探索我从 Typora 和 Notion 迁移到 Obsidian 的原因，深入对比三者优缺点，分享最佳实践。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/istio-ambient-traffic-interception/">Istio Ambient 模式中的透明流量拦截过程详解</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/18</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio Ambient 模式中的透明流量拦截过程详解', '本文是关于 Istio Ambient 模式的系列文章的第一篇，介绍了如何通过透明流量拦截实现无需 Sidecar 的服务网格。详细分析了 Istio CNI Node Agent、ztunnel 以及 Pod 网络命名空间的交互过程。', '\n这是我关于 Istio ambient 模式系列文章的第一篇。在接下来的几篇中，我将深入探讨 ambient 模式的关键组件及其工作原理，包括 ztunnel 如何将流量转发到 waypoint proxy，waypoint proxy 如何处理流量，以及通过 bookinfo 示例完整理解流量路径的操作。由于流量拦截是服务网格的基础功能，因此我选择从它开始，为大家提供扎实的理解基础。\n\nIstio ambient 模式是一种无需在每个 pod 中注入 sidecar 的服务网格实现方式。它通过在 pod 的网络命名空间内配置透明流量拦截和重定向，使应用程序无需修改即可享受服务网格的功能。以下内容将详细解析透明流量拦截的实现过程，涉及组件如 **Istio CNI Node Agent**、**ztunnel**、**网络命名空间** 和 **iptables 规则**，并通过流程图和示意图进行说明。\n\n## 背景知识\n\n### Linux 网络命名空间\n\n**网络命名空间（Network Namespace）** 是 Linux 内核的功能，用于隔离不同进程的网络环境。每个网络命名空间都有独立的网络设备、IP 地址、路由表和 iptables 规则。容器技术（如 Docker、Kubernetes）利用网络命名空间为每个容器（或 pod）提供独立的网络栈。\n\n### Istio CNI Node Agent\n\n**Istio CNI Node Agent** 是 ambient 模式中的核心组件之一，负责在 Kubernetes 节点上检测加入 ambient 网格的 pod，并为这些 pod 配置流量重定向规则。需要注意的是，这里使用的是 Istio CNI Node Agent，而非传统的 Istio CNI 插件。Node Agent 是一个守护进程，与 ztunnel 协同工作，而不是直接参与网络插件的工作。\n\n### ztunnel\n\n**ztunnel** 是 ambient 模式中的重要组件，以 DaemonSet 的形式运行在每个节点上，负责：\n\n- 接收并处理被重定向的流量；\n- 实现 L4 层的策略，如 mTLS 加密和访问控制；\n- 与控制平面通信以获取配置和证书。\n\n### HBONE（基于 HTTP 的隧道协议）\n\n**HBONE（HTTP-Based Overlay Network Encapsulation）** 是 Istio 引入的协议，用于在 ztunnel 和 waypoint proxy 之间传输任意 TCP 流量。HBONE 利用 HTTP\/2 和 HTTP\/3 的多路复用及加密特性，提高通信效率和安全性。\n\n## 流量拦截过程详解\n\n在 ambient 模式下，应用程序 pod 无需修改代码，也不需要注入 sidecar。流量拦截和重定向的主要过程发生在 **pod 的网络命名空间** 内部，这种方式避免了与底层 CNI 的冲突。以下是其步骤概览：\n\n\u0060\u0060\u0060mermaid \u0022Istio ambient 模式的流量拦截过程\u0022\nsequenceDiagram\n    participant Kubelet\n    participant NodeAgent as Istio CNI Node Agent\n    participant PodNetns as pod 网络命名空间\n    participant ztunnel\n    participant Pod as 应用程序 pod\n\n    Kubelet-\u003e\u003eNodeAgent: 通知新 pod 加入 ambient 网格\n    NodeAgent-\u003e\u003ePodNetns: 配置 iptables 规则\n    NodeAgent-\u003e\u003eztunnel: 传递 pod 网络命名空间 FD\n    ztunnel-\u003e\u003ePodNetns: 在 pod 网络命名空间内启动监听套接字\n    Pod-\u003e\u003ePodNetns: 应用程序发出流量\n    PodNetns-\u003e\u003eztunnel: 流量被重定向到 ztunnel\n    ztunnel-\u003e\u003e目标服务: 通过隧道转发流量\n    目标服务--\u003e\u003eztunnel: 返回响应\n    ztunnel--\u003e\u003ePod: 响应流量传递回应用程序\n\u0060\u0060\u0060\n\n![Istio ambient 模式的流量拦截过程](7b94ccedcde4f27f06d158187d7904e2.svg)\n\n### 流量拦截详细步骤\n\n1. **pod 启动与网络配置**：\n   - Kubernetes 创建 pod 时，通过 Container Runtime Interface（CRI）调用底层 CNI 插件（如 Calico、Cilium）为 pod 配置网络。\n   - 此时，pod 的网络命名空间（netns）已经建立。\n2. **Istio CNI Node Agent 配置流量重定向**：\n   - Istio CNI Node Agent 监测到新 pod 被标记为 ambient 模式（通过标签 \u0060istio.io\/dataplane-mode=ambient\u0060）。\n   - 进入 pod 的网络命名空间，设置 iptables 规则以拦截流量。\n   - 将网络命名空间的文件描述符（FD）传递给 ztunnel。\n3. **ztunnel 在 pod 网络命名空间中启动监听套接字**：\n   - ztunnel 接收到网络命名空间的 FD，在其中启动监听套接字以处理重定向的流量。\n4. **透明流量拦截与处理**：\n   - 应用程序发出的流量被 pod 内的 iptables 规则拦截，并透明地重定向到 ztunnel。\n   - ztunnel 对流量执行策略检查、加密等处理后转发到目标服务。\n   - 返回的响应流量通过 ztunnel 解密并返回给应用程序。\n\n想了解更多关于 Istio CNI 处理 iptables 的细节请见我的另一篇博客 [Istio ambient 模式中的 iptables 规则解析](\/blog\/istio-ambient-pod-iptables-injection\/)。\n\n## ztunnel 日志分析\n\n你可以通过下面的命令查看所有 ztunnel 日志中有关流量拦截的记录，可以帮助你理解 ztunnel 的运行原理：\n\n\u0060\u0060\u0060bash\nkubectl -n istio-system logs -l app=ztunnel | grep -E \u0022inbound|outbound\u0022\n\u0060\u0060\u0060\n\n你将看到例如下面的输出，注意里面的 \u0060inbound\u0060 和 \u0060outbound\u0060 是相对于 ztunnel 而言的。\n\n**入站流量示例**\n\n\u0060\u0060\u0060text\n2024-11-16T10:33:01.410751Z\tinfo\taccess\tconnection complete\tsrc.addr=10.28.2.19:58000 src.workload=\u0022bookinfo-gateway-istio-64fc6d75d6-s442s\u0022 src.namespace=\u0022default\u0022 src.identity=\u0022spiffe:\/\/cluster.local\/ns\/default\/sa\/bookinfo-gateway-istio\u0022 dst.addr=10.28.2.18:15008 dst.hbone_addr=10.28.2.18:9080 dst.service=\u0022productpage.default.svc.cluster.local\u0022 dst.workload=\u0022productpage-v1-57ffb6658c-tgbjs\u0022 dst.namespace=\u0022default\u0022 dst.identity=\u0022spiffe:\/\/cluster.local\/ns\/default\/sa\/bookinfo-productpage\u0022 direction=\u0022inbound\u0022 bytes_sent=9603 bytes_recv=2052 duration=\u00222110ms\u0022\n\u0060\u0060\u0060\n\n该日志描述了从 \u0060bookinfo-gateway-istio\u0060 到 \u0060productpage\u0060 的入站流量。流量经过 ztunnel 的 15008 端口，使用了 HBONE 隧道加密，身份通过 SPIFFE 确认。\n\n**出站流量示例**\n\n\u0060\u0060\u0060text\n2024-11-16T10:32:59.360677Z\tinfo\taccess\tconnection complete\tsrc.addr=10.28.2.18:51960 src.workload=\u0022productpage-v1-57ffb6658c-tgbjs\u0022 src.namespace=\u0022default\u0022 src.identity=\u0022spiffe:\/\/cluster.local\/ns\/default\/sa\/bookinfo-productpage\u0022 dst.addr=10.28.2.14:15008 dst.hbone_addr=34.118.226.6:9080 dst.service=\u0022details.default.svc.cluster.local\u0022 dst.workload=\u0022waypoint-7594b5b786-vgjwz\u0022 dst.namespace=\u0022default\u0022 dst.identity=\u0022spiffe:\/\/cluster.local\/ns\/default\/sa\/waypoint\u0022 direction=\u0022outbound\u0022 bytes_sent=794 bytes_recv=414 duration=\u002240ms\u0022\n\u0060\u0060\u0060\n\n此日志描述了 \u0060productpage\u0060 pod 访问 \u0060details\u0060 服务时的出站流量。流量由 ztunnel 使用 HBONE 隧道转发到 waypoint pod（\u006015008\u0060 端口）。\n\n## 总结\n\nIstio ambient 模式通过 Istio CNI Node Agent 和 ztunnel 的协作，实现了无需 sidecar 的透明流量拦截。其关键特性包括：\n\n- **兼容性强**：避免与底层 CNI 冲突。\n- **简化运维**：无需修改应用程序代码，降低资源消耗。\n- **安全性高**：通过 HBONE 实现端到端的加密传输。\n\n后续文章中，我将进一步探讨 Istio ambient 模式的高级功能，包括 L7 流量路径分析和网络拓扑构建过程，敬请期待。\n\n## 参考\n\n- [Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs](https:\/\/istio.io\/latest\/blog\/2024\/inpod-traffic-redirection-ambient\/)\n- [Istio Ambient Mesh 介绍](https:\/\/istio.io\/latest\/blog\/2022\/introducing-ambient-mesh\/)\n- [Kubernetes 官方文档：网络插件](https:\/\/kubernetes.io\/docs\/concepts\/extend-kubernetes\/compute-storage-net\/network-plugins\/)\n- [HBONE](https:\/\/istio.io\/latest\/docs\/ambient\/architecture\/hbone\/)\n- [ztunnel traffic redirection](https:\/\/istio.io\/latest\/docs\/ambient\/architecture\/traffic-redirection\/)\n', '\/blog\/istio-ambient-traffic-interception\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">本文是关于 Istio Ambient 模式的系列文章的第一篇，介绍了如何通过透明流量拦截实现无需 Sidecar 的服务网格。详细分析了 Istio CNI Node Agent、ztunnel 以及 Pod 网络命名空间的交互过程。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/istio-ambient-inpod-iptables/">Istio Ambient 模式中的 Pod 内 iptable 规则注入解析</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/18</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio Ambient 模式中的 Pod 内 iptable 规则注入解析', '深入解析 Istio ambient 模式下 pod 内部的 iptables 规则如何实现透明流量拦截和控制。', '\n在 [上一篇博客](\/blog\/istio-ambient-traffic-interception\/) 中，我概述了 Istio ambient 模式中 pod 网络命名空间内注入的 iptables 规则。本文将深入解析这些规则，探讨它们是如何在 pod 内实现透明流量拦截和重定向的。\n\n## Pod 内的 iptables 规则\n\n在 pod 的网络命名空间内，Istio CNI node agent 会设置一系列 iptables 规则，以实现流量的透明拦截与重定向。下面的规则展示了 Istio 在 mangle 和 nat 表中注入的内容，确保入站和出站流量经过适当的处理。\n\n\u0060\u0060\u0060python\n# Generated by iptables-save v1.8.9 (nf_tables) on Thu Nov 14 08:43:17 2024\n*mangle\n:PREROUTING ACCEPT [99138:22880045]  # mangle 表中的 PREROUTING 链，默认策略为 ACCEPT。\n:INPUT ACCEPT [0:0]  # mangle 表中的 INPUT 链，默认策略为 ACCEPT。\n:FORWARD ACCEPT [0:0]  # mangle 表中的 FORWARD 链，默认策略为 ACCEPT。\n:OUTPUT ACCEPT [100900:34940164]  # mangle 表中的 OUTPUT 链，默认策略为 ACCEPT。\n:POSTROUTING ACCEPT [0:0]  # mangle 表中的 POSTROUTING 链，默认策略为 ACCEPT。\n:ISTIO_OUTPUT - [0:0]  # 自定义的 ISTIO_OUTPUT 链，用于处理 Istio 的出站流量。\n:ISTIO_PRERT - [0:0]  # 自定义的 ISTIO_PRERT 链，用于处理 Istio 的预路由流量。\n-A PREROUTING -j ISTIO_PRERT  # 将所有 PREROUTING 流量跳转到 ISTIO_PRERT 链。\n-A OUTPUT -j ISTIO_OUTPUT  # 将所有 OUTPUT 流量跳转到 ISTIO_OUTPUT 链。\n-A ISTIO_OUTPUT -m connmark --mark 0x111\/0xfff -j CONNMARK --restore-mark --nfmask 0xffffffff --ctmask 0xffffffff\n# 如果连接标记为 0x111\/0xfff，则恢复连接标记，用于连接追踪的一致性。\n\n-A ISTIO_PRERT -m mark --mark 0x539\/0xfff -j CONNMARK --set-xmark 0x111\/0xfff\n# 如果数据包标记为 0x539\/0xfff，在 PREROUTING 链中将其连接标记设置为 0x111\/0xfff。\n\nCOMMIT  # 应用 mangle 表规则。\n# Completed on Thu Nov 14 08:43:17 2024\n\n# Generated by iptables-save v1.8.9 (nf_tables) on Thu Nov 14 08:43:17 2024\n*nat\n:PREROUTING ACCEPT [2:120]  # nat 表中的 PREROUTING 链，默认策略为 ACCEPT。\n:INPUT ACCEPT [0:0]  # nat 表中的 INPUT 链，默认策略为 ACCEPT。\n:OUTPUT ACCEPT [119:9344]  # nat 表中的 OUTPUT 链，默认策略为 ACCEPT。\n:POSTROUTING ACCEPT [0:0]  # nat 表中的 POSTROUTING 链，默认策略为 ACCEPT。\n:ISTIO_OUTPUT - [0:0]  # 自定义的 ISTIO_OUTPUT 链，用于处理 Istio 的出站 NAT 流量。\n:ISTIO_PRERT - [0:0]  # 自定义的 ISTIO_PRERT 链，用于处理 Istio 的预路由 NAT 流量。\n-A PREROUTING -j ISTIO_PRERT  # 将所有 PREROUTING 流量跳转到 ISTIO_PRERT 链。\n-A OUTPUT -j ISTIO_OUTPUT  # 将所有 OUTPUT 流量跳转到 ISTIO_OUTPUT 链。\n-A ISTIO_OUTPUT -d 169.254.7.127\/32 -p tcp -m tcp -j ACCEPT\n# 如果目标地址为 169.254.7.127（可能是 Istio 内部地址），允许 TCP 流量通过。\n\n-A ISTIO_OUTPUT -p tcp -m mark --mark 0x111\/0xfff -j ACCEPT\n# 如果数据包标记为 0x111\/0xfff，允许 TCP 流量通过。\n\n-A ISTIO_OUTPUT ! -d 127.0.0.1\/32 -o lo -j ACCEPT\n# 允许发往本地回环接口（但不包括 127.0.0.1）的流量通过。\n\n-A ISTIO_OUTPUT ! -d 127.0.0.1\/32 -p tcp -m mark ! --mark 0x539\/0xfff -j REDIRECT --to-ports 15001\n# 将发往非 127.0.0.1 的出站 TCP 流量（且标记不是 0x539\/0xfff）重定向到端口 15001（Istio 出站流量入口）。\n\n-A ISTIO_PRERT -s 169.254.7.127\/32 -p tcp -m tcp -j ACCEPT\n# 如果源地址为 169.254.7.127，允许 TCP 流量通过 PREROUTING 链。\n\n-A ISTIO_PRERT ! -d 127.0.0.1\/32 -p tcp -m tcp ! --dport 15008 -m mark ! --mark 0x539\/0xfff -j REDIRECT --to-ports 15006\n# 将非 127.0.0.1 且目标端口不是 15008 的入站 TCP 流量（标记不是 0x539\/0xfff）重定向到端口 15006（Istio 入站流量入口）。\n\nCOMMIT  # 应用 nat 表规则。\n# Completed on Thu Nov 14 08:43:17 2024\n\u0060\u0060\u0060\n\n### 端口号的作用\n\n这些 iptables 规则通过特定的端口号来区分并处理不同类型的流量：\n\n- **15008 (HBONE socket)**：用于透明代理基于 HTTP 的流量，支持 HBONE 协议的透明传输。\n- **15006 (plaintext socket)**：用于处理未加密的网格内部流量，以实现 pod 之间的流量管理。\n- **15001 (outbound socket)**：用于管理出站流量，实现对外部服务访问的策略控制。\n\n这些端口使得 Istio 能够对入站、出站及内部流量进行透明的管理与控制，从而实现细粒度的安全策略与流量控制。更多关于端口号的使用请参考 [Istio 应用要求](https:\/\/istio.io\/latest\/docs\/ops\/deployment\/application-requirements\/)。\n\n### 标记 \u00600x539\u0060 的作用\n\n\u00600x539\u0060 是用于标识 Istio 代理发出的流量的标记。这一标记在流量进入 iptables 规则时被设置，用于区分由代理（如 ztunnel）处理过的数据包，防止其被重复代理或误处理。\n\n### 标记 \u00600x111\u0060 的作用\n\n\u00600x111\u0060 用于连接级别的标记管理，在 Istio 网格中标识已由代理处理过的整个连接。通过 iptables 的 \u0060CONNMARK\u0060 模块，\u00600x111\u0060 标记能够从单个数据包扩展到整个连接的生命周期，从而加速后续数据包的匹配。\n\n## iptables 规则可视化\n\n下图展示了流量在 iptables 规则中的执行路径，帮助理解流量的匹配和重定向过程：\n\n\u0060\u0060\u0060mermaid \u0022Istio ambient pod 内 iptables 可视化\u0022\ngraph TD\nA[流量进入 Pod 网络命名空间] --\u003e B{流量方向}\nB -- 入站流量 --\u003e C[PREROUTING 链]\nC --\u003e D[跳转到 ISTIO_PRERT 链]\nD --\u003e E{源地址是 169.254.7.127\/32 吗?}\nE -- 是 --\u003e F[ACCEPT]\nE -- 否 --\u003e G{目的地址是 127.0.0.1\/32 吗?}\nG -- 是 --\u003e F[ACCEPT]\nG -- 否 --\u003e H{目的端口是 15008 吗?}\nH -- 是 --\u003e F[ACCEPT]\nH -- 否 --\u003e I{数据包是否标记为 0x539?}\nI -- 是 --\u003e F[ACCEPT]\nI -- 否 --\u003e J[REDIRECT 到 15006 端口]\nB -- 出站流量 --\u003e K[OUTPUT 链]\nK --\u003e L[跳转到 ISTIO_OUTPUT 链]\nL --\u003e M{目的地址是 169.254.7.127\/32 吗?}\nM -- 是 --\u003e N[ACCEPT]\nM -- 否 --\u003e O{数据包是否标记为 0x111?}\nO -- 是 --\u003e N[ACCEPT]\nO -- 否 --\u003e P{目的地址是 127.0.0.1\/32，且输出接口是 lo 吗?}\nP -- 是 --\u003e N[ACCEPT]\nP -- 否 --\u003e Q{数据包是否标记为 0x539?}\nQ -- 是 --\u003e N[ACCEPT]\nQ -- 否 --\u003e R[REDIRECT 到 15001 端口]\n\u0060\u0060\u0060\n\n![Istio ambient pod 内 iptables 可视化](b99dc3a72ccab48d71e6c502b1089d2d.svg)\n\n想进一步了解 Istio CNI 如何处理 iptables，请参考代码 [istio\/cni\/pkg\/iptables\/iptables.go at master · istio\/istio · GitHub](https:\/\/github.com\/istio\/istio\/blob\/master\/cni\/pkg\/iptables\/iptables.go)。\n\n## 不同类型流量的路由可视化\n\n以下是同节点与跨节点的加密和明文流量路径的可视化图示：\n\n**跨节点的加密流量路径**\n\n![跨节点的加密流量路径](cross-node-hbone.svg)\n\n**跨节点的明文流量路径**\n\n![跨节点的明文流量路径](cross-node-plaintext.svg)\n\n**同节点的加密流量路径**\n\n![同节点的加密流量路径](same-node-hbone.svg)\n\n**同节点的明文流量路径**\n\n![同节点的明文流量路径](same-node-plaintext.svg)\n\n\n1. **应用程序发出请求**：流量从应用程序进程发送，进入 Pod 的网络命名空间。\n2. **iptables 规则匹配**：\n   - **出站流量**在 \u0060OUTPUT\u0060 链中被匹配，符合条件的流量被重定向到 \u0060ISTIO_OUTPUT\u0060 链。\n   - 在 \u0060ISTIO_OUTPUT\u0060 链中，流量被标记并被接受。\n3. **REDIRECT 重定向**：流量被 iptables 捕获并重定向到 ztunnel 监听端口（明文流量为 15006，加密流量为 15008）。\n4. **ztunnel 处理流量**：ztunnel 接收到流量，进行策略检查和加密等操作。\n5. **流量转发到目标服务**：ztunnel 将处理后的流量发送到目标服务。\n6. **返回路径**：目标服务的响应通过网络返回 ztunnel，ztunnel 对响应进行解密和策略检查，然后返回给应用程序。\n\n## 总结\n\n通过解析 Istio ambient 模式下的 iptables 规则，我们可以看到，Istio 通过 CNI 插件在 pod 内设置了一系列透明的流量拦截规则。这些规则确保了流量在进出 pod 时能够按预期被 ztunnel 代理处理，从而实现更细粒度的流量管理和安全策略应用。未来我们将继续探索更多关于 Istio ambient 模式下的网络细节，敬请关注。', '\/blog\/istio-ambient-inpod-iptables\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">深入解析 Istio ambient 模式下 pod 内部的 iptables 规则如何实现透明流量拦截和控制。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/cross-network-namespace-socket/">跨网络命名空间管理套接字：探索 Linux 套接字的使用</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/11/07</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             其他
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('跨网络命名空间管理套接字：探索 Linux 套接字的使用', '介绍如何在 Linux 中跨网络命名空间管理套接字，并使用 Docker 进行演示。', '\n最近我在研究 Istio Ambient 模式中的透明流量劫持，过程中涉及了跨网络命名空间管理套接字的功能。在 Istio 官方的博客 [Maturing Istio Ambient: Compatibility Across Various Kubernetes Providers and CNIs](https:\/\/istio.io\/latest\/blog\/2024\/inpod-traffic-redirection-ambient\/) 中也提到了这一点，让我对 Linux 套接字 API 的这个功能产生了浓厚的兴趣。所以，我决定写下这篇博客，分享如何在 Linux 系统中跨网络命名空间管理套接字的细节。\n\n## 网络命名空间简介\n\n网络命名空间是一种 Linux 内核特性，可以把系统的网络资源（例如 IP 地址、路由表等）分割成多个独立的实例。这样每个实例就可以为不同的进程提供独立的网络环境。比如，Docker 使用网络命名空间为每个容器提供独立的网络栈，让它们之间的网络资源互相隔离。\n\n通过网络命名空间，不同的进程可以有独立的网络配置，比如不同的 IP 地址和路由设置。但即使网络命名空间实现了隔离，Linux 的套接字 API 仍然可以让进程跨网络命名空间操作套接字。\n\n## 跨网络命名空间管理套接字\n\n在一个命名空间中运行的进程可以创建一个套接字，并将它放到另一个网络命名空间中，这让我们可以实现非常灵活的网络通信。比如，可以在一个特定的网络命名空间中创建监听套接字，让其他命名空间中的进程共享这个套接字。这种功能在容器编排和微服务架构中非常有用。\n\n下面是一个简单的例子，使用 \u0060nc\u0060 命令创建套接字，使其绑定到指定的网络设备或命名空间。\n\n\u0060\u0060\u0060mermaid\ngraph TD;\n    A[创建监听套接字] --\u003e B[跨网络命名空间传递]\n    B --\u003e C[其他命名空间中的进程共享套接字]\n\u0060\u0060\u0060\n\n![Mermaid Diagram](f04c2c199e66b82ef451c2e3c2be99e1.svg)\n\n## 使用 Docker 演示这一功能\n\n因为我使用的 macOS 不支持 Linux 的网络命名空间，但可以使用 Docker Desktop 模拟相应的环境。下面是在 macOS 上使用 Docker 来演示的方法：\n\n\u0060\u0060\u0060mermaid\ngraph LR;\n    A[Docker Desktop] --\u003e B[创建一个网络接口]\n    B --\u003e C[创建两个容器]\n    C --\u003e D[连接到同一个虚拟网络]\n    D --\u003e E[容器间相互通信]\n\u0060\u0060\u0060\n\n![Mermaid Diagram](73a1a7081b41c63c1e7f98a87e4f8580.svg)\n\n1. **安装 Docker Desktop**\n\n   - 下载并安装 Docker Desktop，可以在 macOS 上运行 Linux 容器。\n   - 启动 Docker Desktop 后，我们可以在容器中模拟网络命名空间的相关操作。\n\n2. **配置虚拟网络**\n\n   - 创建虚拟网络接口\n     \u0060\u0060\u0060bash\n     docker network create --driver bridge my_bridge\n     \u0060\u0060\u0060\n   - 为每个容器分配 IP 地址，以便它们可以相互通信。\n\n3. **创建网络命名空间（使用 Docker 容器模拟）**\n\n   - 使用 Docker 创建两个容器，分别模拟两个网络命名空间：\n     \u0060\u0060\u0060bash\n     docker run -d --name ns1 --network my_bridge --privileged alpine sleep infinity\n     docker run -d --name ns2 --network my_bridge --privileged alpine sleep infinity\n     \u0060\u0060\u0060\n     \n   - 创建容器时直接将它们连接到这个虚拟网络，以便它们可以相互通信。\n\n4. **跨命名空间创建套接字**\n\n   使用 \u0060docker exec\u0060 命令进入容器并配置网络接口：\n\n   - 在 \u0060ns1\u0060 容器中运行一个监听套接字：\n     \u0060\u0060\u0060bash\n     docker exec ns1 sh -c \u0022nc -l -k -p 8080\u0022\n     \u0060\u0060\u0060\n     \n   - 获取 \u0060ns1\u0060 容器的 IP 地址：\n     \n     \u0060\u0060\u0060bash\n     export NS1_IP=$(docker inspect -f \u0027{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}\u0027 ns1)\n     \u0060\u0060\u0060\n     \n   - 在 \u0060ns2\u0060 容器中，使用 \u0060nc\u0060 命令访问 \u0060ns1\u0060 容器中的套接字：\n     \u0060\u0060\u0060bash\n     docker exec ns2 sh -c \u0022echo \u0027Hello from ns2\u0027 | nc $NS1_IP 8080\u0022\n     \u0060\u0060\u0060\n     \n   - 此时，我们可以在 \u0060ns1\u0060 容器的界面中看到来自 \u0060ns2\u0060 容器的 \u0060Hello from ns2\u0060 字符串。尽管 \u0060ns1\u0060 和 \u0060ns2\u0060 属于不同的容器，但通过正确的配置，\u0060ns2\u0060 仍然可以访问 \u0060ns1\u0060 中的套接字。\n\n可以理解为通过在 \u0060ns2\u0060 监听 \u0060ns1\u0060 的套接字，类似于建立了一个“隧道”来实现通信。这种方式实际上是建立了一条直接的通信通道，使得两个容器之间能够进行数据交换。虽然它没有真正构建 VPN 那样复杂的隧道，但从逻辑上来说，\u0060ns2\u0060 和 \u0060ns1\u0060 之间可以通过这个套接字来传递数据，相当于建立了一个轻量级的点对点连接通道。\n\n## 实际应用场景\n\n这种“隧道”式的通信在许多实际场景中非常有用，以下是一些例子：\n\n1. **透明代理和负载均衡**：通过套接字隧道可以将客户端请求转发到服务容器中，常用于透明代理或负载均衡。Istio、**Envoy Proxy** 和 **HAProxy** 等工具利用类似机制来管理服务间流量。\n2. **跨容器日志收集**：通过套接字隧道，可以将多个容器的日志集中收集到一个处理容器中。**Fluentd** 和 **Logstash** 是常用的日志收集工具，用于简化日志处理。\n3. **安全审查和入侵检测**：将多个命名空间的流量集中到一个监控容器中进行统一检测。**Suricata**、**Snort** 和 **Zeek** 等开源工具可用于网络安全分析和审查。\n4. **调试和测试**：开发人员可以将测试流量转发到其他命名空间的服务，用于验证和调试。**Wireshark** 可以用于捕获网络包，以便进行深入的网络调试和分析。\n\n## 总结\n\n跨网络命名空间管理套接字在容器管理、调度系统和微服务架构中有很多应用。例如，可以用这种方式实现服务的透明负载均衡，建立隧道或进行网络流量调试。但这种灵活性也要求我们在设计网络安全策略时更加谨慎，以防止不同命名空间之间的潜在通信带来的安全问题。\n', '\/blog\/cross-network-namespace-socket\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">介绍如何在 Linux 中跨网络命名空间管理套接字，并使用 Docker 进行演示。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/">从 AWS App Mesh 迁移到 Istio 全面指南</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/10/30</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('从 AWS App Mesh 迁移到 Istio 全面指南', '从 AWS App Mesh 迁移到 Istio 的指南，聚焦云原生、Kubernetes 友好的解决方案，探讨差异、高级特性及 Tetrate Istio 迁移工具，实现便捷高效的转移。', '\n随着 [AWS 宣布将在 2026 年 9 月 30 日停用 AWS App Mesh](https:\/\/aws.amazon.com\/cn\/blogs\/containers\/migrating-from-aws-app-mesh-to-amazon-ecs-service-connect\/)，许多企业正在评估继续使用服务网格的替代方案。如果您也在寻找替代方案，Istio 将是一个强大且功能丰富的选项，尤其适合 Kubernetes 原生环境。在本文中，我将介绍从 AWS App Mesh 迁移到 Istio 的过程，对比这两种服务网格，并介绍我们开发的 Tetrate Istio 迁移工具，帮助简化这一迁移过程。\n\n## App Mesh vs Istio：迁移准备\n\n由于 AWS App Mesh 即将停用，了解 App Mesh 和 Istio 之间的相似性和差异对于成功迁移至关重要。以下是一些关键比较点，帮助您将当前的基础设施与 Istio 提供的功能对齐：\n\n1. **全面的功能**：App Mesh 和 Istio 都提供流量管理、可观测性和安全功能，但 Istio 提供了更多可自定义的选项，包括高级流量路由和增强的遥测。\n2. **云无关性**：与紧密集成 AWS 的 App Mesh 不同，Istio 是云无关的，可在多云或混合环境中提供更大的灵活性。\n3. **高级安全**：Istio 默认支持 mTLS，与 App Mesh 相比，提供了更广泛的安全功能和策略。\n\nAWS 建议 ECS 客户迁移到 [Service Connect](https:\/\/docs.aws.amazon.com\/AmazonECS\/latest\/developerguide\/service-connect.html) 而 EKS 客户迁移到 [VPC Lattice](https:\/\/aws.amazon.com\/vpc\/lattice\/)。对于一个功能丰富的开源解决方案，Istio 是一个很有吸引力的选择。接下来，让我们深入了解从 AWS App Mesh 迁移到 Istio 的过程，并使用 Tetrate 的迁移工具进行支持。\n\n## 比较 App Mesh、Service Connect、VPC Lattice 和 Istio\n\n在开始迁移之前，了解 AWS App Mesh、Service Connect、VPC Lattice 和 Istio 之间的关键区别非常重要：\n\n| **功能**                 | **App Mesh**                                                   | **Service Connect**                                          | **VPC Lattice**                                              | **Istio**                                                    |\n| ------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| **网络可靠性**          | 使用 [Envoy](https:\/\/envoyproxy.io\/) 作为 Sidecar 代理，进行异常检测、健康检查和重试，支持精细调整。 | 使用 Envoy 作为 Sidecar 代理，仅支持超时调整。              | 内置健康检查和重试，由 AWS 管理的可靠性，不需要 Sidecar 代理。 | 支持 Sidecar 和 Ambient 模式，使用 Envoy 并完全支持精细化调整。 |\n| **高级流量路由**        | 支持高级流量路由，如 A\/B 测试和金丝雀发布。                 | 不支持高级流量路由。                                         | 支持基本的流量路由和负载均衡。                               | 支持包括 A\/B 测试和金丝雀发布在内的高级流量控制。             |\n| **可观测性**            | 需要手动收集和监控指标。                                     | 自动将指标发送到 Amazon CloudWatch。                         | 集成 AWS CloudWatch 和 X-Ray 监控。                          | 开箱即用的可观测性，支持 Prometheus、Grafana 和 Jaeger。      |\n| **服务发现**            | 集成 AWS Cloud Map。                                          | 使用 AWS Cloud Map。                                         | 使用 AWS 服务发现机制。                                      | 使用 Kubernetes 原生的服务发现机制。                         |\n| **安全性**              | 支持与 AWS PCA 的 TLS 和双向 TLS（mTLS）。                    | 支持 TLS，不支持 mTLS。                                       | 支持 mTLS。                                                  | 支持 mTLS 和细粒度的安全策略。                               |\n| **资源共享**            | 可以跨多个 AWS 账户共享网格。                                 | 不支持跨账户共享命名空间。                                   | 可以跨多个 AWS 账户共享资源。                                | 可以跨多个集群和云部署。                                     |\n\n## 介绍 Tetrate 的 Istio 迁移工具\n\n为了使迁移过程更加顺利，Tetrate 开发了一个 Istio 迁移工具包，目前处于私有状态，但可供内部或经过批准的客户通过 [此表单](https:\/\/resources.tetrate.dev\/app-mesh-istio?__hstc=218802950.edcf2542a8010c44aa57b98adaef028a.1721092227167.1729818643207.1730268606576.91\u0026__hssc=218802950.2.1730268606576\u0026__hsfp=872206273) 申请使用。该工具包帮助自动转换 AWS App Mesh 配置为 Istio 的等效配置，包括 Virtual Nodes、Virtual Routers 和其他网络结构。\n\n**关键考量**\n\n- **服务发现**：App Mesh 和 Istio 的服务发现方式不同。Istio 依赖 Kubernetes 原生的服务发现，而 App Mesh 则集成 AWS Cloud Map。迁移过程中，需相应调整服务定义。\n- **安全性**：Istio 原生支持服务之间的 mTLS。虽然 AWS App Mesh 也支持 mTLS，但迁移至 Istio 需要配置 CA（证书颁发机构）并更新证书以适应 Istio 的安全模型。\n- **流量管理**：Istio 的 Virtual Services 和 Destination Rules 提供了比 App Mesh 的 Virtual Routers 和 Nodes 更高级的流量路由能力。迁移过程中，需额外配置以建立类似的路由行为。\n\n## 使用 Tetrate 迁移工具逐步完成迁移\n\n下面是使用此工具的有效步骤：\n\n### 前提条件\n\n开始迁移之前，确保已安装以下工具：\n\n- [Go](https:\/\/golang.org\/doc\/install)\n- [kubectl](https:\/\/kubernetes.io\/docs\/tasks\/tools\/#kubectl)\n- [istioctl](https:\/\/istio.io\/latest\/docs\/setup\/getting-started\/#download)\n\n确保在 EKS 集群上正确安装和配置 AWS App Mesh。您还需要一个名为 tetrate-tis-creds 的 Kubernetes secret，用于 Istio 安装，详见工具文档。\n\n该工具还提供预检查命令，以识别迁移前的任何潜在阻碍因素。\n\n### 运行预检查\n\n为确保设置准备就绪，运行以下命令：\n\n\u0060\u0060\u0060bash\ntim precheck\n\u0060\u0060\u0060\n\n此命令将扫描 App Mesh 环境，标出任何需要调整的项，以确保成功迁移。\n\n### 迁移过程\n\n1. **安装 Istio**\n\n   使用 Istio 迁移工具包生成 IstioOperator 配置并安装 Istio：\n\n   \u0060\u0060\u0060bash\n   tim generate iop | istioctl install –skip-confirmation -f –\n   \u0060\u0060\u0060\n\n2. **应用 Istio 网络规则**\n\n   接下来，生成并应用 Istio 网络规则：\n\n   \u0060\u0060\u0060bash\n   tim generate networking | kubectl apply -f –\n   \u0060\u0060\u0060\n\n3. **移除 AWS App Mesh 标签**\n\n   从命名空间中移除现有的 App Mesh 标签。例如，对于 default 命名空间：\n\n   \u0060\u0060\u0060bash\n   kubectl label namespace default \u0022appmesh.k8s.aws\/sidecarInjectorWebhook-\u0022\n   \u0060\u0060\u0060\n\n4. **启用 Istio Sidecar 注入**\n\n   添加标签以启用 Istio 的自动 Sidecar 注入：\n\n   \u0060\u0060\u0060bash\n   kubectl label namespace default istio-injection=enabled\n   \u0060\u0060\u0060\n\n5. **重启部署**\n\n   为应用更改并启动新的 Envoy Sidecar 注入，重启部署：\n\n   \u0060\u0060\u0060bash\n   kubectl rollout restart deployment \u003cdeployment-name\u003e -n \u003cdeployment-namespace\u003e\n   \u0060\u0060\u0060\n\n### 迁移策略\n\n从 AWS App Mesh 迁移到 Istio 时，可以使用如原地迁移、金丝雀发布、蓝绿部署等策略，这些策略与迁移到 VPC Lattice 的策略相似。合适的策略取决于应用需求，如是否需要零停机或安排维护窗口。\n\n1. **原地迁移**：用配置为 Istio 的新 Pods 替换当前 App Mesh 的 Kubernetes Pods，适合可容忍迁移过程中的停机的应用。\n2. **蓝绿部署**：在新命名空间中配置为 Istio 的应用副本，而原始部署继续运行 App Mesh，无停机地逐步将流量从 App Mesh 迁移到 Istio。\n3. **金丝雀发布**：与 App Mesh 并行部署 Istio，逐步将少量流量转移到 Istio，监控性能和稳定性，逐步增加流量。\n\n4. **分阶段迁移**：逐步迁移组件或服务，而非一次性迁移，以减少风险并帮助识别潜在问题。\n5. **测试和验证**：在完全切换前，进行全面测试，验证服务功能、安全性和性能指标符合或超出预期。\n\n## 结论\n\n从 AWS App Mesh 迁移到 Istio 可以解锁流量管理、可观测性和安全方面的新功能。Tetrate 的 Istio 迁移工具简化了过程，提供了分步骤方法，减少手动配置，确保平稳过渡。\n\n如果您有兴趣试用 Tetrate 的 Istio 迁移工具，欢迎联系我们——该工具目前可私密使用，我们将很乐意讨论访问权限。\n\n此次迁移不仅是采用新的服务网格，更是一个充分利用 Istio 全面功能、支持多云部署、增强基础设施弹性的机会。\n\n*本文最初发表于 [tetrate.io](https:\/\/tetrate.io\/blog\/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide\/)。*', '\/blog\/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">从 AWS App Mesh 迁移到 Istio 的指南，聚焦云原生、Kubernetes 友好的解决方案，探讨差异、高级特性及 Tetrate Istio 迁移工具，实现便捷高效的转移。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/kubernetes-next-decade/">[译] 云原生网络：展望 Kubernetes 的下一个十年</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/10/28</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/kubernetes"> 
             Kubernetes
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/cloud-native-networking-as-kubernetes-starts-its-second-decade/" target="_blank" rel="noopener">原文</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('云原生网络：展望 Kubernetes 的下一个十年', '随着 Kubernetes 进入下一个十年，其网络与安全体系将迎来新挑战，eBPF、Gateway API 和 AI 的发展为其未来注入更多可能性。', '\n随着 Kubernetes 迈入青春期，让我们思考其网络和安全系统如何进一步发展与适应。\n\nKubernetes 最近迎来了[十周年](https:\/\/kubernetes.io\/blog\/2024\/06\/06\/10-years-of-kubernetes\/)纪念。作为一名家有三子的父亲，我感觉有责任提醒 Kubernetes 的管理员们：成长中的 Kubernetes 并不总是“乖巧”。\n\n可以预见，[Kubernetes](https:\/\/roadmap.sh\/kubernetes) 将进入其“叛逆期”。\n\nKubernetes 未来将经历增长的阵痛（随着新用例迫使它进行调整）；它或许会遭遇“身份危机”（到底是平台还是API？）；它将寻求更少的监控与更大的自主性（依赖AI工具来减少人类的直接监督）。\n\n借此机会，随着 KubeCon 北美大会即将在盐湖城召开，让我们展望一下云原生网络的发展方向，并探讨一些未来的趋势。\n\n### eBPF 将无处不在\n\n作为能够在 Linux 内核（未来也将支持 [Windows](https:\/\/thenewstack.io\/ebpf-is-coming-for-windows\/)）中运行自定义程序的技术，[eBPF](https:\/\/ebpf.io\/) 的势头不减。除了网络和安全功能（例如 [Cilium](https:\/\/cilium.io\/) 和 [Tetragon](https:\/\/tetragon.io\/) 项目），还出现了更多的应用场景：\n\n- 测量[功耗](https:\/\/sched.co\/1iW8V)：使用 eBPF。\n- 引入[混沌测试](https:\/\/youtu.be\/_5Zabryx0nE?si=KhGFMmeay9LtoJ_-)来验证系统的弹性：使用 eBPF。\n- 加速[加密流量](https:\/\/sched.co\/1i7lP)：使用 eBPF。\n- 在高流量加密数据中[检测异常](https:\/\/sched.co\/1i7ms)：使用 eBPF。\n\n我们可能会面临一种情况，不选择 eBPF 作为网络编程平台反而成为少数。尽管 [eBPF 是一种强大的工具](https:\/\/thenewstack.io\/ebpf-security-power-and-shortfalls\/)，我们不能将所有网络问题都视为“钉子”。\n\n### 最酷的组合：eBPF 与 OpenTelemetry\n\n在 eBPF 可以访问每一个数据包的能力下，网络可视化是一个非常强大的用例。\n\n[OpenTelemetry](https:\/\/www.cncf.io\/reports\/opentelemetry-project-journey-report\/) 作为 CNCF 项目中最活跃的项目之一，提供了标准的可观测框架，通过简单的应用程序仪表来生成和管理遥测数据。\n\n考虑到网络经常被认为是应用性能问题的根源，我们可以期待使用 [OpenTelemetry Network](https:\/\/sched.co\/1how7)，直接从 Linux 内核获取低级遥测数据，以提供关于应用健康状况的有价值见解。\n\n### 展望未来：回顾与反思\n\n在 Kubernetes 迈向十周年之际，我们也开始反思其网络架构的一些设计决策是否依然适用。\n\n例如，Ingress API 是 Kubernetes 早期的一个重要选择，然而其继任者 Gateway API 正在取代它。\n\n服务网格架构也在演变，从传统的 sidecar 架构向 [Cilium Service Mesh](https:\/\/isovalent.com\/blog\/post\/cilium-service-mesh\/) 和 Istio Ambient 模式的无 sidecar 方式转变。\n\n这似乎是反思的好时机。甚至 Kubernetes 的 SIG-Network 组也在考虑是否要放弃[容器网络接口插件模型](https:\/\/kubernetes.io\/docs\/concepts\/extend-kubernetes\/compute-storage-net\/network-plugins\/)，并可能引入更现代的 [Kubernetes 网络接口](https:\/\/github.com\/kubernetes\/enhancements\/issues\/4410)（KNI）。\n\n### 是时候告别 Ingress\n\n[Gateway API](https:\/\/gateway-api.sigs.k8s.io\/) 是 Kubernetes 生态系统中最具创新性的项目之一。它不仅解决了 Ingress 的不足，且其开发充满合作与包容精神。\n\n随着近三十个 Gateway API 的实现和即将推出的 1.2 版本，在今年的 KubeCon 上，Gateway API 的讨论将深入到实际的部署经验，而非入门课程。\n\nIngress 曾经广泛使用，但现在是时候迈向 Gateway API 了。\n\n### AI 在 Kubernetes 网络中的应用\n\n在讨论 [AI 与网络](https:\/\/www.youtube.com\/watch?v=mUbeiDF2B4k)时，我总是将其分为“面向 AI 工作负载的网络”和“用 AI 改善网络”。后者是当下的重点。\n\n我曾经尝试使用大型语言模型（LLM）来创建网络策略和分析日志，然而效果不一。我们期待 Kubernetes 能借助 AI 技术做出更智能的网络决策，例如自动生成网络策略。\n\n### 面向 AI 的 Kubernetes 网络\n\n随着 Kubernetes 成为 AI\/ML 应用的理想平台，AI 工作负载对网络的需求也愈加显著。它不仅需要本地 GPU，还需要通过远程直接内存访问（RDMA）连接远程 GPU。\n\n或许 Kubernetes 近期的动态资源分配（[DRA](https:\/\/kubernetes.io\/docs\/concepts\/scheduling-eviction\/dynamic-resource-allocation\/)）功能可以用来访问专门的网络硬件资源。\n\n### 结语\n\n是的，Kubernetes 将经历类似青少年的成长过程。但没关系，它有一个支持性强、不断创新的社区来帮助其发展成为一个稳定的系统。\n', '\/trans\/kubernetes-next-decade\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">随着 Kubernetes 进入下一个十年，其网络与安全体系将迎来新挑战，eBPF、Gateway API 和 AI 的发展为其未来注入更多可能性。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/shanxi-trip/">地上文物看山西：宝藏文物大省不该被埋没</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/10/26</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e6%97%85%e8%a1%8c"> 
             旅行
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('地上文物看山西：宝藏文物大省不该被埋没', '我曾三次游山西，历大同、忻州、朔州、晋城等地，赏众多名胜古迹。谈山西旅游优缺，景区分散等问题存，望借游戏热度促保护，提升文化素养以感其深厚内涵。', '\n我前后三次到访过山西：\n\n- 第一次是 2017 年 12 月，公司组织团建，去了山西大同，游览了悬空寺、云冈石窟和北岳恒山\n- 第二次是 2019 年 4 月，清明节期间，和几位好友自驾去了山西五台山、佛光寺、雁门关和应县木塔\n- 第三次是 2021 年 6 月，到山西晋城参加朋友婚礼，因为当时正值疫情期，没有办法进到景区游览，只是用无人机俯瞰了下「皇城相府」\n\n第一次去山西就被山西厚重的文化内涵所打动，而最近随着首款国产 3A 游戏《黑神话：悟空》的火爆，游戏中的取景地山西的各种古建筑接连出圈。俗话说”地下文物看陕西，地上文物看山西“，如此宝藏文物大省不该被埋没。\n\n## 大同\n\n去大同的时候是 12 月，当地的天气不是很好，到处都是灰蒙蒙的。大同是山西省省域副中心城市。曾是北魏京都、辽金陪都，有“三代京华、两朝重镇”之称。\n\n![大同一隅](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/datong.webp)\n\n### 云冈石窟\n\n云冈石窟蔚为壮观，这也是我第一次游览古代石窟。云冈石窟是中国四大石窟之一。其始凿于北魏文成帝时期，历时 64 年。石窟依山开凿，东西绵延约 1 公里，现存主要洞窟 45 个，附属洞窟 209 个，它于 2001 年被列入“世界文化遗产”名录，2007 年成为国家首批 5A 级旅游景区。\n\n![云冈石窟](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/yungangshiku.webp)\n\n86 版《西游记》第 18 集《扫塔辨奇冤》在云冈石窟有多处取景。该集一开始，师徒四人刚抵达祭赛国时行走的场景，就是在云冈石窟西部洞窟前拍摄的。后来，孙悟空躲在石窟上面查看僧众被殴打的场面，也是在此拍摄。再后来，一位僧侣向唐僧师徒透露冤情，由于几年前寺中塔顶的舍利子佛宝被盗，僧侣们因此遭受不白之冤和苦难，这一对话场景实际上是在云冈石窟的第五窟拍摄完成的。\n\n### 北岳恒山\n\n攀爬北岳恒山相对比较容易，恒山的山势虽然险峻，但攀登过程中坡度相对较为缓和，没有特别陡峭难行的路段。恒山的海拔约 2016.1 米。恒山的垂直落差相对其他一些著名高山来说不是特别大，大约在 1000 多米。\n\n![北岳恒山](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/hengshan.jpg)\n\n### 悬空寺\n\n悬空寺位于恒山金龙峡西侧翠屏峰峭壁间。始建于北魏后期，为木质框架结构，呈“一院两楼”布局，是佛、道、儒三教合一的独特寺庙。它与恒山地理位置紧密相邻，游客游览恒山时常将悬空寺作为重要景点。\n\n![悬空寺](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/xuankongsi.webp)\n\n## 忻州\n\n忻州古称“秀容”。它是山西面积最大的市，有“晋北锁钥”之称。\n\n### 五台山\n\n![五台山](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/wutaishan.webp)\n\n五台山是中国佛教四大名山之首。因五座山峰峰顶平坦如台得名，有东台望海峰、西台挂月峰、南台锦绣峰、北台叶斗峰、中台翠岩峰。其最高海拔 3061 米，有“华北屋脊”之称。这里寺庙林立，现存北魏、唐等朝代寺庙建筑 68 处，如显通寺、塔院寺等。它还是世界文化遗产，自然景观与人文景观完美融合，是著名的避暑胜地和佛教圣地。\n\n{{\u003c responsive_video src=\u0022\/\/player.bilibili.com\/player.html?isOutside=true\u0026aid=113371735134030\u0026bvid=BV1Jb1pYHEtA\u0026cid=26467238392\u0026p=1\u0022\u003e}}\n\n五台山的佛寺中有大量的壁画，但是想要理解它们就需要一定的知识积累。\n\n![伏虎罗汉](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/fuhuluohan.webp)\n\n伏虎罗汉是佛教十八罗汉中的一位，他的故事象征着降服野性、平息人类内心的狂野和欲望。老虎通常被视为一种强大且危险的动物，象征着人类的恐惧、欲望或其他负面情绪。而罗汉降伏老虎的形象，展示了通过修行、智慧和慈悲来降伏内在和外在的困境与挑战。\n\n![六道轮回](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/liudaolunhui.jpg)\n\n这张图片显示的是“轮回图”，也称为“生命之轮”（藏语：སྐར་འཁོར, 英文：Wheel of Life）。这是佛教艺术中的一个重要象征，描述了众生在六道轮回中的生命状态。\n\n1. **中心部分的三种动物**：\n   - 中心有三种动物：**公鸡**、**蛇**和**猪**，象征着轮回的三毒，分别是**贪**、**嗔**和**痴**。这些是导致众生轮回的根本原因：\n     - 公鸡象征“贪”。\n     - 蛇象征“嗔”。\n     - 猪象征“痴”。\n\n2. **外圈的黑白色部分**：\n   - 紧邻中心的黑白圆环代表轮回中的**善道**和**恶道**。白色部分显示众生通过善行累积功德进入更好的境界，而黑色部分代表恶行导致堕入低劣的境界。\n\n3. **六道轮回**：\n   - 图中的六个区域代表“六道轮回”，即众生可能经历的六种存在状态，分别是：\n     - **天道**（上方）：善业积累多的众生会生于天界，享受较为安乐的生活。\n     - **人道**（右上）：人类的境界，最有可能修行成佛，脱离轮回。\n     - **阿修罗道**（右下）：好斗的众生，拥有强大的能力，但内心常怀嫉妒和愤怒。\n     - **畜生道**（左下）：以愚昧和无知为特点的生命状态，常受苦役。\n     - **饿鬼道**（左上）：贪欲无尽的状态，饿鬼永远无法满足自己的欲望，处于极度痛苦中。\n     - **地狱道**（下方）：最痛苦的境界，因恶业而堕入，受极大的折磨。\n\n4. **外圈代表十二因缘**：\n   - 图外的最外圈代表十二因缘，是轮回的因果链，说明了众生如何因无明和业力陷入轮回的循环。\n\n### 佛光寺\n\n佛光寺在忻州。具体位于山西省忻州市五台县豆村镇东北的佛光山中。佛光寺始建于北魏孝文帝时期（471－499 年），唐大中十一年（857 年）重建。寺内现有殿、堂、楼、阁等一百二十余间，其中东大殿为唐代建筑，文殊殿为金代建筑，其余建筑主要为明、清时期的风格。其唐代建筑、雕塑、壁画、题记，具有极高的历史价值和艺术价值。1961 年，佛光寺被国务院公布为第一批全国重点文物保护单位；2009 年，包括佛光寺在内的五台山被联合国教科文组织世界遗产委员会列入《世界遗产名录》。\n\n![佛光寺](https:\/\/jimmysong.io\/img\/blog\/shanxi-trip\/foguangsi.jpg)\n\n### 雁门关\n\n雁门关是位于忻州市代县县城以北约20公里处雁门山中，是一个咽喉要道，它是长城上的重要关隘，以地势险要、历史上战事频繁而闻名，见证了众多朝代的军事防御和民族交融。第一次听说雁门这个地名还是从唐代诗人李贺的《雁门太守行》：“黑云压城城欲摧，甲光向日金鳞开。角声满天秋色里，塞上燕脂凝夜紫。半卷红旗临易水，霜重鼓寒声不起。报君黄金台上意，提携玉龙为君死。”李贺写《雁门太守行》时约在814年（元和九年）八月前后北游雁门。虽然诗中描述的并非雁门关的特定战争，但创作地点靠近雁门关，雁门地区的边塞氛围、战争历史等对李贺的创作产生了影响，使其在诗中营造出了紧张、悲壮的战争场景和氛围。\n\n{{\u003c responsive_video src=\u0022\/\/player.bilibili.com\/player.html?isOutside=true\u0026aid=113371668022523\u0026bvid=BV1bg1pYeEsZ\u0026cid=26467043445\u0026p=1\u0022\u003e}}\n\n去过青岛的人应该都知道青岛有一个著名的“八大关”，原以为雁门关会属于“八大关”之一，未料到居然不在其中。这里是古代中原地区与北方游牧民族的分界线，其地势险要，“外壮大同之藩卫，内固太原之锁钥，根抵三关，咽喉全晋”，许多朝代都在此重兵把守，是古代兵家必争之地。历史上，无数次的战争都围绕雁门关展开。例如，北宋时期，杨家将就曾在此抵御辽军的入侵。\n\n## 朔州\n\n朔州的旅游资源相对于忻州匮乏了许多，为人所熟知的大概只有应县木塔、桑干河。我也只去过应县木塔，对于很多外省人，可能都不知道应县属于朔州吧。\n\n### 应县木塔\n\n应县木塔位于一个小县城，可以说这个县城因该木塔而闻名，从航拍视角来看，该塔已有一定程度的歪斜。\n\n{{\u003c responsive_video src=\u0022\/\/player.bilibili.com\/player.html?isOutside=true\u0026aid=113371550648022\u0026bvid=BV1a11pY6EaJ\u0026cid=26466584412\u0026p=1\u0022\u003e}}\n\n应县木塔全称佛宫寺释迦塔，位于山西省朔州市应县。建于辽清宁二年（1056 年）。塔高 67.31 米，底层直径 30.27 米，呈平面八角形。它是世界上现存最高、最古老的纯木结构楼阁式建筑。全塔无钉无铆，由数万个木构件搭建，共用斗栱 54 种，有“斗栱博物馆”之称。木塔历经风雨、地震、炮击等仍屹立不倒，与比萨斜塔、埃菲尔铁塔并称“世界三大奇塔”。\n\n## 晋城\n\n晋城是位于山西省东南部的城市，拥有丰富的煤炭资源，是山西省重要的能源重化工基地。因为去山西是为了参加朋友的婚礼，待的时间比较短，而且还是在疫情期间，很多景区都未开放，只是用无人机匆匆游览了下皇城相府。\n\n{{\u003c responsive_video src=\u0022\/\/player.bilibili.com\/player.html?isOutside=true\u0026aid=113371970012277\u0026bvid=BV1Yc1pY6E2n\u0026cid=26468090617\u0026p=1\u0022\u003e}}\n\n皇城相府是位于山西省晋城市阳城县北留镇的一座明清城堡式官宅建筑群，为康熙大帝的老师、《康熙字典》的总裁官陈廷敬的故居，有“中国北方第一文化巨族之宅”的美誉。\n\n## 感想\n\n几次去山西，体会到“表里山河”和煤炭大省资源禀赋。但去过的城市不适合度假，更适合朝拜和访古。山西景区分散，涵盖多领域旅游资源却分布不同地区，距离远。游客奔波耗时耗力，增加成本和疲劳度，降低游玩效率和体验感。部分景区过度依赖门票盈利有弊端，配套设施不完善，餐饮购物选择有限且品质不一，活动项目开发滞后，游客停留短，难感受魅力价值。文物保护有不足，山西文物大省却修缮不及时、保护不到位，影响保存展示，游客难领略价值，威胁文物安全可持续。山西旅游资源文化内涵深，对游客文化素养要求高。景点专业知识多，游客易走马观花，景区文化讲解普及不足，影响体验深度满意度。\n\n最后，希望随着《黑神话：悟空》让山西旅游爆火之际，让更多人关注古建筑和遗迹保护，个人还要增加对古建筑和文物的文化素养，才能更好领略其中的文化内涵。\n', '\/blog\/shanxi-trip\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">我曾三次游山西，历大同、忻州、朔州、晋城等地，赏众多名胜古迹。谈山西旅游优缺，景区分散等问题存，望借游戏热度促保护，提升文化素养以感其深厚内涵。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/multi-cluster-pki-istio-recipe/">多集群 PKI 与 Istio 实践：为服务网格构建可信且可扩展的 PKI</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/10/16</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('多集群 PKI 与 Istio 实践：为服务网格构建可信且可扩展的 PKI', '本文详细介绍了如何使用 EJBCA 和 cert-manager 在多集群 Istio 服务网格中实现可信且可扩展的 PKI 解决方案，包括环境设置、证书管理和自动续期等关键步骤。', '\n作者：Cristofer TenEyck（Keyfactor 高级解决方案工程师）和 Jimmy Song（Tetrate 布道师）\n\n## 引言\n\n在云原生应用程序不断发展的背景下，确保跨多个集群的服务网格安全对于保证安全性和合规性至关重要。Istio 作为领先的开源服务网格，提供了用于保护微服务之间通信的工具。然而，在此环境中实施一个强大且可扩展的公钥基础设施（PKI）来管理证书仍然是一个重大挑战。\n\n在本文中，我们将深入探讨使用 EJBCA 开源 PKI 为跨多个集群的 Istio 服务网格实现 PKI 解决方案。我们将重点介绍设置 EJBCA、配置 cert-manager 的 EJBCA 外部签发器，以及确保 Istio 工作负载的证书自动续期的过程。本指南将帮助你构建可信且可扩展的 PKI，实现安全、合规且具有弹性的服务网格。\n\n为什么选择多集群？随着组织扩大其 Kubernetes 基础设施，多集群部署正变得越来越流行。多集群 Istio 设置提供了增强的可用性、容错性以及跨集群的工作负载隔离。\n\n## 理解 PKI 及其在服务网格中的作用\n\nPKI 是现代数字安全的基石。它涉及管理密钥和证书，以确保用户、应用程序或服务等实体之间的安全通信。在像 Istio 这样的服务网格中，有效的 PKI 对于保护微服务之间的通信，尤其是在多集群环境中，至关重要。\n\nEJBCA 提供了一个用于大规模管理 PKI 的开源解决方案。与 OpenSSL 或 Istio 内置的 PKI 等其他选项相比，EJBCA 提供了一个功能齐全、企业级的 PKI，适用于从简单到更复杂和多用途的部署。EJBCA 的能力超越了仅仅签发 mTLS 证书，提供了合规性特性、安全的可扩展性、密码灵活性，以及与广泛的应用程序集成。\n\n## Istio、EJBCA 和 cert-manager\n\n使用 EJBCA 为多集群 Istio 环境设置 PKI。以下是包含的内容：\n\n1. **环境准备**：我们使用了由主集群和远程集群组成的 MicroK8s 多集群 Istio 设置。两个集群都配置为使用 EJBCA 作为根证书颁发机构（CA）。\n2. **cert-manager 集成**：我们展示了 cert-manager 与 EJBCA 的集成，包括 EJBCA 自定义签发器的配置。cert-manager 将处理证书的签发和续期。\n3. **自动证书续期**：PKI 管理中的一个关键挑战是确保证书在到期前自动续期。cert-manager 与 EJBCA 一起，可以在所有集群中实现无缝、对应用程序透明的证书续期。\n\n![架构图](arch.webp)\n\n## 使用 EJBCA 作为外部 CA 的 Istio 架构设置高级摘要\n\n本节概述了使用 EJBCA 作为外部证书颁发机构（CA）在 Kubernetes 集群上设置 Istio 的步骤。该设置涉及配置两个带有 MetalLB 用于负载均衡的 MicroK8s 集群，集成 EJBCA 进行证书管理，并使用 Helm 安装 Istio 组件。完整指南可在[此处](https:\/\/docs.keyfactor.com\/ejbca\/latest\/tutorial-deploy-istio-service-mesh-in-a-multi)找到。\n\n关键步骤包括：\n\n1. **安装和配置 Helm 仓库**：为 Istio、cert-manager 和 EJBCA 添加必要的 Helm 仓库。\n2. **部署 cert-manager 和 EJBCA**：在主集群和远程集群中使用 Helm 安装 cert-manager，然后部署带有自定义签发器的 EJBCA。此步骤还包括生成并将必要的证书存储为 Kubernetes 密钥。\n3. **使用 EJBCA 配置 Istio**：在 Kubernetes 中创建一个指向 EJBCA 实例的自定义签发器用于签发证书。然后将此签发器集成到 Istio 配置中。\n4. **安装 Istio 组件**：部署 cert-manager-istio-csr 以处理 Istio 的证书签名请求，然后安装 Istio 的基础组件、Istio CNI（容器网络接口）、Istiod（Istio 控制平面）和 Istio 入口网关。\n5. **自定义和覆盖**：应用自定义值以定制 Istio 的行为，例如特定的集群 ID、信任域和用于服务间安全通信的 DNS 配置。\n6. **自动证书续期**：设置配置为 cert-manager 在证书到期前自动续期，而不会对正在运行的应用程序造成中断。\n\n![证书更新流程图](cert-renew-flow.webp)\n\n上图是表示 Istio 中 mTLS 证书签发和续期流程的流程图。它展示了从 Istiod 控制平面推送 Envoy 配置到 EJBCA 最终签发证书的流程。\n\n## PKI 最佳实践和合规性\n\n为你的 Istio 服务网格构建安全的 PKI，不仅仅是设置任意 PKI 并开始签发证书。它需要遵循最佳实践并符合法规要求，以保持安全性和未来适用性。以下是一些需要考虑的关键点：\n\n1. **遵守法规**：确保你的 PKI 实施符合如欧盟网络弹性法案和美国提升国家网络安全的行政命令等法规要求。这包括实施弹性的架构，维护审计跟踪，并确保稳健的密钥管理实践。\n2. **密码灵活性和量子准备**：随着密码标准的发展，你的 PKI 必须具备足够的灵活性以适应新的算法和密钥长度。随着量子计算的潜在出现，具备量子准备性变得越来越重要。\n3. **与信息安全团队合作**：与你的信息安全（InfoSec）团队有效合作对于维护 PKI 的安全性和合规性至关重要。这包括定期审查安全策略、持续培训，以及确保 PKI 管理流程与组织的安全目标一致。\n\n## 结论\n\n在多集群环境中为 Istio 服务网格实施 PKI 看似艰巨，但使用正确的工具和实践，可以高效且有效地实现。EJBCA 结合 cert-manager，提供了一个用于大规模管理证书的解决方案，确保你的 Istio 服务网格 PKI 既安全又合规。\n\n通过遵循本指南中概述的步骤，你将能够建立一个可信的 PKI，实现无缝且强大的证书管理，并与你的信息安全团队有效合作，维护服务网格的安全性。\n\n有关本文中涵盖的主题的更多详细信息和进一步资源，请务必查看下面提供的链接和参考资料。\n\n## 资源\n\n- [教程——使用 EJBCA 作为外部 PKI 提供商在多集群 Kubernetes 环境中部署 Istio 服务网格](https:\/\/docs.keyfactor.com\/ejbca\/latest\/tutorial-deploy-istio-service-mesh-in-a-multi)\n- [Istio 文档](https:\/\/istio.io\/latest\/docs\/)\n- [EJBCA 社区版](https:\/\/www.ejbca.org\/)\n- [cert-manager 文档](https:\/\/cert-manager.io\/docs\/)\n- [欧盟网络弹性法案](https:\/\/digital-strategy.ec.europa.eu\/en\/policies\/cyber-resilience-act)\n- [美国网络安全行政命令](https:\/\/www.whitehouse.gov\/briefing-room\/statements-releases\/2021\/05\/12\/executive-order-on-improving-the-nations-cybersecurity\/)\n- [多集群 Istio 服务网格的跨集群无缝访问指南](\/blog\/seamless-cross-cluster-access-istio\/)\n\n---\n\n本文首发为英文版：[Multi-Cluster PKI \u002b Istio Recipe: Practical Example for a Trusted and Scalable PKI for Your Service Mesh](https:\/\/tetrate.io\/blog\/multi-cluster-pki-istio-recipe-practical-example-for-a-trusted-and-scalable-pki-for-your-service-mesh\/)\n', '\/blog\/multi-cluster-pki-istio-recipe\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">本文详细介绍了如何使用 EJBCA 和 cert-manager 在多集群 Istio 服务网格中实现可信且可扩展的 PKI 解决方案，包括环境设置、证书管理和自动续期等关键步骤。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
          <div class="col-12">
 
 
 
 
 
 
 
 
 
 
 
 <nav aria-label="Page navigation">
   <ul class="pagination justify-content-center">
     
     
     
     
     
     
       
       
       
         
         
         
           
           
             
           
         
         
         
       
       
       
       
         <li class="page-item page-item active ">
           <a href="/blog/" class="page-link">
             1
           </a>
         </li>
       
     
       
       
       
         
         
         
           
           
             
           
         
         
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/2/" class="page-link">
             2
           </a>
         </li>
       
     
       
       
       
         
         
         
           
           
             
           
         
         
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/3/" class="page-link">
             3
           </a>
         </li>
       
     
       
       
       
         
         
         
           
           
             
           
         
         
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/4/" class="page-link">
             4
           </a>
         </li>
       
     
       
       
       
         
         
         
           
           
             
           
         
         
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/5/" class="page-link">
             5
           </a>
         </li>
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
       
       
       
         
         
         
           
           
         
         
         
       
       
       
       
     
     
     
     <li class="page-item">
       <a href="/blog/page/2/" class="page-link">
         »
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a class="page-link" href="/blog/page/28/">
         »»
       </a>
     </li>
     
   </ul>
 </nav>
 
</div>

        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 order-1 order-lg-2 d-none d-sm-block">
          <div class="sidebar">
          <!-- categories -->
<div class="blog-categories mb-4">
  <p class="sidebar-title">
      专栏
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/istio" class="sidebar-item">
            <span>Istio</span>
            <span>(77)</span>
        </a>
      
        <a href="/categories/service-mesh" class="sidebar-item">
            <span>Service Mesh</span>
            <span>(42)</span>
        </a>
      
        <a href="/categories/kubernetes" class="sidebar-item">
            <span>Kubernetes</span>
            <span>(25)</span>
        </a>
      
        <a href="/categories/%e9%9a%8f%e7%ac%94" class="sidebar-item">
            <span>随笔</span>
            <span>(22)</span>
        </a>
      
        <a href="/categories/%e5%85%b6%e4%bb%96" class="sidebar-item">
            <span>其他</span>
            <span>(21)</span>
        </a>
      
        <a href="/categories/envoy" class="sidebar-item">
            <span>Envoy</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/%e4%b8%9a%e6%80%81" class="sidebar-item">
            <span>业态</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f" class="sidebar-item">
            <span>云原生</span>
            <span>(14)</span>
        </a>
      
        <a href="/categories/ai" class="sidebar-item">
            <span>AI</span>
            <span>(10)</span>
        </a>
      
        <a href="/categories/%e5%ae%89%e5%85%a8" class="sidebar-item">
            <span>安全</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%bc%80%e6%ba%90" class="sidebar-item">
            <span>开源</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e6%97%85%e8%a1%8c" class="sidebar-item">
            <span>旅行</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7" class="sidebar-item">
            <span>可观测性</span>
            <span>(5)</span>
        </a>
  </div>
</div>

<div class="blog-categories mb-4">
  <p class="sidebar-title">
      资料
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/%e5%87%ba%e7%89%88%e7%89%a9" class="sidebar-item">
            <span>出版物</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e7%94%b5%e5%ad%90%e4%b9%a6" class="sidebar-item">
            <span>翻译电子书</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e6%96%87%e6%a1%a3" class="sidebar-item">
            <span>翻译文档</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>翻译图书</span>
            <span>(6)</span>
        </a>
      
        <a href="/categories/%e5%8e%9f%e5%88%9b%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>原创图书</span>
            <span>(2)</span>
        </a>
      
        <a href="/categories/%e6%95%99%e7%a8%8b%e6%89%8b%e5%86%8c" class="sidebar-item">
            <span>教程手册</span>
            <span>(2)</span>
        </a>
  </div>
</div>





          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">联系</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">微信公众号</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">博客</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/ai-ppt-to-hugo/">如何使用通义千问 AI 生成 PPT 并发布到个人网站</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/warp-modern-terminal-tool/">新一代终端工具 Warp：重新定义命令行体验</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/typora-notion-to-obsidian/">为什么我将笔记从 Notion 迁移到 Obsidian？</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">链接</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">
                  Istio 服务网格
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate 公司
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  云原生学院|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  云原生开源项目大全
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  云原生社区（中国）
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">教程</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes 基础教程
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/envoy-made-simple/" >
                  简明 Envoy 教程
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">通知</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/nist-sp-800-233-service-mesh-proxy-models/">资料分享：云原生应用服务网格代理模型的威胁分析指南</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-china-2024-panel/">KubeCon China 2024（香港）</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/website-revamp-notice/">网站改版通知</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song 保留所有权利</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />





<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>










<script src="/js/wowchemy-search.min.7a37268e7bbe4a9160c2e4c33b749816.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
