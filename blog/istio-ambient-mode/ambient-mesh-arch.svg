<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" width="694" height="622" version="1.1" viewBox="15 137 694 622"><defs><marker id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="8" markerUnits="strokeWidth" markerWidth="10" orient="auto" overflow="visible" viewBox="-1 -4 10 8"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 8 0 L 0 -3 L 0 3 Z"/></g></marker><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="16" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><marker id="FilledArrow_Marker_2" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-1 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 4.8 0 L 0 -1.8 L 0 1.8 Z"/></g></marker><font-face x-height="517" ascent="957.001" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400" panose-1="2 0 5 3 0 0 0 9 0 4" slope="-1000" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Italic"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="14" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="9" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="600" ascent="1060.002" cap-height="860" descent="-340.001" font-family="PingFang SC" font-size="16" font-weight="600" panose-1="2 11 8 0 0 0 0 0 0 0" slope="0" underline-position="-150" underline-thickness="80" units-per-em="1000"><font-face-src><font-face-name name="PingFangSC-Semibold"/></font-face-src></font-face></defs><metadata>Produced by OmniGraffle 7.11.5</metadata><g id="Canvas_14" fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"><title>Ambient mesh 架构</title><rect width="694" height="622" x="15" y="137" fill="#fff"/><g id="Canvas_14: Layer 1"><title>Layer 1</title><g id="Graphic_79"><rect width="693.071" height="620.787" x="15.591" y="137.48" fill="#fff"/></g><g id="Line_78"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 246.37795 697.10206 C 225.4447 694.2389 204.77846 689.6312 187.08662 682.41295 C 154.20523 668.99736 139.00263 649.5852 132.08731 632.9964"/></g><g id="Line_77"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 315.1244 675.73405 C 306.1371 670.2068 297.6736 663.7266 291.27034 656.322 C 284.5068 648.50085 280.92984 640.6752 279.2873 633.4572"/></g><g id="Line_76"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 412.45265 675.73405 C 415.9423 672.4163 419.2985 668.6596 422.3622 664.41295 C 429.5808 654.40715 433.9632 643.3619 436.6146 633.2961"/></g><g id="Line_75"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 492.04725 692.3265 C 514.9561 688.78334 537.30505 683.51915 555.27034 675.73405 C 583.57114 663.47015 595.1675 647.475 599.2613 633.3659"/></g><g id="Line_74"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 364.50483 675.73405 C 360.47983 653.6102 355.15074 618.49694 353.937 582.38406 C 353.0986 557.43814 354.38854 536.91394 356.17545 521.46884"/></g><g id="Graphic_73"><path stroke="gray" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M 41.102363 568.11906 L 697.3228 568.11906 L 697.3228 656.322 L 41.102363 656.322 Z"/></g><g id="Graphic_72"><rect width="171.496" height="337.323" x="486.142" y="148.819" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(491.14174 153.8189)"><tspan x="52.3" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Node C</tspan></text></g><g id="Graphic_71"><rect width="171.496" height="337.323" x="276.378" y="148.819" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(281.37796 153.8189)"><tspan x="52.596" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Node B</tspan></text></g><g id="Graphic_70"><rect width="120.472" height="46.772" x="301.89" y="187.087" fill="#333"/><rect width="120.472" height="46.772" x="301.89" y="187.087" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(306.88977 200.74039)"><tspan x="32.124" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App B</tspan></text></g><g id="Graphic_69"><rect width="120.472" height="46.772" x="301.89" y="255.118" fill="#333"/><rect width="120.472" height="46.772" x="301.89" y="255.118" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(306.88977 268.77188)"><tspan x="32.276" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App A</tspan></text></g><g id="Graphic_68"><rect width="120.472" height="46.772" x="301.89" y="323.15" fill="#333"/><rect width="120.472" height="46.772" x="301.89" y="323.15" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(306.88977 336.8034)"><tspan x="31.828" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App C</tspan></text></g><g id="Graphic_67"><rect width="120.472" height="46.772" x="511.654" y="187.087" fill="#333"/><rect width="120.472" height="46.772" x="511.654" y="187.087" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(516.65355 200.74039)"><tspan x="31.828" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App C</tspan></text></g><g id="Graphic_66"><rect width="120.472" height="46.772" x="511.654" y="255.118" fill="#333"/><rect width="120.472" height="46.772" x="511.654" y="255.118" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(516.65355 268.77188)"><tspan x="31.828" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App D</tspan></text></g><g id="Graphic_65"><rect width="120.472" height="46.772" x="511.654" y="323.15" fill="#333"/><rect width="120.472" height="46.772" x="511.654" y="323.15" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(516.65355 336.8034)"><tspan x="31.828" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App D</tspan></text></g><g id="Line_64"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker_2)" d="M 152.3622 515.9055 L 152.3622 554.48154 L 283.7008 554.48154 L 283.7008 563.9504"/></g><g id="Line_63"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker_2)" d="M 318.18898 576.8504 L 318.18898 552.998 L 362.20634 552.998 L 362.126 530.55355 L 362.126 524.55355"/></g><g id="Line_62"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker_2)" d="M 362.126 464.8819 L 362.126 448.7311 L 438.064 448.7311 L 438.064 210.47244 L 435.2622 210.47244"/></g><g id="Graphic_61"><text fill="#666" transform="translate(175.07874 534.8443)"><tspan x="0" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">HBONE encapsulation</tspan></text></g><g id="Graphic_60"><path stroke="gray" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M 41.102363 436.53544 L 697.3228 436.53544 L 697.3228 524.7384 L 41.102363 524.7384 Z"/></g><g id="Graphic_59"><rect width="171.496" height="347.244" x="66.614" y="148.819" stroke="#a5a5a5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(71.61417 153.8189)"><tspan x="52.748" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Node A</tspan></text></g><g id="Graphic_58"><rect width="120.472" height="46.772" x="92.126" y="187.087" fill="#333"/><rect width="120.472" height="46.772" x="92.126" y="187.087" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(97.12599 200.74039)"><tspan x="32.276" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App A</tspan></text></g><g id="Graphic_57"><rect width="120.472" height="46.772" x="92.126" y="255.118" fill="#333"/><rect width="120.472" height="46.772" x="92.126" y="255.118" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(97.12599 268.77188)"><tspan x="31.828" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">App C</tspan></text></g><g id="Line_56"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker_2)" d="M 212.59843 210.47244 L 223.46457 210.47244 L 223.46457 447.9685 L 152.3622 447.9685 L 152.3622 456.23386"/></g><g id="Graphic_55"><rect width="87.874" height="46.772" x="318.189" y="464.882" fill="#0a55a8"/><rect width="87.874" height="46.772" x="318.189" y="464.882" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(323.18898 468.8036)"><tspan x="11.081" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ztunnel</tspan> <tspan x="11.073" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">(Envoy)</tspan></text></g><g id="Graphic_54"><rect width="87.874" height="46.772" x="527.953" y="464.882" fill="#0a55a8"/><rect width="87.874" height="46.772" x="527.953" y="464.882" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(532.95276 468.8036)"><tspan x="11.081" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ztunnel</tspan> <tspan x="11.073" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">(Envoy)</tspan></text></g><g id="Graphic_53"><rect width="120.472" height="46.772" x="66.614" y="576.85" fill="#0a55a8"/><rect width="120.472" height="46.772" x="66.614" y="576.85" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(71.61417 582.8301)"><tspan x="2.225" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">App A Waypoint</tspan> <tspan x="21.93" y="31.406" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">(Gateway)</tspan></text></g><g id="Graphic_52"><rect width="120.472" height="46.772" x="223.465" y="576.85" fill="#0a55a8"/><rect width="120.472" height="46.772" x="223.465" y="576.85" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(228.46457 582.8301)"><tspan x="2.092" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">App B Waypoint</tspan> <tspan x="21.93" y="31.406" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">(Gateway)</tspan></text></g><g id="Graphic_51"><rect width="120.472" height="46.772" x="380.315" y="576.85" fill="#0a55a8"/><rect width="120.472" height="46.772" x="380.315" y="576.85" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(385.31496 582.8301)"><tspan x="1.833" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">App C Waypoint</tspan> <tspan x="21.93" y="31.406" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">(Gateway)</tspan></text></g><g id="Graphic_50"><rect width="120.472" height="46.772" x="537.165" y="576.85" fill="#0a55a8"/><rect width="120.472" height="46.772" x="537.165" y="576.85" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(542.16536 582.8301)"><tspan x="1.833" y="14" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">App D Waypoint</tspan> <tspan x="21.93" y="31.406" fill="#fff" font-family="Helvetica Neue" font-size="14" font-weight="700">(Gateway)</tspan></text></g><g id="Graphic_49"><rect width="87.874" height="46.772" x="108.425" y="469.134" fill="#0a55a8"/><rect width="87.874" height="46.772" x="108.425" y="469.134" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(113.4252 473.0556)"><tspan x="11.081" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ztunnel</tspan> <tspan x="11.073" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">(Envoy)</tspan></text></g><g id="Graphic_48"><text fill="#666" transform="translate(432.6699 503.3464)"><tspan x="0" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">DaemonSets</tspan></text></g><g id="Graphic_47"><text fill="#666" transform="translate(441.9658 636.986)"><tspan x="0" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">Per waypoint proxy per service account</tspan></text></g><g id="Graphic_46"><text fill="#000" transform="translate(680.5473 519.5709) rotate(-90)"><tspan x="0" y="9" fill="#000" font-family="Helvetica Neue" font-size="9" font-weight="700">L4 Secure Overlay</tspan></text></g><g id="Graphic_45"><text fill="#000" transform="translate(681.0618 636.72206) rotate(-90)"><tspan x="0" y="9" fill="#000" font-family="Helvetica Neue" font-size="9" font-weight="700">L7 Network</tspan></text></g><g id="Graphic_44"><rect width="120.472" height="33.358" x="92.126" y="389.764" fill="#ccc"/><rect width="120.472" height="33.358" x="92.126" y="389.764" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(97.12599 395.443)"><tspan x="22.252" y="17" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Is</tspan> <tspan y="17" fill="#000" font-family="PingFang SC" font-size="16" font-weight="600">tio CNI</tspan></text></g><g id="Graphic_43"><rect width="120.472" height="33.358" x="301.89" y="389.764" fill="#ccc"/><rect width="120.472" height="33.358" x="301.89" y="389.764" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(306.88977 395.443)"><tspan x="22.252" y="17" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Is</tspan> <tspan y="17" fill="#000" font-family="PingFang SC" font-size="16" font-weight="600">tio CNI</tspan></text></g><g id="Graphic_42"><rect width="120.472" height="33.358" x="510.894" y="389.764" fill="#ccc"/><rect width="120.472" height="33.358" x="510.894" y="389.764" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(515.89355 395.443)"><tspan x="22.252" y="17" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Is</tspan> <tspan y="17" fill="#000" font-family="PingFang SC" font-size="16" font-weight="600">tio CNI</tspan></text></g><g id="Group_39"><g id="Graphic_41"><rect width="245.669" height="46.772" x="246.378" y="675.734" fill="#fff"/><rect width="245.669" height="46.772" x="246.378" y="675.734" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(251.37795 689.3878)"><tspan x="38.133" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Istio Control Plane (Istiod)</tspan></text></g><g id="Graphic_40"><path fill="#466bb0" d="M 256.77166 711.63106 L 278.03272 711.63106 L 264.74793 715.7991 Z M 256.77166 710.23935 L 264.74793 708.84765 L 264.74793 693.56014 Z M 266.07168 708.84765 L 278.03272 710.23935 L 266.07168 682.4407 Z"/></g></g><g id="Graphic_38"><text fill="#666" transform="translate(97.12599 330.8108)"><tspan x="4.896" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">Watch namespaces</tspan> <tspan x="11.232" y="25.336" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">and pods events,</tspan> <tspan x="0" y="39.672" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">intercept and redirect</tspan> <tspan x="14.328" y="54.008" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">traffic to ztunnel</tspan></text></g><g id="Line_37"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 420.0662 675.73405 C 453.7168 658.4057 497.15124 632.2883 527.95276 600.24436 C 556.84646 570.1852 567.7868 542.02376 571.52586 521.46154"/></g><g id="Graphic_36"><text fill="#666" transform="translate(52.465623 636.986)"><tspan x="0" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">Waypoint created when needed</tspan></text></g><g id="Line_35"><path stroke="#000" stroke-dasharray="4 4" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" marker-end="url(#FilledArrow_Marker)" d="M 291.92755 675.73405 C 265.43163 664.45155 236.468 648.273 212.59843 625.5317 C 177.13347 591.74314 162.54108 552.63913 156.5414 525.6167"/></g><g id="Graphic_34"><text fill="#666" transform="translate(163.0586 733.3781)"><tspan x="3.336" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">Watch ServiceAccount, Deployment and Gateway events, update waypoints</tspan></text></g><g id="Graphic_33"><rect width="31.996" height="24.336" x="342.992" y="625.039" fill="#fff"/><text fill="#666" transform="translate(347.99213 630.0394)"><tspan x="0" y="11" fill="#666" font-family="Helvetica Neue" font-size="12" font-style="italic" font-weight="400">xDS</tspan></text></g></g></g></svg>