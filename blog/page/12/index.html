<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>博客 - Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="专注开源技术、云原生与生活随笔的分享与思考。">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.136.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.784204edcd29c092198e88494fa2ae755eba9ae231d6fa7faf8e7da3207b4623.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.784204edcd29c092198e88494fa2ae755eba9ae231d6fa7faf8e7da3207b4623.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/blog/" />
  <meta property="og:title" content="博客 | Jimmy Song" />
  <meta property="twitter:title" content="博客 | Jimmy Song" />

  
  <meta property="og:description" content="专注开源技术、云原生与生活随笔的分享与思考。" />
  <meta property="twitter:description" content="专注开源技术、云原生与生活随笔的分享与思考。" />

  
  <meta property="og:image" content="https://jimmysong.io/images/banner/default.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/default.jpg" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">博客</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">资料</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">公告</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">联系</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/community/">社区</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">视频 <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
              
              
                
                
                
                  
                    
                    <a class="nav-link" href="/en/blog/">English</a>
                    
                  
                
              
              
              
                
                  
                    
                    
                  
                
                
                
              
          </li>
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>搜索</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>站内搜索</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="关闭"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="请输入搜索词" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="请输入搜索词">
        
        <div class="mt-4">
          <span>搜索类型: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">所有</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">原创</label>
              <input type="radio" id="trans" name="search_type" value="trans">
              <label for="trans">译文</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">资料</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">公告</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    博客
                </p>
                <p class="page-description">
                    专注开源技术、云原生与生活随笔的分享与思考。
                </p>
                
            </div>
        </div>
    </div>
</section>

        


<section class="section-sm book-list-section bg-gray">
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          
          
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/externalname-and-serviceentry/">外部服务别名：ExternalName 与 ServiceEntry 对比</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/10</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('外部服务别名：ExternalName 与 ServiceEntry 对比', '了解 ExternalName 和 ServiceEntry 的优劣，根据需求选用。ExternalName 简单，适用于基本服务发现；ServiceEntry 复杂，适合复杂流量管理和服务发现。', '\n随着 Kubernetes 不断演进，Istio 功能逐渐在 Kubernetes 中找到对应实现，如 [Sidecar 容器](https:\/\/kubernetes.io\/blog\/2023\/08\/25\/native-sidecar-containers\/)、[Gateway API](https:\/\/gateway-api.sigs.k8s.io\/) 以及本文的主题 [ExternalName](https:\/\/kubernetes.io\/zh-cn\/docs\/concepts\/services-networking\/service\/#externalname)。ExternalName 和 ServiceEntry 都能起到引入 Kubernetes 集群外部服务的作用，但是它们的功能和使用场景也有所区别，本文将为你详细解析。\n\n## ExternalName vs ServiceEntry\n\n下表从多个方面对比了 \u0060ExternalName\u0060 和 \u0060ServiceEntry\u0060 ：\n\n| 特性\/用例      | ExternalName                   | ServiceEntry                                                 |\n| -------------- | ------------------------------ | ------------------------------------------------------------ |\n| **流量控制**   | 有限，仅支持 TCP 和 UDP           | 更灵活，支持 TCP、UDP、HTTP 等多种协议，可以指定端口、TLS 等选项 |\n| **服务发现**   | 适用于外部服务的简单别名       | 适用于描述网格内外服务，包括外部和内部服务的详细配置         |\n| **配置复杂性** | 简单，适用于基本的服务发现需求 | 较复杂，适用于需要高级流量控制和详细配置的场景               |\n| **TLS 支持**    | 有限，较简单                   | 更丰富的 TLS 支持，可以指定证书等详细选项                      |\n| **安全性**     | 较基本，适用于简单的用例       | 更强大的安全性支持，可以定义 \u0060subjectAltNames\u0060 等选项        |\n| **用途**       | 适用于简单的外部服务别名       | 适用于复杂的流量管理和服务发现需求，尤其是在多协议和复杂网络拓扑中 |\n\n## 使用场景\n\n**ExternalName 的使用情况：**\n\n1. **简单的服务别名：** 外部服务只需一个简单别名，无需复杂流量控制，可选用 \u0060ExternalName\u0060。\n2. **无详细流量控制需求：** 不需要对服务流量进行详细控制，只需简单的服务别名访问，选用 \u0060ExternalName\u0060。\n\n**ServiceEntry 的使用情况：**\n\n1. **复杂流量控制需求：** 需要更复杂的流量控制，如指定协议、端口、TLS 选项等，选择 \u0060ServiceEntry\u0060。\n2. **描述网格内外服务：** 需要描述网格内外服务，包括外部和内部服务的详细配置，\u0060ServiceEntry\u0060 更适合。\n3. **对服务详细属性有要求：** 需要为服务定义特殊属性，如 \u0060subjectAltNames\u0060 等，需使用 \u0060ServiceEntry\u0060。\n\n### 在 Istio 中使用 ExternalName 可能遇到的问题\n\n在 Istio 1.20 以前，网格内存在 ExternalName 类型的 Service 时，若该 Service 的端口与其他外部服务的端口重叠，流量可能错误路由到该 ExternalName Service。该问题已在 Istio 1.20 版本中解决，详见 [Better support ExternalName #37331](https:\/\/github.com\/istio\/istio\/issues\/37331)。\n\n## 总结\n\n在服务网格的选择中，ExternalName 和 ServiceEntry 分别提供了简单的服务别名和更复杂的流量管理与服务发现选项。ExternalName 适用于简单的外部服务别名，而 ServiceEntry 在处理复杂流量控制和网格内外服务时更具优势。在实际应用中，根据具体需求和配置的复杂性权衡，灵活选择合适的机制。随着 Istio 和 Kubernetes 的不断演进，这些功能的使用方式可能会受到影响，因此保持关注相关社区的更新和最佳实践是保持系统健康和高效运行的关键。选择合适的服务网格组件将有助于构建可靠、安全且高度可扩展的微服务架构。\n', '\/blog\/externalname-and-serviceentry\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">了解 ExternalName 和 ServiceEntry 的优劣，根据需求选用。ExternalName 简单，适用于基本服务发现；ServiceEntry 复杂，适合复杂流量管理和服务发现。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/istio-120-release/">Istio 1.20 有哪些更新？</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/10</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio 1.20 有哪些更新？', 'Istio 1.20 带来关键更新：全面支持 Gateway API、ExternalName 优化、Envoy 过滤器统一排序等，提升服务网格灵活性和性能。', '\nIstio 1.20 代表了 Istio 服务网格能力的显著进步，为运维人员和开发人员提供了更好的体验。这个新版本引入了一些关键的功能和更新，将影响到服务网格架构的设计和实施。\n\n## Gateway API 支持\n\nIstio 1.20 全面支持 Kubernetes Gateway API，并已正式发布（GA）。这标志着服务网格生态系统的重大进步，为用户提供了一组稳定且丰富的网络 API，与 Kubernetes 的核心服务相一致。Istio 对 Gateway API 的支持是实现更无缝和灵活的流量管理的重要一步，使用户能够利用一致的声明方式定义在 Kubernetes 集群内如何路由流量。如果你想了解更多关于 Gateway API 的信息，可以阅读我的博客 [Istio 1.19 有哪些更新：Gateway API 还有更多](\/blog\/istio-119-release\/)。\n\n## 增强的 ExternalName 服务支持\n\n在服务发现领域，Istio 1.20 对于\u0060ExternalName\u0060服务的处理进行了重要更新（见 [Better support ExternalName #37331](https:\/\/github.com\/istio\/istio\/issues\/37331)），使得 Istio 的行为更加符合 Kubernetes 的行为。这个变化简化了配置，并使得 Istio 能够更好地处理 DNS，对于依赖于外部终点的服务至关重要。关于 ExternalName 服务的更多信息，你可以参考 [Kubernetes 官方文档](https:\/\/kubernetes.io\/zh-cn\/docs\/concepts\/services-networking\/service\/#externalname)。\n\n\u0060ExternalName\u0060 和 Istio 中的 \u0060ServiceEntry\u0060 都可以用于处理服务发现，特别是引入 Kubernetes 集群之外的服务，但有一些关键区别：\n\n- \u0060ExternalName\u0060 是 Kubernetes 的原生 Service 类型，相当于给集群外部服务这设置了一个别名，使得外部服务在 Kubernetes 内部的表现与原生 Service 保持一致，从而可以统一管理和使用内部和外部服务。你可以先定义 \u0060ExternalName\u0060 类型的服务，如果后来你决定将服务移到集群中，则可以启动其 Pod，添加适当的选择算符或端点并更改服务的类型。使用时需要注意不要在多个命名空间中使用相同的 \u0060ExternalName\u0060，可能会引起命名冲突或混淆。\n- \u0060ServiceEntry\u0060 是 Istio 特有的配置对象，它提供了更灵活的控制，可以描述网格内或网格外的服务，以及指定特定的协议、端口等属性。例如，可以使用\u0060ServiceEntry\u0060将网格内服务访问网格外的服务，或者定义自定义的服务入口点。\n\n## 其他更新\n\n**一致的 Envoy 过滤器排序：** 在新版本中，Envoy 过滤器的排序在所有流量方向和协议上变得一致了。这确保了过滤器的统一应用，对于服务网格的可预测行为和安全性至关重要。\n\n**网络 Wasm 插件扩展：** Istio 继续通过引入新的\u0060NETWORK\u0060类型扩展网络 Wasm 插件的支持，推动了可扩展性的边界。这个扩展巩固了 Istio 作为服务网格创新领域的领导地位，为用户提供了更多的控制和定制选项。\n\n**TCP 元数据交换增强：** Istio 1.20 中的两个更新旨在改进 TCP 元数据交换：回退元数据发现过程和控制 ALPN 令牌的能力。这些改进显示了 Istio 对强大高效的网络的承诺。\n\n**流量镜像到多个目的地：** 新版本扩展了 Istio 的流量镜像功能以支持多个目的地。这个功能对于调试和监控非常宝贵，可以提供关于跨不同服务版本或配置的流量行为的见解。\n\n**可插拔的根证书轮换：** 加强了安全性，Istio 现在支持可插拔的根证书轮换，增强了服务网格在使用更新的加密凭证时保持服务间信任的能力。\n\n**Sidecar 容器中的 StartupProbe:** 为了改善启动时间，Istio 在 Sidecar 容器中引入了\u0060startupProbe\u0060，它可以在初始阶段进行积极的轮询，而不会在整个 Pod 的生命周期中持续存在。\n\n**OpenShift 安装增强：** 通过去除某些特权要求，Istio 简化了在 OpenShift 上的安装过程，从而降低了 OpenShift 用户的使用门槛。\n\n## 总结\n\n在 Istio 1.20 中的这些功能和增强将简化运维操作，加强安全性，并提供更具动态和可定制的服务网格体验。随着服务网格领域的不断发展，Istio 的最新版本证明了社区对改进和创新的不懈追求。\n', '\/blog\/istio-120-release\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">Istio 1.20 带来关键更新：全面支持 Gateway API、ExternalName 优化、Envoy 过滤器统一排序等，提升服务网格灵活性和性能。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/kubernetes-gateway-api-enhancement-cloud-native-network/">Kubernetes Gateway API 如何增强云原生网络</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/09</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/kubernetes"> 
             Kubernetes
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Kubernetes Gateway API 如何增强云原生网络', 'Kubernetes Gateway API 和 Backstage 的结合标志着 Kubernetes 生态系统内 Gateway 能力的重要里程碑。', '\n上周 Kubernetes Gateway API 的[正式发布公告](https:\/\/kubernetes.io\/blog\/2023\/10\/31\/gateway-api-ga\/)标志着 Kubernetes 生态系统内 Gateway 能力的重要里程碑。与此同时，Kubernetes 社区一致认同[Backstage](https:\/\/backstage.io\/docs\/features\/kubernetes\/)是内部开发平台和门户的领先解决方案。Kubernetes Gateway API 和 Backstage 都从一开始就鼓励社区的可扩展性。可以说 API Gateway 的出现为增强 Kubernetes 网络提供了巨大的机会。\n\n## Gateway API vs Istio 服务网格\n\n不过也有人对 Gateway API 与 Istio 服务网格的关系存在疑问。对于 Gateway API 和 Istio 服务网格，两者都是为了解决 Kubernetes 网络中的问题。然而，Gateway API 着重于提供一种标准化和简化的方式来配置和部署 Ingress 和 Egress，是一个更加通用的 API。另一方面，Istio 服务网格更关注于服务到服务的通信，提供丰富的流量管理，安全，策略和遥测功能。\n\n## Kubernetes Gateway API 的未来\n\nKubernetes Gateway API 代表了 API Gateway 的关键基础，引入了一种标准，基于角色的，高度适应性的方法来配置和部署 Gateway。Kubernetes Gateway API 相比现有的 Kubernetes Ingress 的显著改进之一是其基于角色的 API 结构。这使得基础设施，平台和应用程序领域的各种角色能够拥有直接与他们的用例相关的 API 的各个方面。Gateway API 的另一个关键特性是其针对可扩展性的设计 - API 专注于核心 Gateway 和路由用例，具有扩展附加能力的可能性，例如安全性，速率限制和转换。\n\n## 什么是 Backstage？\n\nBackstage 是一个开源的开发者平台，它集成了所有开发者需要的服务，提供了一个统一的视图。这包括版本控制系统、持续集成\/持续部署（CI\/CD）系统、监控、日志、警报和文档。它旨在让开发者更高效地进行日常任务，而无需在多个工具之间切换，它也可以帮助开发者更好地理解和管理他们的软件。\n\n![Backstage UI](backstage-ui.png)\n\nBackstage 可以应用在多种使用场景中：\n\n- **作为服务目录**：Backstage 的软件目录功能可以帮助开发者找到并了解公司内部的所有服务和应用。\n- **作为自动化工具**：Backstage 的软件模板可以自动化 API 上线流程，使得开发者能够更快速、更安全地部署他们的 API。\n- **提供中心化的 API 文档**：Backstage 的 Tech Docs 功能可以提供中心化的 API 文档，使得开发者能够在一个地方查找所有的 API 文档，而无需在多个工具间切换。\n- **作为开发者门户**：Backstage 可以集成多种开发工具，提供一站式的开发者服务，简化开发者的工作流程。\n\nBackstage 通过其[软件目录](https:\/\/backstage.io\/docs\/features\/software-catalog\/)用于发现 API，[软件模板](https:\/\/backstage.io\/docs\/features\/software-templates\/)用于提供带有防护栏的自动 API 上线流程，以及[Tech Docs](https:\/\/backstage.io\/docs\/features\/techdocs\/)用于提供 API 文档的中心用例，用于围绕 API Gateway 的协作。\n\nBackstage 的目标是简化开发者工作流程，提供一站式的解决方案，它使开发者能够在一个平台上查找他们需要的所有信息，而不是在多个工具间切换。此外，Backstage 可以让开发团队专注于编码，而不是管理工具。它还支持多种插件，可以根据团队的需求进行定制。\n\n## 关于未来\n\nBackstage 和 Kubernetes Gateway API 已经牢固地将自己建立为云原生 API Gateway 的基础支柱，两个项目都在各自的路线图中充满创新。其中最有趣的领域是 Kubernetes Gateway API 超越其传统的南北入口能力，包括东西服务至服务通信，通过引入[GAMMA API](https:\/\/developer.gamma.co.uk\/guides\/overview.html)。在真实的流量在每个方向上流动的情况下，为南北和东西流量提供单一基础将有助于提高任何容器化应用的安全性，弹性和可观测性。\n', '\/blog\/kubernetes-gateway-api-enhancement-cloud-native-network\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">Kubernetes Gateway API 和 Backstage 的结合标志着 Kubernetes 生态系统内 Gateway 能力的重要里程碑。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/istio-119-release/">Istio 1.19 有哪些更新：Gateway API 还有更多</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/09</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio 1.19 有哪些更新：Gateway API 还有更多', '我很高兴呈现 Istio 的最新版本— Istio 1.19。这篇博客将概述此版本中的更新内容。', '\n我很高兴呈现 Istio 的最新版本— [Istio 1.19](https:\/\/istio.io\/latest\/news\/releases\/1.19.x\/announcing-1.19\/)。这篇博客将概述此版本中的更新内容。\n\n## Gateway API: 彻底改变服务网格\n\n我们的[前一篇博客](https:\/\/tetrate.io\/blog\/why-the-gateway-api-is-the-unified-future-of-ingress-for-kubernetes-and-service-mesh\/)强调了 Gateway API 将 Kubernetes 和服务网格中的入口网关统一的潜力，为跨命名空间的流量支持打开了大门。有了 Istio 的官方支持，Gateway API 成为了焦点。它不仅用于北 - 南流量（网格的入口和出口），现在还扩展到东 - 西流量的领域，也就是网格内部的流量。\n\n在 Kubernetes 中，服务承担多项职责，从服务发现和 DNS 到工作负载选择、路由和负载均衡。然而，对这些功能的控制一直有限，工作负载选择是显著的例外。Gateway API 改变了这一局面，让你可以控制服务路由。这与 Istio 的 VirtualService 有一些重叠，因为两者都对流量路由有影响。以下是三种情况的简介：\n\n1. Kubernetes 内部请求：在没有 Istio 的情况下，Kubernetes 的所有内部流量都走服务路由。\n2. 北 - 南流量：通过将 Gateway API 应用到入口网关，流入 Kubernetes 的流量会按照 xRoute（目前支持 HTTPRoute, TCPRoute 和 gRPCRoute）到服务。\n3. 东 - 西流量：在 Istio 内部，当流量进入数据平面时，Gateway API 的 xRoute 接管。它引导流量到原始服务或新的目标服务。\n\n![图 1：流量路由](gateway-api-request.svg)\n\nGateway API 与 Istio 的这种动态结合不仅精细化了服务网络，也巩固了 Istio 在 Kubernetes 生态系统中的地位。\n\n## 服务网格的 Gateway API: 深入探讨\n\n在当前的实验阶段（v0.8.0 版本），服务网格的 Gateway API 引入了一种新的方法来配置 Kubernetes 中的服务网格支持。它直接将单个路由资源（如 HTTPRoute）与服务资源关联起来，简化了配置过程。\n\n以下是一些关键点：\n\n实验阶段：在 v0.8.0 版本中，服务网格的 Gateway API 仍处于实验阶段。建议不要在生产环境中使用。\n\n服务与路由关联：在配置服务网格时，与使用 Gateway 和 GatewayClass 资源不同，单个路由资源直接与服务资源关联。\n\n服务的前端和后端：服务的前端包括其名称和集群 IP，后端由其端点 IP 的集合组成。这种区分使得在网格内进行路由无需引入冗余资源。\n\n路由附加到服务：将路由附加到服务上以将配置应用到指向该服务的任何流量。如果没有附加路由，流量会遵循网格的默认行为。\n\n命名空间关系：\n\n- *相同命名空间：* 在与其服务相同的命名空间中的路由，被称为生产者路由，通常由工作负载创建者创建以定义可接受的使用情况。它影响来自任何命名空间中的任何工作负载的客户端的所有请求。\n- *不同命名空间：* 在与其服务不同的命名空间中的路由，被称为消费者路由，细化了给定工作负载的消费者提出请求的方式。这个路由只影响与路由在同一命名空间中的工作负载的请求。\n\n![图 2：生产者路由和消费者路由](gateway-api-reference.svg)\n\n组合路由：在单个命名空间中的同一服务的多个路由，无论是生产者路由还是消费者路由，都将根据 Gateway API 路由合并规则进行合并。这意味着在同一命名空间中为多个消费者定义不同的消费者路由是不可能的。\n\n请求流程：\n\n- 客户端工作负载发起对命名空间中特定服务的请求。\n- 网格数据平面拦截请求并识别目标服务。\n- 基于关联的路由，请求被允许、拒绝，或根据匹配规则转发到适当的工作负载。\n\n请记住，在实验阶段，服务网格的 Gateway API 可能会有更多的变化，不建议在生产环境中使用。\n\n但等等，还有更多！我们的旅程并没有结束 - 使用 API 的入口流量支持正快速向通用可用性 (GA) 进发，预计还会有更多动态的发展！\n\n让我们进一步探讨这个版本中的其他增强功能。\n\n## Ambient Mesh 增强\n\nIstio 团队一直在不断优化 ambient mesh，这是一种创新的部署模型，提供了一个替代传统 sidecar 方法的选择。如果你还没有探索 ambient，现在是深入了解[介绍博客](https:\/\/istio.io\/latest\/blog\/2022\/introducing-ambient-mesh\/)的好时机。\n\n在这次更新中，我们强化了对\u0060ServiceEntry\u0060、\u0060WorkloadEntry\u0060、\u0060PeerAuthentication\u0060以及 DNS 代理的支持。并且，修复了一些 bug，增强了可靠性，以确保无缝的体验。\n\n请记住，ambient mesh 在这个版本中处于 alpha 阶段。Istio 社区热切期待你的反馈，以推动它向 Beta 阶段前进。\n\n## 简化虚拟机和多集群体验\n\n简单易用是关键，特别是在处理虚拟机和多集群设置的时候。在这个版本中，我们在\u0060WorkloadEntry\u0060资源中使地址字段变为可选。这个看似小小的调整将大大简化你的工作流程。\n\n## 提升安全配置\n\n你现在可以为你的 Istio 入口网关的 TLS 设置配置\u0060OPTIONAL_MUTUAL\u0060，提供可选的客户端证书验证的灵活性。此外，你可以通过\u0060MeshConfig\u0060微调你偏好的非 Istio mTLS 流量使用的密码套件。\n\n有了这些更新，Istio 1.19 赋予你在管理你的服务网格时更大的控制、灵活性和安全性。\n\n欢迎你探索这些增强功能，并与 Istio 社区分享你的体验。更多详细信息，请参考[官方发布说明](https:\/\/istio.io\/latest\/news\/releases\/1.19.x\/announcing-1.19\/)。\n\n祝你网格愉快！\n\n------\n\n本博客最初在[tetrate.io](https:\/\/tetrate.io\/blog\/whats-new-in-istio-1-19-gateway-api-and-beyond\/)上发布。\n', '\/blog\/istio-119-release\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">我很高兴呈现 Istio 的最新版本— Istio 1.19。这篇博客将概述此版本中的更新内容。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/ica-review/">CNCF 与 Tetrate 合作推出 Istio Certificated Associate（ICA）认证</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/08</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('CNCF 与 Tetrate 合作推出 Istio Certificated Associate（ICA）认证', 'CNCF 与 Tetrate 共同推出的 Istio 认证庆祝一个月，提升了在微服务、安全和流量管理方面的 Kubernetes 技能。', '\n云计算专业人士，自 **Istio Certified Associate (ICA) 认证** 旅程开始已经一个月了。这是云原生计算基金会（CNCF）、Linux 基金会培训与认证以及 Tetrate 合作的成果，为微服务管理设立了新的标杆。\n\n[Tetrate](https:\/\/tetrate.io) 是 Istio 项目的关键贡献者，最初创建了 Tetrate 认证的 Istio 管理员（CIAT），为 ICA 认证奠定了基础。自从推出以来，ICA 已成为 Kubernetes 生态系统的重要组成部分，帮助数千人掌握服务网格技术。\n\n认证课程涵盖了诸如**安装**、**流量管理**和**安全**等基本领域，反映出该领域所需的全面专业知识。在短短时间内，ICA 获得了显著动力，得益于 Tetrate 对云原生领域的愿景和投入。\n\n在 ICA 成立一个月之际，Tetrate 继续通过其 Tetrate Academy 承诺开源教育，提供有关服务网格和 Kubernetes 安全的免费、高质量课程。对于那些打算在生产中部署 Istio 的人来说，Tetrate 提供了**Tetrate Istio Distribution (TID)**，一种安全且得到支持的 Istio 发行版。\n\n如果您还没有加入，现在是时候加入这个不断增长的 Istio 专家社区了。提升您的职业生涯，为云原生技术的演进做出贡献。\n\n## 什么是 ICA 认证？\n\nICA 是专为工程师，CI\/CD 从业者或任何对 Istio 有特殊兴趣的人设计的专业前认证。\n\n获得认证的 ICA 学员可确认他们对 Istio 原则、术语和最佳实践的基础知识，并展示他们建立 Istio 的能力。\n\nICA 认证考试展示了考生对 Istio 原则、术语和建立 Istio 的最佳实践的深入理解。\n\n## ICA 认证考试内容\n\nICA 认证考试包括这些一般领域及其在考试中的权重：\n\n- 安装、升级和配置：7%\n- 流量管理：40%\n- 弹性和故障注入：20%\n- 保护工作负载：20%\n- 高级场景：13%\n\n详细内容如下：\n\n**安装、升级和配置：7%**\n\n- 使用 IstioCLI 安装基本集群\n- 使用 IstioOperatorAPI 定制 Istio 安装\n- 使用覆盖来管理 Istio 组件设置\n\n**流量管理：40%**\n\n- 控制服务网格内的网络流量\n- 配置 Sidecar 注入\n- 使用 Gateway 资源配置入口和出口流量\n- 了解如何使用 ServiceEntry 资源向内部服务注册中心添加条目\n- 使用 DestinationRule 定义流量策略\n- 配置流量镜像功能 \n\n**弹性和故障注入：20%**\n\n- 配置断路器 (带或不带离群值检测)\n- 使用弹性特性\n- 创建故障注入\n\n**固定工作负载：20%**\n\n- 了解 Istio 安全特性\n- 在 mesh 中为 HTTP\/TCP 流量建立 Istio 授权\n- 在网格、命名空间和工作负载级别配置相互 TLS\n\n**高级场景：13%**\n\n- 了解如何将非 kubernetes 工作负载装载到网格\n- 排除配置问题\n\n## 如何获得 ICA 认证？\n\n[点击开始您的 ICA 认证吧！](https:\/\/training.linuxfoundation.cn\/certificates\/33)\n\n这只是一个开始。让我们期待在服务网格熟练度上达到更多里程碑，由 Tetrate 和 CNCF 引领潮流。\n\n注：ICA 认证提供中文认证考试，证书有效期 3 年。\n', '\/blog\/ica-review\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">CNCF 与 Tetrate 共同推出的 Istio 认证庆祝一个月，提升了在微服务、安全和流量管理方面的 Kubernetes 技能。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/secure-apps-with-istio/">[译] 使用相互 TLS 和 Istio 保护应用程序通信</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/06</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://istio.io/latest/blog/2023/secure-apps-with-istio/" target="_blank" rel="noopener">原文</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('使用相互 TLS 和 Istio 保护应用程序通信', '本文讨论了使用相互 TLS (mTLS) 和 Istio 保护应用程序通信的重要性。mTLS 提供了端到端的安全性，只有源和目标可以解密数据，从而防止中间人攻击。然而，如果源或目标的身份没有加密，可能会出现问题。Istio 中的 mTLS 可以简单地启用，并为每个应用程序 pod 提供身份证书。为了强制执行严格的 mTLS，可以使用 Istio 的 PeerAuthentication 策略和 AuthorizationPolicy。最后，TLS 协议是最广泛审查、专家批准、经过战斗测试的数据安全协议之一，Istio 默认在内网应用程序通信中使用 TLS 1.3 版本。', '\n\u003e 摘要：本文讨论了使用相互 TLS (mTLS) 和 Istio 保护应用程序通信的重要性。mTLS 提供了端到端的安全性，只有源和目标可以解密数据，从而防止中间人攻击。然而，如果源或目标的身份没有加密，可能会出现问题。Istio 中的 mTLS 可以简单地启用，并为每个应用程序 pod 提供身份证书。为了强制执行严格的 mTLS，可以使用 Istio 的 PeerAuthentication 策略和 AuthorizationPolicy。最后，TLS 协议是最广泛审查、专家批准、经过战斗测试的数据安全协议之一，Istio 默认在内网应用程序通信中使用 TLS 1.3 版本。\n\n用户采用服务网格的最大原因之一是使用相互 TLS（mTLS）基于可通过加密验证的身份来启用应用程序之间的安全通信。在此博客中，我们将讨论应用程序之间安全通信的要求，以及 mTLS 如何实现并满足所有这些要求，以及使用 Istio 启用应用程序之间 mTLS 的简单步骤。\n\n## 您需要什么来保护应用程序之间的通信？\n\n现代云原生应用程序经常分布在多个 Kubernetes 集群或虚拟机中。新版本经常进行阶段性部署，它们可以根据用户请求快速扩展和缩小。由于现代应用程序通过不依赖共同定位来提高资源利用效率，因此能够应用访问策略并保护这些分布式应用程序之间的通信至关重要，因为增加的多个入口点导致了更大的攻击面。忽视这一点将邀请数据丢失、数据盗窃、伪造数据或简单处理等巨大的业务风险。\n\n以下是应用程序之间安全通信的常见关键要求：\n\n### 身份\n\n身份是任何安全架构的基本组成部分。在您的应用程序可以安全地发送数据之前，必须为应用程序建立**身份**。这个建立身份的过程被称为**身份验证** - 它涉及由某个知名的，受信任的**权威机构**对应用程序工作负载进行一次或多次检查，以确认它是它所声称的那样。一旦权威机构满意，它就会授予工作负载一个身份。\n\n考虑出示护照的行为 - 你会向某个权威机构请求一个，那个权威机构可能会要求你提供几个不同的身份验证证明你是你所说的那个人 - 出生证明、现住址、医疗记录等。一旦你满足了所有的身份验证要求，你将（希望）被授予身份证件。你可以将那个身份证件给别人作为你已经满足了发证机构的所有身份验证要求的证据，如果他们信任发证机构（和身份证件本身），他们就可以信任关于你的所有内容（或者他们可以联系受信任的权威机构并验证该文件）。\n\n身份可以采取任何形式，但是，就像任何形式的身份证明一样，身份验证越弱，伪造就越容易，身份证明对于使用它进行决策的任何人来说就越无用。这就是为什么在计算中，密码可验证的身份非常重要 - 它们由可验证的权威机构签署，类似于您的护照和驾驶执照。基于任何较少的身份都是一个可以相对容易地利用的安全弱点。\n\n您的系统可能具有源自网络属性（例如 IP 地址）的身份，具有分布式身份缓存，跟踪身份与这些网络属性之间的映射。这些身份不像密码可验证的身份那样具有强大的保证，因为 IP 地址可能被重新分配给不同的工作负载，并且身份缓存可能并不总是更新到最新的状态。\n\n您希望应用程序使用密码可验证的身份，因为在建立连接时交换应用程序的密码可验证身份本质上比依赖于将 IP 地址映射到身份的系统更可靠，更安全。这些系统依赖于具有最终一致性和过时问题的分布式身份缓存，这可能在 Kubernetes 中创建结构性弱点，其中高频率的自动 pod 转换是常态。\n\n### 机密性\n\n加密应用程序之间传输的数据至关重要 - 因为在破坏常见、成本高昂和实际上微不足道的世界中，完全依赖于*安全的*内部环境或其他安全边界早已不再适用。为了防止[中间人攻击](https:\/\/en.wikipedia.org\/wiki\/Man-in-the-middle_attack)，你需要为源 - 目标对创建一个唯一的加密通道，因为你希望有强大的身份唯一性保证以避免[混淆副手问题](https:\/\/en.wikipedia.org\/wiki\/Confused_deputy_problem)。换句话说，仅仅加密通道是不够的 - 它必须使用直接从唯一源和目标身份派生的唯一密钥进行加密，以便只有源和目标可以解密数据。此外，您可能需要根据安全团队的要求定制加密，例如通过选择特定的密码。\n\n### 完整性\n\n从源发送到目标的加密数据在发送后不能被除源和目标之外的任何身份修改。换句话说，接收到的数据与发送的数据相同。如果你没有[data integrity](https:\/\/en.wikipedia.org\/wiki\/Data_integrity)，那么中间的人可能在源和目标之间的通信过程中修改一些位或整个数据的内容。\n\n### 访问策略执行\n\n应用程序所有者需要对其应用程序应用访问策略，并正确、一致且不含糊地执行它们。为了对通信渠道的两端应用策略，我们需要为每一端确定一个应用程序身份。一旦我们为可能的通信渠道的两端都有了一个可以通过密码验证的身份，并且来源链条明确，我们就可以开始确定谁可以与何物进行通信的策略。标准的 TLS，这是一种广泛使用的密码协议，用于保护客户端（例如，Web 浏览器）和服务器（例如，Web 服务器）之间的通信，只真正验证并要求一方的身份 - 服务器。但是，对于全面的端到端策略执行，对双方 - 客户端和服务器都有一个可靠、可验证、明确的身份至关重要。这对内部应用程序来说是一个共同的需求 - 想象一下，只有一个 \u0060frontend\u0060 应用程序应该调用后端 \u0060checkout\u0060 应用程序的 **GET** 方法，但是不应该被允许调用 \u0060POST\u0060 或 \u0060DELETE\u0060 方法。或者，只有那些由特定 JWT 发行者发出 JWT 令牌的应用程序才能调用 \u0060checkout\u0060 应用程序的 \u0060GET\u0060 方法。通过利用双端的密码身份，我们可以确保强大的访问策略被正确地、安全地、可靠地执行，而且有可验证的审计轨迹。\n\n### FIPS 合规性\n\n[联邦信息处理标准 (FIPS)](https:\/\/www.nist.gov\/standardsgov\/compliance-faqs-federal-information-processing-standards-fips) 是由 [国家标准与技术研究院 (NIST)](https:\/\/www.nist.gov\/) 制定的联邦计算机系统的标准和指南。并非每个人都需要 FIPS 合规性，但 FIPS 合规性意味着满足了美国政府为保护敏感信息而设立的所有必要安全要求。与联邦政府合作时需要它。为了遵循美国政府制定的与网络安全相关的指南，许多私营部门都自愿使用这些 FIPS 标准。\n\n为了说明上述安全应用程序要求（身份、机密性和完整性），让我们使用 \u0060frontend\u0060 应用程序调用 \u0060checkout\u0060 应用程序的例子。记住，您可以把图中的 **ID** 看作是任何类型的身份证明，比如政府颁发的护照、照片识别器：\n\n![前端调用结账应用程序时的要求](requirements-flow.png)\n\n## mTLS 如何满足上述要求？\n\nTLS 1.3（在撰写本文时的最新 TLS 版本） [规范](https:\/\/datatracker.ietf.org\/doc\/html\/rfc8446) 的主要目标是在两个通信对等方之间提供一个安全通道。TLS 安全通道具有以下属性：\n\n1. 验证：通道的服务器端始终被验证，客户端可选地被验证。当客户端也被验证时，安全通道成为一个相互的 TLS 通道。\n2. 机密性：数据被加密且只对客户端和服务器可见。必须使用与源和目标身份证明无歧义地密码绑定的密钥来加密数据，以便可靠地保护应用程序层的流量。\n3. 完整性：通过通道发送的数据无法在未被检测到的情况下进行修改。这是通过只有源和目标拥有给定会话的加密和解密密钥的事实来保证的。\n\n### mTLS 内部逻辑\n\n我们已经确定了，使用可以通过加密验证的身份标识对于保护通道和支持访问策略执行至关重要，我们也已经确定了，mTLS 是一种经过严密测试的协议，它为在通道的两端使用可以通过加密验证的身份标识提供了一些极其重要的保证 - 让我们深入了解一下 mTLS 协议在实际运行中是如何工作的。\n\n### 握手协议\n\n[握手协议](https:\/\/datatracker.ietf.org\/doc\/html\/rfc8446#section-4) 验证了通信双方的身份，协商了加密模式和参数，并建立了共享的密钥材料。换句话说，握手的角色是验证通信双方的身份并协商会话密钥，以便连接的其余部分可以根据会话密钥进行加密。当您的应用程序建立 mTLS 连接时，服务器和客户端协商一个密码套件，该套件规定了您的应用程序将用于连接其余部分的加密算法，您的应用程序还协商了要使用的加密会话密钥。整个握手过程都被设计为能抵抗篡改 - 任何未持有与源和\/或目标相同的独特，能够通过加密验证的身份文档的实体的干扰都会被拒绝。因此，在任何通信方继续进行应用程序数据之前，都有必要检查整个握手过程并验证其完整性。\n\n握手可以被认为是按照 TLS 1.3 规范中的[握手协议概述](https:\/\/datatracker.ietf.org\/doc\/html\/rfc8446#section-2)有三个阶段 - 再次使用\u0060frontend\u0060应用程序调用后端\u0060checkout\u0060应用程序的例子：\n\n1. 第一阶段：\u0060frontend\u0060和\u0060checkout\u0060协商可以用来保护握手和流量数据的加密参数和密钥。\n2. 第二阶段：在此阶段和之后的所有内容都是加密的。在这个阶段，\u0060frontend\u0060和\u0060checkout\u0060建立其他握手参数，并确定是否也对客户端进行身份验证 - 也就是说，mTLS。\n3. 第三阶段：\u0060frontend\u0060通过其可通过加密验证的身份验证\u0060checkout\u0060（在 mTLS 中，\u0060checkout\u0060以相同的方式验证\u0060frontend\u0060）。\n\n自 TLS 1.2 以来，与握手相关的有几个主要区别，有关更多详细信息，请参考 TLS 1.3 规范：\n\n1. 所有握手消息（第二阶段和第三阶段）都使用在第一阶段协商的加密密钥进行加密。\n2. 已经削减了遗留的对称加密算法。\n3. 添加了零往返时间（0-RTT）模式，节省了连接设置的一个往返时间。\n\n### 记录协议\n\n在握手阶段协商了 TLS 协议版本、会话密钥和[HMAC](https:\/\/en.wikipedia.org\/wiki\/HMAC)后，双方现在可以通过[记录协议](https:\/\/datatracker.ietf.org\/doc\/html\/rfc8446#section-5)安全地交换被分块的加密数据。使用握手中协商的完全相同的参数对流量进行加密是至关重要的（并且是规范的一部分），以确保流量的机密性和完整性。\n\n将 TLS 1.3 规范中的两个协议放在一起，并使用\u0060frontend\u0060和\u0060checkout\u0060应用程序来说明以下流程：\n\n![当前端调用结账应用程序时的 mTLS 流程](mtls-flow.png)\n\n谁为\u0060frontend\u0060和\u0060checkout\u0060发出身份证书？它们通常由具有自己的[根证书](https:\/\/en.wikipedia.org\/wiki\/Root_certificate)或使用其根 CA 的中间证书的[证书颁发机构（CA）](https:\/\/en.wikipedia.org\/wiki\/Certificate_authority)发出。根证书基本上是一份标识根 CA 的公钥证书，您的组织可能已经拥有此证书。根证书会与\u0060frontend\u0060（或\u0060checkout\u0060）的自己的根签名身份证书一起分发到\u0060frontend\u0060。这就是基本的公钥基础设施（PKI）的工作方式 - CA 负责验证实体的身份文档，然后以证书的形式授予它一个无法伪造的身份文档。\n\n您可以依赖您的 CA 和中间 CA 作为身份**真理**的来源，以一种维持高可用性并提供稳定、持久可验证的身份保证的结构化方式，而一个庞大的分布式 IP 和身份映射缓存则无法做到这一点。当\u0060frontend\u0060和\u0060checkout\u0060的身份证书由同一个根证书发出时，\u0060frontend\u0060和\u0060checkout\u0060可以始终以一致且可靠的方式验证其对等身份，无论它们运行在哪个集群或节点或规模中。\n\n您了解了 mTLS 如何提供加密身份、机密性和完整性，那么当您的应用程序数量增长到数千个或更多，并且跨多个集群时，其可扩展性如何呢？如果您在多个集群中建立一个单一的根证书，那么只要它被根证书信任，系统就不需要在应用程序收到来自另一个集群的连接请求时进行处理 - 系统知道连接上的身份已经通过加密进行了验证。当您的应用程序 pod 更改 IP 或被重新部署到另一个集群或网络时，您的应用程序（或代表其行动的组件）只需使用其由 CA 铸造的受信任证书向目标发起流量即可。无论是 500\u002b 网络跳转还是直接连接，您的访问策略都会以相同的方式执行，无需跟踪身份缓存并计算哪个 IP 地址映射到哪个应用程序 pod。\n\n那么关于 FIPS 合规性呢？根据 TLS 1.3 规范，TLS 兼容的应用程序必须实现\u0060TLS_AES_128_GCM_SHA256\u0060密码套件，并建议实现\u0060TLS_AES_256_GCM_SHA384\u0060，这两者都在 NIST 的[TLS 指南](https:\/\/nvlpubs.nist.gov\/nistpubs\/SpecialPublications\/NIST.SP.800-52r2.pdf)中。RSA 或 ECDSA 服务器证书也被 TLS 1.3 规范和 NIST 的 TLS 指南推荐。只要您为 mTLS 连接使用 FIPS 140-2 或 140-3 合规的加密模块，您就会走上[FIPS 140-2 或 140-3 验证](https:\/\/csrc.nist.gov\/projects\/cryptographic-module-validation-program\/validated-modules)的正确路径。\n\n## 可能出现的问题\n\n按照 TLS 1.3 规范正确实施 mTLS 至关重要。如果不按照 TLS 规范正确使用 mTLS，以下是一些可能在未被检测的情况下出现的问题：\n\n### 如果有人在连接中间静默地捕获加密数据会怎么样？\n\n如果连接没有按照 TLS 规范中概述的握手和记录协议来进行，例如，连接遵循握手协议，但在记录协议中没有使用握手中协商的会话密钥和参数，您可能会发现您的连接的握手和记录协议之间没有关联，握手和记录协议之间的身份可能不同。TLS 要求握手和记录协议在同一连接中共享，因为将它们分开会增加中间人攻击的攻击面。\n\nmTLS 连接从握手开始到结束都具有一致的端到端安全性。加密数据是用证书中公钥协商的会话密钥加密的。只有源和目标可以使用私钥解密数据。换句话说，只有拥有私钥的证书所有者才能解密数据。除非黑客控制了证书的私钥，否则他或她没有办法搞乱 mTLS 连接以成功执行中间人攻击。\n\n### 如果源或目标身份没有加密安全怎么办？\n\n如果身份基于网络属性，如 IP 地址，这些属性可能会重新分配给其他 pod，就无法使用加密技术验证该身份。由于此类身份不基于加密身份，因此您的系统可能有一个身份缓存，用于跟踪身份、pod 的网络标签、相应的 IP 地址和部署 pod 的 Kubernetes 节点信息之间的映射。使用身份缓存，您可能会遇到 pod IP 地址被重用和身份错误，当身份缓存在短时间内同步出现问题时，策略可能无法正确执行。例如，如果您的连接之间的对等方没有加密身份，您的系统将不得不从可能过时或不完整的身份缓存中获取身份。\n\n将身份映射到工作负载 IP 的这些身份缓存不是 ACID（原子性、一致性、隔离性和持久性），您希望您的安全系统应用于具有强保证的事物。考虑以下属性和您可能想要问自己的问题：\n\n- 过时：对等方如何验证缓存中的条目是否是**当前**的？\n- 不完整：如果缓存未命中并且系统未能关闭连接，只有缓存**同步器**失败时网络才会变得不稳定吗？\n- 如果某个东西根本没有 IP 怎么办？例如，默认情况下，AWS Lambda 服务没有公共 IP。\n- 非事务性：如果您读取两次身份，会看到相同的值吗？如果在访问策略或审计实施中不小心，这可能会导致真正的问题。\n- 谁将守护守护者自己？是否有既定的实践来保护缓存，就像 CA 有的那样？您有什么证据证明缓存没有被篡改吗？您是否被迫对一些不是您的 CA 的复杂基础设施的安全性进行推理（和审计）？\n\n以上问题中有些比其他问题更糟。您可以应用**失败关闭**原则，但这并不能解决所有问题。\n\n身份也用于执行访问策略，例如授权策略，这些访问策略在请求路径中，您的系统必须快速做出决定，允许或拒绝访问。每当身份出现错误时，访问策略可能会被绕过，而无法被检测或审计。例如，您的身份缓存可能将您的\u0060checkout\u0060 pod 的先前分配的 IP 地址作为\u0060checkout\u0060身份之一。如果\u0060checkout\u0060 pod 被回收，同一 IP 地址刚刚被分配给一个\u0060frontend\u0060 pod，那么在缓存更新之前，该\u0060frontend\u0060 pod 可能具有\u0060checkout\u0060的身份，这可能导致错误的访问策略被执行。\n\n让我们假设以下大规模多集群部署，说明身份缓存过时问题：\n\n1. 100 个集群，每个集群有 100 个节点，每个节点有 20 个 pod。总的 pod 数量是 200,000。\n2. 0.25% 的 pod 一直在变动（滚动更新，重启，恢复，节点变动等），每次变动的窗口是 10 秒。\n3. 每 10 秒有 500 个正在变动的 pod 分布到 10,000 个节点（缓存）。\n4. 如果缓存同步器停滞，系统在 5 分钟后过时的%可能高达**7.5%**！\n\n以上假设缓存同步器处于稳态。如果缓存同步器出现问题，会影响其健康检查，增加变动率，导致级联不稳定。\n\nCA 也可能被攻击者[攻击](https:\/\/en.wikipedia.org\/wiki\/Certificate_authority#CA_compromise)，攻击者假装是别人，欺骗 CA 发出证书。然后，攻击者可以使用该证书与其他对等方通信。这是[证书撤销](https:\/\/en.wikipedia.org\/wiki\/Certificate_authority#Certificate_revocation)可以通过撤销证书使其无效来解决问题。否则，攻击者可以利用被攻击的证书直到其过期。保持根证书的私钥在 HSM 中至关重要，该 HSM 应保持[离线](https:\/\/en.wikipedia.org\/wiki\/Online_and_offline)，并使用中间证书签署工作负载证书。在 CA 停顿或停滞 5 分钟的情况下，您将无法获得新的或续期的工作负载证书，但之前发出的有效证书将继续为您的工作负载提供强大的身份保证。为了提高发行的可靠性，您可以将中间 CA 部署到不同的区域和地区。\n\n## Istio 中的 mTLS\n\n### 启用 mTLS\n\n在 Istio 中为内网应用程序启用 mTLS 非常简单。您需要做的就是将您的应用程序添加到网格中，这可以通过为您的命名空间标记侧车注入或环境来完成。在侧车的情况下，需要进行滚动重启，以便侧车被注入到您的应用程序 pod 中。\n\n### 加密身份\n\n在 Kubernetes 环境中，[Istio](https:\/\/istio.io\/latest\/docs\/concepts\/security\/#istio-identity)根据其服务帐户创建应用程序的身份。将应用程序添加到网格后，将向网格中的每个应用程序 pod 提供身份证书。\n\n默认情况下，您的 pod 的身份证书在 24 小时后过期，Istio 每 12 小时旋转一次 pod 身份证书，以便在出现妨害行为的情况下（例如，被攻击的 CA 或被盗的 pod 的私钥），被攻击的证书只能在证书过期并因此限制其可能造成的损害的非常有限的时间内工作。\n\n### 强制执行严格的 mTLS\n\n默认的 mTLS 行为是尽可能使用 mTLS，但并不强制执行。要严格强制您的应用程序只接受 mTLS 流量，您可以使用 Istio 的[PeerAuthentication](https:\/\/istio.io\/latest\/docs\/reference\/config\/security\/peer_authentication\/)策略，对整个网格或每个命名空间或工作负载进行操作。此外，您还可以应用 Istio 的[AuthorizationPolicy](https:\/\/istio.io\/latest\/docs\/reference\/config\/security\/authorization-policy\/)来控制您的工作负载的访问。\n\n### TLS 版本\n\nTLS 版本 1.3 是 Istio 在内网应用程序通信中的默认设置，使用 Envoy 的[默认密码套件](https:\/\/www.envoyproxy.io\/docs\/envoy\/latest\/api-v3\/extensions\/transport_sockets\/tls\/v3\/common.proto)（例如，对于 Istio 1.19.0，为\u0060TLS_AES_256_GCM_SHA384\u0060）。如果您需要旧的 TLS 版本，您可以为您的工作负载[配置不同的网格范围内的最小 TLS 协议版本](https:\/\/istio.io\/latest\/docs\/tasks\/security\/tls-configuration\/workload-min-tls-version\/)。\n\n## 结束语\n\n由互联网工程任务组（IETF）制定的 TLS 协议是存在的最广泛审查、专家批准、经过战斗测试的数据安全协议之一。TLS 也在全球广泛使用 - 每当您访问任何安全网站，您都可以放心购物，部分原因是因为锁定图标表明您正在使用 TLS 安全连接到受信任的网站。TLS 1.3 协议设计具有端到端的身份验证、保密性和完整性，以确保您的应用程序的身份和通信不被破坏，并防止中间人攻击。为了实现这一点（并被认为是符合标准的 TLS），正确验证通信对等方并使用从握手协商的密钥加密流量不仅重要，而且至关重要。现在您知道 mTLS 在满足您的安全应用程序通信要求（加密身份、保密性、完整性和访问策略执行）方面表现优秀，您可以简单地使用 Istio 将您的内网应用程序通信升级到 mTLS - 配置非常少！\n\n*特别感谢 Louis Ryan、Ben Leggett、John Howard、Christian Posta、Justin Pettit 花费大量时间审查和提出博客的更新！*\n', '\/trans\/secure-apps-with-istio\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">本文讨论了使用相互 TLS (mTLS) 和 Istio 保护应用程序通信的重要性。mTLS 提供了端到端的安全性，只有源和目标可以解密数据，从而防止中间人攻击。然而，如果源或目标的身份没有加密，可能会出现问题。Istio 中的 mTLS 可以简单地启用，并为每个应用程序 pod 提供身份证书。为了强制执行严格的 mTLS，可以使用 Istio 的 PeerAuthentication 策略和 AuthorizationPolicy。最后，TLS 协议是最广泛审查、专家批准、经过战斗测试的数据安全协议之一，Istio 默认在内网应用程序通信中使用 TLS 1.3 版本。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/startup-playbook/">[译] 创业指南</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/11/05</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e4%b8%9a%e6%80%81"> 
             业态
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://playbook.samaltman.com/" target="_blank" rel="noopener">原文</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('创业指南', '创业指南关键点：快速解雇有毒员工，忽略竞争对手；尽快实现“拉面盈利”；筹资时要有好公司，不要失去节俭精神。', '\n\u003e 摘要：创业指南强调了几个关键方面：首先，创业公司应快速解雇对文化有毒的员工，忽略竞争对手，特别是当他们筹集大量资金或在媒体上制造大量噪音时。其次，创业公司需要找到盈利的方法，尽快达到“拉面盈利”的状态，即赚足够的钱让创始人可以靠拉面度日。最后，筹资是大多数创业公司在某个时候都会面临的问题，成功筹资的秘诀是拥有一家好公司，而不是过度优化流程。创业公司应该在需要资金或者在条件好的情况下筹资，但要小心不要失去节俭精神，或者开始通过投钱来解决问题。\n\n作者 Sam Altman 是一位知名的企业家和投资人，他是 OpenAI 的创始人，Y Combinator（一家著名的创业孵化器）的前任主席。\n\n我们花了很多时间为创业公司提供咨询。虽然一对一的建议一直是至关重要的，但我们认为，如果我们能将这些建议中最能普遍化的部分提炼成一种可以给 YC 和 YC Fellowship 公司的指南，可能会帮助我们扩大 YC 的规模。\n\n然后我们想，我们应该把它给所有人。\n\n这本指南主要是为创业世界的新人准备的。对于已经阅读过很多 YC 合作伙伴所写的内容的人来说，这里的大部分内容可能并不新鲜——我们的目标是把它们都集中在一个地方。\n\n关于如何扩大创业公司的第二部分可能会在以后发布——这部分主要涵盖了如何启动一个创业公司。\n\n## 引言\n\n引言\n\n我们花了很多时间为创业公司提供咨询。虽然一对一的建议一直是至关重要的，但我们认为，如果我们能将这些建议中最能普遍化的部分提炼成一种可以给 YC 和 YC Fellowship 公司的指南，可能会帮助我们扩大 YC 的规模。\n\n想法\n\n我们首先询问 YC 公司他们正在做什么以及为什么要做。我们在此处寻找清晰、简洁的答案。这既是为了评估你作为创始人的能力，也是为了评估想法本身。能够清晰地思考和沟通对于创始人来说非常重要。\n\n优秀的团队\n\n平庸的团队无法建立伟大的公司。我们最关注的事情之一就是创始人的实力。当我过去进行后期投资时，我同样关注创始人所雇佣的员工的实力。\n\n优秀的产品\n\n这是成功的秘诀：拥有一个优秀的产品。这是所有伟大公司共有的唯一特点。如果你没有制造出用户喜爱的产品，你最终将失败。然而，创始人总是在寻找其他的秘诀。创业公司是你生活中停止使用小把戏的时期。\n\n优秀的执行\n\n虽然建立一个伟大的产品是必要的，但这还不够。你还需要把它变成一家伟大的公司，而且你必须亲自去做——雇佣一个“有经验的管理者”来完成所有这些工作是一种非常普遍的幻想，也是失败公司的墓地。你不能将这项工作外包给其他人很长一段时间。\n\n增长\n\n增长和动力是执行工作的关键。增长（只要不是以 90 美分的价格卖一美元钞票的增长）能解决所有问题，而缺乏增长除了增长之外，不能被任何东西解决。如果你在增长，你会感觉到你正在赢，人们会感到快乐。\n\n专注与强度\n\n如果我必须把我关于如何运作的建议简化到只有两个词，我会选择专注和强度。这些词似乎真的适用于我所认识的最好的创始人。\n\nCEO 的职务\n\n我前面提到，CEO 的唯一普遍的工作描述是确保公司取胜。虽然这是真的，我想更具体地谈谈 CEO 应该如何分配他或她的时间。\n\n招聘与管理\n\n招聘是你最重要的工作之一，也是建立一家伟大公司（而不仅仅是一款伟大的产品）的关键。我关于招聘的第一条建议是不要去做。我们在 YC 工作过的最成功的公司在开始雇佣员工之前都等了相当长的时间。\n\n竞争对手\n\n关于竞争对手的一句快速的话：竞争对手是创业公司的鬼故事。首次创业的人认为竞争对手是 99% 的创业公司死亡的原因。但是，99% 的创业公司是自杀，而不是他杀。相反，你应该担心你所有的内部问题。如果你失败，很可能是因为你没有做出一个伟大的产品和\/或没有做出一个伟大的公司。\n\n赚钱\n\n哦，是的，赚钱。你需要找出如何做到这一点。这个问题的简短版本是，你必须让人们付给你的钱多于你提供商品\/服务的成本。出于某种原因，人们总是忘记考虑提供商品\/服务的成本部分。\n\n筹资\n\n大多数创业公司在某个时候都会筹集资金。当你需要资金或者能以优惠条件获得资金时，你应当筹集资金。小心不要丧失你的节俭观念，或者开始通过抛钱解决问题。资金不足可能会导致问题，但是资金过多几乎总是会带来问题。\n\n结束语\n\n记住，每个伟大的想法都有至少一千个人想到过。其中有一人实际上获得了成功。区别在于执行。这是一个磨人的过程，每个人都希望有其他的方式将“想法”转化为“成功”，但是至今还没有人找到。\n\n作为一家创业公司，你的目标是创造用户喜爱的东西。如果你做到了这一点，那么你就必须想办法获得更多的用户。但是这个第一步是至关重要的——想想今天的那些非常成功的公司。他们都是从一个早期用户非常喜欢并向其他人推荐的产品开始的。如果你做不到这一点，你就会失败。如果你欺骗自己，认为用户喜欢你的产品但实际上他们并不喜欢，你仍然会失败。\n\n创业公司的墓地上散落着认为他们可以跳过这一步的人们的尸体。\n\n与大量用户喜欢的产品相比，首先制作出一小部分用户喜爱的产品要好得多。尽管总体上的积极感觉是一样的，但是获取更多用户要比从喜欢变为喜爱容易得多。\n\n关于选择创业的警告：这真的很糟糕！我们从 YC 创始人那里得到的最一致的反馈就是，它比他们想象中的要难，因为他们没有一个框架来理解创业需要的工作和强度。加入一个初创阶段、发展势头强劲的创业公司通常是一个更好的财务选择。\n\n另一方面，创业对你的职业生涯实际上并不冒险——如果你真的擅长科技，即使你失败了，你也还有工作机会。大多数人非常不擅长评估风险。我个人认为，更冒险的选项是拥有一个你非常热衷的想法或项目，但是选择在一个安全、轻松、没有成就感的工作中工作。\n\n要成功的创业公司需要：一个伟大的想法（包括一个伟大的市场）、一个伟大的团队、一个伟大的品，和伟大的执行力。\n\n## 理念\n\n我们首先询问 YC 公司的是他们正在做什么以及为什么。\n\n我们在这里寻找清晰，简洁的答案。这既是为了评估你作为创始人，也是为了评估想法本身。作为创始人，能够清晰地思考和交流很重要 - 你需要用它来招聘，筹集资金，销售等。一般来说，想法需要清晰才能传播，复杂的想法几乎总是混乱思维或者问题的标志。如果想法第一次听到时并未真正激发起至少一些人的兴趣，那就糟糕了。\n\n我们还会问谁迫切需要这个产品。\n\n最好的情况是，你自己就是目标用户。其次是你非常了解目标用户。\n\n如果公司已经有用户，我们会询问有多少用户，以及这个数字正在如何增长。我们试图弄清楚为什么它没有增长得更快，我们特别试图弄清楚用户是否真的喜欢这个产品。通常，这意味着他们在公司没有提示的情况下告诉他们的朋友使用产品。我们还会问公司是否正在创收，如果没有，为什么没有。\n\n如果公司尚无用户，我们会试图搞清楚首先要建立的最小事物 - 即，如果我们从完美的体验反向工作，我们试图搞清楚从哪个核心开始。\n\n测试一个想法的方式是启动它并看看会发生什么，或者尝试销售它（例如，在你编写一行代码之前尝试获得意向书。）前者更适合消费者想法（用户可能会告诉你他们会使用它，但实际上可能无法脱颖而出），后者更适合企业想法（如果一家公司告诉你他们会购买某物，那么就去建造它。）具体来说，如果你是一家企业公司，我们会首先问你的问题之一是，你是否有一份来自客户的意向书，称他们会购买你正在建造的东西。对于大多数生物技术和硬科技公司，测试想法的方法是首先与潜在客户交谈，然后搞清楚首先可以建造的技术的最小子集。\n\n当你从用户那里得到反馈时，让你的想法进化是非常重要的。并且你真的需要非常了解你的用户 - 你需要这个来评估一个想法，打造一个伟大的产品，并建立一个伟大的公司。\n\n如前所述，创业是非常艰难的。它需要很长的时间和持续的强烈努力。创始人和员工需要有共享的使命感来支持他们。所以我们询问创始人为什么想要创办这个特定的公司。\n\n我们还会问这家公司将如何成为一家垄断公司。这有很多不同的术语，但我们使用彼得·蒂尔（Peter Thiel）的。显然，我们不希望你的公司对竞争对手采取不道德的行为。相反，我们正在寻找随着规模的扩大变得更强大且难以复制的企业。\n\n最后，我们提问关于市场。我们询问市场今天的规模，增长速度有多快，以及为什么在十年后它会变得很大。我们试图理解为什么市场将快速增长，以及为什么这是一个创业公司应该追求的好市场。我们喜欢在大多数人还没有意识到的时候，主要的技术转变刚刚开始——大公司在处理这些问题上不擅长。而且有点反直觉的是，最好的答案是去追求一个小市场的大部分。\n\n关于想法的一些其他想法：\n\n我们更喜欢新的东西而不是衍生的东西。大多数真正的大公司都从一些根本新的东西开始（新的一个可接受的定义是比原来好 10 倍）。如果有十个其他公司同时开始实施同样的计划，并且听起来很像已经存在的东西，我们会持怀疑态度。\n\n这其中一个重要的反直觉原因是，做一些新的和困难的事情比做一些衍生的和容易的事情更容易。如果是前者，人们会想要帮助你和加入你；如果是后者，他们不会。\n\n好的想法听起来不好，但实际上是好的。所以，你不需要对你的想法过于保密——如果它实际上是个好主意，那么它可能看起来不值得偷。即使它听起来值得偷，有好想法的人至少比愿意付出将伟大的想法变成伟大公司所需的工作的人多一千倍。而且，如果你告诉人们你在做什么，他们可能会帮助。\n\n说到告诉人们你的想法——虽然这个想法第一次听到时真的让一些人很兴奋是很重要的，但几乎每个人都会告诉你，你的想法很糟糕。也许他们是对的。也许他们不擅长评估创业公司，或者也许他们只是\n\n在讨论你的创意时，你需要知道的是，尽管你的创意在人们第一次听到时，可能会让一些人感到非常兴奋，但几乎所有人都会告诉你，你的创意太糟糕了。也许他们是对的，也许他们不擅长评估创业公司，或者他们只是嫉妒。无论原因是什么，这种情况都会经常发生，会让你感到痛苦，即使你认为自己不会受到它的影响，你还是会受到影响。你能够越快地建立自我信念，不被憎恨者拖累，你就会越好。无论你有多成功，憎恨者永远不会消失。\n\n如果你没有创意，但想要创业，也许你不应该这么做。首先有创意，然后创业是将创意推向世界的方式，这样做会更好。\n\n我们曾经尝试过一个实验，我们资助一批没有创意的有前途的创始团队，希望他们在我们资助他们后能找到一个有前途的创意。\n\n他们都失败了。我认为问题的一部分是，好的创始人通常有很多好的创意（通常是太多）。但更大的问题是，一旦你有了一个创业公司，你就必须赶快想出一个创意，而且因为它已经是一个正式的公司，所以创意不能太疯狂。你最终会得到看起来合理但是衍生的创意。这就是转型的危险。\n\n所以，最好不要过于积极地强迫自己想出创业创意。相反，学习不同的东西。练习注意问题，看起来效率低的事情，以及重大的技术转变。[做你感兴趣的项目](http:\/\/blog.samaltman.com\/projects-and-companies)。尽可能地和聪明、有趣的人在一起。在某个时候，创意就会出现。\n\n## 优秀的团队\n\n平庸的团队不会建立伟大的公司。我们最关注的事情之一是创始人的实力。当我过去做后期投资的时候，我也十分关注创始人所雇佣的员工的实力。\n\n什么才是优秀的创始人呢？最重要的特性是坚不可摧，决心，坚实可靠，和足智多谋。智力和热情也非常重要。这些都比经验和语言 X 框架 Y 的“专业知识”更重要。\n\n我们注意到最成功的创始人是那种与之合作压力较小的人，因为你觉得“无论什么事，他\/她都能完成”。有时候，你可以通过 sheer force of will 来取得成功。\n\n好的创始人具有许多看似矛盾的特质。一个重要的例子是刚柔并济。你想要有关于公司核心和其使命的强烈信念，但是在几乎所有其他事情上，你还需要非常灵活并愿意学习新事物。\n\n最好的创始人反应非常敏捷。这是果断，专注，热情和执行力的指示器。\n\n与之交谈困难的创始人几乎总是糟糕的。沟通是创始人非常重要的技能 - 实际上，我认为这是最重要的一种鲜为人知的创始人技能。\n\n科技创业公司至少需要一个能够构建公司产品或服务的创始人，以及至少一个在销售和与用户交谈方面是（或可以成为）擅长的创始人。这可以是同一个人。\n\n在选择联合创始人时考虑这些标准 - 这是你将做出的最重要的决定之一，而这通常是相当随机的。你需要了解你的人，而不是你刚在创始人约会上遇到的人。你可以使用更多的数据来评估你可能与之合作的任何人，并且你真的不想得到这个错误的答案。此外，在某个时刻，创业公司的预期价值可能会低于 X 轴。如果你与你的联合创始人有预先存在的关系，你们都不会希望让对方失望，你们会继续前进。创始人分手是早期创业公司死亡的主要原因之一，我们在创始人为了创办公司而见面的情况下看到这种情况发生得非常非常频繁。\n\n最好的情况，无疑是，拥有一个好的联合创始人。其次是成为单打独斗的创始人。最糟糕的情况，无疑是，有一个糟糕的联合创始人。如果事情没有进展，你应该尽快分道扬镳。\n\n关于股权的一个快速提示：关于股权分配的谈话随着时间的推移并没有变得更容易 - 最好早点设置。几乎平等是最好的，尽管在两个创始人的情况下，最好有一个人拥有额外的股份以防止在创始人有分歧时出现僵局。\n\n## 优秀的产品\n\n成功的秘诀就是拥有一个优秀的产品。这是所有伟大公司的共同点。\n\n如果你没有开发出用户喜爱的产品，你最终将会失败。然而，创始人总是在寻找其他的策略。创业是你人生中不能再依赖技巧的时期。\n\n优秀的产品是长期增长的唯一方式。最终，你的公司会变得如此庞大，以至于所有的增长黑客都无法运作，你必须依靠人们想要使用你的产品来发展。这是理解超级成功公司最重要的事情。没有其他方式。想想所有非常成功的科技公司——他们都这么做。\n\n你需要在你的公司中建立一个“产品改进引擎”。你应该与你的用户交谈，观察他们如何使用你的产品，找出哪些部分表现不佳，然后改进你的产品。然后再做一次。这个周期应该是公司的首要关注点，它应该推动所有其他事情。如果你每周改进你的产品 5%，它将会产生真正的复利效果。\n\n这个周期的重复速率越快，公司通常会变得越好。在 YC 期间，我们告诉创始人他们应该构建产品，与用户交谈，除了吃饭、睡觉、锻炼和与他们爱的人共度时光之外，他们不应该做其他太多的事情。\n\n要做好这个周期，你必须非常了解你的用户。真正观察他们如何使用你的产品。如果可以的话，坐在他们的办公室里。既要重视他们告诉你的内容，也要重视他们实际做的事情。你不应该让任何人在创始人和用户之间，尽可能长的时间——这意味着创始人需要做销售、客户支持等工作。\n\n尽你所能了解你的用户。真正了解他们需要什么，在哪里找他们，以及什么驱动他们。\n\n“做不易扩展的事情”已经成为创业公司的口头禅。你通常需要一个接一个地招募初始用户（Ben Silbermann 过去常常在 Palo Alto 的咖啡店里接触陌生人，让他们试试 Pinterest），然后构建他们要求的东西。许多创始人讨厌这个部分，只想在媒体上宣布他们的产品。但这几乎永远不会有效。手动招募用户，使产品如此优秀以至于你招募的用户会告诉他们的朋友。\n\n你还需要将事情分解成非常小的部分，然后在进行的过程中进行迭代和适应。不要试图\n\n你需要将事情分解成很小的部分，然后边做边调整。不要试图过早规划，绝对不要把所有事情都堆积到一个大的公开发布中。你需要从非常简单的东西开始——尽可能少的接触面——然后比你预期的更早去发布。事实上，简单总是好的，你应该始终保持你的产品和公司尽可能地简单。\n\n我们经常向遇到问题的创业公司提出一些常见的问题：用户是否会多次使用你的产品？你们的用户对你们的产品是否狂热？如果你的公司消失了，你的用户会真的很难过吗？你的用户是否会在你没有要求他们这样做的情况下推荐你给其他人？如果你是一个 B2B 公司，你是否至少有 10 个付费客户？\n\n如果没有，那通常就是根本的问题，我们会告诉这些公司去改进他们的产品。我对大多数关于为什么公司不增长的借口都持怀疑态度——非常常见的真正原因是产品还不够好。\n\n当创业公司对他们的产品下一步该做什么，或者他们的产品还不够好的时候，我们会让他们去和他们的用户交谈。这在每个案例中都不一定管用——毫无疑问，人们本来会要求福特生产更快的马车——但是它通常还是有效的。事实上，更普遍的是，当公司中有任何争议的时候，去和你的用户交谈。\n\n最好的创始人对产品质量似乎过于在乎，甚至对看似不重要的细节也是如此。但是它似乎有效。顺便说一句，“产品”包括用户与公司的所有互动。你需要提供优质的支持，优质的销售互动等等。\n\n请记住，如果你没有做出一个伟大的产品，那么其他一切都无法拯救你。\n\n## 执行力\n\n虽然你需要打造一个出色的产品，但这还远远不够。你还需要把它变成一个出色的公司，并且你需要自己去做--雇佣一个“有经验的管理者”来做所有这些工作的幻想是非常普遍的，也是许多失败公司的坟墓。你长时间内不能把工作外包给别人。\n\n这听起来很明显，但你必须要赚钱。现在是开始思考如何实现的好时机。\n\nCEO 的唯一普遍职责就是确保公司成功。即使你有许多缺点，通常会让你无法胜任 CEO 的职位，只要你雇佣能弥补你自身技能的人，并让他们做好自己的工作，作为创始人，你就能做到这一点。那些有经验的 CEO，有华丽的 MBA 学位，可能没有你所拥有的技能缺口，但他或她不会像你那样理解用户，不会有同样的产品直觉，也不会那么在乎。\n\n## 成长\n\n成长和动力是执行力的关键。只要不是以“90 美分卖出 1 美元的方式”获得的成长，成长就能解决所有问题，而缺乏成长则只能通过成长来解决。如果你在成长，感觉就像你在赢，人们会感到快乐。如果你在成长，新的角色和责任会不断出现，人们会感到他们的职业生涯在进步。如果你没有成长，就感觉你在输，人们会不快乐并离开。如果你没有成长，人们只会为责任斗争和归责。\n\n创始人和员工在没有动力的创业公司中几乎都会疲惫不堪。这种情况的消沉程度是难以言喻的。\n\n执行力的首要准则是“永不失去动力”。但是如何做到呢？\n\n最重要的方式就是把它当作你的首要任务。公司做的是 CEO 所衡量的。对公司进行优化的单一指标是有价值的，找到正确的成长指标是值得花时间的。如果你关心成长，并设定了执行标准，公司的其他部分都会集中精力去实现。\n\n这里有几个例子。\n\nAirbnb 的创始人画了一幅他们想要达到的增长图，展望未来。他们把这画放在各处——冰箱上，桌子上，浴室的镜子上。如果他们那周达到了这个数字，那就好。如果没有，那就是他们唯一会谈论的事情。\n\n马克·扎克伯格曾经说过，Facebook 最重要的创新之一是他们在增长放缓时建立了一个增长小组。这个小组是公司中最有声望的小组之一——每个人都知道它的重要性。\n\n保持一个阻碍增长的事情的列表。作为一个公司来讨论你们如何能够更快地增长。如果你知道什么是限制因素，你就会自然地思考如何解决它们。\n\n对于你考虑做的任何事情，问自己“这是优化增长的最好方式吗？”例如，去参加一个会议通常不是优化增长的最好方式，除非你期望在那里卖出很多产品。\n\n对于度量（以及财务）有极端的内部透明度是一件好事。出于某种原因，创始人总是对此感到非常害怕。但是，这对于让整个公司专注于增长是非常有益的。似乎公司员工对度量的关注度与他们的表现之间存在直接的关联。如果你隐藏度量，人们就很难专注于它们。\n\n说到度量，不要用虚荣度量来欺骗自己。这里的常见错误是专注于注册并忽略保留。但是，保留对于增长来说与新用户获取一样重要。\n\n建立内部节奏以保持动力也很重要。你想有一个可以在内外谈论的“节拍”——新的特性，客户，雇员，收入里程碑，合作伙伴等。\n\n你应该设定激进但边界可达的目标，并每月检查进度。庆祝胜利！一直在内部讨论策略，告诉每个人你从客户那里听到的事情等等。你在内部分享的信息越多——无论是好的还是坏的——你就会越好。\n\n有一些陷阱是创始人经常会掉入的。其中一个是，如果公司的增长如火如荼，但是一切都看起来非常破碎和低效，每个人都会担心事情会解体。实际上，这种情况似乎很少发生（Friendster 是我能指出的最近一个由于技术债务而死亡的创业公司的例子。）违反直觉的是，如果你的增长速度很快，但是没有任何优化——你只需要修复它\n\n创业者往往会陷入几个常见的陷阱。其中之一就是，如果公司的增长疯狂，但一切似乎都非常破烂和低效，所有人都会担心事情会破裂。实际上，这种情况很少发生（Friendster 是我能举出的最近一个因技术债务而死去的创业公司的例子）。事实证明，如果你的增长速度很快，但是没有任何东西是优化的，这是好事——你只需要修复它就可以获得更多的增长！我的最喜欢的投资就是那些增长非常快但是非常未优化的公司——它们被严重低估了。\n\n一个相关的陷阱是过多的考虑未来的问题——比如，“我们如何在大规模的情况下做到这一点？”答案是，等你到达那里的时候再去解决。因为在辩论这个问题的时候死掉的创业公司比因为没有足够思考这个问题而死掉的创业公司要多。一个好的经验法则是只考虑在你目前规模的 10 倍的情况下，事情会如何运作。大多数早期的创业公司应该将“做一些不可扩展的事情”挂在墙上，并按照它来生活。举个例子，伟大的创业公司在早期总是有很好的客户服务，而糟糕的创业公司担心对单位经济的影响以及它不会扩展。但是，优秀的客户服务会让早期的用户充满热情，而且当产品变得更好的时候，你需要的支持会更少，因为你会知道客户常常在哪些地方挣扎，并在那些地方改善产品\/体验。（顺便说一下，这是一个非常重要的例子——要有优秀的客户支持。）\n\n这里有一个大的陷阱——“做一些不可扩展的事情”并不意味着你不需要最终赚钱。在早期，你的单位经济状况不好是可以的，但是你必须要有一个好的理由，解释为什么单位经济会在后期变好。\n\n另一个陷阱是因为增长在绝对数值上很差，即使在百分比上很好，也会让人感到沮丧。人们对于指数增长的直觉是非常差的。提醒你的团队这一点，所有的大公司都是从小数目开始增长的。\n\n创始人常常陷入一些陷阱，他们认为这些陷阱会带来增长，但实际上几乎从未成功，却浪费了大量的时间。常见的例子包括与其他公司的交易和“大新闻发布”。对这些要警惕，并且明白它们实际上永远不会起作用。相反，像所有伟大的公司一样，通过打造用户喜爱的产品、先手动招募用户，然后测试各种增长策略（如广告、推荐计划、销售和营销等），并做更多有效果的事情。向你的客户询问你可以在哪里找到更多像他们一样的人。\n\n记住，销售和营销并不是坏词。虽然如果你没有一个伟大的产品，它们都无法拯救你，但它们都可以帮助你大幅加速增长。如果你是一家企业公司，你的公司可能需要在这些方面做得好。\n\n不要害怕销售。至少有一个创始人必须擅长要求人们使用你的产品并给你钱。\n\nAlex Schultz[对消费产品的增长给出了一个讲座](http:\/\/startupclass.samaltman.com\/courses\/lec06\/)，值得一看。对于 B2B 产品，我认为几乎总是要追踪每月的收入增长，记住销售周期较长意味着前几个月可能看起来很难看（尽管有时把创业公司作为初始客户可以解决这个问题）。\n\n## 聚焦与高强度\n\n如果我必须将我的建议精简为两个词，我会选择聚焦和高强度。这两个词似乎真的适用于我所知道的最好的创始人。\n\n他们对自己的产品和增长保持坚定不移的关注。他们不试图做所有的事情——实际上，他们经常说“不”，这很困难，因为开始创业的人往往喜欢尝试新事物。\n\n作为一个普遍的原则，不要让你的公司开始做下一件事，除非你已经在第一件事上取得了主导地位。我所知道的所有伟大的公司都没有一开始就做很多事情——他们从对一件事充满信念开始，然后一路看下去。你可以做的事情比你想象的要少。做太多错误的事情是创业公司死亡的一个非常、非常常见的原因。优先级的设定是关键，也是困难的。（设定公司的优先级和设定你自己的战术优先级同样重要。我发现对我个人来说最有效的方法是为每一天制定一份包含大约 3 个主要任务和大约 30 个次要任务的纸质清单，以及一份列出整体目标的年度待办事项清单。）\n\n虽然伟大的创始人不做很多大项目，但他们做任何事都非常高强度。他们非常快地完成事情。他们果断，这在你经营创业公司时很困难——你会得到很多相互矛盾的建议，这既因为有多种方式可以做事情，也因为存在很多糟糕的建议。伟大的创始人会倾听所有的建议，然后迅速做出自己的决定。\n\n请注意，这并不意味着要对所有事情都保持高强度——这是不可能的。你必须选择正确的事情。正如 Paul Buchheit 所说，找到用 10% 的努力获得 90% 价值的方法。市场不关心你工作多么辛苦——它只关心你是否做了正确的事情。\n\n在对产品质量痴迷和非常快速地移动之间取得平衡非常困难。但这是伟大创始人的最明显特点之一。\n\n我从未见过一个行动缓慢的创始人能够取得真正的成功。\n\n你和其他创业公司没有什么两样。你依然需要保持专注并且快速行动。那些构建火箭和核反应堆的公司仍然设法做到这一点。所有失败的公司都有一个宠物解释，为什么他们与众不同，不需要快速行动。\n\n当你发现有效的方法，继续这样做。不要分心去做其他事情。不要松懈。\n\n不要被初期的成功所迷惑——你不是通过参加大量的网络活动和发表大量的演讲才取得了初步的成功。创业公司的创始人在初步取得成功后有两条路径可选：要么他们继续做他们正在做的事情，要么他们开始花大量的时间思考他们的“个人品牌”并享受作为创始人的地位。\n\n参加会议和接受媒体报道的诱惑很难抵挡——他们让人感觉很好，尤其是在看到你所在领域的其他创始人得到关注时。但是这种情况不会持续很久。最终，新闻媒体会弄清楚谁才是真正的赢家，如果你的公司真的成功了，你会得到比你期望的更多的关注。极端的情况——初创阶段的创始人有自己的公关——你可能认为这只会在电视节目中出现，但实际上真的存在，而且他们几乎总是失败。\n\n长期来看，专注和强度将取得胜利。 (Charlie Rose 曾经说过，世界上的事情是通过专注和人际关系的结合来完成的，这一点一直让我记忆犹新。)\n\n## CEO 的职责\n\n我之前提到过，CEO 唯一的职责就是确保公司取得胜利。尽管这是事实，但我想更具体地谈谈 CEO 应该如何安排他或她的时间。\n\n一个 CEO 需要 1）为公司设定愿景和戈略；2）向所有人宣扬公司；3）招聘和管理团队，尤其是在你自己有空白的领域；4）筹集资金；以及 5）设定执行质量标准。\n\n除此之外，还要找出你最喜欢的商业部分，并保持参与。\n\n正如我一开始提到的，这是一份繁重的工作。如果你成功了，它会在你无法想象的程度上接管你的生活——你会一直在思考公司的事情。极度的专注和强度意味着它并不是工作生活平衡的最佳选择。你可以有另一件大事——你的家庭，做很多铁人三项比赛，等等——但可能不会有比这更多的事情。你必须时刻保持警惕，有很多决策只有你可以做，无论你如何善于委托。\n\n你应该目标明确，对你的团队和外界总是反应迅速，总是清楚地说明战略和优先事项，参加所有重要的事情，并快速执行（尤其是在别人因为等待你的决定而被阻碍时）。你还应该采取一种“不择手段”的态度——会有很多令人不愉快的疲劳。如果团队看到你在做这些事情，他们也会这么做。\n\n管理你自己的心理是既困难又重要的。这在现在已经成为陈词滥调，但实际上是真的——情绪的高低起伏非常剧烈，如果你没有找到在它们中间保持平衡的方法，你会遇到困难。做 CEO 是孤独的。当一切都在崩溃时，你可以打电话给其他 CEO 的关系是很重要的（YC 的一个重要的意外发现就是为创始人提供了一个可以有同行的方式）。\n\n一个成功的创业公司需要很长的时间——当然比大多数创始人在开始时想的要长。你不能把它当作通宵达旦的事情。你必须吃好，睡好，做运动。你必须花时间和你的家人和朋友在一起。你还需要在你真正热衷的领域工作——没有别的事情能支持你十年。\n\n一切都会感觉像是破碎的——灾难的多样性和程度会让你惊讶。你的工作就是面带微笑地修复它们，并向你的团队保证一切都会好的。通常事情没有看起来那么糟，但有时候它们实际上真的很糟。无论如何，继续前进。继续成长。\n\nCEO 不能找借口。会有很多坏事和不公平的事情发生。但不要让自己说，尤其是对团队说，“如果我们有更多的钱”或者“如果我们有另一个工程师”。要么找出一种方法来实现，要么找出不需要它的方法做事。让自己找很多借口的人通常会失败，做创业公司的 CEO 这样做几乎总是会失败。让自己对不公感到沮丧 1 分钟，然后意识到找出解决方案取决于你。努力让人们在谈论你时说“X 总是能够完成事情”。\n\n没有一个第一次做创始人的人知道他或她在做什么。你以多大的程度理解这一点，并寻求帮助，你就会更好。花时间学习成为一个好的领导和管理者是值得的。做这件事的最好方法是找一个导师——读书似乎不太管用。\n\n我们在 YC 给出的很多建议都是“直接问他们”或“直接去做”。第一次做创始人的人认为当你需要别人的东西或者你想做一些新的事情时，一定有一些秘密。但是再次强调，创业公司是骗术停止工作的地方。只要直接点，愿意要求你想要的，不要做一个混蛋。\n\n你需要为他人扭曲现实，但不是为你自己。你必须让其他人相信你的公司有望成为本十年最重要的创业公司，但你自己应该对可能出错的事情保持警惕。\n\n坚持到底。大多数创始人放弃得太快，或者太快地转向下一个产品。如果事情通常不顺利，找出问题的根本原因，并确保你解决了这个问题。做一个成功的创业公司 CEO 的很大一部分就是不放弃（虽然你也不想在所有的理由都被否定后还固执地坚持——这是另一个明显的矛盾，也是一个很难做出的判断）。\n\n保持乐观。尽管可能世界上有一位伟大的悲观主义 CEO，但我还没遇到过他或她。CEO 需要有一种未来会变得更好的信念，并且公司将在使未来变得更好的过程中发挥重要作用，这对于 CEO 来说很重要，他们需要将这种信念传染给公司的其他成员。在理论上这很简单，但在面对短期挑战的现实中却很困难。不要忽视长期愿景，相信日复一日的挑战终将被遗忘，被年复一年的进步所取代。\n\n你最重要的工作之一是定义使命和价值观。这可能感觉有点做作，但在初期就开始做这件事是值得的。无论你在一开始设置的是什么，几年后通常仍然有效，随着你的成长，每一个新加入的人都需要首先接受并然后向其他人推销公司的使命和价值观。所以尽早将你的文化价值观和使命写下来。\n\n我认为值得重复的一个老生常谈的观点是：建立一个公司有点像建立一个宗教。如果人们不能将他们日常的工作与他们关心的更高目标联系起来，他们就无法做好自己的工作。我认为在 YC 网络中，Airbnb 在这方面做得最好，我强烈建议大家去看看他们的文化价值观。\n\nCEO 经常犯的一个错误是在商业的老路上创新，而不是在新产品和解决方案上创新。例如，许多创始人认为他们应该花时间去发现新的人力资源、营销、销售、融资、公关等方法。这几乎总是不好的。在已经有定式的领域里，做已经被证明有效的事情，将你的创新精力集中在你正在构建的产品或服务上。\n\n## 招聘和管理\n\n招聘是你最重要的工作之一，也是打造一家伟大公司（而非伟大产品）的关键。\n\n我对招聘的第一条建议就是不要去做。我们在 YC 合作过的最成功的公司都等待了相对较长的时间才开始雇佣员工。员工很贵。员工会增加组织复杂性和沟通开销。有些你可以对创始人说的事情，你在员工面前就不能说。员工还会增加惯性——随着团队人数的增加，改变方向就会变得越来越困难。抵制从你的员工数量中寻求自我价值的冲动。\n\n最优秀的人有很多机会。他们想加入火箭般的公司。如果你一无所有，你很难聘请到他们。一旦你明显得胜，他们就会想加入你。\n\n值得重申的是，优秀的人有很多选择，而你需要优秀的人来打造一家伟大的公司。请慷慨地给予股权、信任和责任。愿意去追求那些你认为你可能无法得到的人。记住，你想聘请的那种人如果愿意的话，他们可以自己创办公司。\n\n当你处于招聘模式（即从你获得产品市场契合度到 T 无穷大的时候），你应该花大约 25% 的时间在这上面。至少有一位创始人，通常是 CEO，需要在招聘上变得很棒。这是大多数 CEO 的时间消耗最大的活动。每个人都说 CEO 应该花大量的时间招聘，但实际上，除了最好的 CEO，没有人这么做。这可能有一些道理。\n\n不要妥协于你雇佣的人的质量。每个人都知道这一点，然而每个人在某个绝望的时刻都妥协过。每个人都会后悔，有时这几乎会杀死公司。好人和坏人都有感染力，如果你从一开始就雇佣了平庸的人，平均水平通常不会上升。刚开始就雇佣了平庸的早期员工的公司几乎永远无法恢复。对人的直觉要有信心。如果你有疑虑，那么答案就是不。\n\n不要雇佣长期消极的人。他们不适合早期创业公司的需求——世界其他地方每天都会预测你的失败，公司内部需要团结一致，相信反其道而行之。\n\n对于几乎所有的角色，都应优先考虑能力而非经验。寻找具有原始智力并且有完事业成果的人。寻找你喜欢的人——你们会一起度过很多时间，而且经常处于紧张的情况。对于你不熟悉的人，尝试在他们全职加入之前一起做一个项目。\n\n投入时间成为一个好的管理者。这对大多数创始人来说都很困难，而且肯定是反直觉的。但这是非常重要的。找到可以在这方面帮助你的导师。如果你在这方面做得不好，你会很快失去员工，如果你不能留住员工，你无论你是世界上最好的招聘者，都没关系。关于如何做一个好的管理者的原则已经讨论得很多了，但我从未看到过讨论“不要进入英雄模式”的。大多数初次当管理者的人在某个时候都会成为这种模式的受害者，尝试自己做所有的事情，并对他们的员工不可接近。这通常以崩溃告终。抵制任何进入这种模式的诱惑，并愿意接受项目延期以有一个运作良好的团队。\n\n说到管理，尽力让所有人都在同一个办公室。不知为何，创业公司总是在这方面妥协。但几乎所有最成功的创业公司开始的时候都在一起。我认为远程工作对于大公司可能很好，但对于创业公司来说，它并不是成功的秘诀。\n\n最后，快速解雇。每个人都知道这一点，但没人会做。但我还是想说一下。另外，无论他们在做什么事情上有多好，只要他们对文化有毒，就解雇他们。文化是由你雇佣、解雇和提升的人来定义的。\n\n[我写了一篇更详细的博客文章。](http:\/\/blog.samaltman.com\/how-to-hire)\n\n## 竞争对手\n\n关于竞争对手的一句话：竞争对手是创业公司的鬼故事。创业公司认为它们是杀死 99% 的创业公司的原因。但 99% 的创业公司是自杀，而非他杀。你应该更担心你所有的内部问题。如果你失败，很可能是因为你没能制造出一个伟大的产品，和\/或没能打造出一个伟大的公司。\n\n99% 的时间，你应该忽略竞争对手。特别是当他们筹集大量资金或在媒体上制造大量噪音时，更应该忽略他们。在他们用一个真实的，已经发布的产品击败你之前，不要担心竞争对手。新闻发布比写代码更容易，写代码又比制作伟大的产品更容易。用亨利·福特的话来说：“应当害怕的竞争者是那些完全不理会你，只是一直在改善他们自己的业务的人。”\n\n每一个巨头公司在他们小时候都面对过比你现在面临的更严重的竞争威胁，而他们都很好的度过了。总是有对策。\n\n## 赚钱\n\n哦，赚钱。你需要弄清楚如何去做。\n\n这个的简短版本是，你必须让人们支付给你的钱超过你提供商品\/服务的成本。不知为何，人们总是忘记考虑提供服务的成本部分。\n\n如果你有一个免费的产品，不要计划通过购买用户来增长。对于依赖广告的业务来说，这真的很难。你需要制作一些人们会和朋友分享的东西。\n\n如果你有一个付费产品，但客户生命周期价值 (LTV) 小于 500 美元，你通常无法负担销售。试验不同的用户获取方法，如 SEO\/SEM，广告，邮件等，但尽量在 3 个月内回收你的客户获取成本 (CAC)。\n\n如果你有一个付费产品，其 LTV（净收入）超过 500 美元，你通常可以负担得起直销。尝试先自己销售产品，了解什么是有效的。《Hacking Sales》是一本有用的书。\n\n无论如何，尽快达到“拉面盈利”——即，赚足够的钱让创始人可以靠拉面度日——的状态。当你到达这里，你就掌握了自己的命运，不再受投资者和金融市场的摆布。\n\n一直关注你的现金流。虽然这听起来难以置信，但我们已经看到过创始人在没有意识到的情况下用光了资金（并且[阅读 Paul Graham 的文章](http:\/\/paulgraham.com\/aord.html)）。\n\n## 筹资\n\n大多数创业公司在某个时候都会筹资。\n\n在你需要资金或者在条件好的情况下可以获得资金时，你应该筹资。小心不要失去你的节俭精神，或者开始通过投钱来解决问题。没有足够的钱可能会很糟糕，但是有太多的钱几乎总是糟糕的。\n\n成功筹资的秘诀是拥有一家好公司。所有其他的创始人试图过度优化流程的东西可能只在 5% 的时间里有用。投资者正在寻找的是那些无论他们是否投资，都会非常成功，但有了外部资本可以更快发展的公司。“非常成功”的部分很重要——因为投资者的回报主要是由大成功驱动的，如果一个投资者认为你有 100% 的机会创造一个 1000 万美元的公司，但几乎没有机会建立一个更大的公司，他\/她即使在非常低的估值下也可能不会投资。总是解释为什么你可能会获得巨大的成功。\n\n投资者受到错过下一个谷歌和害怕在看起来明显愚蠢的事情上损失钱的双重恐惧的驱动。（对于最好的公司，他们同时害怕这两个。）\n\n在你的公司处于不足以吸引资本的状态时，试图筹资是个坏主意。你会烧钱并浪费时间。\n\n如果你在筹资方面挣扎，不要失去信心。许多最好的公司都曾在这方面挣扎，因为最好的公司通常在一开始看起来很糟糕（而且他们几乎总是看起来不合时宜）。当投资者对你说不的时候，相信他们说的“不”，但不要相信他们的理由。并记住，除了“是”，任何东西都是“不”——投资者有一种让“不”听起来像“可能是”的能力。\n\n进行筹款谈判时，你需要并行进行，而不是顺序地按照你最喜欢的投资者名单进行。让投资者采取行动的途径，就是害怕其他投资者会抢走他们的机会。\n\n把筹款看作是一种必要的恶，尽快完成。有些创始人热衷于筹款；这总是不好的。最好将这项任务交给一位创始人，这样公司就不会停滞不前。\n\n请记住，大多数风险投资人对大多数行业了解不深。数据永远是最有说服力的。\n\n这种情况开始有所改变，但不幸的是，大多数投资者（尤其是 Y Combinator）仍然需要你们共同认识的人的介绍，他们才会认真对待你。\n\n坚持使用简洁的条款（复杂的条款会累积并在每一轮投资中变得更糟），但不要过度优化，特别是在估值方面。估值是可以量化竞争的东西，所以创始人喜欢争夺最高估值。但中等估值并不重要。\n\n第一笔资金最难获得，所以应该集中精力获取，这通常意味着你需要将注意力集中在最喜欢你的人身上。始终要有多个计划，其中一个是不筹集任何资金，根据兴趣灵活调整——如果你能更好地使用更多的资金，并且它在合理的条款下可用，那么请考虑接受。\n\n擅长推销的一个重要秘诀是，让你的故事尽可能清晰、易懂。当然，最重要的秘诀是，你真的需要有一个好公司。关于推销内容有很多想法，但至少你需要包括：使命、问题、产品\/服务、商业模式、团队、市场和市场增长率、财务。\n\n要记住，每一轮筹资的标准都会更高。如果你在种子轮时只是一个引人注目的演讲者，那么在 A 轮筹资时可能就没有效果了。\n\n好的投资者确实能带来很大的价值。坏的投资者会带来很大的负面影响。大多数投资者处于中间地位，既没有增加也没有减少。只投资少量资金的投资者通常不会对你有任何帮助（即，要警惕聚会轮投资）。\n\n优秀的董事会成员是公司外部驱动力中最好的一种，除了用户之外，外部驱动力比大多数创始人想象的更有价值。愿意接受较低的估值，以获取愿意积极参与的优秀董事会成员。\n\n我认为[Paul Graham 的这篇文章](http:\/\/paulgraham.com\/fr.html) 是关于筹款的最好的文章。\n\n## 结束语\n\n要记住，每一个伟大的想法都有至少一千人有。其中有一个人会成功。区别在于执行。这是一种磨磨蹭蹭的过程，每个人都希望有其他方式将“想法”转化为“成功”，但是还没有人找到方法。\n\n所以你需要的就是一个伟大的想法，一个伟大的团队，一个伟大的产品，以及伟大的执行力。那么简单！;)\n', '\/trans\/startup-playbook\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">创业指南关键点：快速解雇有毒员工，忽略竞争对手；尽快实现“拉面盈利”；筹资时要有好公司，不要失去节俭精神。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/implementing-gitops-and-canary-deployment-with-argo-project-and-istio/">使用 Argo 项目 Istio 及 SkyWalking 实现 GitOps 和金丝雀部署</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/10/21</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('使用 Argo 项目 Istio 及 SkyWalking 实现 GitOps 和金丝雀部署', '本文讨论如何使用 Kubernetes Deployment、Argo 项目和 Istio 来实现 GitOps 和金丝雀部署。', '\n{{\u003ccallout note 关于本文\u003e}}\n\n本文根据笔者在 KubeCon\u0026CloudNativeCon China 2023 的通话仓活动 [IstioCon China](https:\/\/istioconchina2023.sched.com\/event\/1RoVG\/nano-argo-istio-re-skywalking-jiong-gitops-reqi-zha-yao-pi-how-to-achieve-the-perfect-union-of-gitops-and-observability-with-argo-istio-and-skywalking-jimmy-song-tetrate) 上的分享整理而成，原标题为《如何在 Argo、Istio 和 SkyWalking 中实现 GitOps 和可观测性的完美结合》。\n\n{{\u003c\/callout\u003e}}\n\n云原生应用的发展导致开发左移，应用迭代频率更高，这就催生了 GitOps 的需求。本文将介绍如何使用 Argo 项目，包括 ArgoCD 和 Argo Rollouts，通过 Istio 实现 GitOps 和金丝雀部署。文中还有一个演示，展示了如何基于 Tetrate Service Express（也适用于 Tetrate Service Bridge）提供的 Istio 环境实现 GitOps。\n\n本文 demo 的部署架构图如图 1 所示。如果您已经熟悉本文介绍的部署策略和 Argo 项目，可以直接跳到 [demo 部分](#demo)。\n\n![图 1：在 TSE\/TSB 中使用 Istio 和 Argo 项目实现 GitOps 和金丝雀发布的架构图](f1.svg)\n\n## 部署策略 {#deployment-strategy}\n\n首先，我想简单介绍一下 Argo Rollouts 支持的两种部署策略，可以实现零停机部署。\n\n蓝绿部署和金丝雀部署的步骤如图 2 所示。\n\n![Figure 2: Steps of blue-green deployment and canary deployment](f2.svg)\n\n- 蓝绿部署是一种在单独的环境中并行部署新版本应用程序而不影响当前生产环境的策略。在蓝绿部署中，当前的生产环境称为“蓝色环境”，部署新版本应用程序的环境称为“绿色环境”。一旦绿色环境被认为稳定并通过测试，流量将逐渐从蓝色环境切换到绿色环境，让用户逐步接入新版本。如果切换过程中出现问题，可以快速回滚到蓝环境，最大程度地减少对用户的影响。蓝绿部署的优点是可以提供高可用性和零停机部署。\n- 金丝雀部署是一种逐步将新版本或功能引入生产环境的策略。在金丝雀部署中，新版本或新功能首先部署到生产环境中的少数用户，称为“金丝雀用户”。通过监控金丝雀用户的反馈和性能指标，开发团队可以评估新版本或功能的稳定性和可靠性。如果没有问题，可以逐步将更多用户纳入金丝雀部署中，直到所有用户都使用新版本。如果发现问题，可以快速回滚或修复，避免对整个用户群造成负面影响。金丝雀部署的优点是可以快速发现问题并在影响较小的范围内进行调整。\n\n蓝绿部署和金丝雀部署的主要区别在于部署方式和变更规模。蓝绿部署是将整个应用部署在新的环境中，然后进行切换，适合大规模的变更，比如整个应用的重大升级。金丝雀部署逐渐引入新版本或功能，适合小规模更改，例如添加或修改单个功能。\n\n从应用场景来看，蓝绿部署适合对高可用、零宕机部署要求较高的系统。在部署大规模变更时，蓝绿部署可以保证稳定性和可靠性，并且可以快速回滚以应对突发情况。金丝雀部署适合需要快速验证新功能或版本的系统。通过逐步引入变更，可以及早发现问题并进行调整，尽量减少对用户的影响。\n\n## Kubernetes Deployment 的发布策略 {#kuberentes-deployment}\n\n在 Kubernetes 中，Deployment 资源对象是管理应用程序部署和更新的主要工具之一。部署提供了一种声明式方式来定义应用程序的预期状态，并通过控制器的功能实现发布策略。Deployment 的架构如图 3 所示，其中彩色方块代表不同版本的 Pod。\n\n![图 3：Kubernetes Deployment 架构图](f3.svg)\n\n发布策略可以在 Deployment 的 spec 字段中配置。以下是一些常见的发布策略选项：\n\n1. ReplicaSet 的管理：Deployment 使用 ReplicaSet 来创建和管理应用程序的副本。可以通过设置 \u0060spec.replicas\u0060 字段来指定所需的副本数量。在发布过程中，Kubernetes 控制器保证新版本 ReplicaSet 的副本数量在创建时逐渐增加，旧版本 ReplicaSet 的副本数量在删除时逐渐减少，实现平滑切换。\n2. 滚动更新策略：部署支持多种滚动更新策略，可以通过设置 \u0060spec.strategy.type\u0060 字段来选择。常见政策包括：\n   - \u0060RollingUpdate\u0060：默认策略以一定的时间间隔逐渐更新副本。不同时可用的副本数量以及额外可用的副本数量可以通过设置 \u0060spec.strategy.rollingUpdate.maxUnavailable\u0060 和 \u0060spec.strategy.rollingUpdate.maxSurge\u0060 字段来控制。\n   - \u0060ReCreate\u0060：该策略在更新过程中首先删除旧版本的所有副本，然后创建新版本的副本。此策略将导致应用程序在更新期间暂时不可用。\n3. 版本控制：Deployment 通过 \u0060spec.template.metadata.labels\u0060 字段为每个版本的 ReplicaSet 设置标签，以便控制器准确跟踪和管理。这样 ReplicaSet 的多个版本可以共存，并且可以精确控制每个版本的副本数量。\n\n通过使用这些配置选项，Deployment 可以实现不同的发布策略。更新 Deployment 对象的 spec 字段可以触发新版本的发布。Kubernetes 控制器会根据指定的策略自动处理副本的创建、更新和删除，以实现平滑的应用更新和部署策略。\n\n## 使用 ArgoCD 实施 GitOps {#argocd-gitops}\n\n可以使用 Deployment 来手动管理发布策略，但要实现自动化，我们还需要使用 ArgoCD 等 GitOps 工具。\n\nArgoCD 是一个基于 GitOps 的持续交付工具，用于自动化和管理 Kubernetes 应用程序的部署。它为提高应用程序部署的效率和可靠性提供了一些关键的帮助。\n\n以下是 ArgoCD 为 Kubernetes 应用程序部署提供的一些帮助：\n\n1. **声明式配置**：ArgoCD 使用声明式方式定义应用程序的预期状态，并将应用程序配置存储在 Git 存储库中。通过版本控制和持续集成\/持续交付 (CI\/CD) 流程，可以轻松跟踪和管理应用程序配置更改。\n2. **持续部署**：ArgoCD 可以监控 Git 存储库中的配置变化，并自动将应用程序部署到 Kubernetes 环境。提供可定制的同步策略，自动触发应用部署和更新，实现持续部署。\n3. **状态比较和自动修复**：ArgoCD 定期检查应用程序的当前状态并将其与预期状态进行比较。如果发现不一致，它会自动尝试修复并将应用程序恢复到所需状态，以确保预期状态与实际状态的一致性。\n4. **多环境管理**：ArgoCD 支持管理多个 Kubernetes 环境，例如开发、测试和生产环境。可以轻松地在不同环境之间部署和同步应用配置，确保一致性和可控性。\n\n与 Deployment 资源对象相比，ArgoCD 提供了更高级的功能和工作流程，补充了原生 Kubernetes 资源对象的功能：\n\n- **基于 GitOps 的配置管理**：ArgoCD 将应用程序配置存储在 Git 存储库中，从而实现基于 GitOps 的配置管理。这种方法确保配置更改是可跟踪、可审计的，并且可以与现有的 CI\/CD 管道集成。\n\n- **自动化部署和持续交付**：ArgoCD 可以自动检测 Git 存储库中的配置更改并将应用程序部署到 Kubernetes 环境，从而实现自动化部署和持续交付。\n\n- **状态管理和自动恢复**：ArgoCD 持续监控应用程序的状态并将其与预期状态进行比较。如果检测到不一致，它会自动恢复并确保应用程序状态与预期状态保持一致。\n\n## 使用 Istio 实现细粒度的流量路由 {#istio-routing-traffic}\n\n虽然 ArgoCD 可以实现 GitOps，但它本质上是在 Kubernetes 部署上运行并通过副本数量控制流量路由。为了实现细粒度的流量路由，使用了 Istio 等服务网格。\n\nIstio 通过以下方法实现更细粒度的流量路由和应用发布：\n\n**VirtualService**：Istio 使用 VirtualService 来定义流量路由规则。通过配置 VirtualService，可以根据请求头、路径、权重等请求属性对流量进行路由和分发，将请求定向到不同的服务实例或版本。\n\n**DestinationRule**：Istio 的 DestinationRule 用于定义服务版本策略和负载均衡设置。通过指定不同版本服务实例之间不同的流量权重，可以实现金丝雀发布、蓝绿部署等高级应用发布策略。\n\n**流量控制和策略**：Istio 提供了丰富的流量控制和策略能力，如流量限制、故障注入、超时设置、重试机制等，这些功能帮助应用程序实现更高级别的负载均衡、容错和可靠性要求。\n\n与 ArgoCD 和 Kubernetes Deployment 对象相比，Istio 在应用部署方面提供了以下优势：\n\n**细粒度的流量路由控制**：Istio 提供了更丰富的流量路由能力，可以根据多种请求属性进行灵活的路由和分发，从而实现更细粒度的流量控制和管理。\n\n**高级发布策略支持**：Istio 的 DestinationRule 可以指定不同版本服务实例之间的流量权重，支持金丝雀发布、蓝绿部署等高级应用发布策略。这使得应用程序的版本管理和发布更加灵活可控。\n\n**强大的流量控制和策略能力**：Istio 提供了丰富的流量控制和策略能力，如流量限制、故障注入、超时设置、重试机制等，这些功能帮助应用程序实现更高级别的负载均衡、容错和可靠性要求。\n\n将 Istio 与 Argo Rollouts 相结合，可以充分发挥 Istio 细粒度流量路由的优势。现在让我们一起进行演示。在我们的演示中，我们将使用 TSE 提供的 Kubernetes 和 Istio 环境，使用 ArgoCD 实现 GitOps，并使用 Argo Rollouts 实现金丝雀发布。\n\n## Demo\n\n我们的演示中使用的软件版本是：\n\n-  Kubernetes v1.24.14\n-  Istio v1.15.7\n-  Argo CD v2.7.4\n-  Argo 发布 v1.5.1\n-  TSE Preview 2\n\n我们将使用 Istio 的 VirtualService 和 DestinationRule 来实现基于 Subset 的流量分组路由，并使用 ArgoCD Rollouts 进行渐进式发布。\n\n### 部署 ArgoCD 和 Argo Rollouts {#deployment-argocd-and-rollouts}\n\n我提前创建了一个 Kubernetes 集群并将其添加到 TSE 中，TSE 会自动为集群安装 Istio 控制平面。我们还需要安装 ArgoCD 和 Argo Rollouts：\n\n\u0060\u0060\u0060bash\n# Install ArgoCD\nkubectl create namespace argocd\nkubectl apply -n argocd -f https:\/\/raw.githubusercontent.com\/argoproj\/argo-cd\/stable\/manifests\/install.yaml\n\n# Install ArgoCD CLI on macOS\nbrew install argocd\n\n# Change the service type of argocd-server to LoadBalancer\nkubectl patch svc argocd-server -n argocd -p \u0027{\u0022spec\u0022: {\u0022type\u0022: \u0022LoadBalancer\u0022}}\u0027\n\n# Get the ArgoCD UI address\nARGOCD_ADDR=$(kubectl get svc argocd-server -n argocd -o jsonpath=\u0027{.status.loadBalancer.ingress[0].hostname}\u0027)\n\n# Login using ArgoCD CLI, see https:\/\/argo-cd.readthedocs.io\/en\/stable\/getting_started\/#4-login-using-the-cli to get password\nargocd login $ARGOCD_ADDR --skip-test-tls --grpc-web --insecure\n\n# Install Argo Rollouts\nkubectl create namespace argo-rollouts\nkubectl apply -n argo-rollouts -f https:\/\/github.com\/argoproj\/argo-rollouts\/releases\/download\/latest\/install.yaml\n\n# Install rollouts plugin on macOS\ncurl -LO https:\/\/github.com\/argoproj\/argo-rollouts\/releases\/download\/v1.5.0\/kubectl-argo-rollouts-darwin-amd64\nchmod \u002bx .\/kubectl-argo-rollouts-darwin-amd64\nsudo mv .\/kubectl-argo-rollouts-darwin-amd64 \/usr\/local\/bin\/kubectl-argo-rollouts\n\u0060\u0060\u0060\n\n该功能不适用于 TSE Bridge Mode，因此我们将使用 TSE Direct Mode 来实现渐进式发布。\n\n{{\u003ccallout note \u0022💡什么是桥接模式和直接模式？\u0022\u003e}}\n\n\n直接模式和桥接模式是 TSE 中控制平面下发配置的两种模式。适用于流量、安全、网关组配置模式。BRIDGED 模式是一种极简模式，允许用户使用 Tetrate 特定的 API 快速配置服务网格中最常用的功能，而 DIRECT 模式为高级用户提供更大的灵活性，允许他们直接使用 Istio API 进行配置。\n\n{{\u003c\/callout\u003e}}\n\n接下来，部署 Rollouts Dashboard：\n\n\u0060\u0060\u0060bash\ngit clone https:\/\/github.com\/argoproj\/argo-rollouts.git\nkustomize build manifests\/dashboard-install|kubectl apply -n argo-rollouts -f -\nkubectl port-forward svc\/argo-rollouts-dashboard -n argo-rollouts 3100:3100\n\u0060\u0060\u0060\n\n您现在可以通过 \u003chttps:\/\/localhost:3100\/rollouts\/\u003e 访问 Rollouts 仪表板。\n\n### 部署 Bookinfo 应用 {#bookinfo}\n\n我们已经为 Bookinfo 应用程序准备了配置文件（保存在 [tse-gitops-demo](https:\/\/github.com\/tetrateio\/tse-gitops-demo\/) 存储库中），您也可以将其 fork 到您自己的帐户并将其替换为您自己的存储库。运行以下命令来部署 Bookinfo 应用程序：\n\n\u0060\u0060\u0060bash\nargocd app create bookinfo-app --repo https:\/\/github.com\/tetrateio\/tse-gitops-demo.git --path application --dest-server https:\/\/kubernetes.default.svc --dest-namespace bookinfo --sync-policy automated\n\u0060\u0060\u0060\n\n注意：我们在 [\u0060reviews\u0060 部署](https:\/\/github.com\/tetrateio\/tse-gitops-demo\/blob\/main\/application\/bookinfo.yaml#L151)中将 \u0060replicas\u0060 设置为 \u00600\u0060 ，因为我们将创建 Argo Rollouts 来操纵 \u0060reviews\u0060 的实例数量服务。如果这里设置为非零正整数，我们将无法实现金丝雀部署。\n\n现在您可以在浏览器中打开 ArgoCD UI，如图 4 所示。\n\n![图 4：ArgoCD 用户界面](f4.png)\n\n如果您发现应用程序状态不同步，可以运行以下命令或单击 UI 中的 SYNC 按钮。\n\n\u0060\u0060\u0060bash\nargocd app sync bookinfo-app\n\u0060\u0060\u0060\n\n## 使用 Istio 实施细粒度流量管理 {#istio-fine-grain-traffic-management}\n\n首先，我们使用 Argo CD 创建 Istio 相关的资源对象：\n\n\u0060\u0060\u0060bash\nargocd app create bookinfo-tse-conf --repo https:\/\/github.com\/tetrateio\/tse-gitops-demo.git --path argo\/tse --dest-server https:\/\/kubernetes.default.svc --dest-namespace bookinfo --sync-policy automated --self-heal\n\n# Check the creation status\nargocd app get bookinfo-tse-conf\n\u0060\u0060\u0060\n\n### 将 Deployment 转换为 Rollout {#convert-deployment-to-rollout}\n\n假设我们要发布新版本的 \u0060reviews\u0060 服务。为了实现零停机更新，我们将使用金丝雀部署，具体步骤如下：\n\n1. 将 \u0060reviews\u0060 Deployment 的 \u0060replicas\u0060 减少为 0；\n2. 创建引用先前在 Bookinfo 应用程序中部署的 \u0060reviews\u0060 Deployment 的 Rollout；\n3. 将流量发送到 \u0060reviews\u0060 服务以实现自动金丝雀部署进度。\n\n您可以在 GitHub 上查看本演示中使用的 Rollout 和 AnalysisTemplate 配置。运行以下命令来部署 \u0060reivews-rollout\u0060 ：\n\n\u0060\u0060\u0060bash\nargocd app create reviews-rollout --repo https:\/\/github.com\/tetrateio\/tse-gitops-demo.git --path argo\/rollout --dest-server https:\/\/kubernetes.default.svc --dest-namespace bookinfo --sync-policy automated\n\u0060\u0060\u0060\n\n注意：我们可以使用 \u0060argocd\u0060 命令来部署或使用 \u0060kubectl apply\u0060 。推荐使用 \u0060argocd\u0060 ，因为您可以同时在 ArgoCD UI 和 Argo Rollouts Dashboard 中查看部署状态，并使用 \u0060argocd\u0060 命令管理部署。\n\n在 Argo Rollouts Dashboard 中查看 \u0060reviews\u0060 部署的状态，并使用以下命令将流量发送到 \u0060reviews\u0060 服务一段时间：\n\n\u0060\u0060\u0060bash\nexport GATEWAY_HOSTNAME=$(kubectl -n bookinfo get service tsb-gateway-bookinfo -o jsonpath=\u0027{.status.loadBalancer.ingress[0].hostname}\u0027)\nwhile 1;do curl -H \u0022Host: bookinfo.tetrate.com\u0022 http:\/\/$GATEWAY_HOSTNAME\/api\/v1\/products\/1\/reviews;sleep 3;done\n\u0060\u0060\u0060\n\n您将在输出中看到来自具有不同 rollouts-pod-template-hash 标签的 pod 的响应，这证明金丝雀部署是有效的。大约 10 分钟后，您看到的 Argo Rollouts 仪表板将如图 5 所示。\n\n![图 5：Argo Rollouts 仪表板](f5.png)\n\n从图 5 中我们可以看到金丝雀部署进展顺利，已经到了第三步。这是因为 \u0060reviews\u0060 服务的 \u0060apdex\u0060 （应用性能指数）指标正常。您可以[使用 Postman 向 SkyWalking 提交 GraphQL 查询](https:\/\/tetrate.io\/blog\/how-to-use-graphql-to-query-observability-data-from-skywalking-with-postman\/)来验证这一点，如图 6 所示。\n\n![图 6：使用 Postman 将 GraphQL 查询提交到 SkyWalking](f6.png)\n\n我们构建的 GraphQL 查询语句如下：\n\n\u0060\u0060\u0060graphql\nquery ReadMetricsValues {\n    readMetricsValues(condition: {\n    name: \u0022service_apdex\u0022, entity: {scope: Service, serviceName: \u0022canary|reviews|bookinfo|cluster-1|-\u0022, normal: true}\n  }, duration: {\n    start: \u00222023-07-13 0812\u0022,\n    end: \u00222023-07-13 0813\u0022,\n    step: MINUTE\n  }) {\n        label\n        values {\n            values {\n                id\n                value\n            }\n        }\n    }\n}\n\u0060\u0060\u0060\n\n该语句从 UTC \u00602023-07-13 8:12\u0060 到 \u00602023 8:13\u0060 查询 \u0060canary|reviews|bookinfo|cluster-1|-\u0060 服务的 \u0060apdex\u0060 指标，持续两分钟，得到以下结果：\n\n\u0060\u0060\u0060json\n{\n    \u0022data\u0022: {\n        \u0022readMetricsValues\u0022: {\n            \u0022label\u0022: null,\n            \u0022values\u0022: {\n                \u0022values\u0022: [\n                    {\n                        \u0022id\u0022: \u0022service_apdex_202307130812_Y2FuYXJ5fHJldmlld3N8Ym9va2luZm98Y2x1c3Rlci0xfC0=.1\u0022,\n                        \u0022value\u0022: 10000\n                    },\n                    {\n                        \u0022id\u0022: \u0022service_apdex_202307130813_Y2FuYXJ5fHJldmlld3N8Ym9va2luZm98Y2x1c3Rlci0xfC0=.1\u0022,\n                        \u0022value\u0022: 10000\n                    }\n                ]\n            }\n        }\n    }\n}\n\u0060\u0060\u0060\n\n\u0060apdex\u0060 指标的值大于 9900（AnalysisTemplate 的 \u0060successCondition\u0060 中配置的阈值），因此 Rollouts 会顺利进行。您还可以在 Argo Rollouts Dashboard 上单击“手动升级”来升级它，或运行以下命令：\n\n\u0060\u0060\u0060bash\nkubectl argo rollouts promote reviews-rollout -n bookinf\n\u0060\u0060\u0060\n\n## 清理 {#clean-up}\n\n删除已部署的 ArgoCD 应用程序和 Rollout：\n\n\u0060\u0060\u0060bash\nargocd app delete -y reviews-rollout\nargocd app delete -y bookinfo-tse-conf\nargocd app delete -y bookinfo-app\n\u0060\u0060\u0060\n\n## Argo Rollouts 原理 {#rollouts-principle}\n\n与 Istio 集成时，Argo Rollouts 支持基于 VirtualService 和 Subset 的流量拆分，如图 7 所示。\n\n![图 7：Argo Rollouts 使用 Istio 进行流量分配](f7.svg)\n\n下表提供了这两种流量分段方法的详细比较。\n\n| 类型           | 适用场景                             | 资源对象                                          | 原则                                                         |\n| :------------- | :----------------------------------- | :------------------------------------------------ | :----------------------------------------------------------- |\n| 主机级流量分割 | 适用于根据主机名访问不同版本的服务； | 2 个服务、1 个虚拟服务、1 个部署；                | Rollout 将 rollouts-pod-template-hash 标签注入到 ReplicaSet 中，并通过更新 Service 中的选择器来选择带有这些标签的 pod； |\n| 子集级流量分割 | 适用于根据标签访问不同的服务；       | 1 个服务、1 个虚拟服务、1 个目标规则和 1 个转出； | Rollout 将 rollouts-pod-template-hash 标签注入到 ReplicaSet 中，并通过更新 DestinationRule 中的选择器来选择具有这些标签的 pod； |\n\n本演示中使用基于子集的流量分割，Argo 不断推出：\n\n- 修改 VirtualService \u0060spec.http[].route[].weight\u0060 以匹配当前所需的金丝雀权重\n- 修改 DestinationRule \u0060spec.subsets[].labels\u0060 以包含 canary 和稳定 ReplicaSet 的 \u0060rollouts-pod-template-hash\u0060 标签\n\n请访问 [Argo Rollouts 文档](https:\/\/argo-rollouts.readthedocs.io\/en\/stable\/features\/traffic-management\/istio\/)，了解有关使用 Istio 进行流量管理的详细信息。\n\n## 总结 {#summary}\n\n本文介绍如何使用 Argo 项目和 Istio 实现 GitOps 和金丝雀部署。首先我们使用 ArgoCD 实现 GitOps，然后使用 Argo Rollout 和 SkyWalking 实现自动化金丝雀发布。从 demo 中我们可以看到 TSE 部署的 Istio 与开源版本完全兼容。TSE 有许多功能值得探索，请访问 [Tetrate 网站](https:\/\/tetrate.io\/tetrate-service-express\/)了解更多信息。\n', '\/blog\/implementing-gitops-and-canary-deployment-with-argo-project-and-istio\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">本文讨论如何使用 Kubernetes Deployment、Argo 项目和 Istio 来实现 GitOps 和金丝雀部署。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/run-gui-applications-as-containers-with-x11docker/">[译] 如何在 Docker 容器中运行 GUI 应用程序</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/09/19</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/kubernetes"> 
             Kubernetes
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/run-gui-applications-as-containers-with-x11docker/" target="_blank" rel="noopener">原文</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('如何在 Docker 容器中运行 GUI 应用程序', '本文介绍了如何在 Docker 容器中运行 GUI 应用程序。通过使用 x11docker 应用程序，可以轻松启动带有桌面环境的 GUI 容器，并提供了许多功能，如 GPU 硬件加速、声音、剪贴板共享等。文章还提供了安装 Docker 运行时引擎和 x11docker 的详细步骤，并演示了使用 VLC 媒体播放器在容器中运行 GUI 应用程序的示例。', '\n作为开发人员，您可能需要使用 GUI 容器进行工作。如果是这种情况，您会很快发现，传统的 Docker 运行时引擎并不支持运行 GUI 应用程序（除非它们是基于 Web 的类型）。当您想要开发容器化的 GUI 应用程序时，您该怎么办呢？\n\n幸运的是，有许多第三方应用程序可以在桌面上轻松启动 GUI 容器。正如您可能预期的那样，这需要一个桌面环境（否则，您将在更传统的基于服务器的设置上进行开发）。其中一个应用程序叫做 [x11docker](https:\/\/github.com\/mviereck\/x11docker)。顾名思义，此应用程序与 Linux X 显示服务器配合使用（这意味着您需要一个 Linux 发行版才能使其正常工作）。\n\nx11docker 应用程序包括以下功能：\n\n- GPU 硬件加速\n- PulseAudio 或 ALSA 声音\n- 剪贴板共享\n- 打印机和摄像头访问\n- 持久的主目录\n- Wayland 支持\n- 语言区域设置创建\n- 容器内的多个 init 系统和 DBus\n- 支持多个容器运行时和后端（包括 Podman）\n\n您可能会问：“X11 不安全吗？”是的，确实。幸运的是，x11docker 通过使用多个 X 服务器来避免 X 服务器泄漏。因此，您可以放心使用该工具，而不必担心会暴露自己、系统或容器给典型的 X11 服务器弱点。\n\n需要记住的一件事是，x11docker 创建了一个非特权容器用户。该用户的密码为 x11docker，并限制了容器的功能。因此，某些应用程序可能无法按预期方式运行。例如，当尝试从容器内运行 Tor 浏览器时，它无法访问 \/dev\/stdout，这意味着容器将无法运行。但并不是所有容器都是如此。我将用 VLC 媒体播放器进行演示，该播放器可以按预期运行。\n\n接下来，我将向您展示如何在运行中的基于 Ubuntu 的桌面操作系统实例上安装 x11docker。当然，首先您必须安装 Docker 运行时引擎。为此，我将向您展示两种不同的方法。\n\n准备好了吗？我们开始吧。\n\n## 所需的工具\n\n正如我已经提到的，您需要运行中的基于 Ubuntu 的 Linux 桌面发行版实例。您还需要一个具有 sudo 权限的用户。就这些。\n\n## 安装 Docker\n\n首先，我们将使用传统的方法安装 Docker 运行时引擎。首先要做的是使用以下命令将官方 Docker GPG 添加到系统中：\n\n\u0060\u0060\u0060bash\ncurl -fsSL \u003chttps:\/\/download.docker.com\/linux\/ubuntu\/gpg\u003e | sudo gpg --dearmor -o \/usr\/share\/keyrings\/docker-archive-keyring.gpg\n\u0060\u0060\u0060\n\n接下来，我们必须添加 Docker 仓库，以便安装软件。使用以下命令完成此操作：\n\n\u0060\u0060\u0060bash\necho \u0022deb [arch=amd64 signed-by=\/usr\/share\/keyrings\/docker-archive-keyring.gpg] \u003chttps:\/\/download.docker.com\/linux\/ubuntu\u003e $(lsb_release -cs) stable\u0022 | sudo tee \/etc\/apt\/sources.list.d\/docker.list \u0026gt; \/dev\/null\n\u0060\u0060\u0060\n\n添加仓库后，我们将使用以下命令安装一些依赖项：\n\n\u0060\u0060\u0060bash\nsudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release -y\n\u0060\u0060\u0060\n\n使用以下命令更新 apt：\n\n\u0060\u0060\u0060bash\nsudo apt-get update\n\u0060\u0060\u0060\n\n现在，我们可以使用以下命令安装 Docker：\n\n\u0060\u0060\u0060bash\nsudo apt-get install docker-ce docker-ce-cli containerd.io -y\n\u0060\u0060\u0060\n\n为了能够在不使用 *sudo* 的情况下运行 Docker 命令（这可能存在安全风险），请使用以下命令将您的用户添加到 docker 用户组中：\n\n\u0060\u0060\u0060bash\nsudo usermod -aG docker $USER\n\u0060\u0060\u0060\n\n注销并重新登录以使更改生效。\n\n如果您希望采用快速方式，可以使用以下命令安装 Docker：\n\n\u0060\u0060\u0060bash\nsudo apt-get install curl wget uidmap -y\nwget -qO- https:\/\/get.docker.com\/ | sudo sh\n\u0060\u0060\u0060\n\n要能够以无特权方式运行 Docker，请执行以下命令：\n\n\u0060\u0060\u0060bash\ndockerd-rootless-setuptool.sh install\n\u0060\u0060\u0060\n\n## 如何安装 x11docker\n\n在安装 x11docker 之前，我们必须安装一些依赖项。可以使用以下命令完成此操作：\n\n\u0060\u0060\u0060bash\nsudo apt-get install xpra xserver-xephyr xinit xauth xclip x11-xserver-utils x11-utils -y\n\u0060\u0060\u0060\n\n接下来，使用以下命令安装 x11docker：\n\n\u0060\u0060\u0060bash\ncurl -fsSL https:\/\/raw.githubusercontent.com\/mviereck\/x11docker\/master\/x11docker | sudo bash -s -- --update\n\u0060\u0060\u0060\n\n然后，您可以使用以下命令更新 x11docker：\n\n\u0060\u0060\u0060bash\nsudo x11docker --update\n\u0060\u0060\u0060\n\n## 如何使用 x11docker\n\n安装了 x11docker 之后，就可以开始测试了。让我们使用 VLC 应用程序容器进行测试。首先，使用以下命令拉取镜像：\n\n\u0060\u0060\u0060bash\ndocker pull jess\/vlc\n\u0060\u0060\u0060\n\n拉取镜像后，使用以下命令（借助 x11docker）运行 VLC：\n\n\u0060\u0060\u0060bash\nx11docker --pulseaudio --share=$HOME\/Videos jess\/vlc\n\u0060\u0060\u0060\n\n您应该会看到 VLC 窗口打开，准备好供使用（图 1）。它的速度比直接安装在您的桌面上要慢一些，但除此之外，它应该按预期工作。\n\n![](docker.jpg)\n\n当然，如果您是开发人员，这对您帮助不大，因为您想要开发自己的容器。您可以始终创建要使用的映像，对其进行标记，将其推送到您选择的存储库，使用 docker pull 命令将其拉到开发系统上，然后使用 x11docker 部署容器。\n\n就是这样。现在，您可以通过 x11docker 在 Docker 容器中运行 GUI 应用程序了。借助自己的图像部署自己的定制容器，看看它的工作原理。\n', '\/trans\/run-gui-applications-as-containers-with-x11docker\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">本文介绍了如何在 Docker 容器中运行 GUI 应用程序。通过使用 x11docker 应用程序，可以轻松启动带有桌面环境的 GUI 容器，并提供了许多功能，如 GPU 硬件加速、声音、剪贴板共享等。文章还提供了安装 Docker 运行时引擎和 x11docker 的详细步骤，并演示了使用 VLC 媒体播放器在容器中运行 GUI 应用程序的示例。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/wasm-vs-kubernetes/">[译] WebAssembly 能够取代 Kubernetes 吗？探索其优势和限制</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/09/11</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/kubernetes"> 
             Kubernetes
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/webassembly/yes-webassembly-can-replace-kubernetes/" target="_blank" rel="noopener">原文</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('WebAssembly 能够取代 Kubernetes 吗？探索其优势和限制', 'WebAssembly 可以作为一种部署应用程序的方式，可以在服务器操作系统上运行，且在许多不同的硬件环境中表现出色。', '\n摘要：WebAssembly 可以作为一种部署应用程序的方式，可以在服务器操作系统上运行，且在许多不同的硬件环境中表现出色。与 Kubernetes 相比，WebAssembly 的优点在于简易性和安全性。但是，Kubernetes 始终有其用途，它将始终用于编排微服务和容器。因此，对于某些用例来说，WebAssembly 可以替代 Docker 和容器，但是在高度分布式的云原生环境中，使用 WebAssembly 来编排容器和微服务程度上与 Kubernetes 相同的程度是不可能的。\n\n------\n\n是的，WebAssembly 可以解决 Kubernetes 的一些问题。\n\nWebAssembly 或 Wasm 被证明是一种在 Web 浏览器上运行代码的非常实用的方式，它可以作为编译器。它已经作为一种语言运行得非常好，以至于世界万维网联盟（W3C）在 2019 年将其命名为 Web 标准，成为第四个 Web 标准，与 HTML、CSS 和 JavaScript 一起。\n\n主要的 Web 浏览器，包括 Mozilla、Chrome、Internet Explorer 等，都兼容 Wasm，用于编写代码和创建 Web 浏览器应用程序的使用越来越普遍。除了 Web 工作马车 JavaScript 外，Wasm 还可以容纳其他语言，包括 Go、.NET、C\u002b\u002b、Java、PHP、Rust 和 Python。\n\nAdobe 依赖于 Wasm\/WASI 平台在浏览器上直接运行 C\u002b\u002b 代码，这是其中一个更有趣的用例。这使得用户可以在浏览器上直接运行 Adobe 的 Photoshop 和 Acrobat，从而无需在用户的计算机上下载这些软件工具进行工作。\n\n最终，开发人员意识到 Wasm 也可以在服务器操作系统上运行，现在它的使用范围扩展到硬件平台。它在许多不同的硬件环境中表现出色，从服务器端到边缘部署和物联网设备，或者任何可以直接在 CPU 上运行代码的地方。代码打包在整洁的 Wasm 可执行文件中，可以将其与容器或甚至可以与较少配置的代码和目标运行的迷你操作系统进行比较。无论在哪里部署代码，应用程序都比仅限于 Web 浏览器环境更加广泛。\n\n在许多方面，Wasm 的功能可以与一个“大杂烩”多语言编译器相比。然而，与编译器相比，同一二进制可执行文件的 Wasm 可以针对多个平台进行目标和运行，而无需在 Wasm 代码和目标设备上进行配置。\n\n因此，与编译器相比，Wasm 在完美针对多个目标运行二进制可执行文件时显然比较优越。而在这种情况下，单个二进制可执行文件可以针对多个目标运行，而无需重新配置：这就是 Wasm 的优美之处。\n\n“Wasm 终于让我们在不涉及开发人员的情况下在服务器、云和边缘设备之间移动代码。这将最终结束开发人员花费大量时间担心调整他们的代码以及为不同的目标平台提供支持的时代，”Enterprise Management Associates（EMA）的分析师 Torsten Volk 告诉 The New Stack。“Wasm 的工作是在所有这些平台上提供一致的运行时。”\n\n因此，Wasm 可以在某些情况下为 Kubernetes 提供很好的替代方案。与 Kubernetes 相比的主要优点是：\n\n**简易性**。在部署应用程序时，即使将应用程序分发到不同的终端，也会有许多明显缺少的步骤。Cosmonic 的 PaaS 版本可以用几个命令行在图形界面中部署应用程序。当使用 Fermyon 和 Fastly 的 Compute@Edge 时，情况也是如此。\n\n**安全性**。在 Kubernetes 这种高度分布式的环境中，安全性是一个真正的问题，并且问题点的详尽列表太长，这里不再赘述。微服务之间的互连性意味着，在一个 Pod 中有数百个入口点中获得访问权限的攻击者可能会对组织的整个基础架构造成严重破坏。[秘密管理](https:\/\/thenewstack.io\/kubernetes-secrets-management-3-approaches-9-best-practices\/)是另一个问题，并且与名称一样，在容器中指定谁可以访问它们也存在困难。\n\nWasm 的可移植性和一致性可以使安全性和合规性更易于管理（再次强调，它在 CPU 级别的二进制格式中运行）。此外，Wasm 结构的简单性意味着代码在几乎直接到达端点的封闭沙箱环境中发布。Wasm 并非没有漏洞可以利用。只是相对于 Kubernetes，它的漏洞利用可能性更少。\n\n## 但它们并不是同一件事情\n\nWasm 提供了巨大的机会，并且可能会作为一种部署应用程序的方式，在未来几个月和几年中，我们将看到供应商变得更加有创造力，以便用户可以利用它。相比之下，那些预测 Wasm 最终将吃掉 Kubernetes 的午餐并完全取代它的人，可以说是错过了重点。不可能说会发生什么，以及其他用于在云环境中部署和管理高度分布式应用程序的技术可能最终取代 Kubernetes。但是，它高度不可能是 Wasm。\n\n这是因为 Kubernetes 始终有其用途。它将始终用于编排微服务，以及当然还有容器。它也可以被认为实际上就是 Wasm 将在其中运行的东西，并且其支持者已经说过 Wasm 非常适合在 Kubernetes 环境中运行。\n\n“[Wasm 是为开发人员提供无需编写和维护大量基础设施 YAML 的无服务器运行时](https:\/\/thenewstack.io\/webassembly\/serverless-webassembly-for-browser-developers\/)。Wasm 为应用程序代码提供了一组标准 API，以便访问关键的运行时服务，例如 SQL 或 NoSQL、Kafka 消息传递或代码调试，”Volk 说。“但是，然后 Wasm 依赖于资源编排层，可以由 Kubernetes 或任何其他调度器提供，以提供这些服务所需的基础设施资源。这些资源可以以容器、虚拟机、裸机或一些未曾想到的花哨未来技术的形式交付。”\n\n然而，并非所有人都认为 Kubernetes 作为容器编排的能力将无限期地保持其首选。许多 Wasm 领域的人都倾向于 HashiCorp 的 Nomad 调度器。的确，Fermyon 已经放弃了 Krustlet（Wasm-on-Kubernetes），并将重点转向 HashiCorp Nomad 作为其调度器。Butcher 说：“Nomad 在调度容器方面与 Kubernetes 相当，但具有一个至关重要的附加功能：它可以调度非容器工作负载。在 Fermyon 中，我们能够使 Nomad 调度和执行 WebAssembly 应用程序，而无需编写任何自定义代码。”\n\n与此同时，Kubernetes 开发人员需要在低级别上[接受 WebAssembly](https:\/\/thenewstack.io\/webassembly\/what-is-webassembly-and-why-do-you-need-it\/)，并更改内置的、容器特定的假设，Butcher 说。微软是第一家真正拥抱这个概念的公司，它的[runwasi](https:\/\/github.com\/containerd\/runwasi)项目是 WebAssembly 如何在 Kubernetes 内部执行的示例，Butcher 说。\n\n“runwasi 项目仅仅是 Kubernetes 需要经历的一系列转型中的第一步，如果它不想被 Nomad 和 Wasm 超越，它的开发人员和维护人员需要快速采取行动。”Butcher 说。“Kubernetes 的游戏要输，但如果它不想被 Nomad 和 Wasm 取代，它们需要迅速采取行动。”\n\n## 存在的威胁\n\nWebAssembly 对于 Docker 以及容器构成了一种存在的威胁，尽管在超越 Kubernetes 方面，WebAssembly 的简单性、可移植性和安全性等优势使其成为弥补 Docker 缺陷的良好选择，特别是对于边缘和分布式应用。然而，Butcher 指出，Docker 在以下两种应用程序提供环境时表现出色：\n\n- 长时间运行的过程，如数据库和消息队列，这些过程需要强大的 I\/O 和内存管理能力。\n- 遗留（传统）代码，该代码在应用程序中保留状态并大量使用线程。\n\n“Butcher 说：“我对 Docker 的看法是，它在市场上有一个强大且不可撼动的地位，WebAssembly 不太可能取代它。但是，当涉及到微服务和 Web 应用程序后端时，我认为 WebAssembly 有望削减 Docker 的使用。”\n\n因此，对于某些用例来说，Wasm 可以替代 Docker 和容器，但是在高度分布式的云原生环境中，使用 Wasm 来编排容器和微服务程度上与 Kubernetes 相同的程度是不可能的。\n', '\/trans\/wasm-vs-kubernetes\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">WebAssembly 可以作为一种部署应用程序的方式，可以在服务器操作系统上运行，且在许多不同的硬件环境中表现出色。</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
          <div class="col-12">
 
 
 
 
 
 
 
 
 
 
 
 <nav aria-label="Page navigation">
   <ul class="pagination justify-content-center">
     
     
     <li class="page-item">
       <a class="page-link" href="/blog/">
         ««
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a href="/blog/page/11/" class="page-link">
         «
       </a>
     </li>
     
     
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/10/" class="page-link">
             10
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/11/" class="page-link">
             11
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item page-item active ">
           <a href="/blog/page/12/" class="page-link">
             12
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/13/" class="page-link">
             13
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/14/" class="page-link">
             14
           </a>
         </li>
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
     
     
     <li class="page-item">
       <a href="/blog/page/13/" class="page-link">
         »
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a class="page-link" href="/blog/page/29/">
         »»
       </a>
     </li>
     
   </ul>
 </nav>
 
</div>

        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 order-1 order-lg-2 d-none d-sm-block">
          <div class="sidebar">
          <!-- categories -->
<div class="blog-categories mb-4">
  <p class="sidebar-title">
      专栏
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/istio" class="sidebar-item">
            <span>Istio</span>
            <span>(84)</span>
        </a>
      
        <a href="/categories/service-mesh" class="sidebar-item">
            <span>Service Mesh</span>
            <span>(42)</span>
        </a>
      
        <a href="/categories/kubernetes" class="sidebar-item">
            <span>Kubernetes</span>
            <span>(25)</span>
        </a>
      
        <a href="/categories/%e9%9a%8f%e7%ac%94" class="sidebar-item">
            <span>随笔</span>
            <span>(22)</span>
        </a>
      
        <a href="/categories/%e5%85%b6%e4%bb%96" class="sidebar-item">
            <span>其他</span>
            <span>(20)</span>
        </a>
      
        <a href="/categories/envoy" class="sidebar-item">
            <span>Envoy</span>
            <span>(18)</span>
        </a>
      
        <a href="/categories/%e4%b8%9a%e6%80%81" class="sidebar-item">
            <span>业态</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f" class="sidebar-item">
            <span>云原生</span>
            <span>(14)</span>
        </a>
      
        <a href="/categories/ai" class="sidebar-item">
            <span>AI</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%ae%89%e5%85%a8" class="sidebar-item">
            <span>安全</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%bc%80%e6%ba%90" class="sidebar-item">
            <span>开源</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e6%97%85%e8%a1%8c" class="sidebar-item">
            <span>旅行</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e5%b7%a5%e5%85%b7" class="sidebar-item">
            <span>工具</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7" class="sidebar-item">
            <span>可观测性</span>
            <span>(5)</span>
        </a>
  </div>
</div>

<div class="blog-categories mb-4">
  <p class="sidebar-title">
      资料
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/%e5%87%ba%e7%89%88%e7%89%a9" class="sidebar-item">
            <span>出版物</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e7%94%b5%e5%ad%90%e4%b9%a6" class="sidebar-item">
            <span>翻译电子书</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e6%96%87%e6%a1%a3" class="sidebar-item">
            <span>翻译文档</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>翻译图书</span>
            <span>(6)</span>
        </a>
      
        <a href="/categories/%e5%8e%9f%e5%88%9b%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>原创图书</span>
            <span>(2)</span>
        </a>
      
        <a href="/categories/%e6%95%99%e7%a8%8b%e6%89%8b%e5%86%8c" class="sidebar-item">
            <span>教程手册</span>
            <span>(2)</span>
        </a>
  </div>
</div>





          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">联系</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">微信公众号</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">博客</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/http2-envoy-tunnel-demo/">使用 Envoy 实现 HTTP/2 CONNECT 隧道：原理与实践</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/napkin-ai-visualization-tool/">AI 工具推荐 Napkin.ai：让复杂想法一键变成直观图表</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/cilium-annual-report-2024/">Cilium 2024 年度报告解读</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">链接</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">
                  Istio 服务网格
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate 公司
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  云原生学院|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  云原生开源项目大全
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  云原生社区（中国）
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">教程</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes 基础教程
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/envoy-made-simple/" >
                  简明 Envoy 教程
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">通知</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/kcd-beijing-2025/">KCD Beijing 2025 - 提交议题开启！</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-community-domain-migration/">云原生社区网站域名变更通知</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/nist-sp-800-233-service-mesh-proxy-models/">资料分享：云原生应用服务网格代理模型的威胁分析指南</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2025 Jimmy Song 保留所有权利</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />





<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>










<script src="/js/wowchemy-search.min.7a37268e7bbe4a9160c2e4c33b749816.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
