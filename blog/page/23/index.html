<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>åšå®¢ Â· Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="Jimmy Song çš„åŸåˆ›åšå®¢åŠè¯‘æ–‡ã€‚">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.129.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/blog/" />
  <meta property="og:title" content="åšå®¢ | Jimmy Song" />
  <meta property="twitter:title" content="åšå®¢ | Jimmy Song" />

  
  <meta property="og:description" content="Jimmy Song çš„åŸåˆ›åšå®¢åŠè¯‘æ–‡ã€‚" />
  <meta property="twitter:description" content="Jimmy Song çš„åŸåˆ›åšå®¢åŠè¯‘æ–‡ã€‚" />

  
  <meta property="og:image" content="https://jimmysong.io/images/banner/default.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/default.jpg" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">åšå®¢</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">èµ„æ–™</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">æ ‡ç­¾</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">å…¬å‘Š</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">è”ç³»</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">å…³äº</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/community/">ç¤¾åŒº</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">è§†é¢‘ <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
              
              
                
                
                
                  
                    
                    <a class="nav-link" href="/en/blog/">English</a>
                    
                  
                
              
              
              
                
                  
                    
                    
                  
                
                
                
              
          </li>
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>æœç´¢</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">âŒ˜</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>ç«™å†…æœç´¢</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="å…³é—­"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="è¯·è¾“å…¥æœç´¢è¯" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="è¯·è¾“å…¥æœç´¢è¯">
        
        <div class="mt-4">
          <span>æœç´¢ç±»å‹: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">æ‰€æœ‰</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">åŸåˆ›</label>
              <input type="radio" id="trans" name="search_type" value="trans">
              <label for="trans">è¯‘æ–‡</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">èµ„æ–™</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">å…¬å‘Š</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    åšå®¢
                </p>
                <p class="page-description">
                    Jimmy Song çš„åŸåˆ›åšå®¢åŠè¯‘æ–‡ã€‚
                </p>
                
            </div>
        </div>
    </div>
</section>

        


<section class="section-sm book-list-section bg-gray">
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          
          
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/contribute-project-to-cncf/">å¦‚ä½•å°†ä¸€ä¸ªå¼€æºé¡¹ç›®åŠ å…¥ CNCFï¼Ÿ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2019/04/15</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%bc%80%e6%ba%90"> 
             å¼€æº
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('å¦‚ä½•å°†ä¸€ä¸ªå¼€æºé¡¹ç›®åŠ å…¥ CNCFï¼Ÿ', ' CNCF åŸºé‡‘ä¼šçš„å¼€æºé¡¹ç›®æ²»ç†è§„åˆ™å’Œç»„ç»‡æ¶æ„ï¼Œè¿˜æœ‰å¦‚ä½•å°†ä¸€ä¸ªå¼€æºé¡¹ç›®åŠ å…¥åˆ° CNCFã€‚', '\nå‰æ®µæ—¶é—´çœ‹äº†ä¸€ç¯‡æ–‡ç« [ä¸ºä»€ä¹ˆä¸­å›½æ²¡æœ‰ Apache åŸºé‡‘ä¼šè¿™æ ·çš„ç»„ç»‡ï¼Ÿ](https:\/\/www.infoq.cn\/article\/l0bCXU3SojYXpz-AhP3v)ï¼ŒäºŒå‰æ ‘è§†é¢‘ä¸­é‡‡è®¿äº†[å¼€æºç¤¾](http:\/\/www.kaiyuanshe.cn\/)çš„ç†äº‹é•¿è€åˆ˜ï¼Œä»–çš„ä¸€ç•ªè¯ä¹Ÿè®©æˆ‘å¾ˆå—å¯å‘ï¼Œåœ¨å…³æ³¨å’Œå‚ä¸ CNCF åŸºé‡‘ä¼šè¿™å‡ å¹´æ¥æˆ‘ä¹Ÿæœ‰å¾ˆå¤šæ”¶è·ï¼Œæœ‰ä¸€ç‚¹å°±æ˜¯äº†è§£åˆ°äº†ä¸€ä¸ªå¼€æºç¤¾åŒºï¼ˆåŸºé‡‘ä¼šï¼‰æ²»ç†çš„è§„åˆ™ã€‚\n\nè™½ç„¶ CNCF æ²¡æœ‰ Apacheã€GNOMEã€FreeBSD å†å²é‚£ä¹ˆæ‚ ä¹…ï¼Œä½†æ˜¯å®ƒæˆç«‹çš„çŸ­çŸ­å‡ å¹´å†…å°±æˆåŠŸçš„è¿ä½œäº† [Kubernetes](https:\/\/kubernetes.io) è¿™æ ·çš„è¶…å¤§å‹å¼€æºé¡¹ç›®ï¼Œä¸€å®šæœ‰å…¶å¯å–ä¹‹å¤„ã€‚ä»Šå¤©æˆ‘å°±æ¥ç»™å¤§å®¶åˆ†äº«ä¸‹ CNCF åŸºé‡‘ä¼šçš„å¼€æºé¡¹ç›®æ²»ç†è§„åˆ™å’Œç»„ç»‡æ¶æ„ï¼Œè¿˜æœ‰å¦‚ä½•å°†ä¸€ä¸ªå¼€æºé¡¹ç›®åŠ å…¥åˆ° CNCFã€‚\n\nCNCF æ ¹æ®â€œ[é¸¿æ²Ÿç†è®º](\/blog\/crossing-the-chasm\/)â€å°†å…¶æ‰˜ç®¡çš„é¡¹ç›®åˆ†æˆä¸‰ä¸ªæˆç†Ÿé˜¶æ®µï¼Œå¹¶è®¾ç½®äº†é¡¹ç›®æ™‹çº§åˆ°æ›´é«˜é˜¶æ®µçš„æ ‡å‡†ã€‚\n\n\u003e â€œé¸¿æ²Ÿç†è®ºâ€æ˜¯ç”± Geoffrey A. Moore æå‡ºçš„é«˜ç§‘æŠ€äº§å“çš„å¸‚åœºè¥é”€ç†è®ºã€‚æ–°æŠ€æœ¯è¦æƒ³è·¨è¶Šé¸¿æ²Ÿï¼Œå¿…é¡»èƒ½å¤Ÿå®ç°ä¸€äº›è·¨è¶Šå¼çš„å‘å±•ï¼Œ**æ‹¥æœ‰æŸä¸€äº›ä»¥å‰ä¸å¯èƒ½å®ç°çš„åŠŸèƒ½**ï¼Œå…·æœ‰æŸç§å†…åœ¨ä»·å€¼å¹¶èƒ½å¤Ÿ**èµ¢å¾—éæŠ€æœ¯äººå‘˜çš„**é’çã€‚\n\n![CNCF é¡¹ç›®çš„æˆç†Ÿåº¦åˆ†ç±»](cncf-graduation.jpg)\n\n*å›¾ç‰‡æ¥è‡ª \u003chttps:\/\/www.cncf.io\/projects\/\u003e*\n\n### å¼€æºé¡¹ç›®å¦‚ä½•åŠ å…¥ CNCF\n\n1. å¼€æºé¡¹ç›®æ‰€æ”¯æŒçš„å…¬å¸æˆä¸º CNCF ä¼šå‘˜\n2. å¼€æºé¡¹ç›®æ»¡è¶³ CNCF çš„è¦æ±‚ï¼ˆè§åæ–‡ï¼‰\n3. åœ¨ GitHub ä¸Šæäº¤ [proposal](https:\/\/github.com\/cncf\/toc\/issues\/113)ï¼ˆGitHub Issueï¼‰åˆ—ä¸¾é¡¹ç›®ä»‹ç»ã€ç°çŠ¶ã€ç›®æ ‡ã€licenseã€ç”¨æˆ·ä¸ç¤¾åŒºç­‰\n4. ç”± Chris Aniszczyk å®‰æ’è¯¥é¡¹ç›®åœ¨æŸä¸ª TOC åŒæœˆä¼šè®®ä¸Šä»‹ç»ç»™ TOC æˆå‘˜\n5. 1.TOC ä¼šå°†å¼€æºé¡¹ç›®æŒ‡å®šåˆ°æŸä¸ª [SIG](https:\/\/jimmysong.io\/kubernetes-handbook\/cloud-native\/cncf-sig.html) ä¸­\n6. é¡¹ç›®è·å¾—ä¸¤ä¸ª TOC æˆå‘˜çš„èµæˆå¯è¿›å…¥ [sandbox](https:\/\/github.com\/cncf\/toc\/blob\/master\/process\/sandbox.md)ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥è·å¾— 2\/3 å¤šæ•° TOC æŠ•ç¥¨è¿›å…¥ Incubating çŠ¶æ€ï¼‰\n7. çŸ¥è¯†äº§æƒè½¬ç§»ç»™ CNCF\n8. CNCF å®‰æ’åšå®¢æ’°å†™ã€PR ç­‰\n9. æ¯å¹´ä¸€æ¬¡è¯„å®¡ï¼Œæ™‹å‡åˆ° incubating éœ€è¦ 2\/3 çš„ TOC æˆå‘˜æŠ•ç¥¨èµæˆï¼›è‡³å°‘ 3 å®¶ç”¨æˆ·æˆåŠŸåœ¨ç”Ÿäº§ä¸Šä½¿ç”¨ï¼›é€šè¿‡ TOC çš„å°½èŒè°ƒæŸ¥ï¼›è´¡çŒ®è€…æ•°é‡å¥åº·ç¨³å®š\n10. Sandbox ä¸­çš„é¡¹ç›®æ²¡æœ‰æ—¶æ•ˆæ€§è´¨ï¼Œå¯èƒ½æ°¸è¿œéƒ½æ— æ³•è¿›å…¥ incubating çŠ¶æ€ï¼Œè¢« CNCF è°¨æ…å®£ä¼ \n\n### CNCF å¼€æºé¡¹ç›®æˆç†Ÿåº¦æ¼”è¿›\n\nCNCF çš„å¼€æºé¡¹ç›®éµå¾ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æˆç†Ÿåº¦æ¼”è¿›ã€‚\n\n![CNCF é¡¹ç›®æˆç†Ÿåº¦çº§åˆ«](cncf-graduation-criteria-v2.jpg)\n\nå…³äºä¸Šå›¾çš„ä¸€äº›è¯´æ˜ï¼š\n\n- åŠ å…¥ Sandbox åªéœ€è¦ 2 ä¸ª TOC æˆå‘˜èµæˆ\n- æˆç†Ÿä¸€ç‚¹çš„é¡¹ç›®å¯ä»¥ç›´æ¥è¿›å…¥ incubating é˜¶æ®µï¼Œä½†æ˜¯ CNCF ä¼šæ§åˆ¶ä¸åŒé˜¶æ®µçš„é¡¹ç›®æ¯”ä¾‹\n- æ™‹çº§åˆ° Incubating æˆ– Graduated éœ€è¦è‡³å°‘ 2\/3 çš„ TOC æˆå‘˜ï¼ˆ6 åæˆ–ä»¥ä¸Šï¼‰æŠ•ç¥¨èµæˆ\n- æ¯å¹´å°†è¯„å®¡ä¸€æ¬¡\n\nç›®å‰å¤„äºæ²™ç®±ã€å­µåŒ–ä¸­ã€å·²æ¯•ä¸šé¡¹ç›®çš„æ•°é‡æ¯”ä¾‹ä¸º 5:16:13ï¼Œè¯¦è§ \u003chttps:\/\/cncf.io\/projects\u003eã€‚å…¶ä¸­æ²™ç®±ï¼ˆsandboxï¼‰é¡¹ç›®å› ä¸ºå…¶å¤„äºæ—©æœŸé˜¶æ®µå¹¶æ²¡æœ‰ç›´æ¥åœ¨ä¸Šé¢çš„é“¾æ¥é¡µé¢ä¸­åˆ—å‡ºï¼Œè€Œæ˜¯ä¸€ä¸ªå•ç‹¬çš„ [Sandbox](https:\/\/www.cncf.io\/sandbox-projects\/) é¡µé¢ï¼Œå› ä¸º CNCF ä¸º sandbox é˜¶æ®µçš„é¡¹ç›®ä¼šè°¨æ…èƒŒä¹¦ã€‚\n\n### çº³å…¥ CNCF å¼€æºç‰ˆå›¾çš„é¡¹ç›®éœ€è¦ç¬¦åˆå…¶å¯¹äº‘åŸç”Ÿçš„å®šä¹‰\n\nCNCF ä¸­æ‰˜ç®¡çš„å¼€æºé¡¹ç›®è¦ç¬¦åˆäº‘åŸç”Ÿå®šä¹‰ï¼š\n\n- äº‘åŸç”ŸæŠ€æœ¯æœ‰åˆ©äºå„ç»„ç»‡åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰æ–°å‹åŠ¨æ€ç¯å¢ƒä¸­ï¼Œæ„å»ºå’Œè¿è¡Œå¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ã€‚**äº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼ API**ã€‚\n- è¿™äº›æŠ€æœ¯èƒ½å¤Ÿæ„å»ºå®¹é”™æ€§å¥½ã€æ˜“äºç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿã€‚ç»“åˆå¯é çš„è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Œäº‘åŸç”ŸæŠ€æœ¯ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿä½œå‡ºé¢‘ç¹å’Œå¯é¢„æµ‹çš„é‡å¤§å˜æ›´ã€‚\n- äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰è‡´åŠ›äºåŸ¹è‚²å’Œç»´æŠ¤ä¸€ä¸ªå‚å•†ä¸­ç«‹çš„å¼€æºç”Ÿæ€ç³»ç»Ÿï¼Œæ¥æ¨å¹¿äº‘åŸç”ŸæŠ€æœ¯ã€‚æˆ‘ä»¬é€šè¿‡å°†æœ€å‰æ²¿çš„æ¨¡å¼æ°‘ä¸»åŒ–ï¼Œè®©è¿™äº›åˆ›æ–°ä¸ºå¤§ä¼—æ‰€ç”¨ã€‚\n\n### é¡¹ç›®è¿ä½œæµç¨‹\n\nä¸‹å›¾æ¼”ç¤ºäº†å¼€æºé¡¹ç›®åŠ å…¥ CNCF åçš„æ•´ä¸ªè¿ä½œæµç¨‹ã€‚\n\n![CNCF ä¸­çš„é¡¹ç›®è¿ä½œ](006tNc79ly1g1yz80ag98j31cs0n2gr7.jpg)\n\n### å¼€æºé¡¹ç›®å¦‚ä½•åŠ å…¥ CNCF\n\n1. å¼€æºé¡¹ç›®æ‰€æ”¯æŒçš„å…¬å¸æˆä¸º CNCF ä¼šå‘˜\n2. å¼€æºé¡¹ç›®æ»¡è¶³ CNCF çš„è¦æ±‚ï¼ˆè§åæ–‡ï¼‰\n3. åœ¨ GitHub ä¸Šæäº¤[proposal](https:\/\/github.com\/cncf\/toc\/issues\/113)ï¼ˆGitHub Issueï¼‰åˆ—ä¸¾é¡¹ç›®ä»‹ç»ã€ç°çŠ¶ã€ç›®æ ‡ã€licenseã€ç”¨æˆ·ä¸ç¤¾åŒºç­‰\n4. ç”± Chris Aniszczyk å®‰æ’è¯¥é¡¹ç›®åœ¨æŸä¸ª TOC åŒæœˆä¼šè®®ä¸Šä»‹ç»ç»™ TOC æˆå‘˜\n5. 1.TOC ä¼šå°†å¼€æºé¡¹ç›®æŒ‡å®šåˆ°æŸä¸ª [SIG](https:\/\/jimmysong.io\/kubernetes-handbook\/cloud-native\/cncf-sig.html) ä¸­\n6. é¡¹ç›®è·å¾—ä¸¤ä¸ª TOC æˆå‘˜çš„èµæˆå¯è¿›å…¥[sandbox](https:\/\/github.com\/cncf\/toc\/blob\/master\/process\/sandbox.md)ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥è·å¾— 2\/3 å¤šæ•° TOC æŠ•ç¥¨è¿›å…¥ Incubating çŠ¶æ€ï¼‰\n7. çŸ¥è¯†äº§æƒè½¬ç§»ç»™ CNCF\n8. CNCF å®‰æ’åšå®¢æ’°å†™ã€PR ç­‰\n9. æ¯å¹´ä¸€æ¬¡è¯„å®¡ï¼Œæ™‹å‡åˆ° incubating éœ€è¦ 2\/3 çš„ TOC æˆå‘˜æŠ•ç¥¨èµæˆï¼›è‡³å°‘ 3 å®¶ç”¨æˆ·æˆåŠŸåœ¨ç”Ÿäº§ä¸Šä½¿ç”¨ï¼›é€šè¿‡ TOC çš„å°½èŒè°ƒæŸ¥ï¼›è´¡çŒ®è€…æ•°é‡å¥åº·ç¨³å®š\n10. Sandbox ä¸­çš„é¡¹ç›®æ²¡æœ‰æ—¶æ•ˆæ€§è´¨ï¼Œå¯èƒ½æ°¸è¿œéƒ½æ— æ³•è¿›å…¥ incubating çŠ¶æ€ï¼Œè¢« CNCF è°¨æ…å®£ä¼ \n\n### å¼€æºé¡¹ç›®åŠ å…¥ CNCF çš„æœ€ä½è¦æ±‚ï¼ˆSandboxï¼‰\n\nä¸€ä¸ªå¼€æºé¡¹ç›®è¦æƒ³åŠ å…¥ CNCF å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š\n\n- é¡¹ç›®åç§°å¿…é¡»åœ¨ CNCF ä¸­å”¯ä¸€\n- é¡¹ç›®æè¿°ï¼ˆç”¨é€”ã€ä»·å€¼ã€èµ·æºã€å†å²ï¼‰\n- ä¸ CNCF ç« ç¨‹ä¸€è‡´çš„å£°æ˜\n- æ¥è‡ª TOC çš„ sponsorï¼ˆé¡¹ç›®è¾…å¯¼ï¼‰\n- licenseï¼ˆé»˜è®¤ä¸º Apache 2ï¼‰\n- æºç æ§åˆ¶ï¼ˆGithubï¼‰\n- ç½‘ç«™ï¼ˆè‹±æ–‡ï¼‰\n- å¤–éƒ¨ä¾èµ–ï¼ˆåŒ…æ‹¬ licenseï¼‰\n- æˆç†Ÿåº¦æ¨¡å‹è¯„ä¼°ï¼ˆå‚è€ƒ [å¼€æºé¡¹ç›®åŠ å…¥ CNCF Sandbox çš„è¦æ±‚](https:\/\/jimmysong.io\/kubernetes-handbook\/cloud-native\/cncf-sandbox-criteria.html)ï¼‰\n- åˆ›å§‹ committerï¼ˆè´¡çŒ®é¡¹ç›®çš„æ—¶é•¿ï¼‰\n- åŸºç¡€è®¾æ–½éœ€æ±‚ï¼ˆCI\/CNCF é›†ç¾¤ï¼‰\n- æ²Ÿé€šæ¸ é“ï¼ˆslackã€ircã€é‚®ä»¶åˆ—è¡¨ï¼‰\n- issue è¿½è¸ªï¼ˆGitHubï¼‰\n- å‘å¸ƒæ–¹æ³•å’Œæœºåˆ¶\n- ç¤¾äº¤åª’ä½“è´¦å·\n- ç¤¾åŒºè§„æ¨¡å’Œå·²æœ‰çš„èµåŠ©å•†\n- svg æ ¼å¼çš„é¡¹ç›® logo\n\n### ç”± Sandbox å‡çº§åˆ° Incubating çš„è¦æ±‚\n\n- é€šè¿‡ TOC çš„[å°½èŒè°ƒæŸ¥](https:\/\/github.com\/cncf\/toc\/blob\/master\/process\/due-diligence-guidelines.md)\n- è‡³å°‘æœ‰ 3 ä¸ªç‹¬ç«‹çš„ç»ˆç«¯ç”¨æˆ·åœ¨åœ¨ç”Ÿäº§ä¸Šä½¿ç”¨è¯¥é¡¹ç›®ï¼šä¸€èˆ¬åœ¨é¡¹ç›®çš„å®˜ç½‘åˆ—ä¸¾å®é™…ç”¨æˆ·\n- è¶³å¤Ÿå¥åº·æ•°é‡çš„è´¡çŒ®è€…ï¼šé¡¹ç›®çš„ GitHub ä¸Šæœ‰æ˜ç¡®çš„ committer æƒé™åˆ’åˆ†ã€èŒè´£è¯´æ˜åŠæˆå‘˜åˆ—è¡¨ï¼ŒTOC å°†æ ¹æ®é¡¹ç›®å¤§å°æ¥ç¡®è®¤å¤šå°‘ committer æ‰ç®—å¥åº·\n- **å±•ç¤ºé¡¹ç›®åœ¨æŒç»­è¿›è¡Œã€è‰¯å¥½çš„å‘å¸ƒèŠ‚å¥ã€è´¡çŒ®é¢‘ç‡ååˆ†é‡è¦**\n\n### ç”± Incubating å‡çº§åˆ° Graduated çš„è¦æ±‚\n\n- æ»¡è¶³ Sandbox å’Œ Incubating çš„æ‰€æœ‰è¦æ±‚\n- **è‡³å°‘æœ‰æ¥è‡ªä¸¤ä¸ªç»„ç»‡çš„è´¡çŒ®è€…**\n- æ˜ç¡®å®šä¹‰çš„é¡¹ç›®æ²»ç†åŠ committer èº«ä»½ã€æƒé™ç®¡ç†\n- æ¥å— CNCF çš„[è¡Œä¸ºå‡†åˆ™](https:\/\/github.com\/cncf\/foundation\/blob\/master\/code-of-conduct.md)ï¼Œå‚è€ƒ[Prometheus](https:\/\/bestpractices.coreinfrastructure.org\/en\/projects\/486)\n- è·å¾— CII æœ€ä½³å®è·µå¾½ç« \n- åœ¨é¡¹ç›®ä¸»åº“æˆ–é¡¹ç›®å®˜ç½‘æœ‰å…¬å¼€çš„é‡‡ç”¨è€…çš„ logo\n\nå‚è€ƒå½’æ¡£çš„ Reviewï¼š\u003chttps:\/\/github.com\/cncf\/toc\/tree\/master\/reviews\u003e\n\n### å‚è€ƒ\n\n- [é¸¿æ²Ÿç†è®º - jianshu.com](https:\/\/www.jianshu.com\/p\/a305fa93580b)\n- [CNCF Graduation Criteria v1.2 - github.com](https:\/\/github.com\/cncf\/toc\/blob\/master\/process\/graduation_criteria.adoc)\n- [ä¸ºä»€ä¹ˆä¸­å›½æ²¡æœ‰ Apache åŸºé‡‘ä¼šè¿™æ ·çš„ç»„ç»‡ï¼Ÿ - infoq.cn](\u003chttps:\/\/www.infoq.cn\/article\/l0bCXU3SojYXpz-AhP3v\u003e)\n- [å¼€æºç¤¾é¦–é¡µ - kaiyuanshe.cn](\u003chttp:\/\/www.kaiyuanshe.cn\/\u003e)\n', '\/blog\/contribute-project-to-cncf\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text"> CNCF åŸºé‡‘ä¼šçš„å¼€æºé¡¹ç›®æ²»ç†è§„åˆ™å’Œç»„ç»‡æ¶æ„ï¼Œè¿˜æœ‰å¦‚ä½•å°†ä¸€ä¸ªå¼€æºé¡¹ç›®åŠ å…¥åˆ° CNCFã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/cncf-annual-report-2018-review/">CNCF å¹´åº¦æŠ¥å‘Šè§£è¯»ï¼ˆ2018 å¹´ï¼‰</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2019/02/13</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f"> 
             äº‘åŸç”Ÿ
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('CNCF å¹´åº¦æŠ¥å‘Šè§£è¯»ï¼ˆ2018 å¹´ï¼‰', 'æœ¬æ–‡æ˜¯å¯¹ CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰2018 å¹´å¹´åº¦æŠ¥å‘Šçš„è§£è¯»ã€‚', '\n2019 å¹´ 2 æœˆåˆï¼ŒCNCF å‘å¸ƒäº† 2018 å¹´çš„å¹´åº¦æŠ¥å‘Šï¼Œè¿™æ˜¯ CNCF ç»§ 2017 å¹´åº¦æŠ¥å‘Šä¹‹åï¼Œç¬¬äºŒæ¬¡å‘å¸ƒå¹´åº¦æŠ¥å‘Šï¼Œ2017 å¹´åº¦çš„æŠ¥å‘Šåªæœ‰åŒºåŒº 14 é¡µï¼Œä»Šå¹´çš„æŠ¥å‘Šé•¿åº¦å¢é•¿äº†ä¸€å€è¾¾ 31 é¡µã€‚ä¸‹é¢æˆ‘å°†å¸¦å¤§å®¶ä¸€èµ·æ¥æ·±åº¦è§£è¯»ä¸‹è¿™ä»½ 2018 å¹´çš„å¹´åº¦æŠ¥å‘Šï¼Œä¸€çª¥ CNCF è¿‡å»ä¸€å¹´é‡Œåœ¨æ¨å¹¿äº‘åŸç”Ÿçš„é“è·¯ä¸Šå–å¾—çš„è¿›å±•ã€‚\n\n*æ³¨ï¼šæœ¬æ–‡æœ€åé™„ä¸Šäº† 2017 å¹´å’Œ 2018 å¹´åº¦çš„æŠ¥å‘Šä¸‹è½½åœ°å€ã€‚*\n\n## CNCF å¹´åº¦æŠ¥å‘Šæ¶µç›–çš„èŒƒå›´\n\nåœ¨è§£è¯» CNCF çš„ 2018 å¹´åº¦æŠ¥å‘Šä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•å›é¡¾ä¸‹2017 å¹´åº¦çš„æŠ¥å‘Šï¼Œå› ä¸º 2017 å¹´åº¦æŠ¥å‘Šæ˜¯ CNCF çš„é¦–ä»½å¹´åº¦æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬ä¹Ÿèƒ½æ›´å¥½çš„äº†è§£ CNCF çš„æ¥é¾™å»è„‰ã€‚\n\n2017 å¹´åº¦æŠ¥å‘Šå·²ç»åŸºæœ¬ç¡®å®šäº† CNCF æ¯ä¸ªå¹´åº¦æŠ¥å‘Šæ‰€åŒ…å«çš„ä¸»é¢˜ï¼š\n\n- è‡ªæˆ‘å®šä½\n- ä¼šå‘˜å‚ä¸æƒ…å†µ\n- ç»ˆç«¯ç”¨æˆ·ç¤¾åŒº\n- é¡¹ç›®æ›´æ–°\n- ä¼šè®®å’Œæ´»åŠ¨\n- ç¤¾åŒº\n- åŸ¹è®­å’Œè®¤è¯\n\nä»¥ä¸Šä¸º CNCF ä¸»è¦çš„å¸‚åœºæ´»åŠ¨ï¼Œ2017 å¹´æ—¶å…¶æˆç«‹çš„ç¬¬äºŒå¹´ï¼Œç»è¿‡ä¸€å¹´æ—¶é—´çš„ç­¹å¤‡ï¼Œè¿™ä¸€å¹´é‡Œå„ç§å¸‚åœºæ´»åŠ¨éƒ½å·²ç»å¼€å§‹ç¡®ç«‹å¹¶æœ‰å£°æœ‰è‰²çš„å¼€å±•äº†èµ·æ¥ï¼ŒåŒ…æ‹¬ KubeConã€æˆå‘˜å•ä½ã€ç»ˆç«¯ç”¨æˆ·éƒ½å·²ç»å‘å±•èµ·æ¥äº†ï¼Œä»¥åå†å¹´é‡Œåªæ˜¯å¯¹å…¶ä¸æ–­çš„å‘å±•å’Œå®Œå–„ã€‚\n\n2018 å¹´åº¦æŠ¥å‘Šä¸­åˆæ–°å¢äº†ä¸€äº›ä¸»é¢˜ï¼Œè¿™äº›ä¸»é¢˜æ˜¯ä» 2018 å¹´å¼€å§‹å¼€å±•çš„ï¼ŒåŒ…æ‹¬ï¼š\n\n- **é¡¹ç›®æ›´æ–°ä¸æ»¡æ„åº¦è°ƒæŸ¥**\n  - ç»™ CNCF é¡¹ç›®çš„ç»´æŠ¤è€…å‘è°ƒæŸ¥é—®å·è¯¢é—®æ»¡æ„åº¦\n  - [CNCF charter](https:\/\/www.cncf.io\/about\/charter\/) çš„ä¿®è®¢ï¼ˆ2018 å¹´ 11 æœˆï¼‰\n  - é¡¹ç›®æ›´æ–°ä¸å‘å¸ƒ\n  - é¡¹ç›®æœåŠ¡ä¸æ”¯æ´\n  - ä¸“é¡¹æ´»åŠ¨ã€æ–‡æ¡£ã€ç½‘ç«™ä¸åšå®¢æ”¯æŒ\n  - æœ¬åœ°åŒ–ã€IT æ”¯æŒå’ŒåŸ¹è®­\n- **ç¤¾åŒºæ‹“å±•**\n  - ç¤¾åŒºå¥–é¡¹\n  - CNCF Meetup\n  - [CNCF Ambassador è®¡åˆ’](https:\/\/www.cncf.io\/people\/ambassadors\/)\n  - å¡é€šå‰ç¥¥ç‰© Phippy\n- **ç”Ÿæ€ç³»ç»Ÿå·¥å…·**\n  - [devstats](https:\/\/devstats.cncf.io\/)\n  - [CNCF Landscape](https:\/\/landscape.cncf.io) å’Œè·¯çº¿å›¾\n  - é¡¹ç›® logo ç‰©æ–™\n- **æµ‹è¯•ä¸€è‡´æ€§é¡¹ç›®**\n- **å›½é™…åŒ–**\n  - è¿›å…¥ä¸­å›½\n  - æœ¬åœ°åŒ–ç½‘ç«™\n\nè¯¦æƒ…è¯·å¤§å®¶ä»æœ¬æ–‡æœ€åçš„é“¾æ¥ä¸‹è½½æŠ¥å‘ŠåŸæ–‡ä»¥æŸ¥çœ‹è¯¦æƒ…ã€‚\n\n## CNCF çš„å®šä½\n\nCNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰æˆç«‹äº 2015 å¹´ 12 æœˆ 11 æ—¥ï¼Œæ¯å±Šå¹´åº¦æŠ¥å‘Šçš„å¼€ç¯‡éƒ½ä¼šé˜æ˜ CNCF çš„å®šä½ï¼ŒCNCF çš„è‡ªæˆ‘å®šä½åœ¨ 2018 å¹´å‘ç”Ÿäº†ä¸€æ¬¡å˜åŠ¨ï¼Œè¿™ä¹Ÿè¯´æ˜åŸºé‡‘ä¼šæ˜¯è·Ÿéšå¸‚åœºå½¢åŠ¿è€ŒåŠ¨ï¼Œå…¶å®šä½ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œå…¶ä¸­çš„å˜åŒ–æš—å«ç€ CNCF æˆ˜ç•¥çš„è½¬å˜ã€‚\n\n### CNCF çš„ 2017 å¹´åº¦å®šä½\n\n2017 å¹´åº¦æŠ¥å‘Šä¸­æ˜¯è¿™æ ·æ­£å¼ä»‹ç»è‡ªå·±çš„ï¼š\n\nThe Cloud Native Computing Foundation (CNCF) is an open source software foundation dedicated to making cloud-native computing universal and sustainable. Cloud-native computing uses an **open source** software stack to deploy applications as **microservices**, packaging each part into its own **container**, and **dynamically orchestrating** those containers to optimize resource utilization. Cloud-native technologies enable software developers to build great products faster. \n\nWe are a community of open source projects, including Kubernetes, Envoy and Prometheus. Kubernetes and other CNCF projects are some of the highest velocity projects in the history of open source. \n\nå¯ä»¥çœ‹åˆ°ä»‹ç»ä¸­çš„é‡ç‚¹æŠ€æœ¯æ˜¯ï¼šå¾®æœåŠ¡ã€å®¹å™¨ã€åŠ¨æ€ç¼–æ’ã€‚è€Œåœ¨ 2018 å¹´ CNCF å¯¹è‡ªå·±è¿›è¡Œäº†é‡æ–°çš„å®šä½å’ŒåŒ…è£…ï¼Œå¢åŠ äº†æ–°çš„å†…å®¹ã€‚\n\n### CNCF çš„ 2018 å¹´åº¦å®šä½\n\n[2018 å¹´åº¦æŠ¥å‘Š](https:\/\/www.cncf.io\/wp-content\/uploads\/2019\/02\/CNCF_Annual_Report_2018_FInal.pdf)ä¸­ CNCF å¯¹è‡ªå·±çš„å®šä½æ˜¯ï¼š\n\nThe Cloud Native Computing Foundation (CNCF) is an open source software foundation dedicated to making cloud native computing universal and sustainable. Cloud native technologies empower organizations to build and run scalable applications in modern, dynamic environments such as public, private, and hybrid clouds. **Containers**, **service meshes**, **microservices**, **immutable infrastructure**, and **declarative APIs** exemplify this approach. \n\nWe are a community of open source projects, including Kubernetes, Prometheus, Envoy, and many others. Kubernetes and other CNCF projects are some of the highest velocity projects in the history of open source. \n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶è¡¨è¿°ä¸­æ›´åŠ æ³¨é‡å¤šäº‘ç¯å¢ƒï¼Œä¸»è¦æ¶‰åŠçš„æŠ€æœ¯æ¯” 2017 å¹´å¤šäº† Service Meshï¼ˆæœåŠ¡ç½‘æ ¼ï¼‰ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼ APIã€‚\n\n## æ•°è¯»æŠ¥å‘Š\n\nCNCF å¹´åº¦æŠ¥å‘Šçš„åŸæ–‡ä¸»è¦æ˜¯æ±‡æŠ¥äº† CNCF ä¸€å¹´æ¥çš„æ‰€å±•å¼€çš„æ´»åŠ¨å’Œè¿›å±•ï¼Œä¸‹è¡¨ç¤ºæ ¹æ® CNCF 2017 å’Œ 2018 å¹´åº¦æŠ¥å‘Šæ•´ç†äº†å…³é”®æ•°æ®ã€‚\n\n| **Year**                                   | **2016** | **2017** | **2018** |\n| ------------------------------------------ | -------- | -------- | -------- |\n| **Members**                                | 63       | 170      | 365      |\n| **Contributors**                           | -        | 18687    | 47358    |\n| **CNCF Meetup Members**                    | -        | 53925    | 89112    |\n| **Projects**                               | 4        | 14       | 32       |\n| **End User Community Members**             | -        | 32       | 69       |\n| **Conference and Events Participants**     | -        | 4085     | -        |\n| **Certified Kubernetes Partners**          | -        | 44       | -        |\n| **Certified Kubernetes Service Providers** | -        | 28       | 74       |\n| **CNCF Ambassador**                        | -        | -        | 65       |\n| **Kubernetes Training Partners**           | -        | -        | 18       |\n\n**æ³¨**ï¼šå…¶ä¸­ 2016 å¹´æ˜¯ CNCF æ­£å¼å¼€å§‹å·¥ä½œçš„ç¬¬ä¸€å¹´ï¼Œå¤§éƒ¨åˆ†æ•°æ®å› ä¸ºæ´»åŠ¨å°šæœªå¼€å±•è€Œç¼ºå¤±ã€‚\n\nä»ä¸Šè¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° CNCF è¯ç”Ÿä¸‰å¹´æ¥åŸºé‡‘ä¼šæˆå‘˜è§„æ¨¡ã€æ‰˜ç®¡é¡¹ç›®çš„è´¡çŒ®è€…ã€å‚åŠ  CNCF åä¹‰çš„ Meetup çš„äººæ•°å–å¾—è¾ƒå¤§èŒƒå›´çš„å¢é•¿ï¼Œå°¤å…¶æ˜¯ 2018 å¹´ï¼Œå› ä¸ºåŸºé‡‘ä¼šæˆå‘˜çš„çˆ†å‘å¼å¢é•¿ï¼ˆ\u002b130%ï¼‰ï¼ŒCNCF å¼€å§‹ç»™æˆå‘˜åˆ†çº§ï¼Œä¼šå‘˜çº§åˆ«ã€è´¹ç”¨å’Œæƒç›Šä¹Ÿåœ¨ [CNCF å®˜ç½‘](https:\/\/www.cncf.io\/about\/join\/)ä¸Šæ˜ç æ ‡ä»·ã€‚\n\n2018 å¹´ CNCF ç»„ç»‡çš„ KubeCon\u0026CloudNativeCon å¼€å§‹å›ºå®šæ¯å¹´åœ¨è¥¿æ¬§ã€åŒ—ç¾å’Œä¸­å›½ä¸¾è¡Œï¼Œä¸” 2018 å¹´æ˜¯é¦–æ¬¡è¿›å…¥ä¸­å›½ï¼›åŸæ¥çš„ Certified Kubernetes Partners ä¹Ÿå–æ¶ˆäº†å˜æˆäº† Certified Kubernetes Service Providersï¼›CNCF çš„ [Ambassador](https:\/\/www.cncf.io\/people\/ambassadors\/) è®¡åˆ’æ‹¥æœ‰äº†æ¥è‡ª 15 ä¸ªå›½å®¶çš„ 65 ä½ Ambassadorï¼Œåœ¨ä¸–ç•Œå„åœ°ä¸ºäº‘åŸç”Ÿå¸ƒé“ï¼›CNCF è¿˜é¦–æ¬¡å¼•å…¥äº† Kubernetes Training Partnerã€‚\n\n2018 å¹´ CNCF åˆæ¨å‡ºäº†ä¸€ç³»åˆ—æ–°çš„è®¤è¯ï¼ˆCKA ä¸º 2017 å¹´æ¨å‡ºï¼‰ï¼ŒåŒ…æ‹¬ï¼š\n\n- [CKA](https:\/\/www.cncf.io\/certification\/cka\/)ï¼ˆKubernetes ç®¡ç†å‘˜è®¤è¯ï¼‰ï¼šè¿™æ˜¯ CNCF æœ€æ—©åˆ¶å®šçš„ä¸€ä¸ªè¯ä¹¦ï¼Œé¡¾åæ€ä¹‰ï¼Œé€šè¿‡è¯¥è®¤è¯è¯æ˜ç”¨æˆ·å…·æœ‰ç®¡ç† Kubernetes é›†ç¾¤çš„æŠ€èƒ½ã€çŸ¥è¯†å’Œèƒ½åŠ›ã€‚è™½ç„¶è¯¥è¯ä¹¦åœ¨ 2017 å¹´å³æ¨å‡ºï¼Œä½† 2018 å¹´å¯¹è€ƒè¯•åšäº†æ›´ç»†è‡´çš„æŒ‡å¯¼ã€‚KCSP è¦æ±‚ä¼ä¸šå¿…é¡»æœ‰è‡³å°‘ä¸‰äººé€šè¿‡ CKAã€‚\n- [CKAD](https:\/\/www.cncf.io\/certification\/ckad\/)ï¼ˆKubernetes åº”ç”¨å¼€å‘è€…è®¤è¯ï¼‰ï¼šè¯¥è®¤è¯è¯æ˜ç”¨æˆ·å¯ä»¥ä¸º Kubernetes è®¾è®¡ã€æ„å»ºã€é…ç½®å’Œå‘å¸ƒäº‘åŸç”Ÿåº”ç”¨ç¨‹åºã€‚ç»è¿‡è®¤è¯çš„ Kubernetes Application Developer å¯ä»¥å®šä¹‰åº”ç”¨ç¨‹åºèµ„æºå¹¶ä½¿ç”¨æ ¸å¿ƒåŸè¯­æ¥æ„å»ºã€ç›‘æ§ Kubernetes ä¸­å¯ä¼¸ç¼©åº”ç”¨ç¨‹åºå’Œæ’é™¤æ•…éšœã€‚\n- [KCSP](https:\/\/www.cncf.io\/certification\/kcsp\/)ï¼ˆKubernetes æœåŠ¡æä¾›å•†è®¤è¯ï¼‰ï¼šæˆªæ­¢æœ¬æ–‡å‘ç¨¿æ—¶å…±æœ‰ 74 å®¶ä¼ä¸šé€šè¿‡è¯¥è®¤è¯ã€‚è¯¥è®¤è¯çš„ä¸»ä½“æ˜¯ä¼ä¸šæˆ–ç»„ç»‡ï¼Œé€šè¿‡ KCSP çš„ä¼ä¸šæ„å‘³ç€å¯ä»¥ä¸ºå…¶ä»–ç»„ç»‡æä¾› Kubernetes æ”¯æŒã€å’¨è¯¢ã€ä¸“ä¸šæœåŠ¡å’ŒåŸ¹è®­ã€‚é€šè¿‡è¯¥è®¤è¯çš„ä¸­å›½ä¼ä¸šæœ‰ï¼šçµé›€äº‘ã€é˜¿é‡Œäº‘ã€åšäº‘ã€æ‰äº‘ã€DaoCloudã€EasyStackã€æ˜“å»ºç§‘æŠ€ã€ç²¾çµäº‘ã€è°äº‘ç§‘æŠ€ã€åä¸ºã€æ—¶é€Ÿäº‘ã€æ˜Ÿå·ç§‘æŠ€ã€ç¿äº‘æ™ºåˆã€æ²ƒè¶£ã€å…ƒé¼ç§‘æŠ€ã€ZTEã€‚\n- [Certified Kubernetes Conformance](https:\/\/www.cncf.io\/certification\/software-conformance\/)ï¼ˆKubernetes ä¸€è‡´æ€§è®¤è¯ï¼‰ï¼šé€šè¿‡è¯¥è®¤è¯çš„ Kubernetes æä¾›å•†æ‰€æä¾›çš„æœåŠ¡ï¼Œæ„å‘³ç€å…¶å¯ä»¥ä¿è¯ Kubernetes API çš„å¯ç§»æ¤æ€§åŠè·¨äº‘çš„äº’æ“ä½œæ€§ï¼›åŠæ—¶æ›´æ–°åˆ°æœ€æ–°çš„ Kubernetes ç‰ˆæœ¬ï¼›æ˜¯å¦ä¸€è‡´æ˜¯å¯ä»¥é€šè¿‡[è¿è¡Œå¼€æºè„šæœ¬](https:\/\/github.com\/cncf\/k8s-conformance\/blob\/master\/instructions.md)éªŒè¯çš„ã€‚æˆªæ­¢æœ¬æ–‡å‘ç¨¿é€šè¿‡è¯¥è®¤è¯çš„ä¸­å›½ä¼ä¸šçš„å‘è¡Œç‰ˆæœ‰ï¼šçµé›€äº‘ï¼ˆACEã€ACPã€AKSï¼‰ã€æ‰äº‘ Compassã€åä¸º FusionStageã€é…·æ ˆç§‘æŠ€ CStack MiaoYunã€Daocloud Enterpriseã€æ–°æ™ºè®¤çŸ¥æ–°æ°¦äº‘ã€æµªæ½®äº‘ã€äº¬ä¸œ TIGã€ç½‘æ˜“äº‘ã€ä¸ƒç‰›äº‘ã€åŒæ–¹æœ‰äº‘ã€ç¿äº‘æ™ºåˆ WiseCloudï¼›é€šè¿‡è®¤è¯çš„ä¸­å›½ä¼ä¸šæ‰˜ç®¡å¹³å°æœ‰ï¼šé˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ã€åšäº‘ã€EasyStackã€æ˜“å»ºç§‘æŠ€ã€è°äº‘ç§‘æŠ€ã€åä¸ºäº‘ CCEã€è…¾è®¯äº‘ TKEã€æ—¶é€Ÿäº‘ã€ZTE TECSã€‚\n\nä»¥ä¸Šæ˜¯ CNCF æä¾›çš„ä¸»è¦è¯ä¹¦ï¼Œä¸€èˆ¬é€šè¿‡ KCSP çš„ä¼ä¸šéƒ½è¦å…ˆé€šè¿‡ Kubernetes ä¸€è‡´æ€§è®¤è¯ï¼Œè€Œé€šè¿‡ Kubernetes ä¸€è‡´æ€§è®¤è¯ä¸ä¸€å®šè¦åŒæ—¶é€šè¿‡ KCSPï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šé€šè¿‡ Kubernetes ä¸€è‡´æ€§è®¤è¯çš„ä¼ä¸šå°±ä¸ä¸€å®šä¼šé€šè¿‡ KCSPï¼Œå› ä¸º KCSP çš„è¦æ±‚æ›´å¤šï¼Œè‡³å°‘è¦æˆä¸º CNCF ä¼šå‘˜æ‰å¯ä»¥ã€‚\n\nä¸‹é¢å°†å°± CNCF ä¼šå‘˜ã€æ‰˜ç®¡é¡¹ç›®çš„æˆç†Ÿåº¦ç­‰çº§åˆ’åˆ†ã€Kubernetes æœåŠ¡æä¾›å•†è®¤è¯å’Œ Kubernetes æä¾›å•†è®¤è¯åšè¯¦ç»†è¯´æ˜ã€‚\n\n## CNCF ä¼šå‘˜\n\n2018 å¹´ CNCF çš„ä¼šå‘˜å•ä½ç»å†äº†çˆ†å‘å¼å¢é•¿ï¼Œä» 170 å®¶å¢é•¿åˆ° 365 å®¶ã€‚CNCF åˆ¶å®šäº†å¦‚ä¸‹çš„ä¼šå‘˜ç­‰çº§ï¼š\n\n- Silver Member\n- Gold Member\n- Platinum Member\n- Academic\/Nonprofit Member\n- End User Member\n\nä¸åŒç­‰çº§çš„ä¼šå‘˜éœ€è¦äº¤çº³çš„å¹´è´¹ä¸æƒç›Šä¸åŒï¼Œè¯¦æƒ…è¯·è§ \u003chttps:\/\/www.cncf.io\/about\/join\/\u003eã€‚\n\n### æˆä¸º CNCF ä¼šå‘˜çš„å¥½å¤„\n\næˆä¸º CNCF ä¼šå‘˜åŒ…æ‹¬ä½†ä¸é™äºå¦‚ä¸‹å¥½å¤„ï¼š\n\n- å°†å¯ä»¥å‚ä¸ CNCF å¸‚åœºå§”å‘˜ä¼šã€CNCF Webinarã€åœ¨ CNCF å’Œ Kubernetes å®˜ç½‘å‘è¡¨åšå®¢ã€åšå®¢è¢« KubeWeekly æ”¶å½•ã€\n- è·å¾— KubeCon \u002b CloudNativeCon çš„é—¨ç¥¨æŠ˜æ‰£å’Œå‚ä¸å¤§ä¼šçš„å¸‚åœºæ´»åŠ¨\n- å¯¹äº Kubernetes ç³»åˆ—è®¤è¯å¦‚ KCSPã€å…¥é€‰ TOC ä¹Ÿè¦æ±‚å¿…é¡»æˆä¸º CNCF ä¼šå‘˜æ‰å¯ä»¥è·å¾—\n- End User Case Study\n- æœ‰æœºä¼šåŠ å…¥ Ambassador è®¡åˆ’\n- åœ¨ç¤¾åŒºé‡Œå…·æœ‰æ›´å¤šçš„è¯è¯­æƒï¼Œä¾‹å¦‚ CNCF åœ¨å…¨çƒèŒƒå›´å†…ç»„ç»‡çš„æ´»åŠ¨\n\n## é¡¹ç›®æˆç†Ÿåº¦ç­‰çº§\n\nè‡ª 2015 å¹´åº• CNCF åˆ›ç«‹ä¹‹åˆ Kubernetes æˆä¸ºå…¶é¦–ä¸ªæ‰˜ç®¡é¡¹ç›®ä»¥æ¥ï¼Œæˆªæ­¢åˆ° 2018 å¹´åº•ï¼ŒCNCF å·²ç»æ‰˜ç®¡äº†[32 ä¸ªå¼€æºé¡¹ç›®](https:\/\/www.cncf.io\/projects\/)ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®åŠ å…¥åˆ° CNCFï¼Œä¸ºäº†æ›´å¥½çš„ç®¡ç†è¿™äº›é¡¹ç›®ï¼Œä¸ºè¿™äº›é¡¹ç›®åˆ’åˆ†ä¸åŒçš„æˆç†Ÿåº¦ç­‰çº§å°±æˆäº†è¿«åœ¨çœ‰ç«çš„äº‹æƒ…ã€‚\n\n![CNCF é¡¹ç›®æˆç†Ÿåº¦çº§åˆ«](cncf-graduation-criteria-v2.jpg)\n\næ ¹æ®ã€ŠCrossing the Chasmã€‹ä¸€ä¹¦ä¸­çš„æŠ€æœ¯é‡‡ç”¨ç”Ÿå‘½å‘¨æœŸç†è®ºï¼ŒCNCF å°†å…¶æ‰˜ç®¡çš„é¡¹ç›®åˆ’åˆ†ä¸ºä¸‰ä¸ªç­‰çº§ï¼š\n\n- Graduatedï¼šå¯¹åº”äºæ—©æœŸæˆç†Ÿé¡¹ç›®ã€‚æˆªæ­¢åˆ°æœ¬æ–‡å‘ç¨¿æ—¶åªæœ‰ [Kubernetes](https:\/\/kubernetes.io\/)ã€[Prometheus](https:\/\/prometheus.io\/)ã€[Envoy](https:\/\/www.envoyproxy.io\/) å’Œ https:\/\/coredns.io\/ æ¯•ä¸šã€‚\n- Incubatingï¼šå¯¹åº”äºæ—©æœŸé‡‡ç”¨è€…é˜¶æ®µã€‚æˆªæ­¢åˆ°æœ¬æ–‡å‘ç¨¿æ—¶æœ‰ 16 ä¸ªé¡¹ç›®ã€‚\n- Sandboxï¼šå¯¹åº”äºåˆ›æ–°è€…é˜¶æ®µã€‚æˆªæ­¢åˆ°æœ¬æ–‡å‘ç¨¿æ—¶æœ‰ 12 ä¸ªé¡¹ç›®ã€‚\n\næŸ¥çœ‹ CNCF æ‰˜ç®¡çš„é¡¹ç›®åˆ—è¡¨è¯·è®¿é—®ï¼šhttps:\/\/www.cncf.io\/projects\/\n\nCNCF é€šè¿‡ä¸ºé¡¹ç›®è®¾ç½®æˆç†Ÿåº¦æ°´å¹³æ˜¯æ¥å»ºè®®ä¼ä¸šåº”è¯¥é‡‡ç”¨å“ªäº›é¡¹ç›®ã€‚CNCF ä¸­æ‰˜ç®¡çš„é¡¹ç›®é€šè¿‡å‘ CNCF çš„æŠ€æœ¯ç›‘ç£å§”å‘˜ä¼šï¼ˆTOCï¼‰å±•ç¤ºå…¶å¯æŒç»­å‘å±•æ€§æ¥æé«˜å…¶æˆç†Ÿåº¦ï¼šé¡¹ç›®çš„é‡‡ç”¨ç‡ï¼Œå¥åº·çš„å˜åŒ–ç‡ï¼Œæœ‰æ¥è‡ªå¤šä¸ªç»„ç»‡çš„æäº¤è€…ï¼Œé‡‡ç”¨äº† [CNCF è¡Œä¸ºå‡†åˆ™](https:\/\/github.com\/cncf\/foundation\/blob\/master\/code-of-conduct-languages\/zh.md)ï¼Œå®ç°å¹¶ç»´æŠ¤äº†æ ¸å¿ƒåŸºç¡€è®¾æ–½å€¡è®®ï¼ˆCore Infrastructure Initiativeï¼‰[æœ€ä½³å®è·µè¯ä¹¦](https:\/\/bestpractices.coreinfrastructure.org\/)ã€‚è¯¦ç»†ä¿¡æ¯åœ¨ [æ¯•ä¸šæ ‡å‡† v1.1](https:\/\/github.com\/cncf\/toc\/blob\/master\/process\/graduation_criteria.adoc)ã€‚\n\n## Certified Kubernetes Service Provider\n\né€šè¿‡ [KCSP](https:\/\/www.cncf.io\/certification\/kcsp\/) æ„å‘³ç€ä¼ä¸šå…·æœ‰ä¸ºå…¶ä»–ä¼ä¸šæˆ–ç»„ç»‡æä¾› Kubernetes æ”¯æŒã€å’¨è¯¢ã€ä¸“ä¸šæœåŠ¡å’ŒåŸ¹è®­çš„èµ„è´¨ã€‚2018 å¹´åˆæœ‰ 46 å®¶ä¼ä¸šé€šè¿‡äº†[KCSP](https:\/\/www.cncf.io\/certification\/kcsp\/)ï¼Œé€šè¿‡è¯¥è®¤è¯çš„ä¼ä¸šç´¯è®¡è¾¾åˆ° 76 å®¶ã€‚\n\n**å¦‚ä½•é€šè¿‡ KCSP**\n\nè¦æƒ³é€šè¿‡ KCSP å¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š\n\n- ä¸‰åæˆ–æ›´å¤šå·¥ç¨‹å¸ˆé€šè¿‡è®¤è¯ Kubernetes ç®¡ç†å‘˜ï¼ˆCKAï¼‰è€ƒè¯•ã€‚*ï¼ˆCKAD è€ƒè¯•ä¸è®¡å…¥æ­¤è¦æ±‚ï¼‰* \n- æ”¯æŒä¼ä¸šæœ€ç»ˆç”¨æˆ·çš„å•†ä¸šæ¨¡å¼ï¼ŒåŒ…æ‹¬ä¸ºå®¢æˆ·æä¾›é©»åœºå·¥ç¨‹å¸ˆ\n- æˆä¸º CNCF ä¼šå‘˜\n\né€šè¿‡ KCSP æœ‰å¦‚ä¸‹å¥½å¤„ï¼š\n\n- ä¼ä¸šçš„ logo ä¼šå‡ºç°åœ¨ [Kubernetes Partners](https:\/\/kubernetes.io\/partners\/) é¡µé¢\n- å‚åŠ ä¸äº‘åŸç”Ÿé¡¹ç›® leaderã€TOC æˆå‘˜ã€CNCF Governing Board çš„æœˆåº¦ä¼šè®®\n- å‘ç»ˆç«¯ç”¨æˆ·çš„ leader å¯»æ±‚å¸®åŠ©\n\nå› ä¸ºæœ‰å¦‚ä¸Šè¿™äº›å¥½å¤„ï¼Œä¸ºäº†è·å¾— Kubernetes é¡¹ç›®å®æ–½çš„èµ„è´¨ï¼ŒåŒæ—¶ä¿æŒä¸åŸºé‡‘ä¼šè‡³ä»Šçš„äº¤æµï¼ŒKubernetes å‚å•†å¯¹è¯¥è®¤è¯éƒ½è¶‹ä¹‹è‹¥é¹œã€‚\n\n## Certified Kubernetes offering\n\né€šè¿‡ KCSP è®¤è¯åªä»£è¡¨ä¼ä¸šæœ‰ä¸ºä»–äººå®æ–½ Kubernetes é¡¹ç›®çš„èµ„è´¨ï¼Œè€Œä¼ä¸šè‡ªèº«å¯èƒ½å¹¶ä¸å¯¹å¤–æä¾› Kubernetes å¹³å°æˆ–æœåŠ¡ï¼Œè¿™äº›ä¼ä¸šå¯èƒ½åªæ˜¯ç³»ç»Ÿé›†æˆå•†æˆ– ISVï¼Œè¿™æ—¶å€™ CNCF åˆæ¨å‡ºäº† Kubernetes æä¾›å•†è®¤è¯ã€‚\n\nKubernetes è®¤è¯çš„æä¾›å•†åŒ…æ‹¬ Kubernetes å‘è¡Œç‰ˆã€æ‰˜ç®¡å¹³å°å’Œå®‰è£…å™¨ï¼Œé€šè¿‡è®¤è¯çš„å·¥å…·æˆ–å¹³å°å°†å…è®¸ä½¿ç”¨ Kubernetes è®¤è¯çš„ Logoï¼Œå¹¶ä¿è¯ Kubernetes ä¸€è‡´æ€§è®¤è¯ã€‚\n\n## å±•æœ› 2019\n\n2018 å¹´ Kubernetes æˆä¸º CNCF å­µåŒ–çš„é¦–ä¸ªæ¯•ä¸šé¡¹ç›®ï¼Œæ ¹æ® CNCF æ‰“é€ çš„é¡¹ç›®æˆç†Ÿåº¦æ¨¡å‹ï¼ŒPrometheusã€Envoyã€CoreDNS ç›¸ç»§æ¯•ä¸šï¼ŒCNCF çš„çœ¼å…‰æ—©å·²ä¸å†ä»…ç›¯ç€ Kubernetes äº†ï¼Œ[CNCF Landscape](https:\/\/landscape.cncf.io) å‡ ä¹åŒ…æ½äº†æ‰€æœ‰äº‘è®¡ç®—ç›¸å…³å¼€æºé¡¹ç›®ã€‚å¯ä»¥è¯´ CNCF æ—©å·²è¶…å‡ºäº† Kubernetes çš„èŒƒç•´ï¼Œè€Œæ˜¯æ—¨åœ¨ä¸€ä¸ªå»ºç«‹åœ¨ Kubernetes ä¸ºåº•å±‚èµ„æºè°ƒåº¦å’Œåº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¹‹ä¸Šçš„ç”Ÿæ€ç³»ç»Ÿï¼ŒCNCF ä¸­è¿˜æ¼”è¿›å‡ºäº†å¦‚ Service Mesh å’Œ Serverless ä¹‹ç±»çš„åˆ†æ”¯ã€‚\n\nä» CNCF 2017 å’Œ 2018 å¹´åº¦çš„å˜åŒ–æ¥çœ‹ï¼Œå…¶ä¸­å·²ç»å»æ‰äº†â€dynamically orchestratingâ€œçš„å­—çœ¼ï¼Œä¹Ÿå°±æ„å‘³ç€ Kubernetes åœ¨å®¹å™¨ç¼–æ’é¢†åŸŸå·²ç»èƒœå‡ºï¼Œè¿›è€Œå¼ºè°ƒå¤šäº‘ç¯å¢ƒï¼ŒåŒæ—¶ CNCF æ¨åŠ¨çš„ Kubernetes ä¸€è‡´æ€§è®¤è¯ä¹Ÿå—åˆ°ä¼—å¤šäº‘å‚å•†çš„æ”¯æŒï¼Œè¿™ä¹Ÿæ„å‘³ç€ Kubernetes å°†æˆä¸ºå¤šäº‘ç¯å¢ƒ API ä¸€è‡´æ€§çš„ä¿è¯ã€‚\n\nCNCF åœ¨ 2019 å¹´çš„æˆ˜ç•¥å°†æ›´èšç„¦äºå¼€å‘è€…ç¤¾åŒºï¼ŒååŠ©å°¤å…¶æ˜¯æ¥è‡ªç»ˆç«¯ç”¨æˆ·çš„å¼€å‘è€…æˆä¸ºé¡¹ç›®çš„ contributor å’Œ maintainerï¼Œä¿è¯ç»ˆç«¯ç”¨æˆ·çš„æ„è§èƒ½å¤Ÿåœ¨ç¤¾åŒºé‡Œè¢«æ­£ç¡®åœ°ä¼ è¾¾å’Œå¹¶æœ€ç»ˆæˆåŠŸåœ°é‡‡çº³äº‘åŸç”Ÿã€‚\n\n## å‚è€ƒ\n\n- CNCF Annual Report 2017 pdf\n- [CNCF Annual Report 2018 pdf](https:\/\/www.cncf.io\/wp-content\/uploads\/2019\/02\/CNCF_Annual_Report_2018_FInal.pdf)\n- [CNCF  Projects](https:\/\/www.cncf.io\/projects\/)\n- [CNCF Landscape](https:\/\/landscape.cncf.io)\n- [CNCF Ambassadors](https:\/\/www.cncf.io\/people\/ambassadors\/)\n- [Kubernetes Certified Service Providers](https:\/\/www.cncf.io\/certification\/kcsp\/)\n\n', '\/blog\/cncf-annual-report-2018-review\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡æ˜¯å¯¹ CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰2018 å¹´å¹´åº¦æŠ¥å‘Šçš„è§£è¯»ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/service-mesh-in-action-by-yangzhangxian-review/">ã€ŠService Mesh å®æˆ˜â€”åŸºäº Linkerd å’Œ Kubernetes çš„å¾®æœåŠ¡å®è·µã€‹è¯»åæ„Ÿ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2019/01/08</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/service-mesh"> 
             Service Mesh
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ã€ŠService Mesh å®æˆ˜â€”åŸºäº Linkerd å’Œ Kubernetes çš„å¾®æœåŠ¡å®è·µã€‹è¯»åæ„Ÿ', 'é¡ºä¾¿å¯¹æ¯”äº†ä¸‹ Linkerd å’Œ Envoyï¼Œç»™è¯»è€…ä¸€äº›æˆ‘è‡ªå·±çš„å»ºè®®ã€‚', '\næœ€è¿‘åœ¨å›é¡¾ Service Mesh æŠ€æœ¯åœ¨ 2018 å¹´çš„å‘å±•ï¼Œæƒ³å†çœ‹çœ‹ Linkerdï¼Œæ­£å¥½**æ¨å½°æ˜¾**çš„è¿™æœ¬ã€ŠService Mesh å®æˆ˜â€”â€”åŸºäº Linkerd å’Œ Kubernetes çš„å¾®æœåŠ¡å®è·µã€‹ä¸Šå¸‚å‘å”®äº†ï¼Œ**æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾**çš„ç¼–è¾‘é€äº†æˆ‘ä¸€æœ¬ï¼ŒğŸ™**æ¨ç¦å·**ç¼–è¾‘ï¼Œæˆ‘çœ‹äº†ä¸‹æŠ½ç©ºå†™äº†ç‚¹è¯»åæ„Ÿï¼Œæˆ‘çœ‹äº†ä¸‹æŠ½ç©ºå†™äº†ç‚¹è¯»åæ„Ÿï¼Œå…¶å®ä¹Ÿè¯´ä¸ä¸Šæ˜¯è¯»åæ„Ÿï¼Œå°±å½“æ˜¯è‡ªå·±çš„ä¸€ç‚¹æ„Ÿæ‚Ÿå§ï¼Œå°±å½“æ‹¿æ­¤ä¹¦å€Ÿé¢˜å‘æŒ¥å§ï¼Œè¿™ä¸ªçŸ¥è¯†çˆ†ç‚¸çš„å¹´ä»£ï¼ŒæŠ€æœ¯å‘å±•å¦‚æ­¤è¿…é€Ÿï¼Œå¯ä»¥è¯´æ˜¯ IT äººå‘˜çš„å¹¸è¿ï¼Œä¹Ÿæ˜¯ä¸å¹¸ï¼æœ‰å¤šå°‘å†™å¼€æºè½¯ä»¶çš„ä¹¦æ¨å‡ºä¸€ç‰ˆåèƒ½æ’‘è¿‡ä¸‰å¹´çš„ï¼Ÿå¦‚æœè½¯ä»¶çº¢å¾—å‘ç´«ï¼ŒæŒç»­è¿­ä»£ N ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚ Kubernetesï¼Œæœ€è¿‘ä¸¤å¹´ä»¥æ¯ä¸‰ä¸ªæœˆä¸€ä¸ªç‰ˆæœ¬çš„é€Ÿåº¦è¿­ä»£ï¼Œä¹‹å‰çš„ä¹¦æ—©å°±è·Ÿä¸ä¸ŠèŠ‚å¥ï¼Œè¦ä¹ˆå°±è¦ä¸æ–­æ¨å‡ºæ–°ç‰ˆï¼Œç›´åˆ°è½¯ä»¶ç¨³å®šåä¸å†æœ‰å¤§çš„æ”¹åŠ¨ã€‚è¿˜æœ‰ç§å¯èƒ½å°±æ˜¯è½¯ä»¶æ¨å¹¿å’Œå‘å±•çš„ä¸ç†æƒ³ï¼Œæ— äººé—®æ´¥ï¼Œå†™è¿™æ ·è½¯ä»¶çš„ä¹¦å°±ä¸ä¼šæœ‰å†ç‰ˆäº†ã€‚\n\næ‹¿åˆ°æœ¬ä¹¦åæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯çœ‹çœ‹è¿™æœ¬ä¹¦å®šç¨¿çš„æ—¶å€™ Istio æ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼ŒLinkerd åˆæ˜¯ä»€ä¹ˆç‰ˆæœ¬ã€‚å› ä¸ºåœ¨è¿™ä¸€å¹´å†…ä¸¤æ¬¾å¼€æºè½¯ä»¶éƒ½æœ‰è¾ƒå¤§çš„ç‰ˆæœ¬å˜åŠ¨ï¼Œå¦‚æœä¹¦ç±å®šç¨¿çš„æ—¶å€™åŸºäºçš„è½¯ä»¶ç‰ˆæœ¬å¤ªä½ï¼Œè½¯ä»¶æ¶æ„å¯èƒ½ä¼šæœ‰è¾ƒå¤§çš„å˜åŒ–ï¼Œå½±å“ä¹¦ä¸­ç¤ºä¾‹å’Œéƒ¨åˆ†ç« èŠ‚çš„æ—¶æ•ˆæ€§ã€‚è¿™ä¹Ÿæ˜¯å¤§å¤šæŠ€æœ¯ä¹¦ç±åçŸ­çš„ç—‡ç»“æ‰€åœ¨ï¼ŒæŠ€æœ¯å‘å±•æ˜¯åœ¨å¤ªå¿«ï¼Œä¼ ç»Ÿçš„ä¹¦ç±å‡ºç‰ˆæµç¨‹å¾€å¾€è¿‡äºç¹çå’Œå†—é•¿ï¼Œç­‰åˆ°ä¹¦ç±å‡ºç‰ˆåæ‰€ä»‹ç»çš„è½¯ä»¶éƒ½å‡ºäº†å¥½å‡ ä¸ªç‰ˆæœ¬ã€‚ä¾‹å¦‚ Kubernetes è¿™ç§çš„è½¯ä»¶ï¼Œæ¯ä¸‰ä¸ªæœˆä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œå†™ä¸€èˆ¬ä¹¦ä»ç­–åˆ’åˆ°å‘è¡Œå°‘è¯´åŠå¹´ï¼Œä¸€èˆ¬ä¹Ÿè¦ä¸€å¹´çš„æ—¶é—´ã€‚\n\n## å…³äºä¹¦ç±å®šç¨¿æ—¶çš„è½¯ä»¶ç‰ˆæœ¬\n\n**Istio 0.8**\n\næœ¬ä¹¦ç¬¬ä¸€ç« ã€ŒService Mesh ç®€ä»‹ã€å¯¹ Service Mesh ç›¸å…³å¼€æºäº§å“ä»‹ç»æ—¶æåˆ°æœ¬ä¹¦å®šç¨¿æ—¶ Istio æ˜¯ 0.8 ç‰ˆæœ¬ï¼Œè€Œ Istio åœ¨ 2018 å¹´ 7 æœˆ 31 æ—¥å‘å¸ƒäº† 1.0 ç‰ˆæœ¬ã€‚\n\nè¿™æœ¬ä¹¦å®šç¨¿æ—¶ï¼ŒIstio çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 0.8ã€‚\n\n**Linkerd 1.3.6**\n\næœ¬ä¹¦ä»åºè¨€å¼€å§‹ä¸€ç›´åˆ°ç¬¬äºŒç« ç»“æŸä¹Ÿæ²¡æœ‰æåŠå†™ä½œæ—¶åŸºäºçš„ Linkerd ç‰ˆæœ¬ï¼Œæˆ‘åœ¨ç¬¬äºŒç« çš„å®‰è£…æ­¥éª¤ä¸­çœ‹åˆ°äº†è¯´æ˜ã€‚\n\nå¯ä»¥çœ‹åˆ°æœ¬ä¹¦å†™ä½œæ—¶æ˜¯åŸºäº Linkerd 1.3.6 ç‰ˆæœ¬ï¼Œè€Œ Linkerd åœ¨åŒå¹´çš„ 9 æœˆ 18 æ—¥å‘å¸ƒäº† [2.0 GA](https:\/\/cloudnative.to\/blog\/linkerd-2-0-in-general-availability\/)ï¼Œè¿™ä¸€ç‰ˆæœ¬è·Ÿ 1.x ç‰ˆæœ¬ç›¸æ¯”æœ‰é‡å¤§å˜åŒ–â€”â€”å®ƒè¿˜å°†é¡¹ç›®ä»é›†ç¾¤èŒƒå›´çš„ service mesh è½¬æ¢ä¸ºå¯ç»„åˆçš„ *service sidecar* ï¼Œæ—¨åœ¨ä¸ºå¼€å‘äººå‘˜å’ŒæœåŠ¡æ‰€æœ‰è€…æä¾›åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­æˆåŠŸæ‰€éœ€çš„å…³é”®å·¥å…·ã€‚\n\n## Linkerd vs Envoy\n\nLinkerd 2.0 çš„ service sidecar è®¾è®¡ä½¿å¼€å‘äººå‘˜å’ŒæœåŠ¡æ‰€æœ‰è€…èƒ½å¤Ÿåœ¨ä»–ä»¬çš„æœåŠ¡ä¸Šè¿è¡Œ Linkerdï¼Œæä¾›è‡ªåŠ¨å¯è§‚æµ‹æ€§ã€å¯é æ€§å’Œè¿è¡Œæ—¶è¯Šæ–­ï¼Œè€Œæ— éœ€æ›´æ”¹é…ç½®æˆ–ä»£ç ã€‚é€šè¿‡æä¾›è½»é‡çº§çš„å¢é‡è·¯å¾„æ¥è·å¾—å¹³å°èŒƒå›´çš„é¥æµ‹ã€å®‰å…¨æ€§å’Œå¯é æ€§çš„ä¼ ç»Ÿ service mesh åŠŸèƒ½ï¼Œservice sidecar æ–¹æ³•è¿˜é™ä½äº†å¹³å°æ‰€æœ‰è€…å’Œç³»ç»Ÿæ¶æ„å¸ˆçš„é£é™©ã€‚è¯¥ç‰ˆæœ¬è¿˜ç”¨ Rust é‡å†™äº†ä»£ç†éƒ¨åˆ†ï¼Œåœ¨å»¶è¿Ÿï¼Œååé‡å’Œèµ„æºæ¶ˆè€—æ–¹é¢äº§ç”Ÿäº†æ•°é‡çº§çš„æ”¹è¿›ã€‚\n\nè€Œ Linkerd 1.x ç»§æ‰¿è‡ª Twitter å¼€æºçš„ Finagle é«˜æ€§èƒ½ RPCï¼Œæ‰€æœ‰æƒ³è¦æ·±åº¦å­¦ä¹  Linkerd 1.x è¿˜éœ€è¦äº†è§£ Finagleï¼Œè¿™å°±è·Ÿ Istio å°† Envoy ä½œä¸ºé»˜è®¤çš„æ•°æ®å¹³é¢ä¸€æ ·ï¼Œè¦æƒ³æ·±åº¦å­¦ä¹  Istio å¿…é¡»äº†è§£ Envoyã€‚\n\näºŒè€…å‡ ä¹ä½¿ç”¨äº†å®Œå…¨ä¸åŒçš„æœ¯è¯­ï¼Œå‡å¦‚ä½ å·²ç»äº†è§£äº† [Envoy](https:\/\/envoyproxy.io) æƒ³è¦å†åˆ‡æ¢åˆ° Linkerd ä¸Šï¼Œé‚£ä¹ˆå°±è¦å†è´¹å¾ˆå¤šå¿ƒåŠ›æ¥å­¦ä¹ å®ƒçš„æ¦‚å¿µå’ŒåŸç†ï¼Œä¾‹å¦‚å¦‚ä¸‹è¿™äº›æœ¯è¯­æˆ–é…ç½®ï¼ˆLinkerd ä¸­ç‹¬æœ‰çš„é…ç½®ï¼‰ï¼š\n\n- **dtabï¼ˆå§”æ‰˜è¡¨ï¼‰**ï¼šç”±ä¸€ç³»åˆ—è·¯ç”±ç»„æˆï¼Œç”±ä¸€ç³»åˆ—è·¯ç”±è§„åˆ™ç»„æˆï¼Œä»¥é€»è¾‘è·¯å¾„ä¸ºè¾“å…¥ï¼Œç„¶åç»è¿‡è·¯ç”±è§„åˆ™åšä¸€ç³»åˆ—è½¬æ¢ç”Ÿæˆå…·ä½“åå­—ã€‚è¿™æ˜¯ Linkerd è·¯ç”±æœºåˆ¶çš„æ ¹æœ¬ï¼Œå°±åƒ Envoy ä¸­çš„ [xDS åè®®](https:\/\/jimmysong.io\/istio-handbook\/data-plane\/envoy-xds.html)ä¸€æ ·ï¼Œæœ¬ä¹¦çš„ç¬¬å››ç« ã€Œæ·±å…¥ Linkerd æ•°æ®è®¿é—®æµã€ä¸“é—¨è®²è§£äº† dtab çš„å®ç°æœºåˆ¶ã€‚\n- **dentryï¼ˆå§”æ‰˜è¡¨è®°å½•ï¼‰**ï¼šå§”æ‰˜è¡¨çš„æ¯æ¡è·¯ç”±è§„åˆ™ç§°ä¸º dentryï¼Œå¦‚ \/consul =\u003e \/#\/io.l5d.consul\/dc1ã€‚\n- **namer**ï¼šé…ç½® Linkerd æ”¯æŒçš„æœåŠ¡å‘ç°å·¥å…·ã€‚\n- **namerd**ï¼šLinkerd çš„æ§åˆ¶å¹³é¢ï¼Œç›¸å½“äº Istio ä¸­çš„ Pilotï¼Œå¯¹æ¥å„ç§æœåŠ¡å‘ç°ã€‚å½“ç„¶ Linkerd ä¹Ÿå¯ä»¥ç›´æ¥ä¸æŸä¸ªæœåŠ¡å‘ç°å¹³å°å¯¹æ¥å¦‚ consulï¼Œè€Œä¸ä½¿ç”¨ namerd è¿™ä¸ªé›†ä¸­è·¯ç”±å’Œé…ç½®ç®¡ç†ç»„ä»¶ã€‚\n- **interpreter**ï¼šinterpreter å†³å®šå¦‚ä½•è§£ææœåŠ¡åå­—å’Œå®¢æˆ·ç«¯åå­—ã€‚\n\nè™½ç„¶ Linkerd ä¹Ÿæ˜¯ [CNCF ä¸­çš„é¡¹ç›®](https:\/\/www.cncf.io\/projects\/)ï¼Œä½†å®ƒç›®å‰è¿˜å¤„äºå­µåŒ–é˜¶æ®µï¼Œè€Œ Envoy çš„ [xDS åè®®](https:\/\/jimmysong.io\/istio-handbook\/data-plane\/envoy-xds.html)å·²ç»è¢«ä¼—å¤šå¼€æºé¡¹ç›®æ‰€æ”¯æŒï¼Œå¦‚ [Istio](https:\/\/istio.io\/zh)ã€[SOFAMesh](https:\/\/github.com\/alipay\/sofa-mesh)ã€[NginxMesh](https:\/\/github.com\/nginxinc\/nginmesh) ç­‰ï¼Œä¸” Envoy å·²ç»ä» CNCF ä¸­æ¯•ä¸šï¼Œä»¥åå¯èƒ½æˆä¸º Service Mesh é¢†åŸŸçš„æ ‡å‡†åè®®ï¼ŒLinkerd çš„ç”Ÿå­˜çŠ¶å†µå ªå¿§ã€‚\n\n## å…³äºæœ¬ä¹¦\n\næœ¬ä¹¦ä¸­æ‰€æœ‰ç¤ºä¾‹éƒ½æä¾›äº†è™šæ‹Ÿæœºçš„å¿«é€Ÿä¸Šæ‰‹ç¯å¢ƒï¼Œåªè¦ä½¿ç”¨ Vagrant å³å¯åˆ›å»ºè™šæ‹Ÿæœºå’Œåº”ç”¨ï¼Œæ‰€ä»¥åœ¨æœ¬ä¹¦çš„[ç¤ºä¾‹ä»£ç ](https:\/\/github.com\/yangzhares\/linkerd-in-action)æœ‰å¤§é‡çš„ Vagrantfileã€‚\n\næœ¬ä¹¦ç¬¬ä¸‰éƒ¨åˆ†ã€Œå®æˆ˜ç¯‡ã€èŠ±äº†å¤§é‡ç¯‡å¹…ï¼ˆæœ¬ä¹¦ä¸€åŠçš„é¡µæ•°ï¼‰æ¥è®²è§£å¦‚ä½•ä½¿ç”¨ Linkerd å’Œ Kubernetes æ¥ç®¡ç†å¾®æœåŠ¡ï¼Œå¯ä»¥å‚è€ƒæˆ‘ 2017 å¹´ 8 æœˆ 1 æ—¥å†™çš„è¿™ç¯‡[å¾®æœåŠ¡ç®¡ç†æ¡†æ¶ service meshâ€”â€”Linkerd å®‰è£…è¯•ç”¨ç¬”è®°](https:\/\/jimmysong.io\/posts\/linkerd-user-guide\/)ï¼Œé‚£æ—¶å€™è¿˜æ˜¯åŸºäº Linkerd 1.1.2ï¼Œè¿˜æœ‰ [Linkerd å®˜æ–¹ç¤ºä¾‹](https:\/\/github.com\/linkerd\/linkerd-examples\/)ï¼Œè¿™äº›ç¤ºä¾‹åŸºæœ¬éƒ½ä¸æ€ä¹ˆæ›´æ–°äº†ã€‚\n\nå› ä¸ºè¯¥ä¹¦å®šç¨¿æ—¶æ‰€åŸºäºçš„ Linkerd ç‰ˆæœ¬è·ç¦»æœ¬ä¹¦å‘å”®æ—¶çš„ Linkerd å·²ç»è½åä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬æ˜¯ [Linkerd 2.1](https:\/\/blog.linkerd.io\/2018\/12\/06\/announcing-linkerd-2-1\/)ï¼‰ï¼Œæ‰€ä»¥è¯»è€…ä¸€å®šè¦æ³¨æ„è¿™ä¸€ç‚¹ï¼Œè€å®è¯´æˆ‘åªèŠ±äº†ä¸¤ä¸ªå¤œæ™šå¿«é€Ÿè¿‡äº†ä¸€ä¸‹æœ¬ä¹¦ï¼Œæ— æ³•å¯¹æœ¬ä¹¦å†…å®¹ç»™å‡ºå…·ä½“è¯„è®ºï¼Œæ‰€ä»¥æœ¬ä¹¦æ˜¯å¦æ˜¯ä½ æ‰€éœ€è¦çš„å°±è¦ä½ è‡ªå·±å»æ€è€ƒäº†ã€‚\n\n', '\/blog\/service-mesh-in-action-by-yangzhangxian-review\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">é¡ºä¾¿å¯¹æ¯”äº†ä¸‹ Linkerd å’Œ Envoyï¼Œç»™è¯»è€…ä¸€äº›æˆ‘è‡ªå·±çš„å»ºè®®ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/envoy-proxy-config-deep-dive/">Istio çš„æ•°æ®å¹³é¢ Envoy Proxy é…ç½®è¯¦è§£</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2019/01/07</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/envoy"> 
             Envoy
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio çš„æ•°æ®å¹³é¢ Envoy Proxy é…ç½®è¯¦è§£', 'æœ¬æ–‡ä»‹ç»äº† Envoy proxy çš„æ¦‚å¿µï¼Œå¯¹åº”çš„ xDS çš„ç‰ˆæœ¬ä»¥åŠé…ç½®çš„è¯¦ç»†è§£æã€‚', '\nEnvoy æ˜¯ Istio Service Mesh ä¸­é»˜è®¤çš„ Sidecarï¼ŒIstio åœ¨ Envoy çš„åŸºç¡€ä¸ŠæŒ‰ç…§ Envoy çš„ xDS åè®®æ‰©å±•äº†å…¶æ§åˆ¶å¹³é¢ï¼Œåœ¨è®²åˆ° Envoy xDS åè®®ä¹‹å‰è¿˜éœ€è¦æˆ‘ä»¬å…ˆç†Ÿæ‚‰ä¸‹ Envoy çš„åŸºæœ¬æœ¯è¯­ã€‚ä¸‹é¢åˆ—ä¸¾äº† Envoy é‡Œçš„åŸºæœ¬æœ¯è¯­åŠå…¶æ•°æ®ç»“æ„è§£æï¼Œå…³äº Envoy çš„è¯¦ç»†ä»‹ç»è¯·å‚è€ƒ [Envoy å®˜æ–¹æ–‡æ¡£](https:\/\/cloudnative.to\/envoy\/)ï¼Œè‡³äº Envoy åœ¨ Service Meshï¼ˆä¸ä»…é™äº Istioï¼‰ä¸­æ˜¯å¦‚ä½•ä½œä¸ºè½¬å‘ä»£ç†å·¥ä½œçš„è¯·å‚è€ƒç½‘æ˜“äº‘åˆ˜è¶…çš„è¿™ç¯‡[æ·±å…¥è§£è¯» Service Mesh èƒŒåçš„æŠ€æœ¯ç»†èŠ‚ ](https:\/\/www.cnblogs.com\/163yun\/p\/8962278.html)ä»¥åŠ[ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ](\/blog\/envoy-sidecar-injection-in-istio-service-mesh-deep-dive\/)ï¼Œæœ¬æ–‡å¼•ç”¨å…¶ä¸­çš„ä¸€äº›è§‚ç‚¹ï¼Œè¯¦ç»†å†…å®¹ä¸å†èµ˜è¿°ã€‚\n\n![Envoy proxy æ¶æ„å›¾](xds.svg)\n\n## åŸºæœ¬æœ¯è¯­\n\nä¸‹é¢æ˜¯æ‚¨åº”è¯¥äº†è§£çš„ Envoy é‡Œçš„åŸºæœ¬æœ¯è¯­ï¼š\n\n- **Downstreamï¼ˆä¸‹æ¸¸ï¼‰**ï¼šä¸‹æ¸¸ä¸»æœºè¿æ¥åˆ° Envoyï¼Œå‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”ï¼Œå³å‘é€è¯·æ±‚çš„ä¸»æœºã€‚\n- **Upstreamï¼ˆä¸Šæ¸¸ï¼‰**ï¼šä¸Šæ¸¸ä¸»æœºæ¥æ”¶æ¥è‡ª Envoy çš„è¿æ¥å’Œè¯·æ±‚ï¼Œå¹¶è¿”å›å“åº”ï¼Œå³æ¥å—è¯·æ±‚çš„ä¸»æœºã€‚\n- **Listenerï¼ˆç›‘å¬å™¨ï¼‰**ï¼šç›‘å¬å™¨æ˜¯å‘½åç½‘åœ°å€ï¼ˆä¾‹å¦‚ï¼Œç«¯å£ã€unix domain socket ç­‰)ï¼Œä¸‹æ¸¸å®¢æˆ·ç«¯å¯ä»¥è¿æ¥è¿™äº›ç›‘å¬å™¨ã€‚Envoy æš´éœ²ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›‘å¬å™¨ç»™ä¸‹æ¸¸ä¸»æœºè¿æ¥ã€‚\n- **Clusterï¼ˆé›†ç¾¤ï¼‰**ï¼šé›†ç¾¤æ˜¯æŒ‡ Envoy è¿æ¥çš„ä¸€ç»„é€»è¾‘ç›¸åŒçš„ä¸Šæ¸¸ä¸»æœºã€‚Envoy é€šè¿‡æœåŠ¡å‘ç°æ¥å‘ç°é›†ç¾¤çš„æˆå‘˜ã€‚å¯ä»¥é€‰æ‹©é€šè¿‡ä¸»åŠ¨å¥åº·æ£€æŸ¥æ¥ç¡®å®šé›†ç¾¤æˆå‘˜çš„å¥åº·çŠ¶æ€ã€‚Envoy é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥å†³å®šå°†è¯·æ±‚è·¯ç”±åˆ°é›†ç¾¤çš„å“ªä¸ªæˆå‘˜ã€‚\n\næˆ‘å°†åœ¨æœ¬æ–‡çš„ååŠéƒ¨åˆ†è§£é‡Šä»¥ä¸Šæœ¯è¯­ä¸ Kubernetesã€Istio ä¸­æ¦‚å¿µä¹‹é—´çš„è”ç³»ã€‚\n\n## å…³äº xDS çš„ç‰ˆæœ¬\n\næœ‰ä¸€ç‚¹éœ€è¦å¤§å®¶æ³¨æ„ï¼Œå°±æ˜¯ Envoy çš„ API æœ‰ v1 å’Œ v2 ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä» Envoy 1.5.0 èµ· v2 API å°±å·²ç»ç”Ÿäº§å°±ç»ªäº†ï¼Œä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·é¡ºåˆ©çš„å‘ v2 ç‰ˆæœ¬çš„é¢ API è¿‡åº¦ï¼ŒEnvoy å¯åŠ¨çš„æ—¶å€™è®¾ç½®äº†ä¸€ä¸ª \u0060--v2-config-only\u0060 çš„æ ‡å¿—ï¼ŒEnvoy ä¸åŒç‰ˆæœ¬å¯¹ v1\/v2 API çš„æ”¯æŒè¯¦æƒ…è¯·å‚è€ƒ [Envoy v1 é…ç½®åºŸå¼ƒæ—¶é—´è¡¨](https:\/\/groups.google.com\/forum\/#!topic\/envoy-announce\/Lb1QZcSclGQ)ã€‚\n\nEnvoy çš„ä½œè€… Matt Klein åœ¨ [Service Mesh ä¸­çš„é€šç”¨æ•°æ®å¹³é¢ API è®¾è®¡](https:\/\/cloudnative.to\/blog\/the-universal-data-plane-api\/)è¿™ç¯‡æ–‡ç« ä¸­è¯´æ˜äº† Envoy API v1 çš„å†å²åŠå…¶ç¼ºç‚¹ï¼Œè¿˜æœ‰ v2 çš„å¼•å…¥ã€‚v2 API æ˜¯ v1 çš„æ¼”è¿›ï¼Œè€Œä¸æ˜¯é©å‘½ï¼Œå®ƒæ˜¯ v1 åŠŸèƒ½çš„è¶…é›†ã€‚\n\nåœ¨ Istio 1.0 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ **Envoy 1.8.0-dev** ç‰ˆæœ¬ï¼Œå…¶æ”¯æŒ v2 çš„ APIï¼ŒåŒæ—¶åœ¨ Envoy ä½œä¸º Sidecar proxy å¯åŠ¨çš„ä½¿ç”¨ä½¿ç”¨äº†ä¾‹å¦‚ä¸‹é¢çš„å‘½ä»¤ï¼š\n\n\u0060\u0060\u0060bash\n$ \/usr\/local\/bin\/envoy -c \/etc\/istio\/proxy\/envoy-rev0.json --restart-epoch 0 --drain-time-s 45 --parent-shutdown-time-s 60 --service-cluster ratings --service-node sidecar~172.33.14.2~ratings-v1-8558d4458d-ld8x9.default~default.svc.cluster.local --max-obj-name-len 189 --allow-unknown-fields -l warn --v2-config-only\n\u0060\u0060\u0060\n\nä¸Šé¢æ˜¯éƒ½ Bookinfo ç¤ºä¾‹ä¸­çš„ rating pod ä¸­çš„ sidecar å¯åŠ¨çš„åˆ†æï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­æŒ‡å®šäº† \u0060--v2-config-only\u0060ï¼Œè¡¨æ˜ Istio 1.0\u002b åªæ”¯æŒ xDS v2 çš„ APIã€‚\n\n## Istio sidecar proxy é…ç½®\n\nå‡å¦‚æ‚¨ä½¿ç”¨ [kubernetes-vagrant-centos-cluster](https:\/\/github.com\/rootsongjc\/kubernetes-vagrant-centos-cluster) éƒ¨ç½²äº† Kubernetes é›†ç¾¤å¹¶å¼€å¯äº† [Istio Service Mesh](https:\/\/istio.io\/zh)ï¼Œå†éƒ¨ç½² [bookinfo ç¤ºä¾‹](https:\/\/istio.io\/latest\/zh\/docs\/examples\/bookinfo\/)ï¼Œé‚£ä¹ˆåœ¨ \u0060default\u0060 å‘½åç©ºé—´ä¸‹æœ‰ä¸€ä¸ªåå­—ç±»ä¼¼äº \u0060ratings-v1-7c9949d479-dwkr4\u0060 çš„ Podï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹è¯¥ Pod çš„ Envoy sidecar çš„å…¨é‡é…ç½®ï¼š\n\n\u0060\u0060\u0060bash\nkubectl -n default exec ratings-v1-7c9949d479-dwkr4 -c istio-proxy curl http:\/\/localhost:15000\/config_dump \u003e dump-rating.json\n\u0060\u0060\u0060\n\nå°† Envoy çš„è¿è¡Œæ—¶é…ç½® dump å‡ºæ¥ä¹‹åä½ å°†çœ‹åˆ°ä¸€ä¸ªé•¿ 6000 ä½™è¡Œçš„é…ç½®æ–‡ä»¶ã€‚\n\nIstio ä¼šåœ¨ä¸º Service Mesh ä¸­çš„æ¯ä¸ª Pod æ³¨å…¥ Sidecar çš„æ—¶å€™åŒæ—¶ä¸º Envoy æ³¨å…¥ Bootstrap é…ç½®ï¼Œå…¶ä½™çš„é…ç½®æ˜¯é€šè¿‡ Pilot ä¸‹å‘çš„ï¼Œæ³¨æ„æ•´ä¸ªæ•°æ®å¹³é¢å³ Service Mesh ä¸­çš„ Envoy çš„åŠ¨æ€é…ç½®åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤æ£€æŸ¥å…¶ä»– sidecar çš„ Envoy é…ç½®æ˜¯å¦è·Ÿæœ€ä¸Šé¢çš„é‚£ä¸ªç›¸åŒã€‚\n\nä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥ Service Mesh ä¸­çš„æ‰€æœ‰æœ‰ Sidecar æ³¨å…¥çš„ Pod ä¸­çš„ proxy é…ç½®æ˜¯å¦åŒæ­¥ã€‚\n\n\u0060\u0060\u0060bash\n$ istioctl proxy-status\nPROXY                                                 CDS        LDS        EDS               RDS          PILOT                            VERSION\ndetails-v1-876bf485f-sx7df.default                    SYNCED     SYNCED     SYNCED (100%)     SYNCED       istio-pilot-5bf6d97f79-6lz4x     1.0.0\n...\n\u0060\u0060\u0060\n\n[istioctl](https:\/\/istio.io\/zh\/docs\/reference\/commands\/istioctl\/) è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·å°±åƒ [kubectl](https:\/\/jimmysong.io\/kubernetes-handbook\/guide\/kubectl-cheatsheet.html) ä¸€æ ·æœ‰å¾ˆå¤šç¥å™¨çš„é­”æ³•ï¼Œé€šè¿‡å®ƒå¯ä»¥é«˜æ•ˆçš„ç®¡ç† Istio å’Œ debugã€‚\n\n## Envoy proxy é…ç½®è§£æ\n\nIstio envoy sidecar proxy é…ç½®ä¸­åŒ…å«ä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ã€‚\n\n- **bootstrap**ï¼šEnvoy proxy å¯åŠ¨æ—¶å€™åŠ è½½çš„é™æ€é…ç½®ã€‚\n- **listeners**ï¼šç›‘å¬å™¨é…ç½®ï¼Œä½¿ç”¨ LDS ä¸‹å‘ã€‚\n- **clusters**ï¼šé›†ç¾¤é…ç½®ï¼Œé™æ€é…ç½®ä¸­åŒ…æ‹¬ xds-grpc å’Œ zipkin åœ°å€ï¼ŒåŠ¨æ€é…ç½®ä½¿ç”¨  CDS ä¸‹å‘ã€‚\n- **routes**ï¼šè·¯ç”±é…ç½®ï¼Œé™æ€é…ç½®ä¸­åŒ…æ‹¬äº†æœ¬åœ°ç›‘å¬çš„æœåŠ¡çš„é›†ç¾¤ä¿¡æ¯ï¼Œå…¶ä¸­å¼•ç”¨äº† clusterï¼ŒåŠ¨æ€é…ç½®ä½¿ç”¨ RDS ä¸‹å‘ã€‚\n\næ¯ä¸ªéƒ¨åˆ†ä¸­éƒ½åŒ…å«é™æ€é…ç½®ä¸åŠ¨æ€é…ç½®ï¼Œå…¶ä¸­ bootstrap é…ç½®åˆæ˜¯åœ¨é›†ç¾¤å¯åŠ¨çš„æ—¶å€™é€šè¿‡ sidecar å¯åŠ¨å‚æ•°æ³¨å…¥çš„ï¼Œé…ç½®æ–‡ä»¶åœ¨ \u0060\/etc\/istio\/proxy\/envoy-rev0.json\u0060ã€‚\n\nç”±äº bootstrap ä¸­çš„é…ç½®æ˜¯æ¥è‡ª Envoy å¯åŠ¨æ—¶åŠ è½½çš„é™æ€æ–‡ä»¶ï¼Œä¸»è¦é…ç½®äº†èŠ‚ç‚¹ä¿¡æ¯ã€tracingã€admin å’Œç»Ÿè®¡ä¿¡æ¯æ”¶é›†ç­‰ä¿¡æ¯ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚\n\nBootstrap æ˜¯ Envoy ä¸­é…ç½®çš„æ ¹æœ¬æ¥æºï¼ŒBootstrap æ¶ˆæ¯ä¸­æœ‰ä¸€ä¸ªå…³é”®çš„æ¦‚å¿µï¼Œå°±æ˜¯é™æ€å’ŒåŠ¨æ€èµ„æºçš„ä¹‹é—´çš„åŒºåˆ«ã€‚ä¾‹å¦‚ Listener æˆ– Cluster è¿™äº›èµ„æºæ—¢å¯ä»¥ä» static_resources é™æ€çš„è·å¾—ä¹Ÿå¯ä»¥ä» dynamic_resources ä¸­é…ç½®çš„ LDS æˆ– CDS ä¹‹ç±»çš„ xDS æœåŠ¡è·å–ã€‚\n\n### Listener\n\nListener é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç›‘å¬å™¨ï¼Œç›‘å¬ IP åœ°å€å’Œç«¯å£ï¼Œç„¶åæ ¹æ®ç­–ç•¥è½¬å‘ã€‚\n\n**Listener çš„ç‰¹ç‚¹**\n\n- æ¯ä¸ª Envoy è¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ª Listenerï¼ŒEnvoy ä¸ Listener ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚\n- æ¯ä¸ª Listener ä¸­å¯ä»¥é…ç½®ä¸€æ¡ filter é“¾è¡¨ï¼ˆfilter_chainsï¼‰ï¼ŒEnvoy ä¼šæ ¹æ® filter é¡ºåºæ‰§è¡Œè¿‡æ»¤ã€‚\n- Listener å¯ä»¥ç›‘å¬ä¸‹æ¸¸çš„ç«¯å£ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ¥è‡ªå…¶ä»– listener çš„æ•°æ®ï¼Œå½¢æˆé“¾å¼å¤„ç†ã€‚\n- filter æ˜¯å¯æ‰©å±•çš„ã€‚\n- å¯ä»¥é™æ€é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ LDS åŠ¨æ€é…ç½®ã€‚\n- ç›®å‰åªèƒ½ç›‘å¬ TCPï¼ŒUDP è¿˜æœªæ”¯æŒã€‚\n\n**Listener çš„æ•°æ®ç»“æ„**\n\nListener çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼Œé™¤äº† \u0060name\u0060ã€\u0060address\u0060 å’Œ \u0060filter_chains\u0060 ä¸ºå¿…é¡»é…ç½®ä¹‹å¤–ï¼Œå…¶ä»–éƒ½ä¸ºå¯é€‰çš„ã€‚\n\n\u0060\u0060\u0060json\n{\n  \u0022name\u0022: \u0022...\u0022,\n  \u0022address\u0022: \u0022{...}\u0022,\n  \u0022filter_chains\u0022: [],\n  \u0022use_original_dst\u0022: \u0022{...}\u0022,\n  \u0022per_connection_buffer_limit_bytes\u0022: \u0022{...}\u0022,\n  \u0022metadata\u0022: \u0022{...}\u0022,\n  \u0022drain_type\u0022: \u0022...\u0022,\n  \u0022listener_filters\u0022: [],\n  \u0022transparent\u0022: \u0022{...}\u0022,\n  \u0022freebind\u0022: \u0022{...}\u0022,\n  \u0022socket_options\u0022: [],\n  \u0022tcp_fast_open_queue_length\u0022: \u0022{...}\u0022,\n  \u0022bugfix_reverse_write_filter_order\u0022: \u0022{...}\u0022\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯å…³äºä¸Šè¿°æ•°æ®ç»“æ„ä¸­çš„å¸¸ç”¨é…ç½®è§£æã€‚\n\n- **name**ï¼šè¯¥ listener çš„ UUIDï¼Œå”¯ä¸€é™å®šåï¼Œé»˜è®¤ 60 ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ \u006010.254.74.159_15011\u0060ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤å‚æ•°æŒ‡å®šé•¿åº¦é™åˆ¶ã€‚\n\n- **address**ï¼šç›‘å¬çš„é€»è¾‘\/ç‰©ç†åœ°å€å’Œç«¯å£å·ï¼Œä¾‹å¦‚\n\n  \u0060\u0060\u0060json\n  \u0022address\u0022: {\n         \u0022socket_address\u0022: {\n          \u0022address\u0022: \u002210.254.74.159\u0022,\n          \u0022port_value\u0022: 15011\n         }\n  }\n  \u0060\u0060\u0060\n\n- **filter_chains**ï¼šè¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒEnvoy ä¸­å†…ç½®äº†ä¸€äº›é€šç”¨çš„ filterï¼Œæ¯ç§ filter éƒ½æœ‰ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼ŒEnvoy ä¼šæ ¹æ®è¯¥é…ç½®é¡ºåºæ‰§è¡Œ filterã€‚Envoy ä¸­å†…ç½®çš„ filter æœ‰ï¼š[envoy.client_ssl_auth](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/client_ssl_auth_filter#config-network-filters-client-ssl-auth)ã€[envoy.echo](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/echo_filter#config-network-filters-echo)ã€[Envoy.http_connection_manager](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/http_conn_man\/http_conn_man#config-http-conn-man)ã€[envoy.mongo_proxy](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/mongo_proxy_filter#config-network-filters-mongo-proxy)ã€[envoy.rate_limit](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/rate_limit_filter#config-network-filters-rate-limit)ã€[Envoy.redis_proxy](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/redis_proxy_filter#config-network-filters-redis-proxy)ã€[envoy.tcp_proxy](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/network_filters\/tcp_proxy_filter#config-network-filters-tcp-proxy)ã€[http_filters](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/intro\/arch_overview\/http_filters)ã€[thrift_filters](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.8.0\/configuration\/thrift_filters\/thrift_filters)ç­‰ã€‚è¿™äº› filter å¯ä»¥å•ç‹¬ä½¿ç”¨ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ï¼Œä¾‹å¦‚ä½¿ç”¨ Istio ä¸­çš„ EnvoyFilter é…ç½®ã€‚\n\n- **use_original_dst**ï¼šè¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœä½¿ç”¨ iptables é‡å®šå‘è¿æ¥ï¼Œåˆ™ä»£ç†æ¥æ”¶çš„ç«¯å£å¯èƒ½ä¸åŸå§‹ç›®çš„åœ°å€çš„ç«¯å£ä¸ä¸€æ ·ã€‚å½“æ­¤æ ‡å¿—è®¾ç½®ä¸º true æ—¶ï¼ŒListener å°†é‡å®šå‘çš„è¿æ¥åˆ‡æ¢åˆ°ä¸åŸå§‹ç›®çš„åœ°å€å…³è”çš„ Listenerã€‚å¦‚æœæ²¡æœ‰ä¸åŸå§‹ç›®çš„åœ°å€å…³è”çš„ Listenerï¼Œåˆ™è¿æ¥ç”±æ¥æ”¶å®ƒçš„ Listener å¤„ç†ã€‚é»˜è®¤ä¸º falseã€‚æ³¨æ„ï¼šè¯¥å‚æ•°å°†è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨åŸå§‹ç›®çš„åœ°å€çš„ Listener filter æ›¿ä»£ã€‚è¯¥å‚æ•°çš„ä¸»è¦ç”¨é€”æ˜¯ï¼šEnvoy é€šè¿‡ç›‘å¬ 15001 ç«¯å£å°†åº”ç”¨çš„æµé‡æˆªå–åå†ç”±å…¶ä»– Listener å¤„ç†è€Œä¸æ˜¯ç›´æ¥è½¬å‘å‡ºå»ï¼Œè¯¦æƒ…è§ [Virtual Listener](https:\/\/zhaohuabing.com\/post\/2018-09-25-istio-traffic-management-impl-intro\/#virtual-listener)ã€‚\n\nå…³äº Listener çš„è¯¦ç»†ä»‹ç»è¯·å‚è€ƒ Envoy v2 API reference - listenerã€‚\n\n### Route\n\næˆ‘ä»¬åœ¨è¿™é‡Œæ‰€è¯´çš„è·¯ç”±æŒ‡çš„æ˜¯ HTTP è·¯ç”±ï¼Œè¿™ä¹Ÿä½¿å¾— Envoy å¯ä»¥ç”¨æ¥å¤„ç†ç½‘æ ¼è¾¹ç¼˜çš„æµé‡ã€‚HTTP è·¯ç”±è½¬å‘æ˜¯é€šè¿‡è·¯ç”±è¿‡æ»¤å™¨å®ç°çš„ã€‚è¯¥è¿‡æ»¤å™¨çš„ä¸»è¦èŒèƒ½å°±æ˜¯æ‰§è¡Œè·¯ç”±è¡¨ä¸­çš„æŒ‡ä»¤ã€‚é™¤äº†å¯ä»¥åšé‡å®šå‘å’Œè½¬å‘ï¼Œè·¯ç”±è¿‡æ»¤å™¨è¿˜éœ€è¦å¤„ç†é‡è¯•ã€ç»Ÿè®¡ä¹‹ç±»çš„ä»»åŠ¡ã€‚\n\n**HTTP è·¯ç”±çš„ç‰¹ç‚¹**\n\n- å‰ç¼€å’Œç²¾ç¡®è·¯å¾„åŒ¹é…è§„åˆ™ã€‚\n- å¯è·¨è¶Šå¤šä¸ªä¸Šæ¸¸é›†ç¾¤è¿›è¡ŒåŸºäºæƒé‡\/ç™¾åˆ†æ¯”çš„è·¯ç”±ã€‚\n- åŸºäºä¼˜å…ˆçº§çš„è·¯ç”±ã€‚\n- åŸºäºå“ˆå¸Œç­–ç•¥çš„è·¯ç”±ã€‚\n\n**Route çš„æ•°æ®ç»“æ„**\n\n\u0060\u0060\u0060json\n{\n  \u0022name\u0022: \u0022...\u0022,\n  \u0022virtual_hosts\u0022: [],\n  \u0022internal_only_headers\u0022: [],\n  \u0022response_headers_to_add\u0022: [],\n  \u0022response_headers_to_remove\u0022: [],\n  \u0022request_headers_to_add\u0022: [],\n  \u0022request_headers_to_remove\u0022: [],\n  \u0022validate_clusters\u0022: \u0022{...}\u0022\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯å…³äºä¸Šè¿°æ•°æ®ç»“æ„ä¸­çš„å¸¸ç”¨é…ç½®è§£æã€‚\n\n- **name**ï¼šè¯¥åå­—è·Ÿ \u0060envoy.http_connection_manager\u0060 filter ä¸­çš„ \u0060http_filters.rds.route_config_name\u0060 ä¸€è‡´ï¼Œåœ¨ Istio Service Mesh ä¸­ä¸º Envoy ä¸‹å‘çš„é…ç½®ä¸­çš„ Route æ˜¯ä»¥ç›‘å¬çš„ç«¯å£å·ä½œä¸ºåå­—ï¼Œè€ŒåŒä¸€ä¸ªåå­—ä¸‹é¢çš„ \u0060virtual_hosts\u0060 å¯ä»¥æœ‰å¤šä¸ªå€¼ï¼ˆæ•°ç»„å½¢å¼ï¼‰ã€‚\n- **virtual_hosts**ï¼šå› ä¸º **VirtualHosts** æ˜¯ Envoy ä¸­å¼•å…¥çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œæˆ‘ä»¬åœ¨ä¸‹æ–‡å°†è¯¦ç»†è¯´æ˜ \u0060virtual_hosts\u0060 çš„æ•°æ®ç»“æ„ã€‚\n- **validate_clusters**ï¼šè¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥è®¾ç½®å¼€å¯ä½¿ç”¨ cluster manager æ¥æ£€æµ‹è·¯ç”±è¡¨å¼•ç”¨çš„ cluster æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæ˜¯è·¯ç”±è¡¨æ˜¯é€šè¿‡ route_config é™æ€é…ç½®çš„åˆ™è¯¥å€¼é»˜è®¤è®¾ç½®ä¸º trueï¼Œå¦‚æœæ˜¯ä½¿ç”¨ rds åŠ¨æ€é…ç½®çš„è¯ï¼Œåˆ™è¯¥å€¼é»˜è®¤è®¾ç½®ä¸º falseã€‚\n\n#### route.VirtualHost\n\nVirtualHost å³ä¸Šæ–‡ä¸­ Route é…ç½®ä¸­çš„ \u0060virtual_hosts\u0060ï¼ŒVirtualHost æ˜¯è·¯ç”±é…ç½®ä¸­çš„é¡¶çº§å…ƒç´ ã€‚æ¯ä¸ªè™šæ‹Ÿä¸»æœºéƒ½æœ‰ä¸€ä¸ªé€»è¾‘åç§°ä»¥åŠä¸€ç»„æ ¹æ®ä¼ å…¥è¯·æ±‚çš„ host header è·¯ç”±åˆ°å®ƒçš„åŸŸã€‚è¿™å…è®¸å•ä¸ª Listener ä¸ºå¤šä¸ªé¡¶çº§åŸŸè·¯å¾„æ ‘æä¾›æœåŠ¡ã€‚åŸºäºåŸŸé€‰æ‹©äº†è™šæ‹Ÿä¸»æœºå Envoy  å°±ä¼šå¤„ç†è·¯ç”±ä»¥æŸ¥çœ‹è¦è·¯ç”±åˆ°å“ªä¸ªä¸Šæ¸¸é›†ç¾¤æˆ–æ˜¯å¦æ‰§è¡Œé‡å®šå‘ã€‚\n\n**VirtualHost çš„æ•°æ®ç»“æ„**\n\nä¸‹é¢æ˜¯ VirtualHost çš„æ•°æ®ç»“æ„ï¼Œé™¤äº† \u0060name\u0060 å’Œ \u0060domains\u0060 æ˜¯å¿…é¡»é…ç½®é¡¹å¤–ï¼Œå…¶ä»–çš†ä¸ºå¯é€‰é¡¹ã€‚\n\n\u0060\u0060\u0060json\n{\n  \u0022name\u0022: \u0022...\u0022,\n  \u0022domains\u0022: [],\n  \u0022routes\u0022: [],\n  \u0022require_tls\u0022: \u0022...\u0022,\n  \u0022virtual_clusters\u0022: [],\n  \u0022rate_limits\u0022: [],\n  \u0022request_headers_to_add\u0022: [],\n  \u0022request_headers_to_remove\u0022: [],\n  \u0022response_headers_to_add\u0022: [],\n  \u0022response_headers_to_remove\u0022: [],\n  \u0022cors\u0022: \u0022{...}\u0022,\n  \u0022per_filter_config\u0022: \u0022{...}\u0022,\n  \u0022include_request_attempt_count\u0022: \u0022...\u0022\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯å…³äºä¸Šè¿°æ•°æ®ç»“æ„ä¸­çš„å¸¸ç”¨é…ç½®è§£æã€‚\n\n- **name**ï¼šè¯¥ VirtualHost çš„åå­—ï¼Œä¸€èˆ¬æ˜¯ FQDN åŠ ç«¯å£ï¼Œå¦‚ \u0060details.default.svc.cluster.local:9080\u0060ã€‚\n- **domains**ï¼šè¿™æ˜¯ä¸ªç”¨æ¥åŒ¹é… VirtualHost çš„åŸŸåï¼ˆhost\/authority headerï¼‰åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œä½†æ˜¯é€šé…ç¬¦ä¸èƒ½åŒ¹é…ç©ºå­—ç¬¦ï¼Œé™¤äº†ä»…ä½¿ç”¨ \u0060*\u0060 ä½œä¸º domainsï¼Œæ³¨æ„åˆ—è¡¨ä¸­çš„å€¼ä¸èƒ½é‡å¤å’Œå­˜åœ¨äº¤é›†ï¼Œåªè¦æœ‰ä¸€æ¡ domain è¢«åŒ¹é…ä¸Šäº†ï¼Œå°±ä¼šæ‰§è¡Œè·¯ç”±ã€‚Istio ä¼šä¸ºè¯¥å€¼é…ç½®æ‰€æœ‰åœ°å€è§£æå½¢å¼ï¼ŒåŒ…æ‹¬ IP åœ°å€ã€FQDN å’ŒçŸ­åŸŸåç­‰ã€‚\n- **routes**ï¼šé’ˆå¯¹å…¥å£æµé‡çš„æœ‰åºè·¯ç”±åˆ—è¡¨ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…ä¸Šçš„è·¯ç”±å°†è¢«æ‰§è¡Œã€‚æˆ‘ä»¬åœ¨ä¸‹æ–‡å°†è¯¦ç»†è¯´æ˜ route çš„æ•°æ®ç»“æ„ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ VirtualHost çš„ä¾‹å­ï¼Œè¯¥é…ç½®æ¥è‡ª [Bookinfo åº”ç”¨](https:\/\/istio.io\/latest\/zh\/docs\/examples\/bookinfo\/)çš„ details åº”ç”¨çš„ Sidecar æœåŠ¡ã€‚\n\n\u0060\u0060\u0060json\n{\n            \u0022name\u0022: \u0022details.default.svc.cluster.local:9080\u0022,\n            \u0022domains\u0022: [\n                \u0022details.default.svc.cluster.local\u0022,\n                \u0022details.default.svc.cluster.local:9080\u0022,\n                \u0022details\u0022,\n                \u0022details:9080\u0022,\n                \u0022details.default.svc.cluster\u0022,\n                \u0022details.default.svc.cluster:9080\u0022,\n                \u0022details.default.svc\u0022,\n                \u0022details.default.svc:9080\u0022,\n                \u0022details.default\u0022,\n                \u0022details.default:9080\u0022,\n                \u002210.254.4.113\u0022,\n                \u002210.254.4.113:9080\u0022\n            ],\n            \u0022routes\u0022: [\n                {\n                    \u0022match\u0022: {\n                        \u0022prefix\u0022: \u0022\/\u0022\n                    },\n                    \u0022route\u0022: {\n                        \u0022cluster\u0022: \u0022outbound|9080||details.default.svc.cluster.local\u0022,\n                        \u0022timeout\u0022: \u00220s\u0022,\n                        \u0022max_grpc_timeout\u0022: \u00220s\u0022\n                    },\n                    \u0022decorator\u0022: {\n                        \u0022operation\u0022: \u0022details.default.svc.cluster.local:9080\/*\u0022\n                    },\n                    \u0022per_filter_config\u0022: {\n                        \u0022mixer\u0022: {\n                            \u0022forward_attributes\u0022: {\n                                \u0022attributes\u0022: {\n                                    \u0022destination.service.uid\u0022: {\n                                        \u0022string_value\u0022: \u0022istio:\/\/default\/services\/details\u0022\n                                    },\n                                    \u0022destination.service.host\u0022: {\n                                        \u0022string_value\u0022: \u0022details.default.svc.cluster.local\u0022\n                                    },\n                                    \u0022destination.service.namespace\u0022: {\n                                        \u0022string_value\u0022: \u0022default\u0022\n                                    },\n                                    \u0022destination.service.name\u0022: {\n                                        \u0022string_value\u0022: \u0022details\u0022\n                                    },\n                                    \u0022destination.service\u0022: {\n                                        \u0022string_value\u0022: \u0022details.default.svc.cluster.local\u0022\n                                    }\n                                }\n                            },\n                            \u0022mixer_attributes\u0022: {\n                                \u0022attributes\u0022: {\n                                    \u0022destination.service.host\u0022: {\n                                        \u0022string_value\u0022: \u0022details.default.svc.cluster.local\u0022\n                                    },\n                                    \u0022destination.service.uid\u0022: {\n                                        \u0022string_value\u0022: \u0022istio:\/\/default\/services\/details\u0022\n                                    },\n                                    \u0022destination.service.name\u0022: {\n                                        \u0022string_value\u0022: \u0022details\u0022\n                                    },\n                                    \u0022destination.service.namespace\u0022: {\n                                        \u0022string_value\u0022: \u0022default\u0022\n                                    },\n                                    \u0022destination.service\u0022: {\n                                        \u0022string_value\u0022: \u0022details.default.svc.cluster.local\u0022\n                                    }\n                                }\n                            },\n                            \u0022disable_check_calls\u0022: true\n                        }\n                    }\n                }\n            ]\n        }\n\u0060\u0060\u0060\n\n#### route.Route\n\nè·¯ç”±æ—¢æ˜¯å¦‚ä½•åŒ¹é…è¯·æ±‚çš„è§„èŒƒï¼Œä¹Ÿæ˜¯å¯¹ä¸‹ä¸€æ­¥åšä»€ä¹ˆçš„æŒ‡ç¤ºï¼ˆä¾‹å¦‚ï¼Œredirectã€forwardã€rewrite ç­‰ï¼‰ã€‚\n\n**route.Route çš„æ•°æ®ç»“æ„**\n\nä¸‹é¢æ˜¯æ˜¯ route.Route çš„æ•°æ®ç»“æ„ï¼Œé™¤äº† \u0060match\u0060 ä¹‹å¤–å…¶ä½™éƒ½æ˜¯å¯é€‰çš„ã€‚\n\n\u0060\u0060\u0060json\n{\n  \u0022match\u0022: \u0022{...}\u0022,\n  \u0022route\u0022: \u0022{...}\u0022,\n  \u0022redirect\u0022: \u0022{...}\u0022,\n  \u0022direct_response\u0022: \u0022{...}\u0022,\n  \u0022metadata\u0022: \u0022{...}\u0022,\n  \u0022decorator\u0022: \u0022{...}\u0022,\n  \u0022per_filter_config\u0022: \u0022{...}\u0022,\n  \u0022request_headers_to_add\u0022: [],\n  \u0022request_headers_to_remove\u0022: [],\n  \u0022response_headers_to_add\u0022: [],\n  \u0022response_headers_to_remove\u0022: []\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯å…³äºä¸Šè¿°æ•°æ®ç»“æ„ä¸­çš„å¸¸ç”¨é…ç½®è§£æã€‚\n\n- **match**ï¼šè·¯ç”±åŒ¹é…å‚æ•°ã€‚ä¾‹å¦‚ URL prefixï¼ˆå‰ç¼€ï¼‰ã€pathï¼ˆURL çš„å®Œæ•´è·¯å¾„ï¼‰ã€regexï¼ˆè§„åˆ™è¡¨è¾¾å¼ï¼‰ç­‰ã€‚\n- **route**ï¼šè¿™é‡Œé¢é…ç½®è·¯ç”±çš„è¡Œä¸ºï¼Œå¯ä»¥æ˜¯ routeã€redirect å’Œ direct_responseï¼Œä¸è¿‡è¿™é‡Œé¢æ²¡æœ‰ä¸“é—¨çš„ä¸€ä¸ªé…ç½®é¡¹ç”¨æ¥é…ç½®ä»¥ä¸Šä¸‰ç§è¡Œä¸ºï¼Œè€Œæ˜¯æ ¹æ®å®é™…å¡«å……çš„é…ç½®é¡¹æ¥ç¡®å®šçš„ã€‚ä¾‹å¦‚åœ¨æ­¤å¤„æ·»åŠ  \u0060cluster\u0060 é…ç½®åˆ™æš—ç¤ºè·¯ç”±åŠ¨ä½œä¸ºâ€routeâ€œï¼Œè¡¨ç¤ºå°†æµé‡è·¯ç”±åˆ°è¯¥ clusterã€‚è¯¦æƒ…è¯·å‚è€ƒ route.RouteActionã€‚\n- **decorator**ï¼šè¢«åŒ¹é…çš„è·¯ç”±çš„ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¢«åŒ¹é…çš„è™šæ‹Ÿä¸»æœºå’Œ URLã€‚è¯¥é…ç½®é‡Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªå¿…é¡»é…ç½®çš„é¡¹ \u0060operation\u0060ï¼Œä¾‹å¦‚ \u0060details.default.svc.cluster.local:9080\/*\u0060ã€‚\n- **per_filter_config**ï¼šè¿™æ˜¯ä¸€ä¸ª map ç±»å‹ï¼Œ\u0060per_filter_config\u0060 å­—æ®µå¯ç”¨äºä¸º filter æä¾›ç‰¹å®šè·¯ç”±çš„é…ç½®ã€‚Map çš„ key åº”ä¸ filleter åç§°åŒ¹é…ï¼Œä¾‹å¦‚ç”¨äº HTTP buffer filter çš„ \u0060envoy.buffer\u0060ã€‚è¯¥å­—æ®µæ˜¯ç‰¹å®šäº filter çš„ï¼Œè¯¦æƒ…è¯·å‚è€ƒ HTTP filterã€‚\n\n### Cluster\n\nCluster æ˜¯æŒ‡ Envoy è¿æ¥çš„ä¸€ç»„é€»è¾‘ç›¸åŒçš„ä¸Šæ¸¸ä¸»æœºã€‚Envoy é€šè¿‡æœåŠ¡å‘ç°æ¥å‘ç° cluster çš„æˆå‘˜ã€‚å¯ä»¥é€‰æ‹©é€šè¿‡ä¸»åŠ¨å¥åº·æ£€æŸ¥æ¥ç¡®å®šé›†ç¾¤æˆå‘˜çš„å¥åº·çŠ¶æ€ã€‚Envoy é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥å†³å®šå°†è¯·æ±‚è·¯ç”±åˆ° cluster çš„å“ªä¸ªæˆå‘˜ã€‚\n\n**Cluster çš„ç‰¹ç‚¹**\n\n- ä¸€ç»„é€»è¾‘ä¸Šç›¸åŒçš„ä¸»æœºæ„æˆä¸€ä¸ª clusterã€‚\n- å¯ä»¥åœ¨ cluster ä¸­å®šä¹‰å„ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚\n- æ–°åŠ å…¥çš„ cluster éœ€è¦ä¸€ä¸ªçƒ­èº«çš„è¿‡ç¨‹æ‰å¯ä»¥ç»™è·¯ç”±å¼•ç”¨ï¼Œè¯¥è¿‡ç¨‹æ˜¯åŸå­çš„ï¼Œå³åœ¨ cluster çƒ­èº«ä¹‹å‰å¯¹äº Envoy åŠ Service Mesh çš„å…¶ä½™éƒ¨åˆ†æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚\n- å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ¥é…ç½® clusterï¼Œä¾‹å¦‚é™æ€ç±»å‹ã€ä¸¥æ ¼é™å®š DNSã€é€»è¾‘ DNSã€EDS ç­‰ã€‚\n\n**Cluster çš„æ•°æ®ç»“æ„**\n\nCluster çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼Œé™¤äº† \u0060name\u0060 å­—æ®µï¼Œå…¶ä»–éƒ½æ˜¯å¯é€‰çš„ã€‚\n\n\u0060\u0060\u0060json\n{\n  \u0022name\u0022: \u0022...\u0022,\n  \u0022alt_stat_name\u0022: \u0022...\u0022,\n  \u0022type\u0022: \u0022...\u0022,\n  \u0022eds_cluster_config\u0022: \u0022{...}\u0022,\n  \u0022connect_timeout\u0022: \u0022{...}\u0022,\n  \u0022per_connection_buffer_limit_bytes\u0022: \u0022{...}\u0022,\n  \u0022lb_policy\u0022: \u0022...\u0022,\n  \u0022hosts\u0022: [],\n  \u0022load_assignment\u0022: \u0022{...}\u0022,\n  \u0022health_checks\u0022: [],\n  \u0022max_requests_per_connection\u0022: \u0022{...}\u0022,\n  \u0022circuit_breakers\u0022: \u0022{...}\u0022,\n  \u0022tls_context\u0022: \u0022{...}\u0022,\n  \u0022common_http_protocol_options\u0022: \u0022{...}\u0022,\n  \u0022http_protocol_options\u0022: \u0022{...}\u0022,\n  \u0022http2_protocol_options\u0022: \u0022{...}\u0022,\n  \u0022extension_protocol_options\u0022: \u0022{...}\u0022,\n  \u0022dns_refresh_rate\u0022: \u0022{...}\u0022,\n  \u0022dns_lookup_family\u0022: \u0022...\u0022,\n  \u0022dns_resolvers\u0022: [],\n  \u0022outlier_detection\u0022: \u0022{...}\u0022,\n  \u0022cleanup_interval\u0022: \u0022{...}\u0022,\n  \u0022upstream_bind_config\u0022: \u0022{...}\u0022,\n  \u0022lb_subset_config\u0022: \u0022{...}\u0022,\n  \u0022ring_hash_lb_config\u0022: \u0022{...}\u0022,\n  \u0022original_dst_lb_config\u0022: \u0022{...}\u0022,\n  \u0022least_request_lb_config\u0022: \u0022{...}\u0022,\n  \u0022common_lb_config\u0022: \u0022{...}\u0022,\n  \u0022transport_socket\u0022: \u0022{...}\u0022,\n  \u0022metadata\u0022: \u0022{...}\u0022,\n  \u0022protocol_selection\u0022: \u0022...\u0022,\n  \u0022upstream_connection_options\u0022: \u0022{...}\u0022,\n  \u0022close_connections_on_host_health_failure\u0022: \u0022...\u0022,\n  \u0022drain_connections_on_host_removal\u0022: \u0022...\u0022\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯å…³äºä¸Šè¿°æ•°æ®ç»“æ„ä¸­çš„å¸¸ç”¨é…ç½®è§£æã€‚\n\n- **name**ï¼šå¦‚æœä½ ç•™æ„åˆ°ä½œä¸º Sidecar å¯åŠ¨çš„ Envoy çš„å‚æ•°çš„ä¼šæ³¨æ„åˆ° \u0060--max-obj-name-len 189\u0060ï¼Œè¯¥é€‰é¡¹ç”¨æ¥ç”¨æ¥æŒ‡å®š cluster çš„åå­—ï¼Œä¾‹å¦‚ \u0060inbound|9080||ratings.default.svc.cluster.local\u0060ã€‚è¯¥åå­—å­—ç¬¦ä¸²ç”± \u0060|\u0060 åˆ†éš”æˆå››ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ \u0060inbound\u0060 æˆ– \u0060outbound\u0060 ä»£è¡¨å…¥å‘æµé‡æˆ–å‡ºå‘æµé‡ã€ç«¯å£å·ã€subcluster åç§°ã€FQDNï¼Œå…¶ä¸­ subcluster åç§°å°†å¯¹åº”äº Istio \u0060DestinationRule\u0060 ä¸­é…ç½®çš„ \u0060subnet\u0060ï¼Œå¦‚æœæ˜¯æŒ‰ç…§å¤šç‰ˆæœ¬æŒ‰æ¯”ä¾‹è·¯ç”±çš„è¯ï¼Œè¯¥å€¼å¯ä»¥æ˜¯ç‰ˆæœ¬å·ã€‚\n- **type**ï¼šå³æœåŠ¡å‘ç°ç±»å‹ï¼Œæ”¯æŒçš„å‚æ•°æœ‰ \u0060STATIC\u0060ï¼ˆç¼ºçœå€¼ï¼‰ã€\u0060STRICT_DNS\u0060ã€\u0060LOGICAL_DNS\u0060ã€\u0060EDS\u0060ã€\u0060ORIGINAL_DST\u0060ã€‚\n- **hosts**ï¼šè¿™æ˜¯ä¸ªåˆ—è¡¨ï¼Œé…ç½®è´Ÿè½½å‡è¡¡çš„ IP åœ°å€å’Œç«¯å£ï¼Œåªæœ‰ä½¿ç”¨äº†  \u0060STATIC\u0060ã€\u0060STRICT_DNS\u0060ã€\u0060LOGICAL_DNS\u0060 æœåŠ¡å‘ç°ç±»å‹æ—¶æ‰éœ€è¦é…ç½®ã€‚\n- **eds_cluster_config**ï¼šå¦‚æœä½¿ç”¨ \u0060EDS\u0060 åšæœåŠ¡å‘ç°ï¼Œåˆ™éœ€è¦é…ç½®è¯¥é¡¹ç›®ï¼Œå…¶ä¸­åŒ…æ‹¬çš„é…ç½®æœ‰ \u0060service_name\u0060 å’Œ \u0060ads\u0060ã€‚\n\n## å‚è€ƒ\n\n- [æ·±å…¥è§£è¯» Service Mesh èƒŒåçš„æŠ€æœ¯ç»†èŠ‚ - cnblogs.com](https:\/\/www.cnblogs.com\/163yun\/p\/8962278.html)\n- [ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ - jimmysong.io](https:\/\/jimmysong.io\/blog\/envoy-sidecar-injection-in-istio-service-mesh-deep-dive\/)\n', '\/blog\/envoy-proxy-config-deep-dive\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡ä»‹ç»äº† Envoy proxy çš„æ¦‚å¿µï¼Œå¯¹åº”çš„ xDS çš„ç‰ˆæœ¬ä»¥åŠé…ç½®çš„è¯¦ç»†è§£æã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/envoy-sidecar-routing-of-istio-service-mesh-deep-dive/">ç†è§£ Istio Service Mesh ä¸­ Envoy Sidecar ä»£ç†çš„è·¯ç”±è½¬å‘</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/12/26</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/service-mesh"> 
             Service Mesh
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ç†è§£ Istio Service Mesh ä¸­ Envoy Sidecar ä»£ç†çš„è·¯ç”±è½¬å‘', 'Sidecar proxy ä¸­ Indbound\/Outbound æµé‡å¤„ç†è¿‡ç¨‹è¯¦è§£ã€‚', '\næœ¬æ–‡ä»¥ Istio å®˜æ–¹çš„ [bookinfo ç¤ºä¾‹](https:\/\/preliminary.istio.io\/zh\/docs\/examples\/bookinfo)æ¥è®²è§£åœ¨è¿›å…¥ Pod çš„æµé‡è¢« iptables è½¬äº¤ç»™ Envoy sidecar åï¼ŒEnvoy æ˜¯å¦‚ä½•åšè·¯ç”±è½¬å‘çš„ï¼Œè¯¦è¿°äº† Inbound å’Œ Outbound å¤„ç†è¿‡ç¨‹ã€‚å…³äºæµé‡æ‹¦æˆªçš„è¯¦ç»†åˆ†æè¯·å‚è€ƒ[ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ](https:\/\/jimmysong.io\/posts\/envoy-sidecar-injection-in-istio-service-mesh-deep-dive\/)ã€‚\n\nä¸‹é¢æ˜¯ Istio å®˜æ–¹æä¾›çš„ bookinfo çš„è¯·æ±‚æµç¨‹å›¾ï¼Œå‡è®¾ bookinfo åº”ç”¨çš„æ‰€æœ‰æœåŠ¡ä¸­æ²¡æœ‰é…ç½® DestinationRuleã€‚\n\n![Bookinfo ç¤ºä¾‹](006tNbRwgy1fvlwjd3302j31bo0ro0x5.jpg)\n\nä¸‹é¢æ˜¯ Istio è‡ªèº«ç»„ä»¶ä¸ Bookinfo ç¤ºä¾‹çš„è¿æ¥å…³ç³»å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ HTTP è¿æ¥éƒ½åœ¨ 9080 ç«¯å£ç›‘å¬ã€‚\n\n![Bookinfo ç¤ºä¾‹ä¸ Istio ç»„ä»¶è¿æ¥å…³ç³»å›¾](006tNbRwly1fyitp0jsghj31o70u0x6p.jpg)\n\n\nå¯ä»¥åœ¨ [Google Drive](https:\/\/drive.google.com\/open?id=19ed3_tkjf6RgGboxllMdt_Ytd5_cocib) ä¸Šä¸‹è½½åŸå›¾ã€‚\n\n## Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒæ­¥éª¤æ¦‚è¿°\n\nä¸‹é¢æ˜¯ä» Sidecar æ³¨å…¥ã€Pod å¯åŠ¨åˆ° Sidecar proxy æ‹¦æˆªæµé‡åŠ Envoy å¤„ç†è·¯ç”±çš„æ­¥éª¤æ¦‚è§ˆã€‚\n\n**1.** Kubernetes é€šè¿‡ Admission Controller è‡ªåŠ¨æ³¨å…¥ï¼Œæˆ–è€…ç”¨æˆ·ä½¿ç”¨ \u0060istioctl\u0060 å‘½ä»¤æ‰‹åŠ¨æ³¨å…¥ sidecar å®¹å™¨ã€‚\n\n**2.** åº”ç”¨ YAML é…ç½®éƒ¨ç½²åº”ç”¨ï¼Œæ­¤æ—¶ Kubernetes API server æ¥æ”¶åˆ°çš„æœåŠ¡åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å·²ç»åŒ…å«äº† Init å®¹å™¨åŠ sidecar proxyã€‚\n\n**3.** åœ¨ sidecar proxy å®¹å™¨å’Œåº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰ï¼Œé¦–å…ˆè¿è¡Œ Init å®¹å™¨ï¼ŒInit å®¹å™¨ç”¨äºè®¾ç½® iptablesï¼ˆIstio ä¸­é»˜è®¤çš„æµé‡æ‹¦æˆªæ–¹å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ BPFã€IPVS ç­‰æ–¹å¼ï¼‰å°†è¿›å…¥ pod çš„æµé‡åŠ«æŒåˆ° Envoy sidecar proxyã€‚æ‰€æœ‰ TCP æµé‡ï¼ˆEnvoy ç›®å‰åªæ”¯æŒ TCP æµé‡ï¼‰å°†è¢« sidecar åŠ«æŒï¼Œå…¶ä»–åè®®çš„æµé‡å°†æŒ‰åŸæ¥çš„ç›®çš„åœ°è¯·æ±‚ã€‚\n\n**4.** å¯åŠ¨ Pod ä¸­çš„ Envoy sidecar proxy å’Œåº”ç”¨ç¨‹åºå®¹å™¨ã€‚è¿™ä¸€æ­¥çš„è¿‡ç¨‹è¯·å‚è€ƒ[é€šè¿‡ç®¡ç†æ¥å£è·å–å®Œæ•´é…ç½®](https:\/\/zhaohuabing.com\/post\/2018-09-25-istio-traffic-management-impl-intro\/#%E9%80%9A%E8%BF%87%E7%AE%A1%E7%90%86%E6%8E%A5%E5%8F%A3%E8%8E%B7%E5%8F%96%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE)ã€‚\n\n\u003e **Sidecar proxy ä¸åº”ç”¨å®¹å™¨çš„å¯åŠ¨é¡ºåºé—®é¢˜**\n\u003e\n\u003e å¯åŠ¨ sidecar proxy å’Œåº”ç”¨å®¹å™¨ï¼Œç©¶ç«Ÿå“ªä¸ªå®¹å™¨å…ˆå¯åŠ¨å‘¢ï¼Ÿæ­£å¸¸æƒ…å†µæ˜¯ Envoy Sidecar å’Œåº”ç”¨ç¨‹åºå®¹å™¨å…¨éƒ¨å¯åŠ¨å®Œæˆåå†å¼€å§‹æ¥æ”¶æµé‡è¯·æ±‚ã€‚ä½†æ˜¯æˆ‘ä»¬æ— æ³•é¢„æ–™å“ªä¸ªå®¹å™¨ä¼šå…ˆå¯åŠ¨ï¼Œé‚£ä¹ˆå®¹å™¨å¯åŠ¨é¡ºåºæ˜¯å¦ä¼šå¯¹ Envoy åŠ«æŒæµé‡æœ‰å½±å“å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¸è¿‡åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µã€‚\n\u003e\n\u003e **æƒ…å†µ 1ï¼šåº”ç”¨å®¹å™¨å…ˆå¯åŠ¨ï¼Œè€Œ sidecar proxy ä»æœªå°±ç»ª**\n\u003e\n\u003e è¿™ç§æƒ…å†µä¸‹ï¼Œæµé‡è¢« iptables è½¬ç§»åˆ° 15001 ç«¯å£ï¼Œè€Œ Pod ä¸­æ²¡æœ‰ç›‘å¬è¯¥ç«¯å£ï¼ŒTCP é“¾æ¥å°±æ— æ³•å»ºç«‹ï¼Œè¯·æ±‚å¤±è´¥ã€‚\n\u003e\n\u003e **æƒ…å†µ 2ï¼šSidecar å…ˆå¯åŠ¨ï¼Œè¯·æ±‚åˆ°è¾¾è€Œåº”ç”¨ç¨‹åºä»æœªå°±ç»ª**\n\u003e\n\u003e è¿™ç§æƒ…å†µä¸‹è¯·æ±‚ä¹Ÿè‚¯å®šä¼šå¤±è´¥ï¼Œè‡³äºæ˜¯åœ¨å“ªä¸€æ­¥å¼€å§‹å¤±è´¥çš„ï¼Œç•™ç»™è¯»è€…æ¥æ€è€ƒã€‚\n\n**é—®é¢˜**ï¼šå¦‚æœä¸º sidecar proxy å’Œåº”ç”¨ç¨‹åºå®¹å™¨æ·»åŠ [å°±ç»ªå’Œå­˜æ´»æ¢é’ˆ](https:\/\/jimmysong.io\/kubernetes-handbook\/guide\/configure-liveness-readiness-probes.html)æ˜¯å¦å¯ä»¥è§£å†³è¯¥é—®é¢˜å‘¢ï¼Ÿ\n\n**5.** ä¸è®ºæ˜¯è¿›å…¥è¿˜æ˜¯ä» Pod å‘å‡ºçš„ TCP è¯·æ±‚éƒ½ä¼šè¢« iptables åŠ«æŒï¼Œinbound æµé‡è¢«åŠ«æŒåç» Inbound Handler å¤„ç†åè½¬äº¤ç»™åº”ç”¨ç¨‹åºå®¹å™¨å¤„ç†ï¼Œoutbound æµé‡è¢« iptables åŠ«æŒåè½¬äº¤ç»™ Outbound Handler å¤„ç†ï¼Œå¹¶ç¡®å®šè½¬å‘çš„ upstream å’Œ Endpointã€‚\n\n**6.** Sidecar proxy è¯·æ±‚ Pilot ä½¿ç”¨ xDS åè®®åŒæ­¥ Envoy é…ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬ LDSã€EDSã€CDS ç­‰ï¼Œä¸è¿‡ä¸ºäº†ä¿è¯æ›´æ–°çš„é¡ºåºï¼ŒEnvoy ä¼šç›´æ¥ä½¿ç”¨ ADS å‘ Pilot è¯·æ±‚é…ç½®æ›´æ–°ã€‚\n\n## Envoy å¦‚ä½•å¤„ç†è·¯ç”±è½¬å‘\n\n ä¸‹å›¾å±•ç¤ºçš„æ˜¯ \u0060productpage\u0060 æœåŠ¡è¯·æ±‚è®¿é—® \u0060http:\/\/reviews.default.svc.cluster.local:9080\/\u0060ï¼Œå½“æµé‡è¿›å…¥ \u0060reviews\u0060 æœåŠ¡å†…éƒ¨æ—¶ï¼Œ\u0060reviews\u0060 æœåŠ¡å†…éƒ¨çš„ Envoy Sidecar æ˜¯å¦‚ä½•åšæµé‡æ‹¦æˆªå’Œè·¯ç”±è½¬å‘çš„ã€‚å¯ä»¥åœ¨ [Google Drive](https:\/\/drive.google.com\/file\/d\/1n-h235tm8DnL_RqxTTA95rgGtrLkBsyr\/view?usp=sharing) ä¸Šä¸‹è½½åŸå›¾ã€‚\n\n![Envoy sidecar æµé‡åŠ«æŒä¸è·¯ç”±è½¬å‘ç¤ºæ„å›¾](envoy-sidecar-traffic-interception-zh-20210818.png)\n\n\nç¬¬ä¸€æ­¥å¼€å§‹æ—¶ï¼Œ\u0060productpage\u0060 Pod ä¸­çš„ Envoy sidecar å·²ç»é€šè¿‡ EDS é€‰æ‹©å‡ºäº†è¦è¯·æ±‚çš„ \u0060reviews\u0060 æœåŠ¡çš„ä¸€ä¸ª Podï¼ŒçŸ¥æ™“äº†å…¶ IP åœ°å€ï¼Œå‘é€ TCP è¿æ¥è¯·æ±‚ã€‚\n\nIstio å®˜ç½‘ä¸­çš„ Envoy é…ç½®æ·±åº¦è§£æä¸­æ˜¯ä»¥å‘èµ· HTTP è¯·æ±‚çš„ä¸€æ–¹æ¥è¯¦è¿° Envoy åšæµé‡è½¬å‘çš„è¿‡ç¨‹ï¼Œè€Œæœ¬æ–‡ä¸­è€ƒè™‘çš„æ˜¯æ¥å— downstream çš„æµé‡çš„ä¸€æ–¹ï¼Œå®ƒæ—¢è¦æ¥æ”¶ downstream å‘æ¥çš„è¯·æ±‚ï¼Œè‡ªå·±è¿˜éœ€è¦è¯·æ±‚å…¶ä»–æœåŠ¡ï¼Œä¾‹å¦‚ \u0060reviews\u0060 æœåŠ¡ä¸­çš„ Pod è¿˜éœ€è¦è¯·æ±‚ \u0060ratings\u0060 æœåŠ¡ã€‚\n\n\u0060reviews\u0060 æœåŠ¡æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸‰ä¸ªç‰ˆæœ¬ä¸­çš„ sidecar å·¥ä½œæ­¥éª¤ç±»ä¼¼ï¼Œä¸‹æ–‡åªä»¥ \u0060reviews-v1-cb8655c75-b97zc\u0060 è¿™ä¸€ä¸ª Pod ä¸­çš„ Sidecar æµé‡è½¬å‘æ­¥éª¤æ¥è¯´æ˜ã€‚\n\n## ç†è§£ Inbound Handler\n\nInbound handler çš„ä½œç”¨æ˜¯å°† iptables æ‹¦æˆªåˆ°çš„ downstream çš„æµé‡è½¬äº¤ç»™ localhostï¼Œä¸ Pod å†…çš„åº”ç”¨ç¨‹åºå®¹å™¨å»ºç«‹è¿æ¥ã€‚\n\næŸ¥çœ‹ä¸‹ \u0060reviews-v1-cb8655c75-b97zc\u0060 pod ä¸­çš„ Listenerã€‚\n\nè¿è¡Œ \u0060istioctl pc listener reviews-v1-cb8655c75-b97zc\u0060 æŸ¥çœ‹è¯¥ Pod ä¸­çš„å…·æœ‰å“ªäº› Listenerã€‚\n\n\u0060\u0060\u0060ini\nADDRESS            PORT      TYPE \n172.33.3.3         9080      HTTP \u003c--- æ¥æ”¶æ‰€æœ‰ Inbound HTTP æµé‡ï¼Œè¯¥åœ°å€å³ä¸ºå½“å‰ Pod çš„ IP åœ°å€\n10.254.0.1         443       TCP  \u003c--\u002b\n10.254.4.253       80        TCP     |\n10.254.4.253       8080      TCP     |\n10.254.109.182     443       TCP     |\n10.254.22.50       15011     TCP     |\n10.254.22.50       853       TCP     |\n10.254.79.114      443       TCP     | \n10.254.143.179     15011     TCP     |\n10.254.0.2         53        TCP     | æ¥æ”¶ä¸ 0.0.0.0_15001 ç›‘å¬å™¨é…å¯¹çš„ Outbound é HTTP æµé‡\n10.254.22.50       443       TCP     |\n10.254.16.64       42422     TCP     |\n10.254.127.202     16686     TCP     |\n10.254.22.50       31400     TCP     |\n10.254.22.50       8060      TCP     |\n10.254.169.13      14267     TCP     |\n10.254.169.13      14268     TCP     |\n10.254.32.134      8443      TCP     |\n10.254.118.196     443       TCP  \u003c--\u002b\n0.0.0.0            15004     HTTP \u003c--\u002b\n0.0.0.0            8080      HTTP    |\n0.0.0.0            15010     HTTP    | \n0.0.0.0            8088      HTTP    |\n0.0.0.0            15031     HTTP    |\n0.0.0.0            9090      HTTP    | \n0.0.0.0            9411      HTTP    | æ¥æ”¶ä¸ 0.0.0.0_15001 é…å¯¹çš„ Outbound HTTP æµé‡\n0.0.0.0            80        HTTP    |\n0.0.0.0            15030     HTTP    |\n0.0.0.0            9080      HTTP    |\n0.0.0.0            9093      HTTP    |\n0.0.0.0            3000      HTTP    |\n0.0.0.0            8060      HTTP    |\n0.0.0.0            9091      HTTP \u003c--\u002b    \n0.0.0.0            15001     TCP  \u003c--- æ¥æ”¶æ‰€æœ‰ç» iptables æ‹¦æˆªçš„ Inbound å’Œ Outbound æµé‡å¹¶è½¬äº¤ç»™è™šæ‹Ÿç›‘å¬å™¨å¤„ç†\n\u0060\u0060\u0060\n\nå½“æ¥è‡ª \u0060productpage\u0060 çš„æµé‡æŠµè¾¾ \u0060reviews\u0060 Pod çš„æ—¶å€™å·²ç»ï¼Œdownstream å¿…é¡»æ˜ç¡®çŸ¥é“ Pod çš„ IP åœ°å€ä¸º \u0060172.33.3.3\u0060 æ‰€ä»¥æ‰ä¼šè®¿é—®è¯¥ Podï¼Œæ‰€ä»¥è¯¥è¯·æ±‚æ˜¯ \u0060172.33.3.3:9080\u0060ã€‚\n\n**\u0060virtual\u0060 Listener**\n\nä»è¯¥ Pod çš„ Listener åˆ—è¡¨ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ0.0.0.0:15001\/TCP çš„ Listenerï¼ˆå…¶å®é™…åå­—æ˜¯ \u0060virtual\u0060ï¼‰ç›‘å¬æ‰€æœ‰çš„ Inbound æµé‡ï¼Œä¸‹é¢æ˜¯è¯¥ Listener çš„è¯¦ç»†é…ç½®ã€‚\n\n\u0060\u0060\u0060json\n{\n    \u0022name\u0022: \u0022virtual\u0022,\n    \u0022address\u0022: {\n        \u0022socketAddress\u0022: {\n            \u0022address\u0022: \u00220.0.0.0\u0022,\n            \u0022portValue\u0022: 15001\n        }\n    },\n    \u0022filterChains\u0022: [\n        {\n            \u0022filters\u0022: [\n                {\n                    \u0022name\u0022: \u0022envoy.tcp_proxy\u0022,\n                    \u0022config\u0022: {\n                        \u0022cluster\u0022: \u0022BlackHoleCluster\u0022,\n                        \u0022stat_prefix\u0022: \u0022BlackHoleCluster\u0022\n                    }\n                }\n            ]\n        }\n    ],\n    \u0022useOriginalDst\u0022: true\n}\n\u0060\u0060\u0060\n\n**UseOriginalDst**ï¼šä»é…ç½®ä¸­å¯ä»¥çœ‹å‡º \u0060useOriginalDst\u0060 é…ç½®æŒ‡å®šä¸º \u0060true\u0060ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç¼ºçœä¸º falseï¼Œä½¿ç”¨ iptables é‡å®šå‘è¿æ¥æ—¶ï¼Œproxy æ¥æ”¶çš„ç«¯å£å¯èƒ½ä¸åŸå§‹ç›®çš„åœ°å€çš„ç«¯å£ä¸ä¸€æ ·ï¼Œå¦‚æ­¤å¤„ proxy æ¥æ”¶çš„ç«¯å£ä¸º 15001ï¼Œè€ŒåŸå§‹ç›®çš„åœ°ç«¯å£ä¸º 9080ã€‚å½“æ­¤æ ‡å¿—è®¾ç½®ä¸º true æ—¶ï¼ŒListener å°†è¿æ¥é‡å®šå‘åˆ°ä¸åŸå§‹ç›®çš„åœ°å€å…³è”çš„ Listenerï¼Œæ­¤å¤„ä¸º \u0060172.33.3.3:9080\u0060ã€‚å¦‚æœæ²¡æœ‰ä¸åŸå§‹ç›®çš„åœ°å€å…³è”çš„ Listenerï¼Œåˆ™è¿æ¥ç”±æ¥æ”¶å®ƒçš„ Listener å¤„ç†ï¼Œå³è¯¥ \u0060virtual\u0060 Listenerï¼Œç»è¿‡ \u0060envoy.tcp_proxy\u0060 è¿‡æ»¤å™¨å¤„ç†è½¬å‘ç»™ \u0060BlackHoleCluster\u0060ï¼Œè¿™ä¸ª Cluster çš„ä½œç”¨æ­£å¦‚å®ƒçš„åå­—ï¼Œå½“ Envoy æ‰¾ä¸åˆ°åŒ¹é…çš„è™šæ‹Ÿç›‘å¬å™¨æ—¶ï¼Œå°±ä¼šå°†è¯·æ±‚å‘é€ç»™å®ƒï¼Œå¹¶è¿”å› 404ã€‚è¿™ä¸ªå°†äºä¸‹æ–‡æåˆ°çš„ Listener ä¸­è®¾ç½® \u0060bindToPort\u0060 ç›¸å‘¼åº”ã€‚\n\n**æ³¨æ„**ï¼šè¯¥å‚æ•°å°†è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨åŸå§‹ç›®çš„åœ°å€çš„ Listener filter æ›¿ä»£ã€‚è¯¥å‚æ•°çš„ä¸»è¦ç”¨é€”æ˜¯ï¼šEnvoy é€šè¿‡ç›‘å¬ 15001 ç«¯å£å°† iptables æ‹¦æˆªçš„æµé‡ç»ç”±å…¶ä»– Listener å¤„ç†è€Œä¸æ˜¯ç›´æ¥è½¬å‘å‡ºå»ï¼Œè¯¦æƒ…è§ [Virtual Listener](https:\/\/zhaohuabing.com\/post\/2018-09-25-istio-traffic-management-impl-intro\/#virtual-listener)ã€‚\n\n**Listener 172.33.3.3_9080**\n\nä¸Šæ–‡è¯´åˆ°è¿›å…¥ Inbound handler çš„æµé‡è¢« \u0060virtual\u0060 Listener è½¬ç§»åˆ° \u0060172.33.3.3_9080\u0060 Listenerï¼Œæˆ‘ä»¬åœ¨æŸ¥çœ‹ä¸‹è¯¥ Listener é…ç½®ã€‚\n\nè¿è¡Œ \u0060istioctl pc listener reviews-v1-cb8655c75-b97zc --address 172.33.3.3 --port 9080 -o json\u0060 æŸ¥çœ‹ã€‚\n\n\u0060\u0060\u0060json\n[{\n    \u0022name\u0022: \u0022172.33.3.3_9080\u0022,\n    \u0022address\u0022: {\n        \u0022socketAddress\u0022: {\n            \u0022address\u0022: \u0022172.33.3.3\u0022,\n            \u0022portValue\u0022: 9080\n        }\n    },\n    \u0022filterChains\u0022: [\n        {\n            \u0022filterChainMatch\u0022: {\n                \u0022transportProtocol\u0022: \u0022raw_buffer\u0022\n            },\n            \u0022filters\u0022: [\n                {\n                    \u0022name\u0022: \u0022envoy.http_connection_manager\u0022,\n                    \u0022config\u0022: {\n                        ... \n                        \u0022route_config\u0022: {\n                            \u0022name\u0022: \u0022inbound|9080||reviews.default.svc.cluster.local\u0022,\n                            \u0022validate_clusters\u0022: false,\n                            \u0022virtual_hosts\u0022: [\n                                {\n                                    \u0022domains\u0022: [\n                                        \u0022*\u0022\n                                    ],\n                                    \u0022name\u0022: \u0022inbound|http|9080\u0022,\n                                    \u0022routes\u0022: [\n                                        {\n                                            ...\n                                            \u0022route\u0022: {\n                                                \u0022cluster\u0022: \u0022inbound|9080||reviews.default.svc.cluster.local\u0022,\n                                                \u0022max_grpc_timeout\u0022: \u00220.000s\u0022,\n                                                \u0022timeout\u0022: \u00220.000s\u0022\n                                            }\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n                        \u0022use_remote_address\u0022: false,\n                        ...\n                    }\n                }\n            ]ï¼Œ\n            \u0022deprecatedV1\u0022: {\n                \u0022bindToPort\u0022: false\n            }\n        ...\n        },\n        {\n            \u0022filterChainMatch\u0022: {\n                \u0022transportProtocol\u0022: \u0022tls\u0022\n            },\n            \u0022tlsContext\u0022: {...\n            },\n            \u0022filters\u0022: [...\n            ]\n        }\n    ],\n...\n}]\n\u0060\u0060\u0060\n\n**bindToPort**ï¼šæ³¨æ„å…¶ä¸­æœ‰ä¸€ä¸ª [\u0060bindToPort\u0060](https:\/\/www.envoyproxy.io\/docs\/envoy\/v1.6.0\/api-v1\/listeners\/listeners) çš„é…ç½®ï¼Œå…¶å€¼ä¸º \u0060false\u0060ï¼Œè¯¥é…ç½®çš„ç¼ºçœå€¼ä¸º \u0060true\u0060ï¼Œè¡¨ç¤ºå°† Listener ç»‘å®šåˆ°ç«¯å£ä¸Šï¼Œæ­¤å¤„è®¾ç½®ä¸º \u0060false\u0060 åˆ™è¯¥ Listener åªèƒ½å¤„ç†å…¶ä»– Listener è½¬ç§»è¿‡æ¥çš„æµé‡ï¼Œå³ä¸Šæ–‡æ‰€è¯´çš„ \u0060virtual\u0060 Listenerï¼Œæˆ‘ä»¬çœ‹å…¶ä¸­çš„ filterChains.filters ä¸­çš„ \u0060envoy.http_connection_manager\u0060 é…ç½®éƒ¨åˆ†ï¼š\n\n\u0060\u0060\u0060json\n\u0022route_config\u0022: {\n                            \u0022name\u0022: \u0022inbound|9080||reviews.default.svc.cluster.local\u0022,\n                            \u0022validate_clusters\u0022: false,\n                            \u0022virtual_hosts\u0022: [\n                                {\n                                    \u0022domains\u0022: [\n                                        \u0022*\u0022\n                                    ],\n                                    \u0022name\u0022: \u0022inbound|http|9080\u0022,\n                                    \u0022routes\u0022: [\n                                        {\n                                            ...\n                                            \u0022route\u0022: {\n                                                \u0022cluster\u0022: \u0022inbound|9080||reviews.default.svc.cluster.local\u0022,\n                                                \u0022max_grpc_timeout\u0022: \u00220.000s\u0022,\n                                                \u0022timeout\u0022: \u00220.000s\u0022\n                                            }\n                                        }\n                                    ]\n                                }\n                            ]\n                        }\n\u0060\u0060\u0060\n\nè¯¥é…ç½®è¡¨ç¤ºæµé‡å°†è½¬äº¤ç»™ Cluster \u0060inbound|9080||reviews.default.svc.cluster.local\u0060 å¤„ç†ã€‚\n\n**Cluster \u0060inbound|9080||reviews.default.svc.cluster.local\u0060**\n\nè¿è¡Œ \u0060istioctl pc cluster reviews-v1-cb8655c75-b97zc --fqdn reviews.default.svc.cluster.local --direction inbound -o json\u0060 æŸ¥çœ‹è¯¥ Cluster çš„é…ç½®å¦‚ä¸‹ã€‚\n\n\u0060\u0060\u0060json\n[\n    {\n        \u0022name\u0022: \u0022inbound|9080||reviews.default.svc.cluster.local\u0022,\n        \u0022connectTimeout\u0022: \u00221.000s\u0022,\n        \u0022hosts\u0022: [\n            {\n                \u0022socketAddress\u0022: {\n                    \u0022address\u0022: \u0022127.0.0.1\u0022,\n                    \u0022portValue\u0022: 9080\n                }\n            }\n        ],\n        \u0022circuitBreakers\u0022: {\n            \u0022thresholds\u0022: [\n                {}\n            ]\n        }\n    }\n]\n\u0060\u0060\u0060\n\nå¯ä»¥çœ‹åˆ°è¯¥ Cluster çš„ Endpoint ç›´æ¥å¯¹åº”çš„å°±æ˜¯ localhostï¼Œå†ç»è¿‡ iptables è½¬å‘æµé‡å°±è¢«åº”ç”¨ç¨‹åºå®¹å™¨æ¶ˆè´¹äº†ã€‚\n\n## ç†è§£ Outbound Handler\n\nå› ä¸º \u0060reviews\u0060 ä¼šå‘ \u0060ratings\u0060 æœåŠ¡å‘é€ HTTP è¯·æ±‚ï¼Œè¯·æ±‚çš„åœ°å€æ˜¯ï¼š\u0060http:\/\/ratings.default.svc.cluster.local:9080\/\u0060ï¼ŒOutbound handler çš„ä½œç”¨æ˜¯å°† iptables æ‹¦æˆªåˆ°çš„æœ¬åœ°åº”ç”¨ç¨‹åºå‘å‡ºçš„æµé‡ï¼Œç»ç”± Envoy åˆ¤æ–­å¦‚ä½•è·¯ç”±åˆ° upstreamã€‚\n\nåº”ç”¨ç¨‹åºå®¹å™¨å‘å‡ºçš„è¯·æ±‚ä¸º Outbound æµé‡ï¼Œè¢« iptables åŠ«æŒåè½¬ç§»ç»™ Envoy  Outbound handler å¤„ç†ï¼Œç„¶åç»è¿‡ \u0060virtual\u0060 Listenerã€\u00600.0.0.0_9080\u0060 Listenerï¼Œç„¶åé€šè¿‡ Route 9080 æ‰¾åˆ° upstream çš„ clusterï¼Œè¿›è€Œé€šè¿‡ EDS æ‰¾åˆ° Endpoint æ‰§è¡Œè·¯ç”±åŠ¨ä½œã€‚è¿™ä¸€éƒ¨åˆ†å¯ä»¥å‚è€ƒ Istio å®˜ç½‘ä¸­çš„ Envoy æ·±åº¦é…ç½®è§£æã€‚\n\n**Route 9080**\n\n\u0060reviews\u0060 ä¼šè¯·æ±‚ \u0060ratings\u0060 æœåŠ¡ï¼Œè¿è¡Œ \u0060istioctl proxy-config routes reviews-v1-cb8655c75-b97zc --name 9080 -o json\u0060 æŸ¥çœ‹ route é…ç½®ï¼Œå› ä¸º Envoy ä¼šæ ¹æ® HTTP header ä¸­çš„ domains æ¥åŒ¹é… VirtualHostï¼Œæ‰€ä»¥ä¸‹é¢åªåˆ—ä¸¾äº† \u0060ratings.default.svc.cluster.local:9080\u0060 è¿™ä¸€ä¸ª VirtualHostã€‚\n\n\u0060\u0060\u0060json\n[{\n    \u0022name\u0022: \u0022ratings.default.svc.cluster.local:9080\u0022,\n    \u0022domains\u0022: [\n        \u0022ratings.default.svc.cluster.local\u0022,\n        \u0022ratings.default.svc.cluster.local:9080\u0022,\n        \u0022ratings\u0022,\n        \u0022ratings:9080\u0022,\n        \u0022ratings.default.svc.cluster\u0022,\n        \u0022ratings.default.svc.cluster:9080\u0022,\n        \u0022ratings.default.svc\u0022,\n        \u0022ratings.default.svc:9080\u0022,\n        \u0022ratings.default\u0022,\n        \u0022ratings.default:9080\u0022,\n        \u002210.254.234.130\u0022,\n        \u002210.254.234.130:9080\u0022\n    ],\n    \u0022routes\u0022: [\n        {\n            \u0022match\u0022: {\n                \u0022prefix\u0022: \u0022\/\u0022\n            },\n            \u0022route\u0022: {\n                \u0022cluster\u0022: \u0022outbound|9080||ratings.default.svc.cluster.local\u0022,\n                \u0022timeout\u0022: \u00220.000s\u0022,\n                \u0022maxGrpcTimeout\u0022: \u00220.000s\u0022\n            },\n            \u0022decorator\u0022: {\n                \u0022operation\u0022: \u0022ratings.default.svc.cluster.local:9080\/*\u0022\n            },\n            \u0022perFilterConfig\u0022: {...\n            }\n        }\n    ]\n},\n..]\n\u0060\u0060\u0060\n\nä»è¯¥ Virtual Host é…ç½®ä¸­å¯ä»¥çœ‹åˆ°å°†æµé‡è·¯ç”±åˆ° Cluster \u0060outbound|9080||ratings.default.svc.cluster.local\u0060ã€‚\n\n**Endpoint \u0060outbound|9080||ratings.default.svc.cluster.local\u0060**\n\nIstio 1.1 ä»¥å‰ç‰ˆæœ¬ä¸æ”¯æŒä½¿ç”¨ \u0060istioctl\u0060 å‘½ä»¤ç›´æ¥æŸ¥è¯¢ Cluster çš„ Endpointï¼Œå¯ä»¥ä½¿ç”¨æŸ¥è¯¢ Pilot çš„ debug ç«¯ç‚¹çš„æ–¹å¼æŠ˜ä¸­ã€‚\n\n\u0060\u0060\u0060bash\nkubectl exec reviews-v1-cb8655c75-b97zc -c istio-proxy curl http:\/\/istio-pilot.istio-system.svc.cluster.local:9093\/debug\/edsz \u003e endpoints.json\n\u0060\u0060\u0060\n\n\u0060endpoints.json\u0060 æ–‡ä»¶ä¸­åŒ…å«äº†æ‰€æœ‰ Cluster çš„ Endpoint ä¿¡æ¯ï¼Œæˆ‘ä»¬åªé€‰å–å…¶ä¸­çš„ \u0060outbound|9080||ratings.default.svc.cluster.local\u0060 Cluster çš„ç»“æœå¦‚ä¸‹ã€‚\n\n\u0060\u0060\u0060json\n{\n  \u0022clusterName\u0022: \u0022outbound|9080||ratings.default.svc.cluster.local\u0022,\n  \u0022endpoints\u0022: [\n    {\n      \u0022locality\u0022: {\n\n      },\n      \u0022lbEndpoints\u0022: [\n        {\n          \u0022endpoint\u0022: {\n            \u0022address\u0022: {\n              \u0022socketAddress\u0022: {\n                \u0022address\u0022: \u0022172.33.100.2\u0022,\n                \u0022portValue\u0022: 9080\n              }\n            }\n          },\n          \u0022metadata\u0022: {\n            \u0022filterMetadata\u0022: {\n              \u0022istio\u0022: {\n                  \u0022uid\u0022: \u0022kubernetes:\/\/ratings-v1-8558d4458d-ns6lk.default\u0022\n                }\n            }\n          }\n        }\n      ]\n    }\n  ]\n}\n\u0060\u0060\u0060\n\nEndpoint å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼ŒEnvoy å°†æ ¹æ®ä¸€å®šè§„åˆ™é€‰æ‹©é€‚å½“çš„ Endpoint æ¥è·¯ç”±ã€‚\n\n**æ³¨**ï¼šIstio 1.1 å°†æ”¯æŒ \u0060istioctl pc endpoint\u0060 å‘½ä»¤æ¥æŸ¥è¯¢ Endpointã€‚\n\n## å‚è€ƒ\n\n- è°ƒè¯• Envoy å’Œ Pilot - istio.io\n- [ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ - jimmysong.io](https:\/\/jimmysong.io\/posts\/envoy-sidecar-injection-in-istio-service-mesh-deep-dive\/)\n- [Istio æµé‡ç®¡ç†å®ç°æœºåˆ¶æ·±åº¦è§£æ - zhaohuabing.com](https:\/\/zhaohuabing.com\/post\/2018-09-25-istio-traffic-management-impl-intro\/)\n\n', '\/blog\/envoy-sidecar-routing-of-istio-service-mesh-deep-dive\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">Sidecar proxy ä¸­ Indbound/Outbound æµé‡å¤„ç†è¿‡ç¨‹è¯¦è§£ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/istio-service-and-traffic-model/">Istio ä¸­çš„æœåŠ¡å’Œæµé‡çš„æŠ½è±¡æ¨¡å‹</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/12/17</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/service-mesh"> 
             Service Mesh
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Istio ä¸­çš„æœåŠ¡å’Œæµé‡çš„æŠ½è±¡æ¨¡å‹', 'æœ¬æ–‡ä»‹ç»äº† Istio å’Œ Kubernetes ä¸­çš„ä¸€äº›æœåŠ¡å’Œæµé‡çš„æŠ½è±¡æ¨¡å‹ã€‚', '\næœ¬æ–‡ä»‹ç»äº† Istio å’Œ Kubernetes ä¸­çš„ä¸€äº›æœåŠ¡å’Œæµé‡çš„æŠ½è±¡æ¨¡å‹ã€‚è™½ç„¶ Istio ä¸€å¼€å§‹ç¡®å®šçš„æŠ½è±¡æ¨¡å‹ä¸å¯¹æ¥çš„åº•å±‚å¹³å°æ— å…³ï¼Œä½†ç›®å‰æ¥çœ‹åŸºæœ¬ç»‘å®š Kubernetesï¼Œæœ¬æ–‡ä»…ä»¥ Kubernetes è¯´æ˜ã€‚å¦å¤–åœ¨ ServiceMesher ç¤¾åŒºä¸­æœ€è¿‘æœ‰å¾ˆå¤šå…³äº Istioã€Envoyã€Kubernetes ä¹‹ä¸­çš„æœåŠ¡æ¨¡å‹å…³ç³»çš„è®¨è®ºï¼Œæœ¬æ–‡ä½œä¸ºä¸€ä¸ªå¼€ç¯‡è¯´æ˜ï¼ŒKubernetes å’Œ Isito ä¹‹é—´æœ‰å“ªäº›å…±æœ‰çš„æœåŠ¡æ¨¡å‹ï¼ŒIstio åœ¨ Kubernetes çš„æœåŠ¡æ¨¡å‹ä¹‹ä¸Šåˆå¢åŠ äº†ä»€ä¹ˆã€‚\n\n**æœåŠ¡å…·æœ‰å¤šä¸ªç‰ˆæœ¬ã€‚** åœ¨ CI\/CD è¿‡ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªæœåŠ¡å¯èƒ½åŒæ—¶éƒ¨ç½²åœ¨å¤šä¸ªç¯å¢ƒä¸­ï¼Œå¦‚å¼€å‘ã€ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒç­‰ï¼Œè¿™äº›æœåŠ¡ç‰ˆæœ¬ä¸ä¸€å®šå…·æœ‰ä¸åŒçš„ APIï¼Œå¯èƒ½åªæ˜¯ä¸€äº›å°çš„æ›´æ”¹å¯¼è‡´çš„è¿­ä»£ç‰ˆæœ¬ã€‚åœ¨ A\/B æµ‹è¯•å’Œç°åº¦å‘å¸ƒä¸­ç»å¸¸é‡åˆ°è¿™ç§æƒ…å†µã€‚\n\n## Kubernetes ä¸ Istio ä¸­å…±æœ‰çš„æ¨¡å‹\n\nå› ä¸º Istio åŸºæœ¬å°±æ˜¯ç»‘å®šåœ¨ Kubernetes ä¸Šï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ Kubernetes åŠ Istio ä¸­å…±æœ‰çš„æœåŠ¡æ¨¡å‹ã€‚\n\nKubernetes ä¸­ iptables ä»£ç†æ¨¡å¼ï¼ˆå¦å¤–è¿˜æœ‰ IPVS æ¨¡å¼ï¼‰ä¸‹çš„ serviceï¼Œç®¡ç†å‘˜å¯ä»¥åœ¨ kube-proxy ä¸­é…ç½®ç®€å•çš„è´Ÿè½½å‡è¡¡ï¼Œå¯¹æ•´ä¸ª node ç”Ÿæ•ˆï¼Œæ— æ³•é…ç½®åˆ°å•ä¸ªæœåŠ¡çš„è´Ÿè½½å‡è¡¡å’Œå…¶ä»–å¾®æœåŠ¡çš„é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚ç†”æ–­ã€é™æµã€è¿½è¸ªç­‰ï¼Œè¿™äº›åŠŸèƒ½åªèƒ½åœ¨åº”ç”¨ä¸­å®ç°äº†ï¼Œè€Œåœ¨ Istio çš„æ¦‚å¿µæ¨¡å‹ä¸­å®Œå…¨å»æ‰äº† \u0060kube-proxy\u0060  è¿™ä¸ªç»„ä»¶ï¼Œå°†å…¶åˆ†æ•£åˆ°æ¯ä¸ªåº”ç”¨ Pod ä¸­åŒæ—¶éƒ¨ç½²çš„ Envoy ä¸­å®ç°ã€‚\n\nä¸‹é¢åˆ—ä¸¾çš„æ˜¯ Kubernetes å’Œ Istio ä¸­å…±æœ‰çš„æ¨¡å‹ã€‚\n\n### Service\n\nè¿™å®é™…ä¸Šè·Ÿ Kubernetes ä¸­çš„ service æ¦‚å¿µæ˜¯ä¸€è‡´çš„ï¼Œè¯·å‚è€ƒ [Kubernetes ä¸­çš„ service](https:\/\/jimmysong.io\/kubernetes-handbook\/concepts\/service.html)ã€‚Istio æ¨å‡ºäº†æ¯” service æ›´å¤æ‚çš„æ¨¡å‹ \u0060VirtualService\u0060ï¼Œè¿™ä¸å•çº¯æ˜¯å®šä¹‰ä¸€ä¸ªæœåŠ¡äº†ï¼Œè€Œæ˜¯åœ¨æœåŠ¡ä¹‹ä¸Šå®šä¹‰äº†è·¯ç”±è§„åˆ™ã€‚\n\næ¯ä¸ªæœåŠ¡éƒ½æœ‰ä¸€ä¸ªå®Œå…¨é™å®šçš„åŸŸåï¼ˆFQDNï¼‰ï¼Œç›‘å¬ä¸€ä¸ªæˆ–å¤šä¸ªç«¯å£ã€‚æœåŠ¡è¿˜å¯ä»¥æœ‰ä¸å…¶ç›¸å…³è”çš„å•ä¸ªè´Ÿè½½å‡è¡¡å™¨æˆ–è™šæ‹Ÿ IP åœ°å€ã€‚é’ˆå¯¹ FQDN çš„ DNS æŸ¥è¯¢å°†è§£æä¸ºè¯¥è´Ÿè½½å‡è¡¡å™¨æˆ–è€…è™šæ‹Ÿ IP çš„åœ°å€ã€‚\n\nä¾‹å¦‚ Kubernetes ä¸­ä¸€ä¸ªæœåŠ¡ä¸º \u0060foo.default.svc.cluster.local\u0060 ï¼Œè™šæ‹Ÿ IP \/ClusterIP æ˜¯ 10.0.1.1ï¼Œç›‘å¬çš„ç«¯å£æ˜¯ 80 å’Œ 8080ã€‚\n\n### Endpoint\n\nè¿™é‡ŒæŒ‡çš„æ˜¯ Kubernetes ä¸­çš„ endpointï¼Œä¸€ä¸ª endpoint æ˜¯å®ç°äº†æŸæœåŠ¡çš„å…·ä½“å®ä¾‹ï¼Œä¸€ä¸ªæœåŠ¡å¯èƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª Endpointï¼Œè¡¨ç¤ºä¸º IP åœ°å€åŠ ç«¯å£ï¼Œä¹Ÿå¯ä»¥ä¸º DNS åç§°åŠ ç«¯å£ã€‚\n\nå…¶å®åˆ°åº•å“ªäº›å®ä¾‹å±äºåŒä¸€ä¸ª serviceï¼Œè¿˜æ˜¯éœ€è¦ é€šè¿‡ label åŒ¹é…æ¥é€‰æ‹©ã€‚\n\n### Label\n\næœåŠ¡çš„ç‰ˆæœ¬ã€å¯¹åº”çš„å¼•ç”¨åç§°ç­‰æ˜¯é€šè¿‡ label æ¥æ ‡è®°çš„ï¼Œä¾‹å¦‚ä¸‹é¢ Kubernetes ä¸­ä¸€ä¸ªåº”ç”¨çš„ YAML é…ç½®ã€‚\n\n\u0060\u0060\u0060yaml\napiVersion: extensions\/v1beta1\nkind: Deployment\nmetadata:\n  name: ratings-v1\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: ratings\n        version: v1\n    spec:\n      containers:\n      - name: ratings\n        image: istio\/examples-bookinfo-ratings-v1:1.8.0\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 9080\n\u0060\u0060\u0060\n\n \u0060version: v1\u0060 æ ‡è®°è¯¥æœåŠ¡æ˜¯ v1 ç‰ˆæœ¬ï¼Œ\u0060version\u0060 æ˜¯ä¸€ä¸ªçº¦å®šä¿—ç§°çš„æ ‡ç­¾ï¼Œå»ºè®®å¤§å®¶çš„æœåŠ¡ä¸Šéƒ½å¸¦ä¸Šè¯¥æ ‡ç­¾ã€‚\n\nå½“ç„¶æœåŠ¡çš„ label å¯ä»¥è®¾ç½®ä»»æ„å¤šä¸ªï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯åœ¨åšè·¯ç”±çš„æ—¶å€™å¯ä»¥æ ¹æ®æ ‡ç­¾åŒ¹é…æ¥åšç»†ç²’åº¦çš„æµé‡åˆ’åˆ†ã€‚\n\n## æ•°æ®å¹³é¢ Envoy\n\nEnvoy æ˜¯ Istio ä¸­é»˜è®¤çš„ sidecar proxyï¼Œè´Ÿè´£æœåŠ¡é—´çš„æµé‡ç®¡æ§ã€è®¤è¯ä¸å®‰å…¨åŠ å¯†ã€å¯è§‚æµ‹æ€§ç­‰ã€‚\n\nä¸‹é¢æ˜¯ Envoy çš„æ¶æ„å›¾ã€‚\n\n![Envoy æ¶æ„å›¾](envoy-arch-20190114.png)\n\næˆ‘å†ç»™å¤§å®¶ä»‹ç» Envoy ä¸­çš„å¦‚ä¸‹å‡ ä¸ªé‡è¦æ¦‚å¿µã€‚\n\n### Cluster\n\né›†ç¾¤ï¼ˆclusterï¼‰æ˜¯ Envoy è¿æ¥åˆ°çš„ä¸€ç»„é€»è¾‘ä¸Šç›¸ä¼¼çš„ä¸Šæ¸¸ä¸»æœºã€‚Envoy é€šè¿‡æœåŠ¡å‘ç°å‘ç°é›†ç¾¤ä¸­çš„æˆå‘˜ã€‚Envoy å¯ä»¥é€šè¿‡ä¸»åŠ¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥æ¥ç¡®å®šé›†ç¾¤æˆå‘˜çš„å¥åº·çŠ¶å†µã€‚Envoy å¦‚ä½•å°†è¯·æ±‚è·¯ç”±åˆ°é›†ç¾¤æˆå‘˜ç”±è´Ÿè½½å‡è¡¡ç­–ç•¥ç¡®å®šã€‚\n\nè¿™ä¸ªä¸ Kubernetes ä¸­çš„ Service æ¦‚å¿µç±»ä¼¼ï¼Œåªä¸è¿‡ Kubernetes ä¸­çš„æœåŠ¡å‘ç°ä¸­å¹¶ä¸åŒ…å«å¥åº·çŠ¶å†µæ£€æŸ¥ï¼Œè€Œæ˜¯é€šè¿‡[é…ç½® Pod çš„ liveness å’Œ readiness æ¢é’ˆ](https:\/\/jimmysong.io\/kubernetes-handbook\/guide\/configure-liveness-readiness-probes.html)æ¥å®ç°ï¼ŒæœåŠ¡å‘ç°é»˜è®¤ä¹Ÿæ˜¯é€šè¿‡ DNS æ¥å®ç°ã€‚\n\n### Listener\n\nç›‘å¬å™¨ï¼ˆlistenerï¼‰æ˜¯å¯ä»¥ç”±ä¸‹æ¸¸å®¢æˆ·ç«¯è¿æ¥çš„å‘½åç½‘ç»œä½ç½®ï¼ˆä¾‹å¦‚ï¼Œç«¯å£ã€unix åŸŸå¥—æ¥å­—ç­‰ï¼‰ã€‚Envoy å…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ªä¸‹æ¸¸ä¸»æœºè¿æ¥çš„ä¾¦å¬å™¨ã€‚ä¸€èˆ¬æ˜¯æ¯å°ä¸»æœºè¿è¡Œä¸€ä¸ª Envoyï¼Œä½¿ç”¨å•è¿›ç¨‹è¿è¡Œï¼Œä½†æ˜¯æ¯ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¯åŠ¨ä»»æ„æ•°é‡çš„ Listenerï¼ˆç›‘å¬å™¨ï¼‰ï¼Œç›®å‰åªç›‘å¬ TCPï¼Œæ¯ä¸ªç›‘å¬å™¨éƒ½ç‹¬ç«‹é…ç½®ä¸€å®šæ•°é‡çš„ï¼ˆL3\/L4ï¼‰ç½‘ç»œè¿‡æ»¤å™¨ã€‚Listenter ä¹Ÿå¯ä»¥é€šè¿‡ Listener Discovery Serviceï¼ˆ**LDS**ï¼‰åŠ¨æ€è·å–ã€‚\n\n### Listener filter\n\nListener ä½¿ç”¨ listener filterï¼ˆç›‘å¬å™¨è¿‡æ»¤å™¨ï¼‰æ¥æ“ä½œé“¾æ¥çš„å…ƒæ•°æ®ã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨ä¸æ›´æ”¹ Envoy çš„æ ¸å¿ƒåŠŸèƒ½çš„æƒ…å†µä¸‹æ·»åŠ æ›´å¤šçš„é›†æˆåŠŸèƒ½ã€‚Listener filter çš„ API ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºè¿™äº›è¿‡æ»¤å™¨æœ€ç»ˆæ˜¯åœ¨æ–°æ¥å—çš„å¥—æ¥å­—ä¸Šè¿è¡Œã€‚åœ¨é“¾ä¸­å¯ä»¥äº’ç›¸è¡”æ¥ä»¥æ”¯æŒæ›´å¤æ‚çš„åœºæ™¯ï¼Œä¾‹å¦‚è°ƒç”¨é€Ÿç‡é™åˆ¶ã€‚Envoy å·²ç»åŒ…å«äº†å¤šä¸ªç›‘å¬å™¨è¿‡æ»¤å™¨ã€‚\n\n## Istio ä¸­å¢åŠ çš„æµé‡æ¨¡å‹\n\n\u0060VirtualService\u0060ã€\u0060DestinationRule\u0060ã€\u0060Gateway\u0060ã€\u0060ServiceEntry\u0060 å’Œ \u0060EnvoyFilter\u0060 éƒ½æ˜¯ Istio ä¸­ä¸ºæµé‡ç®¡ç†æ‰€åˆ›å»ºçš„ CRDï¼Œè¿™äº›æ¦‚å¿µå…¶å®æ˜¯åšè·¯ç”±é…ç½®å’Œæµé‡ç®¡ç†çš„ï¼Œè€Œ Kubernetes ä¸­çš„ service åªæ˜¯ç”¨æ¥åšæœåŠ¡å‘ç°ã€‚Service Mesh ä¸­çœŸæ­£çš„æœåŠ¡æ¨¡å‹åº”è¯¥æ˜¯ Envoy çš„ [xDS åè®®](https:\/\/cloudnative.to\/blog\/envoy-xds-protocol\/)ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æœåŠ¡çš„æµé‡æ²»ç†ï¼ŒæœåŠ¡çš„ç«¯ç‚¹æ˜¯é€šè¿‡ EDS æ¥é…ç½®çš„ã€‚\n\n![Istio pilot æ¶æ„å›¾](istio-pilot.png)\n\nä¸Šå›¾æ˜¯ Pilot è®¾è®¡å›¾ï¼Œæ¥è‡ª[Istio Pilot design overview](https:\/\/github.com\/istio\/old_pilot_repo\/blob\/master\/doc\/design.md)ã€‚\n\n### Routing\n\nKubernetes ä¸­çš„ service æ˜¯æ²¡æœ‰ä»»ä½•è·¯ç”±å±æ€§å¯ä»¥é…ç½®çš„ï¼ŒIstio åœ¨è®¾è®¡ä¹‹åˆå°±é€šè¿‡åœ¨åŒä¸€ä¸ª Pod ä¸­ï¼Œåœ¨åº”ç”¨å®¹å™¨æ—è¿è¡Œä¸€ä¸ª sidecar proxy æ¥é€æ˜å¾—å®ç°ç»†ç²’åº¦çš„è·¯ç”±æ§åˆ¶ã€‚\n\n### VirtualService\n\n\u0060VirtualService\u0060 å®šä¹‰é’ˆå¯¹æŒ‡å®šæœåŠ¡æµé‡çš„è·¯ç”±è§„åˆ™ã€‚æ¯ä¸ªè·¯ç”±è§„åˆ™éƒ½é’ˆå¯¹ç‰¹å®šåè®®çš„åŒ¹é…è§„åˆ™ã€‚å¦‚æœæµé‡ç¬¦åˆè¿™äº›ç‰¹å¾ï¼Œå°±ä¼šæ ¹æ®è§„åˆ™å‘é€åˆ°æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ç›®æ ‡æœåŠ¡ï¼ˆæˆ–è€…ç›®æ ‡æœåŠ¡çš„å­é›†æˆ–ç‰ˆæœ¬ï¼‰ã€‚å¯¹äº A\/B æµ‹è¯•å’Œç°åº¦å‘å¸ƒç­‰åœºæ™¯ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨åˆ’åˆ† \u0060subset\u0060ï¼ŒVirtualService ä¸­æ ¹æ® destination ä¸­çš„ subset é…ç½®æ¥é€‰æ‹©è·¯ç”±ï¼Œä½†æ˜¯è¿™äº› subset ç©¶ç«Ÿå¯¹åº”å“ªäº›æœåŠ¡ç¤ºä¾‹ï¼Œè¿™å°±éœ€è¦ \u0060DestionationRule\u0060ã€‚\n\n### DestinationRule\n\n\u0060DestinationRule\u0060 æ‰€å®šä¹‰çš„ç­–ç•¥ï¼Œå†³å®šäº†ç»è¿‡è·¯ç”±å¤„ç†ä¹‹åçš„æµé‡çš„è®¿é—®ç­–ç•¥ã€‚è¿™äº›ç­–ç•¥ä¸­å¯ä»¥å®šä¹‰è´Ÿè½½å‡è¡¡é…ç½®ã€è¿æ¥æ± å°ºå¯¸ä»¥åŠå¤–éƒ¨æ£€æµ‹ï¼ˆç”¨äºåœ¨è´Ÿè½½å‡è¡¡æ± ä¸­å¯¹ä¸å¥åº·ä¸»æœºè¿›è¡Œè¯†åˆ«å’Œé©±é€ï¼‰é…ç½®ã€‚\n\n### Gateway\n\n\u0060Gateway\u0060 æè¿°äº†ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œç”¨äºæ‰¿è½½ç½‘æ ¼è¾¹ç¼˜çš„è¿›å…¥å’Œå‘å‡ºè¿æ¥ã€‚è¿™ä¸€è§„èŒƒä¸­æè¿°äº†ä¸€ç³»åˆ—å¼€æ”¾ç«¯å£ï¼Œä»¥åŠè¿™äº›ç«¯å£æ‰€ä½¿ç”¨çš„åè®®ã€è´Ÿè½½å‡è¡¡çš„ SNI é…ç½®ç­‰å†…å®¹ã€‚\n\nè¿™ä¸ªå®é™…ä¸Šå°±æ˜¯å®šä¹‰æœåŠ¡ç½‘æ ¼çš„è¾¹ç¼˜è·¯ç”±ã€‚\n\n### ServiceEntry\n\n\u0060ServiceEntry\u0060 èƒ½å¤Ÿåœ¨ Istio å†…éƒ¨çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­åŠ å…¥é¢å¤–çš„æ¡ç›®ï¼Œä»è€Œè®©ç½‘æ ¼ä¸­è‡ªåŠ¨å‘ç°çš„æœåŠ¡èƒ½å¤Ÿè®¿é—®å’Œè·¯ç”±åˆ°è¿™äº›æ‰‹å·¥åŠ å…¥çš„æœåŠ¡ã€‚\u0060ServiceEntry\u0060 æè¿°äº†æœåŠ¡çš„å±æ€§ï¼ˆDNS åç§°ã€VIPã€ç«¯å£ã€åè®®ä»¥åŠç«¯ç‚¹ï¼‰ã€‚è¿™ç±»æœåŠ¡å¯èƒ½æ˜¯ç½‘æ ¼å¤–çš„ APIï¼Œæˆ–è€…æ˜¯å¤„äºç½‘æ ¼å†…éƒ¨ä½†å´ä¸å­˜åœ¨äºå¹³å°çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„æ¡ç›®ï¼ˆä¾‹å¦‚éœ€è¦å’Œ Kubernetes æœåŠ¡æ²Ÿé€šçš„ä¸€ç»„è™šæ‹ŸæœºæœåŠ¡ï¼‰ã€‚\n\nå¦‚æœæ²¡æœ‰é…ç½® ServiceEntry çš„è¯ï¼ŒIstio å®é™…ä¸Šæ˜¯æ— æ³•å‘ç°æœåŠ¡ç½‘æ ¼å¤–éƒ¨çš„æœåŠ¡çš„ã€‚\n\n### EnvoyFilter\n\n\u0060EnvoyFilter\u0060 å¯¹è±¡æè¿°äº†é’ˆå¯¹ä»£ç†æœåŠ¡çš„è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨å¯ä»¥å®šåˆ¶ç”± Istio Pilot ç”Ÿæˆçš„ä»£ç†é…ç½®ã€‚è¿™ä¸€åŠŸèƒ½ä¸€å®šè¦è°¨æ…ä½¿ç”¨ã€‚é”™è¯¯çš„é…ç½®å†…å®¹ä¸€æ—¦å®Œæˆä¼ æ’­ï¼Œå¯èƒ½ä¼šä»¤æ•´ä¸ªæœåŠ¡ç½‘æ ¼è¿›å…¥ç˜«ç—ªçŠ¶æ€ã€‚\n\nEnvoy ä¸­çš„ listener å¯ä»¥é…ç½®å¤šä¸ª filterï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§é€šè¿‡ Istio æ¥æ‰©å±• Envoy çš„æœºåˆ¶ã€‚\n\n## å‚è€ƒ\n\n- [Kubernetes ä¸­çš„ service - jimmysong.io](https:\/\/jimmysong.io\/kubernetes-handbook\/concepts\/service.html)\n- [Istio services model - github.com](https:\/\/github.com\/istio\/old_pilot_repo\/blob\/master\/doc\/service-registry.md)\n- [Istio æ–‡æ¡£ - istio.io](https:\/\/istio.io)\n', '\/blog\/istio-service-and-traffic-model\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡ä»‹ç»äº† Istio å’Œ Kubernetes ä¸­çš„ä¸€äº›æœåŠ¡å’Œæµé‡çš„æŠ½è±¡æ¨¡å‹ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/software-defined-delivery-manifesto/">è½¯ä»¶å®šä¹‰äº¤ä»˜ï¼ˆSDDï¼‰å®£è¨€</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/11/30</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e4%b8%9a%e6%80%81"> 
             ä¸šæ€
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('è½¯ä»¶å®šä¹‰äº¤ä»˜ï¼ˆSDDï¼‰å®£è¨€', 'ä»Šå¤©ç»™å¤§å®¶åˆ†äº«çš„æ˜¯ã€Šè½¯ä»¶å®šä¹‰äº¤ä»˜å®£è¨€ã€‹ï¼Œè¯¥å®£è¨€å‘å‡ºå·²ç»æœ‰ä¸€å‘¨å¤šæ—¶é—´äº†ï¼Œè¿˜åœ¨è”ç½²ç­¾åä¸­ã€‚', '\nä»Šå¤©ç»™å¤§å®¶åˆ†äº«çš„æ˜¯ã€Šè½¯ä»¶å®šä¹‰äº¤ä»˜å®£è¨€ã€‹ï¼Œè¯¥å®£è¨€å‘å‡ºå·²ç»æœ‰ä¸€å‘¨å¤šæ—¶é—´äº†ï¼Œç›®å‰è¯¥å®£è¨€çš„å®˜æ–¹ç½‘ç«™ï¼ˆ\u0060https:\/\/sdd-manifesto.org\/\u0060 å·²åœæ­¢ç»´æŠ¤ï¼‰è¿˜åœ¨è”ç½²ç­¾åä¸­ã€‚\n\näº‘åŸç”Ÿé€šè¿‡ä¸å¯å˜åŸºç¡€è®¾æ–½ä¸å£°æ˜å¼é…ç½®ï¼Œä½œä¸ºäº†è½¯ä»¶å®šä¹‰äº¤ä»˜çš„åŸºç¡€ï¼Œå†å‡ä»¥æŒç»­äº¤ä»˜å·¥å…·å¯ä»¥æå¤§çš„æé«˜è½¯ä»¶äº¤ä»˜æ•ˆç‡ï¼Œæœ¬å®£è¨€çš„èµ·è‰è€…ä¸­åŒ…å«ä¼—å¤šäº‘åŸç”Ÿç†å¿µçš„é‰´å®šæ‹¥æŠ¤è€…å¦‚ Kenny Bastaniã€Matt Stine ç­‰ã€‚\n\nè¯¥å®£è¨€é€šè¿‡ GitHub åä½œè‰æ‹Ÿï¼ˆ\u003chttps:\/\/github.com\/sdd-manifesto\/manifesto\u003eï¼‰ï¼Œä»æœªè¾¾åˆ° 1.0 ç‰ˆæœ¬ã€‚ä¸‹é¢æ˜¯ã€Šè½¯ä»¶å®šä¹‰äº¤ä»˜å®£è¨€ã€‹çš„ä¸­æ–‡ç‰ˆã€‚\n\n## è½¯ä»¶å®šä¹‰äº¤ä»˜å®£è¨€\n\næˆ‘ä»¬ä»æ—¥å¸¸ç”Ÿäº§å’Œå®è·µä¸­è®¤è¯†åˆ°è½¯ä»¶å¡‘é€ äº†æˆ‘ä»¬çš„ä¸–ç•Œã€‚æˆ‘ä»¬è®¤è¯†åˆ°ä»£ç æ‰æ˜¯æŒ‡å®šç²¾ç¡®æ“ä½œçš„æœ€ä½³æ–¹å¼ã€‚æˆ‘ä»¬è®¤è¯†åˆ°ä»£ç ä»…åœ¨è¢«äº¤ä»˜æ—¶æ‰æœ‰ç”¨ã€‚\n\nå¼€å‘çš„è½¯ä»¶è¢«èƒ½å¤Ÿè¢«äº¤ä»˜å‡ºå»å°±è½¯ä»¶æœ¬èº«å­˜åœ¨çš„ç›®çš„ã€‚ç°åœ¨æ˜¯æ—¶å€™å°†æˆ‘ä»¬çš„æ ¸å¿ƒæŠ€èƒ½åº”ç”¨åˆ°å®é™…çš„å·¥ä½œä¸­å»äº†ã€‚æ˜¯æ—¶å€™å¯¹äº¤ä»˜å»åšå‡º *è®¾è®¡* äº†ã€‚æˆ‘ä»¬å°†åŒºåˆ«äººç±»å’Œè®¡ç®—æœºåœ¨äº¤ä»˜å·¥ä½œä¸­æ‰¿æ‹…çš„ä½œç”¨ï¼šäººç±»åšå†³ç­–ï¼Œè®¡ç®—æœºæ¥å®Œæˆè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚\n\næ¯ä¸€æ¬¡äº¤ä»˜å·¥ä½œæœ¬è´¨ä¸Šéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚åº”ç”¨ç¨‹åºã€ç»„ç»‡ã€éƒ¨ç½²ç¯å¢ƒå’Œå›¢é˜Ÿç»„åˆåƒå·®ä¸‡åˆ«ã€‚æˆ‘ä»¬è®¤è¯†åˆ°æ¯ä¸ªå›¢é˜Ÿéƒ½éœ€è¦èƒ½å¤Ÿç†è§£è¿™ç§äº¤ä»˜çš„ç‹¬ç‰¹æ€§å’Œå¯¹äº¤ä»˜åšè‡ªåŠ¨åŒ–ã€‚æˆ‘ä»¬è®¤è¯†åˆ°ï¼Œè™½ç„¶æŒç»­äº¤ä»˜å¯¹æ»¡è¶³ä¸šåŠ¡éœ€æ±‚è‡³å…³é‡è¦ï¼Œä½†è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰é‡å¤ä»»åŠ¡ä¹Ÿéå¸¸é‡è¦ã€‚\n\næˆ‘ä»¬ä½¿ç”¨ä¸åŠ é€Ÿåº”ç”¨ç¨‹åºå¼€å‘ç±»ä¼¼çš„æ–¹å¼æ¥åŠ é€Ÿè½¯ä»¶äº¤ä»˜ï¼šä½¿ç”¨ç°ä»£æ¶æ„å’Œç¼–ç¨‹è¯­è¨€ï¼Œé€šç”¨åŠŸèƒ½çš„æ¡†æ¶ã€åº“å’ŒæœåŠ¡ã€‚\n\näº¤ä»˜åŸºç¡€è®¾æ–½ç°åœ¨æ˜¯å¯ç¼–ç¨‹çš„ï¼Œæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œç¼–ç¨‹ã€‚\n\n## è½¯ä»¶å®šä¹‰äº¤ä»˜æ˜¯æŒ‡\n\n**æ ¸å¿ƒ**ï¼šäº¤ä»˜æ˜¯æ¯ä¸ªè½¯ä»¶å›¢é˜Ÿå’Œç»„ç»‡çš„åŸºç¡€å’Œæˆ˜ç•¥èƒ½åŠ›ã€‚\n\n- **ä¼˜å…ˆ**ï¼šäº¤ä»˜çš„ä»£ç æ˜¯ç”Ÿäº§ä»£ç ã€‚\n- **æˆ˜ç•¥**ï¼šå†³å®šå›¢é˜Ÿå’Œç»„ç»‡å±‚é¢çš„ç­–ç•¥ï¼›åœ¨ä»£ç ä¸­å®ç°ç²¾ç¡®æ§åˆ¶ã€‚\n- **ä¸æ–­å‘å±•**ï¼šä¸æ–­æ”¹è¿›äº¤ä»˜ã€‚\n\n**å·¥ç¨‹è®¾è®¡**ï¼šå¼ºå¤§ï¼Œå¯æµ‹è¯•çš„ä»£ç ã€‚70 å¹´ä»£çš„è„šæœ¬è¯­è¨€æ˜¯ä¸å¤Ÿçš„ã€‚\n\n- **ç°ä»£è½¯ä»¶æ¶æ„**ï¼šäº‹ä»¶é©±åŠ¨å’Œå¯æ‰©å±•ã€‚\n- **ç°ä»£ç¼–ç¨‹è¯­è¨€**ï¼šé€»è¾‘æœ€å¥½ç”¨ä»£ç æŒ‡å®šï¼Œè€Œä¸æ˜¯å›¾ç‰‡æˆ– GUIã€‚è„šæœ¬ä¸å¥½æ‰©å±•ã€‚\n- **åŸºäºæ¨¡å‹**ï¼šç”±è½¯ä»¶é¢†åŸŸçš„æ¨¡å‹æ”¯æŒï¼Œå…·æœ‰å¯¹ä»£ç çš„ç†è§£ã€‚\n- **å¯æµ‹è¯•**ï¼šåœ¨ç”Ÿäº§ä¹‹å‰å¯ç”¨å°è§„æ¨¡åº”ç”¨ä»¥å‘ç°é”™è¯¯ã€‚\n\n**åä½œ**ï¼š\n\n- **ä»ç¾¤ä¼—ä¸­æ¥**ï¼šæ‰€æœ‰äººéƒ½å¯ä»¥åœ¨ä»£ç ä¸­è¡¨è¿°è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†ï¼Œè¿™å¯¹å¤§å®¶éƒ½æœ‰åˆ©ã€‚\n- **åˆ°è½¯ä»¶ä¸­å»**ï¼šä½¿ç”¨æœ€å¥½çš„å·¥å…·ï¼Œä½†å°†å®ƒä»¬ç»“åˆèµ·æ¥ä¹‹åå°±æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚\n- **åœ¨äººä¸è½¯ä»¶ä¹‹é—´**ï¼šååŒè‡ªåŠ¨åŒ–å¯ä»¥å¢å¼ºæˆ‘ä»¬çš„æ„ŸçŸ¥å’Œå¸®åŠ©æˆ‘ä»¬åšå†³ç­–ã€‚å°†ä¿¡æ¯è½å®åˆ°è¡ŒåŠ¨ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿä½“å¯Ÿè½¯ä»¶çš„è‡ªåŠ¨åŒ–è¡Œä¸ºã€‚é€šè¿‡ä»£ç æ¥åŒºåˆ†å›¢é˜Ÿçš„å…±äº«äº¤ä»˜ç›®æ ‡é›†åŠå…¶å®ç°ã€‚\n\n**åŠ é€Ÿ**ï¼š\n\n- **é€šè¿‡è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨æ‰§è¡Œé‡å¤ä»»åŠ¡ï¼ŒåŠ å¿«äº†å·¥ä½œé€Ÿåº¦è¿˜å¯ä»¥é¿å…é”™è¯¯å‘ç”Ÿã€‚\n- **é€šè¿‡é‡ç”¨**ï¼šåœ¨å¼€å‘äººå‘˜ã€å›¢é˜Ÿå’Œç»„ç»‡ä¹‹é—´å…±äº«é€šç”¨åŠŸèƒ½ã€‚\n\n**å¯è§‚æµ‹æ€§**ï¼šé€šå¸¸ç”¨äºè§‚å¯Ÿå’Œæ’é™¤ä½œä¸ºç”Ÿäº§ç³»ç»Ÿçš„äº¤ä»˜è¿‡ç¨‹ä¸­å‘ç”Ÿçš„æƒ…å†µã€‚\n\n- **è·Ÿè¸ª**ï¼šè§‚å¯Ÿç³»ç»Ÿä¸­çš„æ´»åŠ¨å¹¶è·Ÿè¸ªæ“ä½œä¹‹é—´çš„å…³ç³»ã€‚\n- **è°ƒè¯•**ï¼šæ£€æŸ¥å’Œä¸äº¤ä»˜æµç¨‹äº¤äº’ã€‚\n- **æŒ‡æ ‡**ï¼šåœ¨æ•´ä¸ªäº¤ä»˜æµç¨‹çš„æ´»åŠ¨ä¸­è·å–æŒ‡æ ‡ã€‚\n\n**ä½œè€…**ï¼š(å§“æ°æŒ‰å­—æ¯é¡ºåºæ’åˆ—ï¼‰ï¼šæœ¬å®£è¨€ç”± Kenny Bastaniã€Marc Holmesã€Rod Johnsonã€Jessica Kerrã€Mik Kerstenã€Russ Milesã€Erin Schnabelã€Matt Stine åŠå…¶ä»–ç¤¾åŒºæˆå‘˜è‰æ‹Ÿã€‚\n\nÂ©2018ï¼Œä¸Šè¿°ä½œè€…å’Œæœ¬å£°æ˜å¯ä»¥ä»»ä½•å½¢å¼è‡ªç”±å¤åˆ¶ï¼Œä½†éœ€å…¨æ–‡å¤åˆ¶æœ¬å£°æ˜ã€‚\n', '\/blog\/software-defined-delivery-manifesto\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">ä»Šå¤©ç»™å¤§å®¶åˆ†äº«çš„æ˜¯ã€Šè½¯ä»¶å®šä¹‰äº¤ä»˜å®£è¨€ã€‹ï¼Œè¯¥å®£è¨€å‘å‡ºå·²ç»æœ‰ä¸€å‘¨å¤šæ—¶é—´äº†ï¼Œè¿˜åœ¨è”ç½²ç­¾åä¸­ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/kubecon-cloudnativecon-china-2018/">KubeCon&amp;CloudNativeCon China 2018</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/11/16</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e9%9a%8f%e7%ac%94"> 
             éšç¬”
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('KubeCon\u0026CloudNativeCon China 2018', 'KubeCon\u0026CloudNativeCon China 2018 å‚ä¼šå›é¡¾ã€‚', '\næœ¬æ¬¡å¤§ä¼šæ˜¯ä¸€ä¸ªéš¾å¾—çš„æœºä¼šï¼Œè®©æˆ‘è§åˆ°äº†å¾ˆå¤šæœ‹å‹ï¼Œå¾ˆå¤šéƒ½æ˜¯ç¬¬ä¸€æ¬¡åœ¨çº¿ä¸‹è§é¢ã€‚\n\n![KubeCon\u0026CloudNativeCon China ä¸Šæµ· 2018](kubecon-shanghai-2018-group.webp)\n\n*å›¾ä¸­ç”±ä¸Šè‡ªä¸‹çš„å¤§åˆå½±æ˜¯ï¼šServiceMesher ç¤¾åŒºä¸Šæµ·èšé¦–åˆå½±ï¼›ä¸­ç¾æ—¥çš„ Kubernetesã€Envoyã€Istioã€Apache Skywalkingã€ServiceMesher ç¤¾åŒºåœ¨ KubeCon ä¸Šæµ·ï¼›Yahoo Japan ä¸èš‚èšé›†å›¢å›¢é˜Ÿåœ¨ä¸Šæµ·ä¸­å¿ƒåŠå…¬å®¤åˆå½±ã€‚*\n\n## æ´»åŠ¨\n\n**Meet the Ambassadors**\n\nå‚åŠ äº†ä¸€åœº **Meet the Ambassadors** é‡‡è®¿ï¼Œç¬¬ä¸€æ¬¡å‚åŠ è‹±æ–‡çš„é‡‡è®¿ï¼Œæœ¬æ¥å‡†å¤‡çš„è‹±æ–‡å›ç­”æ²¡ç”¨ä¸Šï¼Œç°åœºåè€Œè¿˜ç´§å¼ äº†ã€‚ã€‚ã€‚å·¥ä½œäººå‘˜çš„æ‘„åƒæœºåˆæ²¡å°±ä½ï¼Œæˆ‘è¿˜å……å½“äº†æ‘„å½±å¸ˆï¼ˆæœ¬è‰²å‡ºæ¼”ï¼‰ã€‚ä¸€å…±é‡‡è®¿äº†å››ä½ä¸­å›½çš„ Ambassadorã€‚\n\n- Jiayao (Julia) Han, Caicloud\n- Jia Xuan, China Mobile Research Institute\n- Jimmy Song, Ant Group\n- Jessie Qian, Alauda\n\næˆ‘ä»¬çš„åå­—ä¸çº¦è€ŒåŒçš„éƒ½æ˜¯ J å­—å¤´ã€‚\n\n**Service Mesh Roundtable**\n\nç„¶åå‚åŠ äº†ä¸€åœº Service Mesh Roundtableï¼Œå‚åŠ äººå‘˜æœ‰ï¼š\n\n- Jimmy Song, Developer Advocate on Cloud Native at Ant Group \n- Yulin Son, Principal Architect at Huawei \n- George Miranda, PagerDuty \n- Nic Jackson, Developer Advocate at HashiCorp \n\næˆ‘ä»¬å°± Service Mesh çš„ç°çŠ¶ï¼Œå­˜åœ¨çš„é—®é¢˜åæœªæ¥è¿›è¡Œäº†å¹¿æ³›çš„æ¢è®¨ã€‚\n\n## PPT\n\nKubeCon China ä¼šè®®çš„å¾ˆå¤š PPT åœ¨[å¤§ä¼šçš„å®˜ç½‘](https:\/\/www.lfasiallc.com\/events\/kubecon-cloudnativecon-china-2018\/schedule-chinese\/)ä¸Šéƒ½å¯ä»¥ä¸‹è½½ï¼Œæˆ–è€…é€šè¿‡[ç™¾åº¦ç½‘ç›˜](https:\/\/pan.baidu.com\/s\/1oihwETA063WSFyigWsn8Mw)ä¸‹è½½ zip åŒ…ï¼Œæå–ç ï¼š**5vn0**ã€‚æˆ–è€…é€šè¿‡[GitHub](https:\/\/github.com\/bbotte\/cncf-presentations\/tree\/master\/KubeCon%2BCloudNativeCon-2018)ä¸‹è½½å•ä¸ª PPTã€‚\n\n## é£è¡Œ\n\nåœ¨ä¼šåœºéšä¾¿ä¸€åï¼Œå°±èƒ½é‡åˆ°ç†Ÿäººã€‚è¿˜æœ‰å¾ˆå¤šæˆ‘éƒ½å«ä¸ä¸Šåå­—çš„äººæ¥æ‰“æ‹›å‘¼ï¼Œä¸èƒ½ä¸€ä¸€é“è°¢äº†ï¼Œæ„Ÿè°¢æ™šé¤ä»¥åŠæ”¶åˆ°çš„ Prometheus é£è¡Œè¢œã€‚\n\n11 æœˆ 12 æ—¥æ™šåœ¨ä¸Šæµ·é™å®‰å¯ºä¸Šç©ºé£è¡Œï¼Œèˆªæ‹çš„å—äº¬è¥¿è·¯å¤œæ™¯ã€‚\n\n\u003cdiv style=\u0022position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\u0022\u003e\n  \u003ciframe src=\u0022\/\/player.bilibili.com\/player.html?aid=36041724\u0026cid=63259487\u0026page=1\u0022 style=\u0022position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\u0022 allowfullscreen title=\u0022Jimmy Song çš„èˆªæ‹è§†é¢‘\u0022\u003e\u003c\/iframe\u003e\n\u003c\/div\u003e\n', '\/blog\/kubecon-cloudnativecon-china-2018\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">KubeCon&amp;CloudNativeCon China 2018 å‚ä¼šå›é¡¾ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/envoy-sidecar-injection-in-istio-service-mesh-deep-dive/">ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/09/11</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/service-mesh"> 
             Service Mesh
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ç†è§£ Istio Service Mesh ä¸­ Envoy ä»£ç† Sidecar æ³¨å…¥åŠæµé‡åŠ«æŒ', 'ä»¥å¾€æœ‰å¾ˆå¤šæ–‡ç« è®²è§£ Istio æ˜¯å¦‚ä½•åš Sidecar æ³¨å…¥çš„ï¼Œä½†æ˜¯æ²¡æœ‰è®²è§£æ³¨å…¥ä¹‹å Sidecar å·¥ä½œçš„ç»†èŠ‚ã€‚æœ¬æ–‡å°†å¸¦å¤§å®¶è¯¦ç»†äº†è§£ Istio æ˜¯å¦‚ä½•å°† Envoy ä½œä¸º Sidecar çš„æ–¹å¼æ³¨å…¥åˆ°åº”ç”¨ç¨‹åº Pod ä¸­ï¼ŒåŠ Sidecar æ˜¯å¦‚ä½•åšåŠ«æŒæµé‡çš„ã€‚', '\næœ¬æ–‡æœ€æ–°æ›´æ–°äº 2022 å¹´ 3 æœˆ 7 æ—¥ã€‚\n\n\u003e ä»¥å¾€æœ‰å¾ˆå¤šæ–‡ç« è®²è§£ Istio æ˜¯å¦‚ä½•åš Sidecar æ³¨å…¥çš„ï¼Œä½†æ˜¯æ²¡æœ‰è®²è§£æ³¨å…¥ä¹‹å Sidecar å·¥ä½œçš„ç»†èŠ‚ã€‚æœ¬æ–‡å°†å¸¦å¤§å®¶è¯¦ç»†äº†è§£ Istio æ˜¯å¦‚ä½•å°† Envoy ä½œä¸º Sidecar çš„æ–¹å¼æ³¨å…¥åˆ°åº”ç”¨ç¨‹åº Pod ä¸­ï¼ŒåŠ Sidecar æ˜¯å¦‚ä½•åšåŠ«æŒæµé‡çš„ã€‚\n\nåœ¨è®²è§£ Istio å¦‚ä½•å°† Envoy ä»£ç†æ³¨å…¥åˆ°åº”ç”¨ç¨‹åº Pod ä¸­ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š\n\n- Sidecar æ¨¡å¼ï¼šå®¹å™¨åº”ç”¨æ¨¡å¼ä¹‹ä¸€ï¼ŒService Mesh æ¶æ„çš„ä¸€ç§å®ç°æ–¹å¼ã€‚\n- Init å®¹å™¨ï¼šPod ä¸­çš„ä¸€ç§ä¸“ç”¨çš„å®¹å™¨ï¼Œåœ¨åº”ç”¨ç¨‹åºå®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œï¼Œç”¨æ¥åŒ…å«ä¸€äº›åº”ç”¨é•œåƒä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·æˆ–å®‰è£…è„šæœ¬ã€‚\n- iptablesï¼šæµé‡åŠ«æŒæ˜¯é€šè¿‡ iptables è½¬å‘å®ç°çš„ã€‚\n\næŸ¥çœ‹ç›®å‰ \u0060reviews-v1-745ffc55b7-2l2lw\u0060 Pod ä¸­è¿è¡Œçš„å®¹å™¨ï¼š\n\n\u0060\u0060\u0060bash\n$ kubectl -n default get pod reviews-v1-745ffc55b7-2l2lw -o=jsonpath=\u0027{..spec.containers[*].name}\u0027\nreviews istio-proxy\n\u0060\u0060\u0060\n\n\u0060reviews\u0060 å³åº”ç”¨å®¹å™¨ï¼Œ\u0060istio-proxy\u0060 å³ Envoy ä»£ç†çš„ sidecar å®¹å™¨ã€‚å¦å¤–è¯¥ Pod ä¸­å®é™…ä¸Šè¿˜è¿è¡Œè¿‡ä¸€ä¸ª Init å®¹å™¨ï¼Œå› ä¸ºå®ƒæ‰§è¡Œç»“æŸå°±è‡ªåŠ¨ç»ˆæ­¢äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ä¸åˆ°è¯¥å®¹å™¨çš„å­˜åœ¨ã€‚å…³æ³¨ \u0060jsonpath\u0060 çš„ç”¨æ³•è¯·å‚è€ƒ [JSONPath Support](https:\/\/kubernetes.io\/docs\/reference\/kubectl\/jsonpath\/)ã€‚\n\n## Sidecar æ¨¡å¼\n\nåœ¨äº†è§£ Istio ä½¿ç”¨ Sidecar æ³¨å…¥ä¹‹å‰ï¼Œéœ€è¦å…ˆè¯´æ˜ä¸‹ä»€ä¹ˆæ˜¯ Sidecar æ¨¡å¼ã€‚Sidecar æ˜¯å®¹å™¨åº”ç”¨æ¨¡å¼çš„ä¸€ç§ï¼Œä¹Ÿæ˜¯åœ¨ Service Mesh ä¸­å‘æ‰¬å…‰å¤§çš„ä¸€ç§æ¨¡å¼ã€‚\n\nä½¿ç”¨ Sidecar æ¨¡å¼éƒ¨ç½²æœåŠ¡ç½‘æ ¼æ—¶ï¼Œæ— éœ€åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œä»£ç†ï¼ˆå› æ­¤æ‚¨ä¸éœ€è¦åŸºç¡€ç»“æ„çš„åä½œï¼‰ï¼Œä½†æ˜¯é›†ç¾¤ä¸­å°†è¿è¡Œå¤šä¸ªç›¸åŒçš„ Sidecar å‰¯æœ¬ã€‚ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼šæˆ‘å¯ä»¥ä¸ºä¸€ç»„å¾®æœåŠ¡éƒ¨ç½²åˆ°ä¸€ä¸ªæœåŠ¡ç½‘æ ¼ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥éƒ¨ç½²ä¸€ä¸ªæœ‰ç‰¹å®šå®ç°çš„æœåŠ¡ç½‘æ ¼ã€‚åœ¨ Sidecar éƒ¨ç½²æ–¹å¼ä¸­ï¼Œä½ ä¼šä¸ºæ¯ä¸ªåº”ç”¨çš„å®¹å™¨éƒ¨ç½²ä¸€ä¸ªä¼´ç”Ÿå®¹å™¨ã€‚Sidecar æ¥ç®¡è¿›å‡ºåº”ç”¨å®¹å™¨çš„æ‰€æœ‰æµé‡ã€‚åœ¨ Kubernetes çš„ Pod ä¸­ï¼Œåœ¨åŸæœ‰çš„åº”ç”¨å®¹å™¨æ—è¾¹è¿è¡Œä¸€ä¸ª Sidecar å®¹å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªå®¹å™¨å…±äº«å­˜å‚¨ã€ç½‘ç»œç­‰èµ„æºï¼Œå¯ä»¥å¹¿ä¹‰çš„å°†è¿™ä¸ªæ³¨å…¥äº† Sidecar å®¹å™¨çš„ Pod ç†è§£ä¸ºä¸€å°ä¸»æœºï¼Œä¸¤ä¸ªå®¹å™¨å…±äº«ä¸»æœºèµ„æºã€‚\n\nä¸‹å›¾å±•ç¤ºçš„æ˜¯ Service Mesh çš„æ¶æ„å›¾ï¼Œå…¶ä¸­çš„ä½äºæ¯ä¸ª Pod ä¸­çš„ proxy  ç»„æˆäº†æ•°æ®å¹³é¢ï¼Œè€Œè¿™äº› proxy æ­£æ˜¯ä»¥ sidecar æ¨¡å¼è¿è¡Œçš„ã€‚\n\n![Istio æ¶æ„](istio-sidecar.jpg)\n\n**æ³¨æ„**ï¼šä¸‹æ–‡ä¸­æ‰€æŒ‡çš„ Sidecar éƒ½æ˜¯æŒ‡çš„ Envoy ä»£ç†å®¹å™¨ã€‚\n\n## Init å®¹å™¨\n\nInit å®¹å™¨æ˜¯ä¸€ç§ä¸“ç”¨å®¹å™¨ï¼Œå®ƒåœ¨åº”ç”¨ç¨‹åºå®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œï¼Œç”¨æ¥åŒ…å«ä¸€äº›åº”ç”¨é•œåƒä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·æˆ–å®‰è£…è„šæœ¬ã€‚\n\nä¸€ä¸ª Pod ä¸­å¯ä»¥æŒ‡å®šå¤šä¸ª Init å®¹å™¨ï¼Œå¦‚æœæŒ‡å®šäº†å¤šä¸ªï¼Œé‚£ä¹ˆ Init å®¹å™¨å°†ä¼šæŒ‰é¡ºåºä¾æ¬¡è¿è¡Œã€‚åªæœ‰å½“å‰é¢çš„ Init å®¹å™¨å¿…é¡»è¿è¡ŒæˆåŠŸåï¼Œæ‰å¯ä»¥è¿è¡Œä¸‹ä¸€ä¸ª Init å®¹å™¨ã€‚å½“æ‰€æœ‰çš„ Init å®¹å™¨è¿è¡Œå®Œæˆåï¼ŒKubernetes æ‰åˆå§‹åŒ– Pod å’Œè¿è¡Œåº”ç”¨å®¹å™¨ã€‚\n\nInit å®¹å™¨ä½¿ç”¨ Linux Namespaceï¼Œæ‰€ä»¥ç›¸å¯¹åº”ç”¨ç¨‹åºå®¹å™¨æ¥è¯´å…·æœ‰ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚å› æ­¤ï¼Œå®ƒä»¬èƒ½å¤Ÿå…·æœ‰è®¿é—® Secret çš„æƒé™ï¼Œè€Œåº”ç”¨ç¨‹åºå®¹å™¨åˆ™ä¸èƒ½ã€‚\n\nåœ¨ Pod å¯åŠ¨è¿‡ç¨‹ä¸­ï¼ŒInit å®¹å™¨ä¼šæŒ‰é¡ºåºåœ¨ç½‘ç»œå’Œæ•°æ®å·åˆå§‹åŒ–ä¹‹åå¯åŠ¨ã€‚æ¯ä¸ªå®¹å™¨å¿…é¡»åœ¨ä¸‹ä¸€ä¸ªå®¹å™¨å¯åŠ¨ä¹‹å‰æˆåŠŸé€€å‡ºã€‚å¦‚æœç”±äºè¿è¡Œæ—¶æˆ–å¤±è´¥é€€å‡ºï¼Œå°†å¯¼è‡´å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Œå®ƒä¼šæ ¹æ® Pod çš„ \u0060restartPolicy\u0060 æŒ‡å®šçš„ç­–ç•¥è¿›è¡Œé‡è¯•ã€‚ç„¶è€Œï¼Œå¦‚æœ Pod çš„ \u0060restartPolicy\u0060 è®¾ç½®ä¸º Alwaysï¼ŒInit å®¹å™¨å¤±è´¥æ—¶ä¼šä½¿ç”¨ \u0060RestartPolicy\u0060 ç­–ç•¥ã€‚\n\nåœ¨æ‰€æœ‰çš„ Init å®¹å™¨æ²¡æœ‰æˆåŠŸä¹‹å‰ï¼ŒPod å°†ä¸ä¼šå˜æˆ \u0060Ready\u0060 çŠ¶æ€ã€‚Init å®¹å™¨çš„ç«¯å£å°†ä¸ä¼šåœ¨ Service ä¸­è¿›è¡Œèšé›†ã€‚æ­£åœ¨åˆå§‹åŒ–ä¸­çš„ Pod å¤„äº \u0060Pending\u0060 çŠ¶æ€ï¼Œä½†åº”è¯¥ä¼šå°† \u0060Initializing\u0060 çŠ¶æ€è®¾ç½®ä¸º trueã€‚Init å®¹å™¨è¿è¡Œå®Œæˆä»¥åå°±ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚\n\nå…³äº Init å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [Init å®¹å™¨ - Kubernetes ä¸­æ–‡æŒ‡å—\/äº‘åŸç”Ÿåº”ç”¨æ¶æ„å®è·µæ‰‹å†Œ](\/book\/kubernetes-handbook\/objects\/init-containers\/)ã€‚\n\n## Sidecar æ³¨å…¥ç¤ºä¾‹åˆ†æ\n\næœ¬æ–‡æˆ‘ä»¬å°†ä»¥ Istio å®˜æ–¹ç¤ºä¾‹ \u0060bookinfo\u0060 ä¸­ \u0060reivews\u0060 æœåŠ¡ä¸ºä¾‹ï¼Œæ¥æ¥è®²è§£ Sidecar å®¹å™¨æ³¨å…¥çš„é¢æµç¨‹ï¼Œæ¯ä¸ªæ³¨å…¥äº† Sidecar çš„ Pod ä¸­é™¤äº†åŸå…ˆåº”ç”¨çš„åº”ç”¨æœ¬èº«çš„å®¹å™¨å¤–ï¼Œéƒ½ä¼šå¤šå‡ºæ¥è¿™æ ·ä¸¤ä¸ªå®¹å™¨ï¼š\n\n- \u0060istio-init\u0060ï¼šç”¨äºç»™ Sidecar å®¹å™¨å³ Envoy ä»£ç†åšåˆå§‹åŒ–ï¼Œè®¾ç½® iptables ç«¯å£è½¬å‘\n- \u0060istio-proxy\u0060ï¼šEnvoy ä»£ç†å®¹å™¨ï¼Œè¿è¡Œ Envoy ä»£ç†\n\næ¥ä¸‹æ¥å°†åˆ†åˆ«è§£æä¸‹è¿™ä¸¤ä¸ªå®¹å™¨ã€‚\n\n### Init å®¹å™¨è§£æ\n\nIstio åœ¨ Pod ä¸­æ³¨å…¥çš„ Init å®¹å™¨åä¸º \u0060istio-init\u0060ï¼Œå¦‚æœä½ æŸ¥çœ‹ \u0060reviews\u0060 Deployment é…ç½®ï¼Œä½ å°†çœ‹åˆ°å…¶ä¸­ \u0060initContaienrs\u0060 çš„å¯åŠ¨å‚æ•°ï¼š\n\n\u0060\u0060\u0060bash\n      initContainers:\n        - name: istio-init\n          image: docker.io\/istio\/proxyv2:1.13.1\n          args:\n            - istio-iptables\n            - \u0027-p\u0027\n            - \u002715001\u0027\n            - \u0027-z\u0027\n            - \u002715006\u0027\n            - \u0027-u\u0027\n            - \u00271337\u0027\n            - \u0027-m\u0027\n            - REDIRECT\n            - \u0027-i\u0027\n            - \u0027*\u0027\n            - \u0027-x\u0027\n            - \u0027\u0027\n            - \u0027-b\u0027\n            - \u0027*\u0027\n            - \u0027-d\u0027\n            - 15090,15021,15020\n\u0060\u0060\u0060\n\næˆ‘ä»¬çœ‹åˆ° \u0060istio-init\u0060 å®¹å™¨çš„å…¥å£æ˜¯ \u0060istio-iptables\u0060 å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ˜¯ç”¨äºåˆå§‹åŒ–è·¯ç”±è¡¨çš„ã€‚\n\n### Init å®¹å™¨å¯åŠ¨å…¥å£\n\nInit å®¹å™¨çš„å¯åŠ¨å…¥å£æ˜¯ \u0060\/usr\/local\/bin\/istio-iptable\u0060 å‘½ä»¤ï¼Œè¯¥å‘½ä»¤çš„ç”¨æ³•å¦‚ä¸‹ï¼š\n\n\u0060\u0060\u0060bash\n$ istio-iptables -p PORT -u UID -g GID [-m mode] [-b ports] [-d ports] [-i CIDR] [-x CIDR] [-h]\n  -p: æŒ‡å®šé‡å®šå‘æ‰€æœ‰ TCP æµé‡çš„ Envoy ç«¯å£ï¼ˆé»˜è®¤ä¸º $ENVOY_PORT = 15001ï¼‰\n  -u: æŒ‡å®šæœªåº”ç”¨é‡å®šå‘çš„ç”¨æˆ·çš„ UIDã€‚é€šå¸¸ï¼Œè¿™æ˜¯ä»£ç†å®¹å™¨çš„ UIDï¼ˆé»˜è®¤ä¸º $ENVOY_USER çš„ uidï¼Œistio_proxy çš„ uid æˆ– 1337ï¼‰\n  -g: æŒ‡å®šæœªåº”ç”¨é‡å®šå‘çš„ç”¨æˆ·çš„ GIDã€‚ï¼ˆä¸ -u param ç›¸åŒçš„é»˜è®¤å€¼ï¼‰\n  -m: æŒ‡å®šå…¥ç«™è¿æ¥é‡å®šå‘åˆ° Envoy çš„æ¨¡å¼ï¼Œâ€œREDIRECTâ€ æˆ– â€œTPROXYâ€ï¼ˆé»˜è®¤ä¸º $ISTIO_INBOUND_INTERCEPTION_MODE)\n  -b: é€—å·åˆ†éš”çš„å…¥ç«™ç«¯å£åˆ—è¡¨ï¼Œå…¶æµé‡å°†é‡å®šå‘åˆ° Envoyï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨é€šé…ç¬¦ â€œ*â€ è¡¨ç¤ºé‡å®šå‘æ‰€æœ‰ç«¯å£ã€‚ä¸ºç©ºæ—¶è¡¨ç¤ºç¦ç”¨æ‰€æœ‰å…¥ç«™é‡å®šå‘ï¼ˆé»˜è®¤ä¸º $ISTIO_INBOUND_PORTSï¼‰\n  -d: æŒ‡å®šè¦ä»é‡å®šå‘åˆ° Envoy ä¸­æ’é™¤ï¼ˆå¯é€‰ï¼‰çš„å…¥ç«™ç«¯å£åˆ—è¡¨ï¼Œä»¥é€—å·æ ¼å¼åˆ†éš”ã€‚ä½¿ç”¨é€šé…ç¬¦â€œ*â€ è¡¨ç¤ºé‡å®šå‘æ‰€æœ‰å…¥ç«™æµé‡ï¼ˆé»˜è®¤ä¸º $ISTIO_LOCAL_EXCLUDE_PORTSï¼‰\n  -i: æŒ‡å®šé‡å®šå‘åˆ° Envoyï¼ˆå¯é€‰ï¼‰çš„ IP åœ°å€èŒƒå›´ï¼Œä»¥é€—å·åˆ†éš”çš„ CIDR æ ¼å¼åˆ—è¡¨ã€‚ä½¿ç”¨é€šé…ç¬¦ â€œ*â€ è¡¨ç¤ºé‡å®šå‘æ‰€æœ‰å‡ºç«™æµé‡ã€‚ç©ºåˆ—è¡¨å°†ç¦ç”¨æ‰€æœ‰å‡ºç«™é‡å®šå‘ï¼ˆé»˜è®¤ä¸º $ISTIO_SERVICE_CIDRï¼‰\n  -x: æŒ‡å®šå°†ä»é‡å®šå‘ä¸­æ’é™¤çš„ IP åœ°å€èŒƒå›´ï¼Œä»¥é€—å·åˆ†éš”çš„ CIDR æ ¼å¼åˆ—è¡¨ã€‚ä½¿ç”¨é€šé…ç¬¦ â€œ*â€ è¡¨ç¤ºé‡å®šå‘æ‰€æœ‰å‡ºç«™æµé‡ï¼ˆé»˜è®¤ä¸º $ISTIO_SERVICE_EXCLUDE_CIDRï¼‰ã€‚\n  -z: æ‰€æœ‰å…¥ç«™ TCP æµé‡é‡å®šå‘ç«¯å£ï¼ˆé»˜è®¤ä¸º $INBOUND_CAPTURE_PORT 15006ï¼‰\n\u0060\u0060\u0060\n\nå…³äºè¯¥å‘½ä»¤çš„è¯¦ç»†ä»£ç è¯·[æŸ¥çœ‹ GitHubï¼š\u0060tools\/istio-iptables\/pkg\/cmd\/root.go\u0060](https:\/\/github.com\/istio\/istio\/blob\/master\/tools\/istio-iptables\/pkg\/cmd\/root.go)ã€‚\n\nå†å‚è€ƒ \u0060istio-init\u0060 å®¹å™¨çš„å¯åŠ¨å‚æ•°ï¼Œå®Œæ•´çš„å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š\n\n\u0060\u0060\u0060bash\n$ \/usr\/local\/bin\/istio-iptables -p 15001 -z 15006 -u 1337 -m REDIRECT -i \u0027*\u0027 -x \u0022\u0022 -b * -d \u002215090,15201,15020\u0022\n\u0060\u0060\u0060\n\nè¯¥å®¹å™¨å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯è®© Envoy ä»£ç†å¯ä»¥æ‹¦æˆªæ‰€æœ‰çš„è¿›å‡º Pod çš„æµé‡ï¼Œå³å°†å…¥ç«™æµé‡é‡å®šå‘åˆ° Sidecarï¼Œå†æ‹¦æˆªåº”ç”¨å®¹å™¨çš„å‡ºç«™æµé‡ç»è¿‡ Sidecar å¤„ç†åå†å‡ºç«™ã€‚\n\n**å‘½ä»¤è§£æ**\n\nè¿™æ¡å¯åŠ¨å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼š\n\n- å°†åº”ç”¨å®¹å™¨çš„æ‰€æœ‰æµé‡éƒ½è½¬å‘åˆ° Envoy çš„ 15006 ç«¯å£ã€‚\n- ä½¿ç”¨ \u0060istio-proxy\u0060 ç”¨æˆ·èº«ä»½è¿è¡Œï¼ŒUID ä¸º 1337ï¼Œå³ Envoy æ‰€å¤„çš„ç”¨æˆ·ç©ºé—´ï¼Œè¿™ä¹Ÿæ˜¯ \u0060istio-proxy\u0060 å®¹å™¨é»˜è®¤ä½¿ç”¨çš„ç”¨æˆ·ï¼Œè§ YAML é…ç½®ä¸­çš„ \u0060runAsUser\u0060 å­—æ®µã€‚\n- ä½¿ç”¨é»˜è®¤çš„ \u0060REDIRECT\u0060 æ¨¡å¼æ¥é‡å®šå‘æµé‡ã€‚\n- å°†æ‰€æœ‰å‡ºç«™æµé‡éƒ½é‡å®šå‘åˆ° Envoy ä»£ç†ã€‚\n- å°†é™¤äº† 15090ã€15201ã€15020 ç«¯å£ä»¥å¤–çš„æ‰€æœ‰ç«¯å£çš„æµé‡é‡å®šå‘åˆ° Envoy ä»£ç†ã€‚\n\nå› ä¸º Init å®¹å™¨åˆå§‹åŒ–å®Œæ¯•åå°±ä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ç™»é™†åˆ°å®¹å™¨ä¸­æŸ¥çœ‹ iptables ä¿¡æ¯ï¼Œä½†æ˜¯ Init å®¹å™¨åˆå§‹åŒ–ç»“æœä¼šä¿ç•™åˆ°åº”ç”¨å®¹å™¨å’Œ Sidecar å®¹å™¨ä¸­ã€‚\n\n### istio-proxy å®¹å™¨è§£æ\n\nä¸ºäº†æŸ¥çœ‹ iptables é…ç½®ï¼Œæˆ‘ä»¬éœ€è¦ç™»é™†åˆ° Sidecar å®¹å™¨ä¸­ä½¿ç”¨ root ç”¨æˆ·æ¥æŸ¥çœ‹ï¼Œå› ä¸º \u0060kubectl\u0060 æ— æ³•ä½¿ç”¨ç‰¹æƒæ¨¡å¼æ¥è¿œç¨‹æ“ä½œ docker å®¹å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç™»é™†åˆ° \u0060reviews\u0060 Pod æ‰€åœ¨çš„ä¸»æœºä¸Šä½¿ç”¨ \u0060docker\u0060 å‘½ä»¤ç™»é™†å®¹å™¨ä¸­æŸ¥çœ‹ã€‚\n\næŸ¥çœ‹ \u0060reviews\u0060 Pod æ‰€åœ¨çš„ä¸»æœºã€‚\n\n\u0060\u0060\u0060bash\n$ kubectl -n default get pod -l app=reviews -o wide\nNAME                              READY     STATUS    RESTARTS   AGE       IP             NODE\nreviews-v1-745ffc55b7-2l2lw   2\/2       Running   0          1d        172.33.78.10   node3\n\u0060\u0060\u0060\n\nä»è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹åˆ°è¯¥ Pod è¿è¡Œåœ¨ \u0060node3\u0060 ä¸Šï¼Œä½¿ç”¨ \u0060vagrant\u0060 å‘½ä»¤ç™»é™†åˆ° \u0060node3\u0060 ä¸»æœºä¸­å¹¶åˆ‡æ¢ä¸º root ç”¨æˆ·ã€‚\n\n\u0060\u0060\u0060bash\n$ vagrant ssh node3\n$ sudo -i\n\u0060\u0060\u0060\n\næŸ¥çœ‹ iptables é…ç½®ï¼Œåˆ—å‡º NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰è¡¨çš„æ‰€æœ‰è§„åˆ™ï¼Œå› ä¸ºåœ¨ Init å®¹å™¨å¯åŠ¨çš„æ—¶å€™é€‰æ‹©ç»™  \u0060istio-iptables.sh\u0060 ä¼ é€’çš„å‚æ•°ä¸­æŒ‡å®šå°†å…¥ç«™æµé‡é‡å®šå‘åˆ° Envoy çš„æ¨¡å¼ä¸ºâ€œREDIRECTâ€ï¼Œå› æ­¤åœ¨ iptables ä¸­å°†åªæœ‰ NAT è¡¨çš„è§„æ ¼é…ç½®ï¼Œå¦‚æœé€‰æ‹© \u0060TPROXY\u0060 è¿˜ä¼šæœ‰ \u0060mangle\u0060 è¡¨é…ç½®ã€‚\u0060iptables\u0060 å‘½ä»¤çš„è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒ [iptables](https:\/\/wangchujiang.com\/linux-command\/c\/iptables.html)ï¼Œè§„åˆ™é…ç½®è¯·å‚è€ƒ [iptables è§„åˆ™é…ç½®](http:\/\/www.zsythink.net\/archives\/1517)ã€‚\n\n## ç†è§£ iptables\n\n\u0060iptables\u0060 æ˜¯ Linux å†…æ ¸ä¸­çš„é˜²ç«å¢™è½¯ä»¶ netfilter çš„ç®¡ç†å·¥å…·ï¼Œä½äºç”¨æˆ·ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ netfilter çš„ä¸€éƒ¨åˆ†ã€‚Netfilter ä½äºå†…æ ¸ç©ºé—´ï¼Œä¸ä»…æœ‰ç½‘ç»œåœ°å€è½¬æ¢çš„åŠŸèƒ½ï¼Œä¹Ÿå…·å¤‡æ•°æ®åŒ…å†…å®¹ä¿®æ”¹ã€ä»¥åŠæ•°æ®åŒ…è¿‡æ»¤ç­‰é˜²ç«å¢™åŠŸèƒ½ã€‚\n\nåœ¨äº†è§£ Init å®¹å™¨åˆå§‹åŒ–çš„ iptables ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ iptables å’Œè§„åˆ™é…ç½®ã€‚\n\nä¸‹å›¾å±•ç¤ºäº† iptables è°ƒç”¨é“¾ã€‚\n\n![iptables è°ƒç”¨é“¾](iptables_packetflow.png)\n\n### iptables ä¸­çš„è¡¨\n\nInit å®¹å™¨ä¸­ä½¿ç”¨çš„çš„ iptables ç‰ˆæœ¬æ˜¯ \u0060v1.6.0\u0060ï¼Œå…±åŒ…å« 5 å¼ è¡¨ï¼š\n\n1. \u0060raw\u0060 ç”¨äºé…ç½®æ•°æ®åŒ…ï¼Œ\u0060raw\u0060 ä¸­çš„æ•°æ®åŒ…ä¸ä¼šè¢«ç³»ç»Ÿè·Ÿè¸ªã€‚\n2. \u0060filter\u0060 æ˜¯ç”¨äºå­˜æ”¾æ‰€æœ‰ä¸é˜²ç«å¢™ç›¸å…³æ“ä½œçš„é»˜è®¤è¡¨ã€‚\n3. \u0060nat\u0060 ç”¨äº [ç½‘ç»œåœ°å€è½¬æ¢](https:\/\/en.wikipedia.org\/wiki\/Network_address_translation)ï¼ˆä¾‹å¦‚ï¼šç«¯å£è½¬å‘ï¼‰ã€‚\n4. \u0060mangle\u0060 ç”¨äºå¯¹ç‰¹å®šæ•°æ®åŒ…çš„ä¿®æ”¹ï¼ˆå‚è€ƒ[æŸåæ•°æ®åŒ…](https:\/\/en.wikipedia.org\/wiki\/Mangled_packet)ï¼‰ã€‚\n5. \u0060security\u0060 ç”¨äº[å¼ºåˆ¶è®¿é—®æ§åˆ¶](https:\/\/wiki.archlinux.org\/index.php\/Security#Mandatory_access_control) ç½‘ç»œè§„åˆ™ã€‚\n\n**æ³¨**ï¼šåœ¨æœ¬ç¤ºä¾‹ä¸­åªç”¨åˆ°äº† \u0060nat\u0060 è¡¨ã€‚\n\nä¸åŒçš„è¡¨ä¸­çš„å…·æœ‰çš„é“¾ç±»å‹å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n| è§„åˆ™åç§°    | raw  | filter | nat  | mangle | security |\n| ----------- | ---- | ------ | ---- | ------ | -------- |\n| PREROUTING  | âœ“    |        | âœ“    | âœ“      |          |\n| INPUT       |      | âœ“      | âœ“    | âœ“      | âœ“        |\n| OUTPUT      |      | âœ“      | âœ“    | âœ“      | âœ“        |\n| POSTROUTING |      |        | âœ“    | âœ“      |          |\n| FORWARD     | âœ“    | âœ“      |      | âœ“      | âœ“        |\n\nä¸‹å›¾æ˜¯ iptables çš„è°ƒç”¨é“¾é¡ºåºã€‚\n\n![iptables è°ƒç”¨é“¾é¡ºåº](iptables-chains.jpg)\n\n\n### iptables å‘½ä»¤\n\n\u0060iptables\u0060 å‘½ä»¤çš„ä¸»è¦ç”¨é€”æ˜¯ä¿®æ”¹è¿™äº›è¡¨ä¸­çš„è§„åˆ™ã€‚\u0060iptables\u0060 å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š\n\n\u0060\u0060\u0060bash\n$ iptables [-t è¡¨å] å‘½ä»¤é€‰é¡¹ï¼»é“¾å]ï¼»æ¡ä»¶åŒ¹é…ï¼½[-j ç›®æ ‡åŠ¨ä½œæˆ–è·³è½¬ï¼½\n\u0060\u0060\u0060\n\nInit å®¹å™¨ä¸­çš„ \u0060\/istio-iptables.sh\u0060 å¯åŠ¨å…¥å£è„šæœ¬å°±æ˜¯æ‰§è¡Œ iptables åˆå§‹åŒ–çš„ã€‚\n\n### ç†è§£ iptables è§„åˆ™\n\næŸ¥çœ‹ \u0060istio-proxy\u0060 å®¹å™¨ä¸­çš„é»˜è®¤çš„ iptables è§„åˆ™ï¼Œé»˜è®¤æŸ¥çœ‹çš„æ˜¯ filter è¡¨ä¸­çš„è§„åˆ™ã€‚\n\n\u0060\u0060\u0060bash\n$ iptables -L -v\nChain INPUT (policy ACCEPT 350K packets, 63M bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain FORWARD (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 18M packets, 1916M bytes)\n pkts bytes target     prot opt in     out     source               destination\n\u0060\u0060\u0060\n\næˆ‘ä»¬çœ‹åˆ°ä¸‰ä¸ªé»˜è®¤çš„é“¾ï¼Œåˆ†åˆ«æ˜¯ INPUTã€FORWARD å’Œ OUTPUTï¼Œæ¯ä¸ªé“¾ä¸­çš„ç¬¬ä¸€è¡Œè¾“å‡ºè¡¨ç¤ºé“¾åç§°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º INPUT\/FORWARD\/OUTPUTï¼‰ï¼Œåè·Ÿé»˜è®¤ç­–ç•¥ï¼ˆACCEPTï¼‰ã€‚\n\næ¯æ¡é“¾ä¸­éƒ½å¯ä»¥æ·»åŠ å¤šæ¡è§„åˆ™ï¼Œè§„åˆ™æ˜¯æŒ‰ç…§é¡ºåºä»å‰åˆ°åæ‰§è¡Œçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹è§„åˆ™çš„è¡¨å¤´å®šä¹‰ã€‚\n\n- **pkts**ï¼šå¤„ç†è¿‡çš„åŒ¹é…çš„æŠ¥æ–‡æ•°é‡\n- **bytes**ï¼šç´¯è®¡å¤„ç†çš„æŠ¥æ–‡å¤§å°ï¼ˆå­—èŠ‚æ•°ï¼‰\n- **target**ï¼šå¦‚æœæŠ¥æ–‡ä¸è§„åˆ™åŒ¹é…ï¼ŒæŒ‡å®šç›®æ ‡å°±ä¼šè¢«æ‰§è¡Œã€‚\n- **prot**ï¼šåè®®ï¼Œä¾‹å¦‚ \u0060tdp\u0060ã€\u0060udp\u0060ã€\u0060icmp\u0060 å’Œ \u0060all\u0060ã€‚ \n- **opt**ï¼šå¾ˆå°‘ä½¿ç”¨ï¼Œè¿™ä¸€åˆ—ç”¨äºæ˜¾ç¤º IP é€‰é¡¹ã€‚\n- **in**ï¼šå…¥ç«™ç½‘å¡ã€‚\n- **out**ï¼šå‡ºç«™ç½‘å¡ã€‚\n- **source**ï¼šæµé‡çš„æº IP åœ°å€æˆ–å­ç½‘ï¼Œåè€…æ˜¯ \u0060anywhere\u0060ã€‚\n- **destination**ï¼šæµé‡çš„ç›®çš„åœ° IP åœ°å€æˆ–å­ç½‘ï¼Œæˆ–è€…æ˜¯ \u0060anywhere\u0060ã€‚\n\nè¿˜æœ‰ä¸€åˆ—æ²¡æœ‰è¡¨å¤´ï¼Œæ˜¾ç¤ºåœ¨æœ€åï¼Œè¡¨ç¤ºè§„åˆ™çš„é€‰é¡¹ï¼Œä½œä¸ºè§„åˆ™çš„æ‰©å±•åŒ¹é…æ¡ä»¶ï¼Œç”¨æ¥è¡¥å……å‰é¢çš„å‡ åˆ—ä¸­çš„é…ç½®ã€‚\u0060prot\u0060ã€\u0060opt\u0060ã€\u0060in\u0060ã€\u0060out\u0060ã€\u0060source\u0060 å’Œ \u0060destination\u0060 å’Œæ˜¾ç¤ºåœ¨ \u0060destination\u0060 åé¢çš„æ²¡æœ‰è¡¨å¤´çš„ä¸€åˆ—æ‰©å±•æ¡ä»¶å…±åŒç»„æˆåŒ¹é…è§„åˆ™ã€‚å½“æµé‡åŒ¹é…è¿™äº›è§„åˆ™åå°±ä¼šæ‰§è¡Œ \u0060target\u0060ã€‚\n\n\n**target æ”¯æŒçš„ç±»å‹**\n\n\u0060target\u0060 ç±»å‹åŒ…æ‹¬ ACCEPT\u0060ã€REJECT\u0060ã€\u0060DROP\u0060ã€\u0060LOG\u0060 ã€\u0060SNAT\u0060ã€\u0060MASQUERADE\u0060ã€\u0060DNAT\u0060ã€\u0060REDIRECT\u0060ã€\u0060RETURN\u0060 æˆ–è€…è·³è½¬åˆ°å…¶ä»–è§„åˆ™ç­‰ã€‚åªè¦æ‰§è¡Œåˆ°æŸä¸€æ¡é“¾ä¸­åªæœ‰æŒ‰ç…§é¡ºåºæœ‰ä¸€æ¡è§„åˆ™åŒ¹é…åå°±å¯ä»¥ç¡®å®šæŠ¥æ–‡çš„å»å‘äº†ï¼Œé™¤äº† \u0060RETURN\u0060 ç±»å‹ï¼Œç±»ä¼¼ç¼–ç¨‹è¯­è¨€ä¸­çš„ \u0060return\u0060 è¯­å¥ï¼Œè¿”å›åˆ°å®ƒçš„è°ƒç”¨ç‚¹ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡è§„åˆ™ã€‚\u0060target\u0060 æ”¯æŒçš„é…ç½®è¯¦è§£è¯·å‚è€ƒ [iptables è¯¦è§£ï¼ˆ1ï¼‰ï¼šiptables æ¦‚å¿µ](http:\/\/www.zsythink.net\/archives\/1199)ã€‚\n\nä»è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹åˆ° Init å®¹å™¨æ²¡æœ‰åœ¨ iptables çš„é»˜è®¤é“¾è·¯ä¸­åˆ›å»ºä»»ä½•è§„åˆ™ï¼Œè€Œæ˜¯åˆ›å»ºäº†æ–°çš„é“¾è·¯ã€‚\n\n## æŸ¥çœ‹ iptables nat è¡¨ä¸­æ³¨å…¥çš„è§„åˆ™\n\nInit å®¹å™¨é€šè¿‡å‘ iptables nat è¡¨ä¸­æ³¨å…¥è½¬å‘è§„åˆ™æ¥åŠ«æŒæµé‡çš„ï¼Œä¸‹å›¾æ˜¾ç¤ºçš„æ˜¯ä¸‰ä¸ª reviews æœåŠ¡ç¤ºä¾‹ä¸­çš„æŸä¸€ä¸ª Podï¼Œå…¶ä¸­æœ‰ init å®¹å™¨ã€åº”ç”¨å®¹å™¨å’Œ sidecar å®¹å™¨ï¼Œå›¾ä¸­å±•ç¤ºäº† iptables æµé‡åŠ«æŒçš„è¯¦ç»†è¿‡ç¨‹ã€‚\n\n![Envoy sidecar æµé‡åŠ«æŒä¸è·¯ç”±è½¬å‘ç¤ºæ„å›¾](istio-iptables.svg)\n\nInit å®¹å™¨å¯åŠ¨æ—¶å‘½ä»¤è¡Œå‚æ•°ä¸­æŒ‡å®šäº† \u0060REDIRECT\u0060 æ¨¡å¼ï¼Œå› æ­¤åªåˆ›å»ºäº† NAT è¡¨è§„åˆ™ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŸ¥çœ‹ä¸‹ NAT è¡¨ä¸­åˆ›å»ºçš„è§„åˆ™ï¼Œè¿™æ˜¯å…¨æ–‡ä¸­çš„**é‡ç‚¹éƒ¨åˆ†**ï¼Œå‰é¢è®²äº†é‚£ä¹ˆå¤šéƒ½æ˜¯ä¸ºå®ƒåšé“ºå«çš„ã€‚\n\n### è¿›å…¥åˆ° reviews pod\n\nReviews æœåŠ¡æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿›å…¥åˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚ reviews-1ï¼Œé¦–å…ˆä½ éœ€è¦ææ¸…æ¥šè¿™ä¸ª pod è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šï¼ŒçŸ¥é“é‚£ä¸ªå®¹å™¨çš„å…·ä½“ IDï¼Œç„¶åä½¿ç”¨ SSH ç™»å½•é‚£ä¸ªèŠ‚ç‚¹ï¼Œä½¿ç”¨ \u0060ps\u0060 å‘½ä»¤æŸ¥çœ‹åˆ°é‚£ä¸ªå®¹å™¨çš„å…·ä½“ IPï¼Œä½¿ç”¨ \u0060nsenter\u0060 å‘½ä»¤è¿›å…¥è¯¥å®¹å™¨ã€‚\n\n\u0060\u0060\u0060sh\nnsenter -t{PID} -n\n\u0060\u0060\u0060\n\n**ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ kubectl è¿›å…¥å®¹å™¨ï¼Ÿ**\n\nIstio å‘ pod ä¸­è‡ªåŠ¨æ³¨å…¥çš„ sidecar å®¹å™¨ï¼ˆåä¸º \u0060istio-proxy\u0060ï¼‰å…¶ä¸­é»˜è®¤çš„ç”¨æˆ·æ˜¯ \u0060istio-proxy\u0060ï¼Œè¯¥ç”¨æˆ·æ²¡æœ‰æƒé™æŸ¥çœ‹è·¯ç”±è¡¨è§„åˆ™ï¼Œå³å½“ä½ åœ¨è¯¥å®¹å™¨ä¸­è¿è¡Œ \u0060iptabes\u0060 å‘½ä»¤æ—¶ä¼šå¾—åˆ° \u0060iptables -t nat -L -v\u0060 è¿™æ ·çš„ç»“æœï¼Œè€Œä¸”ä½ åˆæ²¡æœ‰ root æƒé™ã€‚å¯¹äº reviews å®¹å™¨ä¹Ÿæ˜¯ä¸€æ ·ï¼Œé»˜è®¤ç”¨æˆ·çš„ UID æ˜¯ \u00601000\u0060ï¼Œè€Œä¸”è¿™ä¸ªç”¨æˆ·åˆæ²¡æœ‰åå­—ï¼Œä¸€æ ·ä¹Ÿæ— æ³•åˆ‡æ¢ä¸º root ç”¨æˆ·ï¼Œç³»ç»Ÿä¸­é»˜è®¤æ²¡æœ‰å®‰è£… iptabels å‘½ä»¤ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½ç™»å½•åˆ° Pod çš„å®¿ä¸»èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨ \u0060nsenter\u0060 å‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨ã€‚\n\n### æŸ¥çœ‹è·¯ç”±è¡¨\n\nä¸‹é¢æ˜¯æŸ¥çœ‹ nat è¡¨ä¸­çš„è§„åˆ™ï¼Œå…¶ä¸­é“¾çš„åå­—ä¸­åŒ…å« \u0060ISTIO\u0060 å‰ç¼€çš„æ˜¯ç”± Init å®¹å™¨æ³¨å…¥çš„ï¼Œè§„åˆ™åŒ¹é…æ˜¯æ ¹æ®ä¸‹é¢æ˜¾ç¤ºçš„é¡ºåºæ¥æ‰§è¡Œçš„ï¼Œå…¶ä¸­ä¼šæœ‰å¤šæ¬¡è·³è½¬ã€‚\n\n\u0060\u0060\u0060bash\n# æŸ¥çœ‹ NAT è¡¨ä¸­è§„åˆ™é…ç½®çš„è¯¦ç»†ä¿¡æ¯\n$ iptables -t nat -L -v\n# PREROUTING é“¾ï¼šç”¨äºç›®æ ‡åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ï¼Œå°†æ‰€æœ‰å…¥ç«™ TCP æµé‡è·³è½¬åˆ° ISTIO_INBOUND é“¾ä¸Š\nChain PREROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n    2   120 ISTIO_INBOUND  tcp  --  any    any     anywhere             anywhere\n\n# INPUT é“¾ï¼šå¤„ç†è¾“å…¥æ•°æ®åŒ…ï¼Œé TCP æµé‡å°†ç»§ç»­ OUTPUT é“¾\nChain INPUT (policy ACCEPT 2 packets, 120 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\n# OUTPUT é“¾ï¼šå°†æ‰€æœ‰å‡ºç«™æ•°æ®åŒ…è·³è½¬åˆ° ISTIO_OUTPUT é“¾ä¸Š\nChain OUTPUT (policy ACCEPT 41146 packets, 3845K bytes)\n pkts bytes target     prot opt in     out     source               destination\n   93  5580 ISTIO_OUTPUT  tcp  --  any    any     anywhere             anywhere\n\n# POSTROUTING é“¾ï¼šæ‰€æœ‰æ•°æ®åŒ…æµå‡ºç½‘å¡æ—¶éƒ½è¦å…ˆè¿›å…¥POSTROUTING é“¾ï¼Œå†…æ ¸æ ¹æ®æ•°æ®åŒ…ç›®çš„åœ°åˆ¤æ–­æ˜¯å¦éœ€è¦è½¬å‘å‡ºå»ï¼Œæˆ‘ä»¬çœ‹åˆ°æ­¤å¤„æœªåšä»»ä½•å¤„ç†\nChain POSTROUTING (policy ACCEPT 41199 packets, 3848K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\n# ISTIO_INBOUND é“¾ï¼šå°†æ‰€æœ‰ç›®çš„åœ°ä¸º 9080 ç«¯å£çš„å…¥ç«™æµé‡é‡å®šå‘åˆ° ISTIO_IN_REDIRECT é“¾ä¸Š\nChain ISTIO_INBOUND (1 references)\n pkts bytes target     prot opt in     out     source               destination\n    2   120 ISTIO_IN_REDIRECT  tcp  --  any    any     anywhere             anywhere             tcp dpt:9080\n\n# ISTIO_IN_REDIRECT é“¾ï¼šå°†æ‰€æœ‰çš„å…¥ç«™æµé‡è·³è½¬åˆ°æœ¬åœ°çš„ 15006 ç«¯å£ï¼Œè‡³æ­¤æˆåŠŸçš„æ‹¦æˆªäº†æµé‡åˆ° Envoy \nChain ISTIO_IN_REDIRECT (1 references)\n pkts bytes target     prot opt in     out     source               destination\n    2   120 REDIRECT   tcp  --  any    any     anywhere             anywhere             redir ports 15006\n\n# ISTIO_OUTPUT é“¾ï¼šé€‰æ‹©éœ€è¦é‡å®šå‘åˆ° Envoyï¼ˆå³æœ¬åœ°ï¼‰ çš„å‡ºç«™æµé‡ï¼Œæ‰€æœ‰é localhost çš„æµé‡å…¨éƒ¨è½¬å‘åˆ° ISTIO_REDIRECTã€‚ä¸ºäº†é¿å…æµé‡åœ¨è¯¥ Pod ä¸­æ— é™å¾ªç¯ï¼Œæ‰€æœ‰åˆ° istio-proxy ç”¨æˆ·ç©ºé—´çš„æµé‡éƒ½è¿”å›åˆ°å®ƒçš„è°ƒç”¨ç‚¹ä¸­çš„ä¸‹ä¸€æ¡è§„åˆ™ï¼Œæœ¬ä¾‹ä¸­å³ OUTPUT é“¾ï¼Œå› ä¸ºè·³å‡º ISTIO_OUTPUT è§„åˆ™ä¹‹åå°±è¿›å…¥ä¸‹ä¸€æ¡é“¾ POSTROUTINGã€‚å¦‚æœç›®çš„åœ°é localhost å°±è·³è½¬åˆ° ISTIO_REDIRECTï¼›å¦‚æœæµé‡æ˜¯æ¥è‡ª istio-proxy ç”¨æˆ·ç©ºé—´çš„ï¼Œé‚£ä¹ˆå°±è·³å‡ºè¯¥é“¾ï¼Œè¿”å›å®ƒçš„è°ƒç”¨é“¾ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡è§„åˆ™ï¼ˆOUPT çš„ä¸‹ä¸€æ¡è§„åˆ™ï¼Œæ— éœ€å¯¹æµé‡è¿›è¡Œå¤„ç†ï¼‰ï¼›æ‰€æœ‰çš„é istio-proxy ç”¨æˆ·ç©ºé—´çš„ç›®çš„åœ°æ˜¯ localhost çš„æµé‡å°±è·³è½¬åˆ° ISTIO_REDIRECT\nChain ISTIO_OUTPUT (1 references)\n pkts bytes target     prot opt in     out     source               destination\n    0     0 ISTIO_REDIRECT  all  --  any    lo      anywhere            !localhost\n   40  2400 RETURN     all  --  any    any     anywhere             anywhere             owner UID match istio-proxy\n    0     0 RETURN     all  --  any    any     anywhere             anywhere             owner GID match istio-proxy\t\n    0     0 RETURN     all  --  any    any     anywhere             localhost\n   53  3180 ISTIO_REDIRECT  all  --  any    any     anywhere             anywhere\n\n# ISTIO_REDIRECT é“¾ï¼šå°†æ‰€æœ‰æµé‡é‡å®šå‘åˆ° Envoyï¼ˆå³æœ¬åœ°ï¼‰ çš„ 15001 ç«¯å£\nChain ISTIO_REDIRECT (2 references)\n pkts bytes target     prot opt in     out     source               destination\n   53  3180 REDIRECT   tcp  --  any    any     anywhere             anywhere             redir ports 15001\n\u0060\u0060\u0060\n\n\u0060iptables\u0060 æ˜¾ç¤ºçš„é“¾çš„é¡ºåºï¼Œå³æµé‡è§„åˆ™åŒ¹é…çš„é¡ºåºã€‚å…¶ä¸­è¦ç‰¹åˆ«æ³¨æ„ \u0060ISTIO_OUTPUT\u0060 é“¾ä¸­çš„è§„åˆ™é…ç½®ã€‚ä¸ºäº†é¿å…æµé‡ä¸€ç›´åœ¨ Pod ä¸­æ— é™å¾ªç¯ï¼Œæ‰€æœ‰åˆ° istio-proxy ç”¨æˆ·ç©ºé—´çš„æµé‡éƒ½è¿”å›åˆ°å®ƒçš„è°ƒç”¨ç‚¹ä¸­çš„ä¸‹ä¸€æ¡è§„åˆ™ï¼Œæœ¬ä¾‹ä¸­å³ OUTPUT é“¾ï¼Œå› ä¸ºè·³å‡º \u0060ISTIO_OUTPUT\u0060 è§„åˆ™ä¹‹åå°±è¿›å…¥ä¸‹ä¸€æ¡é“¾ \u0060POSTROUTING\u0060ã€‚\n\n\u0060ISTIO_OUTPUT\u0060 é“¾è§„åˆ™åŒ¹é…çš„è¯¦ç»†è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n- å¦‚æœç›®çš„åœ°é localhost å°±è·³è½¬åˆ° ISTIO_REDIRECT é“¾\n- æ‰€æœ‰æ¥è‡ª istio-proxy ç”¨æˆ·ç©ºé—´çš„é localhost æµé‡è·³è½¬åˆ°å®ƒçš„è°ƒç”¨ç‚¹ \u0060OUTPUT\u0060 ç»§ç»­æ‰§è¡Œ \u0060OUTPUT\u0060 é“¾çš„ä¸‹ä¸€æ¡è§„åˆ™ï¼Œå› ä¸º \u0060OUTPUT\u0060 é“¾ä¸­æ²¡æœ‰ä¸‹ä¸€æ¡è§„åˆ™äº†ï¼Œæ‰€ä»¥ä¼šç»§ç»­æ‰§è¡Œ \u0060POSTROUTING\u0060 é“¾ç„¶åè·³å‡º iptablesï¼Œç›´æ¥è®¿é—®ç›®çš„åœ°\n- å¦‚æœæµé‡ä¸æ˜¯æ¥è‡ª istio-proxy ç”¨æˆ·ç©ºé—´ï¼Œåˆæ˜¯å¯¹ localhost çš„è®¿é—®ï¼Œé‚£ä¹ˆå°±è·³å‡º iptablesï¼Œç›´æ¥è®¿é—®ç›®çš„åœ°\n- å…¶å®ƒæ‰€æœ‰æƒ…å†µéƒ½è·³è½¬åˆ° \u0060ISTIO_REDIRECT\u0060 é“¾\n\nå…¶å®åœ¨æœ€åè¿™æ¡è§„åˆ™å‰è¿˜å¯ä»¥å¢åŠ  IP åœ°å€è¿‡æ»¤ï¼Œè®©æŸäº› IP åœ°å€æ®µä¸é€šè¿‡ Envoy ä»£ç†ã€‚\n\nä»¥ä¸Š iptables è§„åˆ™éƒ½æ˜¯ Init å®¹å™¨å¯åŠ¨çš„æ—¶ä½¿ç”¨ [istio-iptables](https:\/\/github.com\/istio\/istio\/tree\/master\/tools\/istio-iptables) å‘½ä»¤ç”Ÿæˆçš„ï¼Œè¯¦ç»†è¿‡ç¨‹å¯ä»¥æŸ¥çœ‹è¯¥å‘½ä»¤è¡Œç¨‹åºã€‚\n\n## å‚è€ƒ\n\n- [Init å®¹å™¨ - Kubernetes ä¸­æ–‡æŒ‡å—\/äº‘åŸç”Ÿåº”ç”¨æ¶æ„å®è·µæ‰‹å†Œ - jimmysong.io](\/book\/kubernetes-handbook\/objects\/init-containers\/)\n- [JSONPath Support - kubernetes.io](https:\/\/kubernetes.io\/docs\/reference\/kubectl\/jsonpath\/)\n- [iptables å‘½ä»¤ä½¿ç”¨è¯´æ˜ - wangchujiang.com](https:\/\/wangchujiang.com\/linux-command\/c\/iptables.html)\n- [How To List and Delete Iptables Firewall Rules - digitalocean.com](https:\/\/www.digitalocean.com\/community\/tutorials\/how-to-list-and-delete-iptables-firewall-rules)\n- [ä¸€å¥ä¸€å¥è§£è¯´ iptables çš„è¯¦ç»†ä¸­æ–‡æ‰‹å†Œ - cnblog.com](https:\/\/www.cnblogs.com\/fhefh\/archive\/2011\/04\/04\/2005249.html)\n', '\/blog\/envoy-sidecar-injection-in-istio-service-mesh-deep-dive\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">ä»¥å¾€æœ‰å¾ˆå¤šæ–‡ç« è®²è§£ Istio æ˜¯å¦‚ä½•åš Sidecar æ³¨å…¥çš„ï¼Œä½†æ˜¯æ²¡æœ‰è®²è§£æ³¨å…¥ä¹‹å Sidecar å·¥ä½œçš„ç»†èŠ‚ã€‚æœ¬æ–‡å°†å¸¦å¤§å®¶è¯¦ç»†äº†è§£ Istio æ˜¯å¦‚ä½•å°† Envoy ä½œä¸º Sidecar çš„æ–¹å¼æ³¨å…¥åˆ°åº”ç”¨ç¨‹åº Pod ä¸­ï¼ŒåŠ Sidecar æ˜¯å¦‚ä½•åšåŠ«æŒæµé‡çš„ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/blog/sofamesh-and-mosn-proxy-sidecar-service-mesh-by-ant-financial/">èš‚èšé›†å›¢å¼€æº SOFAMesh</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2018/07/16</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/service-mesh"> 
             Service Mesh
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('èš‚èšé›†å›¢å¼€æº SOFAMesh', 'èš‚èšé›†å›¢å¼€æº SOFAMeshâ€”ä¸€æ¬¾åŸºäº Istio æ”¹è¿›å’Œæ‰©å±•è€Œæ¥çš„ Service Mesh å¤§è§„æ¨¡è½åœ°å®è·µæ–¹æ¡ˆã€‚', '\n{{\u003ccallout warning æ³¨æ„\u003e}}\n\nSOFAMesh å·²é—­æºï¼Œæœ¬æ–‡å·²è¿‡æ—¶ã€‚\n\n{{\u003c\/callout\u003e}}\n\n4 æœˆï¼Œèš‚èšé›†å›¢è‡ªä¸»ç ”å‘çš„åˆ†å¸ƒå¼ä¸­é—´ä»¶ï¼ˆScalable Open Financial Architectureï¼Œä»¥ä¸‹ç®€ç§° SOFAï¼‰å¯åŠ¨å¼€æºè®¡åˆ’ï¼Œå¹¶å¼€æ”¾å¤šä¸ªç»„ä»¶ï¼Œï¼ˆç›¸å…³èƒŒæ™¯è¯·ç‚¹å‡»é“¾æ¥é˜…è¯»ã€Š[å¼€æº | èš‚èšé›†å›¢å¯åŠ¨åˆ†å¸ƒå¼ä¸­é—´ä»¶å¼€æºè®¡åˆ’ï¼Œç”¨äºå¿«é€Ÿæ„å»ºé‡‘èçº§äº‘åŸç”Ÿæ¶æ„](http:\/\/mp.weixin.qq.com\/s?__biz=MzI0Nzc3MTQyMw==\u0026mid=2247484729\u0026idx=1\u0026sn=0d8dbee2739fb0eef3e4ad699661fd13\u0026chksm=e9abbd49dedc345fd5d6898fd1989710f249d6386bf3d52ae1603365a4a1c3696538bc8b9a8f\u0026scene=21#wechat_redirect) ã€‹ã€ã€Š[å¼€æº | èš‚èšé›†å›¢åˆ†å¸ƒå¼ä¸­é—´ä»¶å¼€æºç¬¬äºŒå¼¹ï¼šä¸°å¯Œå¾®æœåŠ¡æ¶æ„ä½“ç³»](http:\/\/mp.weixin.qq.com\/s?__biz=MzI0Nzc3MTQyMw==\u0026mid=2247485026\u0026idx=1\u0026sn=0a367bc67d5fe3a268e3715b17e020ab\u0026chksm=e9abbe12dedc370489102d9307b832457891fdb0530eec5c35c0fb82bc2a3e6dbbc7db8436c4\u0026scene=21#wechat_redirect) ã€‹ï¼‰ï¼Œè¿™ä¸€ç³»åˆ—çš„åŠ¨ä½œå—åˆ°å¤§å®¶çš„å…³æ³¨å’Œæ”¯æŒï¼ŒSOFA ç¤¾åŒºä¹Ÿæ—¥ç›Šå£®å¤§ã€‚\n\nåœ¨ä¸¤è½®å¼€æºä¹‹åï¼Œèš‚èšé›†å›¢è‡ªä¸»ç ”å‘çš„åˆ†å¸ƒå¼ä¸­é—´ä»¶ï¼ˆScalable Open Financial Architectureï¼Œä»¥ä¸‹ç®€ç§° SOFAï¼‰åœ¨ä»Šå¤©æ¨å‡ºäº†**ç¬¬ä¸‰è½®çš„å¼€æºäº§å“ï¼šSOFAMesh**ã€‚å’Œå‰ä¸¤è½®å¼€æºçš„å†ç»å¤šå¹´æ²‰æ·€å’Œæ‰“ç£¨çš„æˆç†Ÿäº§å“ä¸åŒï¼Œæœ¬è½®çš„å¼€æºä¸»è§’ SOFAMeshï¼Œå°†æ¢ç´¢ä¸€æ¡å’Œä»¥å¾€äº§å“æœ‰æ‰€ä¸åŒçš„å¼€æºé“è·¯ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹åˆ°åº•æœ‰å“ªäº›ä¸åŒå§ï¼\n\n## SOFAMesh çš„å¼€æºæ¢ç´¢ä¹‹è·¯\n\nSOFAMesh å°è¯•åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œè‡ªæˆ‘çªç ´å’Œå‹‡æ•¢æ¢ç´¢ï¼š\n\n**å…¨æ–°çš„æŠ€æœ¯é¢†åŸŸ**\n\nService Mesh æ˜¯ç›®å‰æŠ€æœ¯ç¤¾åŒºæœ€ä¸ºç‚™æ‰‹å¯çƒ­çš„æ–°æŠ€æœ¯æ–¹å‘ï¼Œæœ‰ä¸‹ä¸€ä»£å¾®æœåŠ¡çš„æ˜æ˜¾è¶‹åŠ¿ã€‚ä½†æ˜¯ç›®å‰ Service Mesh æŠ€æœ¯è¿˜å¤„äºå‘å±•æ—©æœŸï¼Œæš‚æ—¶è¿˜æ²¡æœ‰æˆç†Ÿçš„äº§å“ï¼Œå°¤å…¶ç¼ºä¹å¤§è§„æ¨¡çš„è½åœ°å®è·µã€‚\n\n**è¾ƒæ—©çš„å¼€æºæ—¶é—´**\n\nåœ¨ä¸Šè¿°èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å°†å¯åŠ¨ä¸ä¹…çš„ Service Mesh äº§å“å¼€æºåœ¨å¼€å‘æ—©æœŸï¼Œä¹Ÿå°±æ˜¯è¿˜æœªæˆç†Ÿä¹‹æ—¶ï¼Œå°±å¯¹ç¤¾åŒºå¼€æ”¾ï¼Œå¼€æ”¾æºç å¹¶å¯»æ±‚ç¤¾åŒºåˆä½œã€‚\n\n**æ›´åŠ å¼€æ”¾çš„æ€åº¦**\n\nåœ¨ SOFAMesh ä¸Šï¼Œæˆ‘ä»¬æ„¿æ„ä»¥å¼€æºå…±å»ºçš„æ–¹å¼æ¥å’Œç¤¾åŒºä¸€èµ·æ¨è¿› Service Mesh æŠ€æœ¯çš„æ›´å¥½å‘å±•å’Œå®ç°è½åœ°å®è·µï¼Œå…±åŒæ‰“é€ ä¸€ä¸ªæŠ€æœ¯å…ˆè¿›ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œå…·å¤‡è‰¯å¥½çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œå¯ä»¥å®å®åœ¨åœ¨çš„ç”Ÿäº§è½åœ°çš„ä¼˜ç§€äº§å“ã€‚æ¬¢è¿å›½å†…æŠ€æœ¯ç¤¾åŒºçš„æœ‹å‹ä»¬å’Œæˆ‘ä»¬å¼€å±•ä¸åŒå±‚é¢çš„äº¤æµä¸åˆä½œã€‚\n\n**åŠ¡å®çš„äº§å“è·¯çº¿**\n\nSOFAMesh åœ¨äº§å“è·¯çº¿ä¸Šï¼Œé€‰æ‹©äº†è·Ÿéšç¤¾åŒºä¸»æµï¼Œæˆ‘ä»¬é€‰æ‹©äº†ç›®å‰ Service Mesh ä¸­æœ€æœ‰å½±å“åŠ›å’Œå‰æ™¯çš„ Istioã€‚SOFAMesh ä¼šåœ¨ Istio çš„åŸºç¡€ä¸Šï¼Œæå‡æ€§èƒ½ï¼Œå¢åŠ æ‰©å±•æ€§ï¼Œå¹¶åœ¨è½åœ°å®è·µä¸Šåšæ¢ç´¢å’Œè¡¥å……ï¼Œä»¥å¼¥è¡¥ç›®å‰ Istio çš„ä¸è¶³ï¼ŒåŒæ—¶ä¿æŒä¸ Istio ç¤¾åŒºçš„æ­¥éª¤ä¸€è‡´å’ŒæŒç»­è·Ÿè¿›ã€‚\n\n## SOFAMesh ä»‹ç»\n\nSOFAMesh å°†åœ¨å…¼å®¹ Istio æ•´ä½“æ¶æ„å’Œåè®®çš„åŸºç¡€ä¸Šï¼Œåšå‡ºéƒ¨åˆ†è°ƒæ•´ï¼š\n\n1. ä½¿ç”¨ Golang è¯­è¨€å¼€å‘å…¨æ–°çš„ Sidecarï¼Œæ›¿ä»£ Envoy\n2. ä¸ºäº†é¿å… Mixer å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆï¼Œåˆå¹¶ Mixer éƒ¨åˆ†åŠŸèƒ½è¿›å…¥ Sidecar\n3. Pilot å’Œ Citadel æ¨¡å—è¿›è¡Œäº†å¤§å¹…çš„æ‰©å±•å’Œå¢å¼º\n\næˆ‘ä»¬çš„ç›®æ ‡ï¼šæ‰“é€ ä¸€ä¸ªæ›´åŠ åŠ¡å®çš„ Istio è½åœ°ç‰ˆæœ¬ï¼\n\n{{\u003ccallout note å¤‡æ³¨\u003e}}\n\nä»¥ä¸Šæ¶æ„è°ƒæ•´çš„ç»†èŠ‚ä»¥åŠæˆ‘ä»¬åšè°ƒæ•´çš„å‡ºå‘ç‚¹å’ŒåŸå› ï¼Œè¯·æµè§ˆ [èš‚èšé›†å›¢å¤§è§„æ¨¡å¾®æœåŠ¡æ¶æ„ä¸‹çš„ Service Mesh æ¢ç´¢ä¹‹è·¯](https:\/\/cloudnative.to\/blog\/the-way-to-service-mesh-in-ant-financial\/) ä¸€æ–‡ï¼Œæœ‰éå¸¸è¯¦å°½çš„è§£é‡Šã€‚\n\n{{\u003c\/callout\u003e}}\n\n## å¼€æºå†…å®¹\n\nåœ¨æœ¬è½®å¼€æºä¸­ï¼Œæˆ‘ä»¬å°†æ¨å‡º SOFAMesh ç›®å‰æ­£åœ¨å¼€å‘çš„ä¸¤å¤§æ¨¡å—ï¼šMOSN å’Œ SOFAPilotã€‚\n\n## MOSN\n\nSOFAMesh ä¸­ Golang ç‰ˆæœ¬çš„ Sidecarï¼Œæ˜¯ä¸€ä¸ªåä¸º MOSN (Modular Observable Smart Netstub) çš„å…¨æ–°å¼€å‘çš„æ¨¡å—ï¼Œå®ç° Envoy çš„åŠŸèƒ½ï¼Œå…¼å®¹ Envoy çš„ APIï¼Œå¯ä»¥å’Œ Istio é›†æˆã€‚\n\n![MOSN æ¶æ„å›¾](mosn-with-service-mesh.png)\n\næ­¤å¤–ï¼Œæˆ‘ä»¬ä¼šå¢åŠ å¯¹ SOFARPCã€Dubbo ç­‰é€šè®¯åè®®çš„æ”¯æŒï¼Œä»¥ä¾¿æ›´å¥½çš„è¿åˆå›½å†…ç”¨æˆ·åŒ…æ‹¬æˆ‘ä»¬è‡ªèº«çš„å®é™…éœ€æ±‚ã€‚\n\nç”±äº Sidecar ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿé¢„æœŸä¼šæœ‰å•ç‹¬ä½¿ç”¨ MOSN çš„åœºæ™¯ï¼Œå› æ­¤ MOSN çš„ä»£ç ä»“åº“æ˜¯ç‹¬ç«‹äº SOFAMesh çš„ï¼Œåœ°å€ä¸ºï¼šhttps:\/\/github.com\/mosn\/mosn\n\næ¬¢è¿å¤§å®¶ä½¿ç”¨ï¼Œæä¾›éœ€æ±‚ã€åé¦ˆé—®é¢˜ã€è´¡çŒ®ä»£ç æˆ–è€…åˆä½œå¼€å‘ã€‚\n\n## SOFAPilot\n\næˆ‘ä»¬å°†å¤§å¹…æ‰©å±•å’Œå¢å¼º Istio ä¸­çš„ Pilot æ¨¡å—ï¼š\n\n1. å¢åŠ  SOFARegistry çš„ Adapterï¼Œæä¾›è¶…å¤§è§„æ¨¡æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„è§£å†³æ–¹æ¡ˆ\n2. å¢åŠ æ•°æ®åŒæ­¥æ¨¡å—ï¼Œä»¥å®ç°å¤šä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚\n3. å¢åŠ  Open Service Registry APIï¼Œæä¾›æ ‡å‡†åŒ–çš„æœåŠ¡æ³¨å†ŒåŠŸèƒ½\n\nMOSN å’Œ SOFAPilot é…åˆï¼Œå°†å¯ä»¥æä¾›è®©ä¼ ç»Ÿä¾µå…¥å¼æ¡†æ¶ï¼ˆå¦‚ Spring Cloudï¼ŒDubboï¼ŒSOFA RPC ç­‰ï¼‰å’Œ Service Mesh äº§å“å¯ä»¥ç›¸äº’é€šè®¯çš„åŠŸèƒ½ï¼Œä»¥ä¾¿å¯ä»¥å¹³æ»‘çš„å‘ Service Mesh äº§å“æ¼”è¿›å’Œè¿‡æ¸¡ã€‚\n\n**Pilot å’Œåé¢ä¼šé™†ç»­å¼€æ”¾çš„ Mixerï¼ŒCitadel ç­‰ Istio æ¨¡å—**ï¼Œä¼šç»Ÿä¸€å­˜æ”¾åœ¨åŒä¸€ä¸ªä» Istio Fork å‡ºæ¥çš„ä»£ç ä»“åº“ä¸­ã€‚æœªæ¥ä¼šæŒç»­æ›´æ–° Istio æœ€æ–°ä»£ç ï¼Œä»¥ä¿æŒå’Œ Istio çš„ä¸€è‡´ã€‚\n\n## é™„å½•\n\næœ¬æ–‡ä¸­æåˆ°çš„é“¾æ¥åœ°å€é›†åˆï¼š\n\n- [MOSN](https:\/\/github.com\/mosn\/mosn)\n- [èš‚èšé›†å›¢å¤§è§„æ¨¡å¾®æœåŠ¡æ¶æ„ä¸‹çš„ Service Mesh æ¢ç´¢ä¹‹è·¯](https:\/\/cloudnative.to\/blog\/the-way-to-service-mesh-in-ant-financial\/)\n', '\/blog\/sofamesh-and-mosn-proxy-sidecar-service-mesh-by-ant-financial\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">èš‚èšé›†å›¢å¼€æº SOFAMeshâ€”ä¸€æ¬¾åŸºäº Istio æ”¹è¿›å’Œæ‰©å±•è€Œæ¥çš„ Service Mesh å¤§è§„æ¨¡è½åœ°å®è·µæ–¹æ¡ˆã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
          <div class="col-12">
 
 
 
 
 
 
 
 
 
 
 
 <nav aria-label="Page navigation">
   <ul class="pagination justify-content-center">
     
     
     <li class="page-item">
       <a class="page-link" href="/blog/">
         Â«Â«
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a href="/blog/page/22/" class="page-link">
         Â«
       </a>
     </li>
     
     
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/21/" class="page-link">
             21
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/22/" class="page-link">
             22
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item page-item active ">
           <a href="/blog/page/23/" class="page-link">
             23
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/24/" class="page-link">
             24
           </a>
         </li>
       
     
       
       
       
         
         
         
           
             
           
         
       
       
       
       
         <li class="page-item">
           <a href="/blog/page/25/" class="page-link">
             25
           </a>
         </li>
       
     
       
       
       
         
         
         
           
         
       
       
       
       
     
     
     
     <li class="page-item">
       <a href="/blog/page/24/" class="page-link">
         Â»
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a class="page-link" href="/blog/page/26/">
         Â»Â»
       </a>
     </li>
     
   </ul>
 </nav>
 
</div>

        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 order-1 order-lg-2 d-none d-sm-block">
          <div class="sidebar">
          <!-- categories -->
<div class="blog-categories mb-4">
  <p class="sidebar-title">
      ä¸“æ 
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/istio" class="sidebar-item">
            <span>Istio</span>
            <span>(70)</span>
        </a>
      
        <a href="/categories/service-mesh" class="sidebar-item">
            <span>Service Mesh</span>
            <span>(39)</span>
        </a>
      
        <a href="/categories/kubernetes" class="sidebar-item">
            <span>Kubernetes</span>
            <span>(24)</span>
        </a>
      
        <a href="/categories/%e9%9a%8f%e7%ac%94" class="sidebar-item">
            <span>éšç¬”</span>
            <span>(21)</span>
        </a>
      
        <a href="/categories/%e4%b8%9a%e6%80%81" class="sidebar-item">
            <span>ä¸šæ€</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/%e5%85%b6%e4%bb%96" class="sidebar-item">
            <span>å…¶ä»–</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/envoy" class="sidebar-item">
            <span>Envoy</span>
            <span>(16)</span>
        </a>
      
        <a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f" class="sidebar-item">
            <span>äº‘åŸç”Ÿ</span>
            <span>(14)</span>
        </a>
      
        <a href="/categories/ai" class="sidebar-item">
            <span>AI</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%ae%89%e5%85%a8" class="sidebar-item">
            <span>å®‰å…¨</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%bc%80%e6%ba%90" class="sidebar-item">
            <span>å¼€æº</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7" class="sidebar-item">
            <span>å¯è§‚æµ‹æ€§</span>
            <span>(5)</span>
        </a>
      
        <a href="/categories/%e6%97%85%e8%a1%8c" class="sidebar-item">
            <span>æ—…è¡Œ</span>
            <span>(4)</span>
        </a>
  </div>
</div>

<div class="blog-categories mb-4">
  <p class="sidebar-title">
      èµ„æ–™
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/%e5%87%ba%e7%89%88%e7%89%a9" class="sidebar-item">
            <span>å‡ºç‰ˆç‰©</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e7%94%b5%e5%ad%90%e4%b9%a6" class="sidebar-item">
            <span>ç¿»è¯‘ç”µå­ä¹¦</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e6%96%87%e6%a1%a3" class="sidebar-item">
            <span>ç¿»è¯‘æ–‡æ¡£</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>ç¿»è¯‘å›¾ä¹¦</span>
            <span>(6)</span>
        </a>
      
        <a href="/categories/%e5%8e%9f%e5%88%9b%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>åŸåˆ›å›¾ä¹¦</span>
            <span>(2)</span>
        </a>
      
        <a href="/categories/%e6%95%99%e7%a8%8b%e6%89%8b%e5%86%8c" class="sidebar-item">
            <span>æ•™ç¨‹æ‰‹å†Œ</span>
            <span>(1)</span>
        </a>
  </div>
</div>





          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">è”ç³»</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">å¾®ä¿¡å…¬ä¼—å·</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">åšå®¢</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/kubecon-china-2024-recap/">KubeCon China 2024 å›é¡¾ï¼šå¼•é¢†äº‘åŸç”ŸæŠ€æœ¯çš„å‰æ²¿åŠ¨æ€</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/black-myth-wukong-game-life/">ä»é»‘ç¥è¯æ‚Ÿç©ºèŠèµ·ï¼šæˆ‘å¿ƒç›®ä¸­çš„ 3A å¤§ä½œ</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/envoy-gateway-integration-istio-mesh/">é›†æˆ Envoy Gateway ä½œä¸º Istio æœåŠ¡ç½‘æ ¼ä¸­çš„å…¥å£ç½‘å…³</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">é“¾æ¥</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">
                  Istio æœåŠ¡ç½‘æ ¼
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate å…¬å¸
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿå­¦é™¢|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿå¼€æºé¡¹ç›®å¤§å…¨
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿç¤¾åŒºï¼ˆä¸­å›½ï¼‰
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">æ•™ç¨‹</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy åŸºç¡€æ•™ç¨‹
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio åŸºç¡€æ•™ç¨‹
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes åŸºç¡€æ•™ç¨‹
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">é€šçŸ¥</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-china-2024-panel/">KubeCon China 2024ï¼ˆé¦™æ¸¯ï¼‰</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/website-revamp-notice/">ç½‘ç«™æ”¹ç‰ˆé€šçŸ¥</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-meetup-dalian-2024/">2024 å¤§è¿äº‘åŸç”ŸæŠ€æœ¯å¼€æ”¾æ—¥</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">Â© 2017-2024 Jimmy Song ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>




<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>










<script src="/js/wowchemy-search.min.7a37268e7bbe4a9160c2e4c33b749816.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
