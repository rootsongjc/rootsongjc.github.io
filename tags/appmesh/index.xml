
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jimmy Song â€“ AppMesh</title>
    <link>https://jimmysong.io/tags/appmesh/</link>
    <description>Recent content in AppMesh on Jimmy Song</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <managingEditor>Jimmy Song</managingEditor>
    <webMaster>Jimmy Song</webMaster>
    
      <follow_challenge>
        <feedId>51621818828612637</feedId>
        <userId>59800919738273792</userId>
      </follow_challenge>
    
    
    <lastBuildDate>Wed, 30 Oct 2024 14:20:22 +0800</lastBuildDate>
    
	  <atom:link href="https://jimmysong.io/tags/appmesh/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
                                                         
    
                                                   
                           
    <item>
      <title>AppMesh å¿«é€Ÿå¼€å§‹</title>
      <link>https://jimmysong.io/book/argo-rollouts/getting-started/appmesh/index/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/book/argo-rollouts/getting-started/appmesh/index/</guid>
      <description>
        
        
        &lt;p&gt;æœ¬æŒ‡å—ä»‹ç»äº†å¦‚ä½•è®© Argo Rollouts ä¸ç”± &lt;a href=&#34;https://docs.aws.amazon.com/app-mesh/latest/userguide/what-is-app-mesh.html&#34; title=&#34;AWS App Mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS App Mesh&lt;/a&gt; ç®¡ç†çš„æœåŠ¡ç½‘æ ¼é›†æˆã€‚æœ¬æŒ‡å—åŸºäº åŸºæœ¬å…¥é—¨æŒ‡å— çš„æ¦‚å¿µæ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;è¦æ±‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…äº† AWS App Mesh Controller for K8s çš„ Kubernetes é›†ç¾¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ”” æç¤ºï¼šè¯·å‚é˜… &lt;a href=&#34;https://docs.aws.amazon.com/app-mesh/latest/userguide/getting-started-kubernetes.html&#34; title=&#34;App Mesh Controler Installation instructions&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;App Mesh Controler Installation instructions&lt;/a&gt; ä»¥äº†è§£å¦‚ä½•å¼€å§‹ä½¿ç”¨ Kubernetes çš„ App Meshã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-éƒ¨ç½²-rolloutæœåŠ¡å’Œ-app-mesh-crd&#34;&gt;1. éƒ¨ç½² Rolloutã€æœåŠ¡å’Œ App Mesh CRD&lt;/h2&gt;
&lt;p&gt;å½“ App Mesh ç”¨ä½œæµé‡è·¯ç”±å™¨æ—¶ï¼ŒRollout canary ç­–ç•¥å¿…é¡»å®šä¹‰ä»¥ä¸‹å¼ºåˆ¶å­—æ®µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# canaryService å’Œ stableService æ˜¯æŒ‡å‘ Rollout å°†è¦ä¿®æ”¹çš„æœåŠ¡çš„å¼•ç”¨ï¼Œä»¥ä¾¿é’ˆå¯¹é‡‘ä¸é›€ ReplicaSet å’Œç¨³å®š ReplicaSetï¼ˆå‡ä¸ºå¿…éœ€ï¼‰ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canaryService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-svc-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stableService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-svc-stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficRouting&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;appMesh&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¼•ç”¨çš„è™šæ‹ŸæœåŠ¡å°†ç”¨äºç¡®å®šè™šæ‹Ÿè·¯ç”±å™¨ï¼Œåè€…å°†è¢«æ“çºµä»¥æ›´æ–°é‡‘ä¸é›€æƒé‡ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;virtualService&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è™šæ‹ŸæœåŠ¡ App Mesh CR çš„åç§°&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-svc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è¦æ›´æ–°çš„è·¯ç”±çš„å¯é€‰é›†ã€‚å¦‚æœä¸ºç©ºï¼Œåˆ™æ›´æ–°ä¸è™šæ‹ŸæœåŠ¡å…³è”çš„æ‰€æœ‰è·¯ç”±ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;routes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;http-primary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# virtualNodeGroup æ˜¯ä¸€ä¸ªç»“æ„ï¼Œç”¨äºå¼•ç”¨ App Mesh è™šæ‹ŸèŠ‚ç‚¹ CRï¼Œè¯¥èŠ‚ç‚¹å¯¹åº”äºé‡‘ä¸é›€å’Œç¨³å®šç‰ˆæœ¬&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;virtualNodeGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# canaryVirtualNodeRef æŒ‡çš„æ˜¯å¯¹åº”äºé‡‘ä¸é›€ç‰ˆæœ¬çš„è™šæ‹ŸèŠ‚ç‚¹çš„å¼•ç”¨ã€‚Rollouts æ§åˆ¶å™¨å°†ä¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ›´æ–°è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„ podSelector ä»¥åŒ¹é…æ§åˆ¶å™¨ç”Ÿæˆçš„æœ€æ–°çš„ canary pod-hashã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canaryVirtualNodeRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-vn-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# stableVirtualNodeRef æŒ‡çš„æ˜¯å¯¹åº”äºç¨³å®šç‰ˆæœ¬çš„è™šæ‹ŸèŠ‚ç‚¹çš„å¼•ç”¨ã€‚Rollouts æ§åˆ¶å™¨å°†ä¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ›´æ–°è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„ podSelector ä»¥åŒ¹é…æ§åˆ¶å™¨ç”Ÿæˆçš„æœ€æ–°çš„ stable pod-hashã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stableVirtualNodeRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-vn-stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;setWeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;25&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;pause&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æœ¬æŒ‡å—ä¸­ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡åˆ†åˆ«æ˜¯ï¼š&lt;code&gt;my-svc-canary&lt;/code&gt; å’Œ &lt;code&gt;my-svc-stable&lt;/code&gt;ã€‚è¿™ä¸¤ä¸ªæœåŠ¡å¯¹åº”çš„æ˜¯ä¸¤ä¸ªåä¸º &lt;code&gt;my-vn-canary&lt;/code&gt; å’Œ &lt;code&gt;my-vn-stable&lt;/code&gt; çš„è™šæ‹ŸèŠ‚ç‚¹ CRã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåä¸º &lt;code&gt;rollout-demo-vsvc&lt;/code&gt; çš„è™šæ‹ŸæœåŠ¡ï¼Œå®ƒç”±ä¸€ä¸ªåä¸º &lt;code&gt;rollout-demo-vrouter&lt;/code&gt; çš„è™šæ‹Ÿè·¯ç”±å™¨ CR æä¾›ã€‚è¿™ä¸ªè™šæ‹Ÿè·¯ç”±å™¨éœ€è¦è‡³å°‘æœ‰ä¸€ä¸ªè·¯ç”±ï¼Œç”¨äºå°†æµé‡è½¬å‘åˆ° canary å’Œ stable è™šæ‹ŸèŠ‚ç‚¹ã€‚æœ€åˆï¼Œcanary çš„æƒé‡è®¾ç½®ä¸º 0%ï¼Œè€Œ stable çš„æƒé‡è®¾ç½®ä¸º 100%ã€‚åœ¨éƒ¨ç½²æœŸé—´ï¼Œæ§åˆ¶å™¨å°†æ ¹æ® &lt;code&gt;steps[N].setWeight&lt;/code&gt; ä¸­å®šä¹‰çš„é…ç½®ä¿®æ”¹è·¯ç”±çš„æƒé‡ã€‚&lt;/p&gt;
&lt;p&gt;canary å’Œ stable æœåŠ¡çš„é…ç½®ä¸ºæ— å¤´æœåŠ¡ã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œä»¥ä¾¿ App Mesh æ­£ç¡®å¤„ç†ç”± canary åˆ° stable é‡æ–°åˆ†é…çš„ pod çš„è¿æ¥æ± ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥éƒ¨ç½²æœåŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªæœåŠ¡ï¼ˆstable å’Œ canaryï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªæœåŠ¡ï¼ˆç”¨äº VIP å’Œ DNS æŸ¥è¯¢ï¼‰&lt;/li&gt;
&lt;li&gt;ä¸¤ä¸ª App Mesh è™šæ‹ŸèŠ‚ç‚¹ï¼ˆstable å’Œ canaryï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå…·æœ‰æŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹çš„è·¯ç”±çš„ App Mesh è™šæ‹Ÿè·¯ç”±å™¨&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå¯¹åº” VIP æœåŠ¡çš„ App Mesh è™šæ‹ŸæœåŠ¡&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ª rollout&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f https://raw.githubusercontent.com/argoproj/argo-rollouts/master/examples/appmesh/canary-service.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f https://raw.githubusercontent.com/argoproj/argo-rollouts/master/examples/appmesh/canary-rollout.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-éªŒè¯æœåŠ¡&#34;&gt;2. éªŒè¯æœåŠ¡&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆç¡®ä¿ rollout ç¨³å®šã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl argo rollouts get rollout my-rollout -n argo-examples -w
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n argo-examples port-forward svc/my-svc 8181:80
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;3-éƒ¨ç½²æ–°ç‰ˆæœ¬&#34;&gt;3. éƒ¨ç½²æ–°ç‰ˆæœ¬&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æ˜¯éƒ¨ç½²æ–°ç‰ˆæœ¬çš„æ—¶å€™äº†ã€‚ä½¿ç”¨æ–°é•œåƒæ›´æ–° rolloutã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl argo rollouts &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; image my-rollout &lt;span class=&#34;nv&#34;&gt;demo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;argoproj/rollouts-demo:green -n argo-examples
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Rollout åº”è¯¥ä¼šéƒ¨ç½²ä¸€ä¸ªæ–°çš„ canary ä¿®è®¢ç‰ˆæœ¬ï¼Œå¹¶åœ¨è™šæ‹Ÿè·¯ç”±å™¨ä¸‹æ›´æ–°æƒé‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get -n argo-examples virtualrouter my-vrouter -o json &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq &lt;span class=&#34;s2&#34;&gt;&amp;#34;.spec.routes[0].httpRoute.action.weightedTargets&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;s2&#34;&gt;&amp;#34;virtualNodeRef&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;my-vn-canary&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;s2&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;25&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;s2&#34;&gt;&amp;#34;virtualNodeRef&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;my-vn-stable&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     &lt;span class=&#34;s2&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;75&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨æ‰‹åŠ¨æ‰¹å‡†æ— é™æœŸæš‚åœçš„ rolloutï¼Œå¹¶ç»§ç»­è§‚å¯Ÿè·¯ç”±æ›´æ–°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl argo rollouts promote my-rollout -n argo-examples
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;watch -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;kubectl get -n argo-examples virtualrouter my-vrouter -o json | jq &amp;#34;.spec.routes[0].httpRoute.action.weightedTargets&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
                           
    <item>
      <title>ä» AWS App Mesh è¿ç§»åˆ° Istio å…¨é¢æŒ‡å—</title>
      <link>https://jimmysong.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/</link>
      <pubDate>Wed, 30 Oct 2024 14:20:22 +0800</pubDate>
      <author>Jimmy Song</author>
      <guid>https://jimmysong.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/</guid>
      <description>
        
        
        &lt;p&gt;éšç€ &lt;a href=&#34;https://aws.amazon.com/cn/blogs/containers/migrating-from-aws-app-mesh-to-amazon-ecs-service-connect/&#34; title=&#34;AWS å®£å¸ƒå°†åœ¨ 2026 å¹´ 9 æœˆ 30 æ—¥åœç”¨ AWS App Mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS å®£å¸ƒå°†åœ¨ 2026 å¹´ 9 æœˆ 30 æ—¥åœç”¨ AWS App Mesh&lt;/a&gt;ï¼Œè®¸å¤šä¼ä¸šæ­£åœ¨è¯„ä¼°ç»§ç»­ä½¿ç”¨æœåŠ¡ç½‘æ ¼çš„æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœæ‚¨ä¹Ÿåœ¨å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆï¼ŒIstio å°†æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”åŠŸèƒ½ä¸°å¯Œçš„é€‰é¡¹ï¼Œå°¤å…¶é€‚åˆ Kubernetes åŸç”Ÿç¯å¢ƒã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä» AWS App Mesh è¿ç§»åˆ° Istio çš„è¿‡ç¨‹ï¼Œå¯¹æ¯”è¿™ä¸¤ç§æœåŠ¡ç½‘æ ¼ï¼Œå¹¶ä»‹ç»æˆ‘ä»¬å¼€å‘çš„ Tetrate Istio è¿ç§»å·¥å…·ï¼Œå¸®åŠ©ç®€åŒ–è¿™ä¸€è¿ç§»è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;app-mesh-vs-istioè¿ç§»å‡†å¤‡&#34;&gt;App Mesh vs Istioï¼šè¿ç§»å‡†å¤‡&lt;/h2&gt;
&lt;p&gt;ç”±äº AWS App Mesh å³å°†åœç”¨ï¼Œäº†è§£ App Mesh å’Œ Istio ä¹‹é—´çš„ç›¸ä¼¼æ€§å’Œå·®å¼‚å¯¹äºæˆåŠŸè¿ç§»è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®æ¯”è¾ƒç‚¹ï¼Œå¸®åŠ©æ‚¨å°†å½“å‰çš„åŸºç¡€è®¾æ–½ä¸ Istio æä¾›çš„åŠŸèƒ½å¯¹é½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¨é¢çš„åŠŸèƒ½&lt;/strong&gt;ï¼šApp Mesh å’Œ Istio éƒ½æä¾›æµé‡ç®¡ç†ã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨åŠŸèƒ½ï¼Œä½† Istio æä¾›äº†æ›´å¤šå¯è‡ªå®šä¹‰çš„é€‰é¡¹ï¼ŒåŒ…æ‹¬é«˜çº§æµé‡è·¯ç”±å’Œå¢å¼ºçš„é¥æµ‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘æ— å…³æ€§&lt;/strong&gt;ï¼šä¸ç´§å¯†é›†æˆ AWS çš„ App Mesh ä¸åŒï¼ŒIstio æ˜¯äº‘æ— å…³çš„ï¼Œå¯åœ¨å¤šäº‘æˆ–æ··åˆç¯å¢ƒä¸­æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜çº§å®‰å…¨&lt;/strong&gt;ï¼šIstio é»˜è®¤æ”¯æŒ mTLSï¼Œä¸ App Mesh ç›¸æ¯”ï¼Œæä¾›äº†æ›´å¹¿æ³›çš„å®‰å…¨åŠŸèƒ½å’Œç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;AWS å»ºè®® ECS å®¢æˆ·è¿ç§»åˆ° &lt;a href=&#34;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/service-connect.html&#34; title=&#34;Service Connect&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Service Connect&lt;/a&gt; è€Œ EKS å®¢æˆ·è¿ç§»åˆ° &lt;a href=&#34;https://aws.amazon.com/vpc/lattice/&#34; title=&#34;VPC Lattice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;VPC Lattice&lt;/a&gt;ã€‚å¯¹äºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å¼€æºè§£å†³æ–¹æ¡ˆï¼ŒIstio æ˜¯ä¸€ä¸ªå¾ˆæœ‰å¸å¼•åŠ›çš„é€‰æ‹©ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä» AWS App Mesh è¿ç§»åˆ° Istio çš„è¿‡ç¨‹ï¼Œå¹¶ä½¿ç”¨ Tetrate çš„è¿ç§»å·¥å…·è¿›è¡Œæ”¯æŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¯”è¾ƒ-app-meshservice-connectvpc-lattice-å’Œ-istio&#34;&gt;æ¯”è¾ƒ App Meshã€Service Connectã€VPC Lattice å’Œ Istio&lt;/h2&gt;
&lt;p&gt;åœ¨å¼€å§‹è¿ç§»ä¹‹å‰ï¼Œäº†è§£ AWS App Meshã€Service Connectã€VPC Lattice å’Œ Istio ä¹‹é—´çš„å…³é”®åŒºåˆ«éå¸¸é‡è¦ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;App Mesh&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Service Connect&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;VPC Lattice&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Istio&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;ç½‘ç»œå¯é æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ &lt;a href=&#34;https://envoyproxy.io/&#34; title=&#34;Envoy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; ä½œä¸º Sidecar ä»£ç†ï¼Œè¿›è¡Œå¼‚å¸¸æ£€æµ‹ã€å¥åº·æ£€æŸ¥å’Œé‡è¯•ï¼Œæ”¯æŒç²¾ç»†è°ƒæ•´ã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ Envoy ä½œä¸º Sidecar ä»£ç†ï¼Œä»…æ”¯æŒè¶…æ—¶è°ƒæ•´ã€‚&lt;/td&gt;
          &lt;td&gt;å†…ç½®å¥åº·æ£€æŸ¥å’Œé‡è¯•ï¼Œç”± AWS ç®¡ç†çš„å¯é æ€§ï¼Œä¸éœ€è¦ Sidecar ä»£ç†ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ Sidecar å’Œ Ambient æ¨¡å¼ï¼Œä½¿ç”¨ Envoy å¹¶å®Œå…¨æ”¯æŒç²¾ç»†åŒ–è°ƒæ•´ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;é«˜çº§æµé‡è·¯ç”±&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒé«˜çº§æµé‡è·¯ç”±ï¼Œå¦‚ A/B æµ‹è¯•å’Œé‡‘ä¸é›€å‘å¸ƒã€‚&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒé«˜çº§æµé‡è·¯ç”±ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒåŸºæœ¬çš„æµé‡è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒåŒ…æ‹¬ A/B æµ‹è¯•å’Œé‡‘ä¸é›€å‘å¸ƒåœ¨å†…çš„é«˜çº§æµé‡æ§åˆ¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å¯è§‚æµ‹æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;éœ€è¦æ‰‹åŠ¨æ”¶é›†å’Œç›‘æ§æŒ‡æ ‡ã€‚&lt;/td&gt;
          &lt;td&gt;è‡ªåŠ¨å°†æŒ‡æ ‡å‘é€åˆ° Amazon CloudWatchã€‚&lt;/td&gt;
          &lt;td&gt;é›†æˆ AWS CloudWatch å’Œ X-Ray ç›‘æ§ã€‚&lt;/td&gt;
          &lt;td&gt;å¼€ç®±å³ç”¨çš„å¯è§‚æµ‹æ€§ï¼Œæ”¯æŒ Prometheusã€Grafana å’Œ Jaegerã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;é›†æˆ AWS Cloud Mapã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ AWS Cloud Mapã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ AWS æœåŠ¡å‘ç°æœºåˆ¶ã€‚&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ Kubernetes åŸç”Ÿçš„æœåŠ¡å‘ç°æœºåˆ¶ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;æ”¯æŒä¸ AWS PCA çš„ TLS å’ŒåŒå‘ TLSï¼ˆmTLSï¼‰ã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ TLSï¼Œä¸æ”¯æŒ mTLSã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ mTLSã€‚&lt;/td&gt;
          &lt;td&gt;æ”¯æŒ mTLS å’Œç»†ç²’åº¦çš„å®‰å…¨ç­–ç•¥ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;èµ„æºå…±äº«&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ª AWS è´¦æˆ·å…±äº«ç½‘æ ¼ã€‚&lt;/td&gt;
          &lt;td&gt;ä¸æ”¯æŒè·¨è´¦æˆ·å…±äº«å‘½åç©ºé—´ã€‚&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ª AWS è´¦æˆ·å…±äº«èµ„æºã€‚&lt;/td&gt;
          &lt;td&gt;å¯ä»¥è·¨å¤šä¸ªé›†ç¾¤å’Œäº‘éƒ¨ç½²ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;ä»‹ç»-tetrate-çš„-istio-è¿ç§»å·¥å…·&#34;&gt;ä»‹ç» Tetrate çš„ Istio è¿ç§»å·¥å…·&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ä½¿è¿ç§»è¿‡ç¨‹æ›´åŠ é¡ºåˆ©ï¼ŒTetrate å¼€å‘äº†ä¸€ä¸ª Istio è¿ç§»å·¥å…·åŒ…ï¼Œç›®å‰å¤„äºç§æœ‰çŠ¶æ€ï¼Œä½†å¯ä¾›å†…éƒ¨æˆ–ç»è¿‡æ‰¹å‡†çš„å®¢æˆ·é€šè¿‡ &lt;a href=&#34;https://resources.tetrate.dev/app-mesh-istio?__hstc=218802950.edcf2542a8010c44aa57b98adaef028a.1721092227167.1729818643207.1730268606576.91&amp;amp;__hssc=218802950.2.1730268606576&amp;amp;__hsfp=872206273&#34; title=&#34;æ­¤è¡¨å•&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤è¡¨å•&lt;/a&gt; ç”³è¯·ä½¿ç”¨ã€‚è¯¥å·¥å…·åŒ…å¸®åŠ©è‡ªåŠ¨è½¬æ¢ AWS App Mesh é…ç½®ä¸º Istio çš„ç­‰æ•ˆé…ç½®ï¼ŒåŒ…æ‹¬ Virtual Nodesã€Virtual Routers å’Œå…¶ä»–ç½‘ç»œç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®è€ƒé‡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å‘ç°&lt;/strong&gt;ï¼šApp Mesh å’Œ Istio çš„æœåŠ¡å‘ç°æ–¹å¼ä¸åŒã€‚Istio ä¾èµ– Kubernetes åŸç”Ÿçš„æœåŠ¡å‘ç°ï¼Œè€Œ App Mesh åˆ™é›†æˆ AWS Cloud Mapã€‚è¿ç§»è¿‡ç¨‹ä¸­ï¼Œéœ€ç›¸åº”è°ƒæ•´æœåŠ¡å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šIstio åŸç”Ÿæ”¯æŒæœåŠ¡ä¹‹é—´çš„ mTLSã€‚è™½ç„¶ AWS App Mesh ä¹Ÿæ”¯æŒ mTLSï¼Œä½†è¿ç§»è‡³ Istio éœ€è¦é…ç½® CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰å¹¶æ›´æ–°è¯ä¹¦ä»¥é€‚åº” Istio çš„å®‰å…¨æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµé‡ç®¡ç†&lt;/strong&gt;ï¼šIstio çš„ Virtual Services å’Œ Destination Rules æä¾›äº†æ¯” App Mesh çš„ Virtual Routers å’Œ Nodes æ›´é«˜çº§çš„æµé‡è·¯ç”±èƒ½åŠ›ã€‚è¿ç§»è¿‡ç¨‹ä¸­ï¼Œéœ€é¢å¤–é…ç½®ä»¥å»ºç«‹ç±»ä¼¼çš„è·¯ç”±è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä½¿ç”¨-tetrate-è¿ç§»å·¥å…·é€æ­¥å®Œæˆè¿ç§»&#34;&gt;ä½¿ç”¨ Tetrate è¿ç§»å·¥å…·é€æ­¥å®Œæˆè¿ç§»&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä½¿ç”¨æ­¤å·¥å…·çš„æœ‰æ•ˆæ­¥éª¤ï¼š&lt;/p&gt;
&lt;h3 id=&#34;å‰ææ¡ä»¶&#34;&gt;å‰ææ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¼€å§‹è¿ç§»ä¹‹å‰ï¼Œç¡®ä¿å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/doc/install&#34; title=&#34;Go&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/tools/#kubectl&#34; title=&#34;kubectl&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kubectl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/latest/docs/setup/getting-started/#download&#34; title=&#34;istioctl&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istioctl&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¡®ä¿åœ¨ EKS é›†ç¾¤ä¸Šæ­£ç¡®å®‰è£…å’Œé…ç½® AWS App Meshã€‚æ‚¨è¿˜éœ€è¦ä¸€ä¸ªåä¸º tetrate-tis-creds çš„ Kubernetes secretï¼Œç”¨äº Istio å®‰è£…ï¼Œè¯¦è§å·¥å…·æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥å·¥å…·è¿˜æä¾›é¢„æ£€æŸ¥å‘½ä»¤ï¼Œä»¥è¯†åˆ«è¿ç§»å‰çš„ä»»ä½•æ½œåœ¨é˜»ç¢å› ç´ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿è¡Œé¢„æ£€æŸ¥&#34;&gt;è¿è¡Œé¢„æ£€æŸ¥&lt;/h3&gt;
&lt;p&gt;ä¸ºç¡®ä¿è®¾ç½®å‡†å¤‡å°±ç»ªï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim precheck
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å‘½ä»¤å°†æ‰«æ App Mesh ç¯å¢ƒï¼Œæ ‡å‡ºä»»ä½•éœ€è¦è°ƒæ•´çš„é¡¹ï¼Œä»¥ç¡®ä¿æˆåŠŸè¿ç§»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿ç§»è¿‡ç¨‹&#34;&gt;è¿ç§»è¿‡ç¨‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… Istio&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Istio è¿ç§»å·¥å…·åŒ…ç”Ÿæˆ IstioOperator é…ç½®å¹¶å®‰è£… Istioï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim generate iop &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; istioctl install â€“skip-confirmation -f â€“
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨ Istio ç½‘ç»œè§„åˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œç”Ÿæˆå¹¶åº”ç”¨ Istio ç½‘ç»œè§„åˆ™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tim generate networking &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; kubectl apply -f â€“
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç§»é™¤ AWS App Mesh æ ‡ç­¾&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»å‘½åç©ºé—´ä¸­ç§»é™¤ç°æœ‰çš„ App Mesh æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¯¹äº default å‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace default &lt;span class=&#34;s2&#34;&gt;&amp;#34;appmesh.k8s.aws/sidecarInjectorWebhook-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨ Istio Sidecar æ³¨å…¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ·»åŠ æ ‡ç­¾ä»¥å¯ç”¨ Istio çš„è‡ªåŠ¨ Sidecar æ³¨å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl label namespace default istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å¯éƒ¨ç½²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºåº”ç”¨æ›´æ”¹å¹¶å¯åŠ¨æ–°çš„ Envoy Sidecar æ³¨å…¥ï¼Œé‡å¯éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl rollout restart deployment &amp;lt;deployment-name&amp;gt; -n &amp;lt;deployment-namespace&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è¿ç§»ç­–ç•¥&#34;&gt;è¿ç§»ç­–ç•¥&lt;/h3&gt;
&lt;p&gt;ä» AWS App Mesh è¿ç§»åˆ° Istio æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚åŸåœ°è¿ç§»ã€é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿éƒ¨ç½²ç­‰ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥ä¸è¿ç§»åˆ° VPC Lattice çš„ç­–ç•¥ç›¸ä¼¼ã€‚åˆé€‚çš„ç­–ç•¥å–å†³äºåº”ç”¨éœ€æ±‚ï¼Œå¦‚æ˜¯å¦éœ€è¦é›¶åœæœºæˆ–å®‰æ’ç»´æŠ¤çª—å£ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸåœ°è¿ç§»&lt;/strong&gt;ï¼šç”¨é…ç½®ä¸º Istio çš„æ–° Pods æ›¿æ¢å½“å‰ App Mesh çš„ Kubernetes Podsï¼Œé€‚åˆå¯å®¹å¿è¿ç§»è¿‡ç¨‹ä¸­çš„åœæœºçš„åº”ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è“ç»¿éƒ¨ç½²&lt;/strong&gt;ï¼šåœ¨æ–°å‘½åç©ºé—´ä¸­é…ç½®ä¸º Istio çš„åº”ç”¨å‰¯æœ¬ï¼Œè€ŒåŸå§‹éƒ¨ç½²ç»§ç»­è¿è¡Œ App Meshï¼Œæ— åœæœºåœ°é€æ­¥å°†æµé‡ä» App Mesh è¿ç§»åˆ° Istioã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡‘ä¸é›€å‘å¸ƒ&lt;/strong&gt;ï¼šä¸ App Mesh å¹¶è¡Œéƒ¨ç½² Istioï¼Œé€æ­¥å°†å°‘é‡æµé‡è½¬ç§»åˆ° Istioï¼Œç›‘æ§æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œé€æ­¥å¢åŠ æµé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†é˜¶æ®µè¿ç§»&lt;/strong&gt;ï¼šé€æ­¥è¿ç§»ç»„ä»¶æˆ–æœåŠ¡ï¼Œè€Œéä¸€æ¬¡æ€§è¿ç§»ï¼Œä»¥å‡å°‘é£é™©å¹¶å¸®åŠ©è¯†åˆ«æ½œåœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ‹è¯•å’ŒéªŒè¯&lt;/strong&gt;ï¼šåœ¨å®Œå…¨åˆ‡æ¢å‰ï¼Œè¿›è¡Œå…¨é¢æµ‹è¯•ï¼ŒéªŒè¯æœåŠ¡åŠŸèƒ½ã€å®‰å…¨æ€§å’Œæ€§èƒ½æŒ‡æ ‡ç¬¦åˆæˆ–è¶…å‡ºé¢„æœŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;ä» AWS App Mesh è¿ç§»åˆ° Istio å¯ä»¥è§£é”æµé‡ç®¡ç†ã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨æ–¹é¢çš„æ–°åŠŸèƒ½ã€‚Tetrate çš„ Istio è¿ç§»å·¥å…·ç®€åŒ–äº†è¿‡ç¨‹ï¼Œæä¾›äº†åˆ†æ­¥éª¤æ–¹æ³•ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®ï¼Œç¡®ä¿å¹³ç¨³è¿‡æ¸¡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨æœ‰å…´è¶£è¯•ç”¨ Tetrate çš„ Istio è¿ç§»å·¥å…·ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬â€”â€”è¯¥å·¥å…·ç›®å‰å¯ç§å¯†ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†å¾ˆä¹æ„è®¨è®ºè®¿é—®æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ¬¡è¿ç§»ä¸ä»…æ˜¯é‡‡ç”¨æ–°çš„æœåŠ¡ç½‘æ ¼ï¼Œæ›´æ˜¯ä¸€ä¸ªå……åˆ†åˆ©ç”¨ Istio å…¨é¢åŠŸèƒ½ã€æ”¯æŒå¤šäº‘éƒ¨ç½²ã€å¢å¼ºåŸºç¡€è®¾æ–½å¼¹æ€§çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æœ¬æ–‡æœ€åˆå‘è¡¨äº &lt;a href=&#34;https://tetrate.io/blog/migrating-from-aws-app-mesh-to-istio-a-comprehensive-guide/&#34; title=&#34;tetrate.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tetrate.io&lt;/a&gt;ã€‚&lt;/em&gt;&lt;/p&gt;

      </description>
    </item>
    
  </channel>
</rss>
