<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="Docker : rootsongjc.github.io"/>
<meta property="og:site_name" content="rootsongjc is Jimmy Song"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://rootsongjc.github.io/tags/docker/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-03-10"/>
<meta property="article:modified_time" content="2017-03-10"/>





<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rootsongjc">
<meta name="twitter:title" content="Docker : rootsongjc.github.io">
<meta name="twitter:creator" content="@rootsongjc">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="rootsongjc.github.io">


    <base href="http://rootsongjc.github.io/">
    <title> Docker - rootsongjc.github.io </title>
    <link rel="canonical" href="http://rootsongjc.github.io/tags/docker/">
    <link href="http://rootsongjc.github.io/tags/docker/index.xml" rel="alternate" type="application/rss+xml" title="Docker" />

    
<link rel="stylesheet" href="/static/css/style.css">
<script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
<script>hljs.initHighlightingOnLoad();</script>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>

<body lang="en">
<header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-octocat" id="logo"> </div></a>
    </figure>
    <div id="byline">by Jimmy Song</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="/blogs/">
                <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
                <span> blogs </span>
            </a>
            </li>
            <li>
            <a href="/projects/">
                <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
                <span> projects </span>
            </a>
            </li>
            <li>
            <a href="/talks/">
                <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
                <span> talks </span>
            </a>
            </li>
            <li>
            <a href="http://www.linkedin.com/in/rootsongjc">
                <span class="icon"> <i aria-hidden="true" class="icon-linkedin"></i></span>
                <span> me </span>
            </a>
            </li>
        </ul>

            <ul id="social">
            <li id="share">
                <span class="icon icon-bubbles"> </span>
                <span class="title"> share </span>
                <div class="dropdown share">
                    <ul class="social">
                      <li> <a href="https://twitter.com/intent/tweet?status=Docker-http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="https://plus.google.com/share?url=http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                        <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f&title=Docker&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://del.icio.us/post?url=http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                        <li> <a href="http://www.reddit.com/submit?url=http%3a%2f%2frootsongjc.github.io%2ftags%2fdocker%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
                    </ul>
                    <span class="subcount">sharing is caring</span>
                </div>
            </li>
            <li id="follow">
                <span class="icon icon-rocket"> </span>
                <span class="title"> follow </span>
                <div class="dropdown follow">
                    <ul class="social">
                        <li> <a href="http://www.twitter.com/rootsongjc" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="http://www.facebook.com/rootsongjc" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="http://www.linkedin.com/in/rootsongjc" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://github.com/rootsongjc" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                        <li> <a href="https://www.douban.com/people/deamonj/" target="_blank" title="è±†ç“£" class="facebook"><span class="icon icon-idea"></span>Douban</a> </li>
                        <li> <a href="https://tuchong.com/1425795/" target="_blank" title="å›¾è™«" class="github"><span class="icon icon-cc-2"></span>Tuchong</a> </li>                    </ul>
                    <span class="subcount">join 10k+ subscribers &amp; followers</span>
                </div>
            </li>
          </ul>

    </nav>
</header>


<section id="main">
  <div>
   <h1 id="title">Docker</h1>
    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part1/">Docker v.s Kubernetes part1 </a> </h2>
      <div class="post-meta">Fri, Mar 10, 2017 </div>
    </header>

     ï¼ˆé¢˜å›¾ï¼šæ­å·è¥¿æ¹–ï¼‰
å‰è¨€ è¿™ä¸€ç³»åˆ—æ–‡ç« æ˜¯å¯¹æ¯”kubernetes å’Œdockerä¸¤è€…ä¹‹é—´çš„å·®å¼‚ï¼Œé‰´äºæˆ‘ä¹‹å‰ä»docker1.10.3èµ·å¼€å§‹ä½¿ç”¨dockerï¼Œå¯¹åŸç”Ÿdockerçš„äº†è§£æ¯”è¾ƒå¤šï¼Œæœ€è¿‘åˆæ­£åœ¨çœ‹Kunernetesæƒå¨æŒ‡å—ï¼ˆç¬¬äºŒç‰ˆï¼‰è¿™æœ¬ä¹¦ï¼ˆP.Sæ„Ÿè°¢ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾çš„ç¼–è¾‘æœ‹å‹èµ é€æ­¤ä¹¦ï¼‰ã€‚è¿™ç³»åˆ—æ–‡ç« ä¸æ˜¯ä¸ºäº†æ¯”è¾ƒå­°ä¼˜å­°åŠ£ï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ã€‚
æ­¤ç³»åˆ—æ–‡ç« ä¸­æ‰€è¯´çš„dockeræŒ‡çš„æ˜¯*17.03-ce*ç‰ˆæœ¬ã€‚
æ¦‚å¿µæ€§çš„å·®åˆ« Kubernetes
äº†è§£ä¸€æ ·ä¸œè¥¿é¦–å…ˆè¦é«˜å±‹å»ºç“´çš„äº†è§£å®ƒçš„æ¦‚å¿µï¼ŒkubernetesåŒ…æ‹¬ä»¥ä¸‹å‡ ç§èµ„æºå¯¹è±¡ï¼š
 Pod Service Volume Namespace ReplicaSet Deployment StatefulSet DaemonSet Job  Docker
Dockerçš„èµ„æºå¯¹è±¡ç›¸å¯¹äºkubernetesæ¥è¯´å°±ç®€å•å¤šäº†ï¼Œåªæœ‰ä»¥ä¸‹å‡ ä¸ªï¼š
 Service Node Stack Docker  å°±è¿™ä¹ˆç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ª*docker-compose.yml*å³å¯ä»¥å¯åŠ¨ä¸€ç³»åˆ—æœåŠ¡ã€‚å½“ç„¶ç®€å•çš„å¥½å¤„æ˜¯ä¾¿äºç†è§£å’Œç®¡ç†ï¼Œä½†æ˜¯åœ¨åŠŸèƒ½æ–¹é¢å°±æ²¡æœ‰kubernetesé‚£ä¹ˆå¼ºå¤§äº†ã€‚
åŠŸèƒ½æ€§å·®åˆ«  Kubernetes èµ„æºé™åˆ¶ CPU 100måƒåˆ†ä¹‹ä¸€æ ¸ä¸ºå•ä½ï¼Œç»å¯¹å€¼ï¼Œrequests å’Œlimitsï¼Œè¶…è¿‡è¿™ä¸ªå€¼å¯èƒ½è¢«æ€æ‰ï¼Œèµ„æºé™åˆ¶åŠ›åº¦æ¯”dockeræ›´ç»†ã€‚ Podä¸­æœ‰ä¸ªæœ€åº•å±‚çš„pause å®¹å™¨ï¼Œå…¶ä»–ä¸šåŠ¡å®¹å™¨å…±ç”¨ä»–çš„IPï¼Œdockerå› ä¸ºæ²¡æœ‰è¿™å±‚æ¦‚å¿µï¼Œæ‰€ä»¥æ²¡æ³•å…±ç”¨IPï¼Œè€Œæ˜¯ä½¿ç”¨overlayç½‘ç»œåŒå¤„äºä¸€ä¸ªç½‘ç»œé‡Œæ¥é€šä¿¡ã€‚ Kubernetesåœ¨rcä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’é…ç½®ï¼ˆ1.3ç‰ˆæœ¬æ˜¯è¿™æ ·çš„ï¼Œåç»­ç‰ˆæœ¬è¿˜æ²¡æœ‰ç ”ç©¶è¿‡ï¼‰ Kuberentes Label å¯ä»¥åœ¨å¼€å§‹å’ŒåŠ¨æ€çš„æ·»åŠ ä¿®æ”¹ï¼Œæ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½æœ‰ï¼Œè¿™ä¸€ç‚¹dockerä¹Ÿæœ‰ï¼Œä½†æ˜¯èµ„æºè°ƒåº¦å› ä¸ºæ²¡æœ‰kubernetesé‚£ä¹ˆå±‚çº§ï¼Œæ‰€æœ‰è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒå¼±ä¸€äº›ã€‚ Kuberneteså¯¹è±¡é€‰æ‹©æœºåˆ¶ç»§ç»­é€šè¿‡label selectorï¼Œç”¨äºå¯¹è±¡è°ƒåº¦ HPA horizontal pod autoscaling æ¨ªå‘ç§»åŠ¨æ‰©å®¹ï¼Œä¹Ÿæ˜¯ä¸€ç§èµ„æºå¯¹è±¡ï¼Œæ ¹æ®è´Ÿè½½å˜åŒ–æƒ…å†µé’ˆå¯¹æ€§çš„è°ƒæ•´podç›®æ ‡å‰¯æœ¬æ•°ã€‚ Kubernetesä¸­æœ‰ä¸‰ä¸ªIPï¼ŒNode,Pod,Cluster IPçš„å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œdockerä¸­æ²¡æœ‰Cluster IPçš„æ¦‚å¿µã€‚ æŒä¹…åŒ–å­˜å‚¨ï¼Œåœ¨Kubernetesä¸­æœ‰Persistent volume åªèƒ½æ˜¯ç½‘ç»œå­˜å‚¨ï¼Œä¸å±äºä»»ä½•nodeï¼Œç‹¬ç«‹äºpodä¹‹å¤–ï¼Œè€Œdockeråªèƒ½ä½¿ç”¨volume pluginã€‚ å¤šç§Ÿæˆ·ç®¡ç†ï¼Œkubernetesä¸­æœ‰`Namespaceï¼Œdockeræš‚æ—¶æ²¡æœ‰å¤šç§Ÿæˆ·ç®¡ç†åŠŸèƒ½ã€‚  æ€»ä½“æ¥è¯´Dockeræ¶æ„æ›´åŠ ç®€å•ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šçš„é…ç½®ï¼Œåªéœ€è¦æ¯ä¸ªç»“ç‚¹éƒ½å®‰è£…dockerå³å¯ï¼Œè°ƒåº¦å’Œç®¡ç†åŠŸèƒ½æ²¡kubernetesé‚£ä¹ˆå¤æ‚ã€‚ä½†æ˜¯kubernetesæœ¬èº«å°±æ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®ä¸­å¿ƒç®¡ç†å·¥å…·ï¼Œä¸ä»…å¯ä»¥ç”¨æ¥ç®¡ç†dockerï¼Œ*pod*è¿™ä¸ªæ¦‚å¿µé‡Œå°±å¯ä»¥è¿è¡Œä¸ä»…æ˜¯dockeräº†ã€‚
 ä»¥åçš„æ–‡ç« ä¸­å°†ç»“åˆdockerç€é‡è®²Kubernetesï¼ŒåŸºäº1.3ç‰ˆæœ¬ã€‚
 
    <footer>
        <a href='http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part1/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/docker-plugin-develop/">Dockeræ’ä»¶å¼€å‘-sshfsç¤ºä¾‹ </a> </h2>
      <div class="post-meta">Fri, Mar 10, 2017 </div>
    </header>

    ï¼ˆé¢˜å›¾ï¼šæ­å·å´å±±æ­¥é“æ—çš„å¢™å£ï¼‰
å®˜æ–¹ç¤ºä¾‹æ–‡æ¡£
å®˜æ–¹ä»¥å¼€å‘ä¸€ä¸ªsshfsçš„volume pluginä¸ºä¾‹ã€‚
$ git clone https://github.com/vieux/docker-volume-sshfs $ cd docker-volume-sshfs $ go get github.com/docker/go-plugins-helpers/volume $ go build -o docker-volume-sshfs main.go $ docker build -t rootfsimage . $ id=$(docker create rootfsimage true) # id was cd851ce43a403 when the image was created $ sudo mkdir -p myplugin/rootfs $ sudo docker export &quot;$id&quot; | sudo tar -x -C myplugin/rootfs $ docker rm -vf &quot;$id&quot; $ docker rmi rootfsimage  æˆ‘ä»¬å¯ä»¥çœ‹åˆ°sshfsçš„Dockerfileæ˜¯è¿™æ ·çš„ï¼š
FROM alpine RUN apk update &amp;&amp; apk add sshfs RUN mkdir -p /run/docker/plugins /mnt/state /mnt/volumes COPY docker-volume-sshfs docker-volume-sshfs CMD [&quot;docker-volume-sshfs&quot;]  å®é™…ä¸Šæ˜¯è®²ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°alpine linuxå®¹å™¨ä¸­è¿è¡Œã€‚
    <footer>
        <a href='http://rootsongjc.github.io/blogs/docker-plugin-develop/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/contiv-v2plugin/">Contivå…¥å‘æŒ‡å—-v2plugin </a> </h2>
      <div class="post-meta">Fri, Mar 10, 2017 </div>
    </header>

    (é¢˜å›¾ï¼šä¸Šæµ·äº¤é€šå¤§å­¦)
ç»§ç»­è¶Ÿæ˜¨å¤©æŒ–çš„å‘ã€‚
æ˜¨å¤©çš„issue-776å·²ç»å¾—åˆ°@gkvijayçš„å›å¤ï¼ŒåŸæ¥æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…contiv/v2pluginçš„ç¼˜æ•…ï¼Œæ‰€ä»¥create contiv networkå¤±è´¥ï¼Œæˆ‘éœ€è¦è‡ªå·±buildä¸€ä¸ªdocker pluginã€‚
æŸ¥çœ‹ä¸‹è¿™ä¸ªcommité‡Œé¢æœ‰build v2pluginçš„è„šæœ¬æ›´æ”¹ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥buildè‡ªå·±çš„v2pluginã€‚
å‰æä½ éœ€è¦å…ˆbuildå‡ºnetctlã€netmasterã€netpluginä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¿å­˜åˆ°binç›®å½•ä¸‹ï¼Œå¦‚æœä½ æ²¡è‡ªå·±buildç›´æ¥ä¸‹è½½releaseé‡Œé¢çš„æ–‡ä»¶ä¿å­˜è¿›å»ä¹Ÿè¡Œã€‚
ç¼–è¯‘v2pluginæ’ä»¶ ä¿®æ”¹config.jsonæ’ä»¶é…ç½®æ–‡ä»¶
{ &quot;manifestVersion&quot;: &quot;v0&quot;, &quot;description&quot;: &quot;Contiv network plugin for Docker&quot;, &quot;documentation&quot;: &quot;https://contiv.github.io&quot;, &quot;entrypoint&quot;: [&quot;/startcontiv.sh&quot;], &quot;network&quot;: { &quot;type&quot;: &quot;host&quot; }, &quot;env&quot;: [ { &quot;Description&quot;: &quot;To enable debug mode, set to '-debug'&quot;, &quot;Name&quot;: &quot;dbg_flag&quot;, &quot;Settable&quot;: [ &quot;value&quot; ], &quot;Value&quot;: &quot;-debug&quot; }, { &quot;Description&quot;: &quot;VLAN uplink interface used by OVS&quot;, &quot;Name&quot;: &quot;iflist&quot;, &quot;Settable&quot;: [ &quot;value&quot; ], &quot;Value&quot;: &quot;&quot; }, { &quot;Description&quot;: &quot;Etcd or Consul cluster store url&quot;, &quot;Name&quot;: &quot;cluster_store&quot;, &quot;Settable&quot;: [ &quot;value&quot; ], &quot;Value&quot;: &quot;etcd://172.
    <footer>
        <a href='http://rootsongjc.github.io/blogs/contiv-v2plugin/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/contiv-tryout/">Contivå…¥å‘æŒ‡å—-è¯•ç”¨å…¨è®°å½• </a> </h2>
      <div class="post-meta">Thu, Mar 9, 2017 </div>
    </header>

    (é¢˜å›¾ï¼šåŒ—çº¬37åº¦é»„æµ·ä¹‹æ»¨é£åŠ›å‘ç”µåœºï¼Œå†¬å¤©çš„å¤§é£æŒç»­ç»™äººç±»æä¾›æ¸…æ´çš„èƒ½æºï¼‰
å…³äºcontivçš„ä»‹ç»è¯·çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« Contiv Introã€‚
å¼€å‘ç¯å¢ƒä½¿ç”¨Vagrantæ­å»ºï¼Œæ˜¨å¤©è¯•ç”¨äº†ä¸‹ï¼ŒçœŸä¸çŸ¥é“å®ƒä»¬æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œå³ç„¶æ˜¯dockeræ’ä»¶ä¸ºå•¥ä¸ç›´æ¥åœ¨dockerä¸­å¼€å‘å‘¢ï¼Œæˆ‘æœ‰ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•æ­å»ºdockerå¼€å‘ç¯å¢ƒï¼Œå¯ä»¥åœ¨dockerä¸­å¼€å‘dockerï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ¥å¼€å‘contivå•ŠğŸ˜„ï¼Œåªè¦ä¸‹è½½ä¸€ä¸ªdockeré•œåƒdockercore/docker:latestå³å¯ï¼Œä¸è¿‡æœ‰ç‚¹å¤§2.31Gï¼Œä½¿ç”¨é˜¿é‡Œäº‘çš„mirrorä¸‹è½½å€’æ˜¯ä¹Ÿåˆ’ç®—ï¼Œæ€»æ¯”ä½ è‡ªå·±éƒ¨ç½²ä¸€ä¸ªå¼€å‘ç¯å¢ƒèŠ‚çœæ—¶é—´ã€‚
Contivæ¦‚å¿µè§£æ Contivç”¨äºç»™å®¹å™¨åˆ›å»ºå’Œåˆ†é…ç½‘è·¯ï¼Œå¯ä»¥åˆ›å»ºç­–ç•¥ç®¡ç†å®¹å™¨çš„å®‰å…¨ã€å¸¦å®½ã€ä¼˜å…ˆçº§ç­‰ï¼Œç›¸å½“äºä¸€ä¸ªSDNã€‚
Group æŒ‰å®¹å™¨æˆ–Podçš„åŠŸèƒ½ç»™å®¹å™¨åˆ†é…ç­–ç•¥ç»„ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§å®¹å™¨/Podçš„labelæ¥åˆ†ç»„ï¼Œåº”ç”¨ç»„è·Ÿcontivçš„networkä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¯ä»¥å¾ˆå¤šåº”ç”¨ç»„å±äºåŒä¸€ä¸ªnetworkæˆ–IP subnetã€‚
Polices ç”¨æ¥é™å®šgroupçš„è¡Œä¸ºï¼Œcontivæ”¯æŒä¸¤ç§ç±»å‹çš„policyï¼š
 Bandwidth é™å®šåº”ç”¨ç»„çš„èµ„æºä½¿ç”¨ä¸Šé™ Isolation èµ„æºç»„çš„è®¿é—®æƒé™  Groupå¯ä»¥åŒæ—¶åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªpolicyï¼Œå½“æœ‰å®¹å™¨è°ƒåº¦åˆ°è¯¥groupé‡Œå°±ä¼šé€‚ç”¨è¯¥groupçš„policyã€‚
Network IPv4æˆ–IPv6ç½‘ç»œï¼Œå¯ä»¥é…ç½®subnetå’Œgatewayã€‚
Contivä¸­çš„ç½‘ç»œ
åœ¨contivä¸­å¯ä»¥é…ç½®ä¸¤ç§ç±»å‹çš„ç½‘ç»œ
 application networkï¼šå®¹å™¨ä½¿ç”¨çš„ç½‘ç»œ infrastructure networkï¼šhost namespaceçš„è™šæ‹Ÿç½‘ç»œï¼Œæ¯”å¦‚åŸºç¡€è®¾æ–½ç›‘æ§ç½‘ç»œ  ç½‘ç»œå°è£…
Contivä¸­æœ‰ä¸¤ç§ç±»å‹çš„ç½‘ç»œå°è£…
 Routedï¼šoverlay topologyå’ŒL3-routed BGP topology Bridgedï¼šlayer2 VLAN  Tenant Tenantæä¾›contivä¸­çš„namespaceéš”ç¦»ã€‚ä¸€ä¸ªtenantå¯ä»¥æœ‰å¾ˆå¤šä¸ªnetworkï¼Œæ¯ä¸ªnetworkéƒ½æœ‰ä¸ªsubnetã€‚è¯¥tenantä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒçš„ä»»æ„networkå’Œsubnetçš„IPã€‚
ç‰©ç†ç½‘ç»œä¸­çš„tenantç§°ä½œè™šæ‹Ÿè·¯ç”±è½¬å‘(VRF)ã€‚Contivä½¿ç”¨VLANå’ŒVXLAN IDæ¥å®ç°å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œè¿™å–å†³ä½ ä½¿ç”¨çš„æ˜¯layer2ã€layer3è¿˜æ˜¯Cisco ACIã€‚
Contivä¸‹è½½ Contivçš„ç¼–è¯‘å®‰è£…æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½githubä¸Šçš„release-1.0.0-beta.3-03-08-2017.18-51-20.UTCæ–‡ä»¶è§£å‹è·å¾—äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€‚
 https://github.com/contiv/install/blob/master/README.mdè¿™ä¸ªå®˜æ–¹æ–‡æ¡£å·²ç»è¿‡æ—¶ï¼Œä¸è¦çœ‹äº†ã€‚
 å¦‚æœè¯•ç”¨å¯ä»¥çš„è¯ï¼Œæˆ‘ä¼šåç»­å†™contivå¼€å‘ç¯å¢ƒæ­å»ºçš„æ–‡ç« ã€‚
è¿™ä¸ªreleaseæ˜¯2017å¹´3æœˆ8æ—¥å‘å¸ƒçš„ï¼Œå°±åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„å‰ä¸€å¤©ã€‚æœ‰ä¸ªæœ€é‡è¦çš„æ›´æ–°æ˜¯æ”¯æŒdocker1.13 swarm modeã€‚
å®˜æ–¹å®‰è£…æ–‡æ¡£
ä¸‹è½½è§£å‹åä¼šå¾—åˆ°å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š
 contivk8s k8sä¸“ç”¨çš„ contrib æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸ªnetctlçš„bashè„šæœ¬ netcontiv è¿™ä¸ªå‘½ä»¤å°±ä¸€ä¸ª-versioné€‰é¡¹ç”¨æ¥æŸ¥çœ‹contivçš„ç‰ˆæœ¬ğŸ˜“ netctl contivå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥é…ç½®ç½‘ç»œã€ç­–ç•¥ã€æœåŠ¡è´Ÿè½½å‡è¡¡ï¼Œä½¿ç”¨è¯´æ˜ netmaster contivçš„ä¸»èŠ‚ç‚¹æœåŠ¡ netplugin  ä¸‹é¢çš„å®‰è£…ä¸­ç”¨åˆ°çš„åªæœ‰netctlã€netmasterå’Œnetpluginè¿™ä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
    <footer>
        <a href='http://rootsongjc.github.io/blogs/contiv-tryout/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/contiv-guide/">Contiv Intro </a> </h2>
      <div class="post-meta">Thu, Mar 9, 2017 </div>
    </header>

    (é¢˜å›¾ï¼šåŒ—äº¬è“è‰²æ¸¯æ¹¾å¤œæ™¯)
Contivæ˜¯æ€ç§‘å¼€å‘çš„dockerç½‘ç»œæ’ä»¶ï¼Œä»2015å¹´å°±å¼€æºäº†ï¼Œä¸šç•Œé€šå¸¸æ‹¿å®ƒå’ŒCalicoæ¯”è¾ƒã€‚è²Œä¼¼Contivä»¥å‰è¿˜å¼€å‘è¿‡volume pluginï¼Œç°åœ¨é”€å£°åŒ¿è¿¹äº†ï¼Œåªæœ‰netpluginä»åœ¨æ´»è·ƒå¼€å‘ã€‚
å®¹å™¨ç½‘ç»œæ’ä»¶ Calico ä¸ Contiv Netpluginæ·±å…¥æ¯”è¾ƒ
è¿˜æœ‰ç¯‡æ–‡ç« è®²è§£äº†dockerç½‘ç»œæ–¹æ¡ˆçš„æ”¹è¿›
Contiv Netplugin ç®€ä»‹ Contiv Netplugin æ˜¯æ¥è‡ªæ€ç§‘çš„è§£å†³æ–¹æ¡ˆã€‚ç¼–ç¨‹è¯­è¨€ä¸º Goã€‚å®ƒåŸºäº OpenvSwitchï¼Œä»¥æ’ä»¶åŒ–çš„å½¢å¼æ”¯æŒå®¹å™¨è®¿é—®ç½‘ç»œï¼Œæ”¯æŒ VLANï¼ŒVxlanï¼Œå¤šç§Ÿæˆ·ï¼Œä¸»æœºè®¿é—®æ§åˆ¶ç­–ç•¥ç­‰ã€‚ä½œä¸ºæ€ç§‘æ•´ä½“æ”¯æŒå®¹å™¨åŸºç¡€è®¾æ–½contivé¡¹ç›®çš„ç½‘ç»œéƒ¨åˆ†ï¼Œæœ€å¤§çš„äº®ç‚¹åœ¨äºå®¹å™¨è¢«èµ‹äºˆäº† SDN èƒ½åŠ›ï¼Œå®ç°å¯¹å®¹å™¨æ›´ç»†ç²’åº¦ï¼Œæ›´ä¸°å¯Œçš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚å¦å¤–ï¼Œå¯¹ Docker CNM ç½‘ç»œæ¨¡å‹çš„æ”¯æŒï¼Œå¹¶å†…ç½®äº† IPAM æ¥å£ï¼Œä¸ä»…ä»…æä¾›äº†ä¸€å®¹å™¨ä¸€ IPï¼Œè€Œä¸”å®¹å™¨çš„ç½‘ç»œä¿¡æ¯è¢«è®°å½•çš„å®¹å™¨é…ç½®ä¸­ï¼Œä¼´éšç€å®¹å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå‡ä½å› ä¸ºçŠ¶æ€ä¸åŒæ­¥é€ æˆç½‘ç»œä¿¡æ¯ä¸¢å¤±çš„é£é™©ã€‚æœ‰åˆ«äº CNIï¼Œè¿™ç§å†…èšåŒ–çš„è®¾è®¡æœ‰åˆ©äºå‡å°‘å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä¾èµ–ã€‚éšç€é¡¹ç›®çš„å‘å±•ï¼Œé™¤äº† Dockerï¼Œè¿˜æä¾›äº†å¯¹ Kubernetes ä»¥åŠ Mesos çš„æ”¯æŒï¼Œå³ CNI æ¥å£ã€‚

 Netmaster åå°è¿›ç¨‹è´Ÿè´£è®°å½•æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€ï¼Œä¿å­˜ç½‘ç»œä¿¡æ¯ï¼Œåˆ†é… IP åœ°å€ Netplugin åå°è¿›ç¨‹ä½œä¸ºæ¯ä¸ªå®¿ä¸»æœºä¸Šçš„ Agent ä¸ Docker åŠ OVS é€šä¿¡ï¼Œå¤„ç†æ¥è‡ª Docker çš„è¯·æ±‚ï¼Œç®¡ç† OVSã€‚Docker æ–¹é¢æ¥å£ä¸º remote driverï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ— Docker å®šä¹‰çš„ JSON-RPC(POST) æ¶ˆæ¯ã€‚OVS æ–¹é¢æ¥å£ä¸º remote ovsdbï¼Œä¹Ÿæ˜¯ JSON-RPC æ¶ˆæ¯ã€‚ä»¥ä¸Šæ¶ˆæ¯éƒ½åœ¨ localhost ä¸Šå¤„ç†ã€‚ é›†ç¾¤ç®¡ç†ä¾èµ– etcd/serf
    <footer>
        <a href='http://rootsongjc.github.io/blogs/contiv-guide/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/projects/docker_tech_selection/">dockeræŠ€æœ¯é€‰å‹ </a> </h2>
      <div class="post-meta">Wed, Mar 8, 2017 </div>
    </header>

    å›é¡¾å†å²  å¤šå°‘æ¬¡æˆ‘å›è¿‡å¤´çœ‹çœ‹èµ°è¿‡çš„è·¯ï¼Œä½ è¿˜åœ¨å°æ‘æ—ã€‚
 å»å¹´åŸºäºdocker1.11å¯¹Hadoop yarnè¿›è¡Œäº†dockeråŒ–æ”¹é€ ï¼Œè¯¦æƒ…è¯·çœ‹å¤§æ•°æ®é›†ç¾¤è™šæ‹ŸåŒ–-Yarn on dockerå§‹æœ«ï¼Œæˆ‘å°†è¿™ä¸ªäº‹ä»¶å‘½åä¸ºmagpieï¼Œå› ä¸ºå®ƒå°±åƒæ˜¯å–œé¹Šä¸€æ ·æ”¶é›†ç€å„ç§å„æ ·çš„èµ„æºæ­å»ºè‡ªå·±çš„å°çªã€‚magpieè¿˜æ˜¯æœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥åšçš„ï¼Œå¤§æ•°æ®é›†ç¾¤çš„è™šæ‹ŸåŒ–ä¹Ÿä¸ä¼šæ­¢æ­¥ï¼Œå®ƒä»…ä»…æ˜¯å¯¹å…¶åšäº†åˆæ­¥çš„æ¢ç´¢ï¼Œå¯¹äºèµ„æºåˆ©ç”¨ç‡å’Œç®¡ç†æ–¹é¢çš„ä¼˜åŒ–è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼ŒYarnæœ¬èº«å°±æ˜¯åšä¸ºå¤§æ•°æ®é›†ç¾¤çš„èµ„æºç®¡ç†è°ƒåº¦è§’è‰²å‡ºç°çš„ï¼Œä¸€å¼€å§‹æ˜¯ä¸ºè°ƒåº¦MapReduceï¼Œåæ¥çš„sparkã€hiveã€tensrflowã€HAWQã€slideç­‰ç­‰ä¸ä¸€è€Œè¶³é™†ç»­å‡ºç°ã€‚ä½†æ˜¯ç”¨å®ƒæ¥ç®¡ç†dockerä¼¼ä¹è¿˜æ˜¯æœ‰ç‚¹è¿‡é‡ï¼Œè¿˜ä¸å¦‚ç”¨kubernetesã€marathonã€nomadã€swarmç­‰ã€‚
ä½†æ˜¯åœ¨å¾®æœåŠ¡æ–¹é¢docker1.11çš„å¾ˆå¤šå¼Šç«¯æˆ–è€…è¯´ç¼ºç‚¹å°±æš´éœ²äº†å‡ºæ¥ï¼Œé¦–å…ˆdocker1.11åŸç”Ÿå¹¶ä¸å¸¦clusterç®¡ç†ï¼Œéœ€è¦é…åˆÂ·docker swarmã€kubernetesã€marathonç­‰æ‰èƒ½ç®¡ç†dockeré›†ç¾¤ã€‚ä¹‹å‰çš„å¯¹äºdockerçš„ä½¿ç”¨æ–¹å¼åŸºæœ¬å°±æ˜¯æŒ‰ç…§è™šæ‹Ÿæœºçš„æ–¹å¼ä½¿ç”¨çš„ï¼Œå›ºå®šIPæœ‰æ‚–äºå¾®æœåŠ¡çš„åŸåˆ™ã€‚
æˆ‘ä»¬åŸºäºdocker1.11å’ŒshrikeäºŒå±‚ç½‘ç»œæ¨¡å¼ï¼Œè¿˜æœ‰shipyardæ¥åšé›†ç¾¤ç®¡ç†ï¼Œshipyardåªæ˜¯ä¸€ä¸ªç®€å•çš„dockeré›†ç¾¤ç®¡ç†çš„WebUIï¼ŒåŸºæœ¬éƒ½æ˜¯è°ƒç”¨docker APIï¼Œå”¯ä¸€åšäº†ä¸€ç‚¹dockeråŸç”Ÿæ²¡æœ‰çš„åŠŸèƒ½å°±æ˜¯scaleå®¹å™¨ï¼Œè€Œä¸”åªæ”¯æŒåˆ°docker1.11ï¼Œæ—©å·²åœæ­¢å¼€å‘ã€‚æˆ‘æŠ›å¼ƒäº†shipyardï¼Œå®ƒçš„é¡µé¢åŠŸèƒ½åŸºæœ¬å¯æœ‰å¯æ— ï¼Œæˆ‘è‡ªå·±å¼€å‘çš„magpieä¸€æ ·å¯ä»¥ç®¡ç†yarn on dockeré›†ç¾¤ã€‚
Docker Swarmæœ‰å¦‚ä¸‹å‡ ä¸ªç¼ºç‚¹
 å¯¹äºå¤§è§„æ¨¡é›†ç¾¤çš„ç®¡ç†æ•ˆç‡å¤ªä½ï¼Œå½“ç®¡ç†ä¸Šç™¾ä¸ªnodeçš„æ—¶å€™ç»å¸¸å‡ºç°æœ‰èŠ‚ç‚¹çŠ¶æ€ä¸åŒæ­¥çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸»æœºé‡å¯åå®¹å™¨å·²ç»Exitedäº†ï¼Œä½†æ˜¯masterè®©ç„¶è®¤ä¸ºæ˜¯RunningçŠ¶æ€ï¼Œå¿…é¡»é‡å¯æ‰€æœ‰masterèŠ‚ç‚¹æ‰è¡Œã€‚ æ²¡æœ‰ä¸­å¿ƒåŒ–Nodeç®¡ç†åŠŸèƒ½ï¼Œå¿…é¡»ç™»å½•åˆ°æ¯å°nodeä¸Šæ‰‹åŠ¨å¯åœswarm-agentã€‚ é›†ç¾¤ç®¡ç†åŠŸèƒ½å®åœ¨å¤ªå¤ªå¤ªç®€é™‹ï¼ŒæŸ¥çœ‹æ‰€æœ‰nodeçŠ¶æ€åªèƒ½ç”¨docker infoè€Œä¸”é‚£ä¸ªæ ¼å¼å°±ä¸æäº†ï¼Œshipyardé‡Œæœ‰å¤„ç†è¿™ä¸ªæ ¼å¼çš„ä»£ç ï¼Œæˆ‘copyåˆ°äº†magpieé‡Œï¼Œå½»åº•æŠ›å¼ƒshipyardäº†ã€‚ Docker swarmçš„é›†ç¾¤ç®¡ç†æ¦‚å¿µç¼ºå¤±ï¼Œå› ä¸ºdockerä¸€å¼€å§‹è®¾è®¡çš„æ—¶å€™å°±ä¸æ˜¯ç”¨æ¥ç®¡ç†é›†ç¾¤çš„ï¼Œæ‰€ä»¥å‡ºç°äº†swarmï¼Œä½†æ˜¯åªèƒ½ä½¿ç”¨docker-composeæ¥ç¼–æ’æœåŠ¡ï¼Œä½†æ˜¯æ— æ³•åœ¨swarmé›†ç¾¤ä¸­ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„mynetç½‘ç»œï¼Œcompose issue-4233ï¼Œcomposeä¹Ÿå·²ç»è¢«dockerå®˜æ–¹åºŸå¼ƒï¼ˆæœ€è¿‘ä¸€å¹´dockerå‘å±•çš„å¤ªå¿«äº†ï¼ŒåŸæ¥ç”¨pythonå†™çš„composeå·²ç»è¢«ç”¨goé‡æ„ä¸ºlibcomposeç›´æ¥é›†æˆåˆ°swarm modeé‡Œäº†ï¼‰ï¼Œè€Œä¸”docker1.11é‡Œä¹Ÿæ²¡æœ‰åƒkubernetesé‚£æ ·serviceçš„å•ä½ï¼Œåœ¨docker1.11æ‰€æœ‰çš„ç®¡ç†éƒ½æ˜¯åŸºäºdockerå®¹å™¨çš„ã€‚  Docker Swarmçš„é—®é¢˜ä¹Ÿæ˜¯shipyardçš„é—®é¢˜ï¼Œè°è®©shipyardç›´æ¥è°ƒç”¨dockerçš„APIå‘¢ã€‚å½“ç„¶ï¼Œåœ¨åç»­ç‰ˆæœ¬çš„dockeré‡Œä»¥ä¸Šé—®é¢˜éƒ½å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œdockerå·²ç»è¶Šæ¥è¶Šåƒkubernetesï¼Œä¸è®ºæ˜¯åœ¨è®¾è®¡ç†å¿µä¸Šè¿˜æ˜¯åœ¨åŠŸèƒ½ä¸Šï¼Œç”šè‡³è¿˜å‘è¡Œäº†ä¼ä¸šç‰ˆï¼Œä»¥åæ¯ä¸ªæœˆå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ã€‚
æŠ€æœ¯é€‰å‹ ä¸»è¦å¯¹æ¯”Docker1.11å’ŒDocker17.03-ceç‰ˆæœ¬ã€‚
é¦–å…ˆæœ‰ä¸€ç‚¹éœ€è¦äº†è§£çš„æ˜¯ï¼Œdocker1.12+å¸¦æ¥çš„swarm modeï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ç›´æ¥å¯åŠ¨ä¸€ä¸ªå¤æ‚çš„stackï¼Œå…¶ä¸­åŒ…æ‹¬äº†æœåŠ¡ç¼–æ’å’Œæ‰€æœ‰çš„æœåŠ¡é…ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ•ç¥¨åº”ç”¨çš„ä¾‹å­ã€‚
ä¸‹è¡¨å¯¹æ¯”äº†docker1.11å’Œdocker17.03-ce
   ç‰ˆæœ¬ docker1.11 docker17.03-ce     åŸºæœ¬å•ä½ dockerå®¹å™¨ dockerå®¹å™¨ã€serviceã€stack   æœåŠ¡ç¼–æ’ composeï¼Œä¸æ”¯æŒdocker swarmçš„mynetç½‘ç»œ æ”¹é€ åçš„composeï¼Œæ”¯æŒstackä¸­å®Œæ•´çš„æœåŠ¡ç¼–æ’   ç½‘ç»œæ¨¡å‹ Hostã€bridgeã€overlayã€mynet é»˜è®¤æ”¯æŒè·¨ä¸»æœºçš„overlayç½‘ç»œï¼Œåˆ›å»ºå•ä¸ªå®¹å™¨æ—¶ä¹Ÿå¯ä»¥attachåˆ°å·²æœ‰çš„overlaç½‘ç»œä¸­   æ’ä»¶ æ²¡æœ‰æ’ä»¶ç®¡ç†å‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç† æœ‰æ’ä»¶ç®¡ç†å‘½ä»¤ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºå’Œä»docker hubä¸­ä¸‹è½½ï¼Œä¸Šä¼ æ’ä»¶åˆ°è‡ªå·±çš„ç§æœ‰é•œåƒä»“åº“   å‡çº§ ä¸æ”¯æŒå¹³æ»‘å‡çº§ï¼Œé‡å¯dockeråŸæ¥çš„å®¹å™¨ä¹Ÿä¼šåœæ‰ å¯ä»¥åœæ­¢docker engineä½†ä¸å½±å“å·²å¯åŠ¨çš„å®¹å™¨   å¼¹æ€§ä¼¸ç¼© ä¸æ”¯æŒ serviceå†…ç½®åŠŸèƒ½   æœåŠ¡å‘ç° ç›‘å¬docker eventå¢åˆ DNS å†…ç½®æœåŠ¡å‘ç°ï¼Œæ ¹æ®DNSè´Ÿè½½å‡è¡¡   èŠ‚ç‚¹ç®¡ç† æ‰‹åŠ¨å¯åœ ä¸­å¿ƒåŒ–ç®¡ç†nodeèŠ‚ç‚¹   æœåŠ¡å‡çº§ æ‰‹åŠ¨å‡çº§ serviceå†…ç½®åŠŸèƒ½   è´Ÿè½½å‡è¡¡ æœ¬èº«ä¸æ”¯æŒ Swarm modeå†…éƒ¨DNSè½®å¯»    åŸºäºä»¥ä¸Šå¯¹æ¯”ï¼Œä½¿ç”¨docker17.
    <footer>
        <a href='http://rootsongjc.github.io/projects/docker_tech_selection/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/docker-dev-env/">dockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒæ­å»º </a> </h2>
      <div class="post-meta">Mon, Mar 6, 2017 </div>
    </header>

    çœ‹äº†ä¸‹ç½‘ä¸Šå…¶ä»–äººå†™çš„dockerå¼€å‘ç¯å¢ƒæ­å»ºï¼Œè¦ä¹ˆæ˜¯åœ¨ubuntuä¸‹æ­å»ºï¼Œè¦ä¹ˆå°±æ˜¯ä½¿ç”¨å®˜æ–¹è¯´æ˜çš„build docker-devé•œåƒçš„æ–¹å¼ä¸€æ­¥æ­¥æ­å»ºçš„ï¼Œç”šæ˜¯ç¹çï¼Œdocker hubä¸Šæœ‰ä¸€ä¸ªdockerå®˜æ–¹æ¨å‡ºçš„dockercore/dockeré•œåƒï¼Œå…¶å®è¿™å°±æ˜¯å®˜ç½‘ä¸Šæ‰€è¯´çš„docker-devé•œåƒï¼Œä¸è¿‡ä»¥å‰çš„é‚£ä¸ªdeprecatedäº†ï¼Œä½¿ç”¨ç›®å‰è¿™ä¸ªé•œåƒæ­å»ºdockerå¼€å‘ç¯å¢ƒæ˜¯æœ€å¿«æ·çš„äº†ã€‚
æƒ³è¦ä¿®æ”¹dockeræºç å’Œåšdockerå®šåˆ¶å¼€å‘çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹ã€‚
å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£ï¼šhttps://docs.docker.com/opensource/code/
è®¾ç½®dockerå¼€å‘ç¯å¢ƒï¼šhttps://docs.docker.com/opensource/project/set-up-dev-env/
dockerçš„ç¼–è¯‘å®è´¨ä¸Šæ˜¯åœ¨dockerå®¹å™¨ä¸­è¿è¡Œdockerã€‚
å› æ­¤åœ¨æœ¬åœ°ç¼–è¯‘dockerçš„å‰ææ˜¯éœ€è¦å®‰è£…äº†dockerï¼Œè¿˜éœ€è¦ç”¨gitæŠŠä»£ç pullä¸‹æ¥ã€‚
åˆ›å»ºåˆ†æ”¯ ä¸ºäº†æ–¹ä¾¿ä»¥åç»™dockeræäº¤æ›´æ”¹ï¼Œæˆ‘ä»¬ä»dockerå®˜æ–¹forkä¸€ä¸ªåˆ†æ”¯ã€‚
git clone https://github.com/rootsongjc/docker.git git config --local user.name &quot;Jimmy Song&quot; git config --local user.email &quot;rootsongjc@gmail.com&quot; git remote add upstream https://github.com/docker/docker.git git config --local -l git remote -v git checkout -b dry-run-test touch TEST.md vim TEST.md git status git add TEST.md git commit -am &quot;Making a dry run test.&quot; git push --set-upstream origin dry-run-test  ç„¶åå°±å¯ä»¥åœ¨dry-run-testè¿™ä¸ªåˆ†æ”¯ä¸‹å·¥ä½œäº†ã€‚
é…ç½®dockerå¼€å‘ç¯å¢ƒ å®˜ç½‘ä¸Šè¯´éœ€è¦å…ˆæ¸…ç©ºè‡ªå·±ç”µè„‘ä¸Šå·²æœ‰çš„å®¹å™¨å’Œé•œåƒã€‚
dockerå¼€å‘ç¯å¢ƒæœ¬è´¨ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªdockeré•œåƒï¼Œé•œåƒé‡ŒåŒ…å«äº†dockerçš„æ‰€æœ‰å¼€å‘è¿è¡Œç¯å¢ƒï¼Œæœ¬åœ°ä»£ç é€šè¿‡æŒ‚è½½çš„æ–¹å¼æ”¾åˆ°å®¹å™¨ä¸­è¿è¡Œï¼Œä¸‹é¢è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºè¿™æ ·ä¸€ä¸ªé•œåƒã€‚
åœ¨dry-run-teståˆ†æ”¯ä¸‹æ‰§è¡Œ
make BIND_DIR=.
    <footer>
        <a href='http://rootsongjc.github.io/blogs/docker-dev-env/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/talks/cloud-native-go/">cloud native go </a> </h2>
      <div class="post-meta">Fri, Mar 3, 2017 </div>
    </header>

    æœ€è¿‘åœ¨ç¿»è¯‘Kevin Hoffmanå’ŒDan Nemethçš„ä¹¦ã€ŠCloud Native Goã€‹ã€‚é¢„è®¡æœ¬æœˆå°†å®Œæˆï¼Œå°†ç”±ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾å‡ºç‰ˆã€‚
    <footer>
        <a href='http://rootsongjc.github.io/talks/cloud-native-go/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/docker-service-discovery/">docker service discovery </a> </h2>
      <div class="post-meta">Mon, Feb 27, 2017 </div>
    </header>

    Prior to Docker 1.12 release, setting up Swarm cluster needed some sort ofÂ service discovery backend. There are multiple discovery backends available like hosted discovery service, using a static file describing the cluster, etcd, consul, zookeeper or using static list of IP address.

Thanks to Docker 1.12 Swarm Mode, we donâ€™t have to depend upon these external tools and complex configurations.Â Docker Engine 1.12Â runs itâ€™s own internal DNS service to route services by name.
    <footer>
        <a href='http://rootsongjc.github.io/blogs/docker-service-discovery/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
        <article class="post">
    <header>
      <h2><a href="http://rootsongjc.github.io/blogs/docker-embedded-dns/">docker embedded dns </a> </h2>
      <div class="post-meta">Mon, Feb 27, 2017 </div>
    </header>

    æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Dockerå®¹å™¨çš„DNSé…ç½®åŠå…¶æ³¨æ„ç‚¹ï¼Œé‡ç‚¹å¯¹docker 1.10å‘å¸ƒçš„embedded DNS serverè¿›è¡Œäº†æºç åˆ†æï¼Œçœ‹çœ‹embedded DNS serveråˆ°åº•æ˜¯ä¸ªå•¥ï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
Configure container DNS DNS in default bridge network    Options Description     -h HOSTNAME or â€“hostname=HOSTNAME åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†HOSTNAMEè®¾ç½®åˆ°å®¹å™¨å†…çš„/etc/hosts, /etc/hostname, /bin/bashæç¤ºä¸­ã€‚   â€“link=CONTAINER_NAME or ID:ALIAS åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†ALIASå’ŒCONTAINER_NAME/IDå¯¹åº”çš„å®¹å™¨IPæ·»åŠ åˆ°/etc/hosts. å¦‚æœ CONTAINER_NAME/IDæœ‰å¤šä¸ªIPåœ°å€ ï¼Ÿ   â€“dns=IP_ADDRESSâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†nameserver IP_ADDRESSæ·»åŠ åˆ°å®¹å™¨å†…çš„/etc/resolv.confä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚   â€“dns-search=DOMAINâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†DOMAINæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confçš„dns searchåˆ—è¡¨ä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚   â€“dns-opt=OPTIONâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†OPTIONæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confä¸­çš„optionsé€‰é¡¹ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚     è¯´æ˜ï¼š
 å¦‚æœdocker runæ—¶ä¸å«--dns=IP_ADDRESS..., --dns-search=DOMAIN..., or --dns-opt=OPTION...å‚æ•°ï¼Œdocker daemonä¼šå°†copyæœ¬ä¸»æœºçš„/etc/resolv.confï¼Œç„¶åå¯¹è¯¥copyè¿›è¡Œå¤„ç†ï¼ˆå°†é‚£äº›/etc/resolv.confä¸­pingä¸é€šçš„nameserveré¡¹ç»™æŠ›å¼ƒï¼‰,å¤„ç†å®Œæˆåç•™ä¸‹çš„éƒ¨åˆ†å°±ä½œä¸ºè¯¥å®¹å™¨å†…éƒ¨çš„/etc/resolv.confã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åˆ©ç”¨å®¿ä¸»æœºä¸­çš„/etc/resolv.confé…ç½®çš„nameserverè¿›è¡ŒåŸŸåè§£æï¼Œé‚£ä¹ˆä½ éœ€è¦å®¿ä¸»æœºä¸­è¯¥dns serviceé…ç½®ä¸€ä¸ªå®¿ä¸»æœºå†…å®¹å™¨èƒ½pingé€šçš„IPã€‚ å¦‚æœå®¿ä¸»æœºçš„/etc/resolv.confå†…å®¹å‘ç”Ÿæ”¹å˜ï¼Œdocker daemonæœ‰ä¸€ä¸ªå¯¹åº”çš„file change notifierä¼šwatchåˆ°è¿™ä¸€å˜åŒ–ï¼Œç„¶åæ ¹æ®å®¹å™¨çŠ¶æ€é‡‡å–å¯¹åº”çš„æªæ–½ï¼š  å¦‚æœå®¹å™¨çŠ¶æ€ä¸ºstoppedï¼Œåˆ™ç«‹åˆ»æ ¹æ®å®¿ä¸»æœºçš„/etc/resolv.
    <footer>
        <a href='http://rootsongjc.github.io/blogs/docker-embedded-dns/'><nobr>Read more â†’</nobr></a>
    </footer>
</article>

    
  </div>
</section>

<aside id="meta"> </aside>

<footer>
  <div>
    <p>
    &copy; 2013-2017 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Jimmy Song</span></span>
    Powered by <a href="http://gohugo.io">Hugo</a>.
    </p>
  </div>
</footer>
<script type="text/javascript">
(function(){var j=function(a,b){return window.getComputedStyle?getComputedStyle(a).getPropertyValue(b):a.currentStyle[b]};var k=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent('on'+b,c)};var l=function(a,b){for(key in b)if(b.hasOwnProperty(key))a[key]=b[key];return a};window.fitText=function(d,e,f){var g=l({'minFontSize':-1/0,'maxFontSize':1/0},f);var h=function(a){var b=e||1;var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(b*10),parseFloat(g.maxFontSize)),parseFloat(g.minFontSize))+'px'};c();k(window,'resize',c)};if(d.length)for(var i=0;i<d.length;i++)h(d[i]);else h(d);return d}})();
fitText(document.getElementById('title'), 1)
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-7131036-1', 'rootsongj.github.io');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
</body>
</html>

