<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>å…¶ä»– Â· Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="å®‹å‡€è¶…çš„åšå®¢">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.129.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.10cc29dc94114b03907db3131a2a0b871735964d59cce9d69637f50ea22698ae.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.10cc29dc94114b03907db3131a2a0b871735964d59cce9d69637f50ea22698ae.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/categories/%E5%85%B6%E4%BB%96/" />
  <meta property="og:title" content="å…¶ä»– | Jimmy Song" />
  <meta property="twitter:title" content="å…¶ä»– | Jimmy Song" />

  
  <meta property="og:description" content="å®‹å‡€è¶…çš„åšå®¢" />
  <meta property="twitter:description" content="å®‹å‡€è¶…çš„åšå®¢" />

  
  <meta property="og:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />
  <meta property="twitter:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">åšå®¢</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">èµ„æ–™</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">æ ‡ç­¾</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">å…¬å‘Š</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">è”ç³»</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">å…³äº</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/community/">ç¤¾åŒº</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">è§†é¢‘ <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>æœç´¢</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">âŒ˜</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>ç«™å†…æœç´¢</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="å…³é—­"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="è¯·è¾“å…¥æœç´¢è¯" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="è¯·è¾“å…¥æœç´¢è¯">
        
        <div class="mt-4">
          <span>æœç´¢ç±»å‹: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">æ‰€æœ‰</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">åŸåˆ›</label>
              <input type="radio" id="trans" name="search_type" value="trans">
              <label for="trans">è¯‘æ–‡</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">èµ„æ–™</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">å…¬å‘Š</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    å…¶ä»–
                </p>
                <p class="page-description">
                    
                </p>
                
            </div>
        </div>
    </div>
</section>

        


<section class="section-sm book-list-section bg-gray">
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          
          
          
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/application-traffic-with-ebpf/">[è¯‘] ç”¨ eBPF æ´å¯Ÿåº”ç”¨å±‚ç½‘ç»œæµé‡</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/01/10</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thebsdbox.co.uk/2023/12/08/Application-traffic-with-eBPF/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ç”¨ eBPF æ´å¯Ÿåº”ç”¨å±‚ç½‘ç»œæµé‡', 'æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ eBPF ç¨‹åºæ•è·ã€åˆ†æå’Œä¿®æ”¹åº”ç”¨å±‚çš„ç½‘ç»œæ•°æ®ï¼ŒåŒ…æ‹¬ HTTP å¤´éƒ¨å’Œ URL è·¯å¾„ã€‚ä½œè€…è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ eBPF map åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´ä¼ é€’æ•°æ®ã€‚', 'åœ¨[å…ˆå‰çš„å¸–å­](..\/ebpf-adventures-in-networking\/)ä¸­ï¼Œæˆ‘ç¨å¾®è°ˆåˆ°äº†å»ºç«‹ eBPF çŸ¥è¯†ï¼Œä»¥å¼€å§‹æ›´å¤šåœ°äº†è§£ç½‘ç»œé€‚é…å™¨çš„è¾“å…¥å’Œè¾“å‡ºæƒ…å†µã€‚åŸºæœ¬ä¸Šï¼Œå°†ä»¥å¤ªç½‘å¸§å¹¶å‰¥ç¦»æ ‡å¤´ï¼ˆä»¥å¤ªç½‘æ ‡å¤´\u002bIP æ ‡å¤´\u002bTCP\/UDP æ ‡å¤´ï¼‰ï¼Œæœ€ç»ˆä½ å°†å¾—åˆ°æ¥è‡ªåº”ç”¨ç¨‹åºæˆ–æ•°æ®è§’åº¦çš„æ•°æ®åŒ…ä¸­å‰©ä½™çš„å†…å®¹ã€‚\n\næ‰€æœ‰çš„ä»£ç éƒ½åœ¨â€œå­¦ä¹  eBPFâ€å­˜å‚¨åº“ä¸­ï¼Œå…·ä½“çš„ eBPF ä»£ç åœ¨[è¿™é‡Œ](https:\/\/github.com\/thebsdbox\/learning-ebpf\/blob\/main\/ebpf\/http\/http.c)ã€‚è¿™ç¯‡æ–‡ç« çš„è®¡åˆ’æ˜¯é€æ­¥ä»‹ç»æˆ‘è®¤ä¸ºæœ‰ç”¨æˆ–å¯èƒ½é‡è¦çš„éƒ¨åˆ†...\n\n**æ³¨æ„**ï¼šæ­¤ä»£ç ç¡®å®å¯¹å…¥å£\/å‡ºå£æ•°æ®åŒ…è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå› æ­¤éœ€è¦ 6.1\u002b çš„ Linux å†…æ ¸æ‰èƒ½ä½¿ç”¨ä¸€äº› eBPF åŠ©æ‰‹å‡½æ•°ã€‚\n\n## æ˜ å°„ï¼\n\nä½ å¯èƒ½ä»¥å‰é‡åˆ°è¿‡è¿™äº›å§ï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œä¸ç”¨æ‹…å¿ƒï¼ç®€è€Œè¨€ä¹‹ï¼ŒeBPF æ˜ å°„æ˜¯åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ä¸­çš„ eBPF ç¨‹åºä¹‹é—´é€šä¿¡çš„æœºåˆ¶ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œéå¸¸é…·çš„ä¸€ç‚¹æ˜¯è¿™äº›æ˜ å°„ä½¿ç”¨é”®å’Œå€¼...æ‰€ä»¥æˆ‘ä¸å¿…å¾ªç¯æ¯”è¾ƒæ•°æ®å¹¶å¯»æ‰¾åŒ¹é…çš„å†…å®¹ï¼Œæˆ‘ä¼ é€’ä¸€ä¸ªé”®ï¼Œå¦‚æœæœ‰åŒ¹é…çš„å†…å®¹ï¼Œæˆ‘å°±å¾—åˆ°ç›¸åº”çš„æ•°æ®:D\n\nä¸‹é¢æ˜¯æˆ‘å°†è¦ä½¿ç”¨çš„æ˜ å°„ï¼Œç§°ä¸º\u0060url_map\u0060ï¼Œé”®æ˜¯ 20 ä¸ªå­—ç¬¦é•¿ï¼ˆå¯ä»¥è¯´æ˜¯æœ‰ç•Œçš„â€œå­—ç¬¦ä¸²â€ï¼‰ï¼Œåˆ†é…ç»™è¯¥é”®çš„å€¼æ˜¯æˆ‘åœ¨ä¸Šé¢å®šä¹‰çš„ç»“æ„ä½“ã€‚\n\n\u0060\u0060\u0060\n\/\/ å®šä¹‰ä¸é”®å…³è”çš„ä¸åŒURL\nstruct url_path {\n  __u8 path_len;\n  __u8 path[max_path_len]; \/\/ è¿™åº”è¯¥æ˜¯ä¸€ä¸ªcharï¼Œä½†åœ¨è¿™é‡Œå’ŒGoä¹‹é—´çš„ä»£ç ç”Ÿæˆæœ‰ç‚¹ä¸åŒ...\n};\n\n\/\/ å®šä¹‰æˆ‘çš„URLæ˜ å°„\nstruct {\n  __uint(type, BPF_MAP_TYPE_HASH);\n  __uint(max_entries, 1024);\n  __type(key, char[max_path_len]);\n  __type(value, struct url_path);\n}\nurl_map SEC(\u0022.maps\u0022);\n\u0060\u0060\u0060\n\n## eBPF ç¨‹åºï¼\n\nä»£ç ä¸­å®šä¹‰äº†ä¸¤ä¸ª eBPF ç¨‹åº\u0060tc_egress\u0060å’Œ\u0060tc_ingress\u0060ï¼Œå¦‚æœä½ èƒ½çŒœåˆ°å®ƒä»¬æ˜¯å¦‚ä½•è¿æ¥çš„ï¼Œé‚£å°±åŠ åˆ†ï¼åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨\u0060tc_ingress\u0060ç¨‹åºã€‚\n\nå°±åƒæˆ‘ä»¬åœ¨å·²ç»å­˜åœ¨çš„ä¼—å¤šç¤ºä¾‹ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ ‡å¤´è¯†åˆ«çš„æ“ä½œã€‚\n\n1. è¿›è¡Œåˆç†æ€§æ£€æŸ¥ï¼Œå¹¶å°†\u0060data\u0060å¼ºåˆ¶è½¬æ¢ä¸º\u0060ethhdr\u0060ç±»å‹ï¼ˆ[ä»¥å¤ªç½‘æ ‡å¤´](https:\/\/en.wikipedia.org\/wiki\/Ethernet_frame)ï¼‰ã€‚\n2. é€šè¿‡è¯»å–ä»¥å¤ªç½‘æ ‡å¤´å†…éƒ¨çš„\u0060h_proto\u0060ï¼ˆä¹Ÿç§°ä¸º\u0060Ethertype\u0060ï¼‰æ¥æŸ¥æ‰¾ä»¥å¤ªç½‘å¸§å†…éƒ¨çš„åè®®ã€‚\n3. å°†ä»¥å¤ªç½‘æ ‡å¤´åçš„æ•°æ®å¼ºåˆ¶è½¬æ¢ä¸º\u0060iphdr\u0060ç±»å‹ï¼ˆ[IP æ ‡å¤´](https:\/\/en.wikipedia.org\/wiki\/Internet_Protocol_version_4#Header)ï¼‰ã€‚\n4. åœ¨ IP æ ‡å¤´å†…æŸ¥æ‰¾åè®®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¡®å®š IP æ ‡å¤´çš„å¤§å°ï¼ˆåŸæ¥å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å¤§å°ï¼\u0060Â¯\\_(ãƒ„)_\/Â¯\u0060ï¼‰ã€‚\n5. ä¸ºäº†ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼Œæˆ‘ä»¬å°†å…¶å€¼ä¹˜ä»¥å››ï¼Œä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆï¼å¥½å§ï¼Œè¿™ä¸ªå€¼ä¹˜ä»¥ 32 ä½ä»¥ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼Œæ‰€ä»¥å¦‚æœå€¼ä¸º 6ï¼Œé‚£ä¹ˆæ ‡å¤´å°†æ˜¯ 192 ä½ï¼ˆæˆ– 24 å­—èŠ‚ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ç®€å•åœ°ç¡®å®š IP æ ‡å¤´çš„å­—èŠ‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå€¼ä¹˜ä»¥ 4ï¼\n6. å°†ä»¥ IP æ ‡å¤´åçš„æ•°æ®å¼ºåˆ¶è½¬æ¢ä¸º\u0060tcphdr\u0060ç±»å‹ï¼ˆ[TCP æ ‡å¤´](https:\/\/en.wikipedia.org\/wiki\/Transmission_Control_Protocol#TCP_segment_structure)ï¼‰ã€‚\n7. åƒæ­¥éª¤ï¼ˆ5ï¼‰ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š TCP æ ‡å¤´çš„å¤§å°ï¼ˆå®ƒä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„ï¼‰ï¼Œåœ¨è¿™é‡Œçš„æ­¥éª¤ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å€¼\u0060doff\u0060ä¹˜ä»¥å››æ¥ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚\n8. é€šè¿‡è®¡ç®—æ‰€æœ‰è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ¨æ–­å‡ºæ•°æ®ä½äºä»¥å¤ªç½‘æ ‡å¤´å¤§å°ã€IP æ ‡å¤´å¤§å°å’Œ TCP æ ‡å¤´å¤§å°çš„æœ«å°¾ã€‚\n9. æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä» IP æ ‡å¤´ä¸­å‡å» IP å’Œ TCP æ ‡å¤´çš„å¤§å°æ¥ç¡®å®šåº”ç”¨ç¨‹åºæ•°æ®çš„å¤§å°ï¼Œä½¿ç”¨\u0060tot_len\u0060ï¼ˆæ€»é•¿åº¦ï¼‰ã€‚\n\n### åº”ç”¨æ•°æ®ï¼ï¼\n\nä¸ºäº†è¯»å–è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸Šé¢æåˆ°çš„ä¸€äº›ä¸œè¥¿ï¼\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ•°æ®åç§»é‡ï¼ˆæ•°æ®èµ·å§‹ä½ç½®ï¼‰ï¼Œå®ƒä½äºä»¥å¤ªç½‘æ ‡å¤´\u002bIP æ ‡å¤´å¤§å°ï¼ˆä¸€æ—¦è®¡ç®—å‡ºæ¥ï¼‰å’Œ TCP æ ‡å¤´ï¼ˆå†æ¬¡ï¼Œä¸€æ—¦è®¡ç®—å‡ºæ¥ï¼‰ä¹‹åã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç¼“å†²åŒºæ¥å­˜å‚¨æˆ‘ä»¬å°†ä»å¥—æ¥å­—ç¼“å†²åŒºä¸­è¯»å–çš„æ•°æ®ã€‚\n\n\u0060\u0060\u0060c\n\/\/ ç”¨äºå­˜å‚¨æˆ‘ä»¬åº”ç”¨ç¨‹åºæ•°æ®çš„æ•°æ®ç¼“å†²åŒº\nchar pdata[60];\n\n\/\/ è®¡ç®—æ•°æ®å®é™…ä½ç½®çš„åç§»é‡\npoffset = ETH_HLEN \u002b ip_hlen \u002b tcp_hlen;\n\n\/\/ ä»å¥—æ¥å­—ç¼“å†²åŒºåŠ è½½æ•°æ®ï¼Œpoffset ä» TCP æ ‡å¤´çš„æœ«å°¾å¼€å§‹\nint ret = bpf_skb_load_bytes(skb, poffset, pdata, 60);\nif (ret != 0) {\n   return 0;\n}\n\u0060\u0060\u0060\n\næˆ‘ä»¬ä½¿ç”¨\u0060bpf_skb_load_bytes\u0060ä»å¥—æ¥å­—ç¼“å†²åŒºï¼ˆ\u0060skb\u0060ï¼‰ä¸­è¯»å–ä¸€å®šé‡çš„æ•°æ®ï¼ˆ60 ä¸ªå­—èŠ‚ï¼‰åˆ°æˆ‘ä»¬çš„ç¼“å†²åŒºï¼ˆ\u0060pdata\u0060ï¼‰ï¼Œèµ·å§‹ä½ç½®æ˜¯æˆ‘ä»¬çŸ¥é“æ•°æ®ä½äºçš„åç§»é‡ï¼ˆ\u0060poffset\u0060ï¼‰ï¼\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬æœ‰äº† 60 å­—èŠ‚çš„æ•°æ®ï¼Œåº”è¯¥è¶³å¤Ÿè®©æˆ‘ä»¬ç¼–å†™ä¸€äº›ä»£ç æ¥ç†è§£å®ƒã€‚\n\n### HTTP æ•°æ® :-)\n\nè®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å°è¯•è¿›è¡Œ HTTP è¯·æ±‚æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼\n\n\u0060\u0060\u0060plaintext\n ~ curl code\/test -vvv\n*   Trying 192.168.0.22:80...\n* Connected to code (192.168.0.22) port 80 (#0)\n\u003e GET \/test HTTP\/1.1\n\u003e Host: code\n\u003e User-Agent: curl\/7.87.0\n\u003e Accept: *\/*\n\n...\n\u0060\u0060\u0060\n\næˆ‘æ­£åœ¨ä½¿ç”¨\u0060curl\u0060ä»ä¸»æœº\u0060code\u0060ï¼ˆcode æ˜¯æˆ‘çš„å¼€å‘ VMï¼Œè¿è¡Œ code-serverï¼‰è¯·æ±‚ URL \u0060\/test\u0060ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼ˆæ¯è¡Œä»¥\u0060\u003e\u0060å¼€å¤´ï¼Œç”¨äºç¡®å®šé€šä¿¡çš„æ–¹å‘ï¼‰ã€‚HTTP è¯·æ±‚ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®é€šå¸¸æ˜¯ä¸€ä¸ª*åŠ¨è¯*ï¼Œåé¢æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ä¹‹äº¤äº’çš„èµ„æºï¼Œç„¶åæ˜¯ HTTP è§„èŒƒå’Œå›è½¦ç¬¦ï¼Œå¦‚[HTTP æ ‡å‡†](https:\/\/en.wikipedia.org\/wiki\/HTTP#HTTP\/1.1_request_messages)ä¸­å®šä¹‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å…³å¿ƒçš„è¡Œæ˜¯\u0060GET \/test\u0060ï¼ˆåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬\/æˆ‘ä¸å¤ªå…³å¿ƒ HTTP è§„èŒƒ:Dï¼‰ã€‚\n\nç¬¬ä¸€æ­¥æ˜¯è¯»å–\u0060pdata\u0060çš„å‰ä¸‰ä¸ªå­—ç¬¦ï¼ŒæŸ¥æ‰¾\u0060pdata[0] == G\u0060ï¼Œ\u0060pdata[1] == E\u0060å’Œ\u0060pdata[2] == T\u0060ï¼Œè¿™å°†æœ‰æ•ˆåœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šé¦–å…ˆæ˜¯å¦æ˜¯ HTTP è¯·æ±‚ï¼Œç‰¹åˆ«æ˜¯æ˜¯å¦æ˜¯ HTTP è¯·æ±‚ï¼\n\nä¸€æ—¦æˆ‘ä»¬éªŒè¯äº†è¿™å‰ 3 ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬å°†æƒ³è¦ä»ç¬¬ 4 ä¸ªå­—èŠ‚ï¼ˆè¯·æ±‚çš„å‰ä¸‰ä¸ªå­—èŠ‚åŠ ä¸Šä¸€ä¸ªç”¨äºåˆ†éš”çš„ç©ºæ ¼ï¼‰å¼€å§‹è¯»å–æ›´å¤šæ•°æ®ï¼\n\n\u0060\u0060\u0060c\nchar path[max_path_len];\nmemset(\u0026path, 0, sizeof(path));\n\nint path_len = 0;\n\n\/\/ æŸ¥æ‰¾è¯·æ±‚ URIï¼ˆä»åç§»é‡ 4 å¼€å§‹ï¼‰ï¼Œä»¥ç©ºæ ¼ç»“æŸ\nfor (int i = 4; i \u003c sizeof(pdata) ; i\u002b\u002b)\n{\n    if (pdata[i] != \u0027 \u0027) {\n        path[i-4] = pdata[i];\n    } else {\n        path[i-4] = \u0027\\0\u0027;\n        path_len = i-4;\n        break;\n    }\n}\n\u0060\u0060\u0060\n\nä¸Šé¢çš„å‡½æ•°å°†ä» HTTP æ•°æ®çš„ç¬¬ 4 ä¸ªå­—èŠ‚å¼€å§‹ï¼ˆä»ç¬¬ 4 ä¸ªå­—èŠ‚å¼€å§‹ï¼‰è¯»å–å…¶ä½™çš„æ•°æ®ï¼Œç›´åˆ°é‡åˆ°ç©ºæ ¼ä¸ºæ­¢ï¼Œç•™ä¸‹æˆ‘ä»¬è¦\u0060GET\u0060çš„ URLï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªè°ƒè¯•æ‰“å°è¯­å¥æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼š\n\n\u0060\u0060\u0060c\nbpf_printk(\u0022\u003c- incoming path [%s], length [%d]\u0022, path, path_len);\n\u0060\u0060\u0060\n\nè¿™å°†åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºå¦‚ä¸‹ï¼š\n\n\u0060\u0060\u0060plaintext\n\u003cidle\u003e-0       [001] dNs3. 2252901.017812: bpf_trace_printk: \u003c- incoming path [\/test], length [5]\n\u0060\u0060\u0060\n\n### å¯¹ HTTP åº”ç”¨ç¨‹åºè¯·æ±‚é‡‡å–è¡ŒåŠ¨\n\nä¸Šè¿°è§£é‡Šè¯¦ç»†è¯´æ˜äº†æˆ‘ä»¬å¦‚ä½•è¯»å–æ•°æ®ä»¥åŠå¦‚ä½•è¯»å–æ•°æ®ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦â€œåŠ¨æ€â€æŸ¥æ‰¾ HTTP è¯·æ±‚ï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨ eBPF æ˜ å°„ã€‚\n\nåœ¨æˆ‘ä»¬çš„ Go ç”¨æˆ·ç©ºé—´ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n\n\u0060\u0060\u0060go\npath := flag.String(\u0022path\u0022, \u0022\u0022, \u0022The URL Path to watch for\u0022)\nflag.Parse()\n\n\/\/ ...\n\n\/\/ åˆ›å»ºä¸€ä¸ª uint8 æ•°ç»„\nvar urlPath [20]uint8\n\/\/ å°†æˆ‘ä»¬çš„å­—èŠ‚å¤åˆ¶åˆ° uint8 æ•°ç»„ä¸­ï¼ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œç±»å‹è½¬æ¢ï¼‰\ncopy(urlPath[:], *path)\n\n\/\/ å°†æˆ‘ä»¬çš„ urlPath ä½œä¸ºé”®\nerr = objs.UrlMap.Put(urlPath,\n  bpfUrlPath{\n    Path:    urlPath,\n    PathLen: uint8(len(urlPath)),\n  })\nif err != nil {\n  panic(err)\n}\n\u0060\u0060\u0060\n\næ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç ä¸­çœ‹åˆ°çš„ï¼Œå½“æˆ‘ä»¬å¯åŠ¨ Go ç¨‹åºæ—¶ï¼Œå®ƒå°†ä»æ ‡å¿—\u0060-path\u0060ä¸­è¯»å–ï¼Œå¹¶å°†å…¶ç”¨ä½œæˆ‘ä»¬ eBPF æ˜ å°„ä¸­çš„**é”®**ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥å€¼ã€‚\n\n\u0060\u0060\u0060c\nstruct url_path *found_path = bpf_map_lookup_elem(\u0026url_map, path);\nif (found_path \u003e 0) {\n    bpf_printk(\u0022Looks like we\u0027ve found your path [%s]\u0022, path);\n    \/\/ å¯èƒ½è¿›è¡Œæ›´å¤šæ“ä½œï¼Œé˜»æ­¢æµé‡æˆ–é‡å®šå‘ï¼Ÿ\n}\n\u0060\u0060\u0060\n\nåœ¨æˆ‘ä»¬çš„ eBPF ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ HTTP è¯·æ±‚è¿›è¡Œæ˜ å°„æŸ¥æ‰¾ï¼Œå¦‚æœè¯¥è¯·æ±‚ä½œä¸º char æ•°ç»„å­˜åœ¨äº**é”®**ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œæ“ä½œï¼\n\nç°åœ¨å¯åŠ¨æˆ‘ä»¬çš„ Go ç¨‹åº \u0060sudo .\/http -interface ens160 -path \/test\u0060 å°†å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š\n\n\u0060\u0060\u0060plaintext\nINFO[0000] Starting ğŸ the eBPF HTTP watcher, on interface [ens160] for path [\/test]\nINFO[0000] Loaded TC QDisc\nINFO[0000] Press Ctrl-C to exit and remove the program\n          \u003cidle\u003e-0       [001] d.s3. 2252901.015575: bpf_trace_printk: \u003c- 0.0.0.0:56345 -\u003e 0.0.0.0:80\n          \u003cidle\u003e-0       [001] D.s3\n\n. 2252901.015642: bpf_trace_printk: -\u003e 192.168.0.22:80 -\u003e 192.168.0.180:56345\n          \u003cidle\u003e-0       [001] d.s3. 2252901.017552: bpf_trace_printk: \u003c- 0.0.0.0:56345 -\u003e 0.0.0.0:80\n          \u003cidle\u003e-0       [001] d.s3. 2252901.017793: bpf_trace_printk: \u003c- 0.0.0.0:56345 -\u003e 0.0.0.0:80\n          \u003cidle\u003e-0       [001] dNs3. 2252901.017812: bpf_trace_printk: \u003c- incoming path [\/test], length [5]\n          \u003cidle\u003e-0       [001] dNs3. 2252901.017814: bpf_trace_printk: Looks like we\u0027ve found your path [\/test]\n\u0060\u0060\u0060\n\n## ç»“è®º\n\nè§£æ HTTP å¹¶ä¸å¤ªå›°éš¾ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„åè®®ï¼Œå®ƒä½¿ç”¨ç®€å•çš„åŠ¨è¯å’Œç»“æ„çš„ç®€å•æ–¹æ³•ï¼Œä½¿ç”¨ç©ºæ ¼å’Œå›è½¦ç¬¦æ¥åŒºåˆ†ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä¹Ÿé€‚ç”¨äºå…¶ä»–åè®®ï¼Œå¦‚ DNSã€POP3 æˆ– SMTPã€‚å½“æ•°æ®åŠ å¯†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§è§£å¯†çš„æ–¹æ³•ï¼Œç„¶åæ‰èƒ½è§£ææ•°æ®ï¼ˆè¿™è¶…å‡ºäº†æˆ‘çš„èƒ½åŠ›...ï¼‰ã€‚ä½†æ˜¯ï¼Œæˆ‘å¸Œæœ›è¿™ä¼šæ¿€å‘ä½ æ›´å¤šåœ°å°è¯•ä½¿ç”¨ eBPF æ¥è§£æå’Œæ“ä½œåº”ç”¨ç¨‹åºçš„æƒ³æ³•ï¼\n\næˆ‘ä¸€ç›´æƒ³å†™ä¸€äº›æœ‰å¸Œæœ›æœ‰ç”¨çš„å…³äº eBPF çš„å¸–å­ï¼Œå°½ç®¡é€šå¸¸åœ¨æˆ‘æƒ³å‡ºå¯èƒ½æœ‰ç”¨çš„ä¸œè¥¿ä¹‹åï¼Œåˆ«äººå·²ç»æŠ¢å…ˆä¸€æ­¥ã€‚é‰´äºæˆ‘å·²ç»åœ¨ä¸€æ®µæ—¶é—´é‡Œä»¥æŸç§æ–¹å¼å…³æ³¨ç½‘ç»œï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æˆ‘å…³æ³¨çš„é¢†åŸŸï¼Œå°½ç®¡æˆ‘ç¡®å®ä¸ºæœ€è¿‘çš„ eBPF å³°ä¼š 2023 ç¼–å†™äº†ä¸€äº›æœ‰è¶£çš„å†…å®¹ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæœ‰å¾ˆå¤šäººå¼€å§‹æ’°å†™ eBPF å†…å®¹ï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šå‚è€ƒä»–ä»¬çš„å¸–å­ï¼Œè€Œä¸æ˜¯é‡å¤å†…å®¹ã€‚\n', '\/trans\/application-traffic-with-ebpf\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ eBPF ç¨‹åºæ•è·ã€åˆ†æå’Œä¿®æ”¹åº”ç”¨å±‚çš„ç½‘ç»œæ•°æ®ï¼ŒåŒ…æ‹¬ HTTP å¤´éƒ¨å’Œ URL è·¯å¾„ã€‚ä½œè€…è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ eBPF map åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/ebpf-adventures-in-networking/">[è¯‘] å¦‚ä½•ç”¨ eBPF æ”¹å˜ç½‘ç»œç¼–ç¨‹çš„æ¸¸æˆè§„åˆ™</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/01/10</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thebsdbox.co.uk/2023/11/18/eBPF-adventures-in-networking/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('å¦‚ä½•ç”¨ eBPF æ”¹å˜ç½‘ç»œç¼–ç¨‹çš„æ¸¸æˆè§„åˆ™', 'è¿™ç¯‡æ–‡ç« ä»‹ç»äº† eBPF åœ¨ç½‘ç»œé¢†åŸŸçš„ä¸€äº›åº”ç”¨å’Œå®è·µï¼ŒåŒ…æ‹¬ XDPã€TC å’Œ sysprobes ä¸‰ç§ä¸åŒçš„ eBPF ç¨‹åºæŒ‚è½½æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ eBPF å®ç°ç½‘ç»œæ•°æ®çš„æ•è·ã€åˆ†æå’Œä¿®æ”¹ã€‚ä½œè€…è¿˜åˆ†äº«äº†ä¸€äº›æœ‰ç”¨çš„ eBPF å·¥å…·å’Œèµ„æºï¼Œä»¥åŠè‡ªå·±å¼€å‘çš„ä¸€ä¸ª eBPF ç½‘ç»œä»£ç†çš„é¡¹ç›®ã€‚', '\næˆ‘ä¸€ç›´æƒ³å†™ä¸€äº›å…³äº eBPF çš„å¸–å­ï¼Œå¸Œæœ›å®ƒä»¬èƒ½æœ‰æ‰€å¸®åŠ©ï¼Œå°½ç®¡é€šå¸¸åœ¨æˆ‘æƒ³åˆ°å¯èƒ½æœ‰ç”¨çš„ä¸œè¥¿æ—¶ï¼Œå…¶ä»–äººå·²ç»å…ˆæˆ‘ä¸€æ­¥äº†ã€‚é‰´äºæˆ‘å·²ç»åœ¨ç½‘ç»œæ–¹é¢é›†ä¸­ç²¾åŠ›ä¸€æ®µæ—¶é—´ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æˆ‘ä¸“æ³¨çš„é¢†åŸŸï¼Œå°½ç®¡æˆ‘ç¡®å®è®¾æ³•ä¸ºæœ€è¿‘çš„ eBPF å³°ä¼š 2023 å‡†å¤‡äº†ä¸€äº›æˆ‘è®¤ä¸ºå¾ˆæœ‰è¶£çš„ä¸œè¥¿ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæœ‰å¾ˆå¤šäººå¼€å§‹æ’°å†™å…³äº eBPF çš„å†…å®¹ï¼Œå› æ­¤æˆ‘å¯èƒ½ä¼šå‚è€ƒä»–ä»¬çš„å¸–å­ï¼Œè€Œä¸æ˜¯é‡å¤å†…å®¹ã€‚\n\næˆ‘å°†ä»ä¸€äº›åœ¨ Linux å†…æ ¸ä¸­å¯èƒ½æˆ–å¯èƒ½ä¸ä¼šé‡åˆ°çš„é¦–å­—æ¯ç¼©å†™æˆ–æŠ€æœ¯å¼€å§‹ã€‚ä½†åŸºæœ¬ä¸Šä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›æ˜¯ä½ ä¿®æ”¹æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿä»¥ä¸ç½‘ç»œæ•°æ®äº¤äº’çš„ä¸»è¦é€‰é¡¹ã€‚\n\n### XDP\n\nå…³äº eXpress Data Plane å·²ç»å­˜åœ¨å¤§é‡ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä¸ä¼šæ·±å…¥æ¢è®¨å¤ªå¤šç»†èŠ‚ã€‚\u0060tl;dr\u0060æ˜¯ XDP eBPF ç¨‹åºæŒ‚é’©åˆ° XDP å°†ä½¿å…¶èƒ½å¤Ÿè®¿é—®ç”±å†…æ ¸è‡ªèº«å¤„ç†ä¹‹å‰çš„ä¼ å…¥ç½‘ç»œå¸§ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒeBPF ç¨‹åºå°†åŠ è½½åˆ° NIC é©±åŠ¨ç¨‹åºæœ¬èº«ä¸­ï¼Œè¿™å°†æœ‰æ•ˆåœ°å°†ç¨‹åºå¸è½½åˆ° NIC æœ¬èº«ã€‚\n\n### ä¼˜ç‚¹\n\n- æœ€ä½³æ€§èƒ½\n- éå¸¸é€‚ç”¨äºé˜²ç«å¢™ã€DDoS é˜²æŠ¤æˆ–è´Ÿè½½å‡è¡¡ç­‰ç”¨ä¾‹\n- åœ¨ä»»ä½•å…¶ä»–å†…å®¹è¿›è¡Œä¿®æ”¹ä¹‹å‰çœ‹åˆ°ä¼ å…¥çš„æµé‡\n\n### ç¼ºç‚¹\n\n- ä»…æ”¯æŒå…¥ç«™æµé‡ï¼Œä½¿ç”¨ XDP ç¨‹åºçœ‹åˆ°çš„ä»»ä½•æµé‡éƒ½åªæ˜¯ä¼ å…¥æµé‡ï¼Œç›®å‰æ— æ³•çœ‹åˆ°å‡ºç«™æµé‡\n- ä½¿ç”¨\u0060XDP\u0060æ•°æ®ç»“æ„ï¼Œä¸å¤§å¤šæ•°å¥—æ¥å­—ç¼–ç¨‹çš„é»˜è®¤æ•°æ®ç»“æ„\u0060SKB\u0060æœ‰ä¸€äº›ä¸åŒã€‚\n\n### TCï¼ˆTraffic Controlï¼‰æˆ–æµé‡æ§åˆ¶\n\nTraffic Control æ˜¯å†…æ ¸ç½‘ç»œç»“æ„çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸»è¦åŒ…æ‹¬æ·»åŠ è¯¸å¦‚ qdisc å’Œè¿‡æ»¤å™¨ä¹‹ç±»çš„åŠŸèƒ½åˆ°æ¥å£çš„èƒ½åŠ›ã€‚qdisc ä¸»è¦é›†ä¸­åœ¨ä¸º TBDï¼ˆå¾…å®šï¼‰æä¾›æœåŠ¡ï¼Œè€Œè¿‡æ»¤å™¨é€šå¸¸åœ¨åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ª eBPF ç¨‹åºã€‚\n\nå¸¸è§çš„å·¥ä½œæµç¨‹æ˜¯ï¼š\n\n1. åˆ›å»ºä¸€ä¸ªå…³æ³¨å…¥å£æˆ–å‡ºå£çš„ qdiscï¼Œæˆ–è€…æ›¿æ¢ä¸€ä¸ªç°æœ‰çš„ qdiscã€‚qdisc å°†é™„åŠ åˆ°æ¥å£ä¸Šã€‚\n2. åŠ è½½ä½ çš„ eBPF ç¨‹åºã€‚\n3. åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå°†å…¶é™„åŠ åˆ°é€šè¿‡æ¥å£ä¸Šçš„ qdisc ä¸Šçš„å…¥å£æˆ–å‡ºå£ä¹‹ä¸€ã€‚è¯¥è¿‡æ»¤å™¨å°†ä¸ eBPF ç¨‹åºç›¸å…³è”ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰ä¼ å…¥æˆ–ä¼ å‡ºçš„æµé‡ç°åœ¨éƒ½ä¼šé€šè¿‡ä¸€ä¸ªç¨‹åºè¿è¡Œï¼ˆå¦‚æœè¿æ¥ï¼‰ã€‚\n4. è·åˆ© ğŸ’°\n\n### ä¼˜ç‚¹\n\n- æä¾›å…¥å£å’Œå‡ºå£çš„æŒ‚é’©ç‚¹\n- ä½¿ç”¨ä¼ ç»Ÿçš„\u0060SKB\u0060æ•°æ®ç»“æ„\n\n### ç¼ºç‚¹\n\n- å°† TC ç¨‹åºé™„åŠ åˆ°å…¥å£æˆ–å‡ºå£é˜Ÿåˆ—ç¨å¾®å¤æ‚ä¸€äº›ã€‚ç”¨æˆ·éœ€è¦ä½¿ç”¨ qdisc æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼ŒæŸäº› eBPF SDK ä¸ä¼šåŸç”Ÿæ”¯æŒ TC ç¨‹åºçš„ä½¿ç”¨ã€‚\n- TC eBPF ç¨‹åºçœ‹åˆ°çš„æµé‡å¯èƒ½å·²ç»è¢«ä¹‹å‰çš„ XDP ç¨‹åºæˆ–å†…æ ¸æœ¬èº«ä¿®æ”¹ã€‚\n\n### ç³»ç»Ÿè°ƒç”¨\n\nä¸å…¶ä»–ä¸¤ç§ä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†ç½‘ç»œçš„æ–¹æ³•ç›¸æ¯”ï¼Œè¿™å¯èƒ½ä¼šæ˜¾å¾—æœ‰äº›å¥‡æ€ªï¼Œå› ä¸ºå®ƒæ˜¯å°†ä¸€äº› eBPF ä»£ç é™„åŠ åˆ°å†…æ ¸ä¸­çš„ç³»ç»Ÿè°ƒç”¨çš„ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´æ˜¯\u0060tcp4_connect()\u0060 \/ \u0060tcp6_connect()\u0060ç­‰è°ƒç”¨ã€‚è¿™åœ¨åè®®æ ˆä¸­ç•¥å¾®é åï¼Œå› ä¸ºåœ¨æ­¤æ—¶ï¼Œä¼ å…¥æ•°æ®åŒ…å·²ç»ç»è¿‡äº†å¾ˆå¤šå†…æ ¸é€»è¾‘ï¼Œè€Œ eBPF å†…çœç‚¹æ˜¯å½“æµé‡å³å°†ä¸åº”ç”¨ç¨‹åºæœ¬èº«äº¤äº’æ—¶ã€‚\n\n## ç¼–å†™ç½‘ç»œç¨‹åºï¼\n\næ‰€ä»¥åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬ï¼ˆå¸Œæœ›ï¼‰æ„è¯†åˆ°æˆ‘ä»¬æœ‰è®¸å¤šä¸åŒçš„å…¥å£ç‚¹ï¼Œå…è®¸æˆ‘ä»¬åœ¨â€œä¼ é€å¸¦â€ä¸Šæ³¨å…¥æˆ‘ä»¬çš„ä»£ç ï¼Œè¿™ä¸ªä¼ é€å¸¦ä» NIC å¼€å§‹ï¼Œä¸€ç›´åˆ°åº”ç”¨ç¨‹åºï¼ˆä»¥åŠåœ¨å‡ºç«™çš„æƒ…å†µä¸‹ï¼‰ã€‚\n\n### å›é¡¾\n\nåœ¨æˆ‘ä»¬æ‰€è°“çš„â€œä¼ é€å¸¦â€çš„å¼€å¤´ï¼Œæˆ‘ä»¬å¯ä»¥é™„åŠ æˆ‘ä»¬çš„ XDP ç¨‹åºå¹¶è·å¾—æœªç»è§¦ç¢°çš„åŸå§‹ç½‘ç»œæ•°æ®ã€‚åœ¨â€œä¼ é€å¸¦â€çš„ä¸­é—´ï¼Œæˆ‘ä»¬çš„ TC ç¨‹åºå°†æˆä¸ºé€šè¿‡å†…æ ¸çš„è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶æ¥æ”¶å¯èƒ½è¢«ä¿®æ”¹çš„ç½‘ç»œæ•°æ®ã€‚åœ¨ä¼ é€å¸¦çš„æœ«ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç é™„åŠ åˆ°åº”ç”¨ç¨‹åºå°†åœ¨å®ƒè¢«è¿è¡Œä¹‹å‰è·å–ç½‘ç»œæ•°æ®çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨ä¼ é€å¸¦çš„æœ«ç«¯è¿›è¡Œé™„åŠ ã€‚\n\n### æ•°æ®è¡¨ç¤º\n\nä½ çš„ç¨‹åºé™„åŠ åˆ°çš„ä½ç½®å†³å®šäº†ä¸¤ä¸ªä¸»è¦äº‹ç‰©ï¼Œä¸€ä¸ªæ˜¯æ½œåœ¨çš„æµé‡ä¿®æ”¹çš„ç›¸å¯¹çº§åˆ«ï¼Œå¦ä¸€ä¸ªæ˜¯æµé‡çš„è¡¨ç¤ºæ–¹å¼ã€‚\n\n### XDP ç»“æ„\n\næˆ‘ä¼šå†™å…³äºå®ƒçš„å†…å®¹ï¼Œä½†æ˜¯ DataDog å·²ç»åšäº†ï¼Œä½ å¯ä»¥åœ¨[è¿™é‡Œ](https:\/\/www.datadoghq.com\/blog\/xdp-intro\/#the-flow-of-an-xdp-program)é˜…è¯»ã€‚\n\n### SKBï¼ˆå¥—æ¥å­—ç¼“å†²åŒºï¼‰\n\nSKB æ˜¯åœ¨ eBPF æ·»åŠ åˆ°å†…æ ¸ä¹‹å‰å°±å­˜åœ¨äºå†…æ ¸ä¸­çš„æ•°æ®ç±»å‹ï¼Œå®ƒå·²ç»å…·å¤‡äº†ä¸€äº›ä½¿ä¸ SKB å¯¹è±¡äº¤äº’å˜å¾—ç¨å¾®å®¹æ˜“ä¸€äº›çš„è¾…åŠ©åŠŸèƒ½ã€‚æœ‰å…³æ›´æ·±å…¥çš„ SKB ä»‹ç»ï¼Œä½ å¯ä»¥é˜…è¯»æ­¤æ–‡ -\u003e http:\/\/vger.kernel.org\/~davem\/skb_data.html\n\n### è§£ææ•°æ®\n\næ— è®ºä¸å“ªä¸ªç»“æ„è¿›è¡Œäº¤äº’ï¼Œå®ƒä»¬éƒ½å…±äº«ä¸€äº›å…±åŒä¹‹å¤„ï¼Œè¿™ä¸»è¦æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œå¯¹äºè¿™ä¸¤ç§æ•°æ®ç±»å‹æ¥è¯´æ˜¯ç›¸åŒçš„ã€‚\n\nè¿™äº›å˜é‡æ˜¯ï¼š\n\n- \u0060data\u0060ï¼Œå®ƒæ˜¯ eBPF ç¨‹åºæ¥æ”¶åˆ°çš„æ•°æ®çš„æŒ‡é’ˆ\n\n- \u0060data_len\u0060ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡å®šäº†æœ‰å¤šå°‘æ•°æ®å¯ç”¨ï¼ˆä»¥å¸®åŠ©ç¡®ä¿ä½ æ°¸è¿œä¸ä¼šè®¿é—®\u0060data\u0060è¶…è¿‡\u0060data_len\u0060ï¼ˆæ˜¾è€Œæ˜“è§çš„çœŸç† ğŸ¤“ï¼‰ï¼‰\n\næ‰€ä»¥è¿™ä¸€åˆ‡ä¼¼ä¹å¾ˆç®€å•ï¼Œä½†ç­‰ç­‰... \u0060*data\u0060ä¸­å®é™…ä¸Šæœ‰ä»€ä¹ˆï¼Ÿï¼ˆè¿™å–å†³äºä½ çš„å‘ç°ï¼‰\n\né€šè¿‡ä¸æ–­â€œè½¬æ¢â€\u0060*data\u0060å¹¶æ²¿ç€å®ƒç§»åŠ¨ä»¥å‰¥ç¦»å„ç§æ ‡å¤´ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å’ŒæŸ¥æ‰¾åº•å±‚æ•°æ®ï¼\n\n### è½¬æ¢ï¼Ÿ\n\nå¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿï¼ˆä¸”ç³Ÿç³•ï¼‰çš„ç¤ºä¾‹ï¼Œè¯´æ˜äº†æˆ‘ä»¬é€šå¸¸å¦‚ä½•å°†ä¸€äº›åŸå§‹æ•°æ®è½¬æ¢ä¸ºæœ‰æ„ä¹‰çš„ä¸œè¥¿ã€‚ç›®å‰ï¼Œ\u0060*data\u0060å°†åªæ˜¯ä¸€ä¸²éšæœºæ•°æ®ï¼Œæ¯«æ— æ„ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰æ•ˆåœ°ä¸ºå…¶æ·»åŠ â€œæ ¼å¼â€ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç†è§£å…¶å¤–è§‚ã€‚\n\nè€ƒè™‘ä¸€ä¸‹éšæœºæ•°æ®è¡Œï¼šâ€œBobby0004500100.503 Harvard Drive90210â€ï¼Œå…¶ä¸­ä¸€äº›å¯¹è£¸çœ¼æ¥è¯´æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†æœ‰äº›æ˜¯ä¸æ¸…æ¥šçš„ã€‚\n\næƒ³è±¡ä¸€ä¸‹åä¸ºâ€œpersonâ€çš„æ•°æ®ç»“æ„ï¼š\n\n\u0060\u0060\u0060bash\nName: string\nAge: number\nBalance: float\nStreet: string\nZipCode: number\n\u0060\u0060\u0060\n\nå¦‚æœæˆ‘ä»¬è¦å°†æˆ‘ä»¬çš„éšæœºæ•°æ®â€œè½¬æ¢â€ä¸ºä¸Šé¢çš„â€œpersonâ€ç»“æ„ï¼Œå®ƒå°†çªç„¶å˜æˆï¼š\n\n\u0060\u0060\u0060bash\nName: Bobby\nAge: 45\nBalance: 100.50\nStreet: 3 Harvard Drive\nZipCode: 90210\n\u0060\u0060\u0060\n\nç°åœ¨çªç„¶é—´ï¼Œæˆ‘èƒ½å¤Ÿç†è§£å¹¶è®¿é—®ç»“æ„ä¸­çš„åº•å±‚å˜é‡ï¼Œå› ä¸ºå®ƒä»¬ç°åœ¨æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå³ person-\u003eNameï¼Œå¹¶ä¸”å‘ç°æ­¤ç‰¹å®šçš„ person ç±»å‹å¯¹è±¡å…·æœ‰åç§°å˜é‡â€œBobbyâ€ï¼\n\nè¿™æ­£æ˜¯æˆ‘ä»¬å°†å¯¹æˆ‘ä»¬çš„\u0060*data\u0060æ‰€åšçš„ï¼\n\n### æ•°æ®ä¸­åŒ…å«ä»€ä¹ˆï¼Ÿ\n\nå› æ­¤ï¼Œç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæ•°æ®æ˜¯å¦ä»¥ä»¥å¤ªç½‘å¸§å¼€å¤´ï¼å‡ ä¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä»¥ä»¥å¤ªç½‘å¸§å¼€å¤´ï¼Œè¿™ç›¸å½“ç®€å•ï¼Œä½†å…¶ä½œç”¨æ˜¯å…·æœ‰æºå’Œç›®æ ‡ç¡¬ä»¶åœ°å€ï¼ˆæ— è®ºè™šæ‹ŸåŒ–\/å®¹å™¨åŒ–\/æœ‰çº¿ç½‘ç»œè¿˜æ˜¯ WiFi å¦‚ä½•ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯å°†æˆ‘ä»¬çš„\u0060*data\u0060è½¬æ¢ä¸ºç±»å‹\u0060ETHHDR\u0060ï¼Œå¦‚æœæˆåŠŸï¼Œæˆ‘ä»¬ç°åœ¨å°†èƒ½å¤Ÿäº†è§£ç»„æˆä»¥å¤ªç½‘å¤´æ•°æ®ç±»å‹çš„å˜é‡ã€‚è¿™äº›åŒ…æ‹¬æºå’Œç›®æ ‡ MAC åœ°å€ï¼Œä½†æ›´é‡è¦çš„æ˜¯å‰©ä½™æ•°æ®çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚å†æ¬¡ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»¥å¤ªç½‘å¤´ä¹‹åçš„\u0060*data\u0060å†…å®¹é€šå¸¸æ˜¯ IP å¤´ï¼Œä½†æˆ‘ä»¬å°†é€šè¿‡æ£€æŸ¥ä»¥å¤ªç½‘å¸§çš„ TBD å˜é‡æ¥éªŒè¯ã€‚\n\nä¸€æ—¦æˆ‘ä»¬éªŒè¯ä¸‹ä¸€ç»„æ•°æ®æ˜¯ IP å¤´ï¼Œæˆ‘ä»¬å°†éœ€è¦å°†ä»¥å¤ªç½‘å¤´ä¹‹åçš„æ•°æ®è½¬æ¢ä¸º IPHDR ç±»å‹ã€‚ä¸€æ—¦æˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿè®¿é—® IP ç‰¹å®šçš„æ•°æ®ï¼Œä¾‹å¦‚æº IPï¼ˆ\u0060saddr\u0060ï¼‰æˆ–ç›®æ ‡åœ°å€ï¼ˆ\u0060daddr\u0060ï¼‰ï¼Œå†æ¬¡é‡è¦çš„æ˜¯ IP å¤´åŒ…å«ä¸€ä¸ªå˜é‡ï¼Œè¯¦ç»†è¯´æ˜äº† IP å¤´ä¹‹åçš„æ•°æ®æ˜¯ä»€ä¹ˆã€‚è¿™é€šå¸¸æ˜¯ TCP å¤´æˆ– UDP å¤´ï¼Œä½†è¿˜æœ‰å…¶ä»–é€‰æ‹©ï¼Œä¾‹å¦‚ sctp ç­‰ã€‚\n\nä¸€æ—¦æˆ‘ä»¬æŸ¥çœ‹äº† IP å¤´çš„å†…éƒ¨å¹¶ç¡®å®šæ•°æ®ç±»å‹æ˜¯ TCPï¼ˆä¹Ÿå¯èƒ½æ˜¯ UDP æˆ–å…¶ä»–å†…å®¹ï¼‰ï¼Œæˆ‘ä»¬å°†æŠŠä»¥å¤ªç½‘å¤´å’Œ IP å¤´ä¹‹åçš„æ•°æ®éƒ½è½¬æ¢ä¸º TCP å¤´ç±»å‹ï¼ï¼ˆå‡ ä¹å®Œæˆäº†ï¼‰ã€‚é€šè¿‡è®¿é—® TCP å¤´çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾— TCP ç‰¹å®šçš„æ•°æ®ï¼Œä¾‹å¦‚æºç«¯å£æˆ–ç›®æ ‡ç«¯å£ï¼Œç”¨äºéªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§çš„æ ¡éªŒå’Œä»¥åŠå…¶ä»–æœ‰ç”¨çš„å˜é‡ã€‚\n\nç°åœ¨æˆ‘ä»¬å‡ ä¹æ‹¥æœ‰ä¸€åˆ‡ï¼Œä½†æ˜¯ TCP å¤´çš„é•¿åº¦å¯èƒ½æ˜¯å¯å˜çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡æŸ¥çœ‹ tcl_len å˜é‡æ¥ç¡®å®šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¹˜ä»¥ 4ã€‚ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†è®¿é—®æœ€ç»ˆæ•°æ®æ‰€éœ€çš„ä¸€åˆ‡ï¼\n\nå› æ­¤ï¼Œ\u0060*data\u0060æŒ‡å‘æ•°æ®çš„å¼€å¤´ï¼æˆ‘ä»¬å·²ç»ç¡®å®šäº†ä»¥å¤ªç½‘å¤´ä¹‹åæ˜¯ IP å¤´ï¼Œæœ€åæ˜¯ TCP å¤´ï¼Œè¿™æ„å‘³ç€\u0060*data \u002b ä»¥å¤ªç½‘å¤´ \u002b IP å¤´ \u002b TCP å¤´ = å®é™…åº”ç”¨ç¨‹åºæ•°æ®ï¼\n\n### æˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›ä¿¡æ¯åšä»€ä¹ˆï¼Ÿ\n\nå½“æˆ‘ä»¬è§£æå„ç§æ ‡å¤´æ—¶ï¼Œå®é™…ä¸Šåœ¨ OSI æ¨¡å‹çš„ä¸åŒå±‚æ¬¡ä¸Šè§£é”äº†è¶Šæ¥è¶Šå¤šçš„ä¿¡æ¯ï¼\n\n**[ç¬¬ 2 å±‚]** ä»¥å¤ªç½‘å¤´ä¸ºæˆ‘ä»¬æä¾›äº†æºå’Œç›®æ ‡ç¡¬ä»¶åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤ä¿¡æ¯æ¥æ½œåœ¨åœ°é˜»æ­¢ä»æˆ‘ä»¬çŸ¥é“å±é™©çš„æº MAC åœ°å€å¤„ç†çš„å¸§ã€‚\n\n**[ç¬¬ 3 å±‚]** IP å¤´åŒ…å«æºå’Œç›®æ ‡ IP åœ°å€ï¼Œå†æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åƒé˜²ç«å¢™ä¸€æ ·è¿ä½œï¼Œé€šè¿‡ä½¿ç”¨ eBPF ç¨‹åºä¸¢å¼ƒç‰¹å®š IP åœ°å€çš„æ‰€æœ‰æµé‡ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® IP åœ°å€é‡å®šå‘æµé‡ï¼Œæˆ–è€…ç”šè‡³åœ¨è¿™ä¸€å±‚å®æ–½è´Ÿè½½å‡è¡¡é€»è¾‘ï¼Œä»¥å°†æµé‡é‡å®šå‘åˆ°å…¶ä»–åº•å±‚ IP åœ°å€é›†åˆã€‚\n\n**[ç¬¬ 4 å±‚]** TCP æˆ– UDP æ ‡å¤´å®šä¹‰äº†ç›®æ ‡ç«¯å£å·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥ç¡®å®šåº”ç”¨ç¨‹åºåè®®æ˜¯ä»€ä¹ˆï¼ˆå³ç«¯å£ 80 é€šå¸¸æ„å‘³ç€å‰©ä½™çš„*data å¯èƒ½æ˜¯ HTTP æ•°æ®ï¼‰ã€‚åœ¨è¿™ä¸€å±‚ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ‰§è¡Œè´Ÿè½½å‡è¡¡ç­‰æ“ä½œï¼ŒåŸºäºç›®æ ‡ï¼ˆå³åœ¨å¤šä¸ªå…¶ä»–è´Ÿè½½å‡è¡¡å™¨åœ°å€ä¹‹é—´å¹³è¡¡ï¼‰ã€‚\n\n**[ç¬¬ 7 å±‚]** æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œå„ç§æ ‡å¤´é›†åˆçš„æœ«å°¾çš„æ•°æ®æ˜¯å®é™…çš„åº”ç”¨ç¨‹åºæ•°æ®ï¼Œåªè¦æˆ‘ä»¬çŸ¥é“æ ¼å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è§£æå®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¤–éƒ¨ Web æµè§ˆå™¨å°è¯•è®¿é—®æˆ‘çš„è®¡ç®—æœºä¸Šçš„\u0060\/index.html\u0060å¹¶é™„åŠ äº† eBPF ç¨‹åºï¼Œæˆ‘ä¼šè§£æåˆ° TCPï¼Œç„¶åç¡®å®šå®ƒæ˜¯ç«¯å£ 80ï¼Œç„¶ååº”ç”¨ç¨‹åºæ•°æ®åº”è¯¥æ˜¯ HTTP æ ¼å¼ã€‚æˆ‘å¯ä»¥é€šè¿‡æŸ¥çœ‹åº”ç”¨ç¨‹åºæ•°æ®çš„å‰ä¸‰ä¸ªå­—ç¬¦ï¼ˆåœ¨æ‰€æœ‰æ ‡å¤´ä¹‹åï¼‰æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨ä»¥ä¸‹ä¼ªä»£ç ï¼š\n\n\u0060\u0060\u0060bash\nApplicationData = EthernetHDR \u002b IPHDR \u002b TCPHDR \/\/ å°†æ‰€æœ‰æ ‡å¤´é•¿åº¦ç›¸åŠ ä»¥æ‰¾åˆ°æ•°æ®\nIf ( data[ApplicationData] = \u0022G\u0022 \u0026\u0026 data[ApplicationData\u002b1] = \u0022E\u0022 \u0026\u0026 data[ApplicationData\u002b2] = \u0022T\u0022 ) {\n\t\/\/ è¿™æ˜¯ä¸€ä¸ªHTTP GETè¯·æ±‚\n\t\/\/ åšä¸€äº›ä»¤äººå…´å¥‹çš„äº‹æƒ…\n}\n\u0060\u0060\u0060\n\n## æ€»ç»“\n\nç°åœ¨æˆ‘ä»¬â€œæœ‰ç‚¹â€ç†è§£äº†è¿™ä¸ªé€»è¾‘ï¼Œä¹Ÿè®¸æˆ‘ä»¬åº”è¯¥è€ƒè™‘å®æ–½ä¸€äº›ä»£ç æ¥å®Œæˆæ‰€æœ‰è¿™äº›...ä½†è¿™å°†æ˜¯å¦ä¸€å¤©çš„äº‹æƒ…ã€‚\n', '\/trans\/ebpf-adventures-in-networking\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">è¿™ç¯‡æ–‡ç« ä»‹ç»äº† eBPF åœ¨ç½‘ç»œé¢†åŸŸçš„ä¸€äº›åº”ç”¨å’Œå®è·µï¼ŒåŒ…æ‹¬ XDPã€TC å’Œ sysprobes ä¸‰ç§ä¸åŒçš„ eBPF ç¨‹åºæŒ‚è½½æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ eBPF å®ç°ç½‘ç»œæ•°æ®çš„æ•è·ã€åˆ†æå’Œä¿®æ”¹ã€‚ä½œè€…è¿˜åˆ†äº«äº†ä¸€äº›æœ‰ç”¨çš„ eBPF å·¥å…·å’Œèµ„æºï¼Œä»¥åŠè‡ªå·±å¼€å‘çš„ä¸€ä¸ª eBPF ç½‘ç»œä»£ç†çš„é¡¹ç›®ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/cilium-gateway-api/">[è¯‘] ä½¿ç”¨ Cilium å®ç° Gateway API æŒ‡å—</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2024/01/04</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://blog.ogenki.io/post/cilium-gateway-api/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ä½¿ç”¨ Cilium å®ç° Gateway API æŒ‡å—', 'è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Cilium éƒ¨ç½²å’Œé…ç½® Gateway APIï¼Œä¸€ä¸ªæ–°çš„æœåŠ¡ç½‘æ ¼ APIï¼Œç”¨äºç®¡ç† Kubernetes ä¸­çš„æœåŠ¡é—´é€šä¿¡ã€‚æ–‡ç« è¯¦ç»†è¯´æ˜äº† Gateway API çš„æ¦‚å¿µå’Œç»„ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Cilium çš„ç‰¹æ€§å’Œå·¥å…·ï¼Œå®ç°é«˜æ•ˆå’Œçµæ´»çš„è·¯ç”±ç­–ç•¥ã€‚', '\nåœ¨ Kubernetes ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åºåï¼Œé€šå¸¸çš„ä¸‹ä¸€æ­¥æ˜¯è®©ç”¨æˆ·å¯ä»¥è®¿é—®å®ƒã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨[**Ingress æ§åˆ¶å™¨**](https:\/\/kubernetes.io\/docs\/concepts\/services-networking\/ingress-controllers\/)ï¼Œä¾‹å¦‚ Nginxã€Haproxyã€Traefik æˆ–æ¥è‡ªäº‘æä¾›å•†çš„æ§åˆ¶å™¨ï¼Œæ¥å¼•å¯¼ä¼ å…¥çš„æµé‡åˆ°åº”ç”¨ç¨‹åºï¼Œç®¡ç†è´Ÿè½½å¹³è¡¡ã€TLS ç»ˆæ­¢ç­‰ç­‰ã€‚\n\nç„¶åï¼Œæˆ‘ä»¬å¿…é¡»ä»ä¼—å¤š[å¯ç”¨çš„é€‰é¡¹](https:\/\/kubernetes.io\/docs\/concepts\/services-networking\/ingress-controllers\/) ä¸­è¿›è¡Œé€‰æ‹©ã€‚Cilium æ˜¯å…¶ä¸­ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„é€‰é¡¹ï¼Œæ—¨åœ¨å¤„ç†æ‰€æœ‰è¿™äº›ç½‘ç»œæ–¹é¢çš„é—®é¢˜ã€‚\n\n[**Cilium**](https:\/\/cilium.io\/) æ˜¯ä¸€ä¸ªåŸºäº eBPF çš„å¼€æºç½‘ç»œå’Œå®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œå…¶é‡‡ç”¨é€Ÿåº¦å¢é•¿è¿…çŒ›ã€‚å®ƒå¯èƒ½æ˜¯æä¾›æœ€å¤šåŠŸèƒ½çš„ç½‘ç»œæ’ä»¶ä¹‹ä¸€ã€‚æˆ‘ä»¬ä¸ä¼šæ¶µç›–æ‰€æœ‰åŠŸèƒ½ï¼Œä½†å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½æ¶‰åŠä½¿ç”¨[**Gateway API**](https:\/\/gateway-api.sigs.k8s.io\/) (\u0060GAPI\u0060) ç®¡ç†ä¼ å…¥æµé‡ã€‚\n\n## æˆ‘ä»¬çš„ç›®æ ‡\n\n- å‡†ç¡®äº†è§£ **Gateway API** æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå¦‚ä½•ä»£è¡¨ä» \u0060Ingress\u0060 API è¿›åŒ–è€Œæ¥ã€‚\n- æ¼”ç¤ºä»¥ GitOps æ–¹å¼éƒ¨ç½²çš„çœŸå®åœºæ™¯ã€‚\n- å½“å‰çš„é™åˆ¶å’Œå³å°†æ¨å‡ºçš„æ–°åŠŸèƒ½ã€‚\n\n{{\u003ccallout note æç¤º\u003e}}\n\næœ¬æ–‡ä¸­æ‰§è¡Œçš„æ‰€æœ‰æ­¥éª¤éƒ½æ¥è‡ªè¿™ä¸ª[**git å­˜å‚¨åº“**](https:\/\/github.com\/Smana\/cilium-gateway-api)ã€‚\n\næˆ‘é¼“åŠ±ä½ æ¢ç´¢å®ƒï¼Œå› ä¸ºå®ƒè¿œè¿œè¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼š\n\n- ä½¿ç”¨å¯ç”¨äº† kube-proxy æ›¿ä»£å¹¶å…·æœ‰ä¸“ç”¨ Daemonset ç”¨äº \u0060Envoy\u0060 çš„ \u0060Cilium\u0060 é…ç½®çš„ **EKS** é›†ç¾¤çš„å®‰è£…ã€‚\n- æå‡ºäº†å…·æœ‰ä¾èµ–å…³ç³»ç®¡ç†å’Œæˆ‘è®¤ä¸ºéå¸¸é«˜æ•ˆçš„ DRY ä»£ç çš„ \u0060Flux\u0060 ç»“æ„ã€‚\n- ç®€åŒ–äº†ç”¨äºå¹³å°ç»„ä»¶çš„ IAM æƒé™ç®¡ç†çš„ \u0060Crossplane\u0060 å’Œ [IRSA](https:\/\/docs.aws.amazon.com\/eks\/latest\/userguide\/iam-roles-for-service-accounts.html) ç»„åˆã€‚\n- ä½¿ç”¨ \u0060External-DNS\u0060 å’Œ \u0060Let\u0027s Encrypt\u0060 è‡ªåŠ¨ç®¡ç†åŸŸåå’Œè¯ä¹¦ã€‚\n\nè¿™ä¸ªæƒ³æ³•æ˜¯åªéœ€å‡ åˆ†é’Ÿå†…è®¾ç½®å¥½ä¸€åˆ‡ï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤è¡Œã€‚\n\n{{\u003c\/callout\u003e}}\n\n## ä»‹ç» Gateway API\n\næ­£å¦‚å‰é¢æåˆ°çš„ï¼Œæœ‰è®¸å¤š**Ingress æ§åˆ¶å™¨**é€‰é¡¹ï¼Œæ¯ä¸ªéƒ½æœ‰å…¶ç‰¹å®šæ€§å’Œç‰¹æ®ŠåŠŸèƒ½ï¼Œæœ‰æ—¶ä¼šä½¿å®ƒä»¬çš„ä½¿ç”¨å˜å¾—å¤æ‚ã€‚æ­¤å¤–ï¼ŒKubernetes ä¸­ä¼ ç»Ÿçš„ \u0060Ingress\u0060 API å…·æœ‰éå¸¸æœ‰é™çš„å‚æ•°ã€‚ä¸€äº›è§£å†³æ–¹æ¡ˆç”šè‡³åˆ›å»ºäº†è‡ªå·±çš„[CRDs](https:\/\/kubernetes.io\/docs\/concepts\/extend-kubernetes\/api-extension\/custom-resources\/)ï¼ˆKubernetes è‡ªå®šä¹‰èµ„æºï¼‰ï¼Œè€Œå…¶ä»–è§£å†³æ–¹æ¡ˆåˆ™ä½¿ç”¨ \u0060annotations\u0060 æ¥å…‹æœè¿™äº›é™åˆ¶ã€‚\n\nè¿™å°±æ˜¯**Gateway API**çš„ç”¨æ­¦ä¹‹åœ°ï¼å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§**æ ‡å‡†**ï¼Œå…è®¸å£°æ˜é«˜çº§ç½‘ç»œåŠŸèƒ½ï¼Œè€Œæ— éœ€å¯¹åº•å±‚æ§åˆ¶å™¨è¿›è¡Œç‰¹å®šæ‰©å±•ã€‚è€Œä¸”ï¼Œç”±äºæ‰€æœ‰æ§åˆ¶å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„ APIï¼Œå› æ­¤å¯ä»¥åœ¨ä¸æ”¹å˜é…ç½®çš„æƒ…å†µä¸‹ä»ä¸€ä¸ªè§£å†³æ–¹æ¡ˆåˆ‡æ¢åˆ°å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆKubernetes æ¸…å•æè¿°äº†å¦‚ä½•è·¯ç”±ä¼ å…¥æµé‡ï¼‰ã€‚\n\nåœ¨æˆ‘ä»¬å°†è¦æ¢è®¨çš„æ¦‚å¿µä¸­ï¼ŒGAPI å¼•å…¥äº†ä¸€ä¸ªç²¾ç»†çš„æˆæƒæ¨¡å‹ï¼Œå®šä¹‰äº†å…·æœ‰ä¸åŒæƒé™çš„**æ˜¾å¼è§’è‰²**ï¼ˆæœ‰å…³ GAPI å®‰å…¨æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[è¿™é‡Œ](https:\/\/gateway-api.sigs.k8s.io\/concepts\/security-model\/#roles-and-personas)ï¼‰ã€‚\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥é¡¹ç›®ç”±[sig-network-kubernetes](https:\/\/github.com\/kubernetes\/community\/tree\/master\/sig-network)å·¥ä½œç»„æ¨åŠ¨ï¼Œè¿˜æœ‰ä¸€ä¸ª Slack [é¢‘é“](https:\/\/kubernetes.slack.com\/archives\/CR0H13KGA)ï¼Œä½ å¯ä»¥åœ¨éœ€è¦æ—¶è”ç³»ä»–ä»¬ã€‚\n\nè®©æˆ‘ä»¬çœ‹çœ‹åœ¨å®è·µä¸­å¦‚ä½•ä½¿ç”¨ GAPI ä¸ Ciliumï¼\n\n## å…ˆå†³æ¡ä»¶\n\nåœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‡è®¾å·²éƒ¨ç½²äº†ä¸€ä¸ª EKS é›†ç¾¤ã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨[æ¼”ç¤ºå­˜å‚¨åº“ä¸­å»ºè®®çš„æ–¹æ³•](https:\/\/github.com\/Smana\/cilium-gateway-api\/tree\/main\/terraform\/eks)ä½œä¸ºæœ¬æ–‡çš„åŸºç¡€ï¼Œé‚£ä¹ˆæœ‰ä¸€äº›**è¦æ£€æŸ¥çš„è¦ç‚¹**ï¼Œä»¥ä¾¿ä½¿ç”¨ GAPIã€‚\n\næ­¤å¤„æè¿°çš„å®‰è£…æ–¹æ³•åŸºäº \u0060Helm\u0060ï¼Œæ‰€æœ‰çš„ \u0060values\u0060 å¯ä»¥åœ¨[è¿™é‡Œ](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/terraform\/eks\/helm_values\/cilium.yaml)æŸ¥çœ‹ã€‚\n\n- åœ¨[Gateway API](https:\/\/github.com\/kubernetes-sigs\/gateway-api\/tree\/main\/config\/crd)å­˜å‚¨åº“ä¸­**å®‰è£…**å¯ç”¨çš„ \u0060CRDs\u0060ã€‚\n\n  {{\u003ccallout note æ³¨æ„\u003e}}\n\n  å¦‚æœ Cilium è®¾ç½®ä¸ºæ”¯æŒ \u0060GAPI\u0060ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œå¹¶ä¸”ç¼ºå°‘ CRDsï¼Œåˆ™å®ƒå°†æ— æ³•å¯åŠ¨ã€‚åœ¨[æ¼”ç¤ºå­˜å‚¨åº“](https:\/\/github.com\/Smana\/cilium-gateway-api)ä¸­ï¼Œ**GAPI CRDs**åœ¨é›†ç¾¤åˆ›å»ºæœŸé—´å®‰è£…ä¸€æ¬¡ï¼Œä»¥ä¾¿ Cilium å¯ä»¥å¯åŠ¨ï¼Œç„¶åç”± Flux ç®¡ç†ã€‚\n\n  {{\u003c\/callout\u003e}}\n\n- ä½¿ç”¨ Cilium å’Œ \u0060eBPF\u0060 çš„ç½‘ç»œè½¬å‘åŠŸèƒ½**æ›¿æ¢** \u0060kube-proxy\u0060ã€‚\n\n  \u0060\u0060\u0060yaml\n  kubeProxyReplacement: true\n  \u0060\u0060\u0060\n\n- **å¯ç”¨** Gateway API æ”¯æŒã€‚\n\n  \u0060\u0060\u0060yaml\n  gatewayAPI:\n    enabled: true\n  \u0060\u0060\u0060\n\n- **æ£€æŸ¥**å®‰è£…ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å®‰è£…åä¸º \u0060cilium\u0060 çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æˆ‘ä¸ªäººä½¿ç”¨ [asdf](https:\/\/blog.ogenki.io\/post\/asdf\/asdf\/)ï¼š\n\n  \u0060\u0060\u0060console\n  asdf plugin-add cilium-cli\n  asdf install cilium-cli 0.15.7\n  asdf global cilium 0.15.7\n  \u0060\u0060\u0060\n\n  ä»¥ä¸‹å‘½ä»¤å…è®¸ç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½æ­£å¸¸è¿è¡Œï¼š\n\n  \u0060\u0060\u0060console\n  cilium status --wait\n     \/Â¯Â¯\\\n  \/Â¯Â¯\\__\/Â¯Â¯\\    Cilium:             OK\n  \\__\/Â¯Â¯\\__\/    Operator:           OK\n  \/Â¯Â¯\\__\/Â¯Â¯\\    Envoy DaemonSet:    OK\n  \\__\/Â¯Â¯\\__\/    Hubble Relay:       disabled\n     \\__\/       ClusterMesh:        disabled\n  \n  Deployment             cilium-operator    Desired: 2, Ready: 2\/2, Available: 2\/2\n  DaemonSet              cilium             Desired: 2, Ready: 2\/2, Available: 2\/2\n  DaemonSet              cilium-envoy       Desired: 2, Ready: 2\/2, Available: 2\/2\n  Containers:            cilium             Running: 2\n                        cilium-operator    Running: 2\n                        cilium-envoy       Running: 2\n  Cluster Pods:          33\/33 managed by Cilium\n  Helm chart version:    1.14.2\n  Image versions         cilium             quay.io\/cilium\/cilium:v1.14.2@sha256:6263f3a3d5d63b267b538298dbeb5ae87da3efacf09a2c620446c873ba807d35: 2\n                        cilium-operator    quay.io\/cilium\/operator-aws:v1.14.2@sha256:8d514a9eaa06b7a704d1ccead8c7e663334975e6584a815efe2b8c15244493f1: 2\n                        cilium-envoy       quay.io\/cilium\/cilium-envoy:v1.25.9-e198a2824d309024cb91fb6a984445e73033291d@sha256:52541e1726041b050c5d475b3c527ca4b8da487a0bbb0309f72247e8127af0ec: 2\n  \u0060\u0060\u0060\n\n  æœ€åï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥æ˜¯å¦å¯ç”¨äº† Gateway API æ”¯æŒï¼š\n\n  \u0060\u0060\u0060console\n  cilium config view | grep -w \u0022enable-gateway-api\u0022\n  enable-gateway-api                                true\n  enable-gateway-api-secrets-sync                   true\n  \u0060\u0060\u0060\n\n  ä½ è¿˜å¯ä»¥è¿è¡Œä»¥ä¸‹ç«¯åˆ°ç«¯æµ‹è¯•ï¼š\n\n  \u0060\u0060\u0060console\n  cilium connectivity test\n  \u0060\u0060\u0060\n\n  ä½†æ˜¯ï¼Œæ­¤å‘½ä»¤ï¼ˆ\u0060connectivity test\u0060ï¼‰å½“å‰åœ¨å¯ç”¨ Envoy ä½œä¸º DaemonSet æ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚([Github Issue](https:\/\/github.com\/cilium\/cilium\/issues\/28057))ã€‚\n\n{{\u003ccallout note æç¤º\u003e}}\n  **Envoy ä½œä¸º DaemonSet**\n\n  é»˜è®¤æƒ…å†µä¸‹ï¼ŒCilium ä»£ç†è¿˜åœ¨åŒä¸€ Pod ä¸­è¿è¡Œ \u0060Envoy\u0060ï¼Œå¹¶å§”æ‰˜ç»™å®ƒçº§åˆ« 7 çš„ç½‘ç»œæ“ä½œã€‚ä»ç‰ˆæœ¬ \u0060v1.14\u0060 å¼€å§‹ï¼Œå¯ä»¥å°† Envoy å•ç‹¬éƒ¨ç½²ï¼Œè¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼š\n\n  - å¦‚æœä¿®æ”¹\/é‡æ–°å¯åŠ¨ä¸€ä¸ªç»„ä»¶ï¼ˆæ— è®ºæ˜¯ Cilium è¿˜æ˜¯ Envoyï¼‰ï¼Œéƒ½ä¸ä¼šå½±å“å¦ä¸€ä¸ªç»„ä»¶ã€‚\n  - æ›´å¥½åœ°åˆ†é…èµ„æºç»™æ¯ä¸ªç»„ä»¶ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚\n  - åœ¨æŸä¸ª Pod è¢«æ”»å‡»çš„æƒ…å†µä¸‹é™åˆ¶æ”»å‡»é¢ã€‚\n  - Envoy æ—¥å¿—å’Œ Cilium ä»£ç†æ—¥å¿—ä¸ä¼šæ··åˆåœ¨ä¸€èµ·ã€‚\n\n  ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥æ­¤åŠŸèƒ½æ˜¯å¦å·²å¯ç”¨ï¼š\n\n  \u0060\u0060\u0060console\n  cilium status\n      \/Â¯Â¯\\\n   \/Â¯Â¯\\__\/Â¯Â¯\\    Cilium:             OK\n   \\__\/Â¯Â¯\\__\/    Operator:           OK\n   \/Â¯Â¯\\__\/Â¯Â¯\\    Envoy DaemonSet:    OK\n   \\__\/Â¯Â¯\\__\/    Hubble Relay:       disabled\n      \\__\/       ClusterMesh:        disabled\n  \u0060\u0060\u0060\n\n  [æ›´å¤šä¿¡æ¯](https:\/\/isovalent.com\/blog\/post\/cilium-release-114\/#h-envoy-daemonset)ã€‚\n{{\u003c\/callout\u003e}}\n\n## å…¥å£ç‚¹ï¼šGatewayClass å’Œ Gateway\n\n![ç½‘å…³](gateway.jpg)\n\nä¸€æ—¦æ»¡è¶³å…ˆå†³æ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—®å¤šä¸ªå…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Gateway API CRDs å®šä¹‰çš„è‡ªå®šä¹‰èµ„æºã€‚è€Œä¸”ï¼Œåœ¨å®‰è£… Cilium åï¼Œä¸€ä¸ª \u0060GatewayClass\u0060 ç«‹å³å¯ç”¨ã€‚\n\n\u0060\u0060\u0060console\nkubectl get gatewayclasses.gateway.networking.k8s.io\nNAME     CONTROLLER                     ACCEPTED   AGE\ncilium   io.cilium\/gateway-controller   True       7m59s\n\u0060\u0060\u0060\n\nåœ¨ Kubernetes é›†ç¾¤ä¸Šï¼Œä½ å¯ä»¥é…ç½®å¤šä¸ª \u0060GatewayClasses\u0060ï¼Œä»è€Œèƒ½å¤Ÿä½¿ç”¨ä¸åŒçš„å®ç°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ \u0060Gateway\u0060 é…ç½®ä¸­å¼•ç”¨ GatewayClass æ¥ä½¿ç”¨ \u0060Linkerd\u0060ã€‚\n\n\u0060Gateway\u0060 æ˜¯å…è®¸è§¦å‘åœ¨äº‘æä¾›å•†ä¸­åˆ›å»ºè´Ÿè½½å‡è¡¡ç»„ä»¶çš„èµ„æºã€‚\n\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š[apps\/base\/echo\/gateway.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/apps\/base\/echo\/gateway.yaml)\n\n\u0060\u0060\u0060yaml\napiVersion: gateway.networking.k8s.io\/v1beta1\nkind: Gateway\nmetadata:\n  name: echo-gateway\n  namespace: echo\nspec:\n  gatewayClassName: cilium\n  listeners:\n    - protocol: HTTP\n      port: 80\n      name: echo-1-echo-server\n      allowedRoutes:\n        namespaces:\n          from: Same\n\u0060\u0060\u0060\n\nåœ¨ AWSï¼ˆEKSï¼‰ä¸Šï¼Œé…ç½® \u0060Gateway\u0060 æ—¶ï¼ŒCilium ä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º \u0060LoadBalancer\u0060 çš„ \u0060Service\u0060ã€‚ç„¶åï¼Œå¦ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆ[AWS Load Balancer Controller](https:\/\/kubernetes-sigs.github.io\/aws-load-balancer-controller)ï¼‰å¤„ç†äº‘è´Ÿè½½å‡è¡¡å™¨ï¼ˆ[NLB](https:\/\/docs.aws.amazon.com\/elasticloadbalancing\/latest\/network\/introduction.html)ï¼‰çš„åˆ›å»ºã€‚\n\n\u0060\u0060\u0060console\nkubectl get svc -n echo cilium-gateway-echo\nNAME                  TYPE           CLUSTER-IP     EXTERNAL-IP                                                                 PORT(S)        AGE\ncilium-gateway-echo   LoadBalancer   172.20.19.82   k8s-echo-ciliumga-64708ec85c-fcb7661f1ae4e4a4.elb.eu-west-3.amazonaws.com   80:30395\/TCP   2m58s\n\u0060\u0060\u0060\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè´Ÿè½½å‡è¡¡å™¨åœ°å€ä¹Ÿä¸ \u0060Gateway\u0060 ç›¸å…³è”ã€‚\n\n\u0060\u0060\u0060console\nkubectl get gateway -n echo echo\nNAME   CLASS    ADDRESS                                                                     PROGRAMMED   AGE\necho   cilium   k8s-echo-ciliumga-64708ec85c-fcb7661f1ae4e4a4.elb.eu-west-3.amazonaws.com   True         16m\n\u0060\u0060\u0060\n\n## è·¯ç”±è§„åˆ™ï¼šHTTPRoute\n\n### åŸºæœ¬è§„åˆ™\n\n![HTTPRoute](httproute.jpg)\n\nç®€è€Œè¨€ä¹‹ï¼Œä¸Šé¢çš„å›¾è¡¨å¯æ€»ç»“ä¸ºå‡ å¥è¯ï¼š\u0060HTTPRoute\u0060 å…è®¸é€šè¿‡å¼•ç”¨ Gateway å¹¶å®šä¹‰æ‰€éœ€çš„è·¯ç”±å‚æ•°æ¥é…ç½®åˆ°æœåŠ¡çš„è·¯ç”±ã€‚\n\n{{\u003ccallout note æç¤º\u003e}}\n**Kyverno**\n\næˆªæ­¢ç›®å‰ï¼Œæ— æ³•é…ç½®ç”± \u0060Gateways\u0060 ç”Ÿæˆçš„æœåŠ¡çš„æ³¨é‡Šï¼ˆ[Github Issue](https:\/\/github.com\/cilium\/cilium\/issues\/25357)ï¼‰ã€‚å·²æå‡ºä¸€ç§è§£å†³æ–¹æ³•ï¼Œå³åœ¨åˆ›å»º \u0060Gateway\u0060 åç«‹å³ä¿®æ”¹ç”± \u0060Gateway\u0060 åˆ›å»ºçš„æœåŠ¡ã€‚\n\nKyverno æ˜¯ä¸€ç§ç¡®ä¿é…ç½®ç¬¦åˆæœ€ä½³å®è·µå’Œå®‰å…¨è¦æ±‚çš„å·¥å…·ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä»…ä»…ä½¿ç”¨å®ƒæ¥è½»æ¾æè¿°[çªå˜](https:\/\/kyverno.io\/docs\/writing-policies\/mutate\/)è§„åˆ™ã€‚\n\n[security\/mycluster-0\/echo-gw-clusterpolicy.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/security\/mycluster-0\/echo-gw-clusterpolicy.yaml)\n\n\u0060\u0060\u0060yaml\nspec:\n  rules:\n    - name: mutate-svc-annotations\n      match:\n        any:\n          - resources:\n              kinds:\n                - Service\n              namespaces:\n                - echo\n              name: cilium-gateway-echo\n      mutate:\n        patchStrategicMerge:\n          metadata:\n            annotations:\n              external-dns.alpha.kubernetes.io\/hostname: echo.${domain_name}\n              service.beta.kubernetes.io\/aws-load-balancer-scheme: \u0022internet-facing\u0022\n              service.beta.kubernetes.io\/aws-load-balancer-backend-protocol: tcp\n          spec:\n            loadBalancerClass: service.k8s.aws\/nlb\n\u0060\u0060\u0060\n\nå› æ­¤ï¼ŒæœåŠ¡ \u0060cilium-gateway-echo\u0060 å°†æ·»åŠ  AWS æ§åˆ¶å™¨çš„æ³¨é‡Šï¼Œä»¥åŠä¸€ä¸ªå…è®¸è‡ªåŠ¨ DNS è®°å½•é…ç½®çš„æ³¨é‡Šã€‚\n{{\u003c\/callout\u003e}}\n\n[apps\/base\/echo\/httproute.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/apps\/base\/echo\/httproute.yaml)\n\n\u0060\u0060\u0060yaml\napiVersion: gateway.networking.k8s.io\/v1beta1\nkind: HTTPRoute\nmetadata:\n  name: echo-1\n  namespace: echo\nspec:\n  parentRefs:\n    - name: echo\n      namespace: echo\n  rules:\n    - matches:\n        - path:\n            type: PathPrefix\n            value: \/\n      backendRefs:\n        - name: echo-1-echo-server\n          port: 80\n\u0060\u0060\u0060\n\nä¸Šé¢ä½¿ç”¨çš„ç¤ºä¾‹éå¸¸ç®€å•ï¼šæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ° \u0060echo-1-echo-server\u0060 æœåŠ¡ã€‚\n\n\u0060parentRefs\u0060 æŒ‡ç¤ºä½¿ç”¨å“ªä¸ª \u0060Gateway\u0060ï¼Œç„¶ååœ¨ \u0060rules\u0060 éƒ¨åˆ†å®šä¹‰äº†è·¯ç”±è§„åˆ™ã€‚\n\nè·¯ç”±è§„åˆ™è¿˜å¯ä»¥åŸºäº \u0060path\u0060ã€‚\n\n\u0060\u0060\u0060yaml\n...\nspec:\n  hostnames:\n  - foo.bar.com\n  rules:\n  - matches:\n    - path:\n        type: PathPrefix\n        value: \/login\n\u0060\u0060\u0060\n\næˆ–è€…åŸºäº HTTP æ ‡å¤´\n\n\u0060\u0060\u0060yaml\n...\nspec:\n  rules:\n  - matches:\n      headers:\n      - name: \u0022version\u0022\n        value: \u00222\u0022\n...\n\u0060\u0060\u0060\n\nè®©æˆ‘ä»¬æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯è®¿é—®ã€‚\n\n\u0060\u0060\u0060console\ncurl -s http:\/\/echo.cloud.ogenki.io | jq -rc \u0027.environment.HOSTNAME\u0027\necho-1-echo-server-fd88497d-w6sgn\n\u0060\u0060\u0060\n\næ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯¥æœåŠ¡ä»¥ HTTP æ–¹å¼æš´éœ²ï¼Œæ²¡æœ‰è¯ä¹¦ã€‚è®©æˆ‘ä»¬å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n### é…ç½® TLS è¯ä¹¦\n\næœ‰å¤šç§æ–¹æ³•å¯ä»¥ä½¿ç”¨ GAPI é…ç½® TLSã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ€å¸¸è§çš„æƒ…å†µï¼šHTTPS åè®®å’Œåœ¨ Gateway ä¸Šç»ˆæ­¢ TLSã€‚\n\nå‡è®¾æˆ‘ä»¬æƒ³è¦é…ç½®ä¹‹å‰ä½¿ç”¨çš„åŸŸå \u0060echo.cloud.ogenki.io\u0060ã€‚é…ç½®ä¸»è¦é€šè¿‡é…ç½® \u0060Gateway\u0060 æ¥å®Œæˆã€‚\n\n[apps\/base\/echo\/tls-gateway.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/apps\/base\/echo\/tls-gateway.yaml)\n\n\u0060\u0060\u0060yaml\napiVersion: gateway.networking.k8s.io\/v1beta1\nkind: Gateway\nmetadata:\n  name: echo\n  namespace: echo\n  annotations:\n    cert-manager.io\/cluster-issuer: letsencrypt-prod\nspec:\n  gatewayClassName: cilium\n  listeners:\n    - name: http\n      hostname: \u0022echo.${domain_name}\u0022\n      port: 443\n      protocol: HTTPS\n      allowedRoutes:\n        namespaces:\n          from: Same\n      tls:\n        mode: Terminate\n        certificateRefs:\n          - name: echo-tls\n\u0060\u0060\u0060\n\nè¿™é‡Œçš„å…³é”®ç‚¹æ˜¯å¼•ç”¨ä¸€ä¸ªåŒ…å«åç§°ä¸º \u0060echo-tls\u0060 çš„è¯ä¹¦çš„å¯†é’¥ã€‚è¿™ä¸ªè¯ä¹¦å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œä½†æ˜¯ä¸ºäº†æœ¬æ–‡ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ **Let\u0027s Encrypt** å’Œ \u0060cert-manager\u0060 æ¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚\n\n{{\u003ccallout note æç¤º\u003e}}}\n**cert-manager**\n\nä½¿ç”¨ \u0060cert-manager\u0060ï¼Œè‡ªåŠ¨åˆ›å»ºå’Œæ›´æ–°ç”± \u0060Gateway\u0060 æš´éœ²çš„è¯ä¹¦éå¸¸ç®€å•ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å…è®¸æ§åˆ¶å™¨è®¿é—® [route53](https:\/\/aws.amazon.com\/route53\/)ï¼Œä»¥è§£å†³ DNS01 æŒ‘æˆ˜ï¼ˆè¿™æ˜¯ä¸€ç§ç¡®ä¿å®¢æˆ·ç«¯åªèƒ½ä¸ºè‡ªå·±æ‹¥æœ‰çš„åŸŸè¯·æ±‚è¯ä¹¦çš„æœºåˆ¶ï¼‰ã€‚\n\n[ClusterIssuer](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/security\/base\/cert-manager\/cluster-issuer-staging.yaml) èµ„æºæè¿°äº†ä½¿ç”¨ cert-manager ç”Ÿæˆè¯ä¹¦æ‰€éœ€çš„é…ç½®ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€ä¸ªæ³¨é‡Š \u0060cert-manager.io\/cluster-issuer\u0060 å¹¶è®¾ç½®å­˜å‚¨è¯ä¹¦çš„ Kubernetes å¯†é’¥ã€‚\n\n[æ›´å¤šä¿¡æ¯](https:\/\/cert-manager.io\/docs\/usage\/gateway\/)\n\nåœ¨æ¼”ç¤ºå­˜å‚¨åº“ä¸­ï¼Œæƒé™æ˜¯ä½¿ç”¨ \u0060Crossplane\u0060 åˆ†é…çš„ï¼Œå®ƒè´Ÿè´£åœ¨ AWS ä¸­é…ç½®è¿™äº› IAM æƒé™ã€‚\n{{\u003c\/callout\u003e}}\n\nä¸ºäº†ä½¿è·¯ç”±æ­£å¸¸å·¥ä½œï¼Œä½ è¿˜éœ€è¦å°† \u0060HTTPRoute\u0060 é™„åŠ åˆ°æ­£ç¡®çš„ \u0060Gateway\u0060 å¹¶æŒ‡å®šåŸŸåã€‚\n\n\u0060\u0060\u0060yaml\napiVersion: gateway.networking.k8s.io\/v1beta1\nkind: HTTPRoute\nmetadata:\n  name: echo-1\n  namespace: echo\nspec:\n  parentRefs:\n    - name: echo\n      namespace: echo\n  hostnames:\n    - \u0022echo.${domain_name}\u0022\n...\n\u0060\u0060\u0060\n\nå‡ ç§’é’Ÿåï¼Œè¯ä¹¦å°†è¢«åˆ›å»ºã€‚\n\n\u0060\u0060\u0060console\nkubectl get cert -n echo\nNAME       READY   SECRET     AGE\necho-tls   True    echo-tls   43m\n\u0060\u0060\u0060\n\næœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥è¯ä¹¦ç¡®å®æ¥è‡ª Let\u0027s Encryptï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\u0060\u0060\u0060console\ncurl https:\/\/echo.cloud.ogenki.io -v 2\u003e\u00261 | grep -A 6 \u0027Server certificate\u0027\n* Server certificate:\n*  subject: CN=echo.cloud.ogenki.io\n*  start date: Sep 15 14:43:00 2023 GMT\n*  expire date: Dec 14 14:42:59 2023 GMT\n*  subjectAltName: host \u0022echo.cloud.ogenki.io\u0022 matched cert\u0027s \u0022echo.cloud.ogenki.io\u0022\n*  issuer: C=US; O=Let\u0027s Encrypt; CN=R3\n*  SSL certificate verify ok.\n\u0060\u0060\u0060\n\n{{\u003ccallout note æç¤º\u003e}}\nGAPI è¿˜å…è®¸ä½ é…ç½® **ç«¯åˆ°ç«¯çš„ TLS**ï¼Œä¸€ç›´åˆ°å®¹å™¨ã€‚è¿™æ˜¯é€šè¿‡é…ç½® \u0060Gateway\u0060 ä¸º \u0060Passthrough\u0060 æ¨¡å¼å¹¶ä½¿ç”¨ \u0060TLSRoute\u0060 èµ„æºæ¥å®Œæˆçš„ã€‚è¯ä¹¦ä¹Ÿå¿…é¡»ç”±æ‰§è¡Œ TLS ç»ˆæ­¢çš„ pod æºå¸¦ã€‚\n{{\u003c\/callout\u003e}}\n\n### åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº« Gateway\n\n![å…±äº«ç½‘å…³](shared-gateway.jpg)\n\nä½¿ç”¨ \u0060GAPI\u0060ï¼Œä½ å¯ä»¥åœ¨ \u0060å‘½åç©ºé—´\u0060 ä¹‹é—´è·¯ç”±æµé‡ã€‚è¿™å¾—ç›Šäºæ¯ä¸ªåŠŸèƒ½çš„ä¸åŒèµ„æºï¼šä¸€ä¸ª \u0060Gateway\u0060 å…è®¸é…ç½®åŸºç¡€è®¾æ–½ï¼Œä»¥åŠ \u0060*Routes\u0060ã€‚è¿™äº›è·¯ç”±å¯ä»¥é™„åŠ åˆ°ä½äºå¦ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„ Gatewayã€‚å› æ­¤ï¼Œä¸åŒçš„å›¢é˜Ÿ\/é¡¹ç›®å¯ä»¥å…±äº«ç›¸åŒçš„åŸºç¡€è®¾æ–½ç»„ä»¶ã€‚\n\nä½†æ˜¯ï¼Œè¿™éœ€è¦æŒ‡å®šå“ªä¸ªè·¯ç”±å…è®¸å¼•ç”¨è¯¥ Gatewayã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºå†…éƒ¨å·¥å…·çš„ Gatewayï¼Œåä¸º \u0060platform\u0060ã€‚é€šè¿‡ä½¿ç”¨ \u0060allowedRoutes\u0060 å‚æ•°ï¼Œæˆ‘ä»¬æ˜ç¡®æŒ‡å®šäº†å“ªäº›å‘½åç©ºé—´å…è®¸é™„åŠ åˆ°æ­¤ Gatewayã€‚\n\n[infrastructure\/base\/gapi\/platform-gateway.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/infrastructure\/base\/gapi\/platform-gateway.yaml)\n\n\u0060\u0060\u0060yaml\n...\n      allowedRoutes:\n        namespaces:\n          from: Selector\n          selector:\n            matchExpressions:\n              - key: kubernetes.io\/metadata.name\n                operator: In\n                values:\n                  - observability\n                  - flux-system\n      tls:\n        mode: Terminate\n        certificateRefs:\n          - name: platform-tls\n\u0060\u0060\u0060\n\nåœ¨å‘½åç©ºé—´ \u0060observability\u0060 å’Œ \u0060flux-system\u0060 ä¸­é…ç½®çš„ \u0060HTTPRoutes\u0060 é™„åŠ åˆ°æ­¤å”¯ä¸€çš„ \u0060Gateway\u0060ã€‚\n\n\u0060\u0060\u0060yaml\n...\nspec:\n  parentRefs:\n    - name: platform\n      namespace: infrastructure\n\u0060\u0060\u0060\n\nå› æ­¤ï¼Œä½¿ç”¨æ¥è‡ªäº‘æä¾›å•†çš„ç›¸åŒè´Ÿè½½å‡è¡¡å™¨ã€‚\n\n\u0060\u0060\u0060console\nNLB_DOMAIN=$(kubectl get svc -n infrastructure cilium-gateway-platform -o jsonpath={.status.loadBalancer.ingress[0].hostname})\n\ndig \u002bshort ${NLB_DOMAIN}\n13.36.89.108\n\ndig \u002bshort grafana-mycluster-0.cloud.ogenki.io\n13.36.89.108\n\ndig \u002bshort gitops-mycluster-0.cloud.ogenki.io\n13.36.89.108\n\u0060\u0060\u0060\n\n{{\u003ccallout note æ³¨æ„\u003e}}\nè¿™äº›å†…éƒ¨å·¥å…·ä¸åº”è¯¥æš´éœ²åœ¨äº’è”ç½‘ä¸Šï¼Œä½†æ˜¯ä½ çŸ¥é“ï¼šè¿™åªæ˜¯ä¸€ä¸ªæ¼”ç¤ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…éƒ¨ Gatewayï¼ˆç§æœ‰ IPï¼‰é€šè¿‡è°ƒæ•´æ³¨é‡Šå¹¶ä½¿ç”¨ç§æœ‰è¿æ¥ç³»ç»Ÿï¼ˆVPNã€éš§é“ç­‰ï¼‰æ¥å®ç°ã€‚\n{{\u003c\/callout\u003e}}\n\n### æµé‡åˆ†æµ\n\n![åˆ†æµ](split.jpg)\n\nç”±æœåŠ¡ç½‘æ ¼å¸¸å¸¸æä¾›çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯åœ¨æœ‰æ–°ç‰ˆæœ¬å¯ç”¨æ—¶ï¼ˆA\/B æµ‹è¯•æˆ–é‡‘ä¸é›€éƒ¨ç½²ï¼‰å¯¹éƒ¨åˆ†æµé‡æµ‹è¯•åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ã€‚\u0060GAPI\u0060é€šè¿‡ä½¿ç”¨æƒé‡æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½¿å…¶å˜å¾—éå¸¸ç®€å•ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå°† 5% çš„æµé‡è½¬å‘åˆ°æœåŠ¡ \u0060echo-2-echo-server\u0060 çš„ç¤ºä¾‹ï¼š\n\n[apps\/base\/echo\/httproute-split.yaml](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/apps\/base\/echo\/httproute-split.yaml)\n\n\u0060\u0060\u0060yaml\n...\n  hostnames:\n    - \u0022split-echo.${domain_name}\u0022\n  rules:\n    - matches:\n        - path:\n            type: PathPrefix\n            value: \/\n      backendRefs:\n        - name: echo-1-echo-server\n          port: 80\n          weight: 95\n        - name: echo-2-echo-server\n          port: 80\n          weight: 5\n\u0060\u0060\u0060\n\nè®©æˆ‘ä»¬æ£€æŸ¥åˆ†å‘æ˜¯å¦æŒ‰é¢„æœŸè¿›è¡Œï¼š\n\n[scripts\/check-split.sh](https:\/\/github.com\/Smana\/cilium-gateway-api\/blob\/main\/scripts\/check-split.sh)\n\n\u0060\u0060\u0060console\n.\/scripts\/check-split.sh https:\/\/split-echo.cloud.ogenki.io\necho-1 çš„è¯·æ±‚æ¬¡æ•°ï¼š95\necho-2 çš„è¯·æ±‚æ¬¡æ•°ï¼š5\n\u0060\u0060\u0060\n\n### ä¿®æ”¹æ ‡å¤´\n\nè¿˜å¯ä»¥æ›´æ”¹ HTTP **æ ‡å¤´**ï¼šæ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤å®ƒä»¬ã€‚è¿™äº›ä¿®æ”¹å¯ä»¥é€šè¿‡åœ¨ \u0060HTTPRoute\u0060 æ¸…å•ä¸­ä½¿ç”¨ [filters](https:\/\/gateway-api.sigs.k8s.io\/api-types\/httproute#filters-optional) åº”ç”¨äºè¯·æ±‚æ ‡å¤´æˆ–å“åº”æ ‡å¤´ã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†åœ¨ **è¯·æ±‚** ä¸­æ·»åŠ ä¸€ä¸ªæ ‡å¤´ã€‚\n\n\u0060\u0060\u0060yaml\napiVersion: gateway.networking.k8s.io\/v1beta1\nkind: HTTPRoute\nmetadata:\n  name: echo-1\n  namespace: echo\nspec:\n...\n  rules:\n    - matches:\n        - path:\n            type: PathPrefix\n            value: \/req-header-add\n      filters:\n        - type: RequestHeaderModifier\n          requestHeaderModifier:\n            add:\n              - name: foo\n                value: bar\n      backendRefs:\n        - name: echo-1-echo-server\n          port: 80\n...\n\u0060\u0060\u0060\n\næ­¤å‘½ä»¤å…è®¸æŸ¥çœ‹æ ‡å¤´æ˜¯å¦ç¡®å®å·²æ·»åŠ ï¼š\n\n\u0060\u0060\u0060console\ncurl -s https:\/\/echo.cloud.ogenki.io\/req-header-add | jq \u0027.request.headers\u0027\n{\n  \u0022host\u0022: \u0022echo.cloud.ogenki.io\u0022,\n  \u0022user-agent\u0022: \u0022curl\/8.2.1\u0022,\n  \u0022accept\u0022: \u0022*\/*\u0022,\n  \u0022x-forwarded-for\u0022: \u002281.220.234.254\u0022,\n  \u0022x-forwarded-proto\u0022: \u0022https\u0022,\n  \u0022x-envoy-external-address\u0022: \u002281.220.234.254\u0022,\n  \u0022x-request-id\u0022: \u0022320ba4d2-3bd6-4c2f-8a97-74296a9f3f26\u0022,\n  \u0022foo\u0022: \u0022bar\u0022\n}\n\u0060\u0060\u0060\n\n## åˆ†é…é€‚å½“çš„æƒé™\n\n\u0060GAPI\u0060 æä¾›äº†ä¸€ç§æ¸…æ™°çš„æƒé™å…±äº«æ¨¡å‹ï¼Œç”¨äºç®¡ç†æµé‡è·¯ç”±åŸºç¡€è®¾æ–½ï¼ˆç”±é›†ç¾¤ç®¡ç†å‘˜ç®¡ç†ï¼‰å’Œåº”ç”¨ç¨‹åºï¼ˆç”±å¼€å‘äººå‘˜ç®¡ç†ï¼‰ä¹‹é—´çš„å…³ç³»ã€‚\n\nå¤šä¸ªè‡ªå®šä¹‰èµ„æºçš„å¯ç”¨æ€§å…è®¸ä½¿ç”¨ Kubernetes çš„ **RBAC** é…ç½®ä»¥å£°æ˜æ€§æ–¹å¼åˆ†é…æƒé™ã€‚æˆ‘å·²ç»æ·»åŠ äº†ä¸€äº›ç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹åœ¨æˆ‘çš„æ¼”ç¤ºé›†ç¾¤ä¸­æ²¡æœ‰æ•ˆæœï¼Œä½†å¯èƒ½ä¼šç»™ä½ ä¸€ä¸ªæƒ³æ³•ã€‚\n\nä¸‹é¢çš„é…ç½®æˆäºˆ \u0060developers\u0060 ç»„çš„æˆå‘˜åœ¨ echo å‘½åç©ºé—´å†…ç®¡ç† \u0060HTTPRoutes\u0060 çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä»…æä¾›å¯¹ \u0060Gateways\u0060 çš„è¯»å–æƒé™ã€‚\n\n\u0060\u0060\u0060yaml\n---\napiVersion: rbac.authorization.k8s.io\/v1\nkind: Role\nmetadata:\n  namespace: echo\n  name: gapi-developer\nrules:\n  - apiGroups: [\u0022gateway.networking.k8s.io\u0022]\n    resources: [\u0022httproutes\u0022]\n    verbs: [\u0022*\u0022]\n  - apiGroups: [\u0022gateway.networking.k8s.io\u0022]\n    resources: [\u0022gateways\u0022]\n    verbs: [\u0022get\u0022, \u0022list\u0022]\n---\napiVersion: rbac.authorization.k8s.io\/v1\nkind: RoleBinding\nmetadata:\n  name: gapi-developer\n  namespace: echo\nsubjects:\n  - kind: Group\n    name: \u0022developers\u0022\n    apiGroup: rbac.authorization.k8s.io\nroleRef:\n  kind: Role\n  name: gapi-developer\n  apiGroup: rbac.authorization.k8s.io\n\u0060\u0060\u0060\n\n## ä¹ä¸€çœ‹æœ‰ç‚¹æ¨¡ç³Š\n\näººä»¬å¯èƒ½ä¼šå¯¹é€šå¸¸ç§°ä¸º \u0060API ç½‘å…³\u0060 çš„ä¸œè¥¿æ„Ÿåˆ°å›°æƒ‘ã€‚å·²ç»åˆ›å»ºäº† [FAQ](https:\/\/gateway-api.sigs.k8s.io\/faq\/) çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä»¥æ¾„æ¸…å®ƒä¸ \u0060Gateway API\u0060 çš„ä¸åŒä¹‹å¤„ã€‚å°½ç®¡ GAPI æä¾›äº†é€šå¸¸åœ¨ API ç½‘å…³ä¸­æ‰¾åˆ°çš„åŠŸèƒ½ï¼Œä½†å®ƒä¸»è¦æ˜¯ Kubernetes çš„ä¸€ä¸ªç‰¹å®šå®ç°ã€‚ç„¶è€Œï¼Œé€‰æ‹©è¿™ä¸ªåç§°ç¡®å®å¯èƒ½å¼•èµ· **æ··æ·†**ã€‚\n\næ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œæœ¬æ–‡ä»…å…³æ³¨å…¥ç«™æµé‡ï¼Œé€šå¸¸ç”± *Ingress Controllers* ç®¡ç†ï¼Œç§°ä¸º [å—åŒ—](https:\/\/gateway-api.sigs.k8s.io\/concepts\/glossary\/#northsouth-traffic)ï¼Œè¿™å®é™…ä¸Šæ˜¯ GAPI çš„åˆå§‹èŒƒå›´ã€‚æœ€è¿‘çš„ä¸€ä¸ªåä¸º [**GAMMA**](https:\/\/gateway-api.sigs.k8s.io\/concepts\/gamma\/) çš„å€¡è®®æ—¨åœ¨å¤„ç† [ä¸œè¥¿æµé‡](https:\/\/gateway-api.sigs.k8s.io\/concepts\/glossary\/#eastwest-traffic) è·¯ç”±ï¼Œè¿™å°†åœ¨å°†æ¥æ ‡å‡†åŒ–æŸäº›å¸¸è§çš„åŠŸèƒ½ï¼Œé€šå¸¸ç”± \u0060Service Meshes\u0060 è§£å†³æ–¹æ¡ˆæä¾›ã€‚ï¼ˆæœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [æ­¤æ–‡ç« ](https:\/\/kubernetes.io\/blog\/2023\/08\/29\/gateway-api-v0-8\/)ï¼‰ã€‚\n\n## æœ€åçš„æƒ³æ³•\n\nè€å®è¯´ï¼Œæˆ‘å·²ç»çŸ¥é“ **Gateway API** æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚å°½ç®¡æˆ‘è¯»äº†ä¸€äº›æ–‡ç« ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰çœŸæ­£æ·±å…¥ç ”ç©¶è¿‡ã€‚æˆ‘ä¼šæƒ³ï¼šâ€œä¸ºä»€ä¹ˆè¦éº»çƒ¦å‘¢ï¼Ÿæˆ‘çš„ *Ingress Controller* å¯ä»¥å·¥ä½œï¼Œè€Œä¸”è¿™éœ€è¦å­¦ä¹ æ›²çº¿ã€‚â€\n\nGAPI æ­£åœ¨å´­éœ²å¤´è§’ï¼Œå³å°†å‘å¸ƒ GA ç‰ˆæœ¬ã€‚å¤šä¸ª [é¡¹ç›®](https:\/\/gateway-api.sigs.k8s.io\/implementations\/) å·²ç»æ‹¥æŠ±å®ƒï¼Œè¿™ä¸ªç”¨äºç®¡ç† Kubernetes å†…æµé‡çš„ API å°†è¿…é€Ÿæˆä¸ºæ ‡å‡†ã€‚\n\næˆ‘å¿…é¡»è¯´ï¼Œé…ç½® GAPI æ„Ÿè§‰ç›´è§‚è€Œæ˜ç¡®ã€‚å®ƒçš„å®‰å…¨æ¨¡å‹å–å¾—äº†å¹³è¡¡ï¼Œèµ‹äºˆå¼€å‘äººå‘˜æƒåŠ›è€Œä¸ä¼šæŸå®³å®‰å…¨æ€§ã€‚è€Œä¸”æ— ç¼çš„åŸºç¡€è®¾æ–½ç®¡ç†ï¼Ÿä½ å¯ä»¥åœ¨ä¸è§¦åŠ \u0060*Routes\u0060 çš„æƒ…å†µä¸‹åœ¨ä¸åŒçš„å®ç°ä¹‹é—´åˆ‡æ¢ã€‚\n\nç°åœ¨å°±ç”¨ \u0060Cilium\u0060 äº¤æ¢æˆ‘çš„ Ingress Controller å—ï¼Ÿ**è¿˜æ²¡æœ‰ï¼Œä½†å®ƒå³å°†åˆ°æ¥**ã€‚\n\nå€¼å¾—å¼ºè°ƒçš„æ˜¯ï¼ŒCilium çš„åŠŸèƒ½éå¸¸å¹¿æ³›ï¼šåœ¨ Kubernetes å‘¨å›´æœ‰å¤§é‡çš„å·¥å…·ï¼ŒCilium è„±é¢–è€Œå‡ºï¼Œæ‰¿è¯ºæä¾›æŒ‡æ ‡ã€è·Ÿè¸ªã€æœåŠ¡ç½‘æ ¼ã€å®‰å…¨æ€§ï¼Œä»¥åŠ *Ingress Controller* ä¸ GAPIã€‚\n\nç„¶è€Œï¼Œéœ€è¦æ³¨æ„ä¸€äº›æŒ‘æˆ˜ï¼š\n\n- [TCP å’Œ UDP æ”¯æŒ](https:\/\/github.com\/cilium\/cilium\/issues\/21929)\n- [GRPC æ”¯æŒ](https:\/\/github.com\/cilium\/cilium\/issues\/21928)\n- éœ€è¦ä½¿ç”¨å˜å¼‚è§„åˆ™æ¥é…ç½®äº‘ç»„ä»¶ï¼ˆ[Github Issue](https:\/\/github.com\/cilium\/cilium\/issues\/25357)ï¼‰ã€‚\n- æœ¬æ–‡è®¨è®ºçš„è®¸å¤šåŠŸèƒ½ä»å¤„äºå®éªŒé˜¶æ®µã€‚ä¾‹å¦‚ï¼Œæœ€æ–°ç‰ˆæœ¬ï¼ˆæˆ‘å†™ä½œæ—¶çš„ \u0060v1.14.2\u0060ï¼‰æ”¯æŒçš„ [æ‰©å±•åŠŸèƒ½](https:\/\/github.com\/cilium\/cilium\/pull\/27472)ã€‚æˆ‘å°è¯•è®¾ç½®ä¸€ä¸ªç®€å•çš„ HTTP\u003eHTTPS é‡å®šå‘ï¼Œä½†é‡åˆ°äº† [è¿™ä¸ªé—®é¢˜](https:\/\/github.com\/kubernetes-sigs\/gateway-api\/issues\/1185)ã€‚å› æ­¤ï¼Œæˆ‘é¢„è®¡ API å°†æ¥ä¼šæœ‰ä¸€äº›ä¿®æ”¹ã€‚\n\nè™½ç„¶æˆ‘åªæ˜¯æ¶‰åŠäº† Cilium çš„ GAPI èƒ½å¤Ÿæä¾›çš„ä¸€å°éƒ¨åˆ†å†…å®¹ï¼ˆè€å®è¯´ï¼Œè¿™ç¯‡æ–‡ç« å·²ç»ç›¸å½“é•¿äº†ï¼‰ï¼Œä½†æˆ‘å¸Œæœ›æˆ‘ä»¬å¯ä»¥å¾ˆå¿«åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒã€‚ä½†è€ƒè™‘åˆ°å‰é¢æåˆ°çš„å‡ ç‚¹ï¼Œæˆ‘å»ºè®®ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æƒ³ä¸ºæœªæ¥åšå‡†å¤‡ï¼Œé‚£ä¹ˆç°åœ¨æ˜¯æ—¶å€™äº†ï¼\n\n## å‚è€ƒèµ„æ–™\n\n- https:\/\/gateway-api.sigs.k8s.io\/\n- https:\/\/docs.cilium.io\/en\/latest\/network\/servicemesh\/gateway-api\/gateway-api\/#gs-gateway-api\n- https:\/\/isovalent.com\/blog\/post\/cilium-gateway-api\/\n- https:\/\/isovalent.com\/blog\/post\/tutorial-getting-started-with-the-cilium-gateway-api\/\n- Isovalent çš„ [labs](https:\/\/isovalent.com\/resource-library\/labs\/) æ˜¯å¼€å§‹ä½¿ç”¨ Gateway API å¹¶ä¸”ä½ å°†è·å¾—æ–°çš„å¾½ç« ä»¥æ·»åŠ åˆ°ä½ çš„æ”¶è—ä¸­çš„å¥½æ–¹æ³•\n', '\/trans\/cilium-gateway-api\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Cilium éƒ¨ç½²å’Œé…ç½® Gateway APIï¼Œä¸€ä¸ªæ–°çš„æœåŠ¡ç½‘æ ¼ APIï¼Œç”¨äºç®¡ç† Kubernetes ä¸­çš„æœåŠ¡é—´é€šä¿¡ã€‚æ–‡ç« è¯¦ç»†è¯´æ˜äº† Gateway API çš„æ¦‚å¿µå’Œç»„ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Cilium çš„ç‰¹æ€§å’Œå·¥å…·ï¼Œå®ç°é«˜æ•ˆå’Œçµæ´»çš„è·¯ç”±ç­–ç•¥ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/jwts-authenticate-services-api-gateways/">[è¯‘] JWT åœ¨ API ç½‘å…³ä¸­çš„è§’è‰²ï¼šæœåŠ¡é—´è®¤è¯çš„æ–°è§†è§’</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/12/08</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://www.solo.io/blog/jwts-authenticate-services-api-gateways/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('JWT åœ¨ API ç½‘å…³ä¸­çš„è§’è‰²ï¼šæœåŠ¡é—´è®¤è¯çš„æ–°è§†è§’', 'è¿™ç¯‡åšå®¢æ¢è®¨äº†åœ¨äº‘åŸç”Ÿæ¶æ„ä¸­ä½¿ç”¨ JSON Web Tokensï¼ˆJWTï¼‰è¿›è¡ŒæœåŠ¡é—´é€šä¿¡çš„å¤æ‚æ€§ã€‚å®ƒè¯¦ç»†è®¨è®ºäº†é€šè¿‡ API ç½‘å…³å’ŒæœåŠ¡ç½‘æ ¼å®ç°å®‰å…¨è®¤è¯çš„ä¸¤ç§æ–¹æ³•ï¼Œå¼ºè°ƒäº†ä½¿ç”¨ JWT çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§ã€å¯†é’¥ç®¡ç†å’Œæ€§èƒ½é—®é¢˜ã€‚', '\näº‘åŸç”Ÿæ¶æ„ä¸­çš„ API ç½‘å…³ç»„ä»¶è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå°†å…³é”®çš„ API å®‰å…¨æ€§å’Œç­–ç•¥åŠŸèƒ½å¸è½½åˆ°ä¸€ä¸ªå…¬å…±ä½ç½®ï¼Œä½¿åç«¯ API å’ŒæœåŠ¡èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚API èº«ä»½éªŒè¯ã€æˆæƒã€å®¡è®¡ã€é™æµç­‰ä»»åŠ¡å¯èƒ½ä¼šéå¸¸å¤æ‚ä¸”éš¾ä»¥æ­£ç¡®å®ç°ï¼Œå› æ­¤è®¸å¤šç»„ç»‡é€‰æ‹©ä½¿ç”¨ API ç½‘å…³æ¥å¤„ç†å®ƒä»¬ã€‚\n\né‚£ä¹ˆå¯¹äºæœåŠ¡ä¸æœåŠ¡ï¼ˆS2Sï¼‰æˆ–å†…éƒ¨ä¸œ\/è¥¿æµé‡å‘¢ï¼Ÿå¼ºåˆ¶ S2S æµé‡â€œå›å¤´â€é€šè¿‡ API ç½‘å…³ä¼šå¼•å…¥é¢å¤–çš„è·³è·ƒã€æ›´å¤šçš„å»¶è¿Ÿã€å¢åŠ çš„æµé‡ä»¥åŠæ•ˆç‡é™ä½ã€‚\n\n![é€šè¿‡ API ç½‘å…³çš„ S2S æµé‡â€œå›å¤´â€ç¤ºæ„å›¾](hairpin-api-gateway-calls.png)\n\nä½†æ˜¯ï¼Œå¦‚æœæ‚¨è·³è¿‡ API ç½‘å…³ç›´æ¥è°ƒç”¨æœåŠ¡ï¼Œå¦‚ä½•ç¡®ä¿æµé‡çš„å®‰å…¨æ€§ï¼Ÿæ¥æ”¶æœåŠ¡å¦‚ä½•è¿›è¡Œèº«ä»½éªŒè¯å¹¶çŸ¥é“æ˜¯è°åœ¨è°ƒç”¨å®ƒï¼Ÿ\n\n![æ˜¾ç¤º Service B éœ€è¦å¯¹ Service A è¿›è¡Œèº«ä»½éªŒè¯çš„ç¤ºæ„å›¾](service-a-b.png)\n\nä¿éšœ S2S é€šä¿¡çš„ä¸¤ç§å¸¸è§æ–¹å¼æ˜¯ï¼š\n\n1. ä½¿ç”¨ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTLSï¼‰å’Œå®¢æˆ·ç«¯è¯ä¹¦ï¼ˆåŒå‘ TLS æˆ– mTLSï¼‰ã€‚\n2. ä½¿ç”¨ç­¾åçš„ JSON Web Tokensï¼ˆJWTï¼‰ã€‚\n\n[æœåŠ¡ç½‘æ ¼](https:\/\/www.solo.io\/topics\/service-mesh\/)é€šè¿‡ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•è‡ªåŠ¨åŒ–äº†è®¸å¤šæœ€ä½³å®è·µå¹¶å‡è½»äº†ä¸ä¹‹ç›¸å…³çš„[é—®é¢˜](https:\/\/istio.io\/latest\/blog\/2023\/secure-apps-with-istio\/)ã€‚\n\nå¼€å‘äººå‘˜å¯ä»¥é€‰æ‹©ä½¿ç”¨ JWT è¿›è¡Œ S2S èº«ä»½éªŒè¯ï¼Œä½†è¿™ä¼šâ€œå‰Šå¼±â€API ç½‘å…³çš„é¢„æœŸåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨æ›¾æœŸæœ› API ç½‘å…³å¤„ç†çš„æ‰€æœ‰å®‰å…¨æ€§å¤æ‚æ€§å’Œè„†å¼±æ€§å¿…é¡»åœ¨æ¯ä¸ª S2S é€šä¿¡çš„å¾®æœåŠ¡ä¸­é‡æ–°åˆ›å»ºå’Œå¤åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ï¼Œå› ä¸ºä½¿ç”¨ JWT è¿›è¡Œ S2S èº«ä»½éªŒè¯ä¼šå¼•å…¥å¤æ‚æ€§å’Œå¯¹ç»†èŠ‚çš„ä¸¥æ ¼è¦æ±‚ã€‚ï¼ˆæœ‰å…³æ­¤ä¸»é¢˜å’Œä¸‹é¢çš„åœºæ™¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è§‚çœ‹ Hoot ç¬¬ 59 é›†ï¼šâ€œ[JWT ä¸ Service-to-Service èº«ä»½éªŒè¯çš„æ¯”è¾ƒ](https:\/\/youtu.be\/Q2KfNUBfnjo)â€ã€‚æ‰€æœ‰æ¼”ç¤ºéƒ½å¯ä»¥åœ¨æˆ‘ä»¬çš„[GitHub ä»“åº“](https:\/\/github.com\/peterj\/jwts-for-services\/tree\/main)ä¸­æ‰¾åˆ°ã€‚ï¼‰\n\nè™½ç„¶æœ‰ä¸€äº›å‡ºè‰²çš„å¤„ç† JWT çš„æ¡†æ¶å’Œåº“ï¼Œè€Œ JWT ç¡®å®æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼Œä½†å°† JWT ç”¨äº S2S æµé‡çš„èº«ä»½éªŒè¯æ˜¯å¤æ‚ä¸”ç¹é‡çš„ï¼Œå¹¶ä¸”éœ€è¦å¼€å‘äººå‘˜éå¸¸å‡†ç¡®åœ°å®Œæˆå·¥ä½œã€‚è¿™ç§å¤æ‚æ€§ï¼ˆæˆ–ç¼ºä¹æ„è¯†ï¼‰å¯èƒ½ä¼šé™ä½æ€»ä½“å®‰å…¨æ€§ï¼Œå¦‚æœå¼€å‘äººå‘˜é‡‡å–æ·å¾„æˆ–å¿½è§†å…³é”®å±æ€§ï¼Œå¯èƒ½ä¼šé™ä½æ€»ä½“å®‰å…¨æ€§ã€‚å¼€å‘äººå‘˜è¿˜éœ€è¦ä»¥ç‰¹å®šäºè¯­è¨€å’Œæ¡†æ¶çš„æ–¹å¼æ‰§è¡Œæ­¤æ“ä½œï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ Java è§£å†³æ­¤é—®é¢˜ä¸ä½¿ç”¨ Go æˆ– Node.js ä¸åŒï¼‰ã€‚åœ¨æ‰€æœ‰ä»£ç åº“ä¸­ç»´æŠ¤ã€æ‰“è¡¥ä¸å’Œå®¡æ ¸æ¯ä¸ªå®ç°éƒ½éœ€è¦ä»˜å‡ºæˆæœ¬ã€‚\n\n## å¦‚ä½•ä½¿ç”¨ JWT è¿›è¡Œ S2S é€šä¿¡èº«ä»½éªŒè¯\n\næœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åˆ›å»º JWT ä»¥è¿›è¡Œ S2S é€šä¿¡èº«ä»½éªŒè¯ï¼šä½¿ç”¨èº«ä»½æä¾›è€…ï¼ˆIdPï¼‰ï¼ˆä¹Ÿç§°ä¸ºå®‰å…¨ä»¤ç‰ŒæœåŠ¡æˆ– STSï¼‰æˆ–å…è®¸å„ä¸ªæœåŠ¡è‡ªè¡Œç­¾ç½² JWTã€‚ï¼ˆå¦‚æœæ‚¨å¯¹ JWT æ¦‚å¿µä¸ç†Ÿæ‚‰æˆ–éœ€è¦å¤ä¹ ï¼Œè¯·æŸ¥çœ‹ Auth0 æä¾›çš„[JWT æ¦‚è¿°](https:\/\/auth0.com\/docs\/secure\/tokens\/json-web-tokens)ã€‚ï¼‰\n\n### é€‰é¡¹ 1ï¼šä½¿ç”¨ STS å‘æ”¾ä»¤ç‰Œ\n\nç¬¬ä¸€ç§æ–¹æ³•æ¶‰åŠä½¿ç”¨å®‰å…¨ä»¤ç‰ŒæœåŠ¡ï¼ˆSTSï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä¿¡ä»»çš„èº«ä»½æˆ–ä»¤ç‰Œæä¾›è€…ï¼Œä¾‹å¦‚[Keycloak](https:\/\/www.keycloak.org\/)ã€[Okta](https:\/\/www.okta.com\/)æˆ–[Auth0](https:\/\/auth0.com\/)ï¼Œç”¨äºå‘æ”¾ä»£è¡¨ç‰¹å®šæœåŠ¡çš„ä»¤ç‰Œã€‚\n\nåœ¨æ­¤æ–¹æ³•ä¸­ï¼ŒæœåŠ¡ä½¿ç”¨é•¿æœŸå‡­æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç æˆ– OAuth2.0 å®¢æˆ·ç«¯å‡­æ®ï¼‰ä¸ STS äº¤æ¢ JWTï¼Œè¡¨æ˜â€œæˆ‘æ˜¯ Service Aâ€ã€‚\n\næ³¨æ„ï¼šé•¿æœŸå‡­æ®åº”å®‰å…¨å­˜å‚¨å¹¶æœ‰é™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨å¯åŠ¨æ—¶ä½¿ç”¨å®ƒä¸€æ¬¡æ¥å¼•å¯¼èº«ä»½ï¼Œå¹¶ä¸”ä»¥åä¸å†ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œè¿™äº›å‡­æ®åº”ä»…å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚\n\nSTS ä½¿ç”¨å…¶ç§é’¥ç­¾ç½² JWTï¼Œå¯ä»¥ä½¿ç”¨å…¶å…¬é’¥éªŒè¯ JWTã€‚ç„¶åï¼ŒService A å°† JWT é™„åŠ åˆ°å‘é€ç»™ Service B çš„è¯·æ±‚ä¸­ã€‚ä»è¿™é‡Œï¼ŒService B å¯ä»¥é€šè¿‡ä½¿ç”¨ STS çš„å…¬é’¥éªŒè¯ JWT çš„ç­¾åæ¥éªŒè¯ JWT æ˜¯ç”± STS ç­¾å‘çš„ã€‚\n\n![æ˜¾ç¤ºæœåŠ¡å¦‚ä½•ç›¸äº’éªŒè¯çš„ç¤ºæ„å›¾](authentication.png)\n\nä¸ºäº†ä½¿æ­¤å·¥ä½œæ­£å¸¸è¿è¡Œï¼š\n\n1. æµé‡å¿…é¡»åŠ å¯†ã€‚\n2. æœåŠ¡ B å¿…é¡»æ£€æŸ¥ JWT çš„\u0060aud\u0060å£°æ˜ã€è¿‡æœŸæ—¶é—´ã€é¢å‘æ—¶é—´ä»¥åŠä¸æ—©äºæ—¶é—´ã€‚\n3. å½“ STS ç­¾å‘çš„ JWT ç­¾åå¯†é’¥è½®æ¢æ—¶ï¼ŒæœåŠ¡ B å¿…é¡»å‡†å¤‡å¥½æ›´æ–° STS çš„å…¬é’¥ã€‚\n\nåŠ å¯†æµé‡è‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ JWT æ—¶ï¼Œå®ƒä»¬ä»£è¡¨äº†ä¸€ä¸ªâ€œæ‰¿è½½ä»¤ç‰Œâ€ï¼Œå› æ­¤æ‹¥æœ‰ä»¤ç‰Œçš„ä»»ä½•äººéƒ½å¯ä»¥å†’å…… Service Aã€‚åœ¨ Service A å’Œ Service B ä¹‹é—´åŠ å¯†æµé‡ï¼ˆä¾‹å¦‚ä½¿ç”¨å•å‘æœåŠ¡å™¨ TLSï¼‰æœ‰åŠ©äºå‡è½»è¿™ä¸ªé—®é¢˜ã€‚\n\nService B è¿˜å¿…é¡»æ£€æŸ¥ JWT çš„è¿‡æœŸæ—¶é—´ï¼ˆ\u0060exp\u0060ï¼‰ã€é¢å‘æ—¶é—´ï¼ˆ\u0060iat\u0060ï¼‰ã€ä¸æ—©äºæ—¶é—´ï¼ˆ\u0060nbf\u0060ï¼‰ä»¥åŠç‰¹åˆ«æ˜¯\u0060aud\u0060å£°æ˜ï¼Œä»¥éªŒè¯ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆï¼ˆæœªè¿‡æœŸï¼Œä½äºå…¶æ—¶é—´çª—å£å†…å¹¶ç”¨äº Service B çš„ä½¿ç”¨ï¼‰ã€‚JWT ä½¿ç”¨è¿™ä¸ªçº¦å®šæ¥é˜²èŒƒé‡æ”¾æ”»å‡»ï¼Œå…¶ä¸­æ”»å‡»è€…å†’å…… Service Bï¼Œä» Service A è·å–ä»¤ç‰Œï¼Œç„¶åå†’å…… Service A æ¥è°ƒç”¨ Service Cã€‚æœ‰æ•ˆçš„ Service C ä¼šæ£€æŸ¥\u0060aud\u0060å£°æ˜ï¼Œçœ‹åˆ°ä»£è¡¨ Service A çš„ JWT æ˜¯ä¸º Service B è€Œè®¾è®¡çš„ï¼Œç„¶åæ‹’ç»å®ƒã€‚\n\næ¯æ¬¡è°ƒç”¨æœåŠ¡ A éƒ½å¿…é¡»ä½¿ç”¨ä¸åŒçš„ JWTï¼Œå› ä¸º\u0060aud\u0060å£°æ˜ä¼šä¸åŒã€‚å°è¯•ä½¿ç”¨æ²¡æœ‰\u0060aud\u0060å£°æ˜çš„ JWT æˆ–ä½¿ç”¨é€šé…ç¬¦\u0060aud\u0060å£°æ˜ä¼šå¢åŠ  JWT è¢«ç ´åçš„é£é™©ã€‚é¿å…è¿™æ ·åšã€‚\n\næœ€åï¼Œå¸¸å¸¸è¢«å¿½ç•¥çš„æ˜¯è½®æ¢ STS çš„å…¬é’¥ã€‚åœ¨è®¡åˆ’çš„å¯†é’¥è½®æ¢æˆ–è®¡åˆ’çš„æ’¤é”€ STS ç”¨äºç­¾ç½² JWT çš„å¯†é’¥æ—¶ï¼ŒService Bï¼ˆæˆ–ä»»ä½•ä¾èµ– STS è¿›è¡ŒéªŒè¯çš„æœåŠ¡ï¼‰å¿…é¡»èƒ½å¤Ÿå¤„ç†æ›´æ–°çš„ç­¾åå…¬é’¥ã€‚\n\n### é€‰é¡¹ 2ï¼šè®©æœåŠ¡è‡ªè¡Œç­¾ç½²å…¶ä»¤ç‰Œ\n\nç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨æœåŠ¡ç‰¹å®šçš„å¯†é’¥æ¥ç­¾ç½² JWTã€‚å¯ä»¥ä½¿ç”¨å¯¹ç§°å¯†é’¥æˆ–éå¯¹ç§°å¯†é’¥ã€‚\n\n![ä½¿ç”¨ç‰¹å®šäºæœåŠ¡çš„å¯†é’¥è¿›è¡Œ S2S èº«ä»½éªŒè¯çš„ç¤ºæ„å›¾](authentication-service-specific-keys.png)\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒService A ä½¿ç”¨è‡ªå·±çš„å¯†é’¥æ¥ç­¾ç½²å‘é€ç»™ Service Bï¼ˆæˆ–ä»»ä½•å…¶ä»–æœåŠ¡ï¼‰çš„ JWTã€‚Service B å°†éœ€è¦ Service A çš„å…¬é’¥ï¼ˆæˆ–å¯¹ç§°å¯†é’¥ï¼Œç”±äºå¯†é’¥äº¤æ¢å’Œå†’å……é—®é¢˜æ›´åŠ å±é™©ï¼‰æ¥éªŒè¯ Service A å‘é€çš„ JWTã€‚å®é™…ä¸Šï¼ŒService B å°†éœ€è¦æ¯ä¸ªè°ƒç”¨å®ƒçš„æœåŠ¡çš„å…¬é’¥ï¼Œè¿™äº›æœåŠ¡ä½¿ç”¨ JWT ä½œä¸ºèº«ä»½éªŒè¯ä¸»ä½“ã€‚\n\nä¸ STS ç­¾å‘çš„ JWT ç¤ºä¾‹ä¸€æ ·ï¼ŒæœåŠ¡ä¹‹é—´çš„æµé‡å¿…é¡»åŠ å¯†ï¼ŒService B è¿˜å¿…é¡»æ£€æŸ¥\u0060aud\u0060å£°æ˜ï¼Œå¹¶ä¸”æ‚¨éœ€è¦ä¸€ç§ç­¾ç½²å…¬é’¥è½®æ¢çš„æ–¹æ³•ã€‚æ‚¨è¿˜å¿…é¡»ä¸ºæ¯ä¸ªè°ƒç”¨çš„æœåŠ¡ä½¿ç”¨ä¸åŒçš„ JWTã€‚\n\n![æœåŠ¡ B æ£€æŸ¥ aud å£°æ˜](different-jwt-dependent-services.png)\n\nå¼€å‘äººå‘˜å¿…é¡»é‡‡å–æªæ–½å¹¶è·Ÿè¸ªè®¸å¤šå†…å®¹ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æ­£ç¡®ã€‚è¯ä¹¦è¿˜å¿…é¡»è‡³å°‘åˆ†å‘ç»™ä¸€åŠçš„æœåŠ¡ï¼ˆæ¥æ”¶ç«¯çš„æœåŠ¡ï¼‰ä»¥æä¾›è‡³å°‘å•å‘ TLSã€‚æ­¤å¤–ï¼Œæ•´ä¸ªè¿‡ç¨‹çš„å…³é”®æ˜¯å¯†é’¥ç®¡ç†ã€è½®æ¢å’Œå®‰å…¨ä¿ç®¡å¯†é’¥ã€‚\n\n## JWT å¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹\n\næˆ‘ä»¬å·²ç»ä»‹ç»äº† JWT å¯ç”¨äºè¡¨ç¤ºæœåŠ¡èº«ä»½çš„ä¸€äº›æ–¹å¼ï¼Œå¹¶æå‡ºäº†å…³æ³¨çš„é¢†åŸŸã€‚åœ¨æœåŠ¡æ¶æ„ä¸­ï¼Œæœ‰å‡ ä¸ªéœ€è¦å¯†åˆ‡å…³æ³¨çš„é¢†åŸŸï¼Œä»¥é¿å…å®‰å…¨æ¼æ´ã€‚å¦‚æœè¿™äº›ä¸æ˜¯ç‰¢ä¸å¯ç ´çš„ï¼Œæ‚¨å°†ä¸ºæ”»å‡»è€…æä¾›æœºä¼šæ¥ç ´åæ‚¨çš„ç³»ç»Ÿã€‚\n\nåœ¨ä½¿ç”¨å®¢æˆ·ç«¯è¯ä¹¦\/mTLSï¼ˆä¾‹å¦‚æœåŠ¡ç½‘æ ¼ï¼‰å’Œ JWT è¿›è¡Œèº«ä»½éªŒè¯ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼šJWT é€šè¿‡ç½‘ç»œå‘é€æ•æ„Ÿçš„æ‰¿è½½ä»¤ç‰Œææ–™ï¼Œè€Œ mTLS ä¸ä¼šã€‚ä½¿ç”¨ mTLS æ—¶ï¼Œåªä¼šå‘é€å…¬é’¥ï¼Œè€Œä¸ä¼šå‘é€ç§é’¥ï¼Œä¼šåå•†ä¼šè¯å¯†é’¥ã€‚å¦‚æœ JWT æ³„éœ²ï¼ŒJWT æ˜¯ç§å¯†ææ–™ï¼Œå¯ä»¥è¢«é‡æ”¾ã€‚å¯¹äºè¯ä¹¦ï¼Œåªæœ‰å…¬å…±è¯ä¹¦è¢«å…±äº«ã€‚\n\nä¸ºé˜²æ­¢é‡æ’­æ‰¿è½½ä»¤ç‰Œï¼Œæ‚¨å¿…é¡»é€šè¿‡è®¾ç½®çŸ­æš‚çš„åˆ°æœŸæ—¶é—´ï¼Œç†æƒ³æƒ…å†µä¸‹åªæœ‰å‡ åˆ†é’Ÿï¼Œæ¥é™åˆ¶å…¶æš´éœ²ã€‚è¿™ä¼šå¢åŠ æœåŠ¡åˆ·æ–°å…¶ JWT ä»¥è¿›è¡Œè¯·æ±‚çš„è´£ä»»ã€‚è®¾ç½®æ•°å°æ—¶ã€æ•°å¤©æˆ–æ•°æœˆçš„åˆ°æœŸæ—¶é—´å‘ç”Ÿå¾—å¤ªé¢‘ç¹ã€‚è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚\n\nå¦ä¸€ä¸ªé‡å¤§çš„å®‰å…¨æ¼æ´æ˜¯ï¼Œåœ¨ä½¿ç”¨ STS è·å– JWT ææ–™æ—¶ï¼Œæ‚¨ä¼šå¤šæ¬¡é€šè¿‡ç½‘ç»œå‘é€é•¿æœŸå‡­æ®ï¼ˆä¾‹å¦‚å®¢æˆ·ç«¯å‡­è¯æµç¨‹ï¼‰ã€‚è¿™äº›é•¿æœŸå‡­æ®éå¸¸æ•æ„Ÿï¼Œåº”è°¨æ…ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œåœ¨å¯åŠ¨æ—¶ä½¿ç”¨ï¼‰ï¼Œè€Œä¸åº”è¿ç»­ä½¿ç”¨ã€‚\n\næ­¤å¤–ï¼Œä½¿ç”¨é€šé…ç¬¦\u0060aud\u0060å£°æ˜æˆ–å®Œå…¨çœç•¥\u0060aud\u0060å£°æ˜ä¹Ÿæ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ã€‚æœªèƒ½åœ¨æœåŠ¡ä¹‹é—´ä¸€è‡´ä½¿ç”¨è¿™äº›çº¦å®šä»¥è¿›è¡Œèº«ä»½éªŒè¯ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ã€‚ç¡®ä¿ä¸º*æ¯ä¸ª*è°ƒç”¨çš„æœåŠ¡åˆ›å»ºå…·æœ‰æ­£ç¡®\u0060aud\u0060å£°æ˜çš„ JWTã€‚\n\næœ€åï¼Œå¯†é’¥è½®æ¢ä¸çŸ­æš‚åˆ°æœŸæ—¶é—´å’Œ aud å£°æ˜æ£€æŸ¥åŒæ ·é‡è¦ã€‚åœ¨å‘ç”Ÿè¿è§„äº‹ä»¶æ—¶ï¼Œä½¿å¯†é’¥æ— æ•ˆæ˜¯æœ€åçš„åŠªåŠ›ï¼Œåº”å°½å¿«ä¸”é«˜æ•ˆåœ°å¤„ç†ã€‚\n\n## JWT çš„å¤æ‚æ€§æ˜¯æœåŠ¡ç½‘æ ¼ç®€åŒ–äº‹ç‰©çš„åœ°æ–¹\n\næœåŠ¡ç½‘æ ¼ç®€åŒ–äº†æœåŠ¡ä¹‹é—´çš„èº«ä»½éªŒè¯ï¼Œå¹¶å…è®¸å¼€å‘äººå‘˜ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯æ­£ç¡®åœ°å¤„ç† JWT å’Œç§˜å¯†ææ–™ï¼ˆå¸Œæœ›å¦‚æ­¤ï¼‰ã€‚å°±åƒ API ç½‘å…³åº”ç”¨äºå¤„ç†åŒ—\/å—å’Œå…¥å£æµé‡çš„å®‰å…¨æ€§ä¸€æ ·ï¼ŒæœåŠ¡ç½‘æ ¼åº”ç”¨äºå¤„ç†ä¸œ\/è¥¿å’Œ S2S æµé‡çš„å®‰å…¨æ€§ã€‚ä¿æŒæœåŠ¡å’Œ API ä¸“æ³¨äºå®ƒä»¬å¯ä»¥æä¾›çš„ä¸åŒ iating ä¸šåŠ¡ä»·å€¼ï¼Œè€Œä¸æ˜¯æ¨¡æ¿ï¼ˆä½†æå…¶é‡è¦çš„ï¼‰çš„å®‰å…¨æ€§ä»£ç ã€‚\n', '\/trans\/jwts-authenticate-services-api-gateways\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">è¿™ç¯‡åšå®¢æ¢è®¨äº†åœ¨äº‘åŸç”Ÿæ¶æ„ä¸­ä½¿ç”¨ JSON Web Tokensï¼ˆJWTï¼‰è¿›è¡ŒæœåŠ¡é—´é€šä¿¡çš„å¤æ‚æ€§ã€‚å®ƒè¯¦ç»†è®¨è®ºäº†é€šè¿‡ API ç½‘å…³å’ŒæœåŠ¡ç½‘æ ¼å®ç°å®‰å…¨è®¤è¯çš„ä¸¤ç§æ–¹æ³•ï¼Œå¼ºè°ƒäº†ä½¿ç”¨ JWT çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§ã€å¯†é’¥ç®¡ç†å’Œæ€§èƒ½é—®é¢˜ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/is-it-too-early-to-leverage-ai-for-webassembly/">[è¯‘] å°† AI åº”ç”¨äº WebAssembly è¿˜ä¸ºæ—¶è¿‡æ—©å—ï¼Ÿ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2023/09/07</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/is-it-too-early-to-leverage-ai-for-webassembly/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('å°† AI åº”ç”¨äº WebAssembly è¿˜ä¸ºæ—¶è¿‡æ—©å—ï¼Ÿ', 'Fermyon Technologies è®¤ä¸ºï¼Œå°† AI åº”ç”¨äº WebAssembly å¹¶ä¸ä¸ºæ—¶è¿‡æ—©ã€‚', '\næ‘˜è¦ï¼šFermyon Technologies è®¤ä¸ºï¼Œå°† AI åº”ç”¨äº WebAssembly å¹¶ä¸ä¸ºæ—¶è¿‡æ—©ã€‚WebAssembly ä¸ºåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ¨ç†æä¾›äº†åšå®çš„åŸºç¡€ï¼Œè€Œä¸”åœ¨è®¸å¤šä¸åŒçš„ç¯å¢ƒä¸­ï¼Œå¦‚æµè§ˆå™¨å’Œç‰©è”ç½‘è®¾å¤‡ç­‰ï¼Œé€šè¿‡å°†è¿™äº›å·¥ä½œè´Ÿè½½ç§»åŠ¨åˆ°ç»ˆç«¯ç”¨æˆ·è®¾å¤‡ä¸Šï¼Œå¯ä»¥æ¶ˆé™¤å»¶è¿Ÿå¹¶é¿å…å°†æ•°æ®å‘é€åˆ°é›†ä¸­å¼æœåŠ¡å™¨ï¼ŒåŒæ—¶èƒ½å¤Ÿåœ¨è¾¹ç¼˜å‘ç°çš„å¤šç§å¼‚æ„è®¾å¤‡ä¸Šè¿è¡Œã€‚Fermyon Serverless AI é€šè¿‡æä¾›è¶…è¿‡ 100 å€äºå…¶ä»–æŒ‰éœ€ AI åŸºç¡€è®¾æ–½æœåŠ¡çš„äºšç§’å†·å¯åŠ¨æ—¶é—´æ¥è§£å†³äº†ä¼ä¸šçº§ AI åº”ç”¨ç¨‹åºæˆæœ¬é«˜çš„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ç§å…±ç”Ÿå…³ç³»ã€‚\n\n---\n\näººå·¥æ™ºèƒ½åŠå…¶åœ¨ ITã€è½¯ä»¶å¼€å‘å’Œè¿è¥æ–¹é¢çš„åº”ç”¨åˆšå¼€å§‹å‘æŒ¥ä½œç”¨ï¼Œé¢„ç¤ºç€äººç±»è§’è‰²å°†å¦‚ä½•åœ¨è¿‘æœŸå’Œé•¿æœŸå†…æ¼”å˜ï¼Œç‰¹åˆ«æ˜¯åœ¨è¾ƒå°çš„è§„æ¨¡ä¸Šï¼ŒWebAssembly ä»£è¡¨ç€ä¸€ç§æ­£åœ¨å¼•èµ·é‡å¤§å…³æ³¨çš„æŠ€æœ¯ï¼ŒåŒæ—¶è¯æ˜äº†å…¶å¯è¡Œæ€§ï¼Œä½†æˆåŠŸçš„å•†ä¸šæ¨¡å‹å°šæœªå®ç°ï¼Œä¸»è¦æ˜¯ç”±äºæœ€ç»ˆç«¯ç‚¹çš„ç¼ºä¹æ ‡å‡†åŒ–ã€‚ä¸æ­¤åŒæ—¶ï¼Œè‡³å°‘æœ‰ä¸€å®¶ä¾›åº”å•† Fermyon è®¤ä¸ºï¼Œåœ¨è¿™ä¸ªé˜¶æ®µåº”ç”¨ AI äº WebAssembly å¹¶ä¸ä¸ºæ—¶è¿‡æ—©ã€‚\n\né‚£ä¹ˆï¼ŒAI å¦‚ä½•æ½œåœ¨åœ°å¸®åŠ© Wasm çš„å¼€å‘å’Œé‡‡ç”¨ï¼Œè¿™æ˜¯å¦ä¸ºæ—¶è¿‡æ—©ï¼Ÿæ­£å¦‚ VMware CTO åŠå…¬å®¤çš„é«˜çº§å·¥ç¨‹å¸ˆ Angel M De Miguel Meana æ‰€æŒ‡å‡ºçš„é‚£æ ·ï¼Œè‡ªä» ChatGPT æ¨å‡ºä»¥æ¥ï¼ŒAI ç”Ÿæ€ç³»ç»Ÿå·²ç»å‘ç”Ÿäº†å·¨å¤§çš„å˜åŒ–ï¼ŒWebAssembly ä¸ºåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ¨ç†æä¾›äº†åšå®çš„åŸºç¡€ï¼Œè€Œä¸”åœ¨è®¸å¤šä¸åŒçš„ç¯å¢ƒä¸­ï¼Œå¦‚æµè§ˆå™¨å’Œç‰©è”ç½‘è®¾å¤‡ç­‰ï¼Œé€šè¿‡å°†è¿™äº›å·¥ä½œè´Ÿè½½ç§»åŠ¨åˆ°ç»ˆç«¯ç”¨æˆ·è®¾å¤‡ä¸Šï¼Œå¯ä»¥æ¶ˆé™¤å»¶è¿Ÿå¹¶é¿å…å°†æ•°æ®å‘é€åˆ°é›†ä¸­å¼æœåŠ¡å™¨ï¼ŒåŒæ—¶èƒ½å¤Ÿåœ¨è¾¹ç¼˜å‘ç°çš„å¤šç§å¼‚æ„è®¾å¤‡ä¸Šè¿è¡Œã€‚ç”±äº Wasm ç”Ÿæ€ç³»ç»Ÿä»åœ¨å…´èµ·ï¼Œå› æ­¤åœ¨æ—©æœŸé˜¶æ®µé›†æˆ AI å°†æœ‰åŠ©äºæ¨åŠ¨æ–°çš„å’Œç°æœ‰çš„ä¸ AI ç›¸å…³çš„æ ‡å‡†ã€‚è¿™æ˜¯ä¸€ç§å…±ç”Ÿå…³ç³»ã€‚\n\n## å®Œç¾çš„åŒ¹é…\n\nFermyon Technologies çš„è”åˆåˆ›å§‹äººå…¼é¦–å¸­æ‰§è¡Œå®˜ Matt Butcher å‘Šè¯‰ The New Stackï¼šâ€œæˆ‘ä»¬æˆç«‹ Fermyon çš„ç›®æ ‡æ˜¯æ‰“é€ ä¸‹ä¸€ä»£æ— æœåŠ¡å™¨å¹³å°ã€‚AI æ˜¾ç„¶æ˜¯è¿™ä¸€ä¸‹ä¸€ä»£çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æˆ‘ä»¬çš„è¡Œä¸šä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°é©å‘½æ€§çš„æŠ€æœ¯ä¸€èµ·æˆé•¿ï¼šJava å’Œ Webã€äº‘å’Œå¾®æœåŠ¡ã€Docker å’Œ Kubernetesã€‚WebAssembly å’Œ AI æ˜¯ä¸€å¯¹å®Œç¾çš„ç»„åˆã€‚æˆ‘çœ‹åˆ°å®ƒä»¬ä¸€èµ·æˆé•¿ï¼ˆå¹¶å˜è€ï¼‰ã€‚â€\n\nâ€œçƒ˜ç„™â€AI æ¨¡å‹ï¼Œå¦‚ LLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰æˆ–è½¬æ¢å™¨ï¼Œåˆ° WebAssembly è¿è¡Œæ—¶ä¸­ï¼Œæ˜¯åŠ é€Ÿé‡‡ç”¨ WebAssembly çš„é€»è¾‘ä¸‹ä¸€æ­¥ï¼ŒEnterprise Management Associates (EMA) çš„åˆ†æå¸ˆ Torsten Volk å‘Šè¯‰ The New Stackã€‚ä¸è°ƒç”¨è¯¸å¦‚é€šè¿‡ API çš„æ•°æ®åº“æœåŠ¡ç±»ä¼¼ï¼Œç¼–è¯‘ WebAssembly åº”ç”¨ç¨‹åºï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰å¯ä»¥å°†å…¶ API è¯·æ±‚å‘é€åˆ° WebAssembly è¿è¡Œæ—¶ï¼Œè¯¥è¿è¡Œæ—¶å°†è¯¥è°ƒç”¨ä¸­ç»§åˆ° AI æ¨¡å‹å¹¶å°†æ¨¡å‹å“åº”è¿”å›ç»™å‘èµ·è€…ï¼ŒVolk è¯´ã€‚\n\nâ€œä¸€æ—¦æˆ‘ä»¬æœ‰ä¸€ä¸ªæä¾›å¼€å‘äººå‘˜ä¸€ä¸ªæ ‡å‡† API çš„é€šç”¨ç»„ä»¶æ¨¡å‹ï¼ˆCCMï¼‰ï¼Œè®¿é—®æ•°æ®åº“ã€AI æ¨¡å‹ã€GPUã€æ¶ˆæ¯ä¼ é€’ã€èº«ä»½éªŒè¯ç­‰ï¼Œè¿™äº› API è¯·æ±‚å°†å˜å¾—éå¸¸å¼ºå¤§ã€‚CCM å°†è®©å¼€å‘äººå‘˜ç¼–å†™ç›¸åŒçš„ä»£ç ï¼Œåœ¨æ•°æ®ä¸­å¿ƒã€äº‘ç”šè‡³è¾¹ç¼˜ä½ç½®çš„ä»»ä½•ç±»å‹çš„æœåŠ¡å™¨ä¸Šä¸ AI æ¨¡å‹ï¼ˆä¾‹å¦‚ GPT æˆ– Llamaï¼‰è¿›è¡Œé€šä¿¡ï¼Œåªè¦è¯¥æœåŠ¡å™¨æ‹¥æœ‰è¶³å¤Ÿçš„ç¡¬ä»¶èµ„æºå¯ç”¨ï¼Œâ€Volk è¯´ã€‚â€œè¿™ä¸€åˆ‡éƒ½å½’ç»“ä¸ºå…³é”®é—®é¢˜ï¼Œå³äº§ä¸šå‚ä¸è€…ä½•æ—¶ä¼šå°± CCM è¾¾æˆä¸€è‡´ã€‚åŒæ—¶ï¼ŒWebAssembly äº‘ï¼ˆå¦‚ Fermyonï¼‰å¯ä»¥åˆ©ç”¨ WebAssembly ä½¿ AI æ¨¡å‹åœ¨å…¶è‡ªå·±çš„äº‘åŸºç¡€è®¾æ–½ä¸­å…·æœ‰å¯ç§»æ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ— éœ€ CCMï¼Œå¹¶å°†ä¸€äº›èŠ‚çœæˆæœ¬ä¼ é€’ç»™å®¢æˆ·ã€‚â€\n\n## è§£å†³é—®é¢˜\n\nåŒæ—¶ï¼ŒFermyon è®¤ä¸ºï¼Œåœ¨è¿™ä¸ªé˜¶æ®µåº”ç”¨ AI äº WebAssembly å¹¶ä¸ä¸ºæ—¶è¿‡æ—©ã€‚æ­£å¦‚ Butcher æ‰€æŒ‡å‡ºçš„é‚£æ ·ï¼Œè´Ÿè´£åœ¨ LLMï¼ˆå¦‚ LLaMA2ï¼‰ä¸Šæ„å»ºå’Œè¿è¡Œä¼ä¸š AI åº”ç”¨ç¨‹åºçš„å¼€å‘äººå‘˜é¢ä¸´ç€ 100 å€è®¡ç®—æˆæœ¬çš„æŒ‘æˆ˜ï¼Œå³æ¯å°æ—¶ 32 ç¾å…ƒåŠä»¥ä¸Šçš„ GPU è®¿é—®è´¹ç”¨ã€‚æˆ–è€…ï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨æŒ‰éœ€æœåŠ¡ï¼Œä½†æ˜¯å¯åŠ¨æ—¶é—´å´éå¸¸æ…¢ã€‚è¿™ä½¿å¾—ä»¥å®æƒ çš„æ–¹å¼æä¾›ä¼ä¸šçº§ AI åº”ç”¨ç¨‹åºå˜å¾—ä¸åˆ‡å®é™…ã€‚\n\nFermyon Serverless AI é€šè¿‡æä¾›è¶…è¿‡ 100 å€äºå…¶ä»–æŒ‰éœ€ AI åŸºç¡€è®¾æ–½æœåŠ¡çš„äºšç§’å†·å¯åŠ¨æ—¶é—´æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒButcher è¯´ã€‚è¿™ä¸€â€œçªç ´â€å¾—ç›Šäºé©±åŠ¨ Fermyon Cloud çš„æœåŠ¡å™¨ WebAssembly æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯è¢«æ¶æ„ä¸ºäºšæ¯«ç§’å†·å¯åŠ¨å’Œé«˜å®¹é‡æ—¶é—´åˆ†ç‰‡çš„è®¡ç®—å®ä¾‹ï¼Œå·²è¢«è¯æ˜å¯ä»¥å°†è®¡ç®—å¯†åº¦æé«˜ 30 å€ã€‚â€œå°†æ­¤è¿è¡Œæ—¶é…ç½®æ–‡ä»¶æ‰©å±•åˆ° GPU å°†ä½¿ Fermyon Cloud æˆä¸ºæœ€å¿«çš„ AI æ¨ç†åŸºç¡€è®¾æ–½æœåŠ¡ï¼Œâ€Butcher è¯´ã€‚\n\nVolk è¯´ï¼Œè¿™æ ·çš„æ¨ç†æœåŠ¡â€œéå¸¸æœ‰è¶£â€ï¼Œå› ä¸ºå…¸å‹çš„ WebAssembly åº”ç”¨ç¨‹åºä»…åŒ…å«å‡ å…†å­—èŠ‚ï¼Œè€Œ AI æ¨¡å‹çš„å¤§å°è¦å¤§å¾—å¤šã€‚è¿™æ„å‘³ç€å®ƒä»¬ä¸ä¼šåƒä¼ ç»Ÿçš„ WebAssembly åº”ç”¨ç¨‹åºé‚£æ ·å¯åŠ¨å¾—é‚£ä¹ˆå¿«ã€‚â€œæˆ‘è®¤ä¸º Fermyon å·²ç»æƒ³å‡ºäº†å¦‚ä½•ä½¿ç”¨æ—¶é—´åˆ†ç‰‡ä¸º WebAssembly åº”ç”¨ç¨‹åºæä¾› GPU è®¿é—®çš„æ–¹æ³•ï¼Œä»¥ä¾¿æ‰€æœ‰è¿™äº›åº”ç”¨ç¨‹åºéƒ½å¯ä»¥é€šè¿‡å…¶ WebAssembly è¿è¡Œæ—¶ä¿ç•™ä¸€äº›æ—¶é—´ç‰‡æ¥è·å–æ‰€éœ€çš„ GPU èµ„æºâ€ï¼ŒVolk è¯´ã€‚â€œè¿™æ„å‘³ç€å¾ˆå¤šåº”ç”¨ç¨‹åºå¯ä»¥å…±äº«ä¸€å°éƒ¨åˆ†æ˜‚è´µçš„ GPUï¼Œä»¥æŒ‰éœ€ä¸ºå…¶ç”¨æˆ·æä¾›æœåŠ¡ã€‚è¿™æœ‰ç‚¹åƒåˆ†æ—¶å…±äº«ï¼Œä½†ä¸éœ€è¦å¼ºåˆ¶å‚åŠ åˆé¤æ—¶é—´çš„æ¼”ç¤ºã€‚â€\n\nä½¿ç”¨ Spin å…¥é—¨ã€‚\n\n!https:\/\/prod-files-secure.s3.us-west-2.amazonaws.com\/86575c70-5cc9-4b3e-bee7-d1bb14ba20e3\/6bf78916-e34c-4051-86a7-52145cdc372a\/4a27b287-capture-decran-2023-09-05-192118.png\n\né‚£ä¹ˆï¼Œç”¨æˆ·å¦‚ä½•ä¸ Serverless AI äº¤äº’ï¼ŸFermyon çš„ Serverless AI æ²¡æœ‰ REST API æˆ–å¤–éƒ¨æœåŠ¡ï¼Œå®ƒä»…æ„å»ºåœ¨ Fermyon çš„ Spin æœ¬åœ°å’Œ Fermyon Cloud ä¸­ï¼ŒButcher è§£é‡Šè¯´ã€‚â€œåœ¨æ‚¨çš„ä»£ç çš„ä»»ä½•ä½ç½®ï¼Œæ‚¨éƒ½å¯ä»¥å°†æç¤ºä¼ é€’åˆ° Serverless AI å¹¶è·å¾—å“åº”ã€‚åœ¨è¿™ä¸ªç¬¬ä¸€ä¸ªæµ‹è¯•ç‰ˆä¸­ï¼Œæˆ‘ä»¬åŒ…æ‹¬ LLaMa2 çš„èŠå¤©æ¨¡å‹å’Œæœ€è¿‘å®£å¸ƒçš„ Code Llama ä»£ç ç”Ÿæˆæ¨¡å‹ï¼Œâ€Butcher è¯´ã€‚â€œå› æ­¤ï¼Œæ— è®ºæ‚¨æ˜¯åœ¨æ€»ç»“æ–‡æœ¬ã€å®ç°è‡ªå·±çš„èŠå¤©æœºå™¨äººè¿˜æ˜¯ç¼–å†™åç«¯ä»£ç ç”Ÿæˆå™¨ï¼ŒServerless AI éƒ½å¯ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ AI å˜å¾—ç®€å•ï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥ç«‹å³å¼€å§‹åˆ©ç”¨å®ƒæ¥æ„å»ºæ–°çš„ä»¤äººç©ç›®çš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚â€\n\n## é‡è¦æ„ä¹‰\n\nä½¿ç”¨ WebAssembly æ¥è¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œå¯ä»¥ä½¿ç”¨ Fermyon Serverless AI å°†â€œGPU çš„ä¸€å°éƒ¨åˆ†â€åˆ†é…ç»™ç”¨æˆ·åº”ç”¨ç¨‹åºï¼Œä»¥â€œåŠæ—¶â€æ‰§è¡Œ AI æ“ä½œï¼ŒFermyon CTO å’Œè”åˆåˆ›å§‹äºº Radu Matei åœ¨ä¸€ç¯‡åšå®¢æ–‡ç« ä¸­å†™é“ã€‚ â€œå½“æ“ä½œå®Œæˆæ—¶ï¼Œæˆ‘ä»¬å°†è¯¥ GPU çš„ä¸€å°éƒ¨åˆ†åˆ†é…ç»™é˜Ÿåˆ—ä¸­çš„å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œâ€Matei å†™é“ã€‚â€œç”±äº Fermyon Cloud ä¸­çš„å¯åŠ¨æ—¶é—´ä¸ºæ¯«ç§’çº§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨åˆ†é…ç»™ GPU çš„ç”¨æˆ·åº”ç”¨ç¨‹åºä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚å¦‚æœæ‰€æœ‰ GPU åˆ†æ•°éƒ½åœ¨å¿™äºè®¡ç®—æ•°æ®ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ä¸ªå¯ç”¨çš„åº”ç”¨ç¨‹åºä¹‹å‰å°†ä¼ å…¥çš„åº”ç”¨ç¨‹åºæ’é˜Ÿã€‚â€\n\nè¿™æœ‰ä¸¤ä¸ªé‡å¤§çš„å½±å“ï¼ŒMatei å†™é“ã€‚é¦–å…ˆï¼Œç”¨æˆ·ä¸å¿…ç­‰å¾…è™šæ‹Ÿæœºæˆ–å®¹å™¨å¯åŠ¨å¹¶é™„åŠ åˆ° GPU ä¸Šã€‚æ­¤å¤–ï¼Œâ€œæˆ‘ä»¬å¯ä»¥å®ç°æ›´é«˜çš„èµ„æºåˆ©ç”¨ç‡å’Œæ•ˆç‡ï¼Œâ€Matei å†™é“ã€‚\n\nFermyon ä¼ è¾¾çš„ Serverless AI çš„å…·ä½“ç‰¹ç‚¹åŒ…æ‹¬ï¼š\n\n- è¿™æ˜¯ä¸€æ¬¾å¼€å‘äººå‘˜å·¥å…·å’Œæ‰˜ç®¡æœåŠ¡ï¼Œä¸“ä¸ºä½¿ç”¨å¼€æº LLM è¿›è¡Œ AI æ¨ç†çš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºè€Œè®¾è®¡ã€‚\n- ç”±äºæˆ‘ä»¬çš„æ ¸å¿ƒ WebAssembly æŠ€æœ¯ï¼Œæˆ‘ä»¬çš„å†·å¯åŠ¨æ—¶é—´æ¯”ç«äº‰å¯¹æ‰‹å¿« 100 å€ï¼Œä»å‡ åˆ†é’Ÿç¼©çŸ­åˆ°ä¸åˆ°ä¸€ç§’ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ç›¸åŒçš„æ—¶é—´å†…ï¼ˆå¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„ç¡¬ä»¶ï¼‰æ‰§è¡Œæ•°ç™¾ä¸ªåº”ç”¨ç¨‹åºï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ï¼Œè€Œä»Šå¤©çš„æœåŠ¡ç”¨äºè¿è¡Œä¸€ä¸ªã€‚\n- æˆ‘ä»¬ä¸ºä½¿ç”¨ Spin æ„å»ºå’Œè¿è¡Œ AI åº”ç”¨ç¨‹åºæä¾›äº†æœ¬åœ°å¼€å‘ä½“éªŒï¼Œç„¶åå°†å…¶éƒ¨ç½²åˆ° Fermyon Cloud ä¸­ï¼Œä»¥é«˜æ€§èƒ½çš„æ–¹å¼ä»¥å…¶ä»–è§£å†³æ–¹æ¡ˆçš„ä¸€å°éƒ¨åˆ†æˆæœ¬æä¾›æœåŠ¡ã€‚\n- Fermyon Cloud ä½¿ç”¨ AI çº§åˆ«çš„ GPU å¤„ç†æ¯ä¸ªè¯·æ±‚ã€‚ç”±äºæˆ‘ä»¬çš„å¿«é€Ÿå¯åŠ¨å’Œé«˜æ•ˆçš„æ—¶é—´å…±äº«ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°ç™¾ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´å…±äº«å•ä¸ª GPUã€‚\n- æˆ‘ä»¬æ­£åœ¨æ¨å‡ºå…è´¹çš„ç§äººæµ‹è¯•ç‰ˆã€‚\n\n## å¤§å¸Œæœ›\n\nç„¶è€Œï¼Œåœ¨ Wasm å’Œ AI åŒæ—¶è¾¾åˆ°æ½œåŠ›ä¹‹å‰ï¼Œè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚åœ¨ WasmCon 2023 ä¸Šï¼ŒSecond State çš„ CEO å…¼è”åˆåˆ›å§‹äºº Michael Yuan å’Œ Wasm çš„è¿è¡Œæ—¶é¡¹ç›®ä»¥åŠ WasmEdge çš„è®¨è®ºäº†ä¸€äº›æ­£åœ¨è¿›è¡Œçš„å·¥ä½œã€‚ä»–åœ¨ä¸ De Miguel Meana çš„è°ˆè¯ä¸­æ¶µç›–äº†è¿™ä¸ªè¯é¢˜ï¼Œâ€œå¼€å§‹ä½¿ç”¨ AI å’Œ WebAssemblyâ€åœ¨ WasmCon 2023 ä¸Šã€‚\n\nâ€œåœ¨è¿™ä¸ªé¢†åŸŸï¼ˆAI å’Œ Wasmï¼‰éœ€è¦åšå¾ˆå¤šç”Ÿæ€ç³»ç»Ÿå·¥ä½œã€‚ä¾‹å¦‚ï¼Œä»…æ‹¥æœ‰æ¨ç†æ˜¯ä¸å¤Ÿçš„ï¼Œâ€Yuan è¯´ã€‚â€œç°åœ¨çš„ç™¾ä¸‡ç¾å…ƒé—®é¢˜æ˜¯ï¼Œå½“æ‚¨æ‹¥æœ‰å›¾åƒå’Œæ–‡æœ¬æ—¶ï¼Œå¦‚ä½•å°†å…¶è½¬æ¢ä¸ºä¸€ç³»åˆ—æ•°å­—ï¼Œç„¶ååœ¨æ¨ç†ä¹‹åå¦‚ä½•å°†è¿™äº›æ•°å­—è½¬æ¢å›å¯ç”¨çš„æ ¼å¼ï¼Ÿâ€\n\né¢„å¤„ç†å’Œåå¤„ç†æ˜¯ Python ä»Šå¤©æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œè¿™å¾—ç›Šäºä¸ºè¿™äº›ä»»åŠ¡æä¾›çš„ä¼—å¤šåº“ï¼ŒYuan è¯´ã€‚å°†è¿™äº›é¢„å¤„ç†å’Œåå¤„ç†å‡½æ•°åˆå¹¶åˆ° Rust å‡½æ•°ä¸­å°†æ˜¯æœ‰ç›Šçš„ï¼Œä½†éœ€è¦ç¤¾åŒºæ›´å¤šçš„åŠªåŠ›æ¥æ”¯æŒå…¶ä»–æ¨¡å—ã€‚â€œè¿™ä¸ªç”Ÿæ€ç³»ç»Ÿæœ‰å¾ˆå¤§çš„å¢é•¿æ½œåŠ›ï¼Œâ€Yuan è¯´ã€‚\n', '\/trans\/is-it-too-early-to-leverage-ai-for-webassembly\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">Fermyon Technologies è®¤ä¸ºï¼Œå°† AI åº”ç”¨äº WebAssembly å¹¶ä¸ä¸ºæ—¶è¿‡æ—©ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/how-to-add-bpf-observability/">[è¯‘] å¦‚ä½•åœ¨äº§å“ä¸­å¼•å…¥ eBPF ä»¥å¢åŠ å¯è§‚æµ‹æ€§</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2022/01/27</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://www.brendangregg.com/blog/2021-07-03/how-to-add-bpf-observability.html" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('å¦‚ä½•åœ¨äº§å“ä¸­å¼•å…¥ eBPF ä»¥å¢åŠ å¯è§‚æµ‹æ€§', 'æœ¬æ–‡æ˜¯ç»™æƒ³è¦åœ¨äº§å“ä¸­å¼•å…¥ eBPF å¢åŠ å¯è§‚æµ‹æ€§äººå‘˜çš„å¿ å‘Šã€‚', '\n## ç¼–è€…æŒ‰\n\næœ¬æ–‡è¯‘è‡ª [How To Add eBPF Observability To Your Product](https:\/\/www.brendangregg.com\/blog\/2021-07-03\/how-to-add-bpf-observability.html)ï¼ŒåŸæ–‡å‘å¸ƒäº 2021 å¹´ 7 æœˆ 3 æ—¥ã€‚æœ¬æ–‡ä½œè€… Brendan Gregg æ˜¯ eBPF é¢†åŸŸçš„ä¸“å®¶ï¼Œå‡ºç‰ˆè¿‡å¤šæœ¬ç›¸å…³ä¹¦ç±ï¼Œæœ¬æ–‡æ˜¯ä»–ç»™æƒ³è¦åœ¨äº§å“ä¸­å¼•å…¥ eBPF å¢åŠ å¯è§‚æµ‹æ€§äººå‘˜çš„å¿ å‘Šã€‚\n\n## æ­£æ–‡\n\nç°åœ¨æœ‰ä¸€åœºå†›å¤‡ç«èµ›ï¼Œå³å¢åŠ  eBPF çš„å†›å¤‡ç«èµ›ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•å¿«é€Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™ä¹Ÿé€‚ç”¨äºäººä»¬å°†å…¶æ·»åŠ åˆ°è‡ªå·±çš„å†…éƒ¨ç›‘æµ‹ç³»ç»Ÿä¸­ã€‚\n\näººä»¬å–œæ¬¢åœ¨ä»–ä»¬å»ºç«‹äº†åŸå‹æˆ–æ„å»ºäº†äº§å“ä¹‹åå‘æˆ‘å±•ç¤ºä»–ä»¬çš„ BPF å¯è§‚æµ‹æ€§äº§å“ï¼Œä½†æˆ‘å¸¸å¸¸åœ¨ä»–ä»¬å¼€å§‹ä¹‹å‰ç»™å‡ºå»ºè®®ã€‚ä½œä¸º BPF å¯è§‚æµ‹æ€§çš„é¢†å¯¼è€…ï¼Œè¿™æ˜¯æˆ‘åœ¨æœ€è¿‘çš„è°ˆè¯ä¸­ä¸€ç›´åŒ…å«çš„å»ºè®®ï¼Œç°åœ¨æˆ‘æŠŠå®ƒçº³å…¥è¿™ç¯‡æ–‡ç« ä¸­ã€‚\n\né¦–å…ˆï¼Œæˆ‘çŸ¥é“ä½ å¾ˆå¿™ã€‚ä½ ç”šè‡³å¯èƒ½ä¸å–œæ¬¢ BPFã€‚ä¸ºäº†åŠ¡å®èµ·è§ï¼Œæˆ‘å°†æè¿°å¦‚ä½•èŠ±æœ€å°‘çš„ç²¾åŠ›æ¥è·å¾—æœ€å¤§çš„ä»·å€¼ã€‚æŠŠè¿™çœ‹æˆæ˜¯â€œç¬¬ä¸€ç‰ˆâ€ã€‚ä¸€ä¸ªç›¸å½“æœ‰ç”¨çš„å‡ºå‘ç‚¹ã€‚æ— è®ºä½ æ˜¯å¦éµå¾ªè¿™ä¸ªå»ºè®®ï¼Œè‡³å°‘è¯·ä½ ç†è§£å®ƒï¼Œä»¥é¿å…ä»¥åçš„é—æ†¾å’Œç—›è‹¦ã€‚\n\nå¦‚æœä½ æ­£åœ¨ä½¿ç”¨å¼€æºç›‘æ§å¹³å°ï¼Œé¦–å…ˆæ£€æŸ¥å®ƒæ˜¯å¦å·²ç»æœ‰ä¸€ä¸ª BPF ä»£ç†ã€‚è¿™ç¯‡æ–‡ç« å‡è®¾å®ƒæ²¡æœ‰ï¼Œè€Œä¸”ä½ å°†é¦–æ¬¡æ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚\n\n## 1. è¿è¡Œç¬¬ä¸€ä¸ªå·¥å…·\n\né¦–å…ˆå®‰è£… [bcc](https:\/\/github.com\/iovisor\/bcc) æˆ– [bpftrace](https:\/\/github.com\/iovisor\/bpftrace) å·¥å…·ã€‚ä¾‹å¦‚ï¼ŒUbuntu ä¸Šçš„ bccã€‚\n\n\u0060\u0060\u0060sh\n# apt-get install bpfcc-tools\n\u0060\u0060\u0060\n\nç„¶åå°è¯•è¿è¡Œä¸€ä¸ªå·¥å…·ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ execsnoop (8) æŸ¥çœ‹å¸¦æœ‰æ—¶é—´æˆ³çš„è¿›ç¨‹æ‰§è¡Œæƒ…å†µã€‚\n\n\u0060\u0060\u0060sh\n# execsnoop-bpfcc -T\nTIME     PCOMM            PID    PPID   RET ARGS\n19:36:15 service          828567 6009     0 \/usr\/sbin\/service --status-all\n19:36:15 basename         828568 828567   0 \n19:36:15 basename         828569 828567   0 \/usr\/bin\/basename \/usr\/sbin\/service\n19:36:15 env              828570 828567   0 \/usr\/bin\/env -i LANG=en_AU.UTF-8 LANGUAGE=en_AU:en LC_CTYPE= LC_NUMERIC= LC_TIME= LC_COLLATE= LC_MONETARY= LC_MESSAGES= LC_PAPER= LC_NAME= LC_ADDRESS= LC_TELEPHONE= LC_MEASUREMENT= LC_IDENTIFICATION= LC_ALL= PATH=\/opt\/local\/bin:\/opt\/local\/sbin:\/usr\/local\/git\/bin:\/home\/bgregg\/.local\/bin:\/home\/bgregg\/bin:\/opt\/local\/bin:\/opt\/local\/sbin:\/ TERM=xterm-256color \/etc\/init.d\/acpid \n19:36:15 acpid            828570 828567   0 \/etc\/init.d\/acpid status\n19:36:15 run-parts        828571 828570   0 \/usr\/bin\/run-parts --lsbsysinit --list \/lib\/lsb\/init-functions.d\n19:36:15 systemctl        828572 828570   0 \/usr\/bin\/systemctl -p LoadState --value show acpid.service\n19:36:15 readlink         828573 828570   0 \/usr\/bin\/readlink -f \/etc\/init.d\/acpid\n[...]\n\u0060\u0060\u0060\n\nè™½ç„¶å¾ˆåŸºæœ¬ï¼Œä½†æˆ‘ä»…ç”¨è¿™ä¸ªå·¥å…·å°±è§£å†³äº†å¾ˆå¤š perf é—®é¢˜ï¼ŒåŒ…æ‹¬é’ˆå¯¹é…ç½®é”™è¯¯çš„ç³»ç»Ÿï¼Œå…¶ä¸­ä¸€ä¸ª shell è„šæœ¬æ­£åœ¨å¾ªç¯å¯åŠ¨å¤±è´¥çš„è¿›ç¨‹ï¼Œä»¥åŠå½“ä¸€äº›å°ç¨‹åºå´©æºƒå¹¶æ¯éš”å‡ åˆ†é’Ÿå°±é‡å¯ä½†è¿˜æ²¡æœ‰è¢«æ³¨æ„åˆ°æ—¶ã€‚\n\n## 2. ä¸ºä½ çš„äº§å“æ·»åŠ ä¸€ä¸ªå·¥å…·\n\nç°åœ¨æƒ³è±¡ä¸€ä¸‹å°† execsnoop (8) æ·»åŠ åˆ°ä½ çš„äº§å“ä¸­ã€‚ä½ å¯èƒ½å·²ç»åœ¨ä½ æ‰€æœ‰çš„å®¢æˆ·ç³»ç»Ÿä¸Šè¿è¡Œäº†ä»£ç†ã€‚ä»–ä»¬æ˜¯å¦æœ‰åŠæ³•è¿è¡Œä¸€ä¸ªå‘½ä»¤å¹¶è¿”å›æ–‡æœ¬è¾“å‡ºï¼Ÿæˆ–è€…è¿è¡Œä¸€ä¸ªå‘½ä»¤å¹¶å°†è¾“å‡ºå‘é€åˆ°å…¶ä»–åœ°æ–¹è¿›è¡Œèšåˆï¼ˆS3ã€Hiveã€Druid ç­‰ï¼‰ï¼Ÿæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œè¿™å®é™…ä¸Šæ˜¯ä½ è‡ªå·±åŸºäºç°æœ‰ç³»ç»Ÿå’Œå®¢æˆ·ç¯å¢ƒçš„åå¥½ã€‚\n\nå½“ä½ æŠŠç¬¬ä¸€ä¸ªå·¥å…·æ·»åŠ åˆ°ä½ çš„äº§å“ä¸­æ—¶ï¼Œè®©å®ƒåœ¨çŸ­æ—¶é—´å†…è¿è¡Œï¼Œæ¯”å¦‚ 10 åˆ° 60 ç§’ã€‚æˆ‘åˆšåˆšæ³¨æ„åˆ° execsnoop (8) è¿˜æ²¡æœ‰æŒç»­æ—¶é—´é€‰é¡¹ï¼Œæ‰€ä»¥åœ¨è¿™æœŸé—´ä½ å¯ä»¥ç”¨ \u0060watch -s2 60 execsnoop-bpfcc\u0060 æ¥åŒ…è£…å®ƒã€‚å¦‚æœä½ æƒ³ 24 å°æ—¶è¿è¡Œè¿™äº›å·¥å…·ï¼Œé¦–å…ˆè¦ç ”ç©¶å¼€é”€ä»¥äº†è§£æˆæœ¬ã€‚ä½é¢‘ç‡çš„äº‹ä»¶ï¼Œå¦‚è¿›ç¨‹çš„æ‰§è¡Œï¼Œæ•æ‰èµ·æ¥åº”è¯¥æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚\n\nä¸ä½¿ç”¨ bccï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [bpftrace](https:\/\/github.com\/iovisor\/bpftrace) ç‰ˆæœ¬ã€‚è¿™äº›é€šå¸¸æ²¡æœ‰å°è£…é€‰é¡¹ï¼ˆ-vã€-l ç­‰ï¼‰ï¼Œä½†æœ‰ä¸€ä¸ª json è¾“å‡ºæ¨¡å¼ã€‚ä¾‹å¦‚ï¼š\n\n\u0060\u0060\u0060sh\n# bpftrace -f json execsnoop.bt \n{\u0022type\u0022: \u0022attached_probes\u0022, \u0022data\u0022: {\u0022probes\u0022: 2}}\n{\u0022type\u0022: \u0022printf\u0022, \u0022data\u0022: \u0022TIME(ms)   PID   ARGS\\n\u0022}\n{\u0022type\u0022: \u0022printf\u0022, \u0022data\u0022: \u00222737       849176 \u0022}\n{\u0022type\u0022: \u0022join\u0022, \u0022data\u0022: \u0022ls -F\u0022}\n{\u0022type\u0022: \u0022printf\u0022, \u0022data\u0022: \u00225641       849178 \u0022}\n{\u0022type\u0022: \u0022join\u0022, \u0022data\u0022: \u0022date\u0022}\n\u0060\u0060\u0060\n\næ·»åŠ è¿™ç§æ¨¡å¼æ˜¯ä¸ºäº†ä½¿ BPF çš„å¯è§‚æµ‹æ€§äº§å“å¯ä»¥å»ºç«‹åœ¨ bpftrace ä¹‹ä¸Šã€‚\n\n## 3. ä¸è¦æ‹…å¿ƒä¾èµ–æ€§é—®é¢˜\n\næˆ‘å»ºè®®ä½ åœ¨å®¢æˆ·ç³»ç»Ÿä¸Šå®‰è£… bcc æˆ– bpftraceï¼Œå®ƒä»¬ç›®å‰æœ‰ llvm ä¾èµ–ã€‚è¿™å¯èƒ½ä¼šå¢åŠ åˆ°å‡ å MBï¼Œè¿™å¯¹ä¸€äº›èµ„æºæœ‰é™çš„ç¯å¢ƒï¼ˆåµŒå…¥å¼ï¼‰æ˜¯ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨åšå¤§é‡çš„å·¥ä½œï¼Œä»¥ä¾¿åœ¨æœªæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ [BTF and CO-RE](https:\/\/www.brendangregg.com\/blog\/2020-11-04\/bpf-co-re-btf-libbpf.html)ï¼ˆè€Œä¸æ˜¯ Pythonï¼‰ï¼Œæœ€ç»ˆå°†æ„å‘³ç€ä½ å¯ä»¥å®‰è£… 100KB çš„æ— ä¾èµ–æ€§çš„å·¥å…·äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚bpftrace ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„è®¡åˆ’ï¼Œä½¿ç”¨è¾ƒæ–°çš„å†…æ ¸ç‰¹æ€§ç”Ÿæˆä¸€ä¸ªå°çš„æ— ä¾èµ–æ€§çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚\n\nè¿™ç¡®å®éœ€è¦è‡³å°‘ Linux 5.8 æ‰èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œè€Œä½ çš„å®¢æˆ·å¯èƒ½å‡ å¹´éƒ½ä¸ä¼šè¿è¡Œè¿™ä¸ªç³»ç»Ÿã€‚åœ¨è¿™æœŸé—´ï¼Œæˆ‘å»ºè®®æš‚æ—¶ä¸è¦æ‹…å¿ƒ llvm çš„ä¾èµ–å…³ç³»ï¼Œå› ä¸ºå®ƒä»¥åä¼šè¢«ä¿®å¤ã€‚\n\nè¯·æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ Linux å‘è¡Œç‰ˆéƒ½å¯ç”¨äº† \u0060CONFIG_DEBUG_INFO_BTF=y\u0060ï¼Œè¿™å¯¹äº BTF å’Œ CO-RE çš„æœªæ¥æ˜¯å¿…è¦çš„ã€‚ä¸»è¦çš„å‘è¡Œç‰ˆå·²ç»è®¾ç½®äº†å®ƒï¼Œæ¯”å¦‚åœ¨ Ubuntu 20.10ã€Fedora 30 å’Œ RHEL 8.2ã€‚ä½†å¦‚æœä½ çŸ¥é“ä½ çš„ä¸€äº›å®¢æˆ·æ­£åœ¨è¿è¡Œä¸€äº›ä¸å¸¸è§çš„ä¸œè¥¿ï¼Œè¯·æ£€æŸ¥å¹¶é¼“åŠ±ä»–ä»¬æˆ–å‘è¡Œå•†è®¾ç½® \u0060CONFIG_DEBUG_INFO_BTF=y\u0060 å’Œ \u0060CONFIG_DEBUG_INFO_BTF_MODULES=y\u0060ï¼Œä»¥é¿å…æœªæ¥çš„ç—›è‹¦ã€‚\n\n## 4. ç¬¬ 1 ç‰ˆä»ªè¡¨æ¿\n\nç°åœ¨ä½ çš„äº§å“ä¸­æœ‰äº†ä¸€ä¸ª BPF å¯è§‚æµ‹æ€§å·¥å…·ï¼Œæ˜¯æ—¶å€™å¢åŠ æ›´å¤šçš„å·¥å…·äº†ã€‚ä¸‹é¢æ˜¯ä½ å¯ä»¥è¿è¡Œçš„åå¤§å·¥å…·ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ BPF å¯è§‚æµ‹æ€§ä»ªè¡¨ç›˜æ¥å±•ç¤ºï¼ŒåŒæ—¶è¿˜æœ‰å»ºè®®çš„å¯è§†åŒ–ã€‚\n\n| ç¼–å· | å·¥å…·       | å±•ç¤º                    | å¯è§†åŒ–           |\n| ---- | ---------- | ----------------------- | ---------------- |\n| 1.   | execsnoop  | æ–°è¿›ç¨‹ï¼ˆé€šè¿‡ exec (2)ï¼‰ | è¡¨æ ¼             |\n| 2.   | opensnoop  | æ‰“å¼€çš„æ–‡ä»¶              | è¡¨æ ¼             |\n| 3.   | ext4slower | æ…¢é€Ÿæ–‡ä»¶ç³»ç»Ÿ I\/O        | è¡¨æ ¼             |\n| 4.   | biolatency | ç£ç›˜ I\/O å»¶è¿ŸæŸ±çŠ¶å›¾     | çƒ­åŠ›å›¾           |\n| 5.   | biosnoop   | æ¯ä¸ªäº‹ä»¶çš„ç£ç›˜ I\/O ç»†èŠ‚ | è¡¨æ ¼ï¼Œåç§»çƒ­å›¾   |\n| 6.   | cachestat  | æ–‡ä»¶ç³»ç»Ÿé«˜é€Ÿç¼“å­˜ç»Ÿè®¡    | çº¿çŠ¶å›¾           |\n| 7.   | tcplife    | TCP è¿æ¥                | è¡¨æ ¼ï¼Œåˆ†å¸ƒå¼å›¾è¡¨ |\n| 8.   | tcpretrans | TCP é‡ä¼                 | è¡¨æ ¼             |\n| 9.   | runqlat    | CPU è°ƒåº¦å™¨çš„å»¶è¿Ÿ        | çƒ­åŠ›å›¾           |\n| 10.  | profile    | CPU å †æ ˆè·Ÿè¸ªæ ·æœ¬        | ç«ç„°å›¾           |\n\nè¿™æ˜¯åœ¨æˆ‘çš„ [bcc Tutorial](https:\/\/github.com\/iovisor\/bcc\/blob\/master\/docs\/tutorial.md) çš„ï¼Œè€Œä¸”å¾ˆå¤šä¹Ÿå­˜åœ¨äº bpftrace ä¸­ã€‚æˆ‘é€‰æ‹©è¿™äº›æ˜¯ä¸ºäº†ç”¨æœ€å°‘çš„å·¥å…·æ‰¾åˆ°æœ€å¤§çš„æ€§èƒ½ä¼˜åŠ¿ã€‚\n\nè¯·æ³¨æ„ï¼Œrunqlat å’Œ profile ä¼šæœ‰æ˜æ˜¾çš„å¼€é”€ï¼Œæ‰€ä»¥æˆ‘åªè¿è¡Œè¿™äº›å·¥å…· 10 åˆ° 60 ç§’ï¼Œç„¶åç”Ÿæˆä¸€ä»½æŠ¥å‘Šã€‚æœ‰äº›å·¥å…·çš„å¼€é”€å¾ˆä½ï¼Œå¦‚æœéœ€è¦çš„è¯å¯ä»¥ 24 å°æ—¶è¿è¡Œï¼ˆä¾‹å¦‚ execsnoopã€biolatencyã€tcplifeã€tcpretransï¼‰ã€‚\n\nåœ¨ bcc å’Œ bpftrace èµ„æºåº“ä¸­ï¼Œå·²ç»æœ‰ä»¥æ‰‹å†Œå’Œå®ä¾‹æ–‡ä»¶å½¢å¼å­˜åœ¨çš„æ–‡æ¡£ï¼Œä½ å¯ä»¥é“¾æ¥åˆ°è¿™äº›æ–‡æ¡£ï¼Œä»¥å¸®åŠ©ä½ çš„å®¢æˆ·äº†è§£å·¥å…·çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œåœ¨ [bcc](https:\/\/github.com\/iovisor\/bcc\/blob\/master\/tools\/execsnoop_example.txt) å’Œ [bpftrace](https:\/\/github.com\/iovisor\/bpftrace\/blob\/master\/tools\/execsnoop_example.txt) æœ‰ execsnoop (8) çš„ç¤ºä¾‹æ–‡ä»¶ã€‚\n\nå®Œæˆè¿™äº›åï¼Œä½ å°±æœ‰äº†ç¬¬ä¸€ç‰ˆçš„ä»ªè¡¨æ¿ã€‚\n\n## bcc ä¸ bpftrace\n\nbcc å·¥å…·æ˜¯æœ€å®¹æ˜“ä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æœ‰å¾ˆå¤šå‘½ä»¤è¡Œé€‰é¡¹ã€‚bpftrace å·¥å…·æ›´å®¹æ˜“ç¼–è¾‘å’Œå®šåˆ¶ï¼Œè€Œä¸” bpftrace æœ‰ä¸€ä¸ª json è¾“å‡ºæ¨¡å¼ã€‚\n\nå¦‚æœä½ æ˜¯è¿½è¸ªçš„æ–°æ‰‹ï¼Œå°±ç”¨ bcc å§ã€‚å¦‚æœä½ æƒ³åšä¸€äº›é»‘å®¢å’Œå®šåˆ¶çš„å·¥å…·ï¼Œå°±ç”¨ bpftraceã€‚æœ€åï¼Œå®ƒä»¬éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚\n\n## æ¡ˆä¾‹ç ”ç©¶ï¼šNetflix\n\nNetflix æ­£åœ¨å»ºç«‹ä¸€ä¸ªæ–°çš„ GUIï¼Œåœ¨è¿™äº›å·¥å…·çš„ bpftrace ç‰ˆæœ¬çš„åŸºç¡€ä¸Šï¼Œåšè¿™ä¸ªå·¥å…·ä»ªè¡¨ç›˜å’Œæ›´å¤šçš„å·¥ä½œã€‚æ¶æ„å¦‚å›¾ã€‚\n\n![](008i3skNly1gys3a6aaa2j31310u0tcj.jpg) \n\nè™½ç„¶ bpftrace äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…åœ¨æ‰€æœ‰ç›®æ ‡ç³»ç»Ÿä¸Šï¼Œä½† bpftrace å·¥å…·ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰å´åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šï¼Œå¹¶åœ¨éœ€è¦æ—¶è¢«æ¨é€å‡ºå»ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªåœ°æ–¹æ›´æ–°å·¥å…·æ¥ç¡®ä¿æˆ‘ä»¬ä¸€ç›´åœ¨è¿è¡Œæœ€æ–°ç‰ˆæœ¬çš„å·¥å…·ã€‚\n\nè¿™æ˜¯ç›®å‰æˆ‘ä»¬ FlameCommander ç”¨æˆ·ç•Œé¢çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¹Ÿåœ¨äº‘ç«¯è¿è¡Œç«ç„°å›¾ã€‚æˆ‘ä»¬ä»¥å‰çš„ BPF GUI æ˜¯ [Vector](https:\/\/github.com\/Netflix\/vector) çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä½¿ç”¨äº† bccï¼Œä½†æˆ‘ä»¬åæ¥åºŸå¼ƒäº†å®ƒã€‚æˆ‘ä»¬å¯èƒ½ä¼šåœ¨æŸä¸ªæ—¶å€™å¼€æºæ–°çš„ GUIï¼Œå¹¶åœ¨ Netflix æŠ€æœ¯åšå®¢ä¸Šå‘è¡¨ç›¸å…³æ–‡ç« ã€‚\n\n## æ¡ˆä¾‹ç ”ç©¶ï¼šFacebook\n\nFacebook æ˜¯ BPF çš„é«˜çº§ç”¨æˆ·ï¼Œä½†ä»–ä»¬å¦‚ä½•åœ¨æ•´ä¸ªé›†ç¾¤ä¸­è¿è¡Œå·¥å…·çš„æ·±å±‚ç»†èŠ‚å¹¶æ²¡æœ‰å®Œå…¨å…¬å¼€ã€‚æ ¹æ® bcc çš„æ´»åŠ¨ï¼Œä»¥åŠä»–ä»¬å¯¹ BTF å’Œ CO-RE æŠ€æœ¯çš„å¼€å‘ï¼Œæˆ‘ååˆ†æ€€ç–‘ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯åŸºäº bcc çš„ libbpf-tool ç‰ˆæœ¬ã€‚\n\n## ç§»æ¤çš„é™·é˜±\n\nBPF è¿½è¸ªå·¥å…·å°±åƒåº”ç”¨ç¨‹åºå’Œå†…æ ¸çš„è¡¥ä¸ã€‚å®ƒä»¬éœ€è¦ä¸æ–­çš„æ›´æ–°ä»¥ä¿æŒåœ¨ä¸åŒçš„è½¯ä»¶ç‰ˆæœ¬ä¸­å·¥ä½œã€‚æŠŠå®ƒä»¬ç§»æ¤åˆ°ä¸åŒçš„è¯­è¨€ï¼Œç„¶åä¸ç»´æŠ¤å®ƒä»¬ï¼Œå¯èƒ½å°±åƒè¯•å›¾æŠŠ Linux 4.15 çš„è¡¥ä¸åº”ç”¨äº Linux 5.12ã€‚å¦‚æœä½ è¿æ°”å¥½ï¼Œå®ƒå°±ä¼šå·¥ä½œï¼å¦‚æœä½ ä¸èµ°è¿ï¼Œè¡¥ä¸å°±ä¼šåº”ç”¨ï¼Œä½†ä¼šä»¥ä¸€ç§å¾®å¦™çš„æ–¹å¼ç ´åä¸€äº›ä¸œè¥¿ï¼Œç›´åˆ°åæ¥ä½ æ‰æ³¨æ„åˆ°ã€‚è¿™å–å†³äºå·¥å…·ã€‚\n\nä½œä¸ºä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œæˆ‘åœ¨ 2014 å¹´ä¼‘å‡æ—¶å†™äº† cachestat (8)ï¼Œç”¨äº Netflix cloudï¼Œå½“æ—¶æ˜¯ Linux 3.2 å’Œ 3.13 çš„æ··åˆç‰ˆæœ¬ã€‚BPF åœ¨è¿™äº›ç‰ˆæœ¬ä¸Šå¹¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº† Linux 3.2 ä¸Šçš„åŸºæœ¬ Ftrace åŠŸèƒ½ã€‚æˆ‘æŠŠè¿™ç§æ–¹æ³•æè¿°ä¸º [brittle](https:\/\/www.brendangregg.com\/blog\/2014-12-31\/linux-page-cache-hit-ratio.html)ï¼Œ [sandcastle](https:\/\/github.com\/brendangregg\/perf-tools\/blob\/master\/fs\/cachestat) éœ€è¦éšç€å†…æ ¸çš„å˜åŒ–è€Œè¿›è¡Œç»´æŠ¤ã€‚åæ¥ï¼Œå®ƒè¢«ç§»æ¤åˆ°äº†å¸¦æœ‰ kprobes çš„ BPF ä¸Šï¼Œç°åœ¨å·²ç»è¢«é‡å†™å¹¶åŒ…å«åœ¨å•†ä¸šå¯è§‚æµ‹æ€§äº§å“ä¸­ã€‚æˆ‘å¬è¯´å®ƒåœ¨è¾ƒæ–°çš„å†…æ ¸ä¸Šæœ‰é—®é¢˜ï¼Œæ‰“å°çš„è¾“å‡ºæ²¡æœ‰æ„ä¹‰ã€‚å®ƒçœŸçš„éœ€è¦ä¸€æ¬¡å¤§ä¿®ã€‚å½“æˆ‘ï¼ˆæˆ–æŸäººï¼‰åšäº†è¿™ä¸ªå·¥ä½œï¼Œä»»ä½•ä» bcc ä¸Šæ‹‰å–æ›´æ–°çš„äººéƒ½ä¼šè‡ªåŠ¨å¾—åˆ°å›ºå®šçš„ç‰ˆæœ¬ï¼Œä¸éœ€è¦è´¹åŠ›ã€‚é‚£äº›é‡å†™çš„äººå°†éœ€è¦é‡å†™è‡ªå·±çš„ç‰ˆæœ¬ã€‚æˆ‘æ‹…å¿ƒä»–ä»¬ä¸ä¼šè¿™æ ·åšï¼Œè€Œå®¢æˆ·å°†åœ¨å¤šå¹´æ¥ä¸€ç›´è¿è¡Œä¸€ä¸ªé”™è¯¯çš„ cachestat (8) ç‰ˆæœ¬ã€‚\n\nè¯·æ³¨æ„ï¼Œå¦‚æœåœ¨æˆ‘å†™ cachestat (8) çš„æ—¶å€™ï¼ŒBPF åœ¨æˆ‘çš„ç›®æ ‡ç¯å¢ƒä¸­æ˜¯å¯ç”¨çš„ï¼Œæˆ‘çš„ç¼–ç æ–¹å¼å°±ä¼šå®Œå…¨ä¸åŒã€‚äººä»¬æ­£åœ¨ç§»æ¤ä¸º Linux 3.2 ç¼–å†™çš„ä¸œè¥¿ï¼Œå¹¶åœ¨ Linux 5.x ä¸Šè¿è¡Œå®ƒã€‚\n\nåœ¨ä»¥å‰çš„ä¸€ç¯‡åšæ–‡ [An Unbelievable Demo](https:\/\/www.brendangregg.com\/blog\/2021-06-04\/an-unbelievable-demo.html) ä¸­ï¼Œè°ˆåˆ°äº†å¾ˆå¤šå¹´å‰å‘ç”Ÿçš„ç±»ä¼¼æƒ…å†µï¼Œå³åœ¨æ²¡æœ‰æ›´æ–°çš„æƒ…å†µä¸‹ä½¿ç”¨æ—§çš„è¿½è¸ªå·¥å…·ç‰ˆæœ¬ã€‚\n\næˆ‘æ‰€æè¿°çš„é—®é¢˜æ˜¯é’ˆå¯¹ BPF è½¯ä»¶å’Œå†…æ ¸è¿½è¸ªçš„ã€‚ä½œä¸ºä¸€ä¸ªä¸åŒçš„ä¾‹å­ï¼Œæˆ‘çš„ç«ç„°å›¾è½¯ä»¶å·²ç»è¢«é‡å†™äº†åå‡ æ¬¡ï¼Œç”±äºå®ƒæ˜¯ä¸€ä¸ªç®€å•è€Œå®Œå¤‡çš„ç®—æ³•ï¼Œæˆ‘ä¸è®¤ä¸ºè¿™æœ‰ä»€ä¹ˆå¤§é—®é¢˜ã€‚æˆ‘æ›´å–œæ¬¢äººä»¬å¸®åŠ©æ›´æ–° [d3 version](https:\/\/github.com\/spiermar\/d3-flame-graph) ä½†å¦‚æœäººä»¬è‡ªå·±åšï¼Œé‚£ä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚ä½ å¯ä»¥ç»™å®ƒç¼–ç ï¼Œå®ƒå°†æ°¸è¿œå·¥ä½œã€‚åŸºäº uprobe å’Œ kprobe çš„ BPF å·¥å…·å°±ä¸æ˜¯è¿™æ ·äº†ï¼Œå› ä¸ºå®ƒä»¬ç¡®å®éœ€è¦ç»´æŠ¤ã€‚\n\n## åƒç³»ç»Ÿç®¡ç†å‘˜ä¸€æ ·æ€è€ƒï¼Œè€Œä¸æ˜¯åƒç¨‹åºå‘˜ä¸€æ ·æ€è€ƒ\n\næ€»ä¹‹ï¼Œé¦–å…ˆæ£€æŸ¥ä½ çš„ç›‘æ§ç³»ç»Ÿæ˜¯å¦å·²ç»æœ‰ä¸€ä¸ª BPF ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±åœ¨ç°æœ‰çš„åŸºç¡€ä¸Šæ„å»ºä¸€ä¸ª [bcc](https:\/\/github.com\/iovisor\/bcc) æˆ– [bpftrace](https:\/\/github.com\/iovisor\/bpftrace) å·¥å…·ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹é‡å†™ä¸€åˆ‡ã€‚è¿™æ˜¯åƒä¸€ä¸ªå®‰è£…å’Œç»´æŠ¤è½¯ä»¶çš„ç³»ç»Ÿç®¡ç†å‘˜é‚£æ ·æ€è€ƒï¼Œè€Œä¸æ˜¯åƒä¸€ä¸ªç¼–ç æ‰€æœ‰ä¸œè¥¿çš„ç¨‹åºå‘˜é‚£æ ·æ€è€ƒã€‚å®‰è£… bcc æˆ– bpftrace å·¥å…·ï¼ŒæŠŠå®ƒä»¬æ·»åŠ åˆ°ä½ çš„å¯è§‚æµ‹æ€§äº§å“ä¸­ï¼Œå¹¶æ ¹æ®éœ€è¦æ‹‰å–åŒ…çš„æ›´æ–°ã€‚è¿™å°†æ˜¯ä¸€ä¸ªå¿«é€Ÿè€Œæœ‰ç”¨çš„ç‰ˆæœ¬ã€‚BPF å¯åŠ¨å’Œè¿è¡Œäº†ï¼\n\næˆ‘çœ‹åˆ°äººä»¬åè€Œåƒç¨‹åºå‘˜ä¸€æ ·æ€è€ƒï¼Œè§‰å¾—ä»–ä»¬å¿…é¡»ä»æ·±å…¥å­¦ä¹  bcc å’Œ BPF ç¼–ç¨‹ã€‚ç„¶åï¼Œåœ¨å‘ç°æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ C è¯­è¨€æˆ– Python å†™çš„ä¹‹åï¼Œæœ‰äº›äººå°±ç”¨ä¸åŒçš„è¯­è¨€é‡å†™äº†ã€‚\n\né¦–å…ˆï¼Œå­¦å¥½ bcc å’Œ BPF éœ€è¦å‡ å‘¨æ—¶é—´ï¼›å­¦ä¹ ç³»ç»Ÿè·Ÿè¸ªçš„å¾®å¦™ä¹‹å¤„å’Œé™·é˜±å¯èƒ½éœ€è¦å‡ ä¸ªæœˆæˆ–å‡ å¹´ã€‚ä¸ºäº†è®©ä½ äº†è§£ä½ æ‰€é¢ä¸´çš„æƒ…å†µï¼Œè¯·çœ‹æˆ‘çš„ [BPF Internals](https:\/\/www.brendangregg.com\/blog\/2021-06-15\/bpf-internals.html) è®²åº§ã€‚å¦‚æœä½ çœŸçš„æƒ³åšè¿™ä¸ªï¼Œå¹¶ä¸”æœ‰æ—¶é—´ï¼Œä½ å½“ç„¶å¯ä»¥ï¼ˆä½ å¯èƒ½ä¼šåœ¨ Tracing ä¼šè®®ä¸Šé‡åˆ°æˆ‘ã€‚åœ¨ Linux Plumberâ€™s æˆ–è¿½ Tracing ä¼šä¸Šè§ï¼ï¼‰ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨æŸä¸ªæœŸé™å†…è¦å¢åŠ  BPF çš„å¯è§‚æµ‹æ€§ï¼Œé‚£å°±è¯•ç€åƒä¸€ä¸ªç³»ç»Ÿç®¡ç†å‘˜é‚£æ ·æ€è€ƒï¼Œå¹¶åœ¨ç°æœ‰çš„å·¥å…·åŸºç¡€ä¸Šè¿›è¡Œæ„å»ºã€‚è¿™æ˜¯å¿«é€Ÿçš„æ–¹æ³•ã€‚ä»¥åå†åƒç¨‹åºå‘˜é‚£æ ·æ€è€ƒï¼Œå¦‚æœä½ æœ‰æ—¶é—´çš„è¯ã€‚\n\nç¬¬äºŒï¼ŒBPF è½¯ä»¶ï¼Œç‰¹åˆ«æ˜¯æŸäº›åŸºäº kprobe çš„å·¥å…·ï¼Œéœ€è¦æŒç»­çš„ç»´æŠ¤ã€‚ä¸€ä¸ªå·¥å…·å¯èƒ½åœ¨ Linux 5.3 ä¸Šå·¥ä½œï¼Œä½†åœ¨ 5.4 ä¸Šå°±ä¼šåæ‰ï¼Œå› ä¸ºä¸€ä¸ªè¢«è¿½è¸ªçš„å‡½æ•°è¢«é‡æ–°å‘½åæˆ–å¢åŠ äº†ä¸€ä¸ªæ–°çš„ä»£ç è·¯å¾„ã€‚BPF åº“å’Œæ¡†æ¶ä¹Ÿåœ¨å˜åŒ–å’Œå‘å±•ï¼Œæœ€è¿‘çš„ä¸€æ¬¡æ˜¯ BTF å’Œ CO-RE æ”¯æŒã€‚è¿™æ˜¯æˆ‘å¸Œæœ›äººä»¬åœ¨é€‰æ‹©é‡å†™å®ƒä»¬ä¹‹å‰è¦è€ƒè™‘çš„é—®é¢˜ã€‚ä½ æ˜¯å¦ä¹Ÿæœ‰è®¡åˆ’é‡å†™æ‰€æœ‰çš„æ›´æ–°ï¼Œæˆ–è€…ä½ æœ€ç»ˆä¼šè¢«å›°åœ¨ä¸€ä¸ªæ—§çš„åº“çš„ç«¯å£ä¸Šï¼Ÿæ‹‰å–æ‰€æœ‰çš„æ›´æ–°æ¯”ç»´æŠ¤ä½ è‡ªå·±çš„ç‰ˆæœ¬æ›´å®¹æ˜“ã€‚\n\næœ€åï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ¯”æˆ‘ä»¬åœ¨ bcc å’Œ bpftrace ä¸­ä½¿ç”¨çš„æ›´å¥½çš„ BPF åº“æˆ–æ¡†æ¶çš„å¥½ä¸»æ„å‘¢ï¼Ÿå’Œæˆ‘ä»¬è°ˆè°ˆï¼Œè¯•è¯•ï¼Œåˆ›æ–°ä¸€ä¸‹ã€‚æˆ‘ä»¬æ­£å¤„äº BPF æ—¶ä»£çš„å¼€ç«¯ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦æ¢ç´¢ã€‚ä½†è¯·å…ˆäº†è§£ç°æœ‰çš„æƒ…å†µä»¥åŠä½ æ‰€æ‰¿æ‹…çš„ç»´æŠ¤è´Ÿæ‹…ã€‚ä½ çš„ç²¾åŠ›å¯èƒ½ä¼šè¢«ç”¨æ¥åœ¨ç°æœ‰çš„åŸºç¡€ä¸Šåˆ›é€ æ–°çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯ç§»æ¤æ—§çš„ä¸œè¥¿ã€‚\n', '\/trans\/how-to-add-bpf-observability\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡æ˜¯ç»™æƒ³è¦åœ¨äº§å“ä¸­å¼•å…¥ eBPF å¢åŠ å¯è§‚æµ‹æ€§äººå‘˜çš„å¿ å‘Šã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/are-cloud-based-ides-the-future-of-software-engineering/">[è¯‘] äº‘ç«¯ IDE æ˜¯è½¯ä»¶å·¥ç¨‹çš„æœªæ¥å—ï¼Ÿ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2022/01/10</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/are-cloud-based-ides-the-future-of-software-engineering" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('äº‘ç«¯ IDE æ˜¯è½¯ä»¶å·¥ç¨‹çš„æœªæ¥å—ï¼Ÿ', 'æœ¬æ–‡ä¸»è¦å¯¹æ¯”äº†äº‘ç«¯ IDE çš„ä¼˜ç¼ºç‚¹ï¼Œå°±åƒäº‘ç«¯ Office ä¸€æ ·ï¼Œäº‘ç«¯ IDE è¿Ÿæ—©ä¹Ÿä¼šå˜å¾—æµè¡Œèµ·æ¥ã€‚', '\n**ç¼–è€…æŒ‰**\n\n\u003e æœ¬æ–‡ä¸»è¦å¯¹æ¯”äº†äº‘ç«¯ IDE çš„ä¼˜ç¼ºç‚¹ï¼Œå°±åƒäº‘ç«¯ Office ä¸€æ ·ï¼Œäº‘ç«¯ IDE è¿Ÿæ—©ä¹Ÿä¼šå˜å¾—æµè¡Œèµ·æ¥ã€‚\n\nä¼ ç»Ÿä¸Šï¼Œ[è½¯ä»¶å¼€å‘](https:\/\/thenewstack.io\/category\/development\/)æ˜¯ï¼ˆè€Œä¸”åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä»ç„¶æ˜¯ï¼‰åœ¨ä¸ªäººæœºå™¨ä¸Šä½¿ç”¨é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å·¥å…·ï¼Œå¦‚ VSCodeã€JetBrainsã€Eclipse ç­‰å®Œæˆã€‚è™½ç„¶è¿™ç§ \u0022ç¦»çº¿\u0022 å¼€å‘çš„æ¨¡å¼åœ¨æ—©æœŸè¿ä½œå¾—éå¸¸å¥½ï¼Œä½†äººä»¬å¾ˆå¿«å°±æ³¨æ„åˆ°ï¼Œè¿™ç§æ–¹æ³•å¹¶éå®Œç¾ã€‚\n\né¦–å…ˆï¼Œåˆä½œèµ·æ¥å¾ˆéº»çƒ¦ï¼Œå› ä¸ºå†™å¥½çš„ä»£ç å¿…é¡»ä¸Šä¼ åˆ°ç½‘ä¸Šä¾›è¿›ä¸€æ­¥å®¡æŸ¥ã€‚è¿™æ ·å†™å‡ºæ¥çš„ä»£ç çš„å¯ç§»æ¤æ€§ä¹Ÿå¹¶ä¸æ€»æ˜¯æœ‰ä¿è¯ï¼Œå› ä¸ºæœ‰å„ç§å„æ ·çš„æ“ä½œç³»ç»Ÿå’Œå…¶ä»–é™åˆ¶æ¡ä»¶ï¼Œéœ€è¦å®ƒæ¥å®ç°æœ€ä½³çš„åŠŸèƒ½ã€‚\n\næ­£å¦‚å¼€å‘è€…å’ŒæŠ€æœ¯è®°è€… [Owen Williams](https:\/\/char.gd\/blog\/author\/owen) å»å¹´ [åœ¨ä»–çš„åšå®¢ Charged ä¸Š](https:\/\/char.gd\/blog\/2020\/github-codespaces-means-your-computer-doesnt-matter-anymore)å†™é“ï¼šâ€œåœ¨è®¾å¤‡ä¹‹é—´åŒæ­¥ä½ çš„æ–‡æ¡£å’Œç…§ç‰‡æ˜¯å¾®ä¸è¶³é“çš„â€¦â€¦ è¿™æ ·ä½ å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠŠå®ƒä»¬è°ƒå‡ºæ¥ï¼Œä½†å¼€å‘è€…å·¥å…·ä»ç„¶åœç•™åœ¨è¿‡å» â€”â€” æ¯å°ç¬”è®°æœ¬ç”µè„‘æˆ– PC éƒ½è¦å•ç‹¬é…ç½®ï¼Œä½¿ä½ çš„ç¯å¢ƒè®¾ç½®å¾—æ°åˆ°å¥½å¤„ã€‚â€\n\néšç€å¤§æµè¡ŒæœŸé—´è¶Šæ¥è¶Šå¤šçš„åˆ†å¸ƒå¼å›¢é˜Ÿå’Œæ›´å¤šçš„æ•æ·å·¥ä½œæ–¹å¼ï¼Œå¼•å…¥èƒ½å¤Ÿè®©å¼€å‘äººå‘˜åœ¨ä»»ä½•åœ°æ–¹ä¿æŒç”Ÿäº§åŠ›çš„å·¥å…·å˜å¾—è‡³å…³é‡è¦ã€‚è¿™ä¸ºä»€ä¹ˆä¼šæœ‰ [Gitpod](https:\/\/thenewstack.io\/gitpod-open-sources-a-holistic-ide\/)ã€[GitHub Codespaces](https:\/\/thenewstack.io\/this-week-in-programming-github-codespaces-portable-dev-environment\/)ã€Replit ç­‰åŸºäºäº‘ç«¯ IDE å‡ºç°ã€‚\n\n## äº‘ç«¯ IDE çš„ä¼˜ç‚¹\n\nè¿™äº›æ–°çš„ IDE å·¥å…·å…·æœ‰å¤§é‡çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ GitHub é›†æˆï¼Œæ”¯æŒå¤šè¯­è¨€çš„ç¼–å†™å’Œç¼–è¯‘ï¼Œæä¾›äº†ä¸€ä¸ªæ•´ä½“çš„ç¯å¢ƒï¼Œä»¥æé«˜å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ã€‚\n\nåœ¨ä»–ä»¬çš„å…¶ä»–ä¼˜åŠ¿ä¸­ï¼š\n\n### ä½¿ç”¨äº‘ç«¯ IDE æ— éœ€æ‹…å¿ƒé…ç½®\n\nç”±äºå¼€å‘ç¯å¢ƒå®Œå…¨åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå› æ­¤ä¸å†éœ€è¦æ¢³ç†å®‰è£…é¡µé¢å’Œå¼„æ¸…æ¥šéœ€è¦å®‰è£…å“ªä¸ªè½¯ä»¶åŒ…ã€‚\n\n### ç¡¬ä»¶çš„é€‰æ‹©å¹¶ä¸é‡è¦\n\nåŸºäºäº‘çš„é›†æˆå¼€å‘ç¯å¢ƒæ¶ˆé™¤äº†ï¼ˆå¥½å§ï¼Œå‡ ä¹æ˜¯ï¼ï¼‰å¼€å§‹è¿›è¡Œç½‘ç»œå¼€å‘çš„éšœç¢ã€‚åœ¨ä»»ä½•æ”¯æŒç°ä»£ç½‘ç»œæµè§ˆå™¨éƒ½å¯ä»¥è¿è¡Œï¼Œä½ ç”šè‡³ä¸éœ€è¦åœ¨ä¸åŒçš„æœºå™¨ä¸Šä»å¤´å¼€å§‹é‡æ–°é…ç½®ä¸€åˆ‡ã€‚\n\n### åœ¨ä»»ä½•åœ°æ–¹å·¥ä½œå’Œåä½œéƒ½å¾ˆå®¹æ˜“\n\nè¿™äº›å·¥å…·å…·æœ‰é«˜åº¦å¯å®šåˆ¶çš„å·¥ä½œç©ºé—´ï¼Œå¯ä»¥åœ¨å›¢é˜Ÿ \/ ä¸ªäººå±‚é¢ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä»¬ä¸ä»…ä¿ƒè¿›äº†æ›´å¥½çš„åˆä½œï¼Œè€Œä¸”å®Œå…¨æ¶ˆé™¤äº†â€œåœ¨æˆ‘çš„æœºå™¨ä¸Šå¯ä»¥è¿è¡Œ \u0022 è¿™ç§å¤ªè¿‡æ™®éçš„æƒ…å†µã€‚é‰´äºè¿™äº›ä¸»è¦çš„ä¼˜ç‚¹ï¼Œå¾ˆæ˜æ˜¾åŸºäºäº‘çš„ IDE å·²ç»è·å¾—äº†å‘å±•åŠ¿å¤´ã€‚\n\nä½†äº‘ç«¯ IDE ä¹Ÿæœ‰ä¸€äº›å±€é™æ€§ã€‚\n\n## äº‘ç«¯ IDE çš„ç¼ºç‚¹\n\nåŸºäºäº‘çš„ IDE çš„è®¸å¤šç¼ºç‚¹éƒ½ä¸æ‰©å±•é—®é¢˜æœ‰å…³ï¼Œå› ä¸ºè¿™äº›å·¥å…·ä»ç„¶å¤„äºæˆç†Ÿçš„æ—©æœŸé˜¶æ®µã€‚ä»¥ä¸‹æ˜¯æ—©æœŸé‡‡ç”¨è€…å¯èƒ½ä¼šé‡åˆ°çš„ä¸€äº›å…³é”®é—®é¢˜ã€‚\n\n### æ€§èƒ½å¯èƒ½æ˜¯ä¸å¹³è¡¡çš„\n\nç”±äºäº‘ä¸Šçš„èµ„æºæ˜¯ç”±éœ€æ±‚ä¸ç¨³å®šçš„æ¶ˆè´¹è€…å…±äº«çš„ï¼Œå› æ­¤è‚¯å®šæœ‰æœºä¼šå‡ºç°æ€§èƒ½ä¸ä¸€è‡´çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯åœ¨å¯¹ç½‘ç»œå»¶è¿Ÿã€å®¹é‡æˆ–æ•´ä½“äº§å“çš„æ•…éšœé€ æˆé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œæ›´æ˜¯å¦‚æ­¤ã€‚\n\n### æ•…éšœçš„æ¥æºå¯èƒ½å¾ˆéš¾è¯†åˆ«å’Œè§£å†³\n\nå½“ä½ ä¸çŸ¥é“æ ¹æœ¬åŸå› æ—¶ï¼Œå¾ˆéš¾ä¿®å¤ä¸€ä¸ªé—®é¢˜ï¼Œæ€»çš„æ¥è¯´ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ­¤ç±»äº§å“çš„æ—©æœŸé‡‡ç”¨è€…æœ‰ä¸€ä¸ªä»¤äººæ²®ä¸§çš„ä½“éªŒã€‚\n\n### å¤§é¡¹ç›®å¯èƒ½æ›´é€‚åˆä½¿ç”¨ç¦»çº¿ IDE\n\nåˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œå·²ç»è§‚å¯Ÿåˆ°ä¸€äº›åˆæœŸé—®é¢˜ï¼Œç”¨æˆ·[æŠ±æ€¨å¹³å‡è´Ÿè½½è¿‡é«˜](https:\/\/github.com\/gitpod-io\/gitpod\/issues\/5992)ã€‚å¯¹äºå¤§å‹å¼€å‘é¡¹ç›®ï¼Œæ‰€éœ€çš„æ•°æ®ä¼ è¾“å’Œå¤„ç†é‡å°†æ˜¯å·¨å¤§çš„ã€‚è™½ç„¶å®ƒå¯èƒ½ä¸ä¼šæ‰¼æ€åŸºäºäº‘çš„ IDE çš„èµ„æºï¼Œä½†ç”±äºå…¶å®ç”¨æ€§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¦»çº¿æ›¿ä»£æ–¹æ¡ˆè‚¯å®šæ˜¯æ›´ä½³é€‰æ‹©ã€‚\n\n### ä¾›åº”å•†é”å®šä¼šé™åˆ¶å·¥å…·çš„å¯ç”¨æ€§\n\nå¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„æ–¹é¢æ˜¯å½“æ¶‰åŠåˆ°åŸºäºäº‘ç«¯ IDE æ—¶ï¼Œå·¥å…·åŒ…çš„å¯ç”¨æ€§ã€‚å¤§é‡çš„å·¥å…·å¯ä»¥åœ¨æœ¬åœ°ä¸ IDE é…å¯¹ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå¯¹äºåŸºäºäº‘ç«¯ IDEï¼Œå¼€å‘è€…è¢«é™åˆ¶åœ¨ä¾›åº”å•†æä¾›çš„é›†æˆé€‰æ‹©ä¸Šï¼Œè¿™å¯¹äºé‚£äº›éœ€è¦æ›´å¹¿æ³›å·¥å…·åŒ…çš„äººæ¥è¯´å¯èƒ½æ˜¯é™åˆ¶æ€§çš„ã€‚\n\n### äº‘ç«¯ IDE éœ€è¦ WiFi\n\næœ€åä¸€ç‚¹å¾€å¾€è¢«å¿½ç•¥ï¼ŒåŸºäºäº‘çš„ IDE åœ¨ä¸çœŸæ­£å¼ºå¤§çš„æ¡Œé¢ IDE ç›¸åª²ç¾ä¹‹å‰è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œè¿™äº› IDE å…è®¸é™ä½å¯¹ WiFi ç­‰å¤–éƒ¨å› ç´ çš„ä¾èµ–æ€§ã€‚å³ä½¿æ­£åœ¨å®æ–½å„ç§å˜é€šåŠæ³•ï¼Œå…¶å¯é æ€§æ°´å¹³ä¹Ÿè¿œè¿œä¸èƒ½ä¸æ¡Œé¢ IDE æä¾›çš„ç¦»çº¿ä½“éªŒç›¸æ¯”ã€‚\n\n## ä¸‹ä¸€ä»£é›†æˆå¼€å‘ç¯å¢ƒ\n\nè™½ç„¶åŸºäºæ¡Œé¢çš„é›†æˆå¼€å‘ç¯å¢ƒä»æ˜¯éå¸¸è§„èŒƒçš„ï¼Œå¹¶å°†ç»§ç»­æµè¡Œï¼Œä½†åŸºäºäº‘çš„é›†æˆå¼€å‘ç¯å¢ƒæ­£åœ¨å‘å±•åŠ¿å¤´æ­£çŒ›ã€‚è¿™äº›å·¥å…·ä¹Ÿåœ¨è¿…é€Ÿå‘å±•ï¼Œå¹¶å¯èƒ½è¶Šæ¥è¶Šå¤šåœ°ä¸åŸºäºæ¡Œé¢çš„ IDE ä¸€èµ·ä½¿ç”¨ã€‚\n\nä¸ºäº†ç±»æ¯”è¿™ä¸€åˆ‡å¯èƒ½çš„èµ°å‘ï¼Œè¯·è€ƒè™‘å¾®è½¯ Office çš„æƒ…å†µã€‚\n\nç¬”è®°æœ¬ç”µè„‘ \/ è®¡ç®—æœºåˆšé—®ä¸–æ—¶ï¼Œæˆ‘ä»¬åªæœ‰å¾®è½¯ Office ä½œä¸ºä»»ä½•å½¢å¼çš„åˆä½œçš„é»˜è®¤å¥—ä»¶ã€‚å®ƒçš„å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯ç¦»çº¿çš„ã€‚ä½†æ˜¯ï¼Œéšç€ Zoho Office å’Œ Google Workspace ç­‰åŸºäºæµè§ˆå™¨çš„åä½œå·¥å…·å°†å¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œå¸¦åˆ°äº†ç½‘ä¸Šï¼Œæˆ‘ä»¬ç°åœ¨çœ‹åˆ°å®ƒä»¬æ¯” MS Office æ›´é‡è¦çš„ä½¿ç”¨æƒ…å†µã€‚\n\né›†æˆå¼€å‘ç¯å¢ƒä¹Ÿä¼šèµ°åŒæ ·çš„è·¯ã€‚æ¡Œé¢ IDE ä»å°†è¢«ä½¿ç”¨ï¼ˆå°±åƒç°åœ¨ä½¿ç”¨çš„å¾®è½¯ Office ä¸€æ ·ï¼‰ï¼Œä½†åŸºäºäº‘çš„ IDE å°†çœ‹åˆ°ä¸€äº›éå¸¸æœ‰è¶£çš„ç”¨ä¾‹å‡ºç°ï¼Œå¹¶å¯èƒ½å¯¹è¿™äº›ç‰¹å®šç”¨ä¾‹å˜å¾—æ›´åŠ é‡è¦ã€‚\n\nåœ¨å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼ŒJetBrains å·²ç»å‘å¸ƒäº†å…¶ä¸‹ä¸€ä»£ IDEâ€”â€”Fleet çš„æ—©æœŸé¢„è§ˆã€‚ç”±äºæ›´åŠ å…³æ³¨åˆ†å¸ƒå¼å’Œåä½œå¼å¼€å‘ä»¥åŠé™ä½å…¥é—¨é—¨æ§›ï¼ŒJetBrains çš„è§£å†³æ–¹æ¡ˆæ‰¿è¯º Fleet ä¸ä¼šå–ä»£è¯¥å…¬å¸ç°æœ‰çš„å·¥å…·ï¼Œè€Œæ˜¯æ—¨åœ¨å¢åŠ è¿›ä¸€æ­¥çš„é€‰æ‹©ã€‚\n\nGitpod çš„ç¤¾åŒºç»ç† [Pauline Narvas](https:\/\/www.linkedin.com\/in\/pnarvas\/) å‘Šè¯‰ The New Stackï¼Œå¥¹å¯¹æœªæ¥çš„è¿œç¨‹ã€äº‘ã€å¼€å‘ç¯å¢ƒæœ‰å¯èƒ½æ”¹å–„å¼€å‘è€…çš„æ—¥å¸¸ç”Ÿæ´»æ„Ÿåˆ°éå¸¸å…´å¥‹ã€‚\n\nå¥¹è¯´ï¼šâ€œä¾‹å¦‚ï¼Œæœ‰äº†æ ‡å‡†åŒ–çš„å¼€å‘è€…ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åŠ å…¥æ–°çš„å·¥ç¨‹å¸ˆï¼Œä½ å¯ä»¥å®¡æŸ¥åŒäº‹çš„ä»£ç ï¼Œæå‡º Pull requestï¼Œç”šè‡³ä¸ºå¼€æºåšå‡ºè´¡çŒ®ï¼Œâ€œå¥¹è¡¥å……è¯´ï¼Œâ€œä¸å†æœ‰â€™å®ƒåœ¨æˆ‘çš„æœºå™¨ä¸Šå·¥ä½œâ€™çš„ç—›è‹¦ï¼Œä¹Ÿä¸å†æœ‰å› ä¸ºä¾èµ–å…³ç³»ä¸å·¥ä½œè€Œç ´åé¢„è§ˆç¯å¢ƒã€‚\n\nâ€œå¼€å‘äººå‘˜ç”šè‡³ä¸éœ€è¦ä¸€å°é«˜è§„æ ¼çš„æœºå™¨ä¹Ÿèƒ½å¼€å§‹å·¥ä½œï¼Œâ€œNarvas è¯´ã€‚â€œåªè¦æœ‰ä¸€ä¸ªå¯ä»¥è”ç½‘çš„æµè§ˆå™¨ä½ å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç¼–ç ï¼\u0022ã€‚è¿™çœŸçš„æ˜¯è½¯ä»¶å·¥ç¨‹çš„æœªæ¥ï¼Œæˆ‘è¿«ä¸åŠå¾…åœ°æƒ³çœ‹çœ‹äº”å¹´åçš„æ™¯è±¡ã€‚â€\n', '\/trans\/are-cloud-based-ides-the-future-of-software-engineering\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡ä¸»è¦å¯¹æ¯”äº†äº‘ç«¯ IDE çš„ä¼˜ç¼ºç‚¹ï¼Œå°±åƒäº‘ç«¯ Office ä¸€æ ·ï¼Œäº‘ç«¯ IDE è¿Ÿæ—©ä¹Ÿä¼šå˜å¾—æµè¡Œèµ·æ¥ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/the-future-of-microservices/">[è¯‘] å¾®æœåŠ¡çš„æœªæ¥â€”â€”æ›´å¤šå±‚æŠ½è±¡</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2021/08/13</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fas fa-language"></i>
              <a href="https://thenewstack.io/the-future-of-microservices-more-abstractions/" target="_blank" rel="noopener">åŸæ–‡</a>
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('å¾®æœåŠ¡çš„æœªæ¥â€”â€”æ›´å¤šå±‚æŠ½è±¡', 'åœ¨è¿›å…¥å¾®æœåŠ¡æ—¶ä»£çš„åå¹´é‡Œï¼Œæ€è€ƒä¸€ä¸‹æˆ‘ä»¬å·²ç»èµ°åˆ°äº†å“ªä¸€æ­¥ï¼Œä»¥åŠæˆ‘ä»¬è¿˜éœ€è¦è§£å†³å“ªäº›é—®é¢˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚', '\n[å¾®æœåŠ¡](https:\/\/thenewstack.io\/category\/microservices\/)æ˜¯åœ¨ 10 å¹´å‰å‡ºç°çš„ï¼Œæ˜¯è½¯ä»¶èåˆè¿›åŒ–çš„ä¾‹å­ä¹‹ä¸€ã€‚è™½ç„¶è¿™ä¸ªè¯å¯ä»¥å½’åŠŸäºè½¯ä»¶å’¨è¯¢å…¬å¸ [ThoughtWorks](https:\/\/www.thoughtworks.com\/) çš„ [James Lewis](https:\/\/twitter.com\/boicy) å’Œ Martin Fowlerï¼Œ[Adrian Cockcroft](https:\/\/www.linkedin.com\/in\/adriancockcroft\/) ä¹Ÿæ›¾æå‡ºç±»ä¼¼çš„æƒ³æ³•ã€‚ä½†å½“æ—¶åœ¨ Netflix å’Œè®¸å¤šç¡…è°·çš„å…¶ä»–å…¬å¸ï¼Œå¦‚äºšé©¬é€Šã€Google å’Œ eBay ç­‰å…¬å¸å¤§è‡´åœ¨ç›¸åŒçš„æ—¶é—´å†…ç‹¬ç«‹æ­å»ºäº†æˆ–å¤šæˆ–å°‘ç›¸åŒçš„æ¶æ„æ¨¡å¼ã€‚\n\nåœ¨è¿™ä¸ªè¯è¯ç”Ÿåçš„åå¹´é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº† Kubernetesã€æœåŠ¡ç½‘æ ¼å’Œæ— æœåŠ¡å™¨çš„å…´èµ·ï¼Œæˆ‘ä»¬ä¹Ÿå¼€å§‹çœ‹åˆ°å¾®æœåŠ¡è¢«åº”ç”¨åˆ°äº†å‰ç«¯ã€‚é™¤äº†å¯ä»¥æ¨ªå‘æ‰©å±•ï¼Œå¾®æœåŠ¡è¿˜å¯ä»¥è®©å¼€å‘äººå‘˜æ›´å¿«åœ°éƒ¨ç½²ä»£ç ï¼Œæœ‰åˆ©äºç»„ä»¶çš„å¯æ›¿æ¢æ€§è€Œä¸æ˜¯å¯ç»´æŠ¤æ€§ã€‚\n\næ— è®ºå¥½åï¼Œå¯¹è®¸å¤šäººæ¥è¯´ï¼Œå¾®æœåŠ¡å·²ç»æˆä¸ºé»˜è®¤çš„æ¶æ„é€‰æ‹©ã€‚å¯¹äºæ‹¥æœ‰è‡ªä¸»å›¢é˜Ÿå’Œæ¾æ•£è€¦åˆç³»ç»Ÿçš„ç»„ç»‡æ¥è¯´ï¼Œå¾®æœåŠ¡å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†å®ƒä»¬å¸¦æ¥äº†æ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ— æ³•é€ƒé¿çš„å¤æ‚æ€§ã€‚\n\nâ€œæˆ‘åšå†³è®¤ä¸ºå…¬å…±äº‘æ¯”ç§æœ‰äº‘å’Œæ•°æ®ä¸­å¿ƒæ›´å¥½ï¼Œè¿™äº›å¥½å¤„æ˜¯ä¸€ç›®äº†ç„¶çš„ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ˜¯ææƒ§è®©äººä»¬ç•ç¼©ä¸å‰ã€‚â€œç‹¬ç«‹æŠ€æœ¯é¡¾é—® [Sam Newman](https:\/\/www.linkedin.com\/in\/samnewman\/) å‘Šè¯‰ The New Stackï¼Œä»–çš„ [Building Microservices](https:\/\/samnewman.io\/books\/building_microservices_2nd_edition\/) ä¸€ä¹¦çš„ç¬¬äºŒç‰ˆå°†åœ¨ä»Šå¹´ 8 æœˆå‡ºç‰ˆã€‚â€œä½†æ˜¯å¯¹äºå¾®æœåŠ¡ï¼Œäº‹æƒ…å°†æ¯”è¿™å¤æ‚å¾—å¤šçš„å¤šã€‚â€\n\nè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨è¿›å…¥å¾®æœåŠ¡æ—¶ä»£çš„åå¹´é‡Œï¼Œæ€è€ƒä¸€ä¸‹æˆ‘ä»¬å·²ç»èµ°åˆ°äº†å“ªä¸€æ­¥ï¼Œä»¥åŠæˆ‘ä»¬è¿˜éœ€è¦è§£å†³å“ªäº›é—®é¢˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚\n\n## ç›˜ç‚¹ï¼šéƒ¨ç½²å’Œè¿è¡Œæ—¶é—´\n\nç°åœ¨æœ‰å„ç§å„æ ·æˆç†Ÿçš„ã€è®¾è®¡è‰¯å¥½çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œæ¶µç›–äº†å¤§å¤šæ•°è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œåœ¨ JVM ä¸Šæœ‰å¤§é‡çš„é€‰æ‹©ï¼ŒåŒ…æ‹¬ [Spring Boot](https:\/\/spring.io\/projects\/spring-boot)ã€[Dropwizard](https:\/\/www.dropwizard.io\/en\/latest\/)ã€[Helidon](https:\/\/helidon.io\/#\/)ã€[Lagom](https:\/\/www.lagomframework.com\/)ã€[Micronaut](https:\/\/micronaut.io\/) å’Œ [Quarkus](https:\/\/quarkus.io\/)ï¼ŒåŒæ—¶è¿˜æœ‰ [Go kit](https:\/\/github.com\/go-kit\/kit)ï¼ˆGoï¼‰ã€[Flask](https:\/\/flask.palletsprojects.com\/en\/2.0.x\/) å’Œ [Falcon](https:\/\/falconframework.org\/)ï¼ˆPythonï¼‰ã€[Node.js](https:\/\/nodejs.org\/en\/)ï¼ˆJavaScriptï¼‰ç­‰é€‰æ‹©ã€‚\n\nåŒæ ·åœ°ï¼Œå¥½çš„ç›‘æ§å·¥å…·ä¹Ÿæ¯”æ¯”çš†æ˜¯ã€‚[OpenTelemetry](https:\/\/thenewstack.io\/getting-started-with-opentelemetry-for-java\/) çš„å‡ºç°å°¤å…¶é‡è¦ã€‚å®ƒç”± OpenTracing å’Œ OpenCensus åˆå¹¶è€Œæˆï¼Œæ‹¥æœ‰å¹¿æ³›çš„ä¾›åº”å•†å’Œè¯­è¨€æ”¯æŒï¼Œä¸ºåˆ†å¸ƒå¼é¥æµ‹æ•°æ®æä¾›æ ‡å‡†åŒ–ã€‚è¿™æ„å‘³ç€å¼€å‘äººå‘˜åªéœ€è¦å¯¹ä»–ä»¬çš„ä»£ç è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œç„¶åå°±å¯ä»¥äº¤æ¢å’Œæ”¹å˜ç›‘æ§å·¥å…·ï¼Œæ¯”è¾ƒç›¸äº’ç«äº‰çš„è§£å†³æ–¹æ¡ˆï¼Œç”šè‡³åœ¨ç”Ÿäº§ä¸­ä¸ºä¸åŒçš„éœ€æ±‚è¿è¡Œå¤šä¸ªä¸åŒçš„ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚\n\nç„¶è€Œï¼Œå½“æˆ‘ä»¬çœ‹å‘éƒ¨ç½²å’Œè¿è¡Œæ—¶ï¼Œæƒ…å†µå°±å˜å¾—æœ‰ç‚¹æ¨¡ç³Šäº†ã€‚Kubernetes å·²ç»æˆ–å¤šæˆ–å°‘åœ°æˆä¸ºå¾®æœåŠ¡çš„ä»£åè¯ï¼Œå®ƒçš„å¤æ‚æ€§ä¸æ–­å¢åŠ ï¼Œä¿ƒä½¿äº‘åŸç”Ÿå’¨è¯¢å…¬å¸ [Container Solutions](https:\/\/www.container-solutions.com\/) çš„é¦–å¸­ç§‘å­¦å®¶ [Adrian Mouat](https:\/\/twitter.com\/adrianmouat) [çŒœæµ‹](https:\/\/blog.container-solutions.com\/10-predictions-for-the-future-of-computing)æˆ‘ä»¬å°†çœ‹åˆ°å®ƒçš„ç«äº‰å¯¹æ‰‹å‡ºç°ã€‚\n\nâ€œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§å¤æ‚æ€§ä¸ä»…ä»…æ˜¯éšè—åœ¨å¼•æ“ç›–ä¸‹ã€‚â€œMouat è¯´ï¼šâ€œå®ƒæ­£åœ¨æº¢å‡ºåˆ°ç•Œé¢ä¸Šï¼Œå½±å“åˆ°ç”¨æˆ·ã€‚â€œé»‘è¿› kubectl è¿è¡Œå¹¶å¾—åˆ°ä¸€ä¸ªæ¼”ç¤ºå¹¶è¿è¡Œä»ç„¶ç›¸å½“å®¹æ˜“ã€‚ä½†æ˜¯ï¼Œè¿è¡Œç”Ÿäº§åº”ç”¨ç¨‹åºå¹¶å¼„æ¸…æ¥šå¦‚ä½•å®‰å…¨åœ°æš´éœ²å®ƒä»¬éœ€è¦äº†è§£å¤§é‡ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™ä¸å¯é¿å…åœ°å¯¼è‡´ YAML æ–‡ä»¶æ¯”å¤§å¤šæ•°å¾®æœåŠ¡æºä»£ç è¿˜è¦é•¿ã€‚â€\n\nNewman æ€»ç»“äº†ä¸€ä¸ªåŸºæœ¬æŒ‘æˆ˜ï¼šâ€œKubernetes å¯¹å¼€å‘è€…å¹¶ä¸å‹å¥½ã€‚æˆ‘ä»¬ä»ç„¶æ²¡æœ‰ä¸€ä¸ªå¥½çš„ã€å¯é çš„ã€ç±»ä¼¼ [Heroku](https:\/\/www.heroku.com\/) çš„æŠ½è±¡ï¼Œåœ¨ Kubernetes ä¹‹ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ï¼Œè¿™è®©æˆ‘æ„Ÿåˆ°éœ‡æƒŠã€‚â€\n\n[Spotify](https:\/\/www.spotify.com\/) çš„å·¥ç¨‹æ€»ç›‘ [Pia Nilsson](https:\/\/www.linkedin.com\/in\/pia-nilsson-02b47b1\/) æ›¾ [è°ˆåˆ°](https:\/\/engineering.atspotify.com\/2021\/05\/18\/a-product-story-the-lessons-of-backstage-and-spotifys-autonomous-culture\/)ï¼Œè¿™å®¶å¿«é€Ÿæ‰©å¼ çš„å…¬å¸çš„æ–°å·¥ç¨‹å¸ˆå¹³å‡éœ€è¦ 60 å¤©æ‰èƒ½åˆå¹¶ä»–ä»¬çš„ç¬¬ 10 ä¸ª pull requestã€‚ä½œä¸ºå›åº”ï¼Œè¯¥å…¬å¸å»ºç«‹äº†ä¸€ä¸ª[å¼€å‘è€…é—¨æˆ·ç½‘ç«™](https:\/\/thenewstack.io\/design-a-better-kubernetes-experience-for-developers\/) [Backstage](https:\/\/engineering.atspotify.com\/2020\/09\/24\/cloud-native-computing-foundation-accepts-backstage-as-a-sandbox-project\/)ï¼Œç°åœ¨æ˜¯ [äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼š](https:\/\/cncf.io\/?utm_content=inline-mention)çš„ä¸€ä¸ª[æ²™ç›’é¡¹ç›®](https:\/\/backstage.io\/)ã€‚\n\n[Netflix](https:\/\/about.netflix.com\/) éå¸¸é‡è§† DevExâ€”â€” è¯¥å…¬å¸ä¸ºå¼€å‘è€…é“ºè®¾çš„â€œé“è·¯â€â€”â€” åˆ©ç”¨å®ƒæ¥å¸®åŠ© [åŠ é€Ÿ](https:\/\/www.infoq.com\/presentations\/devex-netflix-graphql\/) [GraphQL](https:\/\/graphql.org\/) ç­‰æ–°æŠ€æœ¯çš„ [é‡‡ç”¨](https:\/\/www.infoq.com\/presentations\/devex-netflix-graphql\/)ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å†…éƒ¨å»ºè®¾å’Œé€šè¿‡ [Humanitec](https:\/\/humanitec.com\/) ç­‰ä¾›åº”å•†å»ºè®¾çš„ [å¼€å‘è€…å¹³å°](https:\/\/info.container-solutions.com\/the-rise-of-the-internal-developer-platform)çš„å´›èµ·ã€‚ [Ambassador Labs](https:\/\/www.getambassador.io\/) æœ‰ä¸€ä¸ªç›¸å…³çš„ [å¼€å‘è€…æ§åˆ¶å¹³é¢](https:\/\/www.getambassador.io\/developer-control-plane\/)çš„æ¦‚å¿µ â€”â€” å®ƒçš„ç½‘ç«™å£°ç§°ï¼Œâ€œä½¿å¼€å‘è€…èƒ½å¤Ÿæ§åˆ¶å’Œé…ç½®æ•´ä¸ªäº‘å¼€å‘å¾ªç¯ï¼Œä»¥ä¾¿æ›´å¿«åœ°å‘å¸ƒè½¯ä»¶â€ã€‚\n\n\u003e â€œKubernetes å¯¹å¼€å‘è€…å¹¶ä¸å‹å¥½ã€‚æˆ‘ä»¬ä»ç„¶æ²¡æœ‰ä¸€ä¸ªå¥½çš„ã€å¯é çš„ã€ç±»ä¼¼ [Heroku](https:\/\/www.heroku.com\/) çš„æŠ½è±¡ï¼Œåœ¨ Kubernetes ä¹‹ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ï¼Œè¿™è®©æˆ‘æ„Ÿåˆ°éœ‡æƒŠã€‚â€ â€”â€”Sam Newmanï¼ŒBuilding Microservices ä½œè€…\n\nAmbassador Labs çš„å¼€å‘è€…å…³ç³»æ€»ç›‘ [Daniel Bryant](https:\/\/www.linkedin.com\/in\/danielbryantuk) å‘Šè¯‰ The New Stackï¼šâ€œå¦‚æœä½ çœ‹çœ‹ [Airbnb](https:\/\/www.airbnb.com\/)ã€[Shopify](https:\/\/www.shopify.com\/) å’Œ [Lunar](https:\/\/tech.lunar.app\/) ç­‰å…¬å¸æ­£åœ¨åšä»€ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¸€ä¸ªæ˜æ˜¾çš„å…±åŒç‚¹ã€‚ä»–ä»¬æ­£åœ¨ä¸ºä»–ä»¬çš„å¼€å‘è€…åˆ›å»ºä¸€ä¸ªç±»ä¼¼äº Heroku çš„ CLIï¼Œè¿™æ ·ï¼Œåƒâ€™åˆ›å»ºæ–°çš„å¾®æœåŠ¡â€™è¿™æ ·çš„å‘½ä»¤å°±ä¼šäº§ç”Ÿä¸€äº›æ”¯æ¶ï¼Œæ’å…¥ CIï¼Œæ’å…¥ç®¡é“ï¼Œæ’å…¥å¯è§‚æµ‹æ€§ã€‚é—®é¢˜æ˜¯ï¼Œä½ å‘å¼€å‘è€…å±•ç¤ºçš„æŠ½è±¡æ˜¯ä»€ä¹ˆï¼Œä»¥ä¾¿ä»–ä»¬è·å¾—æ‰€éœ€çš„å¯è§æ€§ï¼ŒåŒæ—¶ä¹Ÿä½¿ä»–ä»¬æ‰€éœ€çš„è¦æ±‚å˜å¾—æ¸…æ™°ï¼Ÿâ€\n\nBryant ç‰¹ç»§ç»­è¯´ï¼šâ€œå¼€å‘è€…éœ€è¦æŒ‡å®šæŸäº›æ“ä½œç‰¹æ€§ï¼šè¿™æ˜¯ä¸€ä¸ªå†…å­˜å¤§çš„æœåŠ¡ï¼›è¿™ä¸ªæœåŠ¡éœ€è¦ä½å»¶è¿Ÿï¼›è¿™ä¸ªæœåŠ¡éœ€è¦éå¸¸æ¥è¿‘é‚£ä¸ªæœåŠ¡ã€‚ç›®å‰ï¼Œä½ é€šè¿‡å¯åŠ¨ Kubernetes å’Œç¼–å†™å¤§é‡çš„ YAML æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚é‚£é‡Œçš„æŠ½è±¡å¹¶ä¸å®Œå…¨æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯å½“ä½ å¼•å…¥å…¶ä»–éƒ¨ç½²æœºåˆ¶æ—¶ï¼Œå¦‚[æ— æœåŠ¡å™¨](https:\/\/thenewstack.io\/category\/serverless\/)å’Œ[ä½ä»£ç  \/ æ— ä»£ç ](https:\/\/thenewstack.io\/how-low-code-can-help-enterprise-software-development\/)ã€‚\n\nâ€œæˆ‘æƒ³çŸ¥é“è°èƒ½é€šè¿‡å¹³å°æš´éœ²å‡ºæ­£ç¡®çš„æŠ½è±¡æ¦‚å¿µï¼Œç„¶åè®©å·¥ç¨‹å¸ˆå†³å®šå¦‚ä½•æ‰“åŒ…ä»–ä»¬çš„ä»£ç  â€”â€” ä½†ä»–ä»¬æ‰“åŒ…çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œè€Œå¹³å°æš´éœ²å‡ºä¸€äº›ä¼ ç»Ÿä¸Šå±äºè¿ç»´çš„å±æ€§ã€‚â€\n\n## å¼€æ”¾åº”ç”¨æ¨¡å‹ï¼ˆOAMï¼‰\n\nå…¶ä»–å‡ ä¸ªå…³äº Kubernetes çš„å€¡è®®ä¹Ÿå€¼å¾—è·Ÿè¸ªã€‚ç”±[å¾®è½¯å’Œé˜¿é‡Œäº‘](https:\/\/thenewstack.io\/open-application-model-build-the-next-generation-of-cloud-native-applications\/)è”åˆåˆ›å»ºçš„[å¼€æ”¾åº”ç”¨æ¨¡å‹](https:\/\/oam.dev\/)ï¼ˆOAMï¼‰æ˜¯ä¸€ä¸ªæè¿°åº”ç”¨çš„è§„èŒƒï¼Œå°†åº”ç”¨å®šä¹‰ä¸é›†ç¾¤çš„æ“ä½œç»†èŠ‚åˆ†å¼€ã€‚å› æ­¤ï¼Œå®ƒä½¿åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜èƒ½å¤Ÿä¸“æ³¨äºå…¶åº”ç”¨ç¨‹åºçš„å…³é”®è¦ç´ ï¼Œè€Œä¸æ˜¯å…¶éƒ¨ç½²åœ°ç‚¹çš„æ“ä½œç»†èŠ‚ã€‚\n\n[Crossplane](https:\/\/crossplane.io\/) æ˜¯ [OAM](https:\/\/thenewstack.io\/oam-the-kubernetes-application-model-bridging-development-and-deployment\/) çš„ Kubernetes ç‰¹å®šå®ç°ã€‚å®ƒå¯ä»¥è¢«ä¼ä¸šç”¨æ¥åœ¨å„ç§åŸºç¡€è®¾æ–½å’Œäº‘ä¾›åº”å•†ä¹‹é—´å»ºç«‹å’Œè¿ç»´ä¸€ä¸ªå†…éƒ¨å¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰ï¼Œè¿™ä½¿å¾—å®ƒåœ¨å¤šäº‘ç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨é‚£äº›å…¼å¹¶å’Œæ”¶è´­è¶Šæ¥è¶Šå¸¸è§çš„å¤§å‹ä¼ä¸šä¸­ã€‚\n\nè™½ç„¶ OAM è¯•å›¾å°†éƒ¨ç½²ç»†èŠ‚çš„è´£ä»»ä»ç¼–å†™æœåŠ¡ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½†æœåŠ¡ç½‘æ ¼æ—¨åœ¨é€šè¿‡ä¸€ä¸ªä¸“é—¨çš„åŸºç¡€è®¾æ–½å±‚å°†æœåŠ¡é—´é€šä¿¡çš„è´£ä»»ä»ä¸ªäººå¼€å‘è€…é‚£é‡Œè½¬ç§»å‡ºæ¥ï¼Œè¯¥å±‚ä¾§é‡äºä½¿ç”¨ä»£ç†ç®¡ç†æœåŠ¡é—´çš„é€šä¿¡ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä»¬ä¹Ÿæœ‰å¤æ‚æ€§çš„é—®é¢˜ï¼Œè€Œä¸”è¿˜å¯èƒ½å¼•å…¥ç›¸å½“å¤§çš„æ€§èƒ½å¼€é”€ã€‚\n\nå› æ­¤ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè®¸å¤šåœ¨ç”Ÿäº§ä¸­æˆåŠŸå®æ–½æœåŠ¡ç½‘æ ¼çš„æ¡ˆä¾‹éƒ½æ˜¯åœ¨é‚£äº›éå¸¸ç²¾é€šæŠ€æœ¯çš„åˆåˆ›å…¬å¸ã€‚åœ¨ [2020 å¹´ä¸ InfoQ çš„ Wes Reisz çš„æ’­å®¢ä¸­](https:\/\/www.infoq.com\/podcasts\/monolith-microservices\/?)ï¼ŒNewman å»ºè®®åœ¨é€‰æ‹©ä¹‹å‰ç­‰å¾… 6 ä¸ªæœˆï¼Œä»–å‘Šè¯‰ The New Stackï¼Œä»–ä»ç„¶ç»™å‡ºåŒæ ·çš„å»ºè®®ã€‚\n\nâ€œå°±è¯¥æŠ€æœ¯æ ˆçš„æƒé‡ã€ç®¡ç†ã€å½±å“ä»¥åŠæ€§èƒ½å¸¦æ¥çš„å½±å“è€Œè¨€ï¼Œå®ƒä»¬çš„ç°å®æƒ…å†µæ˜¯éå¸¸å¯æ€•çš„ï¼Œâ€œNewman è¯´ã€‚â€œå¯¹æœ‰ä¸€äº›ç»„ç»‡è¯´ï¼Œå¦‚æœæ²¡æœ‰å®ƒä»¬ï¼Œæœ‰äº›äº‹æƒ…æ˜¯ä¸å¯èƒ½å®Œæˆçš„ï¼Œ[Monzo å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­](https:\/\/monzo.com\/blog\/2019\/04\/03\/deploying-envoy-proxy) â€”â€” åœ¨ä¸€ä¸ªç»„ç»‡ä¸­ï¼Œä½ æœ‰ä¸€ä¸ªå¼‚æ„çš„æŠ€æœ¯æ ˆï¼Œä½ éœ€è¦åšå¤§è§„æ¨¡çš„åŒå‘ TLSï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å®ƒçš„ä»·å€¼ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒä»ç„¶æ˜¯â€œæ¦‚å¿µå¾ˆå¥½ï¼Œæ‰§è¡Œä¸åŠ›â€ã€‚æˆ‘æƒ³ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¾ˆé•¿æ—¶é—´å†…ä»è¿™æ ·è¯´ã€‚â€\n\n## éšè—æœåŠ¡ç½‘æ ¼\n\næœ‰ä¸€ä»¶äº‹å¯èƒ½ä¼šå‘ç”Ÿï¼Œè‡³å°‘å¯¹ä¼ä¸šå®¢æˆ·æ¥è¯´ï¼Œæ€§èƒ½é—®é¢˜å¾€å¾€ä¸æ˜¯é‚£ä¹ˆå°–é”ï¼Œé‚£å°±æ˜¯æœåŠ¡ç½‘æ ¼è¢«æ¨åˆ°å¹³å°çš„æ›´æ·±å¤„ï¼Œå¹¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå¯¹å¼€å‘è€…éšè—ã€‚ä¾‹å¦‚ï¼Œ[çº¢å¸½ OpenShift](https:\/\/www.openshift.com\/try?utm_content=inline-mention) [å°† Istio æ•´åˆåˆ°å¹³å°å±‚](https:\/\/www.openshift.com\/blog\/istio-on-openshift-in-2020)ï¼Œè¿˜æœ‰å¤šä¸ªç±»ä¼¼çš„è®¡åˆ’ï¼Œå°†æœåŠ¡ç½‘æ ¼ä¸å…¬æœ‰äº‘å¹³å°æ›´ç´§å¯†åœ°æ•´åˆåœ¨ä¸€èµ·ï¼Œå¦‚ [AWS App Mesh](https:\/\/aws.amazon.com\/app-mesh\/?aws-app-mesh-blogs.sort-by=item.additionalFields.createdDate\u0026aws-app-mesh-blogs.sort-order=desc\u0026whats-new-cards.sort-by=item.additionalFields.postDateTime\u0026whats-new-cards.sort-order=desc) å’Œ [Google Cloud Platform Traffic Director](https:\/\/cloud.google.com\/traffic-director)ã€‚\n\nå…³äºæœåŠ¡ç½‘æ ¼çš„å·¥ä½œè¿˜åœ¨ç»§ç»­ï¼Œä»¥å‡å°‘å…¶æ‰€å¸¦æ¥çš„ç½‘ç»œå¼€é”€ã€‚[Cilium](https:\/\/cilium.io\/) å›¢é˜Ÿçš„å·¥ä½œå¾ˆæœ‰å¸Œæœ›ï¼Œå®ƒåˆ©ç”¨ Linux å†…æ ¸ä¸­çš„ [eBPF](https:\/\/ebpf.io\/) åŠŸèƒ½æ¥å®ç°å®ƒæ‰€è¯´çš„â€œéå¸¸æœ‰æ•ˆçš„ç½‘ç»œã€ç­–ç•¥æ‰§è¡Œå’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½â€ã€‚\n\n\u003e æˆ‘è®¤ä¸ºç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºå…¶ä»–äººæä¾›é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ã€‚å› ä¸ºå³ä½¿æ˜¯æ™®é€šçš„å¼€å‘è€…è€Œä¸æ˜¯æ¶æ„å¸ˆï¼Œä¹Ÿéœ€è¦å¯¹å¦‚ä½•ç¡®å®šå®ä½“çš„èŒƒå›´å’Œè¾¹ç•Œæœ‰ä¸€å®šçš„äº†è§£ï¼Œè¿™å…¶ä¸­æœ‰å¾ˆå¤šæ˜¯å›åˆ°äº†è‰¯å¥½çš„ API è®¾è®¡ä¸Šã€‚â€”â€”Daniel Bryantï¼Œå¼€å‘è€…å…³ç³»æ€»ç›‘ï¼ŒAmbassador Labs\n\nä½†å¦ä¸€ç§å¯èƒ½æ€§æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å®Œå…¨è½¬å‘ä¸åŒçš„è¿è¡Œæ—¶ã€‚[Leading Edge Forum](https:\/\/leadingedgeforum.com\/) çš„é¡¾é—® [Simon Wardley](https:\/\/www.linkedin.com\/in\/simonwardley\/) [è®¤ä¸º](https:\/\/acloudguru.com\/blog\/engineering\/simon-wardley-is-a-big-fan-of-containers-despite-what-you-might-think)ï¼Œå‡½æ•°å³æœåŠ¡ï¼ˆFaasï¼‰\/ æ— æœåŠ¡å™¨å°†æœ€ç»ˆå–ä»£ Kubernetesï¼Œæˆä¸ºåˆ†å¸ƒå¼åº”ç”¨äº‹å®ä¸Šçš„æ ‡å‡†è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ä¸€äº›çœŸå®çš„ç”Ÿäº§å®ä¾‹ï¼Œæ¯”å¦‚ [BBC](https:\/\/www.bbc.com\/)ï¼Œå®ƒçš„å¤§éƒ¨åˆ†åœ¨çº¿æ¶æ„å·²ç»ä»ä¹‹å‰çš„ LAMP å †æ ˆ [ç›´æ¥è½¬å‘äº† AWS ä¸Šçš„ Lambda](https:\/\/www.infoq.com\/podcasts\/bbc-aws-lambda-react-cicd\/)ã€‚\n\nâ€œæˆ‘è®¤ä¸º FaaS æ˜¯ä¸€ä¸ªç®¡ç†éƒ¨ç½²çš„ä¼Ÿå¤§æŠ½è±¡ï¼Œâ€œNewman è¯´ã€‚â€œä½œä¸ºä¸€ä¸ªå¯¹å¼€å‘è€…å‹å¥½çš„éƒ¨ç½²è½¯ä»¶çš„æŠ½è±¡ï¼Œå®ƒæ˜¯è‡ª Heroku ä»¥æ¥æˆ‘ä»¬æ‹¥æœ‰çš„æœ€å¥½çš„ä¸œè¥¿ã€‚æˆ‘ç¡®å®è®¤ä¸ºç›®å‰çš„å®ç°æ–¹å¼å¾ˆå·®ï¼Œä½†ä»–ä»¬ä¼šæ”¹è¿›ã€‚ä½†ä»–ä»¬åªå¤„ç†äº†åœ¨ä¸€æ¬¡åœ¨ä¸€ä¸ªåœ°æ–¹æ‰§è¡Œä¸€ä»¶ä»»åŠ¡ã€‚è¿™å¹¶æ²¡æœ‰è§£å†³æ›´å¤§çš„ç½‘ç»œç³»ç»Ÿçš„æŠ½è±¡é—®é¢˜â€ã€‚\n\nä½œä¸ºä¸€ä¸ªä¾‹å­ï¼ŒNewman å¼•ç”¨äº†[å¾®è½¯ Azure](https:\/\/azure.microsoft.com\/) çš„ [Durable Functions](https:\/\/docs.microsoft.com\/en-us\/azure\/azure-functions\/durable\/durable-functions-overview?tabs=csharp)ï¼Œå®ƒé€šè¿‡å“åº”å¼æ‰©å±•æä¾›äº†ç±»ä¼¼äºè¿ç»­æ€§çš„ä¸œè¥¿ï¼Œå…è®¸å¼€å‘è€…åœ¨æ— æœåŠ¡å™¨ç¯å¢ƒä¸­å»ºç«‹æœ‰çŠ¶æ€çš„å·¥ä½œæµå’Œå‡½æ•°ã€‚ä½†æ˜¯ï¼Œè™½ç„¶éƒ¨ç½²æŠ½è±¡å¯èƒ½ä¼šæœ‰æ‰€æ”¹å–„ï¼Œä½†å¦‚æœæƒ³è±¡ä½ å¯ä»¥å®Œå…¨æŠ½è±¡å‡ºç¼–å†™åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œé‚£å°±å¤ªå¤©çœŸäº†ã€‚\n\nâ€œä½ ä¸èƒ½å‡è®¾ä½ è¯´çš„ä¸œè¥¿å°±åœ¨é‚£é‡Œï¼Œâ€œNewman è¯´ã€‚â€œä½ ä¸èƒ½å‡è®¾æ•°æ®ä¼šç¥å¥‡åœ°ä»ä¸€ä¸ªæ—¶é—´ç‚¹ç¬æ—¶ä¼ é€åˆ°å¦ä¸€ä¸ªæ—¶é—´ç‚¹ã€‚å› ä¸ºå®ƒä¸æ˜¯è¿™æ ·çš„ã€‚è€Œä¸”ï¼Œå†å¤šçš„æŠ½è±¡ä¹Ÿæ— æ³•è§£å†³è¿™ä¸ªåŸºæœ¬é—®é¢˜ã€‚â€\n\n## è‡ªä¸»å›¢é˜Ÿçš„æ¶æ„\n\nå¦ä¸€ä¸ªä»ç„¶å…·æœ‰æŒ‘æˆ˜æ€§çš„é¢†åŸŸä¸æ•´ä¸ªç³»ç»Ÿæ¶æ„æœ‰å…³ï¼Œä»¥åŠå›´ç»•å›¢é˜Ÿç»„ç»‡å’Œç»“æ„çš„ç›¸å…³é—®é¢˜ã€‚æ­£å¦‚ [IBM](https:\/\/www.ibm.com\/cloud?utm_content=logo-sponsorpage\u0026utm_source=thenewstack\u0026utm_medium=website\u0026utm_campaign=platform) çš„å…¨çƒå¼€å‘è€… leader [Holly Cummins](https:\/\/www.linkedin.com\/in\/holly-k-cummins) åœ¨ äº‘åŸç”Ÿæ˜¯å…³äºæ–‡åŒ–è€Œä¸æ˜¯å®¹å™¨ ä¸€æ–‡ä¸­æŒ‡å‡ºçš„ï¼Œâ€œå³ä½¿æœ‰é€‚å½“çš„è‡ªä¸»å›¢é˜Ÿï¼Œç³»ç»Ÿçº§çš„è€ƒè™‘ä¹Ÿä¸ä¼šæ¶ˆå¤±â€ã€‚\n\nEric Evans çš„ã€Š[é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹](https:\/\/www.amazon.com\/gp\/product\/0321125215\/ref=as_li_tl?ie=UTF8\u0026camp=1789\u0026creative=9325\u0026creativeASIN=0321125215\u0026linkCode=as2\u0026tag=martinfowlerc-20)æ˜¯å¾®æœåŠ¡è¿åŠ¨çš„åŸºçŸ³ï¼Œä»»ä½•è½¯ä»¶æ¶æ„å¸ˆéƒ½åº”è¯¥é˜…è¯»ï¼ŒBryant è¯´ã€‚ä½†ä»–æ›´è¿›ä¸€æ­¥è¯´ï¼š\n\nâ€œæˆ‘è®¤ä¸ºç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬å…¶ä»–äººæä¾› DDDï¼Œâ€œä»–å‘Šè¯‰ The New Stackã€‚â€œå› ä¸ºå³ä½¿æ˜¯æ™®é€šçš„å¼€å‘è€…è€Œä¸æ˜¯æ¶æ„å¸ˆï¼Œä¹Ÿéœ€è¦å¯¹å¦‚ä½•ç¡®å®šå®ä½“å’Œè¾¹ç•Œçš„èŒƒå›´æœ‰ä¸€å®šçš„äº†è§£ï¼Œå…¶ä¸­å¾ˆå¤šéƒ½è¦å›åˆ°è‰¯å¥½çš„ API è®¾è®¡ã€‚ä¸€æ—¦ä½ ç†è§£äº†è€¦åˆå’Œå†…èšçš„é‡è¦æ€§ï¼Œå…³æ³¨ç‚¹å’Œè¾¹ç•Œçš„åˆ†ç¦»ï¼Œæ— è®ºä½ å¤„ç†çš„æ˜¯ä»€ä¹ˆæŠ½è±¡ï¼ˆæ¨¡å—ã€ç±»ã€æœåŠ¡ã€åº”ç”¨ï¼‰ï¼Œä½ éƒ½ä¼šè‡ªç„¶è€Œç„¶åœ°è·³åˆ°è¿™ä¸ªé½¿è½®ä¸Šã€‚â€\n\nNewman çš„ Building Microservices ä¸€ä¹¦çš„ç¬¬äºŒç‰ˆå³å°†æ¨å‡ºï¼Œè¯¥ä¹¦ä»‹ç»äº†å¾ˆå¤šè¿™äº›æ¦‚å¿µï¼Œå¹¶è€ƒè™‘åˆ°äº†ä¸‹ä¸€ä»£æœåŠ¡ã€‚\n\nåœ¨æ›´æ–°è¿™æœ¬ä¹¦æ—¶ï¼ŒNewman å‘Šè¯‰ The New Stackï¼Œâ€œæˆ‘æƒ³å¤šè°ˆä¸€ç‚¹è€¦åˆæ€§ã€‚æˆ‘æƒ³å¤šè°ˆä¸€ç‚¹å†…èšåŠ›ã€‚æˆ‘æƒ³æ›´å¤šåœ°è°ˆè®ºä¿¡æ¯éšè—ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯ç°åœ¨æœ€é‡è¦çš„äº‹æƒ…ã€‚\n\nâ€œæˆ‘è®¤ä¸ºï¼Œå³ä½¿äººä»¬æŒæ¡äº†åˆ†å¸ƒå¼ç³»ç»Ÿæ–¹é¢çš„çŸ¥è¯†ï¼Œä»–ä»¬ä¹Ÿæ²¡æœ‰æŒæ¡ä¸€ä¸ªäº‹å®ï¼Œå³ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå¾®æœåŠ¡åªæ˜¯æ¨¡å—åŒ–æ¶æ„çš„ä¸€ç§å½¢å¼ã€‚ç„¶è€Œï¼Œå¾ˆå¤šåˆ›å»ºå¾®æœåŠ¡çš„äººå¯¹ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–æ¶æ„æˆ–å¦‚ä½•è¿›è¡Œæ¨¡å—åŒ–æ¯«æ— æ¦‚å¿µã€‚â€\n\nNewman åœ¨æ–°ä¹¦ä¸­è¿˜å¼•å…¥äº†è‡ª 2014 å¹´ç¬¬ä¸€ç‰ˆå‡ºç‰ˆä»¥æ¥å‡ºç°çš„ä¸€äº›ç»„ç»‡æ€ç»´çš„å˜åŒ–ã€‚ä»–ç‰¹åˆ«å¼•ç”¨äº†é©¬ä¿®ãƒ»æ–¯å‡¯å°”é¡¿ï¼ˆMatthew Skeltonï¼‰å’Œæ›¼åŠªåŸƒå°”ãƒ»æ´¾æ–¯ï¼ˆManuel Paisï¼‰å…³äºå¦‚ä½•ç»„ç»‡ä¸šåŠ¡å’ŒæŠ€æœ¯å›¢é˜Ÿä»¥å®ç°å¿«é€ŸæµåŠ¨çš„æå…·å½±å“åŠ›çš„ä½œå“[ã€Šå›¢é˜Ÿæ‹“æ‰‘ï¼ˆTeam Topologiesï¼‰ã€‹](https:\/\/teamtopologies.com\/book)ï¼Œä»¥åŠå°¼ç§‘å°”ãƒ»ç¦æ–¯æ ¼ä¼¦ï¼ˆNicole Forsgrenï¼‰ã€æ°å…¹ãƒ»æ±‰ä¼¯ï¼ˆJez Humbleï¼‰å’Œå‰æ©ãƒ»é‡‘ï¼ˆGene Kimï¼‰çš„[ã€ŠåŠ é€Ÿï¼ˆAccelerateï¼‰ã€‹](https:\/\/itrevolution.com\/accelerate-book\/)ä¸€ä¹¦ï¼Œè¯¥ä¹¦æ¢è®¨äº†ç²¾ç›Šç®¡ç†å’Œ DevOps åŸåˆ™èƒŒåçš„ç§‘å­¦ã€‚\n\nä¿®è®¢è¿‡ç¨‹ä¸ä»…æ­ç¤ºäº†æœ‰å¤šå°‘å…³äºå¾®æœåŠ¡çš„æ–°çŸ¥è¯†å¯ä»¥åˆ†äº«ï¼Œè€Œä¸”è¿™äº›çŸ¥è¯†æ˜¯å¦‚ä½•ä¸æ–­ç§¯ç´¯çš„ã€‚\n\nâ€œè¿™æœ¬ä¹¦å¯ä»¥è®©ä½ å¹¿æ³›äº†è§£ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ä»¥åŠå®ƒå¯¹è½¯ä»¶å¼€å‘çš„å½±å“ï¼Œâ€œNewman è¯´ã€‚â€œæˆ‘å‘ç°æˆ‘åœ¨å‘äººä»¬æ¨èï¼Œå“¦ï¼Œä½ åº”è¯¥è¯»é‚£æœ¬ä¹¦çš„ç¬¬å››ç« ã€‚ç°åœ¨æˆ‘ä¼šè¯´è¿™ä¸ªï¼Œè€Œä¸æ˜¯é‚£ä¸ªã€‚æˆ‘ä¸æƒ³åœ¨æ¨èè‡ªå·±çš„ä¹¦ä¸Šä¸€ç›´å«ç³Šå…¶è¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘å†™äº†ç¬¬äºŒç‰ˆï¼šå› ä¸ºæˆ‘å¸Œæœ›å®ƒæ˜¯å¥½çš„ã€å‡†ç¡®çš„ã€‚â€\n', '\/trans\/the-future-of-microservices\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">åœ¨è¿›å…¥å¾®æœåŠ¡æ—¶ä»£çš„åå¹´é‡Œï¼Œæ€è€ƒä¸€ä¸‹æˆ‘ä»¬å·²ç»èµ°åˆ°äº†å“ªä¸€æ­¥ï¼Œä»¥åŠæˆ‘ä»¬è¿˜éœ€è¦è§£å†³å“ªäº›é—®é¢˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/introducing-policy-as-code-the-open-policy-agent-opa/">[è¯‘] ç­–ç•¥å³ä»£ç â€”â€”Open Policy Agentï¼ˆå¼€æ”¾ç­–ç•¥ä»£ç† OPAï¼‰ç®€ä»‹</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2021/06/29</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('ç­–ç•¥å³ä»£ç â€”â€”Open Policy Agentï¼ˆå¼€æ”¾ç­–ç•¥ä»£ç† OPAï¼‰ç®€ä»‹', 'æœ¬æ–‡å°†å¸¦ä½ åˆæ­¥äº†è§£å¼€æ”¾ç­–ç•¥ä»£ç† OPAï¼Œä¸€ä¸ªå¹³å°æ— å…³çš„ç­–ç•¥æ‰§è¡Œå·¥å…·ã€‚', '\n## ä»€ä¹ˆæ˜¯ OPAï¼Ÿ\n\nè¿™æ˜¯ä¸€ä¸ªå§‹äº 2016 å¹´çš„é¡¹ç›®ï¼Œæ—¨åœ¨ç»Ÿä¸€ä¸åŒæŠ€æœ¯å’Œç³»ç»Ÿçš„ç­–ç•¥æ‰§è¡Œã€‚ä»Šå¤©ï¼ŒOPA è¢«ç§‘æŠ€è¡Œä¸šå†…çš„å·¨å¤´ä»¬æ‰€ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒNetflix ä½¿ç”¨ OPA æ¥æ§åˆ¶å¯¹å…¶å†…éƒ¨ API èµ„æºçš„è®¿é—®ã€‚Chef ç”¨å®ƒæ¥ä¸ºä»–ä»¬çš„ç»ˆç«¯ç”¨æˆ·äº§å“æä¾› IAM åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè®¸å¤šå…¶ä»–å…¬å¸ï¼Œå¦‚ Cloudflareã€Pinterest ç­‰ï¼Œéƒ½ä½¿ç”¨ OPA åœ¨ä»–ä»¬çš„å¹³å°ä¸Šæ‰§è¡Œç­–ç•¥ï¼ˆå¦‚ Kubernetes é›†ç¾¤ï¼‰ã€‚ç›®å‰ï¼ŒOPA å·²ä» CNCF ä¸­æ¯•ä¸šã€‚\n\n## OPA æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nä½ å¯èƒ½æƒ³çŸ¥é“ OPA æ˜¯æ€æ ·è¯ç”Ÿçš„ï¼Ÿå®ƒè¯•å›¾è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿäº‹å®ä¸Šï¼ŒAPI å’Œå¾®æœåŠ¡çš„ç­–ç•¥æ‰§è¡Œå°±å¦‚åŒå¾®æœåŠ¡æœ¬èº«ä¸€æ ·å¤è€ã€‚æ²¡æœ‰ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„åº”ç”¨ç¨‹åºä¸æ‰§è¡Œè®¿é—®æ§åˆ¶ã€æˆæƒå’Œç­–ç•¥ã€‚ä¸ºäº†ç†è§£ OPA çš„ä½œç”¨ï¼Œè€ƒè™‘ä»¥ä¸‹ç”¨ä¾‹ï¼šä½ çš„å…¬å¸é€šè¿‡ä¸€ä¸ªåœ¨çº¿é—¨æˆ·é”€å”®ç¬”è®°æœ¬ç”µè„‘ã€‚åƒæ‰€æœ‰å…¶ä»–ç±»ä¼¼çš„åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œè¯¥é—¨æˆ·ç”±ä¸€ä¸ªé¦–é¡µç»„æˆï¼Œå®¢æˆ·åœ¨è¿™é‡Œçœ‹åˆ°æœ€æ–°çš„äº§å“ï¼Œä¹Ÿè®¸è¿˜æœ‰ä¸€äº›é™æ—¶ä¿ƒé”€æ´»åŠ¨ã€‚å¦‚æœå®¢æˆ·æƒ³ä¹°ä¸œè¥¿ï¼Œä»–ä»¬éœ€è¦ç™»å½•æˆ–åˆ›å»ºä¸€ä¸ªè´¦æˆ·ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä¿¡ç”¨å¡æˆ–å…¶ä»–æ–¹æ³•ä»˜æ¬¾ã€‚ä¸ºäº†ç¡®ä¿å®¢æˆ·ä¼šåå¤è®¿é—®ï¼Œéœ€è¦æ”¯æŒå®¢æˆ·è®¢é˜…ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«ç‰¹åˆ«æŠ˜æ‰£ä¿¡æ¯ã€‚å¦å¤–ï¼Œä»–ä»¬å¯ä»¥é€‰æ‹©åœ¨æ–°äº§å“å…¬å¸ƒåç«‹å³æ¥æ”¶æµè§ˆå™¨é€šçŸ¥ã€‚ä¸€ä¸ªéå¸¸å…¸å‹çš„ç½‘ä¸Šè´­ç‰©åº”ç”¨ç¨‹åºï¼Œå¯¹å—ï¼Ÿç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªå·¥ä½œæµç¨‹æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œä»¥ä½¿è¿™ä¸ªè¿‡ç¨‹å¯è§†åŒ–ã€‚\n\n![](008i3skNly1gryvk70h04j30wm0u0x2v.jpg)\n\nä¸Šå›¾æ˜¾ç¤ºäº†æˆ‘ä»¬ç³»ç»Ÿå†…éƒ¨å¯èƒ½çš„æ ·å­ã€‚æˆ‘ä»¬æœ‰ä¸€äº›å¾®æœåŠ¡ï¼Œå®ƒä»¬ç›¸äº’æ²Ÿé€šï¼Œä¸ºæˆ‘ä»¬çš„å®¢æˆ·æä¾›æœåŠ¡ã€‚ç°åœ¨ï¼Œæ˜¾ç„¶ï¼ŒBob ä¸åº”è¯¥çœ‹åˆ°ç³»ç»Ÿçš„ä»»ä½•å†…éƒ¨è¿ä½œã€‚ä¾‹å¦‚ï¼Œä»–ä¸èƒ½æŸ¥çœ‹ï¼ˆæˆ–ç”šè‡³ä¸çŸ¥é“ï¼‰å½’æ¡£ä»˜æ¬¾çš„ S3 Bucketï¼Œæˆ–é€šçŸ¥ API å¯ä»¥ä¸å“ªäº›æœåŠ¡è”ç»œã€‚ä½†æ˜¯ï¼ŒJohn å‘¢ï¼Ÿä»–æ˜¯åº”ç”¨å¼€å‘è€…ï¼Œä»–éœ€è¦è®¿é—®æ‰€æœ‰çš„å¾®æœåŠ¡ï¼Œä»¥ä¾¿åœ¨é—®é¢˜å‘ç”Ÿæ—¶èƒ½å¤Ÿè¿›è¡Œæ•…éšœæ’é™¤å’Œè°ƒè¯•ã€‚è¦æ˜¯ä»–ä¸å°å¿ƒï¼ˆæˆ–æ•…æ„ï¼‰å¯¹æ•°æ®åº“æœåŠ¡è¿›è¡Œäº†ä¸€ä¸ª API è°ƒç”¨ï¼ŒæŠŠå®¢æˆ·çš„é€è´§åœ°å€æ”¹åˆ°äº†åˆ«çš„åœ°æ–¹ï¼Œæ€ä¹ˆåŠï¼Ÿæ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœä»–å¯¹å®¢æˆ·çš„ä¿¡ç”¨å¡å·ç æœ‰è¯»å–æƒé™æ€ä¹ˆåŠï¼Ÿä¸ºäº†è§£å†³è¿™äº›é£é™©ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªå¾®æœåŠ¡çš„ä¹‹å‰æ”¾ç½®äº†ä¸€ä¸ªæˆæƒæ§åˆ¶ã€‚è¯¥æ§ä»¶æ£€æŸ¥è®¤è¯ç”¨æˆ·æ˜¯å¦æœ‰å¿…è¦çš„æƒé™æ¥æ‰§è¡Œè¯·æ±‚çš„æ“ä½œã€‚è¿™æ ·çš„æˆæƒç³»ç»Ÿå¯ä»¥æ˜¯å†…éƒ¨çš„ã€è‡ªåˆ¶çš„ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯ AWS IAM æä¾›çš„å¤–éƒ¨ç¨‹åºã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å¾®æœåŠ¡åº”ç”¨ç¨‹åºçš„æ„å»ºå’Œå®‰å…¨ã€‚ä½†æ˜¯ï¼Œçœ‹çœ‹ä½¿ç”¨å‡ ç§ä¸åŒçš„æˆæƒç³»ç»Ÿçš„ç¼ºç‚¹ï¼Œç‰¹åˆ«æ˜¯éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿è€Œå¸¦æ¥çš„éº»çƒ¦ã€‚\n\n- ä¿®æ”¹ç°æœ‰çš„ç­–ç•¥ï¼Œæˆ–å¼•å…¥æ–°çš„ç­–ç•¥ï¼Œæ˜¯ä¸€åœºå™©æ¢¦ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä½ éœ€è¦è®¿é—®å¤šå°‘åœ°æ–¹æ‰èƒ½è®© Alice æ‹¥æœ‰å¯¹æ‰€æœ‰å­˜å‚¨ç›¸å…³ç³»ç»Ÿçš„è¯»å–æƒé™ã€‚è¿™æ„å‘³ç€ S3ã€MySQLã€MongoDBï¼Œä¹Ÿè®¸è¿˜æœ‰ä¸€ä¸ªå¤–éƒ¨ APIï¼Œä»…æ­¤è€Œå·²ã€‚\n- å¼€å‘è€…æ²¡æœ‰åŠæ³•åœ¨ä»–ä»¬è‡ªå·±çš„ç³»ç»Ÿä¸Šæ‰§è¡Œç­–ç•¥ã€‚ä»–ä»¬æ˜¾ç„¶å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç¡¬ç¼–ç ä»–ä»¬çš„æˆæƒé€»è¾‘ï¼Œä½†è¿™ä½¿äº‹æƒ…å˜å¾—é”™ç»¼å¤æ‚ï¼šè¯•å›¾åœ¨ä¸åŒçš„å¾®æœåŠ¡ä¸­ç»Ÿä¸€ç­–ç•¥æ˜¯éå¸¸å¤æ‚çš„ã€‚\n- è¡¥å……å‰ä¸€ç‚¹ï¼Œä¸ºæœ¬åœ°æœåŠ¡å¼•å…¥ä¸€ä¸ªæ–°çš„ç­–ç•¥å¯èƒ½éœ€è¦æ”¹å˜ä»£ç ï¼Œä»è€Œå¼•å…¥æ‰€æœ‰å¾®æœåŠ¡çš„æ–°ç‰ˆæœ¬ã€‚\n- å¦‚æœä½ æƒ³å°†ç­–ç•¥ä¸ç°æœ‰çš„ç”¨æˆ·æ•°æ®åº“é›†æˆï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œä¸äººåŠ›èµ„æºæ•°æ®åº“æ•´åˆã€‚\n- æˆ‘ä»¬éœ€è¦å°†ç­–ç•¥å¯è§†åŒ–ï¼Œä»¥ç¡®ä¿å®ƒæ­£åœ¨åšå®ƒåº”è¯¥åšçš„äº‹æƒ…ã€‚éšç€ä½ çš„ç­–ç•¥å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™ä¸€ç‚¹å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚\n- ç°ä»£ç³»ç»Ÿç”±å¤šç§æŠ€æœ¯å’ŒæœåŠ¡ç»„æˆï¼Œè¿™äº›æŠ€æœ¯å’ŒæœåŠ¡æ˜¯ç”¨ä¸åŒçš„è¯­è¨€ç¼–å†™çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰è¿è¡Œåœ¨ Kubernetes ä¸Šçš„ç³»ç»Ÿæ ¸å¿ƒï¼Œä»¥åŠä¸€å †ä¸å±äºé›†ç¾¤çš„ç”¨ Javaã€Ruby å’Œ PHP ç¼–å†™çš„ä¼ ç»Ÿ APIã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰è‡ªå·±çš„æˆæƒæœºåˆ¶ã€‚\n\nè®©æˆ‘ä»¬ä»¥ Kubernetes ä¸ºä¾‹æ¥çœ‹çœ‹ã€‚å¦‚æœæ‰€æœ‰ç”¨æˆ·éƒ½è¢«æˆæƒè®¿é—®æ•´ä¸ªé›†ç¾¤ï¼Œå¾ˆå¤šè®¨åŒçš„äº‹æƒ…å°±ä¼šå‘ç”Ÿï¼Œæ¯”å¦‚ï¼š\n\n- ç»™æ‰€æœ‰çš„ pod æä¾›æ— é™çš„è¯·æ±‚å’Œé™åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´éšæœºçš„ pod è¢«ä»èŠ‚ç‚¹ä¸Šé©±é€ã€‚\n- æ‹‰å–å’Œä½¿ç”¨æœªç»æµ‹è¯•çš„ã€æ‚ä¹±æ— ç« çš„é•œåƒï¼Œå¯èƒ½åŒ…å«å®‰å…¨æ¼æ´æˆ–æ¶æ„å†…å®¹ã€‚\n- ä½¿ç”¨æ²¡æœ‰ TLS çš„ Ingress æ§åˆ¶å™¨ï¼Œå…è®¸æœªåŠ å¯†çš„ã€ä¸å®‰å…¨çš„æµé‡è¿›å…¥åº”ç”¨ç¨‹åºã€‚\n- ç”±äºæ•´ä½“çš„å¤æ‚æ€§ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–ä¸å¯é¢„è§çš„é£é™©ã€‚\n- ä½ è‚¯å®šå¯ä»¥ä½¿ç”¨ RBAC å’Œ Pod å®‰å…¨ç­–ç•¥æ¥å¯¹é›†ç¾¤è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ã€‚ä½†åŒæ ·ï¼Œè¿™åªé€‚ç”¨äºé›†ç¾¤ã€‚åœ¨ Kubernetes é›†ç¾¤ä¹‹å¤–ï¼ŒKubernetes RBAC æ˜¯æ²¡æœ‰ç”¨çš„ã€‚\n\nè¿™å°±æ˜¯å¼€æ”¾ç­–ç•¥ä»£ç†ï¼ˆOPAï¼‰å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å¼•å…¥ OPA æ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•æ¥æ‰§è¡Œå †æ ˆä¸­çš„å®‰å…¨ç­–ç•¥ã€‚\n\n## OPA å¦‚ä½•å·¥ä½œï¼Ÿ\n\nä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†ç­–ç•¥æ‰§è¡Œå’Œ OPA è¯•å›¾è§£å†³çš„é—®é¢˜ï¼Œç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\nå‡è®¾ä½ æ­£åœ¨å®ç°æˆ‘ä»¬ç¤ºä¾‹åº”ç”¨ç¨‹åºçš„æ”¯ä»˜æœåŠ¡ã€‚è¿™ä¸ªæœåŠ¡è´Ÿè´£å¤„ç†å®¢æˆ·çš„ä»˜æ¬¾ã€‚å®ƒæš´éœ²äº†ä¸€ä¸ª APIï¼Œæ¥å—å®¢æˆ·çš„ä»˜æ¬¾ã€‚å®ƒè¿˜å…è®¸ç”¨æˆ·æŸ¥è¯¢ç‰¹å®šå®¢æˆ·çš„ä»˜æ¬¾æƒ…å†µã€‚å› æ­¤ï¼Œä¸ºäº†è·å¾—ä¸€ä¸ªåŒ…å« Jane æ‰€åšè´­ä¹°çš„æ•°ç»„ï¼Œå¥¹æ˜¯å…¬å¸çš„ä¸€ä¸ªå®¢æˆ·ï¼Œä½ å‘ API å‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼Œè·¯å¾„ä¸º \u0060\/payment\/jane\u0060ã€‚ä½ åœ¨æˆæƒå¤´ä¸­æä¾›ä½ çš„è¯ä¹¦ä¿¡æ¯å¹¶å‘é€è¯·æ±‚ã€‚å“åº”å°†æ˜¯ä¸€ä¸ª JSON æ•°ç»„ï¼ŒåŒ…å«ä½ æ‰€è¦æ±‚çš„æ•°æ®ã€‚ç„¶è€Œï¼Œç”±äºä½ ä¸å¸Œæœ›æ‰€æœ‰æœ‰ç½‘ç»œè®¿é—®æƒé™çš„äººéƒ½èƒ½å¤Ÿè®¿é—®æ”¯ä»˜ APIï¼Œçœ‹åˆ°è¿™æ ·çš„æ•æ„Ÿæ•°æ®ï¼Œä½ éœ€è¦æ‰§è¡Œä¸€ä¸ªæˆæƒç­–ç•¥ã€‚OPA ä»¥å¦‚ä¸‹æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\n1. æ”¯ä»˜ API å‘ OPA æŸ¥è¯¢ä¸€ä¸ª decisionã€‚å®ƒä¼´éšç€è¿™ä¸ªæŸ¥è¯¢çš„ä¸€äº›å±æ€§ï¼Œå¦‚è¯·æ±‚ä¸­ä½¿ç”¨çš„ HTTP æ–¹æ³•ï¼Œè·¯å¾„ï¼Œç”¨æˆ·ï¼Œç­‰ç­‰ã€‚\n2. OPA æ ¹æ®å·²ç»æä¾›ç»™å®ƒçš„æ•°æ®æ¥éªŒè¯è¿™äº›å±æ€§ã€‚\n3. åœ¨éªŒè¯ä¹‹åï¼ŒOPA å‘è¯·æ±‚çš„ API å‘é€ä¸€ä¸ª decisionï¼Œè¦ä¹ˆå…è®¸ï¼Œè¦ä¹ˆæ‹’ç»ã€‚\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOPA å°†æˆ‘ä»¬çš„ç­–ç•¥å†³ç­–ä¸æ‰§è¡Œè§£è€¦ã€‚OPA çš„å·¥ä½œæµç¨‹å¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¥æè¿°ã€‚\n\n![OPAd çš„å·¥ä½œæµç¨‹](008i3skNly1gryw7x0q6gj30u00xt7td.jpg)\n\nOPA æ˜¯ä¸€ä¸ªé€šç”¨çš„ã€ä¸é¢†åŸŸæ— å…³çš„ç­–ç•¥æ‰§è¡Œå·¥å…·ã€‚å®ƒå¯ä»¥ä¸ APIã€Linux SSH å®ˆæŠ¤ç¨‹åºã€åƒ CEPH è¿™æ ·çš„å¯¹è±¡å­˜å‚¨ç­‰é›†æˆã€‚OPA çš„è®¾è®¡è€…æœ‰æ„é¿å…å°†å…¶å»ºç«‹åœ¨ä»»ä½•å…¶ä»–é¡¹ç›®çš„åŸºç¡€ä¸Šã€‚å› æ­¤ï¼Œç­–ç•¥æŸ¥è¯¢å’Œå†³å®šä¸éµå¾ªç‰¹å®šçš„æ ¼å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„ JSON æ•°æ®ä½œä¸ºè¯·æ±‚å±æ€§ï¼Œåªè¦å®ƒæä¾›æ‰€éœ€çš„æ•°æ®ã€‚åŒæ ·åœ°ï¼Œæ¥è‡ª OPA çš„ç­–ç•¥å†³ç­–ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JSON æ•°æ®ã€‚ä½ é€‰æ‹©ä»€ä¹ˆè¢«è¾“å…¥ï¼Œä»€ä¹ˆè¢«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€‰æ‹©è®© OPA è¿”å›ä¸€ä¸ª TRUE æˆ– FALSE çš„ JSON å¯¹è±¡ï¼Œä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªå¤æ‚çš„æ•°æ®å¯¹è±¡ã€‚\n\n## OPA å†…éƒ¨\n\nä¸ºäº†å……åˆ†ç†è§£ OPA å¹¶å¼€å§‹åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®æ–½å®ƒï¼Œä½ å¿…é¡»ç†Ÿæ‚‰å®ƒçš„åŠŸèƒ½å’Œç»„ä»¶ã€‚è®©æˆ‘ä»¬ä»å¦‚ä½•å®šä¹‰ä½ çš„ç­–ç•¥å¼€å§‹ã€‚\n\n### ç­–ç•¥è¯­è¨€ Rego\n\nRego æ˜¯ä¸€ç§é«˜çº§çš„å£°æ˜æ€§è¯­è¨€ï¼Œæ˜¯ä¸“é—¨ä¸º OPA å»ºç«‹çš„ã€‚å®ƒä½¿å®šä¹‰ç­–ç•¥å’Œè§£å†³ä»¥ä¸‹é—®é¢˜å˜å¾—éå¸¸å®¹æ˜“ï¼šBob æ˜¯å¦è¢«å…è®¸å¯¹ \u0060\/api\/v1\/products\u0060 æ‰§è¡Œ GET è¯·æ±‚ï¼Ÿä»–å®é™…ä¸Šè¢«å…è®¸æŸ¥çœ‹å“ªäº›è®°å½•ï¼Ÿ\n\n### éƒ¨ç½²\n\nå½“æ¶‰åŠåˆ°éƒ¨ç½² OPA æ—¶ï¼Œä½ æœ‰å¤šä¸ªé€‰æ‹©ï¼Œè¿™å–å†³äºä½ çš„å…·ä½“åœºæ™¯ã€‚\n\n- **ä½œä¸º Go åº“**ï¼šå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ˜¯ç”¨ Golang å†™çš„ï¼Œä½ å¯ä»¥æŠŠ OPA ä½œä¸ºåº”ç”¨ç¨‹åºä¸­çš„ç¬¬ä¸‰æ–¹åº“æ¥å®ç°ã€‚\n- **ä½œä¸ºå®ˆæŠ¤ç¨‹åº**ï¼šå¦‚æœä½ ä¸ä½¿ç”¨ Goï¼Œé‚£ä¹ˆä½ å¯ä»¥åƒå…¶ä»–æœåŠ¡ä¸€æ ·ï¼ŒæŠŠ OPA ä½œä¸ºä¸€ä¸ªå®ˆæŠ¤ç¨‹åºæ¥éƒ¨ç½²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®ä½ ä½¿ç”¨ä¸€ä¸ª sidecar å®¹å™¨æˆ–åœ¨ä¸»æœºä¸Šè¿è¡Œã€‚åŸå› æ˜¯ï¼Œè¿™ç§è®¾è®¡å¯ä»¥æé«˜æ€§èƒ½å’Œå¯ç”¨æ€§ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æŠŠ OPA éƒ¨ç½²åœ¨ Kubernetes çš„ä¸€ä¸ªå•ç‹¬çš„ pod ä¸­ï¼Œè€Œè¿™ä¸ª pod æ°å¥½ä½äºä¸€ä¸ªå•ç‹¬çš„èŠ‚ç‚¹ä¸Šï¼Œè€Œä½ çš„åº”ç”¨ pod æ­£åœ¨é‚£é‡Œè¿è¡Œã€‚ç°åœ¨ï¼Œæ¯å½“ä½ çš„æœåŠ¡éœ€è¦å’¨è¯¢ OPA çš„ç­–ç•¥å†³ç­–æ—¶ï¼Œå®ƒå¿…é¡»é€šè¿‡ç½‘ç»œè¿›è¡Œè°ƒç”¨ï¼Œä»¥è¾¾åˆ° OPA è¿è¡Œçš„ podã€‚è¿™å¼•å…¥äº†ä¸å¿…è¦çš„å»¶è¿Ÿï¼Œå¹¶å¯èƒ½åœ¨é«˜å³°æœŸå¯¼è‡´åº”ç”¨ç¨‹åºçš„è¿Ÿæ»ã€‚\n\n![](008i3skNly1grywfo32k9j30u01drtl3.jpg)\n\n### å¦‚ä½•ç®¡ç†å’Œæ§åˆ¶ OPAï¼Ÿ\n\nä¸ºäº†è¿›ä¸€æ­¥å‡å°‘å»¶è¿Ÿï¼Œè®¾è®¡è€…å†³å®š OPA åº”è¯¥æŠŠæ‰€æœ‰çš„ç­–ç•¥æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚è¿™ç¡®ä¿äº† OPA ä¸ä¼šå»æŸ¥è¯¢å¦ä¸€ä¸ªæœåŠ¡æ¥è¯·æ±‚æ•°æ®ã€‚ä¸ºäº†å¤„ç† OPAï¼Œä½ æœ‰ä¸€ç»„ APIï¼Œç”¨äºä¸åŒçš„ç›®çš„ã€‚\n\n- **æ†ç»‘æœåŠ¡ API**ï¼šç”¨äºå‘ OPA å‘é€ç­–ç•¥æ•°æ®ã€‚OPA ä¸æ–­è½®è¯¢ Bundle æœåŠ¡ APIï¼Œæœç´¢æ–°ç‰ˆæœ¬çš„ç­–ç•¥ã€‚ä¸€æ—¦å‘ç°ï¼Œå®ƒå°±æ‹‰å–å¹¶åº”ç”¨æ–°çš„ç‰ˆæœ¬ã€‚\n- **çŠ¶æ€æœåŠ¡ API**ï¼šç”¨äºç¡®å®šæœåŠ¡çš„çŠ¶æ€ã€‚å®ƒå‘Šè¯‰ä½ å½“å‰åœ¨ OPA ä¸Šæ¿€æ´»çš„ç­–ç•¥ç‰ˆæœ¬ã€‚\n- **å†³ç­–æ—¥å¿—æœåŠ¡ API**ï¼šæ¯å½“ OPA åšå‡ºä¸€ä¸ªç­–ç•¥å†³ç­–ï¼Œå®ƒéƒ½ä¼šè®°å½•ä¸‹æ¥ã€‚åæ¥ï¼Œå®ƒæŠŠè¿™äº›æ—¥å¿—çš„æ‰¹æ¬¡å‘é€åˆ°æ—¥å¿—æœåŠ¡ APIã€‚è¿™å¯¹äºå®¡è®¡å’Œæ•…éšœæ’é™¤ç‰¹åˆ«æœ‰ç”¨ã€‚\n- **æ„å»ºã€æµ‹è¯•å’Œè°ƒè¯•ç­–ç•¥çš„å·¥å…·** ï¼šä¸€ç»„å‘½ä»¤è¡Œå·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼Œå¦‚ opa testã€opa runã€opa check ç­‰ã€‚è¿˜æœ‰ä¸€ä¸ª [VS Code æ’ä»¶](https:\/\/marketplace.visualstudio.com\/items?itemName=tsandall.opa)ï¼Œå¯ä»¥æ–¹ä¾¿å¼€å‘ã€‚\n\n## åˆè¯• OPA ç­–ç•¥\n\nåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œä½ åº”è¯¥å¯¹ OPA è¯ç”Ÿçš„åŸå› ï¼Œå®ƒè¯•å›¾è§£å†³çš„é—®é¢˜ï¼Œä»¥åŠå®ƒçš„è®¾è®¡å’Œç®¡ç†æ–¹å¼æœ‰äº†ç›¸å½“æ¸…æ™°çš„è®¤è¯†ã€‚ç°åœ¨æ˜¯è¯•æ°´çš„æ—¶å€™äº†ï¼Œçœ‹çœ‹ç”¨ Rego è¯­è¨€åˆ›å»ºä¸€ä¸ªç­–ç•¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚ç¬¬ä¸€æ­¥æ˜¯ç”¨ç®€å•çš„è‹±è¯­å®šä¹‰ä½ çš„ç­–ç•¥ã€‚æ¯”å¦‚è¯´ï¼šâ€œå®¢æˆ·åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹è‡ªå·±çš„ä»˜æ¬¾ã€‚è´¢åŠ¡éƒ¨é—¨çš„å·¥ä½œäººå‘˜åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹ä»»ä½•å®¢æˆ·çš„ä»˜æ¬¾ã€‚â€\n\nä¸‹ä¸€æ­¥æ˜¯å°†ç­–ç•¥è½¬æ¢ä¸º Rego ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [Rego playground](https:\/\/play.openpolicyagent.org\/) æ¥åšè¿™ä»¶äº‹ã€‚å› æ­¤ï¼Œåœ¨ä¸»é¢æ¿ä¸­ï¼Œæ¸…é™¤é‚£é‡Œå·²ç»æ·»åŠ çš„ä»£ç ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚\n\n\u0060\u0060\u0060\npackage play\n\n# Customers should be able to view their own payments\nallow = true {\n\tinput.method = \u0022GET\u0022\n      input.path = [\u0022payments\u0022, customer_id]\n      input.user = customer_id\n}\n\u0060\u0060\u0060\n\nè®©æˆ‘ä»¬é€è¡Œå›é¡¾è¿™ä¸ªç‰‡æ®µã€‚\n\n1. ä»»ä½•ä»¥å“ˆå¸Œç¬¦å·ï¼ˆ#ï¼‰å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Šã€‚æŠŠä½ çš„ç­–ç•¥åº”è¯¥åšçš„äº‹æƒ…å†™æˆè¿è´¯çš„ã€å¯ä¾›äººç±»é˜…è¯»çš„æ³¨é‡Šï¼Œæ€»æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚\n2. allow = true æ„å‘³ç€å¦‚æœä»¥ä¸‹çš„â€œè¯„ä¼°â€œä¸ºçœŸï¼Œå†³ç­–å°†è¢«å…è®¸ã€‚\n3. è¾“å…¥æ–¹æ³•æ˜¯ GETã€‚ä»»ä½•å…¶ä»– HTTP æ–¹æ³•ï¼ˆPOSTã€PUT ç­‰ï¼‰éƒ½ä¼šè¿åç­–ç•¥ã€‚\n4. è·¯å¾„æ˜¯ \u0060\/payments\/customer_id\u0060ã€‚æ³¨æ„ï¼Œcustomer_id æ²¡æœ‰åŠ å¼•å·ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå˜é‡ï¼Œéœ€è¦åœ¨è°ƒç”¨æ—¶è¢«æ›¿æ¢ã€‚\n5. ç”¨æˆ·ä¹Ÿåº”è¯¥æ˜¯ customer_idã€‚\n\nå¦‚æœæˆ‘ä»¬æŠŠè¿™æ®µä»£ç ç¿»è¯‘æˆæ™®é€šè‹±è¯­ï¼Œå®ƒçœ‹èµ·æ¥å°±åƒè¿™æ ·ã€‚\n\nâ€œå¦‚æœè¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•æ˜¯ GETï¼Œè·¯å¾„æ˜¯ \u0060\/payments\/customer_id\u0060ï¼Œå¹¶ä¸”ç”¨æˆ·æ˜¯åŒä¸€ä¸ª customer_idï¼Œåˆ™å…è®¸è¯¥è¯·æ±‚ã€‚è¿™å®é™…ä¸Šå…è®¸å®¢æˆ·æŸ¥çœ‹è‡ªå·±çš„æ”¯ä»˜æ•°æ®ã€‚â€\n\nRego playground è¿˜å…è®¸ä½ è¯„ä¼°ä½ çš„ä»£ç ï¼Œå¹¶ç¡®ä¿è¯¥ç­–ç•¥å°†æŒ‰é¢„æœŸå·¥ä½œã€‚åœ¨ INPUT é¢æ¿ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä»¥ä¸‹ä»£ç æ¥ä¼ªé€ ä¸€ä¸ªåˆæ³•è¯·æ±‚ã€‚\n\n\u0060\u0060\u0060json\n{\n    \u0022method\u0022: \u0022GET\u0022,\n    \u0022path\u0022: [\u0022payments\u0022,\u0022bob\u0022],\n    \u0022user\u0022: \u0022bob\u0022\n}\n\u0060\u0060\u0060\n\næ³¨æ„ï¼ŒINPUT ä½¿ç”¨çš„æ˜¯ä»»æ„çš„ JSONã€‚åœ¨æä¾›è¯·æ±‚æ—¶ï¼Œæ²¡æœ‰ç‰¹å®šçš„è§„åˆ™å¯ä»¥éµå¾ªã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ OPA å°†å¦‚ä½•é€šè¿‡æŒ‰ä¸‹ Evaluate æŒ‰é’®æ¥å“åº”è¿™ä¸ªå†³ç­–è¯·æ±‚ã€‚OUTPUT é¢æ¿åº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ã€‚\n\n\u0060\u0060\u0060json\n{\n    \u0022allow\u0022: true\n}\n\u0060\u0060\u0060\n\nä¸‹é¢æ˜¯æ‰§è¡Œä¸Šè¿°æ­¥éª¤åçš„ playground æˆªå›¾ã€‚\n\n![](008i3skNly1gryelon0ufj318g0epabz.jpg)\n\nç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯•ç€æŠŠè¯·æ±‚ä¸­çš„ç”¨æˆ·æ”¹ä¸º aliceï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªå®¢æˆ·æ­£è¯•å›¾æŸ¥çœ‹å¦ä¸€ä¸ªå®¢æˆ·çš„ä»˜æ¬¾ã€‚å¦‚æœæˆ‘ä»¬æŒ‰ Evaluate é”®ï¼Œä½ ä¼šå‘ç°è¾“å‡ºæ˜¾ç¤ºä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡ {}ã€‚åŸå› æ˜¯ï¼ŒOPA ä¸çŸ¥é“å½“ç­–ç•¥ä¸åŒ¹é…æ—¶åº”è¯¥å‘é€ä»€ä¹ˆã€‚è¦æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œåœ¨ç­–ç•¥çš„ä¸»ä½“å‰æ·»åŠ ä»¥ä¸‹è¯­å¥ã€‚\n\n\u0060\u0060\u0060\ndefault allow = false\n\u0060\u0060\u0060\n\nå› æ­¤ï¼Œæ•´ä¸ªç­–ç•¥åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚\n\n\u0060\u0060\u0060\npackage play\n\n# Customers should be able to view their own payments\ndefault allow = false\nallow = true {\n\tinput.method = \u0022GET\u0022\n      input.path = [\u0022payments\u0022, customer_id]\n      input.user = customer_id\n}\n\u0060\u0060\u0060\n\nç°åœ¨ï¼Œå¦‚æœä½ æŒ‰ä¸‹ Evaluateï¼Œä½ ä¼šçœ‹åˆ°é¢„æœŸçš„è¾“å‡ºã€‚\n\n\u0060\u0060\u0060json\n{\n    \u0022allow\u0022: false\n}\n\u0060\u0060\u0060\n\nè¯·æ³¨æ„ï¼Œè¿™ä¸ª playground éå¸¸å¼ºå¤§ï¼Œä½ å¯ä»¥é€‰æ‹©ç­–ç•¥çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ç‹¬ç«‹äºç­–ç•¥çš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œè¯„ä¼°ã€‚å½“ä½ æœ‰ä¸€ä¸ªå¤æ‚çš„ç­–ç•¥ï¼Œå½“å®ƒä¸åº”è¯¥è¢«è¯„ä¼°ä¸ºå‡æ—¶ï¼Œè¿™å¯èƒ½æ˜¯è¶…çº§æœ‰ç”¨çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€‰æ‹©ç­–ç•¥çš„éƒ¨åˆ†å†…å®¹ï¼Œçœ‹çœ‹åˆ°åº•å“ªé‡Œå‡ºç°äº†ç¼ºé™·ã€‚\n\nå¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æ‰§è¡Œäº†ç­–ç•¥çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬ç»§ç»­ç¬¬äºŒéƒ¨åˆ†ï¼šè´¢åŠ¡éƒ¨é—¨çš„å·¥ä½œäººå‘˜åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹ä»»ä½•å®¢æˆ·çš„ä»˜æ¬¾ã€‚\n\nåœ¨æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ç­–ç•¥åé¢æ·»åŠ ä»¥ä¸‹å‡ è¡Œã€‚\n\nè´¢åŠ¡éƒ¨é—¨çš„å·¥ä½œäººå‘˜å¯ä»¥æŸ¥çœ‹ä»»ä½•å®¢æˆ·çš„ä»˜æ¬¾ã€‚\n\n\u0060\u0060\u0060\nallow = true {\n    input.method = \u0022GET\u0022\n    input.path = [\u0022payments\u0022, customer_id]\n    finance[input.user]\n}\n\nfinance = {\u0022john\u0022,\u0022mary\u0022,\u0022peter\u0022,\u0022vivian\u0022}\n\u0060\u0060\u0060\n\nè¿™ä¸ªç­–ç•¥çš„å¤§éƒ¨åˆ†å†…å®¹ä¸ä¹‹å‰çš„ç›¸ä¼¼ï¼Œé™¤äº†ç¬¬ 4 è¡Œã€‚æˆ‘ä»¬ä¸æ˜¯è¯„ä¼°ç”¨æˆ· ID æ˜¯å¦ä¸å®¢æˆ· ID ç›¸åŒï¼Œè€Œæ˜¯è¯„ä¼°ç”¨æˆ·æ˜¯å¦æ˜¯è´¢åŠ¡ JSON å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚Rego æœ‰å¾ˆå¤šå†…ç½®ç»“æ„ï¼Œå…è®¸ä½ åšå¾ˆå¤šæœ‰ç”¨çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬æŸ¥æ‰¾ã€‚æœ€åï¼Œæˆ‘ä»¬å®šä¹‰è´¢åŠ¡å¯¹è±¡å¹¶æ·»åŠ åœ¨è¯¥ç»„ä¸­å·¥ä½œçš„å‘˜å·¥çš„ç”¨æˆ·åã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œè¿™ä¸ª JSON å¯¹è±¡å°†ä½œä¸º INPUT è¯·æ±‚çš„ä¸€éƒ¨åˆ†æˆ–ä½œä¸ºä¸€ä¸ªæ ‡è®°ä¼ é€’ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡å°†ç”¨æˆ·å’Œå®¢æˆ·è®¾ç½®ä¸ºç›¸åŒçš„åå­—ï¼ˆä¾‹å¦‚ï¼ŒBobï¼‰æ¥æµ‹è¯•è¯¥ç­–ç•¥ã€‚è¯¥ç­–ç•¥åº”è¯¥è¿”å› trueã€‚å°†ç”¨æˆ·æ”¹ä¸º johnï¼ˆä»–æ˜¯è´¢åŠ¡éƒ¨é—¨çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œå¹¶æµ‹è¯•è¯¥ç­–ç•¥ã€‚åŒæ ·ï¼Œå®ƒåº”è¯¥è¿”å›çœŸã€‚æœ€åï¼Œå°†ç”¨æˆ·æ”¹ä¸ºä¸åœ¨è´¢åŠ¡éƒ¨é—¨å·¥ä½œçš„ä»»ä½•åå­—ï¼ˆæ¯”æ–¹è¯´ï¼Œjaneï¼‰ï¼Œè¯¥ç­–ç•¥åº”è¯¥è¿”å›é”™è¯¯ã€‚\n\nä½ å¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https:\/\/www.openpolicyagent.org\/docs\/latest\/policy-language\/)ï¼Œé˜…è¯»æ›´å¤šå…³äº Rego è¯­è¨€å’Œä½ èƒ½ç”¨å®ƒåšä»€ä¹ˆã€‚\n\n## å°† OPA ä¸å…¶ä»–ç³»ç»Ÿé›†æˆ\n\nå¦‚å‰æ‰€è¿°ï¼ŒOPA å¯ä»¥ä¸å½“ä»Šçš„è®¸å¤šå¹³å°é›†æˆã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ OPA å¯ä»¥ä¸ºä½ åšä»€ä¹ˆçš„å‡ ä¸ªä¾‹å­ã€‚\n\n**Kubernetes**\n\n- ç¡®ä¿å…¥å£ä¸»æœºååªç”±å‰ç«¯å›¢é˜Ÿæ”¹å˜ã€‚\n- æ‹’ç»æ‹‰å–ä»»ä½•é•œåƒï¼Œé™¤äº†æ¥è‡ªä¼ä¸š Docker æ³¨å†Œä¸­å¿ƒçš„é•œåƒã€‚\n- å¯¹é›†ç¾¤ä¸Šåˆ›å»ºçš„ä»»ä½• pod å¼ºåˆ¶ä½¿ç”¨è¯·æ±‚å’Œé™åˆ¶ã€‚\n\n**API æˆæƒ**\n\nä½ å¯ä»¥å°† OPA ä¸ Envoyã€Istio å’Œå…¶ä»–å¹³å°ä¸€èµ·ä½¿ç”¨ï¼Œå¼ºåˆ¶æ‰§è¡Œ IAM æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è½»æ¾æ§åˆ¶å®‰å…¨äººå‘˜å¯¹æ•æ„Ÿæ•°æ®çš„è®¿é—®ã€‚\n\n**Linux PAM**\n\nå¯æ’æ‹”è®¤è¯æ¨¡å—ï¼ˆPAMï¼‰é•¿æœŸä»¥æ¥ä¸€ç›´è¢«ç”¨äº Linuxï¼Œä¸ºåŒ…æ‹¬ SSH å’Œ sudo åœ¨å†…çš„å¤šç§æœåŠ¡æä¾›ç»†ç²’åº¦çš„æ§åˆ¶ã€‚OPA æœ‰ä¸€ä¸ª PAM æ’ä»¶ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ PAM é›†æˆå¹¶æ‰§è¡Œç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é™åˆ¶ SSH å¯¹ä½ çš„ç”Ÿäº§æœºå™¨çš„è®¿é—®ï¼Œé™¤éåœ¨éå·¥ä½œæ—¶é—´ï¼Œæˆ–è€…é™¤éç”¨æˆ·æœ‰ä¸€ä¸ªæ”¯æŒå·¥å•ã€‚\n\nè¿˜æœ‰è®¸å¤šå…¶ä»–äº§å“å¯ä»¥ä¸ OPA é›†æˆï¼Œæä¾›æ— ç©·çš„å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼ŒKafkaã€ElasticSearchã€SQLite å’Œ CEPHï¼Œä»…ä¸¾å‡ ä¾‹ã€‚\n\n## æ¦‚è¦æ€»ç»“\n\n- å¯¹æˆæƒçš„éœ€æ±‚å’Œè½¯ä»¶æœ¬èº«ä¸€æ ·å¤è€ã€‚\n- ç”±äºç¼ºä¹ä¸€ä¸ªå¯ä»¥åœ¨ä¸åŒç³»ç»Ÿå’Œå¹³å°ä¹‹é—´ä½¿ç”¨çš„ä¸­å¤®æˆæƒç³»ç»Ÿï¼Œå¯¼è‡´äº†è®¸å¤šé—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒAPI å¯èƒ½æœ‰è‡ªå·±çš„æˆæƒé€»è¾‘å†…ç½®äºä»£ç ä¸­ï¼Œå…¶ä»–å¾®æœåŠ¡å¯èƒ½ä¾èµ–äºä¸€ä¸ªæˆ–å¤šä¸ªå¤–éƒ¨æˆæƒç³»ç»Ÿã€‚è¿™ä½¿å¾—æ¨å‡ºæ–°çš„ç­–ç•¥ï¼Œæ£€æŸ¥ç°æœ‰ç­–ç•¥çš„ç‰ˆæœ¬ï¼Œç”šè‡³å¼•å…¥å°çš„å˜åŒ–éƒ½æ˜¯éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§çš„æ“ä½œã€‚\n- OPA å°±åƒä¸€ä¸ªæœåŠ¡é¡¾é—®ï¼Œä¸ºéœ€è¦çš„æœåŠ¡åšå‡ºæˆæƒå†³ç­–ã€‚æœåŠ¡å‘ OPA æå‡ºå†³ç­–æŸ¥è¯¢ï¼Œç„¶å OPA æ ¹æ®å·²ç»å­˜å‚¨åœ¨å…¶ä¸­çš„ç­–ç•¥å®¡æŸ¥æŸ¥è¯¢ï¼Œå¹¶ä½œå‡ºå†³ç­–å›åº”ã€‚\n- OPA çš„è®¾è®¡æ˜¯é€šç”¨çš„ï¼Œä¸å¹³å°æ— å…³ã€‚å› æ­¤ï¼Œåœ¨å‘é€æŸ¥è¯¢æˆ–å®šä¹‰è¾“å‡ºçš„æ ·å­æ—¶ï¼Œä½ ä¸éœ€è¦éµå¾ªä»»ä½•è§„åˆ™ã€‚è¯·æ±‚å’Œå“åº”æ˜¯ä»¥ JSON æ ¼å¼å‘é€çš„ã€‚\n- ç­–ç•¥å¯ä»¥ç”¨ Rego ç¼–å†™ï¼Œè¿™æ˜¯ä¸€ç§ä¸“é—¨ä¸º OPA è®¾è®¡çš„è¯­è¨€ã€‚ç±»ä¼¼äº JavaScriptï¼ŒOPA ä½¿å…¶éå¸¸å®¹æ˜“å°†çº¯è‹±è¯­è§„åˆ™è½¬æ¢ä¸ºæœ‰æ•ˆçš„ OPA ç­–ç•¥ã€‚\n- Rego playground å·¥å…·æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨å®æ–½ç­–ç•¥ä¹‹å‰å°è¯•ä½ çš„ç­–ç•¥ã€‚\n- OPA å¯ä»¥ä½œä¸º Go åº“éƒ¨ç½²ï¼Œæˆä¸ºåº”ç”¨ç¨‹åºäºŒè¿›åˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„å®ˆæŠ¤ç¨‹åºã€‚\n- ç”±äºç­–ç•¥å†³ç­–å‘ç”Ÿåœ¨æ¯ä¸ª API è¯·æ±‚ä¸­ï¼Œå¼ºçƒˆå»ºè®®å°† OPA å®ˆæŠ¤ç¨‹åºå°½å¯èƒ½ç´§å¯†åœ°æ”¾åœ¨åº”ç”¨ç¨‹åºä¸­ã€‚ä¾‹å¦‚ï¼Œä½œä¸º Kubernetes pod ä¸­çš„ä¸€ä¸ª sidecar å®¹å™¨ï¼Œæˆ–è€…ä½œä¸ºä¸€ä¸ªè¿è¡Œåœ¨èŠ‚ç‚¹ä¸Šçš„å®ˆæŠ¤ç¨‹åºã€‚è¿™ç§åšæ³•æœ‰åŠ©äºå‡å°‘å»¶è¿Ÿå’Œå‡å°‘ç½‘ç»œæµé‡ã€‚\n- OPA ä½¿ç”¨äº†è®¸å¤š APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æ³¨å…¥æ–°ç­–ç•¥ï¼Œæ£€æŸ¥ç°æœ‰ç­–ç•¥çš„ç‰ˆæœ¬å’ŒçŠ¶æ€ï¼Œæˆ–æ”¶é›†å®¡è®¡å’Œæ—¥å¿—æ•°æ®ã€‚\n- åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹äº†ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œå³å¦‚ä½•ä½¿ç”¨ Rego è¯­è¨€æ¥æ‰§è¡Œä¸€ä¸ªç­–ç•¥ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†é€šè¿‡ Rego è¯­è¨€å’Œ playground å·¥å…·æ¥æ‰§è¡Œä¸€ä¸ªå¤æ‚çš„ç­–ç•¥å¹¶å¯¹å…¶è¿›è¡Œæµ‹è¯•æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚\n- OPA å¯ä»¥ä¸è®¸å¤šç°ä»£çš„ç³»ç»Ÿå’Œå¹³å°é›†æˆï¼Œå¦‚ Kubernetesã€Kafkaã€SQLiteã€CEPH å’Œ Terraformã€‚é€šè¿‡ PAM æ’ä»¶ï¼Œå®ƒè¿˜å¯ä»¥ä¸ Linux PAM é›†æˆï¼Œå¯¹ä½¿ç”¨ PAM çš„ Linux å®ˆæŠ¤è¿›ç¨‹ï¼ˆå¦‚ sshd å’Œ sudoï¼‰å®æ–½é«˜çº§ç­–ç•¥æ§åˆ¶ã€‚\n', '\/trans\/introducing-policy-as-code-the-open-policy-agent-opa\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡å°†å¸¦ä½ åˆæ­¥äº†è§£å¼€æ”¾ç­–ç•¥ä»£ç† OPAï¼Œä¸€ä¸ªå¹³å°æ— å…³çš„ç­–ç•¥æ‰§è¡Œå·¥å…·ã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/trans/rbac-vs-abac/">[è¯‘] RBAC vs ABACï¼Œä¸¤è€…æœ‰ä½•å¼‚åŒï¼Ÿ</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               2020/12/25</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/categories/%e5%85%b6%e4%bb%96"> 
             å…¶ä»–
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('RBAC vs ABACï¼Œä¸¤è€…æœ‰ä½•å¼‚åŒï¼Ÿ', 'æœ¬æ–‡ä¸»è¦ç ”ç©¶äº† RBAC å’Œ ABAC è¿™ä¸¤ç§è®¿é—®èƒ½æ§åˆ¶ä¹‹é—´çš„å¼‚åŒã€‚', '\nåœ¨ä»»ä½•å…¬å¸ï¼Œç½‘ç»œç”¨æˆ·å¿…é¡»ç»è¿‡è®¤è¯å’Œæˆæƒï¼Œæ‰èƒ½è®¿é—®ç³»ç»Ÿä¸­å¯èƒ½å¯¼è‡´å®‰å…¨æ¼æ´çš„éƒ¨åˆ†ã€‚è·å¾—æˆæƒçš„è¿‡ç¨‹ç§°ä¸ºè®¿é—®æ§åˆ¶ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å°†è®¨è®ºç®¡ç†ç³»ç»Ÿè®¿é—®æ§åˆ¶çš„ä¸¤ç§ä¸»è¦æ–¹æ³• â€”â€” åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰å’ŒåŸºäºå±æ€§çš„å­˜å–æ§åˆ¶ï¼ˆABACï¼‰å®ƒä»¬çš„å·®å¼‚ï¼Œä»¥åŠä½¿ç”¨è®¿é—®æƒé™ç®¡ç†å·¥å…·çš„é‡è¦æ€§ã€‚\n\n## è®¤è¯å’Œæˆæƒ\n\nå®‰å…¨çš„ä¸¤ä¸ªåŸºæœ¬æ–¹é¢æ˜¯è®¤è¯å’Œæˆæƒã€‚åœ¨æ‚¨è¾“å…¥å‡­è¯ç™»å½•ç”µè„‘æˆ–ç™»å½•åº”ç”¨ç¨‹åºæˆ–è½¯ä»¶åï¼Œè®¾å¤‡æˆ–åº”ç”¨ç¨‹åºä¼šè¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥ç¡®å®šæ‚¨çš„æˆæƒçº§åˆ«ã€‚æˆæƒå¯èƒ½åŒ…æ‹¬æ‚¨å¯ä»¥ä½¿ç”¨å“ªäº›è´¦æˆ·ï¼Œæ‚¨å¯ä»¥è®¿é—®å“ªäº›èµ„æºï¼Œä»¥åŠå…è®¸æ‚¨æ‰§è¡Œå“ªäº›åŠŸèƒ½ã€‚\n\n## åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ä¸åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰\n\nåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰å’ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰æ˜¯æ§åˆ¶è®¤è¯è¿‡ç¨‹å’Œæˆæƒç”¨æˆ·çš„ä¸¤ç§æ–¹æ³•ã€‚RBAC å’Œ ABAC ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ RBAC åŸºäºç”¨æˆ·è§’è‰²æä¾›å¯¹èµ„æºæˆ–ä¿¡æ¯çš„è®¿é—®ï¼Œè€Œ ABAC åŸºäºç”¨æˆ·ã€ç¯å¢ƒæˆ–èµ„æºå±æ€§æä¾›è®¿é—®æƒé™ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå½“è€ƒè™‘ RBAC ä¸ ABAC æ—¶ï¼ŒRBAC æ§åˆ¶æ•´ä¸ªç»„ç»‡çš„å¹¿æ³›è®¿é—®ï¼Œè€Œ ABAC åˆ™é‡‡å–ç»†ç²’åº¦çš„æ–¹æ³•ã€‚\n\n### ä»€ä¹ˆæ˜¯ RBACï¼Ÿ\n\n![](0081Kckwly1gm04pyv4mtj30sg0ewgmd.jpg)\n\nRBAC æ˜¯åŸºäºè§’è‰²çš„ï¼Œæ‰€ä»¥æ ¹æ®ä½ åœ¨ç»„ç»‡ä¸­çš„è§’è‰²è€Œæ‹¥æœ‰ä¸åŒçš„è®¿é—®æƒé™ã€‚è¿™æ˜¯ç”±ç®¡ç†å‘˜å†³å®šçš„ï¼Œç®¡ç†å‘˜ä¼šè®¾ç½®ä¸€ä¸ªè§’è‰²åº”è¯¥æ‹¥æœ‰çš„è®¿é—®æƒé™ï¼Œä»¥åŠç”¨æˆ·ä¸è§’è‰²çš„å¯¹åº”å…³ç³»ã€‚ä¾‹å¦‚ï¼Œæœ‰çš„ç”¨æˆ·å¯èƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªè§’è‰²ï¼Œå¯ä»¥ç¼–è¾‘ç‰¹å®šçš„æ–‡ä»¶ï¼Œè€Œå…¶ä»–ç”¨æˆ·å¯èƒ½è¢«é™åˆ¶åœ¨ä¸€ä¸ªè§’è‰²ä¸­ï¼Œåªèƒ½è¯»å–è¯¥æ–‡ä»¶è€Œä¸èƒ½ç¼–è¾‘ã€‚\n\nç”¨æˆ·ä¸è§’è‰²æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¿™ä½¿å¾—ç”¨æˆ·æ‹¥æœ‰å¯ä»¥è®¿é—®è®¸å¤šä¸åŒçš„æ–‡ä»¶æˆ–èƒ½åŠ›ã€‚æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªå›¢é˜Ÿåœ¨åšä¸€ä¸ªå¤§å‹é¡¹ç›®ã€‚é¡¹ç›®ç»ç†å¯ä»¥è®¿é—®å’Œç¼–è¾‘æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè€Œå¼€å‘å›¢é˜Ÿå¯èƒ½åªè¢«å…è®¸è®¿é—®ä»£ç æ–‡ä»¶ï¼Œè€Œæ— æ³•çœ‹åˆ°æˆ–ç¼–è¾‘é¡¹ç›®çš„è´¢åŠ¡å’Œå‘˜å·¥ä¿¡æ¯ã€‚äººåŠ›èµ„æºæˆ–ç®¡ç†å›¢é˜Ÿå¯ä»¥è®¿é—®æ‰€æœ‰çš„å‘˜å·¥å’Œè´¢åŠ¡ä¿¡æ¯ï¼Œè€Œä¸èƒ½è®¿é—®ç¼–ç¨‹æ–‡ä»¶ã€‚\n\nç»„ç»‡å¯èƒ½ä¼šå°† RBAC ç”¨äºè¿™æ ·çš„é¡¹ç›®ï¼Œå› ä¸ºæœ‰äº† RBACï¼Œä¸éœ€è¦åœ¨æ¯æ¬¡ä¸€æœ‰äººç¦»èŒæˆ–æ›´æ¢å²—ä½æ—¶éƒ½è¿›è¡Œæ›´æ”¹ï¼šä»–ä»¬å¯ä»¥ç®€å•åœ°ä»è§’è‰²ç»„ä¸­åˆ é™¤æˆ–åˆ†é…ä¸€ä¸ªæ–°çš„è§’è‰²ã€‚è¿™ä¹Ÿæ„å‘³ç€æ–°å‘˜å·¥å¯ä»¥æ ¹æ®ä»–ä»¬æ‰€å±¥è¡Œçš„ç»„ç»‡è§’è‰²ï¼Œç›¸å¯¹å¿«é€Ÿåœ°è¢«æˆäºˆè®¿é—®æƒé™ã€‚\n\n### ä»€ä¹ˆæ˜¯ ABACï¼Ÿ\n\n![](0081Kckwly1gm04qu9t1ej30sg0ewq3m.jpg)\n\nåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶åˆ©ç”¨äº†ä¸€ç»„ç§°ä¸ºâ€œå±æ€§â€œçš„ç‰¹å¾ã€‚è¿™åŒ…æ‹¬**ç”¨æˆ·å±æ€§**ã€**ç¯å¢ƒå±æ€§**å’Œ**èµ„æºå±æ€§**ã€‚\n\n- ç”¨æˆ·å±æ€§åŒ…æ‹¬ç”¨æˆ·çš„å§“åã€è§’è‰²ã€ç»„ç»‡ã€ID å’Œå®‰å…¨è®¸å¯ç­‰å†…å®¹ã€‚\n- ç¯å¢ƒå±æ€§åŒ…æ‹¬è®¿é—®æ—¶é—´ã€æ•°æ®çš„ä½ç½®å’Œå½“å‰ç»„ç»‡çš„å¨èƒç­‰çº§ã€‚\n- èµ„æºå±æ€§åŒ…æ‹¬è¯¸å¦‚åˆ›å»ºæ—¥æœŸã€èµ„æºæ‰€æœ‰è€…ã€æ–‡ä»¶åå’Œæ•°æ®æ•æ„Ÿæ€§ã€‚\n\nåŸºæœ¬ä¸Šï¼ŒABAC æ¯” RBAC æœ‰æ›´å¤šå¯èƒ½çš„æ§åˆ¶å˜é‡ã€‚ABAC çš„å®æ–½æ˜¯ä¸ºäº†é™ä½å› æœªç»æˆæƒçš„è®¿é—®è€Œäº§ç”Ÿçš„é£é™©ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨æ›´ç»†ç²’åº¦åœ°æ§åˆ¶å®‰å…¨å’Œè®¿é—®ã€‚ä¾‹å¦‚ï¼ŒABAC å¯ä»¥å¯¹ä»–ä»¬çš„è®¿é—®è¿›è¡Œè¿›ä¸€æ­¥çš„é™åˆ¶ï¼Œæ¯”å¦‚åªå…è®¸åœ¨ç‰¹å®šçš„æ—¶é—´æˆ–ä¸ç›¸å…³å‘˜å·¥ç›¸å…³çš„æŸäº›åˆ†æ”¯æœºæ„è¿›è¡Œè®¿é—®ï¼Œè€Œä¸æ˜¯è®©äººåŠ›èµ„æºéƒ¨é—¨çš„äººå‘˜æ€»æ˜¯èƒ½å¤Ÿè®¿é—®å‘˜å·¥å’Œå·¥èµ„ä¿¡æ¯ã€‚è¿™æ ·å¯ä»¥å‡å°‘å®‰å…¨é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ä»¥åçš„å®¡è®¡è¿‡ç¨‹ã€‚\n\n### RBAC ä¸ ABAC çš„æ¯”è¾ƒ\n\nä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ RBAC å°±è¶³å¤Ÿäº†ï¼Œåº”è¯¥åœ¨è®¾ç½® ABAC ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å®ƒã€‚è¿™ä¸¤ä¸ªè®¿é—®æ§åˆ¶è¿‡ç¨‹éƒ½æ˜¯è¿‡æ»¤å™¨ï¼ŒABAC æ˜¯ä¸¤ä¸ªè¿‡ç¨‹ä¸­æ¯”è¾ƒå¤æ‚çš„ï¼Œéœ€è¦æ›´å¤šçš„å¤„ç†èƒ½åŠ›å’Œæ—¶é—´ã€‚å¦‚æœä½ ä¸éœ€è¦ï¼Œå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨è¿™ç§æ›´å¼ºå¤§çš„è¿‡æ»¤å™¨ â€”â€” è¿™ä¼šäº§ç”Ÿç›¸åº”çš„èµ„æºæˆæœ¬ã€‚\n\næ— è®ºå“ªç§æ–¹å¼ï¼Œä½¿ç”¨æœ€å°‘æ•°é‡çš„ RBAC å’Œ ABAC è¿‡æ»¤å™¨æ¥æ„å»ºä½ çš„è®¿é—®å’Œå®‰å…¨ç¯å¢ƒæ˜¯å¾ˆé‡è¦çš„ã€‚å®ƒå¯ä»¥å¸®åŠ©ä»”ç»†è§„åˆ’ä½ çš„ç›®å½•æ•°æ®å’Œè®¿é—®æ–¹æ³•ï¼Œä»¥ç¡®ä¿ä½ æ²¡æœ‰ä½¿ç”¨ä¸å¿…è¦çš„è¿‡æ»¤å™¨æˆ–ä½¿äº‹æƒ…è¿‡äºå¤æ‚ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒRBAC å’Œ ABAC å¯ä»¥åˆ†çº§åœ°ä¸€èµ·ä½¿ç”¨ï¼Œå¹¿æ³›çš„è®¿é—®ç”± RBAC åè®®æ‰§è¡Œï¼Œæ›´å¤æ‚çš„è®¿é—®ç”± ABAC ç®¡ç†ã€‚è¿™æ„å‘³ç€ç³»ç»Ÿå°†é¦–å…ˆä½¿ç”¨ RBAC æ¥ç¡®å®šè°å¯ä»¥è®¿é—®ä¸€ä¸ªèµ„æºï¼Œç„¶åç”± ABAC æ¥ç¡®å®šä»–ä»¬å¯ä»¥å¯¹èµ„æºåšä»€ä¹ˆä»¥åŠä½•æ—¶å¯ä»¥è®¿é—®ã€‚\n\n## ä½¿ç”¨è®¿é—®ç®¡ç†å·¥å…·\n\næ— è®ºä½ æ˜¯ä½¿ç”¨ RBAC è¿˜æ˜¯ ABACï¼Œæˆ–è€…æ˜¯ä¸¤è€…çš„ç»“åˆï¼Œæˆ‘éƒ½å¼ºçƒˆå»ºè®®ä½¿ç”¨è®¿é—®æƒé™ç®¡ç†å·¥å…·ã€‚ä¸€ä¸ªå¥½çš„å·¥å…·å¯ä»¥ç®€åŒ–è®¾ç½®å¹¶å‡å°‘è®¾ç½®å’Œç®¡ç†è¿‡æ»¤å™¨æ‰€æ¶‰åŠçš„ç®¡ç†è´¹ç”¨ã€‚å½“æ¶‰åŠåˆ°å®‰å…¨é—®é¢˜æ—¶ï¼Œè®¤çœŸè§„åˆ’å’Œç›‘æ§æ‚¨çš„è®¿é—®æ§åˆ¶æµç¨‹æ˜¯è‡³å…³é‡è¦çš„ã€‚ä½¿ç”¨å¼ºå¤§çš„è®¿é—®ç®¡ç†å·¥å…·æ¥å¸®åŠ©æ‚¨è®¾ç½®è®¿é—®æ§åˆ¶ï¼Œå¹¶å®šæœŸå®¡æŸ¥æ‚¨çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿å®ƒä»ç„¶ç¬¦åˆæ‚¨çš„ç»„ç»‡éœ€æ±‚ã€‚\n', '\/trans\/rbac-vs-abac\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">æœ¬æ–‡ä¸»è¦ç ”ç©¶äº† RBAC å’Œ ABAC è¿™ä¸¤ç§è®¿é—®èƒ½æ§åˆ¶ä¹‹é—´çš„å¼‚åŒã€‚</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> é˜…è¯»åŸæ–‡è¯·è½¬åˆ°ï¼šhttps://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
          <div class="col-12">
 
 
 
 
 
 
 
 
 
 
 
 <nav aria-label="Page navigation">
   <ul class="pagination justify-content-center">
     
     
     
     
     
     
       
       
       
         
       
       
       
         <li class="page-item page-item active ">
           <a href="/categories/%E5%85%B6%E4%BB%96/" class="page-link">
             1
           </a>
         </li>
       
     
       
       
       
         
       
       
       
         <li class="page-item">
           <a href="/categories/%E5%85%B6%E4%BB%96/page/2/" class="page-link">
             2
           </a>
         </li>
       
     
     
     
     <li class="page-item">
       <a href="/categories/%E5%85%B6%E4%BB%96/page/2/" class="page-link">
         Â»
       </a>
     </li>
     
     
     
     <li class="page-item">
       <a class="page-link" href="/categories/%E5%85%B6%E4%BB%96/page/2/">
         Â»Â»
       </a>
     </li>
     
   </ul>
 </nav>
 
</div>

        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 order-1 order-lg-2 d-none d-sm-block">
          <div class="sidebar">
          <!-- categories -->
<div class="blog-categories mb-4">
  <p class="sidebar-title">
      ä¸“æ 
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/istio" class="sidebar-item">
            <span>Istio</span>
            <span>(68)</span>
        </a>
      
        <a href="/categories/service-mesh" class="sidebar-item">
            <span>Service Mesh</span>
            <span>(38)</span>
        </a>
      
        <a href="/categories/kubernetes" class="sidebar-item">
            <span>Kubernetes</span>
            <span>(23)</span>
        </a>
      
        <a href="/categories/%e9%9a%8f%e7%ac%94" class="sidebar-item">
            <span>éšç¬”</span>
            <span>(20)</span>
        </a>
      
        <a href="/categories/%e4%b8%9a%e6%80%81" class="sidebar-item">
            <span>ä¸šæ€</span>
            <span>(17)</span>
        </a>
      
        <a href="/categories/envoy" class="sidebar-item">
            <span>Envoy</span>
            <span>(15)</span>
        </a>
      
        <a href="/categories/%e4%ba%91%e5%8e%9f%e7%94%9f" class="sidebar-item">
            <span>äº‘åŸç”Ÿ</span>
            <span>(13)</span>
        </a>
      
        <a href="/categories/%e5%85%b6%e4%bb%96" class="sidebar-item">
            <span>å…¶ä»–</span>
            <span>(13)</span>
        </a>
      
        <a href="/categories/%e5%bc%80%e6%ba%90" class="sidebar-item">
            <span>å¼€æº</span>
            <span>(9)</span>
        </a>
      
        <a href="/categories/ai" class="sidebar-item">
            <span>AI</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e5%ae%89%e5%85%a8" class="sidebar-item">
            <span>å®‰å…¨</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7" class="sidebar-item">
            <span>å¯è§‚æµ‹æ€§</span>
            <span>(5)</span>
        </a>
      
        <a href="/categories/%e5%ae%b9%e5%99%a8" class="sidebar-item">
            <span>å®¹å™¨</span>
            <span>(4)</span>
        </a>
      
        <a href="/categories/%e6%97%85%e8%a1%8c" class="sidebar-item">
            <span>æ—…è¡Œ</span>
            <span>(4)</span>
        </a>
  </div>
</div>

<div class="blog-categories mb-4">
  <p class="sidebar-title">
      èµ„æ–™
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/categories/%e5%87%ba%e7%89%88%e7%89%a9" class="sidebar-item">
            <span>å‡ºç‰ˆç‰©</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e7%94%b5%e5%ad%90%e4%b9%a6" class="sidebar-item">
            <span>ç¿»è¯‘ç”µå­ä¹¦</span>
            <span>(8)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e6%96%87%e6%a1%a3" class="sidebar-item">
            <span>ç¿»è¯‘æ–‡æ¡£</span>
            <span>(7)</span>
        </a>
      
        <a href="/categories/%e7%bf%bb%e8%af%91%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>ç¿»è¯‘å›¾ä¹¦</span>
            <span>(6)</span>
        </a>
      
        <a href="/categories/%e5%8e%9f%e5%88%9b%e5%9b%be%e4%b9%a6" class="sidebar-item">
            <span>åŸåˆ›å›¾ä¹¦</span>
            <span>(2)</span>
        </a>
      
        <a href="/categories/%e6%95%99%e7%a8%8b%e6%89%8b%e5%86%8c" class="sidebar-item">
            <span>æ•™ç¨‹æ‰‹å†Œ</span>
            <span>(1)</span>
        </a>
  </div>
</div>





          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">è”ç³»</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">å¾®ä¿¡å…¬ä¼—å·</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">åšå®¢</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/">ä¿éšœ Istio å®‰å…¨ï¼šè§£å†³å…³é”®å®‰å…¨æ¼æ´åŠæœ€ä½³å®è·µ</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/ulanqab-trip/">ä¹Œå…°å¯Ÿå¸ƒä¹‹æ—…ï¼šæ¢ç´¢ç«å±±ä¸å¤±è½çš„æ‘åº„</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/explore-tetrate-enterprise-gateway/">ä»‹ç» Tetrate Enterprise Gateway åŠä¸ Istio é›†æˆï¼šäº‘åŸç”Ÿåº”ç”¨çš„å…¨é¢ç½‘å…³è§£å†³æ–¹æ¡ˆ</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">é“¾æ¥</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">
                  Istio æœåŠ¡ç½‘æ ¼
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate å…¬å¸
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿå­¦é™¢|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿå¼€æºé¡¹ç›®å¤§å…¨
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  äº‘åŸç”Ÿç¤¾åŒºï¼ˆä¸­å›½ï¼‰
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">æ•™ç¨‹</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy åŸºç¡€æ•™ç¨‹
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio åŸºç¡€æ•™ç¨‹
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes åŸºç¡€æ•™ç¨‹
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">é€šçŸ¥</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-china-2024-panel/">KubeCon China 2024 åœ†æ¡Œè®ºå›é¢„å‘Šï¼šIstio å’Œç°ä»£ API ç½‘å…³â€”â€”å¼•é¢†æœåŠ¡ç½‘æ ¼çš„æœªæ¥</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/website-revamp-notice/">ç½‘ç«™æ”¹ç‰ˆé€šçŸ¥</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-meetup-dalian-2024/">2024 å¤§è¿äº‘åŸç”ŸæŠ€æœ¯å¼€æ”¾æ—¥</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">Â© 2017-2024 Jimmy Song ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>









<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>










<script src="/js/wowchemy-search.min.7a37268e7bbe4a9160c2e4c33b749816.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
