<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jimmy&#39;s blog</title>
    <link>http://rootsongjc.github.io/index.xml</link>
    <description>Recent content on Jimmy&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 09 Mar 2017 14:23:04 +0800</lastBuildDate>
    <atom:link href="http://rootsongjc.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Contiväººå‘æŒ‡å—-è¯•ç”¨å…¨è®°å½•</title>
      <link>http://rootsongjc.github.io/post/contiv_tryout/</link>
      <pubDate>Thu, 09 Mar 2017 14:23:04 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/contiv_tryout/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017013129.jpg&#34; alt=&#34;é»„æ˜&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;(é¢˜å›¾ï¼šåŒ—çº¬37åº¦é»„æµ·ä¹‹æ»¨é£åŠ›å‘ç”µåœºï¼Œå†¬å¤©çš„å¤§é£æŒç»­ç»™äººç±»æä¾›æ¸…æ´çš„èƒ½æºï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;å…³äºcontivçš„ä»‹ç»è¯·çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« &lt;a href=&#34;http://rootsongjc.github.io/post/contiv_guide/&#34;&gt;Contiv Intro&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¼€å‘ç¯å¢ƒä½¿ç”¨&lt;strong&gt;Vagrant&lt;/strong&gt;æ­å»ºï¼Œæ˜¨å¤©è¯•ç”¨äº†ä¸‹ï¼ŒçœŸä¸çŸ¥é“å®ƒä»¬æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œå³ç„¶æ˜¯dockeræ’ä»¶ä¸ºå•¥ä¸ç›´æ¥åœ¨dockerä¸­å¼€å‘å‘¢ï¼Œæˆ‘çš„è¿™ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•æ­å»ºdockerå¼€å‘ç¯å¢ƒï¼Œ&lt;a href=&#34;http://rootsongjc.github.io/post/docker-dev-env/ï¼Œå¯ä»¥åœ¨dockerä¸­å¼€å‘dockerï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ¥å¼€å‘contivå•ŠğŸ˜„ï¼Œåªè¦ä¸‹è½½ä¸€ä¸ªdockeré•œåƒå³å¯`dockercore/docker:latest`ï¼Œä¸è¿‡æœ‰ç‚¹å¤§2.31Gã€‚&#34;&gt;http://rootsongjc.github.io/post/docker-dev-env/ï¼Œå¯ä»¥åœ¨dockerä¸­å¼€å‘dockerï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ¥å¼€å‘contivå•ŠğŸ˜„ï¼Œåªè¦ä¸‹è½½ä¸€ä¸ªdockeré•œåƒå³å¯`dockercore/docker:latest`ï¼Œä¸è¿‡æœ‰ç‚¹å¤§2.31Gã€‚&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;contivæ¦‚å¿µè§£æ&#34;&gt;Contivæ¦‚å¿µè§£æ&lt;/h3&gt;

&lt;p&gt;Contivç”¨äºç»™å®¹å™¨åˆ›å»ºå’Œåˆ†é…ç½‘è·¯ï¼Œå¯ä»¥åˆ›å»ºç­–ç•¥ç®¡ç†å®¹å™¨çš„å®‰å…¨ã€å¸¦å®½ã€ä¼˜å…ˆçº§ç­‰ï¼Œç›¸å½“äºä¸€ä¸ªSDNã€‚&lt;/p&gt;

&lt;h4 id=&#34;group&#34;&gt;Group&lt;/h4&gt;

&lt;p&gt;æŒ‰å®¹å™¨æˆ–Podçš„åŠŸèƒ½ç»™å®¹å™¨åˆ†é…ç­–ç•¥ç»„ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§å®¹å™¨/Podçš„&lt;code&gt;label&lt;/code&gt;æ¥åˆ†ç»„ï¼Œåº”ç”¨ç»„è·Ÿcontivçš„networkä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¯ä»¥å¾ˆå¤šåº”ç”¨ç»„å±äºåŒä¸€ä¸ªnetworkæˆ–IP subnetã€‚&lt;/p&gt;

&lt;h4 id=&#34;polices&#34;&gt;Polices&lt;/h4&gt;

&lt;p&gt;ç”¨æ¥é™å®šgroupçš„è¡Œä¸ºï¼Œcontivæ”¯æŒä¸¤ç§ç±»å‹çš„policyï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Bandwidth é™å®šåº”ç”¨ç»„çš„èµ„æºä½¿ç”¨ä¸Šé™&lt;/li&gt;
&lt;li&gt;Isolation èµ„æºç»„çš„è®¿é—®æƒé™&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Groupå¯ä»¥åŒæ—¶åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªpolicyï¼Œå½“æœ‰å®¹å™¨è°ƒåº¦åˆ°è¯¥groupé‡Œå°±ä¼šé€‚ç”¨è¯¥groupçš„policyã€‚&lt;/p&gt;

&lt;h4 id=&#34;network&#34;&gt;Network&lt;/h4&gt;

&lt;p&gt;IPv4æˆ–IPv6ç½‘ç»œï¼Œå¯ä»¥é…ç½®subnetå’Œgatewayã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Contivä¸­çš„ç½‘ç»œ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨contivä¸­å¯ä»¥é…ç½®ä¸¤ç§ç±»å‹çš„ç½‘ç»œ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;application networkï¼šå®¹å™¨ä½¿ç”¨çš„ç½‘ç»œ&lt;/li&gt;
&lt;li&gt;infrastructure networkï¼šhost namespaceçš„è™šæ‹Ÿç½‘ç»œï¼Œæ¯”å¦‚åŸºç¡€è®¾æ–½ç›‘æ§ç½‘ç»œ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ç½‘ç»œå°è£…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Contivä¸­æœ‰ä¸¤ç§ç±»å‹çš„ç½‘ç»œå°è£…&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Routedï¼šoverlay topologyå’ŒL3-routed BGP topology&lt;/li&gt;
&lt;li&gt;Bridgedï¼šlayer2 VLAN&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;tenant&#34;&gt;Tenant&lt;/h4&gt;

&lt;p&gt;Tenantæä¾›contivä¸­çš„namespaceéš”ç¦»ã€‚ä¸€ä¸ªtenantå¯ä»¥æœ‰å¾ˆå¤šä¸ªnetworkï¼Œæ¯ä¸ªnetworkéƒ½æœ‰ä¸ªsubnetã€‚è¯¥tenantä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒçš„ä»»æ„networkå’Œsubnetçš„IPã€‚&lt;/p&gt;

&lt;p&gt;ç‰©ç†ç½‘ç»œä¸­çš„tenantç§°ä½œ&lt;code&gt;è™šæ‹Ÿè·¯ç”±è½¬å‘(VRF)&lt;/code&gt;ã€‚Contivä½¿ç”¨VLANå’ŒVXLAN IDæ¥å®ç°å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œè¿™å–å†³ä½ ä½¿ç”¨çš„æ˜¯layer2ã€layer3è¿˜æ˜¯Cisco ACIã€‚&lt;/p&gt;

&lt;h3 id=&#34;contivä¸‹è½½&#34;&gt;Contivä¸‹è½½&lt;/h3&gt;

&lt;p&gt;Contivçš„ç¼–è¯‘å®‰è£…æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½githubä¸Šçš„&lt;a href=&#34;[1.0.0-beta.3-03-08-2017.18-51-20.UTC](https://github.com/contiv/netplugin/releases/tag/1.0.0-beta.3-03-08-2017.18-51-20.UTC)&#34;&gt;release-1.0.0-beta.3-03-08-2017.18-51-20.UTC&lt;/a&gt;æ–‡ä»¶è§£å‹è·å¾—äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/contiv/install/blob/master/README.mdè¿™ä¸ªå®˜æ–¹æ–‡æ¡£å·²ç»è¿‡æ—¶ï¼Œä¸è¦çœ‹äº†ã€‚&#34;&gt;https://github.com/contiv/install/blob/master/README.mdè¿™ä¸ªå®˜æ–¹æ–‡æ¡£å·²ç»è¿‡æ—¶ï¼Œä¸è¦çœ‹äº†ã€‚&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœè¯•ç”¨å¯ä»¥çš„è¯ï¼Œæˆ‘ä¼šåç»­å†™contivå¼€å‘ç¯å¢ƒæ­å»ºçš„æ–‡ç« ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªreleaseæ˜¯2017å¹´3æœˆ8æ—¥å‘å¸ƒçš„ï¼Œå°±åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„å‰ä¸€å¤©ã€‚æœ‰ä¸ª&lt;strong&gt;æœ€é‡è¦çš„æ›´æ–°&lt;/strong&gt;æ˜¯&lt;u&gt;æ”¯æŒdocker1.13 swarm mode&lt;/u&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£…æ–‡æ¡£ï¼š&lt;a href=&#34;https://github.com/contiv/netplugin/blob/master/install/HowtoSetupContiv.md&#34;&gt;https://github.com/contiv/netplugin/blob/master/install/HowtoSetupContiv.md&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹è½½è§£å‹åä¼šå¾—åˆ°å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;contivk8s  k8sä¸“ç”¨çš„&lt;/li&gt;
&lt;li&gt;contrib  æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸ª&lt;code&gt;netctl&lt;/code&gt;çš„bashè„šæœ¬&lt;/li&gt;
&lt;li&gt;netcontiv  è¿™ä¸ªå‘½ä»¤å°±ä¸€ä¸ª-versioné€‰é¡¹ç”¨æ¥æŸ¥çœ‹contivçš„ç‰ˆæœ¬ğŸ˜“&lt;/li&gt;
&lt;li&gt;netctl  contivå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥é…ç½®ç½‘ç»œã€ç­–ç•¥ã€æœåŠ¡è´Ÿè½½å‡è¡¡ï¼Œ&lt;a href=&#34;http://contiv.github.io/documents/reference/netctlcli.html&#34;&gt;ä½¿ç”¨è¯´æ˜&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;netmaster  contivçš„ä¸»èŠ‚ç‚¹æœåŠ¡&lt;/li&gt;
&lt;li&gt;netplugin&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢çš„å®‰è£…ä¸­ç”¨åˆ°çš„åªæœ‰netctlã€netmasterå’Œnetpluginè¿™ä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½copyåˆ°/usr/binç›®å½•ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨docker17.03-ceä¸­å®‰è£…contivã€‚&lt;/p&gt;

&lt;h3 id=&#34;contivå®‰è£…ä¾èµ–&#34;&gt;Contivå®‰è£…ä¾èµ–&lt;/h3&gt;

&lt;p&gt;Contivä¾èµ–äºconsulæˆ–etcdï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨etcdï¼Œslacké‡Œçš„äººè¯´åªæ”¯æŒ2.3.xç‰ˆæœ¬ï¼Œå¯èƒ½ä¸æ”¯æŒ3.0+ç‰ˆæœ¬çš„å§ï¼Œè¿˜æ²¡å®é™…æµ‹è¿‡ï¼Œå…ˆä½¿ç”¨2.3.7ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;contiv master&lt;/code&gt;å¯åŠ¨åè‡ªåŠ¨å‘etcdä¸­æ³¨å†Œä¿¡æ¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/contiv.io/oper
/contiv.io/oper/auto-vlan
/contiv.io/oper/auto-vlan/global
/contiv.io/oper/auto-vxlan
/contiv.io/oper/auto-vxlan/global
/contiv.io/oper/global
/contiv.io/oper/global/global
/contiv.io/oper/ovs-driver
/contiv.io/oper/ovs-driver/sz-pg-oam-docker-test-001.tendcloud.com
/contiv.io/master
/contiv.io/master/config
/contiv.io/master/config/global
/contiv.io/obj
/contiv.io/obj/modeldb
/contiv.io/obj/modeldb/global
/contiv.io/obj/modeldb/global/global
/contiv.io/obj/modeldb/tenant
/contiv.io/obj/modeldb/tenant/default
/contiv.io/lock
/contiv.io/lock/netmaster
/contiv.io/lock/netmaster/leader
/contiv.io/service
/contiv.io/service/netmaster
/contiv.io/service/netmaster/172.20.0.113:9999
/contiv.io/service/netmaster.rpc
/contiv.io/service/netmaster.rpc/172.20.0.113:9001
/contiv.io/state
/contiv.io/state/auto-vlan
/contiv.io/state/auto-vlan/global
/contiv.io/state/auto-vxlan
/contiv.io/state/auto-vxlan/global
/contiv.io/state/global
/contiv.io/state/global/global
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;contivå¯åŠ¨&#34;&gt;Contivå¯åŠ¨&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨netmaster&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$nohup netmaster -cluster-mode docker -cluster-store etcd://172.20.0.113:2379 -debug -listen-url 172.20.0.113:9999 -plugin-name netplugin &amp;amp;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†çªå‡ºnetmasterå‘½ä»¤çš„ä½¿ç”¨ï¼Œæˆ‘æŠŠæ‰€æœ‰å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼çš„å‚æ•°éƒ½æ˜ç¡®çš„å†™å‡ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;netmaster&lt;/code&gt;ç›‘å¬9999ç«¯å£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹å·²æœ‰çš„contivç½‘ç»œ&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$netctl --netmaster http://172.20.0.113:9999 network ls
Tenant  Network  Nw Type  Encap type  Packet tag  Subnet   Gateway  IPv6Subnet  IPv6Gateway
------  -------  -------  ----------  ----------  -------  ------   ----------  -----------
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†ä»¥åæ‰§è¡Œå‘½ä»¤æ–¹ä¾¿ï¼Œä¸ç”¨æ¥å›è¾“å…¥&lt;code&gt;$NETMASTER&lt;/code&gt;åœ°å€ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸ºç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;p&gt;&lt;code&gt;export NETMASTER=&amp;quot;http://172.20.0.113:9999&amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;netpluginéœ€è¦ä½¿ç”¨Open vSwitchï¼Œæ‰€ä»¥ä½ éœ€è¦å…ˆå®‰è£…&lt;strong&gt;Open vSwitch&lt;/strong&gt;ã€‚å¦åˆ™ä½ ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜&lt;a href=&#34;https://github.com/contiv/netplugin/issues/760&#34;&gt;netplugin issue-760&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;open-vswitchå®‰è£…&#34;&gt;Open vSwitchå®‰è£…&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://supercomputing.caltech.edu/blog/index.php/2016/05/03/open-vswitch-installation-on-centos-7-2/&#34;&gt;Open vSwitch installation on CentOS7.2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å‚è€ƒä¸Šé¢é“¾æ¥é‡Œçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/bin/bash
yum -y install make gcc openssl-devel autoconf automake rpm-build redhat-rpm-config python-devel openssl-devel kernel-devel kernel-debug-devel libtool wget
mkdir -p ~/rpmbuild/SOURCES
cp openvswitch-2.5.1.tar.gz ~/rpmbuild/SOURCES/
tar xfz openvswitch-2.5.1.tar.gz
sed &#39;s/openvswitch-kmod, //g&#39; openvswitch-2.5.1/rhel/openvswitch.spec &amp;gt; openvswitch-2.5.1/rhel/openvswitch_no_kmod.spec
rpmbuild -bb --nocheck ~/openvswitch-2.5.1/rhel/openvswitch_no_kmod.spec
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¼–è¯‘å¥½çš„rpmåŒ…åœ¨&lt;code&gt;~/rpmbuild/RPMS/x86_64/openvswitch-2.5.1-1.x86_64.rpm&lt;/code&gt;ç›®å½•ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£…å¥½Open vSwitchåå°±å¯ä»¥å¯åŠ¨&lt;strong&gt;netplugin&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åˆ›å»ºcontivç½‘ç»œ&#34;&gt;åˆ›å»ºcontivç½‘ç»œ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨netplugin&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;nohup netplugin -cluster-store etcd://172.20.0.113:2379 &amp;amp;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»ºnetwork&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;netctl --netmaster http://172.20.0.113:9999 network create --subnet=10.1.2.0/24 contiv-net&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;è·å¾—ä»¥ä¸‹æŠ¥é”™ï¼š&lt;/p&gt;

&lt;p&gt;ERRO[0000] Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ‰§è¡Œç¬¬äºŒæ¬¡çš„æ—¶å€™å±…ç„¶æˆåŠŸäº†ï¼Œä¸è¿‡å½“æˆ‘æŸ¥çœ‹docker networkçš„æ—¶å€™æ ¹æœ¬å°±çœ‹ä¸åˆ°åˆšåˆšåˆ›å»ºçš„contiv-netç½‘ç»œã€‚*è¿™åªæ˜¯ä¸€åœºæ¸¸æˆä¸€åœºæ¢¦ã€‚ã€‚ã€‚*ğŸ˜¢&lt;/p&gt;

&lt;p&gt;Creating network default:contiv-net&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$netctl network ls
Tenant   Network     Nw Type  Encap type  Packet tag  Subnet       Gateway  IPv6Subnet  IPv6Gateway
------   -------     -------  ----------  ----------  -------      ------   ----------  -----------
default  contiv-net  data     vxlan       0           10.1.2.0/24  
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹åˆšåˆ›å»ºçš„contiv-netç½‘ç»œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$netctl network inspect contiv-net
Inspeting network: contiv-net tenant: default
{
  &amp;quot;Config&amp;quot;: {
    &amp;quot;key&amp;quot;: &amp;quot;default:contiv-net&amp;quot;,
    &amp;quot;encap&amp;quot;: &amp;quot;vxlan&amp;quot;,
    &amp;quot;networkName&amp;quot;: &amp;quot;contiv-net&amp;quot;,
    &amp;quot;nwType&amp;quot;: &amp;quot;data&amp;quot;,
    &amp;quot;subnet&amp;quot;: &amp;quot;10.1.2.0/24&amp;quot;,
    &amp;quot;tenantName&amp;quot;: &amp;quot;default&amp;quot;,
    &amp;quot;link-sets&amp;quot;: {},
    &amp;quot;links&amp;quot;: {
      &amp;quot;Tenant&amp;quot;: {
        &amp;quot;type&amp;quot;: &amp;quot;tenant&amp;quot;,
        &amp;quot;key&amp;quot;: &amp;quot;default&amp;quot;
      }
    }
  },
  &amp;quot;Oper&amp;quot;: {
    &amp;quot;availableIPAddresses&amp;quot;: &amp;quot;10.1.2.1-10.1.2.254&amp;quot;,
    &amp;quot;externalPktTag&amp;quot;: 1,
    &amp;quot;pktTag&amp;quot;: 1
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»&lt;strong&gt;netmaster&lt;/strong&gt;æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;time=&amp;quot;Mar  9 21:44:14.746627381&amp;quot; level=debug msg=&amp;quot;NwInfra type is default, no ACI&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.750278056&amp;quot; level=info msg=&amp;quot;Creating docker network: {CheckDuplicate:true Driver:netplugin EnableIPv6:false IPAM:0xc4204d8ea0 Internal:false Attachable:true Options:map[tenant:default encap:vxlan pkt-tag:1] Labels:map[]}&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752034749&amp;quot; level=error msg=&amp;quot;Error creating network contiv-net. Err: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752067294&amp;quot; level=error msg=&amp;quot;Error creating network contiv-net.default in docker. Err: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752102735&amp;quot; level=error msg=&amp;quot;Error creating network {&amp;amp;{Key:default:contiv-net Encap:vxlan Gateway: Ipv6Gateway: Ipv6Subnet: NetworkName:contiv-net NwType:data PktTag:0 Subnet:10.1.2.0/24 TenantName:default LinkSets:{EndpointGroups:map[] Servicelbs:map[] Services:map[]} Links:{Tenant:{ObjType: ObjKey:}}}}. Err: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752129195&amp;quot; level=error msg=&amp;quot;NetworkCreate retruned error for: &amp;amp;{Key:default:contiv-net Encap:vxlan Gateway: Ipv6Gateway: Ipv6Subnet: NetworkName:contiv-net NwType:data PktTag:0 Subnet:10.1.2.0/24 TenantName:default LinkSets:{EndpointGroups:map[] Servicelbs:map[] Services:map[]} Links:{Tenant:{ObjType: ObjKey:}}}. Err: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752155973&amp;quot; level=error msg=&amp;quot;CreateNetwork error for: {Key:default:contiv-net Encap:vxlan Gateway: Ipv6Gateway: Ipv6Subnet: NetworkName:contiv-net NwType:data PktTag:0 Subnet:10.1.2.0/24 TenantName:default LinkSets:{EndpointGroups:map[] Servicelbs:map[] Services:map[]} Links:{Tenant:{ObjType: ObjKey:}}}. Err: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
time=&amp;quot;Mar  9 21:44:14.752172138&amp;quot; level=error msg=&amp;quot;Handler for POST /api/v1/networks/default:contiv-net/ returned error: Error response from daemon: legacy plugin netplugin of type NetworkDriver is not supported in swarm mode&amp;quot; 
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;ä»æ—¥å¿—ä¸­çœ‹åˆ°ä¸€ä¸ªä»¤äººæ‚²ç—›è¯­å¥çš„è¯*legacy plugin netplugin of type NetworkDriver is not supported in swarm mode*ï¼Œä½ ä»¬æ˜¨å¤©ä¸æ˜¯åˆšå‘çš„ç‰ˆæœ¬è¯´å·²ç»æ”¯æŒswarm modeå—ï¼Ÿ&lt;a href=&#34;https://github.com/contiv/netplugin/commit/8afd1b7718c8424a876760d18484124e0aad3557&#34;&gt;&lt;code&gt;commit-8afd1b7&lt;/code&gt;&lt;/a&gt;ä¸æ˜¯ç™½çº¸é»‘å­—çš„å†™ç€å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æˆ‘æäº†ä¸ª&lt;a href=&#34;https://github.com/contiv/netplugin/issues/776&#34;&gt;issue-776&lt;/a&gt;ï¼Œçœ‹çœ‹æ€æ ·è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦å¤–netpluginå‘½ä»¤æ€ä¹ˆç”¨ï¼Œæ–‡æ¡£ä¸Šæ²¡å†™å•Šï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;code&gt;netplugin -h&lt;/code&gt;å¯ä»¥ä¸­æœ‰ä¸¤ä¸ªé€‰é¡¹æˆ‘ä¸æ˜ç™½ï¼Œä¸çŸ¥é“æ€ä¹ˆè®¾ç½®ï¼Œæœ‰çŸ¥é“çš„äººè¯·å‘Šè¯‰æˆ‘ä¸€å£°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  -vlan-if value
    	VLAN uplink interface
  -vtep-ip string
    	My VTEP ip address
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŒæ—¶æˆ‘ä¼šç»§ç»­å…³æ³¨contivçš„slackå’Œgithub &lt;a href=&#34;https://github.com/contiv/netplugin/issues/776&#34;&gt;Issue-776&lt;/a&gt;çš„è¿›å±•ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>AFI 100 quotes in 100 years</title>
      <link>http://rootsongjc.github.io/presentation/afi-100-quotes/</link>
      <pubDate>Thu, 09 Mar 2017 14:09:02 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/presentation/afi-100-quotes/</guid>
      <description>&lt;p&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Frankly, my dear, I don&amp;rsquo;t give a damn.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1181&#34;&gt;GONE WITH THE WIND&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;I&amp;rsquo;m gonna make him an offer he can&amp;rsquo;t refuse.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54023&#34;&gt;THE GODFATHER&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1972&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You don&amp;rsquo;t understand! I coulda had class. I coulda been a contender. I could&amp;rsquo;ve been somebody, instead of a bum, which is what I am.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=51286&#34;&gt;ON THE WATERFRONT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1954&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Toto, I&amp;rsquo;ve a feeling we&amp;rsquo;re not in Kansas anymore.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=7892&#34;&gt;THE WIZARD OF OZ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Here&amp;rsquo;s looking at you, kid.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;6&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Go ahead, make my day.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=58139&#34;&gt;SUDDEN IMPACT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1983&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;7&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;All right, Mr. DeMille, I&amp;rsquo;m ready for my close-up.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=26513&#34;&gt;SUNSET BLVD.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1950&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;May the Force be with you.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55187&#34;&gt;STAR WARS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1977&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;9&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Fasten your seatbelts. It&amp;rsquo;s going to be a bumpy night.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=26204&#34;&gt;ALL ABOUT EVE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1950&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;You talking to me?&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67969&#34;&gt;TAXI DRIVER&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1976&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;11&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What we&amp;rsquo;ve got here is failure to communicate.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=22697&#34;&gt;COOL HAND LUKE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1967&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;12&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I love the smell of napalm in the morning.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67464&#34;&gt;APOCALYPSE NOW&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1979&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;13&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Love means never having to say you&amp;rsquo;re sorry.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=20649&#34;&gt;LOVE STORY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1970&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;14&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The stuff that dreams are made of.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27025&#34;&gt;THE MALTESE FALCON&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1941&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;15&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;E.T. phone home.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67140&#34;&gt;E.T. THE EXTRA-TERRESTRIAL&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1982&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;16&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;They call me Mister Tibbs!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23257&#34;&gt;IN THE HEAT OF THE NIGHT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1967&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;17&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Rosebud.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27624&#34;&gt;CITIZEN KANE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1941&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;18&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Made it, Ma! Top of the world!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=26173&#34;&gt;WHITE HEAT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1949&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;19&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m as mad as hell, and I&amp;rsquo;m not going to take this anymore!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54924&#34;&gt;NETWORK&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1976&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;20&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Louis, I think this is the beginning of a beautiful friendship.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;21&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A census taker once tried to test me. I ate his liver with some fava beans and a nice Chianti.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55200&#34;&gt;THE SILENCE OF THE LAMBS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1991&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;22&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Bond. James Bond.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=22934&#34;&gt;DR. NO&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1962&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;23&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;There&amp;rsquo;s no place like home.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=7892&#34;&gt;THE WIZARD OF OZ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;24&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I am big! It&amp;rsquo;s the pictures that got small.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=26513&#34;&gt;SUNSET BLVD.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1950&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;25&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Show me the money!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=60460&#34;&gt;JERRY MAGUIRE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1996&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;26&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Why don&amp;rsquo;t you come up sometime and see me?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=4090&#34;&gt;SHE DONE HIM WRONG&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1933&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;27&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;m walking here! I&amp;rsquo;m walking here!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23889&#34;&gt;MIDNIGHT COWBOY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1969&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;28&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Play it, Sam. Play &amp;lsquo;As Time Goes By.&amp;rsquo;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;29&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You can&amp;rsquo;t handle the truth!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=59242&#34;&gt;A FEW GOOD MEN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1992&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;30&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I want to be alone.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=7720&#34;&gt;GRAND HOTEL&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1932&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;31&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;After all, tomorrow is another day!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1181&#34;&gt;GONE WITH THE WIND&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;32&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Round up the usual suspects.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;33&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll have what she&amp;rsquo;s having.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=58353&#34;&gt;WHEN HARRY MET SALLY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1989&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;34&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You know how to whistle, don&amp;rsquo;t you, Steve? You just put your lips together and blow.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=24215&#34;&gt;TO HAVE AND HAVE NOT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1944&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;35&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You&amp;rsquo;re gonna need a bigger boat.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55193&#34;&gt;JAWS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1975&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;36&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Badges? We ain&amp;rsquo;t got no badges! We don&amp;rsquo;t need no badges! I don&amp;rsquo;t have to show you any stinking badges!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=25784&#34;&gt;THE TREASURE OF THE SIERRA MADRE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1948&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;37&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;I&amp;rsquo;ll be back.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=57224&#34;&gt;THE TERMINATOR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1984&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;38&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Today, I consider myself the luckiest man on the face of the earth.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27411&#34;&gt;THE PRIDE OF THE YANKEES&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;39&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;If you build it, he will come.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=58067&#34;&gt;FIELD OF DREAMS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1989&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;40&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;My mama always said life was like a box of chocolates. You never know what you&amp;rsquo;re gonna get.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55201&#34;&gt;FORREST GUMP&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1994&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;41&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;We rob banks.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=19356&#34;&gt;BONNIE AND CLYDE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1967&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;42&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Plastics.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23387&#34;&gt;THE GRADUATE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1967&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;43&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We&amp;rsquo;ll always have Paris.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;44&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;I see dead people.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55204&#34;&gt;THE SIXTH SENSE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1999&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;45&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Stella! Hey, Stella!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53428&#34;&gt;A STREETCAR NAMED DESIRE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1951&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;46&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Oh, Jerry, don&amp;rsquo;t let&amp;rsquo;s ask for the moon. We have the stars.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27383&#34;&gt;NOW, VOYAGER&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;47&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Shane. Shane. Come back!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=51022&#34;&gt;SHANE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1953&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;48&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Well, nobody&amp;rsquo;s perfect.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53017&#34;&gt;SOME LIKE IT HOT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1959&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;49&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;It&amp;rsquo;s alive! It&amp;rsquo;s alive!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=3925&#34;&gt;FRANKENSTEIN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1931&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;50&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Houston, we have a problem.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55718&#34;&gt;APOLLO 13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1995&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;51&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You&amp;rsquo;ve got to ask yourself one question: &amp;lsquo;Do I feel lucky?&amp;rsquo; Well, do ya, punk?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54036&#34;&gt;DIRTY HARRY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1971&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;52&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You had me at &amp;ldquo;hello.&amp;rdquo;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=60460&#34;&gt;JERRY MAGUIRE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1996&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;53&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;One morning I shot an elephant in my pajamas. How he got in my pajamas, I don&amp;rsquo;t know.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=2591&#34;&gt;ANIMAL CRACKERS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1930&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;54&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s no crying in baseball!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=59298&#34;&gt;A LEAGUE OF THEIR OWN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1992&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;55&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;La-dee-da, la-dee-da.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55190&#34;&gt;ANNIE HALL&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1977&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;56&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A boy&amp;rsquo;s best friend is his mother.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53260&#34;&gt;PSYCHO&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1960&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;57&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Greed, for lack of a better word, is good.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=57877&#34;&gt;WALL STREET&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1987&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;58&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Keep your friends close, but your enemies closer.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54026&#34;&gt;THE GODFATHER II&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1974&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;59&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As God is my witness, I&amp;rsquo;ll never be hungry again.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1181&#34;&gt;GONE WITH THE WIND&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;60&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Well, here&amp;rsquo;s another nice mess you&amp;rsquo;ve gotten me into!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=6883&#34;&gt;SONS OF THE DESERT&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1933&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;61&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Say &amp;ldquo;hello&amp;rdquo; to my little friend!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=68337&#34;&gt;SCARFACE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1983&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;62&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;What a dump.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=25848&#34;&gt;BEYOND THE FOREST&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1949&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;63&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Mrs. Robinson, you&amp;rsquo;re trying to seduce me. Aren&amp;rsquo;t you?&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23387&#34;&gt;THE GRADUATE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1967&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;64&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Gentlemen, you can&amp;rsquo;t fight in here! This is the War Room!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23082&#34;&gt;DR. STRANGELOVE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1964&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;65&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Elementary, my dear Watson.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=5086&#34;&gt;THE ADVENTURES OF SHERLOCK HOLMES&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;66&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Take your stinking paws off me, you damned dirty ape.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=22314&#34;&gt;PLANET OF THE APES&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1968&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;67&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Of all the gin joints in all the towns in all the world, she walks into mine.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27175&#34;&gt;CASABLANCA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;68&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Here&amp;rsquo;s Johnny!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67203&#34;&gt;THE SHINING&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1980&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;69&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;They&amp;rsquo;re here!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=56862&#34;&gt;POLTERGEIST&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1982&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;70&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Is it safe?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67287&#34;&gt;MARATHON MAN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1976&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;71&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Wait a minute, wait a minute. You ain&amp;rsquo;t heard nothin&amp;rsquo; yet!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1535&#34;&gt;THE JAZZ SINGER&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1927&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;72&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;No wire hangers, ever!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=68145&#34;&gt;MOMMIE DEAREST&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1981&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;73&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Mother of mercy, is this the end of Rico?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1125&#34;&gt;LITTLE CAESAR&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1930&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;74&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Forget it, Jake, it&amp;rsquo;s Chinatown.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54409&#34;&gt;CHINATOWN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1974&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;75&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I have always depended on the kindness of strangers.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53428&#34;&gt;A STREETCAR NAMED DESIRE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1951&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;76&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Hasta la vista, baby.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67074&#34;&gt;TERMINATOR 2: JUDGMENT DAY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1991&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;77&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Soylent Green is people!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=54405&#34;&gt;SOYLENT GREEN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1973&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;78&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Open the pod bay doors, please, HAL.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23399&#34;&gt;2001: A SPACE ODYSSEY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1968&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;79&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Striker: Surely you can&amp;rsquo;t be serious.
Rumack: I am serious&amp;hellip;and don&amp;rsquo;t call me Shirley.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53895&#34;&gt;AIRPLANE!&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1980&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;80&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Yo, Adrian!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53862&#34;&gt;ROCKY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1976&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;81&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Hello, gorgeous.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=23667&#34;&gt;FUNNY GIRL&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1968&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;82&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Toga! Toga!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=56950&#34;&gt;LAMPOON&amp;rsquo;S ANIMAL HOUSE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1978&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;83&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Listen to them. Children of the night. What music they make.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=7690&#34;&gt;DRACULA&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1931&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;84&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Oh, no, it wasn&amp;rsquo;t the airplanes. It was Beauty killed the Beast.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=4005&#34;&gt;KING KONG&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1933&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;85&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;My precious.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=53999&#34;&gt;THE LORD OF THE RINGS: TWO TOWERS&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2002&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;86&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Attica! Attica!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55464&#34;&gt;DOG DAY AFTERNOON&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1975&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;87&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Sawyer, you&amp;rsquo;re going out a youngster, but you&amp;rsquo;ve got to come back a star!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=3955&#34;&gt;42ND STREET&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1933&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;88&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Listen to me, mister. You&amp;rsquo;re my knight in shining armor. Don&amp;rsquo;t you forget it. You&amp;rsquo;re going to get back on that horse, and I&amp;rsquo;m going to be right behind you, holding on tight, and away we&amp;rsquo;re gonna go, go, go!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=56669&#34;&gt;ON GOLDEN POND&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1981&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;89&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Tell &amp;lsquo;em to go out there with all they got and win just one for the Gipper.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=1016&#34;&gt;KNUTE ROCKNE ALL AMERICAN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1940&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;90&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;A martini. Shaken, not stirred.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=22489&#34;&gt;GOLDFINGER&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1964&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;91&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Who&amp;rsquo;s on first.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=24509&#34;&gt;THE NAUGHTY NINETIES&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1945&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;92&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Cinderella story. Outta nowhere. A former greenskeeper, now, about to become the Masters champion. It looks like a mirac&amp;hellip;It&amp;rsquo;s in the hole! It&amp;rsquo;s in the hole! It&amp;rsquo;s in the hole!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67021&#34;&gt;CADDYSHACK&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1980&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;93&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Life is a banquet, and most poor suckers are starving to death!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=52471&#34;&gt;AUNTIE MAME&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1958&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;94&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I feel the need - the need for speed!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=57496&#34;&gt;TOP GUN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1986&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;95&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Carpe diem. Seize the day, boys. Make your lives extraordinary.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=67915&#34;&gt;DEAD POETS SOCIETY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1989&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;96&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Snap out of it!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=57753&#34;&gt;MOONSTRUCK&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1987&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;97&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;My mother thanks you. My father thanks you. My sister thanks you. And I thank you.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=27569&#34;&gt;YANKEE DOODLE DANDY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1942&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;98&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Nobody puts Baby in a corner.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=57603&#34;&gt;DIRTY DANCING&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1987&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;99&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ll get you, my pretty, and your little dog, too!&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=7892&#34;&gt;WIZARD OF OZ, THE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1939&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;100&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;I&amp;rsquo;m the king of the world!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.afi.com/members/catalog/DetailView.aspx?s=&amp;amp;Movie=55202&#34;&gt;TITANIC&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1997&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Contiv Intro</title>
      <link>http://rootsongjc.github.io/post/contiv_guide/</link>
      <pubDate>Thu, 09 Mar 2017 11:28:34 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/contiv_guide/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017021162.jpg&#34; alt=&#34;è“è‰²æ¸¯æ¹¾&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;(é¢˜å›¾ï¼šåŒ—äº¬è“è‰²æ¸¯æ¹¾å¤œæ™¯)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Contiv&lt;/strong&gt;æ˜¯æ€ç§‘å¼€å‘çš„dockerç½‘ç»œæ’ä»¶ï¼Œä»2015å¹´å°±å¼€æºäº†ï¼Œä¸šç•Œé€šå¸¸æ‹¿å®ƒå’ŒCalicoæ¯”è¾ƒã€‚è²Œä¼¼Contivä»¥å‰è¿˜å¼€å‘è¿‡volume pluginï¼Œç°åœ¨é”€å£°åŒ¿è¿¹äº†ï¼Œåªæœ‰netpluginä»åœ¨æ´»è·ƒå¼€å‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://dockone.io/article/1935&#34;&gt;å®¹å™¨ç½‘ç»œæ’ä»¶ Calico ä¸ Contiv Netpluginæ·±å…¥æ¯”è¾ƒ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ç¯‡æ–‡ç« è®²è§£äº†&lt;a href=&#34;http://blog.dataman-inc.com/shurenyun-docker-133/&#34;&gt;dockerç½‘ç»œæ–¹æ¡ˆçš„æ”¹è¿›&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;contiv-netplugin-ç®€ä»‹&#34;&gt;Contiv Netplugin ç®€ä»‹&lt;/h3&gt;

&lt;p&gt;Contiv Netplugin æ˜¯æ¥è‡ªæ€ç§‘çš„è§£å†³æ–¹æ¡ˆã€‚ç¼–ç¨‹è¯­è¨€ä¸º Goã€‚å®ƒåŸºäº OpenvSwitchï¼Œä»¥æ’ä»¶åŒ–çš„å½¢å¼æ”¯æŒå®¹å™¨è®¿é—®ç½‘ç»œï¼Œæ”¯æŒ VLANï¼ŒVxlanï¼Œå¤šç§Ÿæˆ·ï¼Œä¸»æœºè®¿é—®æ§åˆ¶ç­–ç•¥ç­‰ã€‚ä½œä¸ºæ€ç§‘æ•´ä½“æ”¯æŒå®¹å™¨åŸºç¡€è®¾æ–½contivé¡¹ç›®çš„ç½‘ç»œéƒ¨åˆ†ï¼Œæœ€å¤§çš„äº®ç‚¹åœ¨äºå®¹å™¨è¢«èµ‹äºˆäº† SDN èƒ½åŠ›ï¼Œå®ç°å¯¹å®¹å™¨æ›´ç»†ç²’åº¦ï¼Œæ›´ä¸°å¯Œçš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚å¦å¤–ï¼Œå¯¹ Docker CNM ç½‘ç»œæ¨¡å‹çš„æ”¯æŒï¼Œå¹¶å†…ç½®äº† IPAM æ¥å£ï¼Œä¸ä»…ä»…æä¾›äº†ä¸€å®¹å™¨ä¸€ IPï¼Œè€Œä¸”å®¹å™¨çš„ç½‘ç»œä¿¡æ¯è¢«è®°å½•çš„å®¹å™¨é…ç½®ä¸­ï¼Œä¼´éšç€å®¹å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå‡ä½å› ä¸ºçŠ¶æ€ä¸åŒæ­¥é€ æˆç½‘ç»œä¿¡æ¯ä¸¢å¤±çš„é£é™©ã€‚æœ‰åˆ«äº CNIï¼Œè¿™ç§å†…èšåŒ–çš„è®¾è®¡æœ‰åˆ©äºå‡å°‘å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä¾èµ–ã€‚éšç€é¡¹ç›®çš„å‘å±•ï¼Œé™¤äº† Dockerï¼Œè¿˜æä¾›äº†å¯¹ Kubernetes ä»¥åŠ Mesos çš„æ”¯æŒï¼Œå³ CNI æ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://dockerone.com/uploads/article/20161221/c737f78ce7c50c84e49648aaf771a6b4.png&#34;&gt;&lt;img src=&#34;http://dockerone.com/uploads/article/20161221/c737f78ce7c50c84e49648aaf771a6b4.png&#34; alt=&#34;9260E9B7-43C0-48B8-B5C7-CF8B952959D2.png&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Netmaster åå°è¿›ç¨‹è´Ÿè´£è®°å½•æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€ï¼Œä¿å­˜ç½‘ç»œä¿¡æ¯ï¼Œåˆ†é… IP åœ°å€&lt;/li&gt;
&lt;li&gt;Netplugin åå°è¿›ç¨‹ä½œä¸ºæ¯ä¸ªå®¿ä¸»æœºä¸Šçš„ Agent ä¸ Docker åŠ OVS é€šä¿¡ï¼Œå¤„ç†æ¥è‡ª Docker çš„è¯·æ±‚ï¼Œç®¡ç† OVSã€‚Docker æ–¹é¢æ¥å£ä¸º remote driverï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ— Docker å®šä¹‰çš„ JSON-RPC(POST) æ¶ˆæ¯ã€‚OVS æ–¹é¢æ¥å£ä¸º remote ovsdbï¼Œä¹Ÿæ˜¯ JSON-RPC æ¶ˆæ¯ã€‚ä»¥ä¸Šæ¶ˆæ¯éƒ½åœ¨ localhost ä¸Šå¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;é›†ç¾¤ç®¡ç†ä¾èµ– etcd/serf&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&#34;http://dockerone.com/uploads/article/20161221/852b276222482c4740b690eb7f078409.png&#34;&gt;&lt;img src=&#34;http://dockerone.com/uploads/article/20161221/852b276222482c4740b690eb7f078409.png&#34; alt=&#34;580469BC-468C-49C8-B29E-8B88143AFE0A.png&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;netpluginçš„ä¼˜åŠ¿&#34;&gt;Netpluginçš„ä¼˜åŠ¿&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;è¾ƒæ—©æ”¯æŒCNMæ¨¡å‹ã€‚ä¸å·²æœ‰çš„ç½‘ç»œåŸºç¡€è®¾æ–½å…¼å®¹æ€§è¾ƒé«˜ï¼Œæ”¹é€ å½±å“å°ã€‚åŸºäºVLANçš„å¹³è¡Œæ‰©å±•ä¸ç°æœ‰ç½‘ç»œç»“æ„åœ°ä½å¯¹ç­‰&lt;/li&gt;
&lt;li&gt;SDNèƒ½åŠ›ï¼Œèƒ½å¤Ÿå¯¹å®¹å™¨çš„ç½‘ç»œè®¿é—®åšæ›´ç²¾ç»†çš„æ§åˆ¶&lt;/li&gt;
&lt;li&gt;å¤šç§Ÿæˆ·æ”¯æŒï¼Œå…·å¤‡æœªæ¥å‘æ··åˆäº‘/å…¬æœ‰äº‘è¿ç§»çš„æ½œåŠ›&lt;/li&gt;
&lt;li&gt;ä»£ç è§„æ¨¡ä¸å¤§ï¼Œé€»è¾‘ç»“æ„æ¸…æ™°ï¼Œå¹¶å‘å¥½ï¼ŒVLANåœ¨å…¬å¸å†…éƒ¨æœ‰å¼€å‘éƒ¨ç½²è¿ç»´å®è·µç»éªŒï¼Œç¨³å®šæ€§ç»è¿‡ç”Ÿäº§ç¯å¢ƒéªŒè¯&lt;/li&gt;
&lt;li&gt;&lt;u&gt;&lt;strong&gt;äº¬ä¸œ&lt;/strong&gt;åŸºäºç›¸åŒçš„æŠ€æœ¯æ ˆï¼ˆOVS + VLANï¼‰å·²æ”¯æŒ10w+ å®¹å™¨çš„è¿è¡Œã€‚&lt;/u&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;next&#34;&gt;Next&lt;/h3&gt;

&lt;p&gt;åç»­æ–‡ç« ä¼šè®²è§£contiv netpluginçš„ç¯å¢ƒé…ç½®å’Œå¼€å‘ã€‚ç›®å‰è¿˜åœ¨1.0-betaç‰ˆæœ¬ã€‚&lt;strong&gt;Docker store&lt;/strong&gt;ä¸Šæä¾›äº†contivæ’ä»¶çš„&lt;a href=&#34;https://store.docker.com/plugins/803eecee-0780-401a-a454-e9523ccf86b3&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Packer Intro</title>
      <link>http://rootsongjc.github.io/post/packer_introduce/</link>
      <pubDate>Thu, 09 Mar 2017 10:58:42 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/packer_introduce/</guid>
      <description>&lt;p&gt;æ˜¨å¤©ç ”ç©¶äº†ä¸‹&lt;a href=&#34;https://github.com/mitchellh/vagrant&#34;&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt;ï¼Œæ„Ÿè§‰å®ƒçš„è™šæ‹Ÿæœºrubyæ ¼å¼å®šä¹‰å¾ˆéº»çƒ¦ï¼Œç»äººæŒ‡ç‚¹è¿˜æœ‰ä¸€ä¸ªå«åš&lt;a href=&#34;https://github.com/mitchellh/packer&#34;&gt;&lt;strong&gt;packer&lt;/strong&gt;&lt;/a&gt;çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯Hashicorpè¿™å®¶å…¬å¸å‡ºå“çš„ï¼Œä»Šå¤©çœ‹äº†ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Packer&lt;/strong&gt;æ˜¯ä¸€æ¬¾å¼€æºè½»é‡çº§çš„é•œåƒå®šä¹‰å·¥å…·ï¼Œå¯ä»¥æ ¹æ®ä¸€ä»½å®šä¹‰æ–‡ä»¶ç”Ÿæˆå¤šä¸ªå¹³å°çš„é•œåƒï¼Œæ”¯æŒçš„å¹³å°æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Amazon EC2 (AMI). Both EBS-backed and instance-store AMIs&lt;/li&gt;
&lt;li&gt;Azure&lt;/li&gt;
&lt;li&gt;DigitalOcean&lt;/li&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;Google Compute Engine&lt;/li&gt;
&lt;li&gt;OpenStack&lt;/li&gt;
&lt;li&gt;Parallels&lt;/li&gt;
&lt;li&gt;QEMU. Both KVM and Xen images.&lt;/li&gt;
&lt;li&gt;VirtualBox&lt;/li&gt;
&lt;li&gt;VMware&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Packeråˆ›é€ çš„é•œåƒä¹Ÿèƒ½è½¬æ¢æˆ&lt;strong&gt;Vagrant boxes&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Packerçš„é•œåƒåˆ›å»ºéœ€è¦ä¸€ä¸ªjsonæ ¼å¼çš„å®šä¹‰æ–‡ä»¶ï¼Œä¾‹å¦‚&lt;code&gt;quick-start.json&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;variables&amp;quot;: {
    &amp;quot;access_key&amp;quot;: &amp;quot;{{env `AWS_ACCESS_KEY_ID`}}&amp;quot;,
    &amp;quot;secret_key&amp;quot;: &amp;quot;{{env `AWS_SECRET_ACCESS_KEY`}}&amp;quot;
  },
  &amp;quot;builders&amp;quot;: [{
    &amp;quot;type&amp;quot;: &amp;quot;amazon-ebs&amp;quot;,
    &amp;quot;access_key&amp;quot;: &amp;quot;{{user `access_key`}}&amp;quot;,
    &amp;quot;secret_key&amp;quot;: &amp;quot;{{user `secret_key`}}&amp;quot;,
    &amp;quot;region&amp;quot;: &amp;quot;us-east-1&amp;quot;,
    &amp;quot;source_ami&amp;quot;: &amp;quot;ami-af22d9b9&amp;quot;,
    &amp;quot;instance_type&amp;quot;: &amp;quot;t2.micro&amp;quot;,
    &amp;quot;ssh_username&amp;quot;: &amp;quot;ubuntu&amp;quot;,
    &amp;quot;ami_name&amp;quot;: &amp;quot;packer-example {{timestamp}}&amp;quot;
  }]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨&lt;code&gt;packer build quick-start.json&lt;/code&gt;å¯ä»¥åœ¨AWSä¸Šbuildä¸€ä¸ªAIMé•œåƒã€‚&lt;/p&gt;

&lt;p&gt;Packerçš„è¯¦ç»†æ–‡æ¡£ï¼š&lt;a href=&#34;https://www.packer.io/docs/&#34;&gt;https://www.packer.io/docs/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Vagrantä»‹ç»-ä»ä½¿ç”¨åˆ°æ”¾å¼ƒå®Œå…¨æŒ‡å—</title>
      <link>http://rootsongjc.github.io/post/vagrant_introduce/</link>
      <pubDate>Wed, 08 Mar 2017 20:40:08 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/vagrant_introduce/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017030513.jpg&#34; alt=&#34;å…‰ç†™å®¶å›­å¤œæ™¯&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šåŒ—äº¬åœ°é“13å·çº¿å…‰ç†™å®¶å›­å¤œæ™¯ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;èµ·æº&#34;&gt;èµ·æº&lt;/h2&gt;

&lt;p&gt;ä¹…é—»&lt;strong&gt;Vagrant&lt;/strong&gt;å¤§åï¼Œä¹‹å‰ç»å¸¸çœ‹åˆ°æœ‰å¼€æºé¡¹ç›®ä½¿ç”¨å®ƒä½œä¸ºåˆ†å¸ƒå¼å¼€å‘çš„ç¯å¢ƒé…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºä»Šå¤©åœ¨çœ‹&lt;a href=&#34;https://github.com/contiv/netplugin&#34;&gt;contiv&lt;/a&gt;æ­£å¥½é‡Œé¢ä½¿ç”¨vagrantæ­å»ºçš„å¼€å‘æµ‹è¯•ç¯å¢ƒï¼Œæ‰€ä»¥é¡ºä¾¿äº†è§£ä¸‹ã€‚å®ƒçš„&lt;a href=&#34;https://github.com/contiv/netplugin/blob/master/Vagrantfile&#34;&gt;Vagrantfile&lt;/a&gt;æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸‰å°ä¸»æœºã€‚å¹¶å®‰è£…äº†å¾ˆå¤šä¾èµ–è½¯ä»¶ï¼Œå¦‚consulã€etcdã€dockerã€goç­‰ï¼Œæ•´çš„æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;âœ  netplugin git:(master) âœ— vagrant status
Current machine states:

netplugin-node1           running (virtualbox)
netplugin-node2           running (virtualbox)
netplugin-node3           running (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Vagrantæ˜¯&lt;a href=&#34;https://www.hashicorp.com/&#34;&gt;hashicorp&lt;/a&gt;è¿™å®¶å…¬å¸çš„äº§å“ï¼Œè¿™å®¶å…¬å¸ä¸»è¦åšæ•°æ®ä¸­å¿ƒPAASå’Œè™šæ‹ŸåŒ–ï¼Œå…¶åä¸‹å¤§åé¼é¼çš„äº§å“æœ‰&lt;code&gt;Consul&lt;/code&gt;ã€&lt;code&gt;Vault&lt;/code&gt;ã€&lt;code&gt;Nomad&lt;/code&gt;ã€&lt;code&gt;Terraform&lt;/code&gt;ã€‚ä»–ä»¬çš„äº§å“éƒ½æ˜¯åŸºäº&lt;strong&gt;Open Source&lt;/strong&gt;çš„&lt;a href=&#34;https://github.com/hashicorp&#34;&gt;Githubåœ°å€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç”¨é€”&#34;&gt;ç”¨é€”&lt;/h2&gt;

&lt;p&gt;Vagrantæ˜¯ç”¨æ¥ç®¡ç†è™šæ‹Ÿæœºçš„ï¼Œå¦‚VirtualBoxã€VMwareã€AWSç­‰ï¼Œä¸»è¦å¥½å¤„æ˜¯å¯ä»¥æä¾›ä¸€ä¸ªå¯é…ç½®ã€å¯ç§»æ¤å’Œå¤ç”¨çš„è½¯ä»¶ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨shellã€chefã€puppetç­‰å·¥å…·éƒ¨ç½²ã€‚æ‰€ä»¥vagrantä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¦‚æœä½ ç”¨å®ƒæ¥ç®¡ç†è‡ªå·±çš„å¼€å‘ç¯å¢ƒçš„è¯ï¼Œå¿…é¡»åœ¨è‡ªå·±çš„ç”µè„‘é‡Œå®‰è£…äº†è™šæ‹Ÿæœºè½¯ä»¶ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯&lt;strong&gt;virtualbox&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Vagrantæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·&lt;code&gt;vagrant&lt;/code&gt;ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·å¯ä»¥ç›´æ¥å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå½“ç„¶ä½ éœ€è¦æå‰å®šä¹‰ä¸€ä¸ªVagrantfileæ–‡ä»¶ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼Dockerfileä¹‹äºdockeräº†ã€‚&lt;/p&gt;

&lt;p&gt;è·Ÿdockerç±»æ¯”è¿™æ¥çœ‹vagrantå°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œvagrantä¹Ÿæ˜¯ç”¨æ¥æä¾›ä¸€è‡´æ€§ç¯å¢ƒçš„ï¼Œvagrantæœ¬èº«ä¹Ÿæä¾›ä¸€ä¸ªé•œåƒæºï¼Œä½¿ç”¨&lt;code&gt;vagrant init hashicorp/precise64&lt;/code&gt;å°±å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªUbuntu 12.04çš„é•œåƒã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç”¨æ³•&#34;&gt;ç”¨æ³•&lt;/h2&gt;

&lt;p&gt;ä½ å¯ä»¥ä¸‹è½½å®‰è£…æ–‡ä»¶æ¥å®‰è£…vagrantï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RubyGemå®‰è£…ï¼Œå®ƒæ˜¯ç”¨Rubyå¼€å‘çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Vagrantfile&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Vagrantfileæ˜¯ç”¨æ¥å®šä¹‰vagrant projectçš„ï¼Œä½¿ç”¨rubyè¯­æ³•ï¼Œä¸è¿‡ä½ ä¸å¿…äº†è§£rubyå°±å¯ä»¥å†™ä¸€ä¸ªVagrantfileã€‚&lt;/p&gt;

&lt;p&gt;çœ‹ä¸ªä¾‹å­ï¼Œé€‰è‡ª&lt;a href=&#34;https://github.com/fenbox/Vagrantfile&#34;&gt;https://github.com/fenbox/Vagrantfile&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ruby&#34;&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

# All Vagrant configuration is done below. The &amp;quot;2&amp;quot; in Vagrant.configure
# configures the configuration version (we support older styles for
# backwards compatibility). Please don&#39;t change it unless you know what
# you&#39;re doing.
Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  # The most common configuration options are documented and commented below.
  # For a complete reference, please see the online documentation at
  # https://docs.vagrantup.com.

  # Every Vagrant development environment requires a box. You can search for
  # boxes at https://atlas.hashicorp.com/search.
  config.vm.box = &amp;quot;ubuntu/trusty64&amp;quot;

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`. This is not recommended.
  # config.vm.box_check_update = false

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing &amp;quot;localhost:8080&amp;quot; will access port 80 on the guest machine.
  # config.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 8080

  # Create a private network, which allows host-only access to the machine
  # using a specific IP.
  config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.33.10&amp;quot;

  # Create a public network, which generally matched to bridged network.
  # Bridged networks make the machine appear as another physical device on
  # your network.
  # config.vm.network &amp;quot;public_network&amp;quot;

  # Share an additional folder to the guest VM. The first argument is
  # the path on the host to the actual folder. The second argument is
  # the path on the guest to mount the folder. And the optional third
  # argument is a set of non-required options.
  # config.vm.synced_folder &amp;quot;../data&amp;quot;, &amp;quot;/vagrant_data&amp;quot;

  # Provider-specific configuration so you can fine-tune various
  # backing providers for Vagrant. These expose provider-specific options.
  # Example for VirtualBox:
  #
  # config.vm.provider &amp;quot;virtualbox&amp;quot; do |vb|
  #   # Display the VirtualBox GUI when booting the machine
  #   vb.gui = true
  #
  #   # Customize the amount of memory on the VM:
  #   vb.memory = &amp;quot;1024&amp;quot;
  # end
  #
  # View the documentation for the provider you are using for more
  # information on available options.

  # Define a Vagrant Push strategy for pushing to Atlas. Other push strategies
  # such as FTP and Heroku are also available. See the documentation at
  # https://docs.vagrantup.com/v2/push/atlas.html for more information.
  # config.push.define &amp;quot;atlas&amp;quot; do |push|
  #   push.app = &amp;quot;YOUR_ATLAS_USERNAME/YOUR_APPLICATION_NAME&amp;quot;
  # end

  # Enable provisioning with a shell script. Additional provisioners such as
  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the
  # documentation for more information about their specific syntax and use.
  # config.vm.provision &amp;quot;shell&amp;quot;, inline: &amp;lt;&amp;lt;-SHELL
  #   apt-get update
  #   apt-get install -y apache2
  # SHELL
  config.vm.provision :shell, path: &amp;quot;bootstrap.sh&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Boxes&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Vagrantçš„åŸºç¡€é•œåƒï¼Œç›¸å½“äºdocker imagesã€‚å¯ä»¥åœ¨è¿™äº›åŸºç¡€é•œåƒçš„åŸºç¡€ä¸Šåˆ¶ä½œè‡ªå·±çš„è™šæ‹Ÿæœºé•œåƒã€‚&lt;/p&gt;

&lt;p&gt;æ·»åŠ ä¸€ä¸ªbox&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ vagrant box add hashicorp/precise64
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨Vagrantfileä¸­æŒ‡å®šbox&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ruby&#34;&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.box = &amp;quot;hashicorp/precise64&amp;quot;
  config.vm.box_version = &amp;quot;1.1.0&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨sshè¿›å…¥vagrant&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;vagrant up&lt;/code&gt;åå°±å¯ä»¥ç”¨&lt;code&gt;vagrant ssh $name&lt;/code&gt;è¿›å…¥è™šæ‹Ÿæœºå†…ï¼Œå¦‚æœä¸»æœºä¸Šå°±ä¸€ä¸ªvagrantå¯ä»¥ä¸æŒ‡å®šåå­—ã€‚é»˜è®¤è¿›å…¥çš„ç”¨æˆ·æ˜¯vagrantã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ–‡ä»¶åŒæ­¥&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;vagrant up&lt;/code&gt;ååœ¨è™šæ‹Ÿæœºä¸­ä¼šæœ‰ä¸€ä¸ª&lt;code&gt;/vagrant&lt;/code&gt;ç›®å½•ï¼Œè¿™è·Ÿä½ å®šä¹‰&lt;code&gt;Vagrantfile&lt;/code&gt;æ˜¯åŒä¸€çº§ç›®å½•ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªç›®å½•è·Ÿä½ å®¿ä¸»æœºä¸Šçš„ç›®å½•æ–‡ä»¶æ˜¯åŒæ­¥çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è½¯ä»¶å®‰è£…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨Vagrantfileä¸­å®šä¹‰è¦å®‰è£…çš„è½¯ä»¶å’Œæ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚å®‰è£…apache&lt;/p&gt;

&lt;p&gt;åœ¨ä¸VagrantfileåŒçº§çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª&lt;code&gt;bootstrap.sh&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#!/usr/bin/env bash

apt-get update
apt-get install -y apache2
if ! [ -L /var/www ]; then
  rm -rf /var/www
  ln -fs /vagrant /var/www
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶ååœ¨Vagrantfileä¸­ä½¿ç”¨å®ƒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ruby&#34;&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.box = &amp;quot;hashicorp/precise64&amp;quot;
  config.vm.box_version = &amp;quot;1.1.0&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ç½‘ç»œ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç«¯å£è½¬å‘&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.box = &amp;quot;hashicorp/precise64&amp;quot;
  config.vm.provision :shell, path: &amp;quot;bootstrap.sh&amp;quot;
  config.vm.network :forwarded_port, guest: 80, host: 4567
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰§è¡Œ&lt;code&gt;vagrant reload&lt;/code&gt;æˆ–è€…&lt;code&gt;vagrant up&lt;/code&gt;å¯ä»¥ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åˆ†äº«&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½ è‡ªå·±åšçš„vagrantæ˜¯å¯ä»¥åˆ†äº«ç»™åˆ«äººçš„ç”¨çš„ï¼Œåªè¦ä½ æœ‰ä¸€ä¸ªhashicorpè´¦å·ï¼Œ&lt;code&gt;vagrant login&lt;/code&gt;åå°±å¯ä»¥æ‰§è¡Œ&lt;code&gt;vagrant share&lt;/code&gt;åˆ†äº«ï¼Œä¼šç”Ÿæˆä¸€ä¸ªURLï¼Œå…¶å®ƒäººä¹Ÿå¯ä»¥è®¿é—®åˆ°ä½ çš„vagranté‡Œçš„æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸­æ­¢&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;vagrant suspend&lt;/li&gt;
&lt;li&gt;Vagrant halt&lt;/li&gt;
&lt;li&gt;Vagrant destroy&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;é‡æ„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å†æ¬¡æ‰§è¡Œ&lt;code&gt;vagrant up&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åˆ†å¸ƒå¼ç¯å¢ƒ&#34;&gt;åˆ†å¸ƒå¼ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;å¼€å‘åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„åº”ç”¨æ—¶å¾€å¾€éœ€è¦å¤šä¸ªè™šæ‹Ÿæœºç”¨äºæµ‹è¯•ï¼Œè¿™æ—¶å€™æ‰æ˜¯vagrantæ˜¾å¨åŠ›çš„æ—¶å€™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®šä¹‰å¤šä¸ªä¸»æœº&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.provision &amp;quot;shell&amp;quot;, inline: &amp;quot;echo Hello&amp;quot;

  config.vm.define &amp;quot;web&amp;quot; do |web|
    web.vm.box = &amp;quot;apache&amp;quot;
  end

  config.vm.define &amp;quot;db&amp;quot; do |db|
    db.vm.box = &amp;quot;mysql&amp;quot;
  end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªæ¯”è¾ƒå¤æ‚ï¼Œè¯¦è§&lt;a href=&#34;https://www.vagrantup.com/docs/multi-machine/&#34;&gt;https://www.vagrantup.com/docs/multi-machine/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€äº›å…¶å®ƒåŠŸèƒ½ï¼Œå¦‚pushã€pluginsã€providersæŒ‰ä¸‹ä¸è¡¨ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;æ€»çš„æ¥è¯´è¯´Vagrantæ²¡æœ‰Dockerå¥½ç”¨ï¼Œä½†æ˜¯å¯¹äºååŒå¼€å‘ï¼Œç”¨å®ƒæ¥å®šä¹‰åˆ†å¸ƒå¼å¼€å‘ç¯å¢ƒè¿˜å¯ä»¥ï¼Œrubyçš„è¯­æ³•çœ‹ç€æœ‰ç‚¹ä¸ä¹ æƒ¯ï¼Œå¥½åœ¨ä¹Ÿä¸å¤æ‚ï¼Œå¦‚æœæ˜¯å›¢é˜Ÿå‡ ä¸ªäººå¼€å‘ï¼Œå¼„å‡ ä¸ªè™šæ‹Ÿæœºå¤§å®¶äº’ç›¸æ‹·è´ä¸€ä¸‹ä¹Ÿæ²¡é‚£ä¹ˆå¤æ‚å§ï¼Ÿ&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>dockeræŠ€æœ¯é€‰å‹</title>
      <link>http://rootsongjc.github.io/project/docker_tech_selection/</link>
      <pubDate>Wed, 08 Mar 2017 10:37:01 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/project/docker_tech_selection/</guid>
      <description>

&lt;h2 id=&#34;å›é¡¾å†å²&#34;&gt;å›é¡¾å†å²&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;å¤šå°‘æ¬¡æˆ‘å›è¿‡å¤´çœ‹çœ‹èµ°è¿‡çš„è·¯ï¼Œä½ è¿˜åœ¨å°æ‘æ—ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å»å¹´åŸºäºdocker1.11å¯¹Hadoop yarnè¿›è¡Œäº†dockeråŒ–æ”¹é€ ï¼Œè¯¦æƒ…è¯·çœ‹&lt;a href=&#34;https://rootsongjc.github.io/docker-practice/docs/td_yarn_on_docker.html&#34;&gt;å¤§æ•°æ®é›†ç¾¤è™šæ‹ŸåŒ–-Yarn on dockerå§‹æœ«&lt;/a&gt;ï¼Œæˆ‘å°†è¿™ä¸ªäº‹ä»¶å‘½åä¸º&lt;a href=&#34;https://github.com/rootsongjc/magpie&#34;&gt;magpie&lt;/a&gt;ï¼Œå› ä¸ºå®ƒå°±åƒæ˜¯å–œé¹Šä¸€æ ·æ”¶é›†ç€å„ç§å„æ ·çš„èµ„æºæ­å»ºè‡ªå·±çš„å°çªã€‚&lt;strong&gt;magpie&lt;/strong&gt;è¿˜æ˜¯æœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥åšçš„ï¼Œå¤§æ•°æ®é›†ç¾¤çš„è™šæ‹ŸåŒ–ä¹Ÿä¸ä¼šæ­¢æ­¥ï¼Œå®ƒä»…ä»…æ˜¯å¯¹å…¶åšäº†åˆæ­¥çš„æ¢ç´¢ï¼Œå¯¹äºèµ„æºåˆ©ç”¨ç‡å’Œç®¡ç†æ–¹é¢çš„ä¼˜åŒ–è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œ&lt;strong&gt;Yarn&lt;/strong&gt;æœ¬èº«å°±æ˜¯åšä¸ºå¤§æ•°æ®é›†ç¾¤çš„èµ„æºç®¡ç†è°ƒåº¦è§’è‰²å‡ºç°çš„ï¼Œä¸€å¼€å§‹æ˜¯ä¸ºè°ƒåº¦&lt;strong&gt;MapReduce&lt;/strong&gt;ï¼Œåæ¥çš„&lt;code&gt;spark&lt;/code&gt;ã€&lt;code&gt;hive&lt;/code&gt;ã€&lt;code&gt;tensrflow&lt;/code&gt;ã€&lt;code&gt;HAWQ&lt;/code&gt;ã€&lt;code&gt;slide&lt;/code&gt;ç­‰ç­‰ä¸ä¸€è€Œè¶³é™†ç»­å‡ºç°ã€‚ä½†æ˜¯ç”¨å®ƒæ¥ç®¡ç†dockerä¼¼ä¹è¿˜æ˜¯æœ‰ç‚¹è¿‡é‡ï¼Œè¿˜ä¸å¦‚ç”¨kubernetesã€marathonã€nomadã€swarmç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯åœ¨å¾®æœåŠ¡æ–¹é¢docker1.11çš„å¾ˆå¤šå¼Šç«¯æˆ–è€…è¯´ç¼ºç‚¹å°±æš´éœ²äº†å‡ºæ¥ï¼Œé¦–å…ˆdocker1.11åŸç”Ÿå¹¶ä¸å¸¦clusterç®¡ç†ï¼Œéœ€è¦é…åˆÂ·&lt;code&gt;docker swarm&lt;/code&gt;ã€&lt;code&gt;kubernetes&lt;/code&gt;ã€&lt;code&gt;marathon&lt;/code&gt;ç­‰æ‰èƒ½ç®¡ç†dockeré›†ç¾¤ã€‚&lt;u&gt;ä¹‹å‰çš„å¯¹äºdockerçš„ä½¿ç”¨æ–¹å¼åŸºæœ¬å°±æ˜¯æŒ‰ç…§è™šæ‹Ÿæœºçš„æ–¹å¼ä½¿ç”¨çš„ï¼Œå›ºå®šIPæœ‰æ‚–äºå¾®æœåŠ¡çš„åŸåˆ™ã€‚&lt;/u&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åŸºäºdocker1.11å’Œ&lt;a href=&#34;github.com/talkingdata/shrike&#34;&gt;shrike&lt;/a&gt;äºŒå±‚ç½‘ç»œæ¨¡å¼ï¼Œè¿˜æœ‰&lt;a href=&#34;https://github.com/shipyard/shipyard&#34;&gt;shipyard&lt;/a&gt;æ¥åšé›†ç¾¤ç®¡ç†ï¼Œshipyardåªæ˜¯ä¸€ä¸ªç®€å•çš„dockeré›†ç¾¤ç®¡ç†çš„WebUIï¼ŒåŸºæœ¬éƒ½æ˜¯è°ƒç”¨docker APIï¼Œå”¯ä¸€åšäº†ä¸€ç‚¹dockeråŸç”Ÿæ²¡æœ‰çš„åŠŸèƒ½å°±æ˜¯&lt;strong&gt;scale&lt;/strong&gt;å®¹å™¨ï¼Œè€Œä¸”åªæ”¯æŒåˆ°docker1.11ï¼Œæ—©å·²åœæ­¢å¼€å‘ã€‚æˆ‘æŠ›å¼ƒäº†&lt;strong&gt;shipyard&lt;/strong&gt;ï¼Œå®ƒçš„é¡µé¢åŠŸèƒ½åŸºæœ¬å¯æœ‰å¯æ— ï¼Œæˆ‘è‡ªå·±å¼€å‘çš„&lt;a href=&#34;https://github.com/rootsongjc/magpie&#34;&gt;magpie&lt;/a&gt;ä¸€æ ·å¯ä»¥ç®¡ç†&lt;code&gt;yarn on docker&lt;/code&gt;é›†ç¾¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Docker Swarmæœ‰å¦‚ä¸‹å‡ ä¸ªç¼ºç‚¹&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¯¹äºå¤§è§„æ¨¡é›†ç¾¤çš„ç®¡ç†æ•ˆç‡å¤ªä½ï¼Œå½“ç®¡ç†ä¸Šç™¾ä¸ªnodeçš„æ—¶å€™ç»å¸¸å‡ºç°æœ‰èŠ‚ç‚¹çŠ¶æ€ä¸åŒæ­¥çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸»æœºé‡å¯åå®¹å™¨å·²ç»&lt;strong&gt;Exited&lt;/strong&gt;äº†ï¼Œä½†æ˜¯masterè®©ç„¶è®¤ä¸ºæ˜¯&lt;strong&gt;Running&lt;/strong&gt;çŠ¶æ€ï¼Œå¿…é¡»é‡å¯æ‰€æœ‰masterèŠ‚ç‚¹æ‰è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰ä¸­å¿ƒåŒ–Nodeç®¡ç†åŠŸèƒ½ï¼Œå¿…é¡»ç™»å½•åˆ°æ¯å°nodeä¸Šæ‰‹åŠ¨å¯åœ&lt;code&gt;swarm-agent&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é›†ç¾¤ç®¡ç†åŠŸèƒ½å®åœ¨&lt;strong&gt;å¤ªå¤ªå¤ª&lt;/strong&gt;ç®€é™‹ï¼ŒæŸ¥çœ‹æ‰€æœ‰nodeçŠ¶æ€åªèƒ½ç”¨&lt;code&gt;docker info&lt;/code&gt;è€Œä¸”é‚£ä¸ªæ ¼å¼å°±ä¸æäº†ï¼Œshipyardé‡Œæœ‰å¤„ç†è¿™ä¸ªæ ¼å¼çš„ä»£ç ï¼Œæˆ‘copyåˆ°äº†magpieé‡Œï¼Œå½»åº•æŠ›å¼ƒshipyardäº†ã€‚&lt;/li&gt;
&lt;li&gt;Docker swarmçš„é›†ç¾¤ç®¡ç†æ¦‚å¿µç¼ºå¤±ï¼Œå› ä¸ºdockerä¸€å¼€å§‹è®¾è®¡çš„æ—¶å€™å°±ä¸æ˜¯ç”¨æ¥ç®¡ç†é›†ç¾¤çš„ï¼Œæ‰€ä»¥å‡ºç°äº†swarmï¼Œä½†æ˜¯åªèƒ½ä½¿ç”¨&lt;strong&gt;docker-compose&lt;/strong&gt;æ¥ç¼–æ’æœåŠ¡ï¼Œä½†æ˜¯æ— æ³•åœ¨swarmé›†ç¾¤ä¸­ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„&lt;strong&gt;mynet&lt;/strong&gt;ç½‘ç»œï¼Œ&lt;a href=&#34;https://github.com/docker/compose/issues/4233&#34;&gt;compose issue-4233&lt;/a&gt;ï¼Œ&lt;strong&gt;compose&lt;/strong&gt;ä¹Ÿå·²ç»è¢«dockerå®˜æ–¹åºŸå¼ƒï¼ˆæœ€è¿‘ä¸€å¹´dockerå‘å±•çš„å¤ªå¿«äº†ï¼ŒåŸæ¥ç”¨pythonå†™çš„composeå·²ç»è¢«ç”¨goé‡æ„ä¸º&lt;strong&gt;libcompose&lt;/strong&gt;ç›´æ¥é›†æˆåˆ°swarm modeé‡Œäº†ï¼‰ï¼Œè€Œä¸”docker1.11é‡Œä¹Ÿæ²¡æœ‰åƒkubernetesé‚£æ ·&lt;code&gt;service&lt;/code&gt;çš„å•ä½ï¼Œåœ¨docker1.11æ‰€æœ‰çš„ç®¡ç†éƒ½æ˜¯åŸºäºdockerå®¹å™¨çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Docker Swarmçš„é—®é¢˜ä¹Ÿæ˜¯shipyardçš„é—®é¢˜ï¼Œè°è®©shipyardç›´æ¥è°ƒç”¨dockerçš„APIå‘¢ã€‚å½“ç„¶ï¼Œåœ¨åç»­ç‰ˆæœ¬çš„dockeré‡Œä»¥ä¸Šé—®é¢˜éƒ½å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œdockerå·²ç»è¶Šæ¥è¶Šåƒkubernetesï¼Œä¸è®ºæ˜¯åœ¨è®¾è®¡ç†å¿µä¸Šè¿˜æ˜¯åœ¨åŠŸèƒ½ä¸Šï¼Œç”šè‡³è¿˜å‘è¡Œäº†ä¼ä¸šç‰ˆï¼Œä»¥åæ¯ä¸ªæœˆå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;h2 id=&#34;æŠ€æœ¯é€‰å‹&#34;&gt;æŠ€æœ¯é€‰å‹&lt;/h2&gt;

&lt;p&gt;ä¸»è¦å¯¹æ¯”&lt;code&gt;Docker1.11&lt;/code&gt;å’Œ&lt;code&gt;Docker17.03-ce&lt;/code&gt;ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæœ‰ä¸€ç‚¹éœ€è¦äº†è§£çš„æ˜¯ï¼Œdocker1.12+å¸¦æ¥çš„&lt;a href=&#34;https://rootsongjc.github.io/docker-practice/docs/swarm_mode.html&#34;&gt;swarm mode&lt;/a&gt;ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ç›´æ¥å¯åŠ¨ä¸€ä¸ªå¤æ‚çš„&lt;strong&gt;stack&lt;/strong&gt;ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æœåŠ¡ç¼–æ’å’Œæ‰€æœ‰çš„æœåŠ¡é…ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ª&lt;a href=&#34;https://rootsongjc.github.io/docker-practice/docs/create_swarm_app.html&#34;&gt;æŠ•ç¥¨åº”ç”¨çš„ä¾‹å­&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è¡¨å¯¹æ¯”äº†docker1.11å’Œdocker17.03-ce&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;docker1.11&lt;/th&gt;
&lt;th&gt;docker17.03-ce&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åŸºæœ¬å•ä½&lt;/td&gt;
&lt;td&gt;dockerå®¹å™¨&lt;/td&gt;
&lt;td&gt;dockerå®¹å™¨ã€serviceã€stack&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;æœåŠ¡ç¼–æ’&lt;/td&gt;
&lt;td&gt;composeï¼Œä¸æ”¯æŒdocker swarmçš„mynetç½‘ç»œ&lt;/td&gt;
&lt;td&gt;æ”¹é€ åçš„composeï¼Œæ”¯æŒstackä¸­å®Œæ•´çš„æœåŠ¡ç¼–æ’&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ç½‘ç»œæ¨¡å‹&lt;/td&gt;
&lt;td&gt;Hostã€bridgeã€overlayã€mynet&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ”¯æŒè·¨ä¸»æœºçš„overlayç½‘ç»œï¼Œåˆ›å»ºå•ä¸ªå®¹å™¨æ—¶ä¹Ÿå¯ä»¥attachåˆ°å·²æœ‰çš„overlaç½‘ç»œä¸­&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;æ’ä»¶&lt;/td&gt;
&lt;td&gt;æ²¡æœ‰æ’ä»¶ç®¡ç†å‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†&lt;/td&gt;
&lt;td&gt;æœ‰æ’ä»¶ç®¡ç†å‘½ä»¤ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºå’Œä»docker hubä¸­ä¸‹è½½ï¼Œä¸Šä¼ æ’ä»¶åˆ°è‡ªå·±çš„ç§æœ‰é•œåƒä»“åº“&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å‡çº§&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒå¹³æ»‘å‡çº§ï¼Œé‡å¯dockeråŸæ¥çš„å®¹å™¨ä¹Ÿä¼šåœæ‰&lt;/td&gt;
&lt;td&gt;å¯ä»¥åœæ­¢docker engineä½†ä¸å½±å“å·²å¯åŠ¨çš„å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å¼¹æ€§ä¼¸ç¼©&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;serviceå†…ç½®åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;æœåŠ¡å‘ç°&lt;/td&gt;
&lt;td&gt;ç›‘å¬docker eventå¢åˆ DNS&lt;/td&gt;
&lt;td&gt;å†…ç½®æœåŠ¡å‘ç°ï¼Œæ ¹æ®DNSè´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;èŠ‚ç‚¹ç®¡ç†&lt;/td&gt;
&lt;td&gt;æ‰‹åŠ¨å¯åœ&lt;/td&gt;
&lt;td&gt;ä¸­å¿ƒåŒ–ç®¡ç†nodeèŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;æœåŠ¡å‡çº§&lt;/td&gt;
&lt;td&gt;æ‰‹åŠ¨å‡çº§&lt;/td&gt;
&lt;td&gt;serviceå†…ç½®åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;æœ¬èº«ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;Swarm modeå†…éƒ¨DNSè½®å¯»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;åŸºäºä»¥ä¸Šå¯¹æ¯”ï¼Œä½¿ç”¨docker17.03-ceä¸ä»…å¯ä»¥å…¼å®¹ä»¥å‰çš„mynetç½‘ç»œæ¨¡å¼ï¼Œåªéœ€è¦é‡æ„ä»¥å‰çš„shrikeä¸º&lt;strong&gt;docker plugin&lt;/strong&gt;ï¼Œåœ¨åˆ›å»ºserviceçš„æ—¶å€™æŒ‡å®šä¸ºmynetå³å¯ã€‚ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨docker modeçš„overlayç½‘ç»œï¼Œè€Œä¸”è¿˜å¯ä»¥å®‰è£…å…¶å®ƒdocker pluginé¦–å…ˆæ›´é«˜çº§ç½‘ç»œå’ŒvolumeåŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;Docker17.03-ceå€Ÿé‰´äº†å¾ˆå¤škubernetesçš„è®¾è®¡ç†å¿µï¼Œdockerå‘åŠ›ä¼ä¸šçº§å¸‚åœºï¼Œç›¸ä¿¡æ–°ç‰ˆçš„æ‰ç¬¦åˆå¾®æœåŠ¡çš„æ–¹å‘ï¼Œæ—¢èƒ½å…¼å®¹ä»¥å‰çš„&lt;strong&gt;è™šæ‹Ÿæœºå¼&lt;/strong&gt;çš„ä½¿ç”¨æ¨¡å¼ï¼Œä¹Ÿèƒ½å…¼å®¹&lt;strong&gt;å¾®æœåŠ¡&lt;/strong&gt;æ¶æ„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ä¸‹ä¸€æ­¥&#34;&gt;ä¸‹ä¸€æ­¥&lt;/h2&gt;

&lt;p&gt;ä¹‹å‰è€ƒè™‘è¿‡ä½¿ç”¨docker1.11 + compose + shipyard + eureka + nginxç­‰åšå¾®æœåŠ¡æ¶æ„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æœ€æ–°ç‰ˆdockerçš„é‡å¤§å‡çº§ï¼Œä»é•¿è¿œçš„çœ¼å…‰æ¥çœ‹ï¼Œä¸èƒ½ä¸€ç›´é™å®šäºä¹‹å‰çš„é‚£ä¸€å¥—ï¼Œæˆ‘æ›´å€¾å‘äºæ–°ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è°ƒç ”Docker17.03-ceçš„æ–°ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯æœåŠ¡æ²»ç†æ–¹é¢&lt;/li&gt;
&lt;li&gt;ç»“åˆå…·ä½“ä¸šåŠ¡è¯•ç”¨&lt;/li&gt;
&lt;li&gt;é‡æ„shrikeä¸ºdocker plugin&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Don&amp;rsquo;t speak, I&amp;rsquo;ll try to save us from ourselves&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;If were going down, we&amp;rsquo;re going down in flames&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>dockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒæ­å»º</title>
      <link>http://rootsongjc.github.io/post/docker-dev-env/</link>
      <pubDate>Mon, 06 Mar 2017 17:03:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/docker-dev-env/</guid>
      <description>

&lt;p&gt;çœ‹äº†ä¸‹ç½‘ä¸Šå…¶ä»–äººå†™çš„dockerå¼€å‘ç¯å¢ƒæ­å»ºï¼Œè¦ä¹ˆæ˜¯åœ¨ubuntuä¸‹æ­å»ºï¼Œè¦ä¹ˆå°±æ˜¯ä½¿ç”¨å®˜æ–¹è¯´æ˜çš„build docker-devé•œåƒçš„æ–¹å¼ä¸€æ­¥æ­¥æ­å»ºçš„ï¼Œç”šæ˜¯ç¹çï¼Œdocker hubä¸Šæœ‰ä¸€ä¸ªdockerå®˜æ–¹æ¨å‡ºçš„&lt;strong&gt;dockercore/docker&lt;/strong&gt;é•œåƒï¼Œå…¶å®è¿™å°±æ˜¯å®˜ç½‘ä¸Šæ‰€è¯´çš„docker-devé•œåƒï¼Œä¸è¿‡ä»¥å‰çš„é‚£ä¸ªdeprecatedäº†ï¼Œä½¿ç”¨ç›®å‰è¿™ä¸ªé•œåƒæ­å»ºdockerå¼€å‘ç¯å¢ƒæ˜¯æœ€å¿«æ·çš„äº†ã€‚&lt;/p&gt;

&lt;p&gt;æƒ³è¦ä¿®æ”¹dockeræºç å’Œåšdockerå®šåˆ¶å¼€å‘çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£ï¼š&lt;a href=&#34;https://docs.docker.com/opensource/code/&#34;&gt;https://docs.docker.com/opensource/code/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è®¾ç½®dockerå¼€å‘ç¯å¢ƒï¼š&lt;a href=&#34;https://docs.docker.com/opensource/project/set-up-dev-env/&#34;&gt;https://docs.docker.com/opensource/project/set-up-dev-env/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;dockerçš„ç¼–è¯‘å®è´¨ä¸Šæ˜¯åœ¨dockerå®¹å™¨ä¸­è¿è¡Œdockerã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤åœ¨æœ¬åœ°ç¼–è¯‘dockerçš„å‰ææ˜¯éœ€è¦å®‰è£…äº†dockerï¼Œè¿˜éœ€è¦ç”¨gitæŠŠä»£ç pullä¸‹æ¥ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åˆ›å»ºåˆ†æ”¯&#34;&gt;åˆ›å»ºåˆ†æ”¯&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ä»¥åç»™dockeræäº¤æ›´æ”¹ï¼Œæˆ‘ä»¬ä»dockerå®˜æ–¹forkä¸€ä¸ªåˆ†æ”¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/rootsongjc/docker.git
git config --local user.name &amp;quot;Jimmy Song&amp;quot;
git config --local user.email &amp;quot;rootsongjc@gmail.com&amp;quot;
git remote add upstream https://github.com/docker/docker.git
git config --local -l
git remote -v
git checkout -b dry-run-test
touch TEST.md
vim TEST.md
git status
git add TEST.md
git commit -am &amp;quot;Making a dry run test.&amp;quot;
git push --set-upstream origin dry-run-test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åå°±å¯ä»¥åœ¨&lt;code&gt;dry-run-test&lt;/code&gt;è¿™ä¸ªåˆ†æ”¯ä¸‹å·¥ä½œäº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;é…ç½®dockerå¼€å‘ç¯å¢ƒ&#34;&gt;é…ç½®dockerå¼€å‘ç¯å¢ƒ&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/opensource/project/set-up-dev-env/&#34;&gt;å®˜ç½‘&lt;/a&gt;ä¸Šè¯´éœ€è¦å…ˆæ¸…ç©ºè‡ªå·±ç”µè„‘ä¸Šå·²æœ‰çš„å®¹å™¨å’Œé•œåƒã€‚&lt;/p&gt;

&lt;p&gt;dockerå¼€å‘ç¯å¢ƒæœ¬è´¨ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªdockeré•œåƒï¼Œé•œåƒé‡ŒåŒ…å«äº†dockerçš„æ‰€æœ‰å¼€å‘è¿è¡Œç¯å¢ƒï¼Œæœ¬åœ°ä»£ç é€šè¿‡æŒ‚è½½çš„æ–¹å¼æ”¾åˆ°å®¹å™¨ä¸­è¿è¡Œï¼Œä¸‹é¢è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºè¿™æ ·ä¸€ä¸ªé•œåƒã€‚&lt;/p&gt;

&lt;p&gt;åœ¨&lt;code&gt;dry-run-test&lt;/code&gt;åˆ†æ”¯ä¸‹æ‰§è¡Œ&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;make BIND_DIR=. shell
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨ç¼–è¯‘ä¸€ä¸ªdockeré•œåƒï¼ŒFrom debian:jessieã€‚è¿™ä¸€æ­¥ä¼šä¸Šç½‘ä¸‹è½½å¾ˆå¤šä¾èµ–åŒ…ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚å¦‚æœç¿»ä¸äº†å¢™çš„è¯è‚¯å®šéƒ½ä¼šå¤±è´¥ã€‚å› ä¸ºéœ€è¦ä¸‹è½½çš„è½¯ä»¶å’Œå®‰è£…åŒ…éƒ½æ˜¯åœ¨å›½å¤–æœåŠ¡å™¨ä¸Šï¼Œä¸ç¿»å¢™æ ¹æœ¬å°±ä¸‹è½½ä¸ä¸‹æ¥ï¼Œä¸ºäº†ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œæ¨èç›´æ¥ä½¿ç”¨dockerå®˜æ–¹çš„dockercore/dockeré•œåƒï¼Œä¹Ÿä¸ç”¨ä»¥å‰çš„docker-devé•œåƒï¼Œé‚£ä¸ªé€ å°±åºŸå¼ƒäº†ã€‚è¿™ä¸ªé•œåƒå¤§å°æœ‰2.31Gã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker pull dockercore/docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨æ–¹æ³•è§è¿™é‡Œï¼š&lt;a href=&#34;https://hub.docker.com/r/dockercore/docker/&#34;&gt;https://hub.docker.com/r/dockercore/docker/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åå°±å¯ä»¥è¿›å…¥åˆ°å®¹å™¨é‡Œ&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;docker run --rm -i --privileged -e BUILDFLAGS -e KEEPBUNDLE -e DOCKER_BUILD_GOGC -e DOCKER_BUILD_PKGS -e DOCKER_CLIENTONLY -e DOCKER_DEBUG -e DOCKER_EXPERIMENTAL -e DOCKER_GITCOMMIT -e DOCKER_GRAPHDRIVER=devicemapper -e DOCKER_INCREMENTAL_BINARY -e DOCKER_REMAP_ROOT -e DOCKER_STORAGE_OPTS -e DOCKER_USERLANDPROXY -e TESTDIRS -e TESTFLAGS -e TIMEOUT -v &amp;quot;/Users/jimmy/Workspace/github/rootsongjc/docker/bundles:/go/src/github.com/docker/docker/bundles&amp;quot; -t &amp;quot;dockercore/docker:latest&amp;quot; bash
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŒ‰ç…§å®˜ç½‘çš„è¯´æ˜makeä¼šæŠ¥é”™&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@f2753f78bb6d:/go/src/github.com/docker/docker# ./hack/make.sh binary                          

error: .git directory missing and DOCKER_GITCOMMIT not specified
  Please either build with the .git directory accessible, or specify the
  exact (--short) commit hash you are building using DOCKER_GITCOMMIT for
  future accountability in diagnosing build issues.  Thanks!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯ä¸€ä¸ª&lt;a href=&#34;https://github.com/docker/docker/issues/27581&#34;&gt;issue-27581&lt;/a&gt;ï¼Œè§£å†³æ–¹å¼å°±æ˜¯åœ¨makeçš„æ—¶å€™æ‰‹åŠ¨æŒ‡å®š&lt;code&gt;DOCKER_GITCOMMIT&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@f2753f78bb6d:/go/src/github.com/docker/docker# DOCKER_GITCOMMIT=3385658 ./hack/make.sh binary

---&amp;gt; Making bundle: binary (in bundles/17.04.0-dev/binary)
Building: bundles/17.04.0-dev/binary-client/docker-17.04.0-dev
Created binary: bundles/17.04.0-dev/binary-client/docker-17.04.0-dev
Building: bundles/17.04.0-dev/binary-daemon/dockerd-17.04.0-dev
Created binary: bundles/17.04.0-dev/binary-daemon/dockerd-17.04.0-dev
Copying nested executables into bundles/17.04.0-dev/binary-daemon
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;bundlesç›®å½•ä¸‹ä¼šç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ç»“æ„&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
â”œâ”€â”€ 17.04.0-dev
â”‚Â Â  â”œâ”€â”€ binary-client
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ docker -&amp;gt; docker-17.04.0-dev
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ docker-17.04.0-dev
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ docker-17.04.0-dev.md5
â”‚Â Â  â”‚Â Â  â””â”€â”€ docker-17.04.0-dev.sha256
â”‚Â Â  â””â”€â”€ binary-daemon
â”‚Â Â      â”œâ”€â”€ docker-containerd
â”‚Â Â      â”œâ”€â”€ docker-containerd-ctr
â”‚Â Â      â”œâ”€â”€ docker-containerd-ctr.md5
â”‚Â Â      â”œâ”€â”€ docker-containerd-ctr.sha256
â”‚Â Â      â”œâ”€â”€ docker-containerd-shim
â”‚Â Â      â”œâ”€â”€ docker-containerd-shim.md5
â”‚Â Â      â”œâ”€â”€ docker-containerd-shim.sha256
â”‚Â Â      â”œâ”€â”€ docker-containerd.md5
â”‚Â Â      â”œâ”€â”€ docker-containerd.sha256
â”‚Â Â      â”œâ”€â”€ docker-init
â”‚Â Â      â”œâ”€â”€ docker-init.md5
â”‚Â Â      â”œâ”€â”€ docker-init.sha256
â”‚Â Â      â”œâ”€â”€ docker-proxy
â”‚Â Â      â”œâ”€â”€ docker-proxy.md5
â”‚Â Â      â”œâ”€â”€ docker-proxy.sha256
â”‚Â Â      â”œâ”€â”€ docker-runc
â”‚Â Â      â”œâ”€â”€ docker-runc.md5
â”‚Â Â      â”œâ”€â”€ docker-runc.sha256
â”‚Â Â      â”œâ”€â”€ dockerd -&amp;gt; dockerd-17.04.0-dev
â”‚Â Â      â”œâ”€â”€ dockerd-17.04.0-dev
â”‚Â Â      â”œâ”€â”€ dockerd-17.04.0-dev.md5
â”‚Â Â      â””â”€â”€ dockerd-17.04.0-dev.sha256
â””â”€â”€ latest -&amp;gt; 17.04.0-dev

4 directories, 26 files
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å¯ä»¥å°†docker-daemonå’Œdocker-clientç›®å½•ä¸‹çš„dockerå¯ä»¥æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨çš„/usr/bin/ç›®å½•ä¸‹äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¯åŠ¨docker deamon&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;docker daemon -D&amp;amp;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ£€æŸ¥ä¸‹dockeræ˜¯å¦å¯ç”¨&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;root@f2753f78bb6d:/go/src/github.com/docker/docker/bundles/17.04.0-dev# docker version
DEBU[0048] Calling GET /_ping                           
DEBU[0048] Calling GET /v1.27/version                   
Client:
 Version:      17.04.0-dev
 API version:  1.27
 Go version:   go1.7.5
 Git commit:   3385658
 Built:        Mon Mar  6 08:39:06 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.04.0-dev
 API version:  1.27 (minimum version 1.12)
 Go version:   go1.7.5
 Git commit:   3385658
 Built:        Mon Mar  6 08:39:06 2017
 OS/Arch:      linux/amd64
 Experimental: false
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ°æ­¤dockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒéƒ½å·²ç»æ­å»ºå¥½äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³è¦ä¿®æ”¹dockeræºç ï¼Œåªè¦åœ¨ä½ çš„IDEã€å®¹å™¨é‡Œæˆ–è€…ä½ æœ¬æœºä¸Šä¿®æ”¹dockerä»£ç åï¼Œå†æ‰§è¡Œä¸Šé¢çš„hack/make.sh binaryå‘½ä»¤å°±å¯ä»¥ç”Ÿæˆæ–°çš„dockeräºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†æ›¿æ¢åŸæ¥çš„/usr/bin/ç›®å½•ä¸‹çš„dockeräºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>cloud native go</title>
      <link>http://rootsongjc.github.io/presentation/cloud-native-go/</link>
      <pubDate>Fri, 03 Mar 2017 17:29:54 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/presentation/cloud-native-go/</guid>
      <description>&lt;p&gt;æœ€è¿‘åœ¨ç¿»è¯‘Kevin Hoffmanå’ŒDan Nemethçš„ä¹¦ã€ŠCloud Native Goã€‹ã€‚é¢„è®¡æœ¬æœˆå°†å®Œæˆï¼Œå°†ç”±&lt;strong&gt;ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾&lt;/strong&gt;å‡ºç‰ˆã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã€Šäº‘è®¡ç®—æŠ€æœ¯æ¶æ„ä¸å®è·µã€‹è¯»åæ„Ÿ</title>
      <link>http://rootsongjc.github.io/post/cloud-computing-architecture-practice/</link>
      <pubDate>Wed, 01 Mar 2017 18:29:36 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/cloud-computing-architecture-practice/</guid>
      <description>&lt;p&gt;æœ€è¿‘å‹äººæ¨èäº†ä¸€æœ¬ä¹¦ï¼Œæ˜¯åä¸ºçš„å·¥ç¨‹å¸ˆå†™çš„ã€Šäº‘è®¡ç®—æ¶æ„ä¸å®è·µç¬¬äºŒç‰ˆã€‹ï¼Œæ­£å¥½åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è¿™æœ¬ä¹¦çš„pdfï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œ&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/docs/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E8%B7%B5%E7%AC%AC2%E7%89%88.pdf&#34;&gt;ç‚¹è¿™é‡Œä¸‹è½½&lt;/a&gt;ï¼Œä¹¦æ˜¯æ–‡å­—ç‰ˆçš„ï¼Œå¤§å°13.04MBï¼Œé™¤äº†ç« èŠ‚é¡ºåºæœ‰ç‚¹é—®é¢˜å¤–æ²¡æœ‰å…¶ä»–ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;åç»­æˆ‘å°†ä¼šé™†ç»­åˆ†äº«è¿™æœ¬ä¹¦çš„è¯»åæ„Ÿã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>12 factor app</title>
      <link>http://rootsongjc.github.io/post/12-factor-app/</link>
      <pubDate>Mon, 27 Feb 2017 22:32:40 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/12-factor-app/</guid>
      <description>

&lt;h1 id=&#34;twelve-factor-app&#34;&gt;Twelve-factor App&lt;/h1&gt;

&lt;h1 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h1&gt;

&lt;p&gt;å¦‚ä»Šï¼Œè½¯ä»¶é€šå¸¸ä¼šä½œä¸ºä¸€ç§æœåŠ¡æ¥äº¤ä»˜ï¼Œå®ƒä»¬è¢«ç§°ä¸ºç½‘ç»œåº”ç”¨ç¨‹åºï¼Œæˆ–è½¯ä»¶å³æœåŠ¡ï¼ˆSaaSï¼‰ã€‚12-Factor ä¸ºæ„å»ºå¦‚ä¸‹çš„ SaaS åº”ç”¨æä¾›äº†æ–¹æ³•è®ºï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;strong&gt;æ ‡å‡†åŒ–&lt;/strong&gt;æµç¨‹è‡ªåŠ¨é…ç½®ï¼Œä»è€Œä½¿æ–°çš„å¼€å‘è€…èŠ±è´¹æœ€å°‘çš„å­¦ä¹ æˆæœ¬åŠ å…¥è¿™ä¸ªé¡¹ç›®ã€‚&lt;/li&gt;
&lt;li&gt;å’Œæ“ä½œç³»ç»Ÿä¹‹é—´å°½å¯èƒ½çš„&lt;strong&gt;åˆ’æ¸…ç•Œé™&lt;/strong&gt;ï¼Œåœ¨å„ä¸ªç³»ç»Ÿä¸­æä¾›&lt;strong&gt;æœ€å¤§çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€‚åˆ&lt;strong&gt;éƒ¨ç½²&lt;/strong&gt;åœ¨ç°ä»£çš„&lt;strong&gt;äº‘è®¡ç®—å¹³å°&lt;/strong&gt;ï¼Œä»è€Œåœ¨æœåŠ¡å™¨å’Œç³»ç»Ÿç®¡ç†æ–¹é¢èŠ‚çœèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„&lt;strong&gt;å·®å¼‚é™è‡³æœ€ä½&lt;/strong&gt;ï¼Œå¹¶ä½¿ç”¨&lt;strong&gt;æŒç»­äº¤ä»˜&lt;/strong&gt;å®æ–½æ•æ·å¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœ¨å·¥å…·ã€æ¶æ„å’Œå¼€å‘æµç¨‹ä¸å‘ç”Ÿæ˜æ˜¾å˜åŒ–çš„å‰æä¸‹å®ç°&lt;strong&gt;æ‰©å±•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™å¥—ç†è®ºé€‚ç”¨äºä»»æ„è¯­è¨€å’Œåç«¯æœåŠ¡ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ç­‰ï¼‰å¼€å‘çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;

&lt;h1 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h1&gt;

&lt;p&gt;æœ¬æ–‡çš„è´¡çŒ®è€…è€…å‚ä¸è¿‡æ•°ä»¥ç™¾è®¡çš„åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œéƒ¨ç½²ï¼Œå¹¶é€šè¿‡Â &lt;a href=&#34;http://www.heroku.com/&#34;&gt;Heroku&lt;/a&gt;Â å¹³å°é—´æ¥è§è¯äº†æ•°åä¸‡åº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œè¿ä½œä»¥åŠæ‰©å±•çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ç»¼åˆäº†æˆ‘ä»¬å…³äº SaaS åº”ç”¨å‡ ä¹æ‰€æœ‰çš„ç»éªŒå’Œæ™ºæ…§ï¼Œæ˜¯å¼€å‘æ­¤ç±»åº”ç”¨çš„ç†æƒ³å®è·µæ ‡å‡†ï¼Œå¹¶ç‰¹åˆ«å…³æ³¨äºåº”ç”¨ç¨‹åºå¦‚ä½•ä¿æŒè‰¯æ€§æˆé•¿ï¼Œå¼€å‘è€…ä¹‹é—´å¦‚ä½•è¿›è¡Œæœ‰æ•ˆçš„ä»£ç åä½œï¼Œä»¥åŠå¦‚ä½•Â &lt;a href=&#34;http://blog.heroku.com/archives/2011/6/28/the_new_heroku_4_erosion_resistance_explicit_contracts/&#34;&gt;é¿å…è½¯ä»¶æ±¡æŸ“&lt;/a&gt;Â ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„åˆè¡·æ˜¯åˆ†äº«åœ¨ç°ä»£è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›ç³»ç»Ÿæ€§é—®é¢˜ï¼Œå¹¶åŠ æ·±å¯¹è¿™äº›é—®é¢˜çš„è®¤è¯†ã€‚æˆ‘ä»¬æä¾›äº†è®¨è®ºè¿™äº›é—®é¢˜æ—¶æ‰€éœ€çš„å…±äº«è¯æ±‡ï¼ŒåŒæ—¶ä½¿ç”¨ç›¸å…³æœ¯è¯­ç»™å‡ºä¸€å¥—é’ˆå¯¹è¿™äº›é—®é¢˜çš„å¹¿ä¹‰è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡æ ¼å¼çš„çµæ„Ÿæ¥è‡ªäº Martin Fowler çš„ä¹¦ç±ï¼šÂ *Patterns of Enterprise Application Architecture*Â ï¼ŒÂ *Refactoring*Â ã€‚&lt;/p&gt;

&lt;h1 id=&#34;12-factors&#34;&gt;12-factors&lt;/h1&gt;

&lt;h2 id=&#34;i-åŸºå‡†ä»£ç -https-12factor-net-zh-cn-codebase&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/codebase&#34;&gt;I. åŸºå‡†ä»£ç &lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;ä¸€ä»½åŸºå‡†ä»£ç -å¤šä»½éƒ¨ç½²&#34;&gt;ä¸€ä»½åŸºå‡†ä»£ç ï¼Œå¤šä»½éƒ¨ç½²&lt;/h3&gt;

&lt;h2 id=&#34;ii-ä¾èµ–-https-12factor-net-zh-cn-dependencies&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/dependencies&#34;&gt;II. ä¾èµ–&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;æ˜¾å¼å£°æ˜ä¾èµ–å…³ç³»&#34;&gt;æ˜¾å¼å£°æ˜ä¾èµ–å…³ç³»&lt;/h3&gt;

&lt;h2 id=&#34;iii-é…ç½®-https-12factor-net-zh-cn-config&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/config&#34;&gt;III. é…ç½®&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;åœ¨ç¯å¢ƒä¸­å­˜å‚¨é…ç½®&#34;&gt;åœ¨ç¯å¢ƒä¸­å­˜å‚¨é…ç½®&lt;/h3&gt;

&lt;h2 id=&#34;iv-åç«¯æœåŠ¡-https-12factor-net-zh-cn-backing-services&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/backing-services&#34;&gt;IV. åç«¯æœåŠ¡&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;æŠŠåç«¯æœåŠ¡å½“ä½œé™„åŠ èµ„æº&#34;&gt;æŠŠåç«¯æœåŠ¡å½“ä½œé™„åŠ èµ„æº&lt;/h3&gt;

&lt;h2 id=&#34;v-æ„å»º-å‘å¸ƒ-è¿è¡Œ-https-12factor-net-zh-cn-build-release-run&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/build-release-run&#34;&gt;V. æ„å»ºï¼Œå‘å¸ƒï¼Œè¿è¡Œ&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;ä¸¥æ ¼åˆ†ç¦»æ„å»ºå’Œè¿è¡Œ&#34;&gt;ä¸¥æ ¼åˆ†ç¦»æ„å»ºå’Œè¿è¡Œ&lt;/h3&gt;

&lt;h2 id=&#34;vi-è¿›ç¨‹-https-12factor-net-zh-cn-processes&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/processes&#34;&gt;VI. è¿›ç¨‹&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨&#34;&gt;ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨&lt;/h3&gt;

&lt;h2 id=&#34;vii-ç«¯å£ç»‘å®š-https-12factor-net-zh-cn-port-binding&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/port-binding&#34;&gt;VII. ç«¯å£ç»‘å®š&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;é€šè¿‡ç«¯å£ç»‘å®šæä¾›æœåŠ¡&#34;&gt;é€šè¿‡ç«¯å£ç»‘å®šæä¾›æœåŠ¡&lt;/h3&gt;

&lt;h2 id=&#34;viii-å¹¶å‘-https-12factor-net-zh-cn-concurrency&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/concurrency&#34;&gt;VIII. å¹¶å‘&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;é€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±•&#34;&gt;é€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±•&lt;/h3&gt;

&lt;h2 id=&#34;ix-æ˜“å¤„ç†-https-12factor-net-zh-cn-disposability&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/disposability&#34;&gt;IX. æ˜“å¤„ç†&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ç»ˆæ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§&#34;&gt;å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ç»ˆæ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§&lt;/h3&gt;

&lt;h2 id=&#34;x-å¼€å‘ç¯å¢ƒä¸çº¿ä¸Šç¯å¢ƒç­‰ä»·-https-12factor-net-zh-cn-dev-prod-parity&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/dev-prod-parity&#34;&gt;X. å¼€å‘ç¯å¢ƒä¸çº¿ä¸Šç¯å¢ƒç­‰ä»·&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;å°½å¯èƒ½çš„ä¿æŒå¼€å‘-é¢„å‘å¸ƒ-çº¿ä¸Šç¯å¢ƒç›¸åŒ&#34;&gt;å°½å¯èƒ½çš„ä¿æŒå¼€å‘ï¼Œé¢„å‘å¸ƒï¼Œçº¿ä¸Šç¯å¢ƒç›¸åŒ&lt;/h3&gt;

&lt;h2 id=&#34;xi-æ—¥å¿—-https-12factor-net-zh-cn-logs&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/logs&#34;&gt;XI. æ—¥å¿—&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;æŠŠæ—¥å¿—å½“ä½œäº‹ä»¶æµ&#34;&gt;æŠŠæ—¥å¿—å½“ä½œäº‹ä»¶æµ&lt;/h3&gt;

&lt;h2 id=&#34;xii-ç®¡ç†è¿›ç¨‹-https-12factor-net-zh-cn-admin-processes&#34;&gt;&lt;a href=&#34;https://12factor.net/zh_cn/admin-processes&#34;&gt;XII. ç®¡ç†è¿›ç¨‹&lt;/a&gt;&lt;/h2&gt;

&lt;h3 id=&#34;åå°ç®¡ç†ä»»åŠ¡å½“ä½œä¸€æ¬¡æ€§è¿›ç¨‹è¿è¡Œ&#34;&gt;åå°ç®¡ç†ä»»åŠ¡å½“ä½œä¸€æ¬¡æ€§è¿›ç¨‹è¿è¡Œ&lt;/h3&gt;
</description>
    </item>
    
    <item>
      <title>docker service discovery</title>
      <link>http://rootsongjc.github.io/post/docker-service-discovery/</link>
      <pubDate>Mon, 27 Feb 2017 18:27:07 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/docker-service-discovery/</guid>
      <description>&lt;p&gt;Prior to Docker 1.12 release, setting up Swarm cluster needed some sort ofÂ &lt;a href=&#34;https://docs.docker.com/v1.11/swarm/discovery/&#34;&gt;service discovery backend&lt;/a&gt;. There are multiple discovery backends available like hosted discovery service, using a static file describing the cluster, etcd, consul, zookeeper or using static list of IP address.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pic-intro.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pic-intro.png&#34; alt=&#34;pic-intro&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Thanks to Docker 1.12 Swarm Mode&lt;/strong&gt;, we donâ€™t have to depend upon these external tools and complex configurations.Â &lt;a href=&#34;https://github.com/docker/docker/releases/tag/v1.12.0-rc5&#34;&gt;Docker Engine 1.12&lt;/a&gt;Â runs itâ€™s own internal DNS service to route services by name.Swarm manager nodes assign each service in the swarm a unique DNS name and load balances running containers. You can query every container running in the swarm through a DNS server embedded in the swarm.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;How does it help?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;When you create a service and provide a name for it, you can use just that name as a target hostname, and itâ€™s going to be automatically resolved to the proper container IP of the service. In short, within the swarm, containers can simply reference other services via their names and the built-in DNS will be used to find the appropriate IP and port automatically. It is important to note thatÂ if the service has multiple replicas,Â &lt;strong&gt;the requests would be round-robin load-balanced&lt;/strong&gt;. This would still work if you didnâ€™t forward any ports when you created your docker services.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic10.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic10.png&#34; alt=&#34;Pic10&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Embedded DNS is not a new concept. It was first included under Docker 1.10 release. Please note thatÂ DNS lookup for containers connected to user-defined networks works differently compared to the containers connected toÂ &lt;code&gt;default bridge&lt;/code&gt;Â network.Â As of Docker 1.10, the docker daemon implements an embedded DNS server which provides built-in service discovery for any container created with a validÂ &lt;code&gt;name&lt;/code&gt;Â orÂ &lt;code&gt;net-alias&lt;/code&gt;Â or aliased byÂ &lt;code&gt;link&lt;/code&gt;. Moreover,container name configured usingÂ &lt;code&gt;--name&lt;/code&gt;Â is used to discover a container within an user-defined docker network. The embedded DNS server maintains the mapping between the container name and its IP address (on the network the container is connected to).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;How does Embedded DNS resolve unqualified names?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic22.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic22.png&#34; alt=&#34;Pic22&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Â &lt;/p&gt;

&lt;p&gt;With Docker 1.12 release, a new API called â€œserviceâ€ is being included which clearly talks about theÂ functionality of service discovery. Â It is important to noteÂ that Service discovery is scoped within the network. What it really means is â€“ Â If youÂ have redis application and web client as two separate services , you combine into single application and put them into same network.If you try build your application in such a way that you are trying to reach to redis through name â€œredisâ€,it will always resolve to name â€œredisâ€. Reason â€“ both of these services are part of the same network.Â You donâ€™t need to be inside the application trying to resolve this service using FQDN. Reason â€“ FQDNÂ name is not going to be portable which in turn, makes your application non-portable.&lt;/p&gt;

&lt;p&gt;Internally, there is a listener opened inside the container itself. If we try to enter into the container which is providing a service discovery and look at /etc/resolv.conf, we will find that the nameserver entry holds something really different like 127.0.0.11.This is nothing but a loopback address. So, whenever resolver tried to resolve, it will resolve to 127.0.0.11 and this request is rightly trapped.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-12.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-12.png&#34; alt=&#34;Pic-12&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once this request is trapped, it isÂ sent to particular random UDP / TCP port currently being listened under theÂ docker daemon. Consequently, theÂ socket is to be created inside the namespace. When DNS server and daemon gets the request, it knows that this is coming from which specific network, hence gets aware ofÂ Â the context of from where it is coming from.Once it knows the context, it can generate the appropriate DNS response.&lt;/p&gt;

&lt;p&gt;To demonstrate Service Discovery Â under Docker 1.12, I have upgraded Docker 1.12.rc5 to 1.12.0 GA version. The swarm cluster look like:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pico01.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pico01.png&#34; alt=&#34;Pico01&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have created a network called â€œcollabnetâ€ for the new services as shown below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-2.jpg&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-2.jpg&#34; alt=&#34;Pic-2&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Letâ€™s create a service called â€œwordpressdbâ€ under collabnet network :&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-mysql.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-mysql.png&#34; alt=&#34;pico-mysql&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can list the running tasks(containers) and the node on which these containers are running on:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-4.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic-4.png&#34; alt=&#34;Pic-4&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Letâ€™s create another service called â€œwordpressappâ€ under the same network:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-app.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-app.png&#34; alt=&#34;pico-app&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now, we can list out the number ofÂ services running on our swarm cluster as shown below.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-2.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-2.png&#34; alt=&#34;pico-2&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have scaled out the number of wordpressapp and wordpressdb just for demonstration purpose.&lt;/p&gt;

&lt;p&gt;Letâ€™s consider my master node where I have two of the containers running as shown below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pico-1.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pico-1.png&#34; alt=&#34;Pico-1&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can reach out one service(wordpressapp) from another service(wordpressapp) through just service-name as shown below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-last.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-last.png&#34; alt=&#34;pico-last&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, I can reach out to particular container by its name from other container running different service but on the same network. As shown below, I can reach out toÂ wordpressapp.3.6f8bthp container viaÂ wordpressdb.7.e62jl57qqu running wordpressdb.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-tasktoo.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-tasktoo.png&#34; alt=&#34;pico-tasktoo&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The below picture depicts the Service Discovery in a nutshell:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic23.png&#34; alt=&#34;Pic23&#34; /&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Every service has Virtual IP(VIP) associated which can be derived as shown below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pic-list.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pic-list.png&#34; alt=&#34;pic-list&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As shown above,Â each service has an IP address and this IP address maps to multiple container IP address associated with that service. It is important to note thatÂ service IP associated with a service does not change even though containers associated with the service dies/ restarts.&lt;/p&gt;

&lt;p&gt;Few important points to remember:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;VIP based services use Linux IPVS load balancing to route to the backend containers. This works only for TCP/UDP protocols. When you use DNS-RR mode services donâ€™t have a VIP allocated. Instead service names resolves to one of the backend container IPs randomly.&lt;/li&gt;
&lt;li&gt;Ping not working for VIP is as designed. Technically, IPVS is a TCP/UDP load-balancer, while ping uses ICMP and hence IPVS is not going to load-balance the ping request.&lt;/li&gt;
&lt;li&gt;For VIP based services the reason ping works on the local node is because the VIP is added a 2nd IP address on the overlay network interface&lt;/li&gt;
&lt;li&gt;You can any of the tools like Â dig, nslookup or wget -O- &lt;service name&gt; to demonstrate the service discovery functionality&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Below picture depicts that the network is the scope of service discoverability which means that when you have a service running on one network , it is scoped to that network and wonâ€™t be able to reach out to different service running on different network(unless it is part of that network).&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/SD.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/SD.png&#34; alt=&#34;SD&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Letâ€™s dig littleÂ further introducing Load-balancing aspect too. To see what is basically enabling the load-balancingÂ functionality, we can go into sandbox of each containers and see how it has been resolved.&lt;/p&gt;

&lt;p&gt;Letâ€™s pick up the two containers running on the master node. We can see the sandbox running through the following command:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-namespace.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-namespace.png&#34; alt=&#34;pico-namespace&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Under /var/run/docker/netns, you will find various namespaces. The namespaces marked with x-{id} represents network namespace managed by the overlay network driver for its operation (such as creating a bridge, terminating vxlan tunnel, etcâ€¦). They donâ€™t represent the container network namespace. Since it is managed by the driver, it is not recommended to manipulate anything within this namespace. But if you are curious on the deep dive, then you can use the â€œnsenterâ€ tool to understand more about this internal namespace.&lt;/p&gt;

&lt;p&gt;We can enter into sandbox through the nsenter utility:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-mangle.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/pico-mangle.png&#34; alt=&#34;pico-mangle&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In case you faced an error stating â€œnsenter: reassociate to namespace â€˜ns/netâ€™ failed: Invalid argumentâ€, I suggest to look atÂ &lt;a href=&#34;http://tinyurl.com/gu5rsw9&#34;&gt;this&lt;/a&gt;Â workaround.&lt;/p&gt;

&lt;p&gt;10.0.3.4 service IP is marked 0x108 using iptables OUTPUT chain. ipvs uses this marking and load balances it to containers 10.0.3.5 and 10.0.3.6 as shown below:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/ipvs.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/ipvs.png&#34; alt=&#34;ipvs&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here are key takeaways from this entire post:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic34.png&#34;&gt;&lt;img src=&#34;http://collabnix.com/wp-content/uploads/2016/07/Pic34.png&#34; alt=&#34;Pic34&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From &lt;a href=&#34;http://collabnix.com/archives/1504&#34;&gt;http://collabnix.com/archives/1504&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>docker embedded dns</title>
      <link>http://rootsongjc.github.io/post/docker-embedded-dns/</link>
      <pubDate>Mon, 27 Feb 2017 18:23:42 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/docker-embedded-dns/</guid>
      <description>

&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†&lt;a href=&#34;http://lib.csdn.net/base/docker&#34;&gt;Docker&lt;/a&gt;å®¹å™¨çš„DNSé…ç½®åŠå…¶æ³¨æ„ç‚¹ï¼Œé‡ç‚¹å¯¹docker 1.10å‘å¸ƒçš„embedded DNS serverè¿›è¡Œäº†æºç åˆ†æï¼Œçœ‹çœ‹embedded DNS serveråˆ°åº•æ˜¯ä¸ªå•¥ï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;configure-container-dns&#34;&gt;Configure container DNS&lt;/h2&gt;

&lt;h3 id=&#34;dns-in-default-bridge-network&#34;&gt;DNS in default bridge network&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Options&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-h HOSTNAME or â€“hostname=HOSTNAME&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†HOSTNAMEè®¾ç½®åˆ°å®¹å™¨å†…çš„/etc/hosts, /etc/hostname, /bin/bashæç¤ºä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“link=CONTAINER_NAME or ID:ALIAS&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†ALIASå’ŒCONTAINER_NAME/IDå¯¹åº”çš„å®¹å™¨IPæ·»åŠ åˆ°/etc/hosts. å¦‚æœ CONTAINER_NAME/IDæœ‰å¤šä¸ªIPåœ°å€ ï¼Ÿ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns=IP_ADDRESSâ€¦&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†&lt;code&gt;nameserver IP_ADDRESS&lt;/code&gt;æ·»åŠ åˆ°å®¹å™¨å†…çš„/etc/resolv.confä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns-search=DOMAINâ€¦&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†DOMAINæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confçš„dns searchåˆ—è¡¨ä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns-opt=OPTIONâ€¦&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†OPTIONæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confä¸­çš„optionsé€‰é¡¹ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¦‚æœdocker runæ—¶ä¸å«&lt;code&gt;--dns=IP_ADDRESS..., --dns-search=DOMAIN..., or --dns-opt=OPTION...&lt;/code&gt;å‚æ•°ï¼Œdocker daemonä¼šå°†copyæœ¬ä¸»æœºçš„/etc/resolv.confï¼Œç„¶åå¯¹è¯¥copyè¿›è¡Œå¤„ç†ï¼ˆå°†é‚£äº›/etc/resolv.confä¸­pingä¸é€šçš„nameserveré¡¹ç»™æŠ›å¼ƒï¼‰,å¤„ç†å®Œæˆåç•™ä¸‹çš„éƒ¨åˆ†å°±ä½œä¸ºè¯¥å®¹å™¨å†…éƒ¨çš„/etc/resolv.confã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åˆ©ç”¨å®¿ä¸»æœºä¸­çš„/etc/resolv.confé…ç½®çš„nameserverè¿›è¡ŒåŸŸåè§£æï¼Œé‚£ä¹ˆä½ éœ€è¦å®¿ä¸»æœºä¸­è¯¥dns serviceé…ç½®ä¸€ä¸ªå®¿ä¸»æœºå†…å®¹å™¨èƒ½pingé€šçš„IPã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå®¿ä¸»æœºçš„/etc/resolv.confå†…å®¹å‘ç”Ÿæ”¹å˜ï¼Œdocker daemonæœ‰ä¸€ä¸ªå¯¹åº”çš„file change notifierä¼šwatchåˆ°è¿™ä¸€å˜åŒ–ï¼Œç„¶åæ ¹æ®å®¹å™¨çŠ¶æ€é‡‡å–å¯¹åº”çš„æªæ–½ï¼š

&lt;ul&gt;
&lt;li&gt;å¦‚æœå®¹å™¨çŠ¶æ€ä¸ºstoppedï¼Œåˆ™ç«‹åˆ»æ ¹æ®å®¿ä¸»æœºçš„/etc/resolv.confå†…å®¹æ›´æ–°å®¹å™¨å†…çš„/etc/resolv.conf.&lt;/li&gt;
&lt;li&gt;å¦‚æœå®¹å™¨çŠ¶æ€ä¸ºrunningï¼Œåˆ™å®¹å™¨å†…çš„/etc/resolv.confå°†ä¸ä¼šæ”¹å˜ï¼Œç›´åˆ°è¯¥å®¹å™¨çŠ¶æ€å˜ä¸ºstopped.&lt;/li&gt;
&lt;li&gt;å¦‚æœå®¹å™¨å¯åŠ¨åä¿®æ”¹è¿‡å®¹å™¨å†…çš„/etc/resolv.confï¼Œåˆ™ä¸ä¼šå¯¹è¯¥å®¹å™¨è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±å·²ç»å®Œæˆçš„ä¿®æ”¹ï¼Œæ— è®ºè¯¥å®¹å™¨ä¸ºä»€ä¹ˆçŠ¶æ€ã€‚Â 
å¦‚æœå®¹å™¨å¯åŠ¨æ—¶ï¼Œç”¨äº†â€“dns, â€“dns-search, or â€“dns-opté€‰é¡¹ï¼Œå…¶å¯åŠ¨æ—¶å·²ç»ä¿®æ”¹äº†å®¿ä¸»æœºçš„/etc/resolv.confè¿‡æ»¤åçš„å†…å®¹ï¼Œå› æ­¤docker daemonæ°¸è¿œä¸ä¼šæ›´æ–°è¿™ç§å®¹å™¨çš„/etc/resolv.confã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;: docker daemonç›‘æ§å®¿ä¸»æœº/etc/resolv.confçš„è¿™ä¸ªfile change notifierçš„å®ç°æ˜¯ä¾èµ–linuxå†…æ ¸çš„inotifyç‰¹æ€§ï¼Œè€Œinotfyç‰¹æ€§ä¸å…¼å®¹overlay fsï¼Œå› æ­¤ä½¿ç”¨overlay fs driverçš„docker deamonå°†æ— æ³•ä½¿ç”¨è¯¥/etc/resolv.confè‡ªåŠ¨æ›´æ–°çš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;embedded-dns-in-user-defined-networks&#34;&gt;Embedded DNS in user-defined networks&lt;/h3&gt;

&lt;p&gt;åœ¨docker 1.10ç‰ˆæœ¬ä¸­ï¼Œdocker daemonå®ç°äº†ä¸€ä¸ªå«åš&lt;code&gt;embedded DNS server&lt;/code&gt;çš„ä¸œè¥¿ï¼Œç”¨æ¥å½“ä½ åˆ›å»ºçš„å®¹å™¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œï¼›&lt;/li&gt;
&lt;li&gt;å®¹å™¨åˆ›å»ºæ—¶å€™é€šè¿‡&lt;code&gt;--name&lt;/code&gt;,&lt;code&gt;--network-alias&lt;/code&gt;Â orÂ &lt;code&gt;--link&lt;/code&gt;æä¾›äº†ä¸€ä¸ªnameï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;docker daemonå°±ä¼šåˆ©ç”¨embedded DNS serverå¯¹æ•´ä¸ªè‡ªå®šä¹‰ç½‘ç»œä¸­æ‰€æœ‰å®¹å™¨è¿›è¡Œåå­—è§£æï¼ˆä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç½‘ç»œä¸­çš„ä¸€ç§æœåŠ¡å‘ç°ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤å½“ä½ å¯åŠ¨å®¹å™¨æ—¶å€™æ»¡è¶³ä»¥ä¸Šæ¡ä»¶æ—¶ï¼Œè¯¥å®¹å™¨çš„åŸŸåè§£æå°±ä¸åº”è¯¥å»è€ƒè™‘å®¹å™¨å†…çš„/etc/hosts, /etc/resolv.confï¼Œåº”è¯¥ä¿æŒå…¶ä¸å˜ï¼Œç”šè‡³ä¸ºç©ºï¼Œå°†éœ€è¦è§£æçš„åŸŸåéƒ½é…ç½®åˆ°å¯¹åº”embedded DNS serverä¸­ã€‚å…·ä½“é…ç½®å‚æ•°åŠè¯´æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Options&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;â€“name=CONTAINER-NAME&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šå°†CONTAINER-NAMEå’Œè¯¥å®¹å™¨çš„IPé…ç½®åˆ°è¯¥å®¹å™¨è¿æ¥åˆ°çš„è‡ªå®šä¹‰ç½‘ç»œä¸­çš„embedded DNS serverä¸­ï¼Œç”±å®ƒæä¾›è¯¥è‡ªå®šä¹‰ç½‘ç»œèŒƒå›´å†…çš„åŸŸåè§£æ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“network-alias=ALIAS&lt;/td&gt;
&lt;td&gt;å°†å®¹å™¨çš„name-ip mapé…ç½®åˆ°å®¹å™¨è¿æ¥åˆ°çš„å…¶ä»–ç½‘ç»œçš„embedded DNS serverä¸­ã€‚PSï¼šä¸€ä¸ªå®¹å™¨å¯èƒ½è¿æ¥åˆ°å¤šä¸ªç½‘ç»œä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“link=CONTAINER_NAME:ALIAS&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†ALIASå’ŒCONTAINER_NAME/IDå¯¹åº”çš„å®¹å™¨IPé…ç½®åˆ°è¯¥å®¹å™¨è¿æ¥åˆ°çš„è‡ªå®šä¹‰ç½‘ç»œä¸­çš„embedded DNS serverä¸­ï¼Œä½†ä»…é™äºé…ç½®äº†è¯¥linkçš„å®¹å™¨èƒ½è§£æè¿™æ¡ruleã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns=[IP_ADDRESSâ€¦]&lt;/td&gt;
&lt;td&gt;å½“embedded DNS serveræ— æ³•è§£æè¯¥å®¹å™¨çš„æŸä¸ªdns queryæ—¶ï¼Œä¼šå°†è¯·æ±‚fowardåˆ°è¿™äº›â€“dnsé…ç½®çš„IP_ADDRESS DNS Serverï¼Œç”±å®ƒä»¬è¿›ä¸€æ­¥è¿›è¡ŒåŸŸåè§£æã€‚æ³¨æ„ï¼Œè¿™äº›â€“dnsé…ç½®åˆ°&lt;code&gt;nameserver IP_ADDRESS&lt;/code&gt;å…¨éƒ¨ç”±å¯¹åº”çš„embedded DNS serverç®¡ç†ï¼Œå¹¶ä¸ä¼šæ›´æ–°åˆ°å®¹å™¨å†…çš„/etc/resolv.conf.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns-search=DOMAINâ€¦&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šå°†â€“dns-searché…ç½®çš„DOMAINä»¬é…ç½®åˆ°the embedded DNS serverï¼Œå¹¶ä¸ä¼šæ›´æ–°åˆ°å®¹å™¨å†…çš„/etc/resolv.confã€‚&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;â€“dns-opt=OPTIONâ€¦&lt;/td&gt;
&lt;td&gt;åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šå°†â€“dns-opté…ç½®çš„OPTIONä»¬é…ç½®åˆ°the embedded DNS serverï¼Œå¹¶ä¸ä¼šæ›´æ–°åˆ°å®¹å™¨å†…çš„/etc/resolv.confã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¦‚æœdocker runæ—¶ä¸å«&lt;code&gt;--dns=IP_ADDRESS..., --dns-search=DOMAIN..., or --dns-opt=OPTION...&lt;/code&gt;å‚æ•°ï¼Œdocker daemonä¼šå°†copyæœ¬ä¸»æœºçš„/etc/resolv.confï¼Œç„¶åå¯¹è¯¥copyè¿›è¡Œå¤„ç†ï¼ˆå°†é‚£äº›/etc/resolv.confä¸­pingä¸é€šçš„nameserveré¡¹ç»™æŠ›å¼ƒï¼‰,å¤„ç†å®Œæˆåç•™ä¸‹çš„éƒ¨åˆ†å°±ä½œä¸ºè¯¥å®¹å™¨å†…éƒ¨çš„/etc/resolv.confã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åˆ©ç”¨å®¿ä¸»æœºä¸­çš„/etc/resolv.confé…ç½®çš„nameserverè¿›è¡ŒåŸŸåè§£æï¼Œé‚£ä¹ˆä½ éœ€è¦å®¿ä¸»æœºä¸­è¯¥dns serviceé…ç½®ä¸€ä¸ªå®¿ä¸»æœºå†…å®¹å™¨èƒ½pingé€šçš„IPã€‚&lt;/li&gt;
&lt;li&gt;æ³¨æ„å®¹å™¨å†…/etc/resolv.confä¸­é…ç½®çš„DNS serverï¼Œåªæœ‰å½“the embedded DNS serveræ— æ³•è§£ææŸä¸ªnameæ—¶ï¼Œæ‰ä¼šç”¨åˆ°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;embedded-dns-serveræºç åˆ†æ&#34;&gt;embedded DNS serveræºç åˆ†æ&lt;/h2&gt;

&lt;p&gt;æ‰€æœ‰embedded DNS serverç›¸å…³çš„ä»£ç éƒ½åœ¨libcontaineré¡¹ç›®ä¸­ï¼Œå‡ ä¸ªæœ€ä¸»è¦çš„æ–‡ä»¶åˆ†åˆ«æ˜¯&lt;code&gt;/libnetwork/resolver.Go&lt;/code&gt;,&lt;code&gt;/libnetwork/resolver_unix.go&lt;/code&gt;,&lt;code&gt;sandbox_dns_unix.go&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;OK, å…ˆæ¥çœ‹çœ‹embedded DNS serverå¯¹è±¡åœ¨dockerä¸­çš„å®šä¹‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Go&#34;&gt;libnetwork/resolver.go

// resolver implements the Resolver interface
type resolver struct {
    sb         *sandbox
    extDNSList [maxExtDNS]extDNSEntry
    server     *dns.Server
    conn       *net.UDPConn
    tcpServer  *dns.Server
    tcpListen  *net.TCPListener
    err        error
    count      int32
    tStamp     time.Time
    queryLock  sync.Mutex
}

// Resolver represents the embedded DNS server in Docker. It operates
// by listening on container&#39;s loopback interface for DNS queries.
type Resolver interface {
    // Start starts the name server for the container
    Start() error
    // Stop stops the name server for the container. Stopped resolver
    // can be reused after running the SetupFunc again.
    Stop()
    // SetupFunc() provides the setup function that should be run
    // in the container&#39;s network namespace.
    SetupFunc() func()
    // NameServer() returns the IP of the DNS resolver for the
    // containers.
    NameServer() string
    // SetExtServers configures the external nameservers the resolver
    // should use to forward queries
    SetExtServers([]string)
    // ResolverOptions returns resolv.conf options that should be set
    ResolverOptions() []string
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯è§ï¼Œresolverå°±æ˜¯embedded DNS serverï¼Œæ¯ä¸ªresolveréƒ½bindä¸€ä¸ªsandboxï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªå¯¹åº”çš„dns.Serverï¼Œè¿˜å®šä¹‰äº†å¤–éƒ¨DNSå¯¹è±¡åˆ—è¡¨ï¼Œä½†embedded DNS serveræ— æ³•è§£ææŸä¸ªnameæ—¶ï¼Œå°±ä¼šforwardåˆ°é‚£äº›å¤–éƒ¨DNSã€‚&lt;/p&gt;

&lt;p&gt;Resolver Interfaceå®šä¹‰äº†embedded DNS serverå¿…é¡»å®ç°çš„æ¥å£ï¼Œè¿™é‡Œä¼šé‡ç‚¹å…³æ³¨SetupFunc()å’ŒStart()ï¼Œè§ä¸‹æ–‡åˆ†æã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;dns.Serverçš„å®ç°ï¼Œå…¨éƒ¨äº¤ç»™github.com/miekg/dnsï¼Œé™äºç¯‡å¹…ï¼Œè¿™é‡Œæˆ‘å°†ä¸ä¼šè·Ÿè¿›å»åˆ†æã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»æ•´ä¸ª&lt;a href=&#34;http://lib.csdn.net/base/docker&#34;&gt;Container&lt;/a&gt;Â createçš„æµç¨‹ä¸Šæ¥çœ‹ï¼Œdocker daemonå¯¹embedded DNS serverçš„å¤„ç†æ˜¯ä»endpoint Join a sandboxå¼€å§‹çš„:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;libnetwork/endpoint.go


func (ep *endpoint) Join(sbox Sandbox, options ...EndpointOption) error {
    ...

    return ep.sbJoin(sb, options...)
}


func (ep *endpoint) sbJoin(sb *sandbox, options ...EndpointOption) error {
    ...

    if err = sb.populateNetworkResources(ep); err != nil {
        return err
    }

    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;sandbox join a sandboxçš„æµç¨‹ä¸­ï¼Œä¼šè°ƒç”¨sandbox. populateNetworkResourcesåšç½‘ç»œèµ„æºçš„è®¾ç½®ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬äº†embedded DNS serverçš„å¯åŠ¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Go&#34;&gt;libnetwork/sandbox.go
func (sb *sandbox) populateNetworkResources(ep *endpoint) error {
    ...
    if ep.needResolver() {
        sb.startResolver(false)
    }
    ...
}


libnetwork/sandbox_dns_unix.go
func (sb *sandbox) startResolver(restore bool) {
    sb.resolverOnce.Do(func() {
        var err error
        sb.resolver = NewResolver(sb)
        defer func() {
            if err != nil {
                sb.resolver = nil
            }
        }()

        // In the case of live restore container is already running with
        // right resolv.conf contents created before. Just update the
        // external DNS servers from the restored sandbox for embedded
        // server to use.
        if !restore {
            err = sb.rebuildDNS()
            if err != nil {
                log.Errorf(&amp;quot;Updating resolv.conf failed for container %s, %q&amp;quot;, sb.ContainerID(), err)
                return
            }
        }
        sb.resolver.SetExtServers(sb.extDNS)

        sb.osSbox.InvokeFunc(sb.resolver.SetupFunc())
        if err = sb.resolver.Start(); err != nil {
            log.Errorf(&amp;quot;Resolver Setup/Start failed for container %s, %q&amp;quot;, sb.ContainerID(), err)
        }
    })
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;sandbox.startResolveræ˜¯æµç¨‹å…³é”®:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é€šè¿‡sanbdox.rebuildDNSç”Ÿæˆäº†containerå†…çš„/etc/resolv.conf&lt;/li&gt;
&lt;li&gt;é€šè¿‡resolver.SetExtServers(sb.extDNS)è®¾ç½®embedded DNS serverçš„forward DNS list&lt;/li&gt;
&lt;li&gt;é€šè¿‡resolver.SetupFunc()å¯åŠ¨ä¸¤ä¸ªéšæœºå¯ç”¨ç«¯å£ä½œä¸ºembedded DNS serverï¼ˆ127.0.0.11ï¼‰çš„TCPå’ŒUDP Linstener&lt;/li&gt;
&lt;li&gt;é€šè¿‡resolver.Start()å¯¹å®¹å™¨å†…çš„iptableè¿›è¡Œè®¾ç½®(è§ä¸‹)ï¼Œå¹¶é€šè¿‡miekg/dnså¯åŠ¨ä¸€ä¸ªnameserveråœ¨53ç«¯å£æä¾›æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢æˆ‘å°†é€ä¸€ä»‹ç»ä¸Šé¢çš„å„ä¸ªæ­¥éª¤ã€‚&lt;/p&gt;

&lt;h3 id=&#34;sanbdox-rebuilddns&#34;&gt;sanbdox.rebuildDNS&lt;/h3&gt;

&lt;p&gt;sanbdox.rebuildDNSè´Ÿè´£æ„å»ºå®¹å™¨å†…çš„resolv.confï¼Œæ„å»ºè§„åˆ™å°±æ˜¯ç¬¬ä¸€èŠ‚æ±Ÿå‚æ•°é…ç½®æ—¶å€™æåˆ°çš„ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Save the external name servers in resolv.conf in the sandbox&lt;/li&gt;
&lt;li&gt;Add only the embedded serverâ€™s IP to containerâ€™s resolv.conf&lt;/li&gt;
&lt;li&gt;If the embedded server needs any resolv.conf options add it to the current list&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-Go&#34;&gt;libnetwork/sandbox_dns_unix.go

func (sb *sandbox) rebuildDNS() error {
    currRC, err := resolvconf.GetSpecific(sb.config.resolvConfPath)
    if err != nil {
        return err
    }

    // localhost entries have already been filtered out from the list
    // retain only the v4 servers in sb for forwarding the DNS queries
    sb.extDNS = resolvconf.GetNameservers(currRC.Content, types.IPv4)

    var (
        dnsList        = []string{sb.resolver.NameServer()}
        dnsOptionsList = resolvconf.GetOptions(currRC.Content)
        dnsSearchList  = resolvconf.GetSearchDomains(currRC.Content)
    )

    dnsList = append(dnsList, resolvconf.GetNameservers(currRC.Content, types.IPv6)...)

    resOptions := sb.resolver.ResolverOptions()

dnsOpt:
    ...
    dnsOptionsList = append(dnsOptionsList, resOptions...)

    _, err = resolvconf.Build(sb.config.resolvConfPath, dnsList, dnsSearchList, dnsOptionsList)
    return err
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;resolver-setextservers&#34;&gt;resolver.SetExtServers&lt;/h3&gt;

&lt;p&gt;è®¾ç½®embedded DNS serverçš„forward DNS list, å½“embedded DNS serverä¸èƒ½è§£ææŸnameæ—¶ï¼Œå°±ä¼šå°†è¯·æ±‚forwardåˆ°ExtServersã€‚ä»£ç å¾ˆç®€å•ï¼Œä¸å¤šåºŸè¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Go&#34;&gt;libnetwork/resolver.go
func (r *resolver) SetExtServers(dns []string) {
    l := len(dns)
    if l &amp;gt; maxExtDNS {
        l = maxExtDNS
    }
    for i := 0; i &amp;lt; l; i++ {
        r.extDNSList[i].ipStr = dns[i]
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;resolver-setupfunc&#34;&gt;resolver.SetupFunc&lt;/h3&gt;

&lt;p&gt;å¯åŠ¨ä¸¤ä¸ªéšæœºå¯ç”¨ç«¯å£ä½œä¸ºembedded DNS serverï¼ˆ127.0.0.11ï¼‰çš„TCPå’ŒUDP Linstenerã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;libnetwork/resolver.go

func (r *resolver) SetupFunc() func() {
    return (func() {
        var err error

        // DNS operates primarily on UDP
        addr := &amp;amp;net.UDPAddr{
            IP: net.ParseIP(resolverIP),
        }

        r.conn, err = net.ListenUDP(&amp;quot;udp&amp;quot;, addr)
        ...

        // Listen on a TCP as well
        tcpaddr := &amp;amp;net.TCPAddr{
            IP: net.ParseIP(resolverIP),
        }

        r.tcpListen, err = net.ListenTCP(&amp;quot;tcp&amp;quot;, tcpaddr)
        ...
    })
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;resolver-start&#34;&gt;resolver.Start&lt;/h3&gt;

&lt;p&gt;resolver.Startä¸­ä¸¤ä¸ªé‡è¦æ­¥éª¤ï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;setupIPTableè®¾ç½®å®¹å™¨å†…çš„iptables&lt;/li&gt;
&lt;li&gt;å¯åŠ¨dns nameserveråœ¨53ç«¯å£å¼€å§‹æä¾›åŸŸåè§£ææœåŠ¡&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;func (r *resolver) Start() error {
    ...
    if err := r.setupIPTable(); err != nil {
        return fmt.Errorf(&amp;quot;setting up IP table rules failed: %v&amp;quot;, err)
    }
    ...
    tcpServer := &amp;amp;dns.Server{Handler: r, Listener: r.tcpListen}
    r.tcpServer = tcpServer
    go func() {
        tcpServer.ActivateAndServe()
    }()
    return nil
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…ˆæ¥çœ‹çœ‹æ€ä¹ˆè®¾ç½®å®¹å™¨å†…çš„iptablesçš„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func (r *resolver) setupIPTable() error {
    ...
    // è·å–setupFunc()æ—¶çš„ä¸¤ä¸ªæœ¬åœ°éšæœºç›‘å¬ç«¯å£
    laddr := r.conn.LocalAddr().String()
    ltcpaddr := r.tcpListen.Addr().String()

    cmd := &amp;amp;exec.Cmd{
        Path:   reexec.Self(),
        // å°†è¿™ä¸¤ä¸ªç«¯å£ä¼ ç»™setup-resolverå‘½ä»¤å¹¶å¯åŠ¨æ‰§è¡Œ
        Args:   append([]string{&amp;quot;setup-resolver&amp;quot;}, r.sb.Key(), laddr, ltcpaddr),
        Stdout: os.Stdout,
        Stderr: os.Stderr,
    }
    if err := cmd.Run(); err != nil {
        return fmt.Errorf(&amp;quot;reexec failed: %v&amp;quot;, err)
    }
    return nil
}

// initæ—¶å°±æ³¨å†Œsetup-resolverå¯¹åº”çš„handler
func init() {
    reexec.Register(&amp;quot;setup-resolver&amp;quot;, reexecSetupResolver)
}

// setup-resolverå¯¹åº”çš„handlerå®šä¹‰
func reexecSetupResolver() {
    ...
    // å°è£…iptablesæ•°æ®
    _, ipPort, _ := net.SplitHostPort(os.Args[2])
    _, tcpPort, _ := net.SplitHostPort(os.Args[3])
    rules := [][]string{
        {&amp;quot;-t&amp;quot;, &amp;quot;nat&amp;quot;, &amp;quot;-I&amp;quot;, outputChain, &amp;quot;-d&amp;quot;, resolverIP, &amp;quot;-p&amp;quot;, &amp;quot;udp&amp;quot;, &amp;quot;--dport&amp;quot;, dnsPort, &amp;quot;-j&amp;quot;, &amp;quot;DNAT&amp;quot;, &amp;quot;--to-destination&amp;quot;, os.Args[2]},
        {&amp;quot;-t&amp;quot;, &amp;quot;nat&amp;quot;, &amp;quot;-I&amp;quot;, postroutingchain, &amp;quot;-s&amp;quot;, resolverIP, &amp;quot;-p&amp;quot;, &amp;quot;udp&amp;quot;, &amp;quot;--sport&amp;quot;, ipPort, &amp;quot;-j&amp;quot;, &amp;quot;SNAT&amp;quot;, &amp;quot;--to-source&amp;quot;, &amp;quot;:&amp;quot; + dnsPort},
        {&amp;quot;-t&amp;quot;, &amp;quot;nat&amp;quot;, &amp;quot;-I&amp;quot;, outputChain, &amp;quot;-d&amp;quot;, resolverIP, &amp;quot;-p&amp;quot;, &amp;quot;tcp&amp;quot;, &amp;quot;--dport&amp;quot;, dnsPort, &amp;quot;-j&amp;quot;, &amp;quot;DNAT&amp;quot;, &amp;quot;--to-destination&amp;quot;, os.Args[3]},
        {&amp;quot;-t&amp;quot;, &amp;quot;nat&amp;quot;, &amp;quot;-I&amp;quot;, postroutingchain, &amp;quot;-s&amp;quot;, resolverIP, &amp;quot;-p&amp;quot;, &amp;quot;tcp&amp;quot;, &amp;quot;--sport&amp;quot;, tcpPort, &amp;quot;-j&amp;quot;, &amp;quot;SNAT&amp;quot;, &amp;quot;--to-source&amp;quot;, &amp;quot;:&amp;quot; + dnsPort},
    }
    ...

    // insert outputChain and postroutingchain
    ...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨reexecSetupResolver()ä¸­æ¸…æ¥šçš„å®šä¹‰äº†iptablesæ·»åŠ outputChain å’Œpostroutingchainï¼Œå°†åˆ°å®¹å™¨å†…çš„dns queryè¯·æ±‚é‡å®šå‘åˆ°embedded DNS server(127.0.0.11)ä¸Šçš„udp/tcpä¸¤ä¸ªéšæœºå¯ç”¨ç«¯å£ï¼Œembedded DNS server(127.0.0.11)çš„è¿”å›æ•°æ®åˆ™é‡å®šå‘åˆ°å®¹å™¨å†…çš„53ç«¯å£ï¼Œè¿™æ ·å®Œæˆäº†æ•´ä¸ªdns queryè¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡å‹å›¾å¦‚ä¸‹ï¼šÂ 
&lt;img src=&#34;http://img.blog.csdn.net/20170105215440792?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvV2FsdG9uV2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&#34; alt=&#34;è¿™é‡Œå†™å›¾ç‰‡æè¿°&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è´´ä¸€å¼ å®ä¾‹å›¾ï¼šÂ 
&lt;img src=&#34;http://img.blog.csdn.net/20170105215310369?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvV2FsdG9uV2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&#34; alt=&#34;è¿™é‡Œå†™å›¾ç‰‡æè¿°&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.blog.csdn.net/20170105215322635?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvV2FsdG9uV2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&#34; alt=&#34;è¿™é‡Œå†™å›¾ç‰‡æè¿°&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œå…³äºembedded DNS serverçš„æºç åˆ†æå°±ç»“æŸäº†ã€‚å½“ç„¶ï¼Œå…¶ä¸­è¿˜æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œå°±ç•™ç»™è¯»è€…è‡ªå·±èµ°è¯»ä»£ç äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¦åˆ©&#34;&gt;ç¦åˆ©&lt;/h2&gt;

&lt;p&gt;ä»è¯¥æ—¶åºå›¾ä¸­çœ‹çœ‹embedded DNS serverçš„æ“ä½œåœ¨æ•´ä¸ªå®¹å™¨createæµç¨‹ä¸­çš„ä½ç½®ã€‚
&lt;img src=&#34;http://img.blog.csdn.net/20170105215401307?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvV2FsdG9uV2FuZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&#34; alt=&#34;è¿™é‡Œå†™å›¾ç‰‡æè¿°&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>raft consensus algorithm</title>
      <link>http://rootsongjc.github.io/post/raft/</link>
      <pubDate>Mon, 27 Feb 2017 10:47:14 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/post/raft/</guid>
      <description>&lt;p&gt;A wonderful raft consensus algorithm illustation
&lt;a href=&#34;http://thesecretlivesofdata.com/raft/&#34;&gt;here&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TalkingData Annual Meeting</title>
      <link>http://rootsongjc.github.io/presentation/td-annual-meeting/</link>
      <pubDate>Sun, 26 Feb 2017 20:18:54 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/presentation/td-annual-meeting/</guid>
      <description>

&lt;h1 id=&#34;talkingdata-annual-meeting-2017&#34;&gt;TalkingData Annual Meeting 2017&lt;/h1&gt;

&lt;p&gt;Dayin Theater, Beijing Friday, Feb 24, 2017&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017022401.jpeg&#34; alt=&#34;pic1&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017022402.jpeg&#34; alt=&#34;pics2&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Photo by &lt;a href=&#34;http://rootsongjc.github.io&#34;&gt;Jimmy Song&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>My github pages</title>
      <link>http://rootsongjc.github.io/project/my_github_pages/</link>
      <pubDate>Wed, 22 Feb 2017 16:56:04 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/project/my_github_pages/</guid>
      <description>

&lt;h1 id=&#34;my-open-source-project&#34;&gt;My Open Source Project&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://github.com/rootsongjc/magpie&#34;&gt;Magpie&lt;/a&gt; - Magpie is a command line tool for deploying and managing Yarn on Docker cluster.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://github.com/rootsongjc/docker-ipam-plugin&#34;&gt;Docker IPAM plugin&lt;/a&gt; - Docker network plugin to make a L2 flat network.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://rootsongjc.github.io/docker-practice/&#34;&gt;Docker practice&lt;/a&gt; - Docker in practice&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://rootsongjc.github.io/go-practice/&#34;&gt;Go practice&lt;/a&gt; - Go in practice&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://rootsongjc.github.io/linux-practice&#34;&gt;Linux practice&lt;/a&gt; - Linux in practice :)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://rootsongjc.github.com/team-management&#34;&gt;Team management&lt;/a&gt; - About team management&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>