<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  
  <title>MTLS - Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="Jimmy Song&#39;s Blog">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.129.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/en/tags/mtls/" />
  <meta property="og:title" content="MTLS | Jimmy Song" />
  <meta property="twitter:title" content="MTLS | Jimmy Song" />

  
  <meta property="og:description" content="Jimmy Song&#39;s Blog" />
  <meta property="twitter:description" content="Jimmy Song&#39;s Blog" />

  
  <meta property="og:image" content="https://jimmysong.io/images/banner/default.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/default.jpg" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/en">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/blog">Blog</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/book">Book</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/tags">Tags</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/notice">Notice</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/contact">Contact</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/about">About</a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
              
              
                
                
                
                  
                    
                    
                  
                
              
              
              
                
                  
                    
                    <a class="nav-link" href="/tags/mtls/">中文</a>
                    
                  
                
                
                
              
          </li>
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>Search</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>Search</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="Close"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="Input the keyword" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="Input the keyword">
        
        <div class="mt-4">
          <span>Search type: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">All</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">Blog</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">Book</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">Notice</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    MTLS
                </p>
                <p class="page-description">
                    
                </p>
                
            </div>
        </div>
    </div>
</section>

        


<section class="section-sm book-list-section bg-gray">
  <div class="container-xl">
    <div class="row">
      <div class="col-lg-8 order-2 order-lg-1">
        <div class="row">
          
          
          
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/en/blog/microservice-auth-methods/">Detailed Explanation of Common Authentication Methods in Microservices</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               May 22, 2024</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/en/categories/cloud-native"> 
             Cloud Native
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Detailed Explanation of Common Authentication Methods in Microservices', 'This article introduces several common authentication methods in microservices, helping you choose the appropriate authentication scheme when designing and implementing microservice systems.', '\nIn modern microservice architectures, security is a crucial aspect. As the number of microservices increases, ensuring secure communication between services becomes a challenge. This article will introduce several common authentication methods in microservices, helping you choose the appropriate authentication scheme when designing and implementing microservice systems.\n\n## Common Authentication Methods in Microservices\n\nThe table below lists several common authentication methods in microservices, comparing them from the perspectives of advantages, disadvantages, applicable scenarios, and real-world examples.\n\n| Authentication Method | Advantages                    | Disadvantages                  | Deployment Location | Applicable Scenarios       | Typical Uses               | Real-World Examples                             |\n| --------------------- | ----------------------------- | ------------------------------ | ------------------- | -------------------------- | -------------------------- | ---------------------------------------------- |\n| JWT                   | Self-contained token, reduces server load | Larger token size, may increase bandwidth overhead | API Gateway, Between Services | Stateless communication between microservices | User authentication and authorization | User authentication in microservices (e.g., Auth0, Firebase) |\n| OAuth 2.0             | Widely supported, highly flexible | Complex implementation, requires additional interactions | API Gateway | Third-party application authorization | Third-party application access to user data | GitHub OAuth for third-party applications accessing GitHub data and APIs |\n| mTLS                  | High security, prevents man-in-the-middle attacks | Complex certificate management, significant performance overhead | Between Services | Communication requiring high security | Secure communication between sensitive services | Service communication in banking systems |\n| Basic Authentication  | Simple and easy to implement  | Insecure, easily intercepted  | API Gateway, Between Services | Simple API protection | Simple internal services | Basic authentication of Kubernetes API Server |\n| API Key Authentication | Simple and easy to use       | Low security, easily abused   | API Gateway, Between Services | Scenarios with low security requirements | Simple service access control | Various public APIs, such as OpenAI API       |\n\nBelow we will introduce these common authentication methods in detail.\n\n## JWT Authentication\n\nJWT (JSON Web Token) was first proposed by the IETF JSON Web Token (JWT) Working Group and was officially released as the RFC 7519 standard in 2015. The design goal of JWT is to provide a compact and self-contained way to securely transmit information between parties. Due to its ease of use and stateless nature, JWT quickly gained widespread adoption and became one of the standards for identity verification and information exchange, especially in microservices and modern web applications.\n\nThe following diagram shows the JWT authentication process.\n\n\u0060\u0060\u0060mermaid \u0022JWT Authentication Process\u0022\nsequenceDiagram\n    participant User\n    participant Client\n    participant AuthServer\n    participant ResourceServer\n\n    User -\u003e\u003e Client: Provide credentials\n    Client -\u003e\u003e AuthServer: Send credentials to request access token\n    AuthServer -\u003e\u003e Client: Return JWT token\n    Client -\u003e\u003e ResourceServer: Request protected resource (with JWT token)\n    ResourceServer -\u003e\u003e AuthServer: Validate JWT token\n    AuthServer -\u003e\u003e ResourceServer: Validation successful\n    ResourceServer -\u003e\u003e Client: Return protected resource\n\u0060\u0060\u0060\n\n![JWT Authentication Process](a990cb112a1ec1c4d6d7131c1e573e3f.svg)\n\nJWT Authentication Process Explanation:\n\n1. User provides credentials\n2. Client requests access token\n3. Authentication server returns JWT token\n4. Client requests resource server with JWT token\n5. Resource server validates JWT\n\n### JWT Format and Example\n\nA JWT (JSON Web Token) consists of three parts: Header, Payload, and Signature, each encoded with Base64 and concatenated with dots (.).\n\n1. **Header**: The header includes the type of token and the signing algorithm.\n\n   \u0060\u0060\u0060json\n   {\n     \u0022alg\u0022: \u0022HS256\u0022,\n     \u0022typ\u0022: \u0022JWT\u0022\n   }\n   \u0060\u0060\u0060\n\n2. **Payload**: The payload contains claims, which are assertions about the user or other data.\n\n   \u0060\u0060\u0060json\n   {\n     \u0022sub\u0022: \u00221234567890\u0022,\n     \u0022name\u0022: \u0022John Doe\u0022,\n     \u0022iat\u0022: 1516239022\n   }\n   \u0060\u0060\u0060\n\n3. **Signature**: The signature is generated by encoding the header and payload, and signing them with a secret using the algorithm specified in the header.\n\n   \u0060\u0060\u0060\n   HMACSHA256(\n     base64UrlEncode(header) \u002b \u0022.\u0022 \u002b\n     base64UrlEncode(payload),\n     secret\n   )\n   \u0060\u0060\u0060\n\nBelow is an example of a JWT token:\n\n\u0060\u0060\u0060\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\n\u0060\u0060\u0060\n\n## OAuth 2.0\n\nOAuth (Open Authorization) protocol was first proposed by Blaine Cook and Chris Messina in 2006. Initially, the goal was to provide an open authorization standard for Twitter. OAuth 1.0 was released in 2007, offering a standardized way for users to authorize third-party applications to access their resources. However, due to its complex signature mechanism and other security issues, it faced some limitations.\n\nTo overcome these shortcomings, the IETF (Internet Engineering Task Force) established the OAuth Working Group to develop a simpler, more flexible authorization protocol. In 2012, OAuth 2.0 was officially released (RFC 6749 and RFC 6750). OAuth 2.0 simplifies the authorization process, adding multiple authorization modes, such as authorization code mode, implicit mode, resource owner password credentials mode, and client credentials mode.\n\nOAuth 2.0 quickly became an industry standard, widely used in various web services and applications such as Google, Facebook, GitHub, etc. Several extensions and complementary protocols (such as OpenID Connect) emerged based on it, further enhancing OAuth 2.0\u0027s functionality and security.\n\nThe development and expansion of OAuth 2.0 have made it a cornerstone of modern internet authentication and authorization, providing a flexible and secure solution to meet the evolving needs of web applications.\n\nThe following diagram shows the OAuth 2.0 authentication process.\n\n\u0060\u0060\u0060mermaid \u0022OAuth 2.0 Authentication Process\u0022\nsequenceDiagram\n    participant User\n    participant Client\n    participant AuthServer\n    participant ResourceServer\n\n    User -\u003e\u003e Client: Request access to protected resource\n    Client -\u003e\u003e AuthServer: Request authentication (with client ID)\n    AuthServer -\u003e\u003e User: Request user login and authorization\n    User -\u003e\u003e AuthServer: User logs in and authorizes\n    AuthServer -\u003e\u003e Client: Return authorization code\n    Client -\u003e\u003e AuthServer: Exchange authorization code for access token\n    AuthServer -\u003e\u003e Client: Return access token\n    Client -\u003e\u003e ResourceServer: Request protected resource (with access token)\n    ResourceServer -\u003e\u003e Client: Return protected resource\n\u0060\u0060\u0060\n\n![OAuth 2.0 Authentication Process](411d77371072e128ec3bcce199df02a1.svg)\n\nOAuth 2.0 Authentication Process Explanation:\n\n1. User requests access to resource\n2. Client requests authentication\n3. User logs in and authorizes\n4. Authorization server returns authorization code\n5. Client exchanges authorization code for access token\n6. Client requests resource server with access token\n\n### OAuth 2.0 Authorization Code\n\nIn the OAuth 2.0 authorization code mode, the authorization code is a short-term credential obtained by the client from the authorization server after user authorization, used to exchange for an access token. The authorization code is a temporary string that can be passed between the authorization server and the client to obtain a more secure access token.\n\n### OAuth 2.0 Extensions\n\nOAuth 2.0 has developed many extensions to adapt to different scenarios. The table below lists some commonly used extensions, their main functions, and applicable scenarios.\n\n| Extension Name                             | Main Function                                         | Applicable Scenarios                         |\n| ------------------------------------------ | ----------------------------------------------------- | -------------------------------------------- |\n| Authorization Code PKCE Extension          | Enhances the security of the authorization code mode, prevents authorization code interception attacks | Public clients (e.g., mobile apps, single-page apps) |\n| Dynamic Client Registration Protocol       | Allows clients to dynamically register and update client information | Systems requiring high automation and flexibility |\n| Token Introspection                        | Allows resource servers to verify and obtain detailed information about access tokens | Scenarios requiring token validity verification and detailed information |\n| Token Revocation                           | Provides a standard interface for token revocation   | Enhances system security and control         |\n| Device Authorization Grant                 | Allows devices with limited input capabilities to complete authentication via other devices | Devices with limited input capabilities (e.g., smart TVs, game consoles) |\n| Mutual TLS Client Authentication           | Client authentication based on mutual TLS            | High-security application scenarios          |\n| Resource Indicators                        | Allows clients to specify the resource server to access in the authorization request | Support for multiple resource servers        |\n| Step-up Authentication Challenge Protocol  | Allows resource servers to request stronger authentication (e.g., multi-factor authentication) as needed | Advanced authentication for high-risk operations |\n\n### OAuth 2.0 Authorization Process (Using GitHub as an Example)\n\nGitHub uses OAuth 2.\n\n0 to authorize third-party applications to access users\u0027 GitHub data. OAuth 2.0 tokens on GitHub are called \u0022access tokens\u0022 and are used for authentication and authorization to access GitHub APIs. It provides a secure, standardized way for third-party applications to access GitHub resources with user authorization. By using access tokens, applications can perform various operations on behalf of users, such as reading user information, accessing repositories, creating gists, etc. This process ensures user security and privacy while simplifying the authentication and authorization process for applications.\n\nThe detailed process and examples of using GitHub OAuth 2.0 tokens are as follows:\n\n1. **User Authorization**: The user clicks the \u0022Login with GitHub\u0022 button on the third-party application\u0027s interface. The application redirects the user to GitHub\u0027s authorization page.\n   \n2. **Obtain Authorization Code**: The user logs in and agrees to authorize on the GitHub authorization page. GitHub redirects the user back to the application with an authorization code in the URL parameter.\n   \n   Example:\n   \u0060\u0060\u0060\n   https:\/\/yourapp.com\/callback?code=AUTHORIZATION_CODE\n   \u0060\u0060\u0060\n   \n3. **Exchange Access Token**: The application server requests an access token from GitHub\u0027s authorization server using the authorization code.\n   \n   Request Example:\n   \u0060\u0060\u0060bash\n   POST https:\/\/github.com\/login\/oauth\/access_token\n   Content-Type: application\/json\n   Accept: application\/json\n   \n   {\n     \u0022client_id\u0022: \u0022YOUR_CLIENT_ID\u0022,\n     \u0022client_secret\u0022: \u0022YOUR_CLIENT_SECRET\u0022,\n     \u0022code\u0022: \u0022AUTHORIZATION_CODE\u0022,\n     \u0022redirect_uri\u0022: \u0022https:\/\/yourapp.com\/callback\u0022\n   }\n   \u0060\u0060\u0060\n   \n4. **GitHub Returns Access Token**: GitHub validates the request and returns an access token.\n   \n   Response Example:\n   \u0060\u0060\u0060json\n   {\n     \u0022access_token\u0022: \u0022YOUR_ACCESS_TOKEN\u0022,\n     \u0022token_type\u0022: \u0022bearer\u0022,\n     \u0022scope\u0022: \u0022repo,gist\u0022\n   }\n   \u0060\u0060\u0060\n   \n5. **Use Access Token to Access Resources**: The application uses the obtained access token to access the GitHub API.\n   \n   Request Example:\n   \u0060\u0060\u0060bash\n   curl -H \u0022Authorization: token YOUR_ACCESS_TOKEN\u0022 https:\/\/api.github.com\/user\n   \u0060\u0060\u0060\n   \n   Response Example:\n   \u0060\u0060\u0060json\n   {\n     \u0022login\u0022: \u0022github-user\u0022,\n     \u0022id\u0022: 1,\n     \u0022node_id\u0022: \u0022MDQ6VXNlcjE=\u0022,\n     \u0022avatar_url\u0022: \u0022https:\/\/github.com\/images\/avatar.jpg\u0022,\n     \u0022name\u0022: \u0022Github User\u0022,\n     \u0022company\u0022: \u0022GitHub\u0022,\n     \u0022blog\u0022: \u0022https:\/\/example.com\u0022,\n     \u0022location\u0022: \u0022Earth\u0022,\n     \u0022email\u0022: \u0022github-user@example.com\u0022\n   }\n   \u0060\u0060\u0060\n\n### Characteristics and Use of Access Tokens\n\n1. **Scopes**: The scope of an access token\u0027s permissions is specified by the user during authorization and can include reading user profiles, accessing user repositories, managing gists, etc. For example, in the example above, the \u0060scope\u0060 includes \u0060repo\u0060 and \u0060gist\u0060.\n   \n2. **Validity and Refreshing**: Access tokens can be long-term or have a specified time range until the user actively revokes them.\n   \n3. **Secure Transmission**: Access tokens should be transmitted via HTTPS to ensure they are not intercepted.\n\n## mTLS\n\nmTLS (Mutual TLS) is a technology that performs mutual authentication between the client and the server. It originated from the TLS (Transport Layer Security) protocol, the predecessor of which, SSL (Secure Sockets Layer), was developed by Netscape in 1995. With the increasing demand for internet security, TLS gradually evolved into a highly secure communication standard. mTLS further enhances security by requiring mutual authentication between both parties and is widely used in fields with high security requirements such as finance and healthcare.\n\nThe following diagram shows the mTLS authentication process.\n\n\u0060\u0060\u0060mermaid \u0022mTLS Authentication Process\u0022\nsequenceDiagram\n    participant Client\n    participant Server\n\n    Client -\u003e\u003e Server: Client certificate handshake request\n    Server -\u003e\u003e Client: Server certificate handshake request\n    Client -\u003e\u003e Server: Validate server certificate\n    Server -\u003e\u003e Client: Validate client certificate\n    Client -\u003e\u003e Server: Successful handshake, establish secure connection\n    Client -\u003e\u003e Server: Request protected resource\n    Server -\u003e\u003e Client: Return protected resource\n\u0060\u0060\u0060\n\n![mTLS Authentication Process](d05161fb8841d5249d43ef2e697945ab.svg)\n\nmTLS Authentication Process Explanation:\n\n1. Client and server mutually send certificates\n2. Both parties validate each other\u0027s certificates\n3. Establish secure connection\n\nFor more information on TLS and mTLS, please refer to the blog post [How Istio’s mTLS Traffic Encryption Works as Part of a Zero Trust Security Posture](\/en\/blog\/understanding-the-tls-encryption-in-istio\/#what-is-tls-and-mtls).\n\n## Basic Authentication\n\nBasic Authentication is a simple authentication mechanism defined by the HTTP\/1.0 specification (RFC 1945). It involves encoding the username and password with Base64 and appending them to the HTTP request header for authentication. Due to its simplicity and ease of use, Basic Authentication was widely adopted in early web applications. However, because of its inherent security issues (such as plain text transmission being easily intercepted), it is usually used with HTTPS or replaced by more secure authentication methods in modern applications.\n\nThe following diagram shows the Basic Authentication process.\n\n\u0060\u0060\u0060mermaid \u0022Basic Authentication Process\u0022\nsequenceDiagram\n    participant User\n    participant Client\n    participant ResourceServer\n\n    User -\u003e\u003e Client: Provide username and password\n    Client -\u003e\u003e ResourceServer: Request protected resource (with username and password)\n    ResourceServer -\u003e\u003e Client: Validate username and password\n    ResourceServer -\u003e\u003e Client: Return protected resource\n\u0060\u0060\u0060\n\n![Basic Authentication Process](cbaf0077dcd99163587797e51fe49518.svg)\n\nBasic Authentication Process Explanation:\n\n1. User provides username and password\n2. Client requests resource server with username and password\n3. Resource server validates\n\n### Basic Authentication Example\n\nBasic Authentication uses a Base64-encoded username and password for authentication. Below is an example of a Basic Authentication request using the \u0060curl\u0060 command:\n\n\u0060\u0060\u0060bash\ncurl -u \u003cusername\u003e:\u003cpassword\u003e https:\/\/api.example.com\/data\n\u0060\u0060\u0060\n\nIf the username is \u0060admin\u0060 and the password is \u0060password123\u0060, the request example is as follows:\n\n\u0060\u0060\u0060bash\ncurl -u admin:password123 https:\/\/api.example.com\/data\n\u0060\u0060\u0060\n\n## API Key Authentication\n\nAPI Key Authentication is a method of authenticating by including a pre-assigned unique key in the request. It became popular in the early 2000s with the rise of web APIs. Due to its simplicity and ease of management, API Key Authentication is widely used in various public and private APIs. Although it has lower security and is easily abused, it is still an effective means of access control in many scenarios, especially for applications that do not require high security protection.\n\nThe following diagram shows the API Key Authentication process.\n\n\u0060\u0060\u0060mermaid \u0022API Key Authentication Process\u0022\nsequenceDiagram\n    participant Client\n    participant ResourceServer\n\n    Client -\u003e\u003e ResourceServer: Request protected resource (with API Key)\n    ResourceServer -\u003e\u003e Client: Validate API Key\n    ResourceServer -\u003e\u003e Client: Return protected resource\n\u0060\u0060\u0060\n\n![API Key Authentication Process](373df547422133ea5ba42e7321c3f5d4.svg)\n\nAPI Key Authentication Process Explanation:\n\n1. Client requests resource server with API Key \n2. Resource server validates API Key\n\n### API Key Example\n\nAn API Key is a unique identifier passed in the request for client authentication. API Keys are typically passed through HTTP request headers or URL parameters.\n\nExample of API Key in HTTP request header:\n\n\u0060\u0060\u0060bash\ncurl -H \u0022Authorization: ApiKey YOUR_API_KEY\u0022 https:\/\/api.example.com\/data\n\u0060\u0060\u0060\n\nExample of API Key in URL parameter:\n\n\u0060\u0060\u0060bash\ncurl https:\/\/api.example.com\/data?api_key=YOUR_API_KEY\n\u0060\u0060\u0060\n\nAn API Key is usually a string containing letters and numbers, for example:\n\n\u0060\u0060\u0060\n1234567890abcdef1234567890abcdef\n\u0060\u0060\u0060\n\n## Summary\n\nChoosing the right authentication method in a microservice architecture is crucial. Different authentication methods have their advantages and disadvantages in terms of security, complexity, and applicable scenarios. This article introduced five common authentication methods: JWT, OAuth 2.0, mTLS, Basic Authentication, and API Key Authentication, and provided their advantages, disadvantages, and applicable scenarios. Additionally, other common authentication methods such as SAML, LDAP, Kerberos, and OpenID Connect are also widely used in various internet application scenarios, especially in single sign-on and cross-domain authentication. I hope this information will help you choose the most suitable authentication scheme when designing and implementing microservice systems.\n', '\/en\/blog\/microservice-auth-methods\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">This article introduces several common authentication methods in microservices, helping you choose the appropriate authentication scheme when designing and implementing microservice systems.</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/en/blog/primary-remote-istio-ingress-gateway-mtls/">Deciphering Istio Multi-Cluster Authentication &amp; mTLS Connection</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               Jan 16, 2024</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/en/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('Deciphering Istio Multi-Cluster Authentication \u0026 mTLS Connection', 'This blog deeply analyzes the initial authentication and mTLS connection process of remote gateways in Istio\u0027s primary-remote deployment mode.', '\n## Introduction\n\nI often answer questions on [Istio\u0027s GitHub Discussions](https:\/\/github.com\/istio\/istio\/discussions), and recently, I came across a [discussion](https:\/\/github.com\/istio\/istio\/discussions\/48343) about Istio\u0027s primary-remote deployment, specifically regarding how the remote cluster\u0027s gateway initially authenticates to an external Istiod instance. This issue touches upon the core security mechanisms of service meshes in multi-cluster configurations, which I think merits more in-depth sharing in the community.\n\nIn the official Istio documentation on [Installing Primary-Remote on different networks](https:\/\/istio.io\/latest\/docs\/setup\/install\/multicluster\/primary-remote_multi-network\/), one of the steps is to [attach cluster2 as a remote cluster of cluster1](https:\/\/istio.io\/latest\/docs\/setup\/install\/multicluster\/primary-remote_multi-network\/#attach-cluster2-as-a-remote-cluster-of-cluster1). This process creates a Secret containing a kubeconfig configuration, which includes the certificates and tokens required to access the remote cluster (cluster2).\n\n\u0060\u0060\u0060yaml\n# This file is autogenerated, do not edit.\napiVersion: v1\nkind: Secret\nmetadata:\n  annotations:\n    networking.istio.io\/cluster: cluster2\n  creationTimestamp: null\n  labels:\n    istio\/multiCluster: \u0022true\u0022\n  name: istio-remote-secret-cluster2\n  namespace: istio-system\nstringData:\n  cluster2: |\n    apiVersion: v1\n    clusters:\n    - cluster:\n        certificate-authority-data: {CERTIFICATE}\n        server: {CLUSTER2-APISERVER-ADDRESS}\n      name: cluster2\n    contexts:\n    - context:\n        cluster: cluster2\n        user: cluster2\n      name: cluster2\n    current-context: cluster2\n    kind: Config\n    preferences: {}\n    users:\n    - name: cluster2\n      user:\n        token: {TOKEN}\n\u0060\u0060\u0060\n\nThe key role of this Secret is to enable Istio in the primary cluster (cluster1) to access the API server of the remote cluster, thereby obtaining service information. Additionally, in the remote cluster (cluster2), the Istiod service points to the primary cluster\u0027s Istiod service\u0027s LoadBalancer IP (ports 15012 and 15017), allowing cluster2 to communicate with the primary cluster\u0027s Istiod.\n\n## Visualizing Authentication\n\nSince both clusters share a CA (provided by the primary cluster) and the remote cluster can access its own API server, the Istiod in the primary cluster can validate requests from the remote cluster (cluster2). The following sequence diagram clearly shows this process:\n\n\u0060\u0060\u0060mermaid\nsequenceDiagram\n    participant IG as Ingress Gateway (Remote Cluster)\n    participant K8s as Kubernetes API (Remote Cluster)\n    participant SA as Service Account (Remote Cluster)\n    participant Istiod as Istiod (Primary Cluster)\n\n    Note over IG: Startup\n    IG-\u003e\u003eK8s: Request Service Account Token\n    K8s-\u003e\u003eSA: Create\/Retrieve Token\n    SA--\u003e\u003eIG: Return Token\n    Note over IG: Token Mounted in Pod\n\n    IG-\u003e\u003eIstiod: Authenticate with Token\n    Note over Istiod: Validate Token\n    Istiod-\u003e\u003eIstiod: Generate mTLS Certificates\n    Istiod--\u003e\u003eIG: Send mTLS Certificates\n\n    Note over IG: Use mTLS Certificates for Secure Communication in Mesh\n\u0060\u0060\u0060\n\n![Mermaid Diagram](72dd4a02f2175fd6f9cc1128148b0bf7.svg)\n\n\n\nThis process is a key component of Istio\u0027s multi-cluster configuration, ensuring secure cross-cluster communication within the service mesh. As seen in this discussion, both the remote gateway and the services depend on the primary cluster\u0027s CA for initial mTLS authentication, providing a solid foundation for secure communication across the entire service mesh.\n\n## Conclusion\n\nIn this blog, we explored how the gateway in a remote cluster initially authenticates to an external Istiod in Istio\u0027s primary-remote deployment. We explained how to create a Secret containing a kubeconfig to allow Istio in the primary cluster to access the remote cluster\u0027s API and how shared CA and service account tokens ensure the security of mTLS authentication. This process secures cross-cluster communication within the service mesh, providing key insights for understanding and implementing Istio\u0027s multi-cluster configuration.\n\n---\n\n*This blog was initially published at [tetrate.io](https:\/\/tetrate.io\/blog\/istio-multi-cluster-authentication-mtls\/).*', '\/en\/blog\/primary-remote-istio-ingress-gateway-mtls\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">This blog deeply analyzes the initial authentication and mTLS connection process of remote gateways in Istio&#39;s primary-remote deployment mode.</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
              <div class="col-sm-6 mb-3">
  <article class="card rounded-0 border-bottom border-primary border-top-0 border-left-0 border-right-0 hover-shadow">
    
    
    <div class="card-body blog-list-card-body">
      <p class="card-title"><a href="/en/blog/understanding-the-tls-encryption-in-istio/">How Istio’s mTLS Traffic Encryption Works as Part of a Zero Trust Security Posture</a></p>
      
      <div class="blog-list-metadata">
          <ul class="list-inline">
             
             <li class="list-inline-item mr-2 mb-md-0"><i class="fa-regular fa-calendar"></i>
               Dec 24, 2022</li>
             <li class="list-inline-item mr-2 md-md-0"><i class="fa-regular fa-folder-open"></i>
             
             <a href="/en/categories/istio"> 
             Istio
             </a>
             
             </li>
             
             <li class="list-inline-item mr-2 mb-md-0">
              

             </li>
             
             <li class="list-inline-item mr-2 mb-md-0 export-button" style="display: none;">
              <a href="#" onclick="exportToMarkdown('How Istio’s mTLS Traffic Encryption Works as Part of a Zero Trust Security Posture', 'This article introduces TLS and mTLS, and describes how to enable mTLS in Istio and its application scenarios.', '\nThe Istio service mesh offers cloud native deployments a standard way to implement automatic [mutual transport layer security (mTLS)](https:\/\/en.wikipedia.org\/wiki\/Mutual_authentication#mTLS). This reduces the attack surface of network communication by using strong identities to establish encrypted channels between workloads within the mesh that are both confidential and tamper-resistant. mTLS is a key component for building zero-trust application networks. To understand mTLS traffic encryption in Istio, this article will cover the following:\n\n- An overview of TLS, mTLS, and TLS termination\n- An introduction to howTLS encryption works in Istio\n- How to use Istio to implement mTLS in Kubernetes\n- A discussion of when you do and don’t need mTLS\n\n## What Is TLS and mTLS?\n\nTLS, the successor to Secure Sockets Layer (SSL), is a widely adopted security protocol used to create authenticated and encrypted connections between networked computers. For this reason, people often use the terms TLS and SSL interchangeably. In this article, we will refer to them collectively as TLS. TLS 1.0 was released in 1999, and the latest version is 1.3 (released in August 2018); versions 1.0 and 1.1 are deprecated.\n\nThe HTTPS we see when browsing the web uses TLS, as shown in Figure 1, which is built on top of TCP as the session layer in the OSI model. To ensure compatibility, TLS usually uses port 443, but you can use any port you want.\n\n![Figure 1: HTTP vs. HTTPS](http-vs-https.svg)\n\nTLS encryption is required when a client needs to confirm the identity of the server in order to guard against man-in-the-middle attacks and ensure communication security. Figure 2 shows how TLS-encrypted communication proceeds.\n\n![Figure 2: simplified TLS handshake flow](tls-flow.svg)\n\n1. The server applies for and obtains a certificate (X.509 certificate) from a trusted [certificate authority](https:\/\/en.wikipedia.org\/wiki\/Certificate_authority) (CA).\n2. A request from the client to the server containing information such as the TLS version and password combination supported by the client.\n3. The server responds to the client request and attaches a digital certificate.\n4. The client verifies the status, validity, and digital signature of the certificate and confirms the identity of the server.\n5. Encrypted communication commences between the client and the server using a shared private key.\n\nThe above is only an outline description of the TLS communication flow. If you’re interested in the details, please see [this in-depth discussion of the complete TLS handshake process.](https:\/\/www.cloudflare.com\/learning\/ssl\/what-happens-in-a-tls-handshake\/)\n\nFrom the above process, you will find that the certificate is the critical element representing the server’s identity. The server must use a certificate issued by an authoritatively certified CA in order to provide public services over the Internet. In contrast, you can manage certificates using your own public key infrastructure (PKI) for services inside of a private environment.\n\nMutual TLS, also referred to as mTLS, is the use of a two-way encrypted channel between a server and a client that necessitates certificate exchange and identity authentication between the parties.\n\n## What Is TLS Termination?\n\nTLS termination is the process of decrypting TLS-encrypted traffic before it is forwarded to a web server. Offloading TLS traffic to an ingress gateway or specialized device improves web application performance while securing encrypted traffic. TLS termination is typically implemented at cluster ingress. All communication between the ingress and servers in the cluster will be conducted directly over HTTP in plaintext, enhancing service performance.\n\n![Figure 3: TLS termination](tls-termination.svg)\n\nBy default, Istio enables mTLS for mesh-based services and ends TLS at the ingress gateway. Furthermore, you can pass through traffic to back-end services for processing.\n\n\u0060\u0060\u0060yaml\napiVersion: networking.istio.io\/v1beta1\nkind: Gateway\nmetadata:\n  name: sample-gateway\nspec:\n  servers:\n  - port:\n      number: 443\n      name: https\n      protocol: HTTPS\n    tls:\n      mode: PASSTHROUGH\n\u0060\u0060\u0060\n\nSee [Gateway TLS Configuration](https:\/\/istio.io\/latest\/docs\/ops\/configuration\/traffic-management\/tls-configuration\/#gateways) for details.\n\n## How to Implement Automatic mTLS in Istio\n\nFigure 4 depicts the security architecture of Istio. This figure clearly shows that at the entry point, JSON Web Token (JWT) \u002b TLS authentication and encryption are used, and that mTLS is enabled between all services within the Istio mesh.\n\n![Istio 安全架构图](istio-security.svg)\n\nIstio includes a built-in CA, and [Secret Discovery Service (SDS)](https:\/\/www.envoyproxy.io\/docs\/envoy\/latest\/configuration\/security\/secret)—one of the discovery services in Envoy [xDS](https:\/\/www.envoyproxy.io\/docs\/envoy\/latest\/api-docs\/xds_protocol)—enables the issuance and rotation of SVID certificates. The mTLS flow in the Istio mesh is as follows:\n\n1. The sidecar of every service requests a certificate from Istiod on behalf of the workload at startup, and Istiod issues the [SVID](https:\/\/spiffe.io\/docs\/latest\/spiffe-about\/spiffe-concepts\/#spiffe-verifiable-identity-document-svid) certificate (the process is more complex, and I will explain it in a future blog).\n2. The sidecar of every workload intercepts all client requests within the pod.\n3. The client sidecar starts an mTLS handshake with the server sidecar. During the handshake, the [JWT](https:\/\/www.envoyproxy.io\/docs\/envoy\/latest\/intro\/arch_overview\/security\/jwt_authn_filter) and [authentication filter](https:\/\/www.envoyproxy.io\/docs\/envoy\/latest\/intro\/arch_overview\/security\/ext_authz_filter) in the client sidecar will authenticate the identity of the request, and store the identity in the filter metadata after the authentication. Then the request will go through the authorization filter to determine if the request is allowed.\n4. If the request is authenticated and authorized, the client and the server start to establish a connection for communication.\n\nIn Istio, authentication and authorization between services can be configured using one of three resource objects:\n\n- **[RequestAuthentication](https:\/\/istio.io\/latest\/docs\/reference\/config\/security\/request_authentication\/):** To specify the service’s only currently supported request-level authentication method, JWT.\n- **[PeerAuthentication](https:\/\/istio.io\/latest\/docs\/reference\/config\/security\/peer_authentication\/):** To enable mTLS or plaintext requests, set the transport authentication mode.\n- **[AuthorizationPolicy](https:\/\/istio.io\/latest\/docs\/reference\/config\/security\/authorization-policy\/):** To specify who can do what when traffic between services is authorized? For instance, subject A either permits (ALLOW) or forbids (DENY) traffic from subject B.\n\n## How to Enable Automatic mTLS in Istio\n\nIn PeerAuthentication, you can specify the mTLS mode that will be used for the target workload. Peer authentication is supported in the following modes:\n\n- PERMISSIVE: The workload’s default setting that allows it to accept either mTLS or plain text traffic.\n- STRICT: The workload accepts only mTLS traffic.\n- DISABLE: Disable mTLS. From a security perspective, mTLS should not be disabled unless you have your own security solution.\n- UNSET: Inherited from the parent, with the following priority: service specific \u003e namespace scope \u003e mesh scope setting.\n\nIstio’s peer authentication uses *PERMISSIVE* mode by default, automatically sending *mTLS* traffic to these workloads and clear text traffic to workloads without a sidecar. After including Kubernetes services in the Istio mesh, we can use *PERMISSIVE* mode first to prevent services from failing *mTLS*. We can use one of two ways to enable strict mTLS mode for certain services:\n\n- Use PeerAuthentication to define how traffic is transferred between sidecars.\n- Use DestinationRule to define the TLS settings in the traffic routing policy.\n\nThe reviews service’s mTLS configuration in the default namespace can be seen in the example below.\n\n### Use PeerAuthentication to Set mTLS for Workloads\n\nFor instance, the following configuration can be used to specify that a workload under a namespace has strict mTLS enabled.\n\n\u0060\u0060\u0060yaml\napiVersion: security.istio.io\/v1beta1\nkind: PeerAuthentication\nmetadata:\n  name: foo-peer-policy\n  namespace: default\nspec:\n  selector:\n    matchLabels:\n      app: reviews\n  mtls:\n    mode: STRICT\n\u0060\u0060\u0060\n\nAccording to the [Istio documentation](https:\/\/istio.io\/latest\/docs\/tasks\/security\/authentication\/mtls-migration\/), you can also enable strict mTLS for all services in the mesh by configuring strict mTLS for the namespace istio-system where Istio is installed.\n\n### Use DestinationRule to Set up mTLS for Workloads\n\nTraffic routing policies, such as load balancing, anomaly detection, TLS settings, etc., are set using DestinationRule. In the TLS settings, there are various modes. As shown below, use ISTIO_MUTUAL mode to enable Istio’s workload-based automatic TLS.\n\n\u0060\u0060\u0060yaml\napiVersion: networking.istio.io\/v1beta1\nkind: DestinationRule\nmetadata:\n  name: reviews\n  namespace: default\nspec:\n  host: reviews\n  trafficPolicy:\n    tls:\n      mode: ISTIO_MUTUAL\n\u0060\u0060\u0060\n\n## When Should You Use mTLS?\n\nThe short answer is that you should use mTLS for network communication between application components that you have some control over—like between microservices in a cluster.\n\nOne-way TLS is typically used by Internet clients to connect to Web services, which means that only the server needs to show identification and is unconcerned with the identity of the client. One-way TLS allows you to use passwords, tokens, two-factor authentication, and other methods when you need to confirm the identity of the client. However, when using a service mesh, mTLS operates outside the application and doesn’t require many changes to the application logic, whereas such an authentication method requires internal application support.\n\nAs you can see from the example above, mTLS implementation calls for certificate exchange between services. As the number of services rises, managing numerous certificates becomes a laborious task. You can implement automatic mTLS and fix the certificate management issue with the aid of a service mesh.\n\n## When Shouldn’t You Use mTLS?\n\nAlthough mTLS is the preferred protocol for securing inter-service communication in cloud-native applications, implementing mTLS necessitates a more complex, symmetric encryption and decryption process than one-way TLS. In some cases where there is high traffic volume or CPU utilization must be optimized, terminatingTLS at the traffic entry point and turning on mTLS internally for specific services only can help minimize request response times and decrease compute resource consumption for some traffic with lower security levels.\n\nAdditionally, it is necessary to [disable probe rewriting for pods](https:\/\/istio.io\/latest\/docs\/ops\/configuration\/mesh\/app-health-check\/#disable-the-http-probe-rewrite-for-a-pod) when using services that cannot obtain certificates, such as health checks performed via HTTP on Kubelet and the inability to access the service’s health check endpoint via TLS.\n\nFinally, when mesh services access some external services, mTLS is also not necessary.\n\n## Summary\n\nmTLS is a crucial component of creating a zero-trust application network, which makes it possible to encrypt traffic within the mesh. Istio makes it simple to enable automatic mTLS for Kubernetes services, doing away with the need to manage certificates. At the same time, we can selectively enable mTLS for a subset of the mesh’s services, enabling us to move services from Kubernetes to the mesh. In a subsequent blog, we’ll go into more detail about Istio’s certificate management system. Stay tuned.\n\n---\n\nIf you’re new to service mesh and Kubernetes security, we have a bunch of free online courses [available at Tetrate Academy](https:\/\/tetr8.io\/academy) that will quickly get you up to speed with Istio and Envoy.\n\nIf you’re looking for a fast way to get to production with Istio, check out [Tetrate Istio Distribution (TID)](https:\/\/tetr8.io\/tid). TID is Tetrate’s hardened, fully upstream Istio distribution, with FIPS-verified builds and support available. It’s a great way to get started with Istio knowing you have a trusted distribution to begin with, have an expert team supporting you, and also have the option to get to FIPS compliance quickly if you need to.Once you have Istio up and running, you will probably need simpler ways to manage and secure your services beyond what’s available in Istio, that’s where Tetrate Service Bridge comes in. You can learn more about how Tetrate Service Bridge makes service mesh more secure, manageable, and resilient [here](https:\/\/tetr8.io\/tsb), or [contact us for a quick demo](https:\/\/tetr8.io\/contact).\n\n*This blog was originally published at [tetrate.io](https:\/\/tetrate.io\/blog\/how-istios-mtls-traffic-encryption-works-as-part-of-a-zero-trust-security-posture\/).*\n', '\/en\/blog\/understanding-the-tls-encryption-in-istio\/')">
                <i class="fas fa-file-download"></i>
              </a>
             </li>
          </ul>
      </div>
      <p class="card-text">This article introduces TLS and mTLS, and describes how to enable mTLS in Istio and its application scenarios.</p>
    </div>
  </article>
</div>


<script>
  function convertImageLinks(rawContent, permalink) {
      
      const baseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const blogPath = permalink.replace(/^\/|\/$/g, ''); 
      return rawContent.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(match, altText, relativePath) {
          
          if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
              return match; 
          }
          return `![${altText}](${baseUrl}${blogPath}/${relativePath})`;
      });
  }
  
  function convertRelativeLinks(rawContent) {
      
      const domain = 'https://jimmysong.io'; 
      return rawContent.replace(/\[([^\]]+)\]\((\/[^)]+)\)/g, function(match, linkText, relativePath) {
          return `[${linkText}](${domain}${relativePath})`;
      });
  }
  
  function exportToMarkdown(title, description, rawContent, permalink) {
      const githubBaseUrl = 'https://raw.githubusercontent.com/rootsongjc/rootsongjc.github.io/master/'; 
      const filename = title + '.md';
  
      
      const convertedContent = convertImageLinks(rawContent, permalink);
      
      
      const contentWithLinks = convertRelativeLinks(convertedContent);
  
      
      const contentWithHeader = `> ${description}\n>\n> 阅读原文请转到：https://jimmysong.io${permalink}\n${contentWithLinks}`;
  
      
      const contentWithFooter = `${contentWithHeader}\n\n---\n`;
  
      
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/markdown;charset=utf-8,' + encodeURIComponent(contentWithFooter));
      element.setAttribute('download', filename);
  
      element.style.display = 'none';
      document.body.appendChild(element);
  
      element.click();
  
      document.body.removeChild(element);
  }
  
  
  if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
      document.querySelectorAll('.export-button').forEach(function(button) {
          button.style.display = 'inline';
      });
  }
</script>
          
          <div class="col-12">
 
 
 
 
 
 
 
 
 
 
 
</div>

        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 order-1 order-lg-2 d-none d-sm-block">
          <div class="sidebar">
          <!-- categories -->
<div class="blog-categories mb-4">
  <p class="sidebar-title">
      Columns
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/en/categories/istio" class="sidebar-item">
            <span>Istio</span>
            <span>(44)</span>
        </a>
      
        <a href="/en/categories/service-mesh" class="sidebar-item">
            <span>Service Mesh</span>
            <span>(11)</span>
        </a>
      
        <a href="/en/categories/cloud-native" class="sidebar-item">
            <span>Cloud Native</span>
            <span>(5)</span>
        </a>
      
        <a href="/en/categories/envoy" class="sidebar-item">
            <span>Envoy</span>
            <span>(5)</span>
        </a>
      
        <a href="/en/categories/essays" class="sidebar-item">
            <span>Essays</span>
            <span>(5)</span>
        </a>
      
        <a href="/en/categories/ai" class="sidebar-item">
            <span>AI</span>
            <span>(2)</span>
        </a>
      
        <a href="/en/categories/kubernetes" class="sidebar-item">
            <span>Kubernetes</span>
            <span>(2)</span>
        </a>
      
        <a href="/en/categories/open-source" class="sidebar-item">
            <span>Open Source</span>
            <span>(2)</span>
        </a>
  </div>
</div>

<div class="blog-categories mb-4">
  <p class="sidebar-title">
      Book
  </p>
  
  
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
        
      
      
  
  <div class="bg-gray">
      
        <a href="/en/categories/translation" class="sidebar-item">
            <span>Translation</span>
            <span>(6)</span>
        </a>
      
        <a href="/en/categories/original" class="sidebar-item">
            <span>Original</span>
            <span>(2)</span>
        </a>
  </div>
</div>





          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">Contact</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">Jimmy&rsquo;s LinkedIn</li>
            
            
            <li class="mb-4"><img src="/images/jimmysong-linkedin.png" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">Blog</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/blog/istio-configuration-safety-common-misconfigurations/">Istio Configuration Security: How to Avoid Misconfigurations</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/kubecon-china-2024-recap/">KubeCon China 2024 Recap: Leading the Frontiers of Cloud Native Technology</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/service-mesh-data-plane-deployment-modes/">In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">links</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" >
                  Awesome Cloud Native
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://gateway.envoyproxy.io" target="_blank" rel="noopener noreferrer">
                  Envoy Gateway
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io" target="_blank" rel="noopener noreferrer">
                  Istio
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate - Service Mesh Company
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://docs.tetrate.io/istio-subscription/" target="_blank" rel="noopener noreferrer">
                  Tetrate Istio Subscription
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">Courses</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals" target="_blank" rel="noopener noreferrer">
                  Envoy Fundamentals
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals" target="_blank" rel="noopener noreferrer">
                  Istio Fundamentals
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">new notice</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/notice/kubecon-china-2024-panel/">KubeCon China 2024 panel Preview: Istio and Modern API Gateways – Leading the Future of Service Mesh</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/website-revamp-notice/">Website Revamp Notice</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/kubecon-eu-2024/">See you in KubeCon Paris!</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song All Right Reserved</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/en/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/en/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>









<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>






  





<script src="/js/wowchemy-search.min.ce03c611044441cf6e84f9e4bef20818.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
