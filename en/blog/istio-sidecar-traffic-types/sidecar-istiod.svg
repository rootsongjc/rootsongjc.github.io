<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" width="1192" height="852" version="1.1" viewBox="-647 -52 1192 852"><defs><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="20" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="16" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><marker id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-1 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 4.8 0 L 0 -1.8 L 0 1.8 Z"/></g></marker><font-face x-height="517" ascent="951.996" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="16" font-weight="400" panose-1="2 0 5 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue"/></font-face-src></font-face><font-face x-height="523" ascent="966.995" cap-height="721" descent="-212.997" font-family="Helvetica Neue" font-size="16" font-weight="300" panose-1="2 0 4 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Light"/></font-face-src></font-face></defs><metadata>Produced by OmniGraffle 7.11.5</metadata><g id="11__sidecar-istiod" fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"><title>11. sidecar-istiod</title><rect width="1192" height="852" x="-647" y="-52" fill="#fff"/><g id="11__sidecar-istiod: 类型1"><title>类型1</title><g id="Graphic_77"><rect width="1190.551" height="850.394" x="-646.299" y="-51.083" fill="#fff"/></g><g id="Graphic_34"><rect width="846.142" height="747.587" x="-348.661" y=".321" fill="#ccc" fill-opacity=".298"/><rect width="846.142" height="747.587" x="-348.661" y=".321" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-343.66142 718.32734)"><tspan x="740.602" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Local Pod</tspan></text></g><g id="Graphic_35"><rect width="224.5" height="53" x="-256.535" y="28.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="28.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 45.1144)"><tspan x="53.778" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">PREROUTING</tspan></text></g><g id="Graphic_36"><rect width="224.5" height="53" x="-256.535" y="117.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="117.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 134.1144)"><tspan x="82.81" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">INPUT</tspan></text></g><g id="Graphic_37"><rect width="224.5" height="53" x="-256.535" y="206.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="206.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 223.1144)"><tspan x="74.058" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">OUTPUT</tspan></text></g><g id="Graphic_38"><rect width="224.5" height="53" x="-256.535" y="295.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="295.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 312.1144)"><tspan x="48.434" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">POSTROUTING</tspan></text></g><g id="Graphic_39"><rect width="224.5" height="53" x="-256.535" y="384.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="384.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 401.1144)"><tspan x="44.298" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_INBOUND</tspan></text></g><g id="Graphic_40"><rect width="224.5" height="53" x="-256.535" y="473.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="473.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 490.1144)"><tspan x="28.914" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_IN_REDIRECT</tspan></text></g><g id="Graphic_41"><rect width="224.5" height="53" x="-256.535" y="568.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="568.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 585.1144)"><tspan x="49.034" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_OUTPUT</tspan></text></g><g id="Graphic_42"><rect width="224.5" height="53" x="-256.535" y="663.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="663.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 680.1144)"><tspan x="41.202" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_REDIRECT</tspan></text></g><g id="Graphic_43"><rect width="165" height="84" x="-609.449" y="264.346" fill="#ccc"/><rect width="165" height="84" x="-609.449" y="264.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-553.5888 294.0564)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Istiod</tspan></text></g><g id="Graphic_44"><rect width="145.99" height="615" x="111.969" y="66.614" fill="#ccc"/><rect width="145.99" height="615" x="111.969" y="66.614" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(148.6733 71.61417)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Sidecar</tspan> <tspan x="9.24" y="44.58" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Proxy</tspan></text></g><g id="Graphic_45"><rect width="121" height="615" x="327.402" y="66.614" fill="#ccc"/><rect width="121" height="615" x="327.402" y="66.614" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(334.05158 349.53403)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Application</tspan> <tspan x="7" y="44.58" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Container</tspan></text></g><g id="Line_48"><line x1="-256.535" x2="-431.549" y1="306.346" y2="306.346" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_52"><line x1="124.522" x2="-19.135" y1="232.846" y2="232.846" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_53"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -256.53544 232.84646 L -297.807 232.84646 L -297.807 596.65215 L -269.43544 596.65215"/></g><g id="Graphic_56"><path fill="#333" d="M -383.63252 292.12246 L -383.63252 292.12246 C -378.41454 292.12246 -374.18452 296.35247 -374.18452 301.57046 L -374.18452 311.12246 C -374.18452 316.34044 -378.41454 320.57046 -383.63252 320.57046 L -383.63252 320.57046 C -388.8505 320.57046 -393.08052 316.34044 -393.08052 311.12246 L -393.08052 301.57046 C -393.08052 296.35247 -388.8505 292.12246 -383.63252 292.12246 Z"/><text fill="#fff" transform="translate(-388.08052 297.12246)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">7</tspan></text></g><g id="Graphic_60"><path fill="#333" d="M 75.14394 218.62246 L 75.14394 218.62246 C 80.36193 218.62246 84.59194 222.85247 84.59194 228.07046 L 84.59194 237.62246 C 84.59194 242.84044 80.36193 247.07046 75.14394 247.07046 L 75.14394 247.07046 C 69.92595 247.07046 65.69594 242.84044 65.69594 237.62246 L 65.69594 228.07046 C 65.69594 222.85247 69.92595 218.62246 75.14394 218.62246 Z"/><text fill="#fff" transform="translate(70.69594 223.62246)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">1</tspan></text></g><g id="Graphic_61"><path fill="#333" d="M -297.807 376.27512 L -297.807 376.27512 C -292.58903 376.27512 -288.35902 380.50514 -288.35902 385.72312 L -288.35902 395.2751 C -288.35902 400.4931 -292.58903 404.7231 -297.807 404.7231 L -297.807 404.7231 C -303.025 404.7231 -307.255 400.4931 -307.255 395.2751 L -307.255 385.72312 C -307.255 380.50514 -303.025 376.27512 -297.807 376.27512 Z"/><text fill="#fff" transform="translate(-302.255 381.27512)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">2</tspan></text></g><g id="Graphic_65"><text fill="#000" transform="translate(-604.4488 5.320865)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Sidcar -&gt; Istiod</tspan></text></g><g id="Line_71"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -32.035435 594.84646 L -.10005423 594.84646 L -.10005423 323.7415 L -19.275388 323.7415"/></g><g id="Graphic_72"><path fill="#333" d="M -.10005423 445.43444 L -.10005423 445.43444 C 5.117932 445.43444 9.347946 449.66445 9.347946 454.88244 L 9.347946 464.43444 C 9.347946 469.6524 5.117932 473.88244 -.10005423 473.88244 L -.10005423 473.88244 C -5.3180405 473.88244 -9.548054 469.6524 -9.548054 464.43444 L -9.548054 454.88244 C -9.548054 449.66445 -5.3180405 445.43444 -.10005423 445.43444 Z"/><text fill="#fff" transform="translate(-4.5480543 450.43444)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">6</tspan></text></g><g id="Graphic_73"><rect width="57.696" height="29.464" x="-28.948" y="474.144" fill="#eff0ef"/><text fill="#000" transform="translate(-23.948055 479.1438)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Rule 4</tspan></text></g><g id="Graphic_80"><text fill="#000" fill-opacity=".5" transform="translate(-604.4488 700.4434)"><tspan x=".792" y="15" fill="#000" fill-opacity=".5" font-family="Helvetica Neue" font-size="16" font-weight="300">https://jimmysong.io</tspan> <tspan x="0" y="39" fill="#000" fill-opacity=".5" font-family="Helvetica Neue" font-size="16" font-weight="300">Version: 2022-05-12</tspan></text></g><g id="Graphic_85"><title>Rectangle</title><rect width="121" height="350.067" x="124.404" y="312.272" fill="#fff" fill-opacity=".702"/><rect width="121" height="350.067" x="124.404" y="312.272" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(129.40432 317.27197)"><tspan x="32.964" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">envoy</tspan> <tspan x="24.98" y="35.464" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">process</tspan></text></g><g id="Graphic_84"><rect width="95.191" height="121.266" x="137.427" y="374.091" fill="#0a55a8"/><rect width="95.191" height="121.266" x="137.427" y="374.091" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(144.40627 405.5278)"><tspan x="0" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Port 15006</tspan> <tspan x="9.36" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Inbound</tspan> <tspan x="10.696" y="54.928" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Handler</tspan></text></g><g id="Graphic_83"><rect width="95.191" height="121.266" x="137.309" y="517.006" fill="#0a55a8"/><rect width="95.191" height="121.266" x="137.309" y="517.006" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(144.28832 548.44274)"><tspan x="0" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Port 15001</tspan> <tspan x="2.68" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Outbound</tspan> <tspan x="10.696" y="54.928" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Handler</tspan></text></g><g id="Graphic_82"><title>Rectangle</title><rect width="121" height="126.036" x="124.522" y="150.236" fill="#fff" fill-opacity=".702"/><rect width="121" height="126.036" x="124.522" y="150.236" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(129.52228 193.78999)"><tspan x="13.892" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">pilot-agent</tspan> <tspan x="24.98" y="35.464" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">process</tspan></text></g><g id="Line_86"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -32.035435 608.75 L 95.2514 608.75 L 95.2514 577.6389 L 124.40871 577.6389"/></g><g id="Graphic_87"><path fill="#333" d="M 10.914588 594.526 L 10.914588 594.526 C 16.132574 594.526 20.362588 598.756 20.362588 603.974 L 20.362588 613.526 C 20.362588 618.744 16.132574 622.974 10.914588 622.974 L 10.914588 622.974 C 5.696601 622.974 1.4665876 618.744 1.4665876 613.526 L 1.4665876 603.974 C 1.4665876 598.756 5.696601 594.526 10.914588 594.526 Z"/><text fill="#fff" transform="translate(6.4665876 599.526)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">3</tspan></text></g><g id="Graphic_88"><rect width="57.696" height="29.464" x="27.688" y="594.018" fill="#eff0ef"/><text fill="#000" transform="translate(32.687726 599.01794)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Rule 9</tspan></text></g><g id="Line_89"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M 124.40432 487.30544 L 44.174757 487.30544 L 44.174757 247.07046 L -19.135435 247.07046"/></g><g id="Graphic_90"><path fill="#333" d="M 44.174757 363.9177 L 44.174757 363.9177 C 49.392744 363.9177 53.62276 368.14772 53.62276 373.3657 L 53.62276 382.9177 C 53.62276 388.1357 49.392744 392.3657 44.174757 392.3657 L 44.174757 392.3657 C 38.95677 392.3657 34.726757 388.1357 34.726757 382.9177 L 34.726757 373.3657 C 34.726757 368.14772 38.95677 363.9177 44.174757 363.9177 Z"/><text fill="#fff" transform="translate(39.726757 368.9177)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">4</tspan></text></g><g id="Graphic_91"><path fill="#333" d="M -297.807 455.94073 L -297.807 455.94073 C -292.58903 455.94073 -288.35902 460.17075 -288.35902 465.38873 L -288.35902 474.94073 C -288.35902 480.1587 -292.58903 484.38873 -297.807 484.38873 L -297.807 484.38873 C -303.025 484.38873 -307.255 480.1587 -307.255 474.94073 L -307.255 465.38873 C -307.255 460.17075 -303.025 455.94073 -297.807 455.94073 Z"/><text fill="#fff" transform="translate(-302.255 460.94073)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">5</tspan></text></g></g></g></svg>