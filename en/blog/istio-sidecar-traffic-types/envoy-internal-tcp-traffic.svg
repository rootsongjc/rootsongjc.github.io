<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" width="1191" height="851" version="1.1" viewBox="-521 -35 1191 851"><defs><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="20" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="16" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><marker id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-1 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 4.8 0 L 0 -1.8 L 0 1.8 Z"/></g></marker><font-face x-height="517" ascent="951.996" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="16" font-weight="400" panose-1="2 0 5 3 0 0 0 2 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue"/></font-face-src></font-face><font-face x-height="514" ascent="966.995" cap-height="714" descent="-212.997" font-family="Helvetica Neue" font-size="19" font-weight="300" panose-1="2 11 4 3 2 2 2 2 2 4" slope="0" underline-position="-75" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Thin"/></font-face-src></font-face></defs><metadata>Produced by OmniGraffle 7.11.5</metadata><g id="10__envoy-internal-tcp-traffic" fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"><title>10. envoy-internal-tcp-traffic</title><rect width="1191" height="851" x="-521" y="-35" fill="#fff"/><g id="10__envoy-internal-tcp-traffic: 类型1"><title>类型1</title><g id="Graphic_84"><rect width="1190.551" height="850.394" x="-520.866" y="-34.698" fill="#fff"/></g><g id="Graphic_34"><rect width="846.142" height="747.587" x="-348.661" y=".321" fill="#ccc" fill-opacity=".298"/><rect width="846.142" height="747.587" x="-348.661" y=".321" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(-343.66142 718.32734)"><tspan x="740.602" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Local Pod</tspan></text></g><g id="Graphic_35"><rect width="224.5" height="53" x="-256.535" y="28.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="28.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 45.1144)"><tspan x="53.778" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">PREROUTING</tspan></text></g><g id="Graphic_36"><rect width="224.5" height="53" x="-256.535" y="117.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="117.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 134.1144)"><tspan x="82.81" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">INPUT</tspan></text></g><g id="Graphic_37"><rect width="224.5" height="53" x="-256.535" y="206.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="206.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 223.1144)"><tspan x="74.058" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">OUTPUT</tspan></text></g><g id="Graphic_38"><rect width="224.5" height="53" x="-256.535" y="295.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="295.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 312.1144)"><tspan x="48.434" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">POSTROUTING</tspan></text></g><g id="Graphic_39"><rect width="224.5" height="53" x="-256.535" y="384.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="384.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 401.1144)"><tspan x="44.298" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_INBOUND</tspan></text></g><g id="Graphic_40"><rect width="224.5" height="53" x="-256.535" y="473.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="473.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 490.1144)"><tspan x="28.914" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_IN_REDIRECT</tspan></text></g><g id="Graphic_41"><rect width="224.5" height="53" x="-256.535" y="568.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="568.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 585.1144)"><tspan x="49.034" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_OUTPUT</tspan></text></g><g id="Graphic_42"><rect width="224.5" height="53" x="-256.535" y="663.346" fill="#0a55a8"/><rect width="224.5" height="53" x="-256.535" y="663.346" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(-251.53544 680.1144)"><tspan x="41.202" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">ISTIO_REDIRECT</tspan></text></g><g id="Graphic_44"><rect width="145.99" height="615" x="111.969" y="66.614" fill="#ccc"/><rect width="145.99" height="615" x="111.969" y="66.614" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(148.6733 71.61417)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Sidecar</tspan> <tspan x="9.24" y="44.58" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Proxy</tspan></text></g><g id="Graphic_45"><rect width="121" height="615" x="327.402" y="66.614" fill="#ccc"/><rect width="121" height="615" x="327.402" y="66.614" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(334.05158 349.53403)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Application</tspan> <tspan x="7" y="44.58" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Container</tspan></text></g><g id="Line_52"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M 111.9685 374.11417 L 84.84848 374.11417 L 84.84848 229.79798 L -19.135435 229.79798"/></g><g id="Line_53"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -256.53544 232.84646 L -297.807 232.84646 L -297.807 596.65215 L -269.43544 596.65215"/></g><g id="Graphic_60"><path fill="#333" d="M 84.84848 252.00235 L 84.84848 252.00235 C 90.06647 252.00235 94.29648 256.23236 94.29648 261.45035 L 94.29648 271.00235 C 94.29648 276.22033 90.06647 280.45035 84.84848 280.45035 L 84.84848 280.45035 C 79.6305 280.45035 75.400485 276.22033 75.400485 271.00235 L 75.400485 261.45035 C 75.400485 256.23236 79.6305 252.00235 84.84848 252.00235 Z"/><text fill="#fff" transform="translate(80.400485 257.00235)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">1</tspan></text></g><g id="Graphic_61"><path fill="#333" d="M -297.807 376.27512 L -297.807 376.27512 C -292.58903 376.27512 -288.35902 380.50514 -288.35902 385.72312 L -288.35902 395.2751 C -288.35902 400.4931 -292.58903 404.7231 -297.807 404.7231 L -297.807 404.7231 C -303.025 404.7231 -307.255 400.4931 -307.255 395.2751 L -307.255 385.72312 C -307.255 380.50514 -303.025 376.27512 -297.807 376.27512 Z"/><text fill="#fff" transform="translate(-302.255 381.27512)"><tspan x="0" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">2</tspan></text></g><g id="Graphic_65"><text fill="#000" transform="translate(-343.6614 777.44095)"><tspan x="0" y="20" fill="#000" font-family="Helvetica Neue" font-size="20" font-weight="700">Envoy Internal TCP Traffic</tspan></text></g><g id="Line_78"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -32.035435 606.71164 L 12.913907 606.71164 L 12.913907 337 L -19.135435 337"/></g><g id="Graphic_79"><path fill="#333" d="M 12.913907 434.68517 L 12.913907 434.68517 C 20.588456 434.68517 26.809907 440.9066 26.809907 448.58117 L 26.809907 449.23717 C 26.809907 456.9117 20.588456 463.13317 12.913907 463.13317 L 12.913907 463.13317 C 5.2393584 463.13317 -.9820927 456.9117 -.9820927 449.23717 L -.9820927 448.58117 C -.9820927 440.9066 5.2393584 434.68517 12.913907 434.68517 Z"/><text fill="#fff" transform="translate(4.0179073 439.68517)"><tspan x="4.448" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">3</tspan></text></g><g id="Graphic_80"><rect width="57.696" height="29.464" x="-15.934" y="463.044" fill="#f0f0f0"/><text fill="#000" transform="translate(-10.934093 468.0437)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">Rule 8</tspan></text></g><g id="Line_81"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M -32.035435 321.84646 L 53.985686 321.84646 L 53.985686 477.1166 L 111.50432 477.1166"/></g><g id="Graphic_82"><path fill="#333" d="M 53.985686 389.8316 L 53.985686 389.8316 C 61.660235 389.8316 67.881686 396.05306 67.881686 403.7276 L 67.881686 404.3836 C 67.881686 412.05815 61.660235 418.2796 53.985686 418.2796 L 53.985686 418.2796 C 46.311137 418.2796 40.089686 412.05815 40.089686 404.3836 L 40.089686 403.7276 C 40.089686 396.05306 46.311137 389.8316 53.985686 389.8316 Z"/><text fill="#fff" transform="translate(45.089686 394.8316)"><tspan x="4.448" y="15" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="400">4</tspan></text></g><g id="Graphic_83"><text fill="#000" transform="translate(150.0193 657.1501)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">localhost</tspan></text></g><g id="Graphic_85"><text fill="#000" fill-opacity=".5" transform="translate(160.94932 777.44095)"><tspan x="0" y="18" fill="#000" fill-opacity=".5" font-family="Helvetica Neue" font-size="19" font-weight="300">https://jimmysong.io Version: 2022-05-12</tspan></text></g><g id="Graphic_89"><title>Rectangle</title><rect width="121" height="350.067" x="124.404" y="302.083" fill="#fff" fill-opacity=".702"/><rect width="121" height="350.067" x="124.404" y="302.083" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(129.40432 307.08313)"><tspan x="32.964" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">envoy</tspan> <tspan x="24.98" y="35.464" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">process</tspan></text></g><g id="Graphic_88"><rect width="95.191" height="121.266" x="137.427" y="363.902" fill="#0a55a8"/><rect width="95.191" height="121.266" x="137.427" y="363.902" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(144.40627 395.33893)"><tspan x="0" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Port 15006</tspan> <tspan x="9.36" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Inbound</tspan> <tspan x="10.696" y="54.928" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Handler</tspan></text></g><g id="Graphic_87"><rect width="95.191" height="121.266" x="137.309" y="506.817" fill="#0a55a8"/><rect width="95.191" height="121.266" x="137.309" y="506.817" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(144.28832 538.2539)"><tspan x="0" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Port 15001</tspan> <tspan x="2.68" y="35.464" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Outbound</tspan> <tspan x="10.696" y="54.928" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Handler</tspan></text></g><g id="Graphic_86"><title>Rectangle</title><rect width="121" height="126.036" x="124.522" y="140.047" fill="#fff" fill-opacity=".702"/><rect width="121" height="126.036" x="124.522" y="140.047" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#000" transform="translate(129.52228 183.60114)"><tspan x="13.892" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">pilot-agent</tspan> <tspan x="24.98" y="35.464" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">process</tspan></text></g></g></g></svg>