<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  
  <title>In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations - Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="This article introduces the four plane deployment modes of service meshes, analyzing their advantages and disadvantages, and provides recommendations based on their performance, reliability, and security.">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.129.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/en/blog/service-mesh-data-plane-deployment-modes/" />
  <meta property="og:title" content="In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations | Jimmy Song" />
  <meta property="twitter:title" content="In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations | Jimmy Song" />

  
  <meta property="og:description" content="This article introduces the four plane deployment modes of service meshes, analyzing their advantages and disadvantages, and provides recommendations based on their performance, reliability, and security." />
  <meta property="twitter:description" content="This article introduces the four plane deployment modes of service meshes, analyzing their advantages and disadvantages, and provides recommendations based on their performance, reliability, and security." />

  
  <meta property="og:image" content="https://jimmysong.io/images/banner/default.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/default.jpg" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/en">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/blog">Blog</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/book">Book</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/tags">Tags</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/notice">Notice</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/contact">Contact</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/about">About</a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
              
              
                
                
                
                  
                    
                    
                  
                
              
              
              
                
                  
                    
                    <a class="nav-link" href="/blog/service-mesh-data-plane-deployment-modes/">中文</a>
                    
                  
                
                
                
              
          </li>
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>Search</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>Search</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="Close"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="Input the keyword" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="Input the keyword">
        
        <div class="mt-4">
          <span>Search type: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">All</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">Blog</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">Book</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">Notice</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row">
            <div class="col-12">
                <p class="h1">
                    In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations
                </p>
                <p class="page-description">
                    This article introduces the four plane deployment modes of service meshes, analyzing their advantages and disadvantages, and provides recommendations based on their performance, reliability, and security.
                </p>
                
                <div class="page-metadata">
                  <ul class="list-inline d-flex">
                    <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-calendar"></i>
                        </span>Sep 11, 2024</li>
                    
                    <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-folder-open"></i>
                        </span><a
                        href="/en/categories/service-mesh"> 
                        Service Mesh</a> </li>
                    
                    
                    <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-clock"></i>
                        </span>10 Minute</li>
                    <li class="list-inline-item mr-2 mb-md-0 d-sm-block d-none"><span><i class="fa-regular fa-file-word"></i>
                        </span>2176 words</li>
                    
                    
                  </ul>
                </div>
                
            </div>
        </div>
    </div>
</section>

        


  <div class="container-xl blog mb-4">
    <div class="row">
      <div class="col-xl-8">
        <div class="row">
          
          <div class="col-12 content py-md-3">

            
            
            
              <div class="alert alert-note-container mt-2">
    <div class="alert-note-title px-2 py-2">
      Copyright Notice
    </div>
    <div class="alert-tip px-2">
      This is an original article by Jimmy Song. You may repost it, but please credit this source: <a title=https://jimmysong.io/en/blog/service-mesh-data-plane-deployment-modes/>https://jimmysong.io/en/blog/service-mesh-data-plane-deployment-modes/</a>
     </div>
  </div>
            

            
              <details class="mobile-toc d-sm-none d-block mb-0">
  <summary>Click to show the outline</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-a-service-mesh">What is a Service Mesh?</a></li>
    <li><a href="#data-plane-deployment-modes">Data Plane Deployment Modes</a></li>
    <li><a href="#sidecar-mode-l4-and-l7-proxy-per-service-instance">Sidecar Mode: L4 and L7 Proxy per Service Instance</a></li>
    <li><a href="#ambient-mode-node-shared-l4-proxy-service-account-shared-l7-proxy">Ambient Mode: Node-shared L4 Proxy, Service Account-shared L7 Proxy</a></li>
    <li><a href="#cilium-mesh-mode-shared-l4-and-l7-proxies">Cilium Mesh Mode: Shared L4 and L7 Proxies</a></li>
    <li><a href="#grpc-mode-l4-and-l7-part-of-the-application-mode">gRPC Mode: L4 and L7 Part of the Application Mode</a></li>
    <li><a href="#which-mode-should-i-use">Which mode should I use?</a>
      <ul>
        <li><a href="#maturity">Maturity</a></li>
        <li><a href="#security-requirements">Security Requirements</a></li>
        <li><a href="#resource-constraints">Resource Constraints</a></li>
        <li><a href="#performance-requirements">Performance Requirements</a></li>
        <li><a href="#management-complexity">Management Complexity</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
</details>

            
            <p>This article will introduce you to the four plane deployment modes of the Istio service mesh, analyzing their strengths and weaknesses to offer suggestions based on their performance, reliability, and security.</p>
<h2 id="what-is-a-service-mesh">What is a Service Mesh?</h2>
<p>A service mesh is an infrastructure layer that typically employs application proxies to facilitate various functionalities. Taking Istio as an example, it enables users to programmatically manage traffic aware of applications, ensure robust observability, and maintain solid security within the network. Istio ensures resilience in cloud-native and distributed systems, enabling modern enterprises to maintain their workloads across various platforms while ensuring connectivity and protection. Its capabilities include zero-trust security, policy management, access control for security and governance, as well as canary deployments, A/B testing, load balancing, and fault recovery for network functions. It also provides observability across all network traffic. Istio is unrestricted by any single cluster, network, or runtime and can incorporate services running on Kubernetes or virtual machines within a single mesh, whether across multi-cloud, hybrid, or on-premises environments. Its design is scalable and supported by an extensive ecosystem.</p>
<p>The architecture of a service mesh is divided into the control plane and the data plane. In the case of Istio, <code>istiod</code> acts as the control plane, while the data plane offers two deployment modes: sidecar or ambient.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/service-mesh.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/service-mesh.svg" alt="image" data-caption="Architecture of the Istio Service Mesh (Source: &lt;a href=&#34;https://istio.io/latest/about/service-mesh/&#34; title=&#34;istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istio.io&lt;/a&gt;)">
        
      
    
  
  
  <figcaption>Architecture of the Istio Service Mesh (Source: <a href="https://istio.io/latest/about/service-mesh/" title="istio.io" target="_blank" rel="noopener">istio.io</a>)</figcaption>
  
</figure>
<p>In fact, there are more than these two modes for deploying the service mesh data plane. Including Istio&rsquo;s <a href="https://istio.io/latest/blog/2021/proxyless-grpc/" title="proxyless gRPC service mesh" target="_blank" rel="noopener">proxyless gRPC service mesh</a> and the <a href="https://cilium.io/use-cases/service-mesh/" title="Cilium service mesh" target="_blank" rel="noopener">Cilium service mesh</a>, there are a total of four deployment modes.</p>
<h2 id="data-plane-deployment-modes">Data Plane Deployment Modes</h2>
<p>These four deployment modes are differentiated based on how proxies are associated with service instances.</p>
<p>The following diagram illustrates potential locations for proxies in different deployment modes of the service mesh data plane.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/overview.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/overview.svg" alt="image" data-caption="Potential Locations of Proxies in the Data Plane">
        
      
    
  
  
  <figcaption>Potential Locations of Proxies in the Data Plane</figcaption>
  
</figure>
<p>The data plane can be located in various parts of an application, differentiated based on how proxies/data planes are deployed within the service mesh. These modes are named based on their typical use cases:</p>
<ul>
<li><strong>Sidecar Mode:</strong> Runs both L4 and L7 proxies in each service instance.</li>
<li><strong>Ambient Mode:</strong> Shares an L4 proxy at the host level, with each service account or namespace using a dedicated L7 proxy.</li>
<li><strong>Cilium Mesh Mode:</strong> Shares both L4 and L7 proxies at the host level.</li>
<li><strong>gRPC Mode:</strong> No proxies; L4 and L7 functions are integrated parts of the application, such as with gRPC, Java Spring, or other RPC frameworks. This mode, though lacking traditional proxies, still implements all functionalities of a service mesh and existed even before the emergence of service meshes.</li>
</ul>
<p>The following table compares the service mesh data plane deployment modes across several dimensions.</p>

<table>
<thead>
<tr>
<th><strong>Data Plane Mode</strong></th>
<th><strong>Platform Security</strong> - Threat assessment, risk</th>
<th><strong>Cost</strong> - Infrastructure/resource costs</th>
<th><strong>Manageability</strong> - Upgrades, vulnerabilities</th>
<th><strong>Performance</strong> - Latency</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Sidecar Mode -</strong> L4 and L7 Proxy per Service Instance</td>
<td>High security, each service instance has an independent proxy, reducing attack surfaces. Risk management depends on control plane configuration.</td>
<td>High resource consumption, each instance requires an independent proxy, increasing infrastructure costs.</td>
<td>Centralized management and configuration needed, upgrades are relatively complex but can be simplified via the control plane.</td>
<td>May increase latency, as requests need to be forwarded through the proxy.</td>
</tr>
<tr>
<td><strong>Ambient Mode -</strong> Node-shared L4 proxy, service account-shared L7 proxy</td>
<td>Lower security, multiple services share a proxy, increasing attack surfaces.</td>
<td>Lower costs, multiple services share the same proxy.</td>
<td>Relatively simple management, but shared proxies may be vulnerable.</td>
<td>Better performance, lower latency, as requests do not need to be forwarded multiple times.</td>
</tr>
<tr>
<td><strong>Cilium Mesh Mode -</strong> Shared L4 and L7 proxies</td>
<td>Medium security, supports fine-grained access control.</td>
<td>Moderate costs, shared resources reduce infrastructure overhead.</td>
<td>Management is more complex, requiring handling of multiple services&rsquo; configurations.</td>
<td>Good performance, relatively low latency, suitable for high-concurrency scenarios.</td>
</tr>
<tr>
<td><strong>gRPC Mode -</strong> L4 and L7 proxies integrated into the application</td>
<td>Medium security, the code being part of the application itself means compromises could be more severe.</td>
<td>Overall lower costs, as the proxy is implemented within the same process as the application.</td>
<td>Complex management, regular updates, and maintenance of the application-layer proxy needed.</td>
<td>Excellent performance, low latency, suitable for real-time applications.</td>
</tr>
</tbody>
</table>

<figcaption class="text-center">
    
    Comparison of Four Service Mesh Deployment Modes
    
</figcaption>

<p>You can see a more visual comparison of these four modes in terms of cost and security from the diagram below:</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/istio-data-plane-deployment-modes.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/istio-data-plane-deployment-modes.svg" alt="image" data-caption="Comparison of Service Mesh Deployment Modes">
        
      
    
  
  
  <figcaption>Comparison of Service Mesh Deployment Modes</figcaption>
  
</figure>
<p>From the figure, it can be seen that the Sidecar mode has the highest security but also the highest cost, while the Ambient and Cilium modes offer moderate cost and security. The gRPC mode has the lowest cost but also moderate security.</p>
<p>The following diagram illustrates potential locations for proxies in different deployment modes of the service mesh data plane.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/overview.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/overview.svg" alt="image" data-caption="Potential Locations of Proxies in the Data Plane">
        
      
    
  
  
  <figcaption>Potential Locations of Proxies in the Data Plane</figcaption>
  
</figure>
<ul>
<li><strong>Sidecar Mode</strong>: The proxy is in the same Pod as the application container.</li>
<li><strong>Ambient Mode</strong>: The L4 proxy is on the same node as the application container, while the L7 proxy may not be on the same node.</li>
<li><strong>Cilium Mode</strong>: The L4 and L7 proxies are combined and located on the same node as the application container.</li>
<li><strong>gRPC Mode</strong>: The gRPC framework is integrated into the application and deployed within the same container.</li>
</ul>
<h2 id="sidecar-mode-l4-and-l7-proxy-per-service-instance">Sidecar Mode: L4 and L7 Proxy per Service Instance</h2>
<p>The diagram below shows the communication paths in sidecar mode where Application 1 accesses Application 2 on the same node and Application 3 across nodes.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/sidecar-mode.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/sidecar-mode.svg" alt="image" data-caption="Sidecar Mode: L4 and L7 Proxy per Service Instance">
        
      
    
  
  
  <figcaption>Sidecar Mode: L4 and L7 Proxy per Service Instance</figcaption>
  
</figure>
<p>This is the most common deployment mode for service meshes and was the initial mode supported by <a href="https://istio.io" title="Istio" target="_blank" rel="noopener">Istio</a>. Each service instance is accompanied by a proxy (such as <a href="https://envoyproxy.io" title="Envoy" target="_blank" rel="noopener">Envoy</a>), which handles all inbound and outbound network communications, including L4 and L7 layers.</p>
<ul>
<li><strong>Advantages:</strong> High security, as each service instance is isolated, reducing potential attack surfaces.</li>
<li><strong>Disadvantages:</strong> High resource consumption, as each service instance requires a separate proxy, increasing infrastructure costs.</li>
<li><strong>Maturity</strong>: The maturity of the Istio Sidecar mode has reached the production level. They have undergone extensive testing and are ready for use in actual environments.</li>
</ul>
<h2 id="ambient-mode-node-shared-l4-proxy-service-account-shared-l7-proxy">Ambient Mode: Node-shared L4 Proxy, Service Account-shared L7 Proxy</h2>
<p>The diagram below illustrates the communication paths in ambient mode where Application 1 accesses Application 2 on the same node and Application 3 across nodes.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/ambient-mode.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/ambient-mode.svg" alt="image" data-caption="Ambient Mode: Node-shared L4 Proxy, Service Account-shared L7 Proxy">
        
      
    
  
  
  <figcaption>Ambient Mode: Node-shared L4 Proxy, Service Account-shared L7 Proxy</figcaption>
  
</figure>
<p>In this mode, a shared L4 proxy on each node serves all service instances on the same physical host, while each service account has a dedicated L7 proxy.</p>
<ul>
<li><strong>Advantages:</strong> Lower costs, as the proxy is shared among multiple services.</li>
<li><strong>Disadvantages:</strong> Lower security, as a compromised proxy might affect all services that depend on it.</li>
<li><strong>Maturity</strong>: The Istio ambient mode is currently in the beta stage, there are no large-scale production-level best practices yet, and it does not support multi-clusters.</li>
</ul>
<h2 id="cilium-mesh-mode-shared-l4-and-l7-proxies">Cilium Mesh Mode: Shared L4 and L7 Proxies</h2>
<p>The diagram below displays the communication paths in Cilium mesh mode where Application 1 accesses Application 2 on the same node and Application 3 across nodes.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/cilium-mesh-mode.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/cilium-mesh-mode.svg" alt="image" data-caption="Cilium Mesh Mode: Shared L4 and L7 Proxies">
        
      
    
  
  
  <figcaption>Cilium Mesh Mode: Shared L4 and L7 Proxies</figcaption>
  
</figure>
<p>This mode is a middle ground between fully independent and fully shared setups, with each node having a shared L7 proxy. However, L4 functions like traffic routing can be managed without a proxy through kernel programs (e.g., eBPF programs) or a mesh proxy. An example of this data plane mode is the Cilium service mesh, which deploys Envoy proxies as L7 proxies according to its <code>CiliumEnvoyConfig</code> specification. Using a CNI plugin like Cilium can achieve secure isolation between services while reducing resource usage.</p>
<ul>
<li><strong>Advantages:</strong> Good balance between cost and performance.</li>
<li><strong>Disadvantages:</strong> Management is more complex, as it requires maintaining network policies for multiple services.</li>
<li><strong>Maturity</strong>: Cilium mesh manages L4 traffic directly through eBPF and configures the Envoy proxy on each node to control L7 traffic via CRDs (such as <code>CiliumEnvoyConfig</code> and <code>CiliumClusterwideEnvoyConfig</code>). The <a href="https://github.com/cilium/proxy" title="proxy" target="_blank" rel="noopener">proxy</a> is customized with minimal Envoy extensions and Cilium policy enforcement filters. As a result, this Cilium mesh may not support all the features of the Envoy proxy.</li>
</ul>
<h2 id="grpc-mode-l4-and-l7-part-of-the-application-mode">gRPC Mode: L4 and L7 Part of the Application Mode</h2>
<p>In the gRPC mode, no external proxies are deployed; proxy functions are directly integrated into the application using the RPC framework, hence significantly intruding into the application. The service mesh control plane uses a set of discovery APIs collectively known as xDS API to dynamically configure the application. The application&rsquo;s gRPC client libraries provide extensive support for the xDS API. With this capability, the service mesh control plane can program the L4 and L7 proxy functions into this library within the service container.</p>
<p>The diagram below illustrates how, in Istio&rsquo;s gRPC mode, the control plane communicates with the application.</p>
<figure class="mx-auto text-center">
  
  
  
    
      
        
          <img src="/en/blog/service-mesh-data-plane-deployment-modes/grpc-mode.svg" data-img="/en/blog/service-mesh-data-plane-deployment-modes/grpc-mode.svg" alt="image" data-caption="gRPC Mode: L4 and L7 Proxies Integrated into the Application">
        
      
    
  
  
  <figcaption>gRPC Mode: L4 and L7 Proxies Integrated into the Application</figcaption>
  
</figure>
<p>In this architecture, when a gRPC service communicates with the control plane, it does not require a traditional Sidecar proxy but instead utilizes a specific agent for initialization and communication with the control plane. This design reduces resource consumption and deployment complexity while still enabling service discovery, traffic management, etc. For example, in Kubernetes deployments, Pods only need to add specific annotations, and minimal code modifications are required on the client and server side to enable basic functionalities such as service discovery, partial DestinationRule and VirtualService functionalities, and limited Istio loadBalancer support. Although there are some limitations, it offers significant advantages in performance and resource usage.</p>
<ul>
<li><strong>Advantages:</strong> Extremely high performance and security, as the proxy is tightly integrated with the application.</li>
<li><strong>Disadvantages:</strong> Higher costs due to the complex network processing functionalities that need to be implemented within the application.</li>
<li><strong>Maturity</strong>: The gRPC mode of Istio is still in the experimental stage.</li>
</ul>
<h2 id="which-mode-should-i-use">Which mode should I use?</h2>
<p>As previously introduced, several factors influence the choice of a service mesh data plane deployment mode:</p>
<ul>
<li>Maturity</li>
<li>Enterprise security needs</li>
<li>Resource constraints</li>
<li>Performance requirements</li>
<li>Network overhead</li>
<li>Tolerance for management complexity</li>
</ul>
<h3 id="maturity">Maturity</h3>
<p>When considering the deployment modes of the service mesh data plane, maturity is a key factor. The maturity level of each mode affects its reliability and support in production environments:</p>
<ul>
<li><strong>Sidecar Mode</strong>: This is the most mature service mesh deployment mode, widely adopted in production environments and well-supported.</li>
<li><strong>Ambient Mode</strong>: While this mode offers some cost and performance advantages, it is still in the early stages and may lack mature best practices and broad ecosystem support.</li>
<li><strong>Cilium Mesh Mode</strong>: As a relatively new option, it offers unique technological advantages, especially in scenarios using eBPF. However, its maturity and widespread adoption may not be as extensive as the Sidecar mode.</li>
<li><strong>gRPC Mode</strong>: Despite excellent performance, the complexity and intrusiveness of this mode mean it may require more custom development and is still in the experimental stage.</li>
</ul>
<h3 id="security-requirements">Security Requirements</h3>
<p>If your business has high security requirements, such as in the financial or healthcare sectors, then the <strong>Sidecar Mode</strong> might be the best choice. This mode provides the strongest security by ensuring each service instance has its own independent proxy, thus maximizing service isolation. However, if your applications do not handle sensitive data, or if security is not a primary concern, the <strong>Ambient Mode</strong> or <strong>Cilium Mesh Mode</strong> may be more economical options, offering lower proxy management overhead.</p>
<h3 id="resource-constraints">Resource Constraints</h3>
<p>In resource-constrained environments, deploying a separate proxy for each service instance may not be practical. In such cases, consider the <strong>gRPC Mode</strong> or <strong>Ambient Mode</strong>. <strong>gRPC Mode</strong> is particularly suitable for organizations that already use gRPC extensively and are willing to handle complex networking functions internally within the application. The <strong>Ambient Mode</strong>, on the other hand, uses a shared proxy to reduce resource consumption.</p>
<h3 id="performance-requirements">Performance Requirements</h3>
<p>For applications requiring high performance and low latency, the <strong>gRPC Mode</strong> provides optimal performance because it eliminates the additional network hops introduced by traditional proxies. Simultaneously, the <strong>Cilium Mesh Mode</strong> offers excellent performance by handling some network functions in the kernel, making it suitable for high-concurrency scenarios. However, it is important to note that the gRPC Mode is still experimental and may not support all features of Istio; consider your service mesh functionality needs accordingly.</p>
<p>Indeed, network overhead and cost are significant considerations when choosing a service mesh data plane mode, especially in deployments across multiple availability zones or regions.</p>
<h3 id="management-complexity">Management Complexity</h3>
<p>Management complexity is also a significant consideration when choosing a service mesh data plane mode. <strong>Sidecar Mode</strong> and <strong>gRPC Mode</strong> may require more complex configurations and maintenance, while the <strong>Ambient Mode</strong> and <strong>Cilium Mesh Mode</strong> might offer a more streamlined management experience in some deployment environments.</p>
<h2 id="summary">Summary</h2>
<p>Choosing the right service mesh data plane deployment mode depends on specific factors including maturity, security, resource constraints, performance, and management complexity. Here&rsquo;s a quick guide:</p>
<ul>
<li><strong>Sidecar Mode</strong>: Best for high security needs, offering the most isolation.</li>
<li><strong>gRPC Mode</strong> or <strong>Cilium Mesh Mode</strong>: Suitable for environments with limited resources and high-performance demands.</li>
<li><strong>Ambient Mode</strong>: Good for cost-effectiveness and lower isolation needs.</li>
<li><strong>Cilium Mesh Mode</strong>: Ideal for modern infrastructures utilizing eBPF technology.</li>
</ul>
<p>The best choice will align with your application requirements, security policies, and technical familiarity. It’s essential to understand each mode&rsquo;s strengths and limitations to make an informed decision that balances benefits, risks, and costs.</p>
<hr>
<p><em>This blog was initially published at <a href="https://tetrate.io/blog/ambient-vs-sidecar/" title="tetrate.io" target="_blank" rel="noopener">tetrate.io</a>.</em></p>

            <div class="border-bottom mb-2"></div>
          </div>
          <div class="col-12">
            <p>Last updated on Sep 12, 2024</p>
            


            


          </div>
          
          <div class="col-12">
              <div class="list-inline-item text-light">
              
              <a href="/en/tags/istio" class="badge"> 
                  Istio</a> 
              <a href="/en/tags/service-mesh" class="badge">  
                  Service Mesh</a> 
              <a href="/en/tags/ambient" class="badge">  
                  Ambient</a> 
              <a href="/en/tags/sidecar" class="badge">  
                  Sidecar</a> 
              <a href="/en/tags/cilium" class="badge">  
                  Cilium</a> 
              <a href="/en/tags/grpc" class="badge">  
                  GRPC</a> </div>
          </div>
          
          <div class="col-12">
            









    

    

    
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    






    



    


<div class="pager blog-pager d-flex justify-content-between">
    
    <div class="previous mr-4">
        <a href="https://jimmysong.io/en/blog/kubecon-china-2024-recap/" class="d-flex flex-column align-items-start">
            <span class="nav mb-2 text-color-dark">&larr; Previous Post</span>
            <span class="text-align-left">KubeCon China 2024 Recap: Leading the Frontiers of Cloud Native Technology</span>
        </a>
    </div>
    

    
    <div class="next">
        <a href="https://jimmysong.io/en/blog/envoy-gateway-integration-istio-mesh/" class="d-flex flex-column align-items-end">
            <span class="nav mb-2 text-color-dark">Next Post &rarr;</span>
            <span class="text-align-right">Integrating Envoy Gateway as an Ingress Gateway in Istio Service Mesh</span>
        </a>
    </div>
     
</div>

          </div>

          
          
          <div class="col-12">
            <script src="https://giscus.app/client.js"
        data-repo="rootsongjc/rootsongjc.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzMTQ1MzczNA=="
        data-category="Announcements"
        data-category-id="DIC_kwDOAd_yJs4CPNtR"
        data-mapping="pathname"
        data-reactions-enabled="0"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        
        data-lang="en"
        
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
          </div>
          
        </div>
      </div>
      <!-- sidebar -->
      <aside class="px-2 col-xl-4 py-md-3 d-none d-xl-block">
          <div class="sidebar">
          <!-- recommend -->
          











<div>
  <p class="related-sidebar-title">
  Related article
  </p>
  <!-- related-blog-item -->
    <ul class="related-list">
    
      <li>
          <a href="/en/blog/what-is-new-in-istio-1-22/">
            Deep Dive into Istio 1.22: New Features and Practical Application Advice
          </a>
      </li>
    
      <li>
          <a href="/en/blog/istio-cni-deep-dive/">
            Istio CNI Unveiled: Streamlining Service Mesh Connectivity
          </a>
      </li>
    
      <li>
          <a href="/en/blog/istio-ambient-mode-limitations/">
            Analysis of the Limitations of Istio Ambient Mode
          </a>
      </li>
    
      <li>
          <a href="/en/blog/securing-istio-addressing-critical-security-gaps-and-best-practices/">
            Securing Istio: Addressing Critical Security Gaps and Best Practices
          </a>
      </li>
    
      <li>
          <a href="/en/blog/envoy-gateway-introduction/">
            Envoy Gateway Overview: Modern Kubernetes Ingress with Envoy Gateway and the Gateway API
          </a>
      </li>
    
    </ul>
</div>


          <!-- /recommend -->
          <!-- toc -->
          
  <div class="bg-white sticky-top aside-toc">
    <p class="toc-sidebar-title">
      Table of content
    </p>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-a-service-mesh">What is a Service Mesh?</a></li>
    <li><a href="#data-plane-deployment-modes">Data Plane Deployment Modes</a></li>
    <li><a href="#sidecar-mode-l4-and-l7-proxy-per-service-instance">Sidecar Mode: L4 and L7 Proxy per Service Instance</a></li>
    <li><a href="#ambient-mode-node-shared-l4-proxy-service-account-shared-l7-proxy">Ambient Mode: Node-shared L4 Proxy, Service Account-shared L7 Proxy</a></li>
    <li><a href="#cilium-mesh-mode-shared-l4-and-l7-proxies">Cilium Mesh Mode: Shared L4 and L7 Proxies</a></li>
    <li><a href="#grpc-mode-l4-and-l7-part-of-the-application-mode">gRPC Mode: L4 and L7 Part of the Application Mode</a></li>
    <li><a href="#which-mode-should-i-use">Which mode should I use?</a>
      <ul>
        <li><a href="#maturity">Maturity</a></li>
        <li><a href="#security-requirements">Security Requirements</a></li>
        <li><a href="#resource-constraints">Resource Constraints</a></li>
        <li><a href="#performance-requirements">Performance Requirements</a></li>
        <li><a href="#management-complexity">Management Complexity</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
  </div>



          <!-- /toc -->
          <!-- ad-->
          

          <!-- /ad -->
          </div>
      </aside>
      <!-- /sidebar -->
    </div>
  </div>




<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay ">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">Contact</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">Jimmy&rsquo;s LinkedIn</li>
            
            
            <li class="mb-4"><img src="/images/jimmysong-linkedin.png" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">Blog</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/blog/istio-configuration-safety-common-misconfigurations/">Istio Configuration Security: How to Avoid Misconfigurations</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/kubecon-china-2024-recap/">KubeCon China 2024 Recap: Leading the Frontiers of Cloud Native Technology</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/service-mesh-data-plane-deployment-modes/">In-Depth Analysis of Four Service Mesh Data Plane Deployment Models and Selection Recommendations</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">links</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" >
                  Awesome Cloud Native
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://gateway.envoyproxy.io" target="_blank" rel="noopener noreferrer">
                  Envoy Gateway
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io" target="_blank" rel="noopener noreferrer">
                  Istio
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate - Service Mesh Company
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://docs.tetrate.io/istio-subscription/" target="_blank" rel="noopener noreferrer">
                  Tetrate Istio Subscription
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">Courses</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals" target="_blank" rel="noopener noreferrer">
                  Envoy Fundamentals
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals" target="_blank" rel="noopener noreferrer">
                  Istio Fundamentals
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">new notice</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/notice/kubecon-china-2024-panel/">KubeCon China 2024 panel Preview: Istio and Modern API Gateways – Leading the Future of Service Mesh</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/website-revamp-notice/">Website Revamp Notice</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/kubecon-eu-2024/">See you in KubeCon Paris!</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song All Right Reserved</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/en/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/en/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>




<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>






  





<script src="/js/wowchemy-search.min.ce03c611044441cf6e84f9e4bef20818.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
