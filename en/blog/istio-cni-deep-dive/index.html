<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  
  <title>Analysis of Istio CNI: Enhancing Traffic Management and Security · Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This article provides a detailed explanation of the design principles, implementation methods, and how to enhance security and permission management through Ambient Mode in the Istio CNI plugin.">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.123.7">

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="/plugins/venobox/venobox.css">
  
  <link rel="stylesheet" href="/plugins/themify-icons/themify-icons.css">
  
  <link rel="stylesheet" href="/plugins/hightlight/syntax.css">
  
  <link rel="stylesheet" href="/plugins/fontawesome/font-awesome.min.css">
  
  <link rel="stylesheet" href="/plugins/tocbot/tocbot.css">
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.css" media="screen">

  <!--Favicon-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="images/favicon.png" />

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  
  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/en/blog/istio-cni-deep-dive/" />
  <meta property="og:title" content="Analysis of Istio CNI: Enhancing Traffic Management and Security" />
  <meta property="twitter:title" content="Analysis of Istio CNI: Enhancing Traffic Management and Security" />
  
  <meta property="og:description" content="This article provides a detailed explanation of the design principles, implementation methods, and how to enhance security and permission management through Ambient Mode in the Istio CNI plugin." />
  <meta property="twitter:description" content="This article provides a detailed explanation of the design principles, implementation methods, and how to enhance security and permission management through Ambient Mode in the Istio CNI plugin." />
  
  
  <meta property="og:image" content="https://jimmysong.io/images/banner/istio-cni.jpg" />
  <meta property="twitter:image" content="https://jimmysong.io/images/banner/istio-cni.jpg" />
  
  
  
</head>
<body>
    <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>

<header class="fixed-top header">
  
  
  
  <div class="navigation w-100 ">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/en">
            
            <img class="img-fluid" width="200px" src="/images/logo.svg" alt="Jimmy Song&#39;s Blog">
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/about">About</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/blog">Blog</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/notice">Notice</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/tags">Tags</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/en/contact">Contact</a>
              
            </li>
            
            

          
          
          <li class="nav-item">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="nav-link" href="/blog/istio-cni-deep-dive/">中文</a>
            
            
            
            
            
            
          </li>
          
          
          <!-- search -->
          <button id="searchOpen" class="search-btn js-search"><i class="fa fa-search text-dark"></i></button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


    <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>Search</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fa fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        <i class="fa fa-search" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="Input the keyword" autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Input the keyword">
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

    
	
	
<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/page-title.webp'),url('/images/backgrounds/page-title.webp');">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <ul class="list-inline custom-breadcrumb">
                    
                          
                      
                        
                      
                        
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/en/">
                            
                              Home
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/en/blog/">
                            
                              Blogs
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                          <li class="list-inline-item h3 active" aria-current="page">
                            Analysis of Istio CNI: Enhancing Traffic Management and Security
                          </li>
                    
                    
                    
                </ul>
                <p class="text-white">This article provides a detailed explanation of the design principles, implementation methods, and how to enhance security and permission management through Ambient Mode in the Istio CNI plugin.</p>
            </div>
        </div>
    </div>
</section>

	


<section class="section-sm">
  <div class="container blog">
    <div class="row">
      <div class="col-lg-8 article-content">
        <div class="row">
          <div class="col-12">
            <ul class="list-inline">
              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Date
                  :</span>April 17, 2024</li>

              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Category
                  :</span><a
                  href="/en/categories/istio"> 
                  Istio</a> </li>
              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Word Count
                  :</span>1335 words</li>
              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light"><span class="font-weight-bold mr-2">Reading Time
                  :</span>6 Minute</li>
            </ul>
          </div>
          
          <div class="col-12 my-4">
            <div class="border-bottom"></div>
          </div>
          
          <div class="col-12 content">
            
            <details class="toc-inpage d-print-none d-show-block mb-0">
  <summary class="font-weight-bold">Click to show the outline</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#overview-of-istio-network-requirements-and-solutions">Overview of Istio Network Requirements and Solutions</a>
      <ul>
        <li><a href="#limitations-of-istio-init">Limitations of Istio-init</a></li>
        <li><a href="#istio-cni-plugin">Istio CNI Plugin</a></li>
        <li><a href="#introduction-of-ambient-mode">Introduction of Ambient Mode</a></li>
      </ul>
    </li>
    <li><a href="#security-considerations-for-net_admin-permissions">Security Considerations for NET_ADMIN Permissions</a></li>
    <li><a href="#working-principles-of-istio-cni-plugin">Working Principles of Istio CNI Plugin</a></li>
    <li><a href="#resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</a></li>
    <li><a href="#resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni-1">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</a></li>
    <li><a href="#optimized-traffic-management-with-istio-ambient-mode">Optimized Traffic Management with Istio Ambient Mode</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</details>

            
            <p>This article delves into the design principles, implementation, and how Ambient Mode enhances security and permission management in Istio CNI plugins. The content includes:</p>
<ul>
<li>Security risks of Init containers and their solutions.</li>
<li>Working principles and advantages of Istio CNI.</li>
<li>Implementation mechanism of Ambient Mode and its integration with CNI.</li>
</ul>
<h2 id="overview-of-istio-network-requirements-and-solutions">Overview of Istio Network Requirements and Solutions</h2>
<p>Istio service mesh intercepts and manages application traffic through the Sidecar mode. This mode injects a Sidecar Proxy and init containers into application pods and uses iptables rules to manage network traffic. For detailed deployment and operation processes, please refer to <a href="/en/blog/sidecar-injection-iptables-and-traffic-routing/" title="Understanding Sidecar Injection, Transparent Traffic Hijacking, and Traffic Routing in Istio">Understanding Sidecar Injection, Transparent Traffic Hijacking, and Traffic Routing in Istio</a>
. Although this method is effective on most Kubernetes platforms, the high dependency on privileges raises security concerns in multi-tenant environments.</p>
<h3 id="limitations-of-istio-init">Limitations of Istio-init</h3>
<p>During its initial network configuration, Istio adopted the <code>istio-init</code> container to initialize traffic interception rules, requiring containers to have advanced permissions to modify network configurations like IPTables rules. While this method effectively manages traffic, it significantly increases permission requirements and security risks. According to the <a href="https://istio.io/latest/docs/setup/additional-setup/cni/" title="Istio documentation" target="_blank" rel="noopener">Istio documentation</a>
, the <code>istio-init</code> container is injected into pods within the Istio mesh by default to hijack network traffic to Istio&rsquo;s Sidecar proxy. This process requires granting the Service Account deploying the pod the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-capabilities-for-a-container" title="&lt;code&gt;NET_ADMIN&lt;/code&gt; container permission" target="_blank" rel="noopener"><code>NET_ADMIN</code> container permission</a>
, which may contradict the security policies of some organizations.</p>
<h3 id="istio-cni-plugin">Istio CNI Plugin</h3>
<p>In response to this challenge, the Istio community introduced the <a href="https://github.com/istio/istio/tree/master/cni" title="Istio CNI" target="_blank" rel="noopener">Istio CNI</a>
 plugin, which avoids the need for init containers, allowing direct manipulation at the Kubernetes network layer, thereby reducing permission requirements and simplifying the deployment process, but with CNI compatibility issues.</p>
<h3 id="introduction-of-ambient-mode">Introduction of Ambient Mode</h3>
<p>Istio&rsquo;s Ambient Mode is an innovative sidecar-less solution that enhances network flexibility and security by <a href="/en/blog/traffic-interception-with-geneve-tunnel-with-istio-ambient-mesh/" title="using Geneve tunnels">using Geneve tunnels</a>
 or Istio CNI.</p>
<p>Only recently has the Istio community introduced a <a href="https://istio.io/latest/blog/2024/inpod-traffic-redirection-ambient/" title="universal solution compatible with any CNI" target="_blank" rel="noopener">universal solution compatible with any CNI</a>
. This mode addresses compatibility issues with any CNI, enabling Istio to more effectively manage traffic between services without affecting existing network policies.</p>
<h2 id="security-considerations-for-net_admin-permissions">Security Considerations for NET_ADMIN Permissions</h2>
<p>In containerized environments like Kubernetes and Docker, <code>NET_ADMIN</code> permissions allow processes within containers to perform extensive network-related operations, including modifying iptables rules, changing network interface configurations, managing IP routing tables, and controlling kernel parameters related to networking. However, the use of these permissions raises security concerns, especially regarding overprivileged access and potential attack surfaces.</p>
<p><strong>Best practices include</strong>:</p>
<ul>
<li><strong>Limiting scope of use</strong>: Grant <code>NET_ADMIN</code> permissions only when necessary and restrict them through Kubernetes network policies.</li>
<li><strong>Continuous monitoring and auditing</strong>: Enforce strict logging and monitoring for containers using <code>NET_ADMIN</code> permissions.</li>
</ul>
<h2 id="working-principles-of-istio-cni-plugin">Working Principles of Istio CNI Plugin</h2>
<p>The Istio CNI plugin is a binary file installed as an agent in the file system of each node. The following flowchart illustrates the working principles of the Istio CNI node agent:</p>
<pre class="mermaid">flowchart TB
    subgraph istio_cni_node_agent[Istio CNI Node Agent]
        direction LR
        install_plugin[Install Istio CNI plugin]
        update_config[Update node CNI config at /etc

/cni/net.d]
        monitor_paths[Monitor plugin and config paths]
        
        subgraph sidecar_mode["Sidecar Mode"]
            sidecar_setup[Configure iptables for pods]
        end
        
        subgraph ambient_mode["Ambient Mode"]
            ambient_server[Ambient Watch Server]
            sync_events[Synchronize pod events]
            configure_iptables[Configure iptables within pods]
        end

        install_plugin --> update_config
        update_config --> monitor_paths
        monitor_paths --> sidecar_mode
        monitor_paths --> ambient_mode
        ambient_mode --> ambient_server
        ambient_server --> sync_events
        sync_events --> configure_iptables
    end
</pre>

<ul>
<li><strong>Istio CNI Node Agent</strong> acts as an agent installed on each node.</li>
<li>It installs the Istio CNI plugin and updates the node’s CNI configuration.</li>
<li>The agent monitors the CNI plugin and config paths for changes.</li>
<li>In <strong>Sidecar Mode</strong>, it handles sidecar networking setups using iptables for pods.</li>
<li>In <strong>Ambient Mode</strong>, it synchronizes pod events to an ambient watch server, which then configures iptables within pods.</li>
<li>Nodes require elevated privileges like <code>CAP_SYS_ADMIN</code>, <code>CAP_NET_ADMIN</code>, and <code>CAP_NET_RAW</code> to function in either mode.</li>
</ul>
<h2 id="resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</h2>
<p>Istio&rsquo;s Ambient Mode is designed to adapt to all CNIs, transparently handling traffic redirection within pods using ztunnel without affecting existing CNI configurations. In this mode, Ambient Mode manages traffic through ztunnel to flow through the Istio service mesh, while standard CNIs focus on providing standardized network access for pods.</p>
<p>The primary responsibilities of CNI are to address network connectivity between Kubernetes Pods, such as assigning IP addresses and forwarding packets. In contrast, Ambient Mode needs to import traffic into ztunnel, which may be incompatible with CNI&rsquo;s network configuration. The main issues include:</p>
<ul>
<li>Mainstream CNI network configurations may conflict with Istio&rsquo;s CNI extensions, causing interruptions in traffic processing.</li>
<li>Using Istio CNI may affect the execution of these policies if the deployed network policies depend on CNI.</li>
</ul>
<p>To address these issues, traffic redirection is managed by running ztunnel in the same user space as the pod, avoiding conflicts with the kernel space modified by CNI. Thus, pods can connect directly to ztunnel, bypassing the influence of CNI.</p>
<p>The following sequence diagram describes the process under Ambient mode:</p>
<pre class="mermaid">sequenceDiagram
    participant K8s_API as Kubernetes API
    participant Plugin as CNI Plugin
    participant Agent as Ambient CNI Agent
    participant Server as Ambient Watch Server
    participant Ztunnel as ztunnel

    Plugin->>Agent: CmdAdd (Pod scheduled)
    Agent->>Server: Notify new pod
    Server->>K8s_API: Retrieve Pod Info
    K8s_API-->>Server: Pod Details
    Server->>Ztunnel: Setup iptables
    Ztunnel->>Server: Confirm Setup
    Server->>Agent: Configuration Complete
    Agent->>Plugin: CmdDel (Pod removed)
    Server->>Ztunnel: Remove iptables
    Ztunnel-->>Server: Confirmation
</pre>

<ul>
<li>
<p><strong>Ambient CNI Agent</strong> initiates interactions by listening for UDS events signaling pod creations.</p>
</li>
<li>
<p><strong>Ambient Watch Server</strong> modifies iptables within pods to redirect traffic to ztunnel as needed.</p>
</li>
<li>
<p><strong>ztunnel</strong> establishes connections and handles network traffic redirection within the Kubernetes cluster.</p>
</li>
</ul>
<h2 id="resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni-1">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</h2>
<p>To mitigate these conflicts, Istio&rsquo;s Ambient Mode avoids dependencies on the kernel space modified by CNI:</p>
<ul>
<li><strong>Run ztunnel in user space</strong>: This strategy allows ztunnel to run in the same user space as the pod, avoiding direct conflicts with CNI.</li>
<li><strong>Ensure CNI compatibility</strong>: Istio CNI configurations must be carried out without affecting existing CNI plugin configurations, ensuring normal communication between pods and traffic management.</li>
</ul>
<p>These measures help Istio&rsquo;s Ambient Mode effectively manage traffic between services without disrupting existing CNI plugins.</p>
<h2 id="optimized-traffic-management-with-istio-ambient-mode">Optimized Traffic Management with Istio Ambient Mode</h2>
<p>Istio&rsquo;s Ambient Mode employs an advanced traffic forwarding mechanism through <strong>node-local Ztunnel</strong>, allowing for the establishment of listening sockets within a Pod&rsquo;s network namespace. This setup facilitates effective redirection of encrypted (mTLS) and plaintext traffic originating from the service mesh. Not only does this approach enhance the flexibility of traffic management, but it also prevents potential conflicts with existing CNI plugins. Below is a detailed implementation flow of this mode:</p>
<pre class="mermaid">graph TD
    subgraph Kubernetes Cluster
    A[Pod with istio.io/dataplane-mode=ambient] -->|Detected| B(istio-cni node agent)
    B --> C{Pod Status}
    C -->|Newly Started| D[CNI Plugin Triggered]
    C -->|Already Running| E[New Pod Event]
    D & E --> F[Configure Redirection]
    F -->|Enters Pod's Network Namespace| G[Establish Network Redirection]
    G --> H[Notify Node Ztunnel]
    H -->|Creates Listening Sockets in Pod's Namespace| I[Node-local Ztunnel Proxy Instance]
    I --> J[Traffic Redirection Established]
    end

    J --> K{Traffic Type}
    K -->|mTLS| L[Encrypted Traffic Within Mesh]
    K -->|Plaintext| M[Handling Plaintext Traffic]
</pre>

<p>The specific steps involved are as follows:</p>
<ol>
<li><strong>Detection of Tags</strong>: The Istio CNI node agent detects Pods tagged with <code>istio.io/dataplane-mode=ambient</code>.</li>
<li><strong>Triggering the CNI Plugin</strong>: Based on Pod events (either a new start or an existing Pod joining the mesh), the CNI plugin is triggered, leading the Istio CNI node agent to configure traffic redirection.</li>
<li><strong>Configuring Redirection Rules</strong>: Network redirection rules are set up within the Pod’s network namespace to intercept and redirect traffic to the node-local ztunnel proxy.</li>
<li><strong>Establishment of Listening Sockets</strong>: The node-local ztunnel creates listening sockets within the Pod&rsquo;s network namespace to enable traffic redirection.</li>
<li><strong>Traffic Handling</strong>: The node-local ztunnel handles encrypted (mTLS) and plaintext traffic within the mesh, ensuring secure and efficient data transfer.</li>
</ol>
<p>Through this approach, Istio Ambient Mode provides a more effective and secure solution for managing inter-service traffic in Kubernetes environments.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This article thoroughly analyzes the design principles, implementation, and advantages of the Istio CNI plugin, particularly how Istio CNI addresses the permission and security issues present in traditional <code>istio-init</code> methods. Through these innovations, Istio has made significant progress in network security and operational simplicity, providing a more flexible and efficient method for implementing Istio in Kubernetes environments.</p>

          </div>

          
          
           <script type="module">
             import mermaid from 'https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.esm.min.mjs';
             mermaid.initialize({ startOnLoad: true });
           </script>
          

          <div class="col-12 mb-4">
            <div class="border-bottom">
            


<p class="edit-page">
<a href="https://github.com/rootsongjc/website/edit/master//blog/istio-cni-deep-dive/index.md">
  <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page
  </a>
</p>


            </div>
          </div>
          
          <div class="col-12">
              <li class="list-inline-item mr-4 mb-3 mb-md-0 text-light">
              
              <a href="/en/tags/cni" class="badge"> 
                  CNI</a> 
              <a href="/en/tags/istio" class="badge">  
                  Istio</a> 
              <a href="/en/tags/istio-cni" class="badge">  
                  Istio CNI</a> 
              <a href="/en/tags/ambient" class="badge">  
                  Ambient</a> 
              <a href="/en/tags/sidecar" class="badge">  
                  Sidecar</a> </li>
          </div>

          
          
<div class="col-12">
<ul class="pager blog-pager">

<li class="previous">
<a href="https://jimmysong.io/en/blog/cloud-native-ai-whitepaper/" data-toggle="tooltip" data-placement="top" title="In-depth Analysis of CNCF&#39;s Cloud Native AI Whitepaper">&larr; Previous Post</a>
</li>
 
</ul>
</div>


          
          
          <div class="col-12">
          
           <script src="https://giscus.app/client.js"
        data-repo="rootsongjc/rootsongjc.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzMTQ1MzczNA=="
        data-category="Announcements"
        data-category-id="DIC_kwDOAd_yJs4CPNtR"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        
        data-lang="en"
        
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

          
          </div>
        </div>
      </div>
      <!-- sidebar -->
      <aside class="col-lg-4 sidebar">
      <!-- recommend -->
      





<div class="bg-white md-4">
  <p class="sidebar-title">
  Related article
  </p>
  <!-- post-item -->
  
  <div class="media border-bottom border-color pb-3 mb-3">
    <div class="media-body">
      <a href="/en/blog/understanding-the-tls-encryption-in-istio/">
        <p class="mt-0 related-page-title">How Istio’s mTLS Traffic Encryption Works as Part of a Zero Trust Security Posture</p>
      </a>
      December 24, 2022
    </div>
  </div>
  
  <div class="media border-bottom border-color pb-3 mb-3">
    <div class="media-body">
      <a href="/en/blog/cni-deep-dive/">
        <p class="mt-0 related-page-title">Deep Dive into CNI: Container Network Interface</p>
      </a>
      April 15, 2024
    </div>
  </div>
  
  <div class="media border-bottom border-color pb-3 mb-3">
    <div class="media-body">
      <a href="/en/blog/tetrate-vulnerability-scaner/">
        <p class="mt-0 related-page-title">TVS: Istio and Envoy CVE Scanning Solution</p>
      </a>
      April 12, 2024
    </div>
  </div>
  
  <div class="media border-bottom border-color pb-3 mb-3">
    <div class="media-body">
      <a href="/en/blog/kubecon-eu-paris-recap/">
        <p class="mt-0 related-page-title">KubeCon EU 2024: Impressions and Recap from Paris</p>
      </a>
      March 27, 2024
    </div>
  </div>
  
  <div class="media border-bottom border-color pb-3 mb-3">
    <div class="media-body">
      <a href="/en/blog/ica-certificate/">
        <p class="mt-0 related-page-title">ICA Certification: Latest Changes and Exam Preparation Guide for Istio Skills</p>
      </a>
      March 7, 2024
    </div>
  </div>
  
</div>


      <!-- /recommend -->
      <!-- toc -->
      
<div class="bg-white py-4 box-shadow mb-4 sticky-top aside-toc d-none d-sm-block">
    <p class="sidebar-title">
    Table of content
    </p>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#overview-of-istio-network-requirements-and-solutions">Overview of Istio Network Requirements and Solutions</a>
      <ul>
        <li><a href="#limitations-of-istio-init">Limitations of Istio-init</a></li>
        <li><a href="#istio-cni-plugin">Istio CNI Plugin</a></li>
        <li><a href="#introduction-of-ambient-mode">Introduction of Ambient Mode</a></li>
      </ul>
    </li>
    <li><a href="#security-considerations-for-net_admin-permissions">Security Considerations for NET_ADMIN Permissions</a></li>
    <li><a href="#working-principles-of-istio-cni-plugin">Working Principles of Istio CNI Plugin</a></li>
    <li><a href="#resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</a></li>
    <li><a href="#resolving-conflicts-between-istio-ambient-mode-and-kubernetes-cni-1">Resolving Conflicts Between Istio Ambient Mode and Kubernetes CNI</a></li>
    <li><a href="#optimized-traffic-management-with-istio-ambient-mode">Optimized Traffic Management with Istio Ambient Mode</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</div>

      <!-- /toc -->
      </aside>
      <!-- /sidebar -->
    </div>
  </div>
</section>



      
    

<footer>
  
  <div class="footer bg-footer section-sm border-bottom">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-sm-8 mb-5 mb-lg-0">
          
          <h4 class="text-white mb-5 text-uppercase">Contact</h4>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">Jimmy&rsquo;s Twitter</li>
            
            
            <li class="mb-4"><img src="/images/jimmysong-twitter-qr-code.webp" width="128px" alt="footer image"></li>
            
            
            
          
        </div>
        
        

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">Blog</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/blog/istio-cni-deep-dive/">Analysis of Istio CNI: Enhancing Traffic Management and Security</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/cloud-native-ai-whitepaper/">In-depth Analysis of CNCF&#39;s Cloud Native AI Whitepaper</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/blog/cni-deep-dive/">Deep Dive into CNI: Container Network Interface</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">links</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener">Awesome Cloud Native</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener">Cloud Native Community(China)</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener">Tetrate - Service Mesh Company</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://docs.tetrate.io/istio-distro/" target="_blank" rel="noopener">Tetrate Istio Distro</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">Courses</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals" target="_blank" rel="noopener">Envoy Fundamentals</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals" target="_blank" rel="noopener">Istio Fundamentals</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">new notice</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/en/notice/kubecon-eu-2024/">See you in KubeCon Paris!</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/cloud-native-public-library/">Announcement of Cloud Native Library</a></li>
            
            <li class="mb-3"><a class="text-color" href="/en/notice/tetrate-recruit/">The Enterprise Service Mesh company Tetrate is hiring</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-9 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song All Right Reserved</p>
        </div>
        <div class="col-sm-3 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" rel="noopener"><i class="fa fa-twitter "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" rel="noopener"><i class="fa fa-github "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" rel="noopener"><i class="fa fa-linkedin "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" target="_blank" rel="noopener"><i class="fa fa-envelope "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="/blog/index.xml" target="_blank" rel="noopener"><i class="fa fa-rss "></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>




<!-- JS Plugins -->

<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/venobox/venobox.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script>
    anchors.add()
</script>




<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, 'Copied')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>




<script>
tocbot.init({
  
  tocSelector: '.aside-toc #TableOfContents',
  
  contentSelector: '.content',
  
  headingSelector: 'h1, h2, h3, h4',
  
  hasInnerContainers: false,
  collapseDepth: 3
});
</script>












<script src="/js/wowchemy-search.min.0b3293fc75f976f49fb5a3d247c91f2e.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content">
      <div class="search-hit-name">
        <div class="article-metadata search-hit-type">{{relpermalink}}</div>
        <a href="{{relpermalink}}">{{title}}</a>
        <p class="search-hit-description">{{snippet}}</p>
      </div>
    </div>
  </div>
</script>


</body>

</html>
