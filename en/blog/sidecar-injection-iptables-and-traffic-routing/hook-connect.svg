<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" width="594" height="602" version="1.1" viewBox="742 170 594 602"><defs><font-face x-height="517" ascent="975.006" cap-height="714" descent="-216.995" font-family="Helvetica Neue" font-size="16" font-weight="700" panose-1="2 0 8 3 0 0 0 9 0 4" slope="0" underline-position="-100" underline-thickness="50" units-per-em="1000"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><marker id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" color="#000" markerHeight="6" markerUnits="strokeWidth" markerWidth="7" orient="auto" overflow="visible" viewBox="-1 -3 7 6"><g><path fill="currentColor" stroke="currentColor" stroke-width="1" d="M 4.8 0 L 0 -1.8 L 0 1.8 Z"/></g></marker></defs><metadata>Produced by OmniGraffle 7.11.5</metadata><g id="hook-connect_____" fill="none" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1"><title>hook-connect 原理示意图</title><rect width="594" height="602" x="742" y="170" fill="#fff"/><g id="hook-connect_____: Layer 1"><title>Layer 1</title><g id="Graphic_2"><rect width="175.748" height="55.276" x="772.441" y="192.756" fill="#333"/><rect width="175.748" height="55.276" x="772.441" y="192.756" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(777.44095 210.66165)"><tspan x="2.914" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Sidecar local listener</tspan></text></g><g id="Graphic_3"><rect width="175.748" height="55.276" x="772.441" y="301.181" fill="#0a55a8"/><rect width="175.748" height="55.276" x="772.441" y="301.181" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(777.44095 319.08684)"><tspan x="44.21" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">LOCAL-IN</tspan></text></g><g id="Graphic_4"><rect width="175.748" height="55.276" x="1132.441" y="192.756" fill="#333"/><rect width="175.748" height="55.276" x="1132.441" y="192.756" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(1137.441 210.66165)"><tspan x="44.514" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">Local App</tspan></text></g><g id="Graphic_5"><rect width="175.748" height="55.276" x="772.441" y="409.606" fill="#0a55a8"/><rect width="175.748" height="55.276" x="772.441" y="409.606" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(777.44095 427.51204)"><tspan x="26.13" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">tproxy-redirect</tspan></text></g><g id="Graphic_6"><rect width="175.748" height="55.276" x="772.441" y="518.032" fill="#0a55a8"/><rect width="175.748" height="55.276" x="772.441" y="518.032" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(777.44095 535.93724)"><tspan x="20.954" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">INBOUND-chain</tspan></text></g><g id="Graphic_7"><rect width="175.748" height="55.276" x="772.441" y="626.457" fill="#0a55a8"/><rect width="175.748" height="55.276" x="772.441" y="626.457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(777.44095 644.36244)"><tspan x="29.402" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">PREROUTING</tspan></text></g><g id="Graphic_8"><rect width="175.748" height="55.276" x="1132.441" y="626.457" fill="#0a55a8"/><rect width="175.748" height="55.276" x="1132.441" y="626.457" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(1137.441 644.36244)"><tspan x="47.482" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">loopback</tspan></text></g><g id="Graphic_9"><rect width="175.748" height="55.276" x="1132.441" y="518.032" fill="#0a55a8"/><rect width="175.748" height="55.276" x="1132.441" y="518.032" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(1137.441 535.93724)"><tspan x="35.458" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">LOCAL-OUT</tspan></text></g><g id="Graphic_10"><rect width="175.748" height="55.276" x="1132.441" y="409.606" fill="#0a55a8"/><rect width="175.748" height="55.276" x="1132.441" y="409.606" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(1137.441 427.51204)"><tspan x="4.49" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">OUTBOUND redirect</tspan></text></g><g id="Graphic_11"><rect width="175.748" height="55.276" x="1132.441" y="301.181" fill="#0a55a8"/><rect width="175.748" height="55.276" x="1132.441" y="301.181" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text fill="#fff" transform="translate(1137.441 319.08684)"><tspan x="51.906" y="16" fill="#fff" font-family="Helvetica Neue" font-size="16" font-weight="700">connect</tspan></text></g><g id="Line_12"><line x1="860.315" x2="860.315" y1="626.457" y2="586.207" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_13"><line x1="860.315" x2="860.315" y1="518.032" y2="477.782" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_14"><line x1="860.315" x2="860.315" y1="409.606" y2="369.357" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_15"><line x1="860.315" x2="860.315" y1="301.181" y2="260.932" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_16"><line x1="1220.315" x2="1220.315" y1="248.031" y2="288.281" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_17"><line x1="1220.315" x2="1220.315" y1="356.457" y2="396.706" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_18"><line x1="1220.315" x2="1220.315" y1="464.882" y2="505.132" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_19"><line x1="1220.315" x2="1220.315" y1="573.307" y2="613.557" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_20"><line x1="1132.441" x2="961.089" y1="654.095" y2="654.095" stroke="#000" stroke-dasharray="8 8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)"/></g><g id="Line_21"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" marker-end="url(#FilledArrow_Marker)" d="M 861 755 L 860.6575 718.36614 L 860.315 700.6323 L 860.315 694.6323"/></g><g id="Graphic_22"><rect width="71.92" height="29.464" x="824.742" y="708.404" fill="#fff"/><text fill="#000" transform="translate(829.7421 713.4038)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">inbound</tspan></text></g><g id="Graphic_23"><rect width="83.2" height="29.464" x="1178.715" y="256.077" fill="#fff"/><text fill="#000" transform="translate(1183.715 261.0772)"><tspan x="0" y="16" fill="#000" font-family="Helvetica Neue" font-size="16" font-weight="700">outbound</tspan></text></g></g></g></svg>