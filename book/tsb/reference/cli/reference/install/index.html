<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>tctl install · Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Install command">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.123.7">

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/animate/animate.css">
  
  <link rel="stylesheet" href="/plugins/venobox/venobox.css">
  
  <link rel="stylesheet" href="/plugins/themify-icons/themify-icons.css">
  
  <link rel="stylesheet" href="/plugins/hightlight/syntax.css">
  
  <link rel="stylesheet" href="/plugins/fontawesome/font-awesome.min.css">
  
  <link rel="stylesheet" href="/plugins/tocbot/tocbot.css">
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.css" media="screen">

  <!--Favicon-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="images/favicon.png" />

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  
  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/book/tsb/reference/cli/reference/install/" />
  <meta property="og:title" content="tctl install" />
  <meta property="twitter:title" content="tctl install" />
  
  <meta property="og:description" content="Install command" />
  <meta property="twitter:description" content="Install command" />
  
  
  <meta property="og:image" content="https://jimmysong.io/favicon.png">
  <meta property="twitter:image" content="https://jimmysong.io/favicon.png">
  
  
  
</head>
<body>
    <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>

<header class="fixed-top header">
  
  
  <div class="top-header py-2 bg-white">
    <div class="container">
      <div class="row no-gutters align-items-center">
        <div class="col-12 text-center">
          <ul class="list-inline">
            <li class="list-inline-item">
                云原生资料库现已合并到主站，<a href="/book/" title="点击查看图书">点击查看图书</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="navigation w-100  top-hider ">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <img class="img-fluid" width="200px" src="/images/logo.svg" alt="Jimmy Song&#39;s Cloud Native Blog">
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">博客</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">图书</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://cloudnative.to" target="_blank" rel="noopener">社区</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">视频</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">联系</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">通知</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
            </li>
            
            

          
          
          
          <!-- search -->
          <button id="searchOpen" class="search-btn js-search"><i class="fa fa-search text-dark"></i></button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


    <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>站内搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fa fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        <i class="fa fa-search" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="输入搜索词" autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="输入搜索词">
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

    
	
	
<section class="bg-cover page-title-section overlay" style="background-image: url('/'),url('/images/backgrounds/page-title.webp');">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <ul class="list-inline custom-breadcrumb">
                    
                          
                      
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/">
                            
                              主页
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/book/">
                            
                              图书
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/book/tsb/">
                            
                              TSB 手册
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/book/tsb/reference/">
                            
                              参考
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                        <li class="list-inline-item h2">
                          <a class="text-white font-secondary" href="/book/tsb/reference/cli/">
                            
                              CLI
                            
                          </a>
                        </li>
                        <li class="list-inline-item"><i class="ti-angle-right text-white"></i></li>
                      
                    
                          <li class="list-inline-item h3 active" aria-current="page">
                            tctl install
                          </li>
                    
                    
                    
                </ul>
                <p class="text-white">Install command</p>
            </div>
        </div>
    </div>
</section>

	

<div class="container blog">
  <div class="row flex-nowrap">
    <aside class="docs-sidebar d-none d-block">
      <nav class="collapse docs-links bg-white py-4 box-shadow mb-4 sticky-top aside-toc d-none d-sm-block" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      
      <ul class="nav docs-sidenav">
        <li><a href="/book/"><i class="fa fa-arrow-left pr-1"></i>图书</a></li>
      </ul>
      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc6f9d31712b40026dfd1dc897042cf50&#34;)" href="#idc6f9d31712b40026dfd1dc897042cf50" aria-expanded="false" aria-controls="idc6f9d31712b40026dfd1dc897042cf50" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/">参考</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc6f9d31712b40026dfd1dc897042cf50" aria-expanded="false" aria-controls="idc6f9d31712b40026dfd1dc897042cf50">
    
    <i class="fa fa-angle-down" id="caret-idc6f9d31712b40026dfd1dc897042cf50"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="idc6f9d31712b40026dfd1dc897042cf50">
      



  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id932f79a8417c84eacca461974a7d627c&#34;)" href="#id932f79a8417c84eacca461974a7d627c" aria-expanded="false" aria-controls="id932f79a8417c84eacca461974a7d627c" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/cli/">CLI</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id932f79a8417c84eacca461974a7d627c" aria-expanded="false" aria-controls="id932f79a8417c84eacca461974a7d627c">
    
    <i class="fa fa-angle-down" id="caret-id932f79a8417c84eacca461974a7d627c"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id932f79a8417c84eacca461974a7d627c">
      



  <li class="child level "><a href="/book/tsb/reference/cli/guide/index/">入门指南</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/tctl/">tctl</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/apply/">tctl apply</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/collect/">tctl collect</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/completion/">tctl completion</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/config/">tctl config</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/delete/">tctl delete</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/edit/">tctl edit</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/experimental/">tctl experimental</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/get/">tctl get</a></li>




  <li class="child level active"><a href="/book/tsb/reference/cli/reference/install/">tctl install</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/login/">tctl login</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/ui/">tctl ui</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/validate/">tctl validate</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/version/">tctl version</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/whoami/">tctl whoami</a></li>




  <li class="child level "><a href="/book/tsb/reference/cli/reference/workload-entry-annotations/">WorkloadEntry Annotations</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id5a52d58cdc91fee6dc50d78802868b40&#34;)" href="#id5a52d58cdc91fee6dc50d78802868b40" aria-expanded="false" aria-controls="id5a52d58cdc91fee6dc50d78802868b40" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/rest-api/">REST API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id5a52d58cdc91fee6dc50d78802868b40" aria-expanded="false" aria-controls="id5a52d58cdc91fee6dc50d78802868b40">
    
        <i class="fa fa-angle-right" id="caret-id5a52d58cdc91fee6dc50d78802868b40"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id5a52d58cdc91fee6dc50d78802868b40">
      



  <li class="child level "><a href="/book/tsb/reference/rest-api/guide/">REST API 指南</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id917594f5bd0ac2b25483d9c06624a155&#34;)" href="#id917594f5bd0ac2b25483d9c06624a155" aria-expanded="false" aria-controls="id917594f5bd0ac2b25483d9c06624a155" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/grpc-api/">gRPC API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id917594f5bd0ac2b25483d9c06624a155" aria-expanded="false" aria-controls="id917594f5bd0ac2b25483d9c06624a155">
    
        <i class="fa fa-angle-right" id="caret-id917594f5bd0ac2b25483d9c06624a155"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id917594f5bd0ac2b25483d9c06624a155">
      



  <li class="child level "><a href="/book/tsb/reference/grpc-api/guide/">gRPC API 指南</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id6ded9bbb5da8200cb390ab39be1b81de&#34;)" href="#id6ded9bbb5da8200cb390ab39be1b81de" aria-expanded="false" aria-controls="id6ded9bbb5da8200cb390ab39be1b81de" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/yaml-api/">YAML API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id6ded9bbb5da8200cb390ab39be1b81de" aria-expanded="false" aria-controls="id6ded9bbb5da8200cb390ab39be1b81de">
    
        <i class="fa fa-angle-right" id="caret-id6ded9bbb5da8200cb390ab39be1b81de"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id6ded9bbb5da8200cb390ab39be1b81de">
      



  <li class="child level "><a href="/book/tsb/reference/yaml-api/guide/">YAML API 指南</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idec1805b5744cd19bc93a17bc2db22610&#34;)" href="#idec1805b5744cd19bc93a17bc2db22610" aria-expanded="false" aria-controls="idec1805b5744cd19bc93a17bc2db22610" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/k8s-api/">Kubernetes API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idec1805b5744cd19bc93a17bc2db22610" aria-expanded="false" aria-controls="idec1805b5744cd19bc93a17bc2db22610">
    
        <i class="fa fa-angle-right" id="caret-idec1805b5744cd19bc93a17bc2db22610"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idec1805b5744cd19bc93a17bc2db22610">
      



  <li class="child level "><a href="/book/tsb/reference/k8s-api/tsb-crds-gen/">API 参考</a></li>




  <li class="child level "><a href="/book/tsb/reference/k8s-api/guide/">TSB CRD 参考</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id62c397a256863e301c932d19a6c64648&#34;)" href="#id62c397a256863e301c932d19a6c64648" aria-expanded="false" aria-controls="id62c397a256863e301c932d19a6c64648" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/book/tsb/reference/samples/">示例应用</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id62c397a256863e301c932d19a6c64648" aria-expanded="false" aria-controls="id62c397a256863e301c932d19a6c64648">
    
        <i class="fa fa-angle-right" id="caret-id62c397a256863e301c932d19a6c64648"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id62c397a256863e301c932d19a6c64648">
      



  <li class="child level "><a href="/book/tsb/reference/samples/httpbin/">安装 httpbin</a></li>




  <li class="child level "><a href="/book/tsb/reference/samples/opa/">安装 Open Policy Agent</a></li>




  <li class="child level "><a href="/book/tsb/reference/samples/sleep-service/">安装 sleep</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    

    
  
</nav>

    </aside>

    
    <aside class="d-none d-block col-2 docs-toc">
      
<div class="bg-white py-4 box-shadow mb-4 sticky-top aside-toc d-none d-sm-block">
    <p class="sidebar-title">
    目录
    </p>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#tctl-install-cluster-certs">tctl install cluster-certs</a></li>
    <li><a href="#tctl-install-cluster-service-account">tctl install cluster-service-account</a></li>
    <li><a href="#tctl-install-demo">tctl install demo</a></li>
    <li><a href="#tctl-install-image-sync">tctl install image-sync</a></li>
    <li><a href="#tctl-install-manifest">tctl install manifest</a></li>
    <li><a href="#tctl-install-manifest-cluster-operators">tctl install manifest cluster-operators</a></li>
    <li><a href="#tctl-install-manifest-control-plane-secrets">tctl install manifest control-plane-secrets</a></li>
    <li><a href="#tctl-install-manifest-management-plane-operator">tctl install manifest management-plane-operator</a></li>
    <li><a href="#tctl-install-manifest-management-plane-secrets">tctl install manifest management-plane-secrets</a></li>
  </ul>
</nav>
</div>

    </aside>

    <main class="py-md-3 pl-md-3 mt-3 article-content col-md-8 col-12" role="main">

      <article class="content">

          <p>Generates install manifests and applies it to a cluster</p>
<p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help   help for install
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-cluster-certs">tctl install cluster-certs</h2>
<p>Generate cluster certs for securely communicating with the management plane</p>
<pre tabindex="0"><code>tctl install cluster-certs [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Retrieve cluster certs
tctl install cluster-certs --cluster &lt;cluster-name&gt;&#34;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --cluster string           The name of the cluster to generate certs for.
  -x, --context string           The kube context for the management plane cluster.
  -n, --controlplane string      The namespace in the cluster that the control plane is installed in. (default &#34;istio-system&#34;)
  -h, --help                     help for cluster-certs
  -k, --kubeconfig string        The kubeconfig file for the management plane cluster. Must be able to manage secrets and cert-manager custom resources.
  -m, --managementplane string   The namespace that the management plane is installed in. (default &#34;tsb&#34;)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-cluster-service-account">tctl install cluster-service-account</h2>
<p>Generate a cluster service account key for securely communicating with the management plane</p>
<pre tabindex="0"><code>tctl install cluster-service-account [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Create a cluster service account key
tctl install cluster-service-account --cluster &lt;cluster-name&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --cluster string   The name of the cluster to generate certs for.
      --create-cluster   Create a cluster object in Service Bridge if it doesn&#39;t exist (default true)
  -h, --help             help for cluster-service-account
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-demo">tctl install demo</h2>
<p>Install a batteries-included Service Bridge into a single Kubernetes cluster.</p>
<p><strong>Synopsis</strong></p>
<p>Install a batteries-included Service Bridge into a single Kubernetes cluster.</p>
<p>The CLI will be automatically preconfigured to connect to the installed Service Bridge as an Administrator.
The configuration will be saved in a profile named after the configured Kubernetes context, and the Bridge
connection configuration and the user configuration will be named after the Kubernetes cluster where Service
Bridge has been installed.</p>
<p>The Kubernetes context to deploy to is read from the environment&rsquo;s configured kubeconfig. See
<a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" title="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/</a>
 for more information on
kubeconfig.</p>
<pre tabindex="0"><code>tctl install demo [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install demo --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --admin-password string    The password for the superuser. By default a secure password will be auto-generated.
      --cluster string           The name of the demo cluster. (default &#34;demo&#34;)
  -h, --help                     help for demo
  -o, --org string               The organization to configure (default &#34;tetrate&#34;)
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --timeout duration         Timeout to login to the management plane. (default 30s)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-image-sync">tctl install image-sync</h2>
<p>Copy images from Tetrate&rsquo;s registry to another registry</p>
<pre tabindex="0"><code>tctl install image-sync [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Sync latest images
tctl install image-sync --username &lt;username&gt; --apikey &lt;apikey&gt; --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --accept-eula         Accept the EULA. This should be used in CI/CD pipelines where users have already read and accepted the EULA.
  -k, --apikey string       Tetrate Container Registry API Key [required]. Can also be
                            specified via stdin or TCTL_IMAGE_SYNC_APIKEY env variable. This flag
                            takes precedence over the env variable.
      --apikey-stdin        Tetrate Container Registry API Key specified from stdin.
                            Can also be specified via flag or TCTL_IMAGE_SYNC_APIKEY env variable. This takes precedence over
                            the flag and env variable.
      --create-repository   If set to false, disable the creation of the ECR repository if it doesn&#39;t exists. (default true)
  -h, --help                help for image-sync
      --just-print          If set, the image list will be printed to stdout, but images will not be synchronized
      --parallel            If set, synchronize images in parallel. Set --parallel=false to synchronize images serially (default true)
      --raw                 DEPRECATED, WILL BE REMOVED IN 1.7. If set, in conjunction with just-print, the output will only contain the image list (default true)
  -r, --registry string     The user-provided registry where images are pushed [required]
      --show-eula           Show the EULA.
      --skip-demo-images    If set to true, don&#39;t download demo images like Postgres.
      --skip-optional       If set to true, don&#39;t download optional third-party images like (kubegres or kube-rbac-proxy).
  -u, --username string     Tetrate Container Registry username [required]. Can also be
                            specified via TCTL_IMAGE_SYNC_USERNAME env variable. This flag
                            takes precedence over the env variable.
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest">tctl install manifest</h2>
<p>Output the Kubernetes manifests for installing Service Bridge to stdout</p>
<p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help   help for manifest
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-cluster-operators">tctl install manifest cluster-operators</h2>
<p>Output the Kubernetes manifests for installing the cluster operators (control plane and data plane) to stdout.</p>
<pre tabindex="0"><code>tctl install manifest cluster-operators [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install manifest cluster-operators --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -n, --controlplane string      The namespace to deploy the control plane and its operator into. (default &#34;istio-system&#34;)
  -d, --dataplane string         The namespace to deploy the data plane and its operator into. (default &#34;istio-gateway&#34;)
      --exclude-controlplane     Don&#39;t render the control plane operator.
      --exclude-dataplane        Don&#39;t render the data plane operator.
  -h, --help                     help for cluster-operators
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-control-plane-secrets">tctl install manifest control-plane-secrets</h2>
<p>Output the Kubernetes manifests for installing the control plane to stdout, including the relevant secrets.</p>
<p><strong>Synopsis</strong></p>
<p>This command provides an easy way to generate correctly formatted secrets for installing the control plane. It should be run as part of installation or upgrade of Service Bridge to ensure the correct secret format for the new version.</p>
<p>Manifests are printed to stdout so that they can be committed to source control or applied directly to a Kubernetes cluster depending on deployment preference.</p>
<p>It automatically generates tokens for the control plane to communicate with the management plane. Therefore, you must be logged into the management plane with the correct permissions to create the tokens. This token generation is safe to run multiple times and does not revoke previously created tokens.</p>
<pre tabindex="0"><code>tctl install manifest control-plane-secrets [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Output secrets with required flags
tctl install manifest control-plane-secrets \
	--cluster-service-account &#34;$(cat cluster-service-account-key.jwk)&#34; \
	--cluster demo

# Output secrets with default values for required flags
tctl install manifest control-plane-secrets -y

# Load overlay custom resource from flag
tctl install manifest control-plane -y -f control-cr.yaml

# Load overlay custom resource from stdin
cat control-cr.yaml | tctl install manifest control-plane -y -f-

# Apply directly to Kubernetes
tctl install manifest control-plane-secrets -y | kubectl apply -f-
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -y, --allow-defaults                           Use default values for required fields that aren&#39;t provided. DO NOT USE IN PRODUCTION
      --cluster string                           The name of the cluster on which this control plane will be installed [required]. This is what Service Bridge will refer to the cluster as. (default &#34;default&#34;)
      --cluster-service-account string           The cluster service account key JWK used to authenticate with the management plane
      --controlplane string                      The namespace of the control plane (default &#34;istio-system&#34;)
      --create-cluster                           Create a cluster object in Service Bridge if it doesn&#39;t exist (default true)
      --elastic-ca-certificate string            The CA certificate to validate Elasticsearch connections when Elasticsearch is configured to present a self-signed certificate.
      --elastic-password string                  The password Service Bridge will use to communicate with Elasticsearch.
      --elastic-username string                  The username Service Bridge will use to communicate with Elasticsearch.
  -f, --file string                              The custom resource file describing the control plane.
  -h, --help                                     help for control-plane-secrets
      --management-plane-ca-certificate string   The CA certificate to validate TSB management plane APIs if the management plane is configured to present a self-signed certificate.
      --redis-password string                    Password for Redis which is used as the backend for the rate limit server in the control plane
      --redis-tls                                Enable TLS between the rate limit Redis client and server.
      --redis-tls-ca-cert string                 The CA certificate to validate the TLS connection between the rate limit Redis client and server.
      --redis-tls-client-cert string             The client certificate to be used when establishing a mTLS connection between the rate limit Redis client and server.
      --redis-tls-client-key string              The client key to be used when establishing a mTLS connection between the rate limit Redis client and server.
      --xcp-central-ca-bundle string             The CA bundle to validate the certificates presented by XCP Central.
      --xcp-certs string                         The kubernetes secret yaml string for the cluster cert used to securely communicate with the management plane. Can be generated from &#34;tctl install cluster-certs&#34;.
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-management-plane-operator">tctl install manifest management-plane-operator</h2>
<p>Output the Kubernetes manifests for installing the management plane operator to stdout.</p>
<pre tabindex="0"><code>tctl install manifest management-plane-operator [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install manifest management-plane-operator --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help                     help for management-plane-operator
  -m, --managementplane string   The namespace to deploy the management plane and its operator into. (default &#34;tsb&#34;)
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-management-plane-secrets">tctl install manifest management-plane-secrets</h2>
<p>Output the Kubernetes manifests for installing the management plane to stdout, including the relevant secrets.</p>
<p><strong>Synopsis</strong></p>
<p>This command provides an easy way to generate correctly formatted secrets for installing the management plane. It should be run as part of installation or upgrade of Service Bridge to ensure the correct secret format for the new version.</p>
<p>Manifests are printed to stdout so that they can be committed to source control or applied directly to a Kubernetes cluster depending on deployment preference.</p>
<p>If certificates are not passed to the command, it will automatically generate self-signed certficates using the hostname and organization you provide. If hostname and organization are also not passed, you can opt for self signed certs through ManagementPlane CR.
It is not recommended to use self-signed certificates in production.</p>
<pre tabindex="0"><code>tctl install manifest management-plane-secrets [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Output secrets for all required flags
tctl install manifest management-plane-secrets \
    --elastic-password tsb-elastic-password \
    --elastic-username tsb \
    --ldap-bind-dn 
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -y, --allow-defaults                        Use default values for required fields that aren&#39;t provided. DO NOT USE IN PRODUCTION.
      --elastic-ca-certificate string         The CA certificate to validate Elasticsearch connections when Elasticsearch is configured to present a self-signed certificate
      --elastic-password string               The password Service Bridge will use to communicate with Elasticsearch [required] (default &#34;tsb-elastic-password&#34;)
      --elastic-username string               The username Service Bridge will use to communicate with Elasticsearch [required] (default &#34;tsb&#34;)
  -f, --file string                           The custom resource file describing the management plane
  -h, --help                                  help for management-plane-secrets
      --ldap-bind-dn string                   The DN of the user Service Bridge will use to connect to the LDAP server (default &#34;cn=admin,dc=tetrate,dc=io&#34;)
      --ldap-bind-password string             The password Service Bridge will use to connect to the LDAP server (default &#34;admin&#34;)
      --ldap-ca-certificate string            The CA certificate to validate LDAP connections when LDAP is configured to present a self-signed certificate
      --managementplane string                The namespace to deploy the management plane and secrets into (default &#34;tsb&#34;)
      --oidc-client-secret string             The client secret used to connect to the OIDC server
      --oidc-device-client-secret string      The client secret used for device auth with the OIDC server
      --postgres-ca-certificate string        The CA certificate to validate Postgres connections when Postgres is configured to present a self-signed certificate
      --postgres-client-certificate string    The client certificate that Service Bridge needs to provide to Postgres when Postgres is configured to mutually authenticate
      --postgres-client-key string            The client private key that Service Bridge needs to sign requests to Postgres with when Postgres is configured to mutually authenticate
      --postgres-password string              The password Service Bridge will use to communicate with Postgres [required] (default &#34;tsb-postgres-password&#34;)
      --postgres-username string              The username Service Bridge will use to communicate with Postgres [required] (default &#34;tsb&#34;)
      --teamsync-azure-client-secret string   The client secret used to connect to Azure AD to synchronize users and groups
      --tsb-admin-password string             The Service Bridge admin password [required]
      --tsb-certs-secret                      Automatically install management plane tsb-certs for secure communication with control planes. This is an alternate to setting self-signed cert issuer in the ManagementPlane CR, so set this to false if ManagementPlane CR is configured for self signed certs (default true)
      --tsb-server-certificate string         The certificate for the Service Bridge API server to present [required]
      --tsb-server-key string                 The private key for the Service Bridge API server to sign requests with [required]
      --tsb-tls-hostname string               A comma-separated list of hostnames and IPs for self-signed certificate generation if Service Bridge server certificate/key pair is not provided (default &#34;demo.tsb.tetrate.io&#34;)
      --tsb-tls-org string                    The organization for self-signed certificate generation if Service Bridge server certificate/key pair is not provided (default &#34;tetrate&#34;)
      --xcp-certs                             Automatically install management plane certs for secure communication with control planes. Assumes cert-manager is installed in the management plane cluster
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/tsb/">TSB</a>
  
</div>


          
<div class="col-12">
<ul class="pager blog-pager">

<li class="next">
<a href="https://jimmysong.io/book/tsb/reference/cli/reference/login/" data-toggle="tooltip" data-placement="top" title="tctl login">下一篇 &rarr;</a>
</li>
 
<li class="previous">
<a href="https://jimmysong.io/book/tsb/reference/cli/reference/get/" data-toggle="tooltip" data-placement="top" title="tctl get">&larr; 上一篇</a>
</li>

</ul>
</div>


        <div class="body-footer">
          <p>最后更新于： 2023-08-09</p>

            <div class="border-bottom">
            


            </div>
          
          <script src="https://giscus.app/client.js"
        data-repo="rootsongjc/rootsongjc.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkzMTQ1MzczNA=="
        data-category="Announcements"
        data-category-id="DIC_kwDOAd_yJs4CPNtR"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        
        data-lang="zh-CN"
        
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

          

        </div>

          
          

      </article>

    </main>
  </div>
</div>

      
    

<footer>
  
  <div class="footer bg-footer section-sm border-bottom">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-sm-8 mb-5 mb-lg-0">
          
          <h4 class="text-white mb-5 text-uppercase">联系</h4>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">Jimmy Song 的微信公众号</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="128px" alt="footer image"></li>
            
            
            
          
        </div>
        
        

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">博客</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/tetrate-vulnerability-scaner/">TVS：Istio 和 Envoy CVE 扫描解决方案</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/kubecon-eu-paris-recap/">KubeCon EU 2024 巴黎见闻与回顾</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/ica-certificate/">ICA 认证：Istio 技能认证的最新变化和考试准备指南</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">链接</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener">Tetrate 公司</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">云原生学院|Bilibili</a></li>
            
            <li class="mb-3"><a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener">云原生开源项目大全</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener">云原生社区（中国）</a></li>
            
            <li class="mb-3"><a class="text-color" href="/book" target="_blank" rel="noopener">云原生资料库</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">教程</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener">Envoy 基础教程</a></li>
            
            <li class="mb-3"><a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener">Istio 基础教程</a></li>
            
            <li class="mb-3"><a class="text-color" href="/book/kubernetes-handbook/" target="_blank" rel="noopener">Kubernetes 基础教程</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/istio-service-mesh-book/" target="_blank" rel="noopener">深入理解 Istio</a></li>
            
          </ul>
        </div>

        
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-5 mb-md-0">
          <h4 class="text-white mb-5 text-uppercase">通知</h4>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-library-migration/">云原生资料库已整合至主站</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-eu-2024/">KubeCon 欧洲 2024 巴黎见！</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/spiffe-and-spire/">资料分享：使用 SPIFFE 和 SPIRE 实现零信任安全身份</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-9 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song 保留所有权利</p>
        </div>
        <div class="col-sm-3 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" rel="noopener"><i class="fa fa-twitter "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" rel="noopener"><i class="fa fa-github "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" rel="noopener"><i class="fa fa-linkedin "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="mailto:jimmysong@jimmysong.io" target="_blank" rel="noopener"><i class="fa fa-envelope "></i></a></li>
            
            <li class="list-inline-item"><a class="d-inline-block p-2" href="/blog/index.xml" target="_blank" rel="noopener"><i class="fa fa-rss "></i></a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>




<!-- JS Plugins -->

<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/venobox/venobox.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>



<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>









<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>




<script>
tocbot.init({
  
  tocSelector: '.aside-toc #TableOfContents',
  
  contentSelector: '.content',
  
  headingSelector: 'h1, h2, h3, h4',
  
  hasInnerContainers: false,
  collapseDepth: 3
});
</script>












<script src="/js/wowchemy-search.min.24b10d3f00c0f34ae65d1a239e1667f5.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content">
      <div class="search-hit-name">
        <div class="article-metadata search-hit-type">{{relpermalink}}</div>
        <a href="{{relpermalink}}">{{title}}</a>
        <p class="search-hit-description">{{snippet}}</p>
      </div>
    </div>
  </div>
</script>


</body>

</html>
