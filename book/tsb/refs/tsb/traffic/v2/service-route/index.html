<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>Service Route · Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="Configuration affecting routing for services in a traffic group.">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.129.0">

  <!-- CSS plugins -->
  
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
    
    
      
    
  
  
  <link rel="preload" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" as="style">
  <link rel="stylesheet" href="/css/combined.7ac6b2864cb09c5595ac8ca79f8ca0db6c69a657edac885ba2c2412080d68da0.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.595949bd12db88434115e2a1e70965cf2928cc646e73acc6437c4cbbc323f585.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/book/tsb/refs/tsb/traffic/v2/service-route/" />
  <meta property="og:title" content="Service Route | Jimmy Song" />
  <meta property="twitter:title" content="Service Route | Jimmy Song" />

  
  <meta property="og:description" content="Configuration affecting routing for services in a traffic group." />
  <meta property="twitter:description" content="Configuration affecting routing for services in a traffic group." />

  
  <meta property="og:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />
  <meta property="twitter:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />

  
  
</head>
<body>
<header class="fixed-top header">
  
  
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>
  
  <div class="navigation w-100 ">
    <div class="container-xxl book-padding">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">博客</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">资料</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">公告</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">联系</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/community/">社区</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">视频 <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container d-flex justify-content-center">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>搜索</span>
              </span>
              <span class="search-shortcuts d-none d-sm-block">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


            <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>站内搜索</p> 
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="关闭"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="请输入搜索词" autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control" aria-label="请输入搜索词">
        
        <div class="mt-4">
          <span>搜索类型: </span>
          <span>
            <input type="radio" id="all" name="search_type" value="all" checked>
            <label for="all">所有</label>
            
              <input type="radio" id="blog" name="search_type" value="blog">
              <label for="blog">原创</label>
              <input type="radio" id="trans" name="search_type" value="trans">
              <label for="trans">译文</label>
            
            <input type="radio" id="book" name="search_type" value="book">
            <label for="book">资料</label>
            <input type="radio" id="notice" name="search_type" value="notice">
            <label for="notice">公告</label>
          </span>
        </div>
      </div>
      
    </section>
    <section class="section-search-results">
      <div id="search-results-count" class="search-results-count"></div>
      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

        
        
            

        

<div class="blog book book-padding">
  <div class="container-xxl d-flex">
    <aside class="docs-sidebar d-none col-sm-2">
      <nav class="collapse docs-links box-shadow mb-4 sticky-top aside-toc d-none d-sm-block pt-4" id="docs-nav">

  
  
  
  
  
  

  
  
    

    
      
      
      
      
        
          
        
      



  
    
    
    
    
      
    
    

    
      
      
        
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-idd41d8cd98f00b204e9800998ecf8427e&#34;)" href="#idd41d8cd98f00b204e9800998ecf8427e" aria-expanded="false" aria-controls="idd41d8cd98f00b204e9800998ecf8427e" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="">API</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#idd41d8cd98f00b204e9800998ecf8427e" aria-expanded="false" aria-controls="idd41d8cd98f00b204e9800998ecf8427e">
              
                <i class="fa-solid fa-angle-down" id="caret-idd41d8cd98f00b204e9800998ecf8427e"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  show " id="idd41d8cd98f00b204e9800998ecf8427e">
          



  
    
    
    
    
      
    
    

    
      
      
        
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-id9a408f5cc154653db2fb424d016c548b&#34;)" href="#id9a408f5cc154653db2fb424d016c548b" aria-expanded="false" aria-controls="id9a408f5cc154653db2fb424d016c548b" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/tsb/">tsb</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id9a408f5cc154653db2fb424d016c548b" aria-expanded="false" aria-controls="id9a408f5cc154653db2fb424d016c548b">
              
                <i class="fa-solid fa-angle-down" id="caret-id9a408f5cc154653db2fb424d016c548b"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  show " id="id9a408f5cc154653db2fb424d016c548b">
          



  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/access-bindings/">Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/application/v2/api/">API</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/api-access-bindings/">API Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/application/v2/application/">Application</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/application-access-bindings/">Application Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/application/v2/application-service/">Application Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/q/v2/approvals-service/">Approvals Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/auth/v2/auth/">Auth</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/auth/">Auth</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/cluster-service/">Cluster Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/cluster/">Clusters</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/types/v2/types/">Common Object Types</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/eastwest-gateway/">East/West Gateway</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/egress-gateway/">Egress Gateway</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/gateway/">Gateway</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/gateway-access-bindings/">Gateway Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/gateway-common/">Gateway Common Configuration Messages</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/gateway-group/">Gateway Group</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/gateway-service/">Gateway Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/info/">Info</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/ingress-gateway/">Ingress Gateway</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/istio-gateway-direct/">Istio Direct Mode Gateway Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/istio-security-direct/">Istio Direct Mode Security Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/traffic/v2/istio-traffic-direct/">Istio Direct Mode Traffic Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/istio-internal-access-bindings/">Istio Internal Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/istiointernal/v2/istio-istiointernal-direct/">Istio Internal Direct Mode Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/istiointernal/v2/istiointernal-service/">Istio Internal Direct Mode Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/istiointernal/v2/istio-internal-group/">Istio internal Group</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/observability/telemetry/v2/metric/">Metric</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/observability/telemetry/v2/metric-service/">Metric Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/application/v2/openapi-extensions/">OpenAPI Extensions</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/organization/">Organization</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/organization-access-bindings/">Organization Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/organization-setting/">Organization Setting</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/organization-service/">Organizations Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/permissions/">Permissions</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/q/v2/permissions-service/">Permissions Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/binding/">Policy Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/policy-service/">Policy Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/registry/v2/service/">Registered Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/role/">Role</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/role-service/">Role Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/security-access-bindings/">Security Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/security-group/">Security Group</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/security-service/">Security Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/security-setting/">Security Setting</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/registry/v2/lookup-service/">Service Registry Lookup Service</a></li>




  <li class="leaf active"><a href="/book/tsb/refs/tsb/traffic/v2/service-route/">Service Route</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/service-security-setting/">Service Security Setting</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/registry/v2/registration-service/">Servive Registry Registration Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/observability/telemetry/v2/source/">Source</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/status/">Status</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/status-service/">Status Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/team/">Teams and Users</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/team-service/">Teams Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/observability/telemetry/v2/source-service/">Telemetry Source Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/tenant/">Tenant</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/tenant-access-bindings/">Tenant Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/tenant-service/">Tenant Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/tenant-setting/">Tenant Setting</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/gateway/v2/tier1-gateway/">Tier1 Gateway</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/traffic-access-bindings/">Traffic Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/traffic/v2/traffic-group/">Traffic Group</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/traffic/v2/traffic-service/">Traffic Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/traffic/v2/traffic-setting/">Traffic Setting</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/security/v2/waf-settings/">WAF Settings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/extension/v2/wasm-extension/">WASM Extension</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/extension/v2/wasm-service/">WasmExtension Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/workspace/">Workspace</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/rbac/v2/workspace-access-bindings/">Workspace Access Bindings</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/workspace-service/">Workspace Service</a></li>




  <li class="leaf"><a href="/book/tsb/refs/tsb/v2/workspace-setting/">Workspace Setting</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-ida75aeed40e2fe4aa536d414a17282334&#34;)" href="#ida75aeed40e2fe4aa536d414a17282334" aria-expanded="false" aria-controls="ida75aeed40e2fe4aa536d414a17282334" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/onboarding/">onboard</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#ida75aeed40e2fe4aa536d414a17282334" aria-expanded="false" aria-controls="ida75aeed40e2fe4aa536d414a17282334">
              
                <i class="fa-solid fa-angle-right" id="caret-ida75aeed40e2fe4aa536d414a17282334"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="ida75aeed40e2fe4aa536d414a17282334">
          



  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/agent/v1alpha1/agent-configuration/">Agent Configuration</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/identity/aws/v1alpha1/aws/">AWS Identity</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/authorization/aws/v1alpha1/aws/">AWS Identity Matcher</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/core/v1alpha1/condition/">Condition</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/core/v1alpha1/namespaced-name/">Core types</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/registration/v1alpha1/hostinfo/">Host Info</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/identity/jwt/v1alpha1/jwt/">JWT Identity</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/authorization/jwt/v1alpha1/jwt/">JWT Identity Matcher</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/install/v1alpha1/jwt-issuer/">JWT Issuer</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/agent/v1alpha1/onboarding-configuration/">Onboarding Configuration</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/authorization/v1alpha1/policy/">Onboarding Policy</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/config/v1alpha1/transport-security/">Transport layer security config</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/runtime/v1alpha1/registration/">Workload Auto Registration</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/install/v1alpha1/workload-configuration/">Workload Configuration</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/identity/v1alpha1/identity/">Workload Identity</a></li>




  <li class="leaf"><a href="/book/tsb/refs/onboarding/config/types/registration/v1alpha1/registration/">Workload Registration</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-id8977e46db93e0d6c0fa802a7fafdd11e&#34;)" href="#id8977e46db93e0d6c0fa802a7fafdd11e" aria-expanded="false" aria-controls="id8977e46db93e0d6c0fa802a7fafdd11e" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/istio.io/">istio.io</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id8977e46db93e0d6c0fa802a7fafdd11e" aria-expanded="false" aria-controls="id8977e46db93e0d6c0fa802a7fafdd11e">
              
                <i class="fa-solid fa-angle-right" id="caret-id8977e46db93e0d6c0fa802a7fafdd11e"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id8977e46db93e0d6c0fa802a7fafdd11e">
          



  <li class="leaf"><a href="/book/tsb/refs/istio.io/api/operator/v1alpha1/operator/">IstioOperator Options</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-id751aadd78deed44f394f8329ef9ef5cc&#34;)" href="#id751aadd78deed44f394f8329ef9ef5cc" aria-expanded="false" aria-controls="id751aadd78deed44f394f8329ef9ef5cc" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/install/">install</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id751aadd78deed44f394f8329ef9ef5cc" aria-expanded="false" aria-controls="id751aadd78deed44f394f8329ef9ef5cc">
              
                <i class="fa-solid fa-angle-right" id="caret-id751aadd78deed44f394f8329ef9ef5cc"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id751aadd78deed44f394f8329ef9ef5cc">
          



  <li class="leaf"><a href="/book/tsb/refs/install/common/common-config/">Common Configuration Objects</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/controlplane/v1alpha1/spec/">Control Plane</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/dataplane/v1alpha1/spec/">Data Plane</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/helm/common/v1alpha1/common/">install/helm/common/v1alpha1/common.proto</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/helm/controlplane/v1alpha1/values/">install/helm/controlplane/v1alpha1/values.proto</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/kubernetes/k8s/">Kubernetes</a></li>




  <li class="leaf"><a href="/book/tsb/refs/install/managementplane/v1alpha1/spec/">Management Plane</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-id7e039cb03035cc53539ee1582a5b3edd&#34;)" href="#id7e039cb03035cc53539ee1582a5b3edd" aria-expanded="false" aria-controls="id7e039cb03035cc53539ee1582a5b3edd" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/iam/">iam</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id7e039cb03035cc53539ee1582a5b3edd" aria-expanded="false" aria-controls="id7e039cb03035cc53539ee1582a5b3edd">
              
                <i class="fa-solid fa-angle-right" id="caret-id7e039cb03035cc53539ee1582a5b3edd"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id7e039cb03035cc53539ee1582a5b3edd">
          



  <li class="leaf"><a href="/book/tsb/refs/iam/v2/oauth-service/">IAM (OAuth)</a></li>




  <li class="leaf"><a href="/book/tsb/refs/iam/v2/oidc-service/">IAM (OIDC)</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-leaf">
          
            <div class="parent-node d-flex mb-0 justify-content-between" onClick="toggleCollapse(&#34;caret-idc24694fb1054e7226abfd4aa7c8df530&#34;)" href="#idc24694fb1054e7226abfd4aa7c8df530" aria-expanded="false" aria-controls="idc24694fb1054e7226abfd4aa7c8df530" aria-hidden="false" data-toggle="collapse">
          
          
            <a class="d-inline docs-toc-link mr-2 " href="/book/tsb/refs/audit/">audit</a>
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#idc24694fb1054e7226abfd4aa7c8df530" aria-expanded="false" aria-controls="idc24694fb1054e7226abfd4aa7c8df530">
              
                <i class="fa-solid fa-angle-right" id="caret-idc24694fb1054e7226abfd4aa7c8df530"></i>
              
            </a>
            
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="idc24694fb1054e7226abfd4aa7c8df530">
          



  <li class="leaf"><a href="/book/tsb/refs/audit/v1/audit/">Audit</a></li>

          
            </ul>
          
        

        
          </div>
        

          
            </ul>
          
        

        
          </div>
        

    
  
</nav>

    </aside>

    
    <aside class="docs-toc d-none d-xl-block col-xl-2 px-2">
      <div class="sidebar">
      
  <div class="bg-white sticky-top aside-toc">
    <p class="toc-sidebar-title">
      目录
    </p>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#tetrateio-api-tsb-traffic-v2-httpmatchcondition">HTTPMatchCondition</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-httproute">HTTPRoute</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-servicedestination">ServiceDestination</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute">ServiceRoute</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-portleveltrafficsettings">PortLevelTrafficSettings</a></li>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-stickysession">StickySession</a></li>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-subset">Subset</a></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-tcpmatchcondition">TCPMatchCondition</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-tcproute">TCPRoute</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-traffictype">TrafficType</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>



      

      </div>
    </aside>

    <main class="py-md-3 pl-md-3 mt-2 col-lg-8 p-0" role="main">
      <div class="row">
            <div class="col-12">
                <div class="mb-2">
                    <nav aria-label="breadcrumb" class="page-breadcrumb">
    <ol class="breadcrumb mb-0">
    
          
      
        
      
        
      
        
      
        
      
        
      
    
            
      
    
            
              <li class="breadcrumb-item"><a href="/book/">资料</a></li>
            
      
    
            
              <li class="breadcrumb-item"><a href="/book/tsb/">TSB 手册</a></li>
            
      
    
            
              <li class="breadcrumb-item"><a href="">API</a></li>
            
      
    
            
              <li class="breadcrumb-item"><a href="/book/tsb/refs/tsb/">tsb</a></li>
            
      
    
          <li class="breadcrumb-item active" aria-current="page">Service Route</li>
    

    
    </ol>
</nav>

                </div>
              <hr class="mt-0">
              <h1 class="mb-3">
               Service Route
              </h1>
              
                <div class="book-page-metadata mb-3">
                    <ul class="list-inline">
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-calendar"></i>
                            </span>2023/08/09</li>
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-clock"></i>
                            </span>9 分钟</li>
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-file-word"></i>
                            </span>1959 字</li>
                    </ul>
                </div>
              
              
                <details class="mobile-toc d-sm-none d-block mb-0">
  <summary>查看本文大纲</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#tetrateio-api-tsb-traffic-v2-httpmatchcondition">HTTPMatchCondition</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-httproute">HTTPRoute</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-servicedestination">ServiceDestination</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute">ServiceRoute</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-portleveltrafficsettings">PortLevelTrafficSettings</a></li>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-stickysession">StickySession</a></li>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-subset">Subset</a></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-tcpmatchcondition">TCPMatchCondition</a></li>
    <li><a href="#tetrateio-api-tsb-traffic-v2-tcproute">TCPRoute</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-traffic-v2-serviceroute-traffictype">TrafficType</a></li>
      </ul>
    </li>
  </ul>
</nav>
</details>

              
            </div>
        </div>

      <article class="border-bottom content mb-4">
          <!-- WARNING: This page is generated. Please take a look at extensions/plugin-service-bridge-api-docs/src/files/doc/page.ejs -->
<p>Service Routes can be used by service owners to configure traffic shifting
across different versions of a service in a Traffic Group. The traffic to
this service can originate from sidecars in the same or different traffic
groups, as well as gateways.</p>
<p>The following example yaml defines a Traffic Group <code>g1</code> in the namespaces
<code>ns1</code>, <code>ns2</code> and <code>ns3</code>, owned by its parent Workspace <code>w1</code>.
Then it defines a Service Route for the <code>reviews</code> service in the <code>ns1</code>
namespace with two subsets: <code>v1</code> and <code>v2</code>, where 80% of the traffic to the
reviews service is sent to <code>v1</code> while the remaining 20% is sent to <code>v2</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Group</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespaceSelectors</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*/ns1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*/ns2&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*/ns3&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">configMode</span><span class="p">:</span><span class="w"> </span><span class="l">BRIDGED</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span></code></pre></div><p>Server side load balancing can be set through the combination of
<code>portLevelSettings</code> and <code>stickySession</code>.
The following ServiceRoute will generate two routes:</p>
<ol>
<li>An HTTP route matching traffic on port 8080 and routing it 80:20 between
v1:v2, targeting port 8080. The server side load balancing will be based
on <code>header</code>.</li>
<li>A TCP route matching traffic on port 443, and routing it 80:20 between
v1:v2, targeting port 443. The server side load balancing will be based
on <code>source IP</code>.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">HTTP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">stickySession</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">header</span><span class="p">:</span><span class="w"> </span><span class="l">x-session-hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">stickySession</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">useSourceIp</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span></code></pre></div><p><strong>Note</strong>: For TCP routes, only source IP (<code>useSourceIp: true</code>) is a valid
load balancing hash key. Any other hash keys will be invalid.</p>
<p>You can also apply port settings just to a subset, such as in the following
example where for subset <code>v2</code> the source IP is used for sticky sessions.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">HTTP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">stickySession</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">header</span><span class="p">:</span><span class="w"> </span><span class="l">x-sticky-hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">stickySession</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="nt">useSourceIp</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><p>If the service exposes more than one port, then all such ports with
protocols need to be specified in top level <code>portLevelSettings</code>. Explicit
routes can be specified within <code>httpRoutes</code> or <code>tcpRoutes</code> sections. You can
also specify match conditions within each httpRoute to match the incoming
traffic and route the traffic accordingly.</p>
<p>The ServiceRoute below has two HTTP routes:</p>
<ol>
<li>The first route matches traffic on
<code>reviews.svc.cluster.local:8080/productpage</code> endpoint and <code>end-user: jason</code>
header and routes 80% of traffic to subset &ldquo;v1&rdquo; and 20% to subset &ldquo;v2&rdquo;.</li>
<li>The second route is the default HTTP route, which matches traffic on
<code>reviews.ns1.svc.cluster.local:8080/productpage</code> endpoint, and routes 50% of
traffic to subset &ldquo;v1&rdquo; and remaining 50% to subset &ldquo;v2&rdquo;.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.xcp.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">HTTP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">httpRoutes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http-route-match-productpage-endpoint</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">match</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">match-productpage-endpoint</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">uri</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l">/productpage</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">end-user</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="l">jason</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http-route-default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">match</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">match-default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">uri</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l">/productpage</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">50</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">50</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span></code></pre></div><p><strong>Note</strong>: Default routes will be generated automatically <strong>only</strong> if a port
is specified in top level <code>portLevelSettings</code> but not used in any match
conditions of httpRoutes, tcpRoutes or tlsRoutes (or if no routes are
specified). In all other conditions, all routes have to defined
<strong>explicitly</strong>.</p>
<p>For example, the ServiceRoute below will generate a <code>default-http-route</code>
matching on port <code>8080</code> and will route traffic in the ratio 80:20 between
v1:v2.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.xcp.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.ns1.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8080</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">HTTP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span></code></pre></div><p>Finally, a similar example but for TCP traffic where all the traffic for
port 666 will be sent to v1 subset.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">traffic.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">ServiceRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">reviews</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/reviews.ns1.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">portLevelSettings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">6666</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">trafficType</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">subsets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">50</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">50</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">tcpRoutes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tcp-route-match-port-6666-v1-100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">match</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">match-condition-port-6666-v1-100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">6666</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">destination</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span>- <span class="nt">subset</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">6666</span><span class="w">
</span></span></span></code></pre></div><h2 id="tetrateio-api-tsb-traffic-v2-httpmatchcondition">HTTPMatchCondition</h2>
<p>HTTPMatchCondition is the set of conditions to match incoming HTTP traffic
and route accordingly. We could have used HttpMatchCondition from
ingress_gateway.proto but it doesn&rsquo;t have a port field, so it&rsquo;s better to
create one natively.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name of the match condition</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>uri</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-stringmatch" title="tetrateio.api.tsb.gateway.v2.StringMatch">tetrateio.api.tsb.gateway.v2.StringMatch</a> <br/> Incoming URI to match in incoming traffic for routing forward</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>headers</p>
</td>
<td>
<p>map&lt;<a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a>, <a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-stringmatch" title="tetrateio.api.tsb.gateway.v2.StringMatch">tetrateio.api.tsb.gateway.v2.StringMatch</a>&gt; <br/> Headers to match in incoming traffic for routing forward</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> Port to match in incoming traffic</p>
</td>
<td>
<p>uint32 = {<br/>  lte: <code>65535</code><br/>  gte: <code>1</code><br/>}<br/></p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-traffic-v2-httproute">HTTPRoute</h2>
<p>HTTPRoute is used to set HTTP routes to service destinations on the basis of match conditions.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name of HTTPRoute</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>match</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-httpmatchcondition" title="tetrateio.api.tsb.traffic.v2.HTTPMatchCondition">tetrateio.api.tsb.traffic.v2.HTTPMatchCondition</a> <br/> Match conditions for incoming HTTP traffic</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>destination</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-servicedestination" title="tetrateio.api.tsb.traffic.v2.ServiceDestination">tetrateio.api.tsb.traffic.v2.ServiceDestination</a> <br/> Destination host:port and subset where HTTP traffic should be directed</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-traffic-v2-servicedestination">ServiceDestination</h2>
<p>ServiceDestination is the destination service, port and subset where traffic
should be routed</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>subset</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> Subset is the version of the service where traffic should be routed to</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>weight</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> Weight defines the amount of traffic that needs to be routed to this specific
version</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> The port corresponding to the service host where traffic should be routed</p>
</td>
<td>
<p>uint32 = {<br/>  lte: <code>65535</code><br/>  gte: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>destinationHost</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> Service host where traffic should be routed to. This should either be a FQDN
or a short name for the k8s service. For example, &ldquo;reviews&rdquo; as destination_host will
be interpreted as &ldquo;reviews.ns1.cluster.local&rdquo;</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-traffic-v2-serviceroute">ServiceRoute</h2>
<p>A service route controls routing configurations for traffic to a
service in a traffic group.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>service</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> The service on which the configuration is being applied. Must be in namespace/FQDN format.</p>
</td>
<td>
<p>string = {<br/>  pattern: <code>^[^/]+/[^/]+$</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>subsets</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-subset" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.Subset">tetrateio.api.tsb.traffic.v2.ServiceRoute.Subset</a> <br/> <em>REQUIRED</em> <br/> The set of versions of a service and the percentage of traffic to
send to each version.</p>
</td>
<td>
<p>repeated = {<br/>  min_items: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>stickySession</p>
</td>
<td>
<p><a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-stickysession" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession">tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession</a> <br/> StickySession specifies how to forward traffic from a client to the same backend</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>portLevelSettings</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-portleveltrafficsettings" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.PortLevelTrafficSettings">tetrateio.api.tsb.traffic.v2.ServiceRoute.PortLevelTrafficSettings</a> <br/> In order to support multi-protocol routing, a list of all port/protocol combinations is needed.
These port settings are applied to all the subsets</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>httpRoutes</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-httproute" title="tetrateio.api.tsb.traffic.v2.HTTPRoute">tetrateio.api.tsb.traffic.v2.HTTPRoute</a> <br/> HTTPRoutes are used when HTTP traffic needs to be matched on uri, headers
and port and destination routes need to be set using subset-weight
combinations specified within the route.
<strong>Note</strong>: If a route is specified, then the global subset-weight
combinations (specified under subsets) will be ignored for the matched
port, as subsets within route will take effect.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>tcpRoutes</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-tcproute" title="tetrateio.api.tsb.traffic.v2.TCPRoute">tetrateio.api.tsb.traffic.v2.TCPRoute</a> <br/> TCPRoutes match TCP traffic based on port number. The subset-weight
configuration and priority have the same behaviour as HTTPRoutes.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>configGenerationMetadata</p>
</td>
<td>
<p><a href="../../../tsb/types/v2/types#tetrateio-api-tsb-types-v2-configgenerationmetadata" title="tetrateio.api.tsb.types.v2.ConfigGenerationMetadata">tetrateio.api.tsb.types.v2.ConfigGenerationMetadata</a> <br/> Metadata values that will be add into the Istio generated configurations.
When using YAML APIs like<code>tctl</code> or <code>gitops</code>, put them into the <code>metadata.labels</code> or
<code>metadata.annotations</code> instead.
This field is only necessary when using gRPC APIs directly.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-traffic-v2-serviceroute-portleveltrafficsettings">PortLevelTrafficSettings</h3>
<p>PortLevelTrafficSettings explicitly defines the type of traffic for all of
the ports exposed by a service for which routing rules need to be set.
Depending on whether HTTPRoutes or TCTRoutes are specified or not, the main
subset weights are applied or not based on the following scenarios:</p>
<ol>
<li>If HTTPRoutes or TCPRoutes are specified:
a. Since Port is mandatory in MatchConditions, whenever a port is used
in (HTTP/TCP) MatchCondition, it needs to be present in the global
PortLevelTrafficSettings.
b. When MatchConditions are present in the routes, then subset-weight
combinations within routes will take effect instead of the global ones.</li>
<li>If the routes are not specified, then the traffic will be matched on
ports specified in PortLevelTrafficSettings, and the routes will be set
according to global subset-weight combinations.</li>
</ol>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> Port number to which traffic must be routed</p>
</td>
<td>
<p>uint32 = {<br/>  lte: <code>65535</code><br/>  gte: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>trafficType</p>
</td>
<td>
<p><a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-traffictype" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.TrafficType">tetrateio.api.tsb.traffic.v2.ServiceRoute.TrafficType</a> <br/> <em>REQUIRED</em> <br/> Type of traffic for which a route has to be generated</p>
</td>
<td>
<p>enum = {<br/>  defined_only: <code>true</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>stickySession</p>
</td>
<td>
<p><a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-stickysession" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession">tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession</a> <br/> Since we are supporting multiple types of protocols, so we expect to have separate sticky sessions
for each route (i.e. for a specific port/protocol combination)</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-traffic-v2-serviceroute-stickysession">StickySession</h3>
<p>If set, all requests from a client will be forward to the same backend.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>header</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <em><sup><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank">oneof</a> hash_key</sup></em> <br/> Hash based on a specific HTTP header.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>cookie</p>
</td>
<td>
<p><a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-stickysession-httpcookie" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession.HTTPCookie">tetrateio.api.tsb.traffic.v2.ServiceRoute.StickySession.HTTPCookie</a> <em><sup><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank">oneof</a> hash_key</sup></em> <br/> Hash based on HTTP cookie.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>useSourceIp</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="bool" target="_blank" rel="noopener">bool</a> <em><sup><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank">oneof</a> hash_key</sup></em> <br/> Hash based on the source IP address.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h4 id="tetrateio-api-tsb-traffic-v2-serviceroute-stickysession-httpcookie">HTTPCookie</h4>
<p>Describes a HTTP cookie that will be used for sticky sessions. If the cookie is not present, it
will be generated.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name of the cookie.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>path</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Path to set for the cookie.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>ttl</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Duration" title="google.protobuf.Duration" target="_blank" rel="noopener">google.protobuf.Duration</a> <br/> <em>REQUIRED</em> <br/> Lifetime of the cookie.</p>
</td>
<td>
<p>timestamp = {<br/>  required: <code>true</code><br/>}<br/></p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-traffic-v2-serviceroute-subset">Subset</h3>
<p>Subset denotes a specific version of a service. The pods/VMs of a
subset should be uniquely identifiable using their labels.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name used to refer to the subset.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>labels</p>
</td>
<td>
<p>map&lt;<a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a>, <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a>&gt; <br/> Labels apply a filter over the endpoints of a service in the service registry.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>weight</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> Percentage of traffic to be sent to this subset. Weight if not
specified will be assumed to be 0 if there are multiple
subsets. If there is only one subset, the weight will be
assumed to be 1.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>portLevelSettings</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-serviceroute-portleveltrafficsettings" title="tetrateio.api.tsb.traffic.v2.ServiceRoute.PortLevelTrafficSettings">tetrateio.api.tsb.traffic.v2.ServiceRoute.PortLevelTrafficSettings</a> <br/> Port/Protocol/StickySession combination for which routes need to be generated specifically for
a subset. These settings are meant to override the global PortLevelTrafficSettings, i.e. first,
global PortLevelTrafficSettings are used to generate routes and then we use non-conflicting subset level
PortLevelTrafficSettings to modify existing routes. If provided, PortLevelTrafficSettings should be provided for
all subsets for proper load balancing.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-traffic-v2-tcpmatchcondition">TCPMatchCondition</h2>
<p>TCPMatchCondition is the set of conditions to match incoming TCP traffic
and route accordingly</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name of the match condition</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="uint32" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> TCP match conditions only have port in match conditions</p>
</td>
<td>
<p>uint32 = {<br/>  lte: <code>65535</code><br/>  gte: <code>1</code><br/>}<br/></p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-traffic-v2-tcproute">TCPRoute</h2>
<p>TCPRoute is used to set TCP routes to service destinations on the basis of match conditions.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" title="string" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Name of TCPRoute</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>match</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-tcpmatchcondition" title="tetrateio.api.tsb.traffic.v2.TCPMatchCondition">tetrateio.api.tsb.traffic.v2.TCPMatchCondition</a> <br/> Match conditions for incoming TCP traffic</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>destination</p>
</td>
<td>
<p>List of <a href="../../../tsb/traffic/v2/service_route#tetrateio-api-tsb-traffic-v2-servicedestination" title="tetrateio.api.tsb.traffic.v2.ServiceDestination">tetrateio.api.tsb.traffic.v2.ServiceDestination</a> <br/> Destination host:port and subset where TCP traffic should be directed</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-traffic-v2-serviceroute-traffictype">TrafficType</h3>
<p>TrafficType is the list of allowed traffic types for generating routes</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Number</th>
<th class="description">Description</th>
</tr>
</thead>
<tr>
<td>
<p>HTTP</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>If trafficType is HTTP, then a HTTP route is generated for that port</p>
</td>
</tr>
<tr>
<td>
<p>TCP</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>If trafficType is TCP, then a TCP route is generated for that port</p>
</td>
</tr>
<tr>
<td>
<p>TLS_PASSTHROUGH</p>
</td>
<td>
<p>2</p>
</td>
<td>
<p>This mode generates TLS routes for HTTPS traffic. TLS is not terminated at the gateway and is
passed through to the server</p>
</td>
</tr>
</table>

      </article>
      <div class="mb-4">
          <p>最后更新于 2024/08/23</p>
          


          


          
            


    
    





    




    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    






    



    


<div class="pager blog-pager d-flex justify-content-between">
    
    <div class="previous mr-4">
        <a href="https://jimmysong.io/book/tsb/refs/tsb/registry/v2/lookup-service/" class="d-flex flex-column align-items-start">
            <span class="nav mb-2 text-color-dark">&larr; 上一篇</span>
            <span class="text-align-left">Service Registry Lookup Service</span>
        </a>
    </div>
    

    
    <div class="next">
        <a href="https://jimmysong.io/book/tsb/refs/tsb/security/v2/service-security-setting/" class="d-flex flex-column align-items-end">
            <span class="nav mb-2 text-color-dark">下一篇 &rarr;</span>
            <span class="text-align-right">Service Security Setting</span>
        </a>
    </div>
     
</div>

          
          <div class="body-footer">
            
          </div>
      </div>
    </main>
  </div>
</div>


<footer>
  
  <div class="footer bg-footer section-sm border-bottom overlay  book-padding ">
    <div class="container-xxl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h3 text-white mb-4 text-uppercase">联系</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">微信公众号</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">博客</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/black-myth-wukong-game-life/">从黑神话悟空聊起：我心目中的 3A 大作</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/envoy-gateway-integration-istio-mesh/">集成 Envoy Gateway 作为 Istio 服务网格中的入口网关</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/istio-configuration-safety-common-misconfigurations/">Istio 配置安全：如何避免错误配置</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">链接</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://istio.io/latest/zh/" target="_blank" rel="noopener noreferrer">
                  Istio 服务网格
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate 公司
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  云原生学院|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  云原生开源项目大全
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  云原生社区（中国）
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">教程</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes 基础教程
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h3 text-white mb-4 text-uppercase">通知</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-china-2024-panel/">KubeCon China 2024（香港）</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/website-revamp-notice/">网站改版通知</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-meetup-dalian-2024/">2024 大连云原生技术开放日</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer overlay">
    <div class="container-xxl book-padding">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song 保留所有权利</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-x-twitter text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/contact/" >
                    <i class="fa-brands fa-weixin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-github text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" title="Social link" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" >
                    <i class="fa-solid fa-envelope text-white"></i>
              </a>
            </li>
            
            <li class="list-inline-item">
              <a class="d-inline-block p-2" href="/blog/index.xml" >
                    <i class="fa-solid fa-rss text-white"></i>
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.f94c22b1d478bfc9e2e0a7d954429e47b7e6d36edd423758482e04154ae1842e.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>




<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>










<script src="/js/wowchemy-search.min.7a37268e7bbe4a9160c2e4c33b749816.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata d-flex">
            <span class="mr-1"><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span class="mr-1"><i class="fa-regular fa-folder-open mr-1"></i>{{section}}</span>
            <span class="d-sm-block d-none"><i class="fa-solid fa-link mr-1"></i>{{relpermalink}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>



    </body>
</html>
