<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  
  <title>Rollout 规范 · Jimmy Song</title>
  

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="宋净超的博客">
  <meta name="author" content="Jimmy Song">
  <meta name="generator" content="Hugo 0.123.7">

  <!-- CSS plugins -->
  
    
    <link rel="preload" href="/plugins/bootstrap/bootstrap.min.css" as="style">
    <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css" media="screen">
  
    
    <link rel="preload" href="/plugins/fontawesome/v6/css/fontawesome.min.css" as="style">
    <link rel="stylesheet" href="/plugins/fontawesome/v6/css/fontawesome.min.css" media="screen">
  
    
    <link rel="preload" href="/plugins/fontawesome/v6/css/all.min.css" as="style">
    <link rel="stylesheet" href="/plugins/fontawesome/v6/css/all.min.css" media="screen">
  
    
    <link rel="preload" href="/plugins/tocbot/tocbot.css" as="style">
    <link rel="stylesheet" href="/plugins/tocbot/tocbot.css" media="screen">
  

  <!-- Main Stylesheet -->
  
  <link rel="preload" href="/scss/style.min.8816097df1a05812e8243a2ccae8614a538869b5f2c9174af336848948470a10.css" as="style">
  <link rel="stylesheet" href="/scss/style.min.8816097df1a05812e8243a2ccae8614a538869b5f2c9174af336848948470a10.css" media="screen">

  <!-- Bigger picture css -->
  
  <link rel="stylesheet" href="/plugins/bigger-picture/bigger-picture.min.css" media="print" onload="this.media='all'">
  <!--Favicon generate by https://realfavicongenerator.net-->
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="200x200" href="/images/favicon.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <link href='/opensearchdescription.xml' rel='search' title='Content search' type='application/opensearchdescription+xml'/>

  <!--Twitter card-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="jimmysong.io" />
  <meta name="twitter:creator" content="@jimmysongio" />
  <meta property="og:url" content="https://jimmysong.io/book/argo-rollouts/rollout/specification/" />
  <meta property="og:title" content="Rollout 规范" />
  <meta property="twitter:title" content="Rollout 规范" />

  
  <meta property="og:description" content="宋净超的博客" />
  <meta property="twitter:description" content="宋净超的博客" />

  
  <meta property="og:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />
  <meta property="twitter:image" content="https://jimmysong.io/images/backgrounds/favicon.png" />

  
  
</head>
<body>
    <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>

<header class="fixed-top header">
  
  
  
  <div class="navigation w-100 ">
    <div class="container-xl">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <a class="navbar-brand" href="/">
            
            <b>JIMMY SONG</b>
            
        </a>
        <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navigation">
          <ul class="navbar-nav ml-auto">
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/blog">博客</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/book">资料</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/contact">联系</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/notice">通知</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://cloudnative.to" target="_blank" rel="noopener">社区 <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            
            
            <li class="nav-item">
              
              <a class="nav-link" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener">视频 <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i></a>
              
            </li>
            
            

          
          
          
          <!-- search -->
           <button type="button" class="search-btn js-search" id="searchOpen" aria-label="Search">
              <div class="search-container">
              <span class="search-content">
                  <i class="fa fa-search"></i>
                  <span>搜索</span>
              </span>
              <span class="search-shortcuts">
                  <kbd class="cmd-key">⌘</kbd>
                  <kbd class="k-key">K</kbd>
              </span>
              </div>
          </button>
          
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>


    <aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between">
        <div class="col-6 search-title">
          <p>站内搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <div class="js-search" aria-label="关闭"><i class="fa-solid fa-circle-xmark text-muted" aria-hidden="true"></i></div>
        </div>
      </div>

      <div id="search-box">
        <i class="fa-solid fa-magnifying-glass" id="search-icon" aria-hidden="true"></i>
        <input name="q" id="search-query" placeholder="请输入搜索词" autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="请输入搜索词">
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>
    </section>
  </div>
</aside>

    
	
	
    
<section class="bg-cover page-title-section overlay" style="background-image: url('/images/backgrounds/circle.svg'),url('/images/backgrounds/page-title.webp');background-size: cover;">
    <div class="container-xl">
        <div class="row d-flex flex-column justify-content-between">
            <div class="col-12">
              
                  
                  
                  
                  
                  
                        
                          
                  
                  
                  
                  
                        
                          
                  
                  
                  
                  
                      
                          <p class="h3 text-white">
                          <i class="fa fa-book-open mr-2"></i>Argo Rollouts 中文文档
                          </p>
                      
                  
                
                      
                  
                
                      
                  
              
              

              
              
              <nav aria-label="breadcrumb" class="page-breadcrumb">
    <ol class="breadcrumb mb-0">
    
          
      
        
      
        
      
        
      
        
      
    
            
      
    
            
              <li class="breadcrumb-item"><a class="text-white" href="/book/">资料</a></li>
            
      
    
            
              <li class="breadcrumb-item"><a class="text-white" href="/book/argo-rollouts/">Argo Rollouts 中文文档</a></li>
            
      
    
            
              <li class="breadcrumb-item"><a class="text-white" href="/book/argo-rollouts/rollout/">Rollout</a></li>
            
      
    
          <li class="breadcrumb-item active" aria-current="page">Rollout 规范</li>
    

    
    </ol>
</nav>

              
            </div>
        </div>
    </div>
</section>



	

<div class="container-xl blog">
  <div class="row flex-xl-nowrap">
    <aside class="docs-sidebar d-none d-sm-block">
      <nav class="collapse docs-links box-shadow mb-4 sticky-top aside-toc d-none d-sm-block" id="docs-nav">
  <form class="docs-search d-flex align-items-center mb-2">
    <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
      <div class="d-flex">
        <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
          
            Rollout
          
        </span>
        <span><i class="fas fa-chevron-down"></i></span>
      </div>
    </button>

    <button class="form-control sidebar-search js-search d-none d-md-flex">
      <i class="fas fa-search pr-2"></i>
      <span class="sidebar-search-text">搜索</span>
      <span class="sidebar-search-shortcut">⌘</span>
      <span class="sidebar-search-shortcut">K</span>
    </button>
  </form>

  
  
  
  
  
  

  
  
    

    
      
      
      
      
        
          
        
      



  
    
    
    
    
    

    
      
      
        
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" >
          
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/"><i class="fa fa-book pr-1"></i>Argo Rollouts 中文文档</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  show " id="idbac256143b7fb7cdb51389fd76813cf3">
          



  <li class="child level1 "><a href="/book/argo-rollouts/overview/">简介</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/installation/">安装</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/concepts/">概念</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/architecture/">架构</a></li>




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-ida2d3a206a528d0e339c5ad46a9f4e91d&#34;)" href="#ida2d3a206a528d0e339c5ad46a9f4e91d" aria-expanded="false" aria-controls="ida2d3a206a528d0e339c5ad46a9f4e91d" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#ida2d3a206a528d0e339c5ad46a9f4e91d" aria-expanded="false" aria-controls="ida2d3a206a528d0e339c5ad46a9f4e91d">
              
                <i class="fa-solid fa-angle-right" id="caret-ida2d3a206a528d0e339c5ad46a9f4e91d"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/getting-started/">入门</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="ida2d3a206a528d0e339c5ad46a9f4e91d">
          



  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/basic-usage/index/">基础使用</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/ambassador/index/">Ambassador</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/alb/index/">AWS ALB</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/appmesh/index/">AWS AppMesh</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/istio/index/">Istio</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/getting-started/nginx/">Nginx</a></li>

          
            </ul>
          
        

        
          </div>
        




  <li class="child level1 "><a href="/book/argo-rollouts/dashboard/">Dashboard</a></li>




  
    
    
    
    
      
    
    

    
      
      
        
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-id6bbc18033bbd8c785dfa36521b7d6c2a&#34;)" href="#id6bbc18033bbd8c785dfa36521b7d6c2a" aria-expanded="false" aria-controls="id6bbc18033bbd8c785dfa36521b7d6c2a" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id6bbc18033bbd8c785dfa36521b7d6c2a" aria-expanded="false" aria-controls="id6bbc18033bbd8c785dfa36521b7d6c2a">
              
                <i class="fa-solid fa-angle-down" id="caret-id6bbc18033bbd8c785dfa36521b7d6c2a"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/rollout/">Rollout</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  show " id="id6bbc18033bbd8c785dfa36521b7d6c2a">
          



  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-id8f21e19afe05ffcdca1b8990ee93e057&#34;)" href="#id8f21e19afe05ffcdca1b8990ee93e057" aria-expanded="false" aria-controls="id8f21e19afe05ffcdca1b8990ee93e057" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id8f21e19afe05ffcdca1b8990ee93e057" aria-expanded="false" aria-controls="id8f21e19afe05ffcdca1b8990ee93e057">
              
                <i class="fa-solid fa-angle-right" id="caret-id8f21e19afe05ffcdca1b8990ee93e057"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/rollout/deployment-strategies/">部署策略</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id8f21e19afe05ffcdca1b8990ee93e057">
          



  <li class="child level1 "><a href="/book/argo-rollouts/rollout/deployment-strategies/bluegreen/">蓝绿部署</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/deployment-strategies/canary/">金丝雀部署</a></li>

          
            </ul>
          
        

        
          </div>
        




  <li class="child level1 active"><a href="/book/argo-rollouts/rollout/specification/">Rollout 规范</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/hpa-support/">HPA</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/vpa-support/">VPA</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/ephemeral-metadata/">短暂元数据</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/restart/">重启 Rollouts</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/scaledown-aborted-rs/">缩小失败的 Rollout</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/rollback/">回滚窗口</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/anti-affinity/index/">反亲和性</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/helm/">Helm</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/kustomize/index/">Kustomize</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/rollout/controller-metrics/index/">控制器指标</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-id9843c756627917fbceb5df89c49ad60b&#34;)" href="#id9843c756627917fbceb5df89c49ad60b" aria-expanded="false" aria-controls="id9843c756627917fbceb5df89c49ad60b" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id9843c756627917fbceb5df89c49ad60b" aria-expanded="false" aria-controls="id9843c756627917fbceb5df89c49ad60b">
              
                <i class="fa-solid fa-angle-right" id="caret-id9843c756627917fbceb5df89c49ad60b"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/traffic-management/">流量管理</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id9843c756627917fbceb5df89c49ad60b">
          



  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/overview/">概览</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/ambassador/">Ambassador</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/apisix/">APISIX</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/alb/">AWS ALB</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/istio/index/">Istio</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/nginx/">Nginx</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/plugins/">插件</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/traefik/">Traefik</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/traffic-management/mixed/">多提供方</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-idab1815fe8068719a48ab1a283c856fb0&#34;)" href="#idab1815fe8068719a48ab1a283c856fb0" aria-expanded="false" aria-controls="idab1815fe8068719a48ab1a283c856fb0" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#idab1815fe8068719a48ab1a283c856fb0" aria-expanded="false" aria-controls="idab1815fe8068719a48ab1a283c856fb0">
              
                <i class="fa-solid fa-angle-right" id="caret-idab1815fe8068719a48ab1a283c856fb0"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/analysis/">分析</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="idab1815fe8068719a48ab1a283c856fb0">
          



  <li class="child level1 "><a href="/book/argo-rollouts/analysis/overview/">概览</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/analysis/plugins/">插件</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/analysis/metrics/">指标</a></li>

          
            </ul>
          
        

        
          </div>
        




  <li class="child level1 "><a href="/book/argo-rollouts/experiment/">实验</a></li>




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-id8cca3d451101677be58d5eab6b038baf&#34;)" href="#id8cca3d451101677be58d5eab6b038baf" aria-expanded="false" aria-controls="id8cca3d451101677be58d5eab6b038baf" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id8cca3d451101677be58d5eab6b038baf" aria-expanded="false" aria-controls="id8cca3d451101677be58d5eab6b038baf">
              
                <i class="fa-solid fa-angle-right" id="caret-id8cca3d451101677be58d5eab6b038baf"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/notifications/">通知</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id8cca3d451101677be58d5eab6b038baf">
          



  <li class="child level1 "><a href="/book/argo-rollouts/notifications/overview/">概览</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/notifications/services/">服务</a></li>

          
            </ul>
          
        

        
          </div>
        




  
    
    
    
    
      
    
    

    
      
      
        <div class="docs-toc-item has-child level1">
          <div class="parent-node d-flex mb-0 justify-content-start" onClick="Collapse(&#34;caret-id4b196e0faee1ed4d23b77ed22b7ef324&#34;)" href="#id4b196e0faee1ed4d23b77ed22b7ef324" aria-expanded="false" aria-controls="id4b196e0faee1ed4d23b77ed22b7ef324" aria-hidden="false" data-toggle="collapse">
          
            
            <a class="nav-toogle d-inline" aria-hidden="false" data-toggle="collapse" href="#id4b196e0faee1ed4d23b77ed22b7ef324" aria-expanded="false" aria-controls="id4b196e0faee1ed4d23b77ed22b7ef324">
              
                <i class="fa-solid fa-angle-right" id="caret-id4b196e0faee1ed4d23b77ed22b7ef324"></i>
              
            </a>
            
            <a class="d-inline docs-toc-link ml-2 mr-2 " href="/book/argo-rollouts/kubectl-plugin/">Kubectl plugin</a>
          
        </div>
        
          
            <ul class="nav docs-sidenav collapse  " id="id4b196e0faee1ed4d23b77ed22b7ef324">
          



  <li class="child level1 "><a href="/book/argo-rollouts/kubectl-plugin/overview/">概览</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/kubectl-plugin/command/">命令</a></li>

          
            </ul>
          
        

        
          </div>
        




  <li class="child level1 "><a href="/book/argo-rollouts/migrating/">迁移到 Rollouts</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/best-practices/">最佳实践</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/faq/">FAQ</a></li>




  <li class="child level1 "><a href="/book/argo-rollouts/security/">安全</a></li>

          
            </ul>
          
        

        
          </div>
        

    
  
</nav>

    </aside>

    
    <aside class="docs-toc d-none d-xl-block col-xl-2">
      
  <div class="bg-white mb-4 sticky-top aside-toc">
    <p class="toc-sidebar-title">
      目录
    </p>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#示例">示例</a></li>
  </ul>
</nav>
  </div>



    </aside>

    <main class="py-md-3 pl-md-3 mt-2 article-content col-xl-8" role="main">
      <div class="row pt-2">
            <div class="col-12">
              <h1>
               Rollout 规范
              </h1>
              
                <div class="book-page-metadata mb-2">
                    <ul class="list-inline">
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-calendar"></i>
                            </span>2023/06/21</li>
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-clock"></i>
                            </span>16 分钟</li>
                        <li class="list-inline-item mr-2 mb-md-0"><span><i class="fa-regular fa-file-word"></i>
                            </span>3622 字</li>
                    </ul>
                </div>
                
            </div>
        </div>

      <article class="border-bottom content mb-4">
          
            <details class="mobile-toc d-print-none d-show-block mb-0 pt-2">
  <summary class="font-weight-bold">点击查看目录</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#示例">示例</a></li>
  </ul>
</nav>
</details>

          
          <p>以下描述了 Rollout 的所有可用字段：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">argoproj.io/v1alpha1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Rollout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">example-rollout-canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 期望的 Pod 数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 默认为 1。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">analysis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 限制存储历史上成功的分析运行和实验的数量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 默认为 5。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">successfulRunHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 限制存储历史上不成功的分析运行和实验的数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 不成功的阶段有：&#34;Error&#34;，&#34;Failed&#34;，&#34;Inconclusive&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 默认为 5。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">unsuccessfulRunHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Pod 的标签选择器。被选择的 Pod 的现有副本集将受到此 Rollout 的影响。它必须与 Pod 模板的标签匹配。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">guestbook</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># WorkloadRef 包含对提供 Pod 模板（例如 Deployment）的工作负载的引用。如果使用，则不使用 Rollout 模板属性。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workloadRef</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">apps/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rollout-ref-deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 模板描述将被创建的 Pod。与 deployment 相同。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 如果使用，则不使用 Rollout workloadRef 属性。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">guestbook</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">argoproj/rollouts-demo:blue</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 新创建的 Pod 必须准备好而没有任何容器崩溃的最小秒数，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 才能被视为可用。默认为 0（Pod 将在准备就绪后立即被视为可用）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">minReadySeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 要保留的旧 ReplicaSet 的数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 默认为 10。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">revisionHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Pause 允许用户在任何时候手动暂停 Rollout。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 在手动暂停期间，Rollout 将不会通过其步骤前进，但是 HPA 自动扩展将仍然发生。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 通常不在清单中明确设置，而是通过工具（例如 kubectl argo rollouts pause）进行控制。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 如果在 Rollout 的初始创建时为 true，则不会从零自动扩展副本，除非手动推广。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">paused</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 在更新期间，Rollout 必须取得进展的最大时间（以秒为单位），</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 否则将被视为失败。Argo Rollouts 将继续处理失败的 Rollout，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 并在 Rollout 状态中显示具有 ProgressDeadlineExceeded 原因的条件。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 请注意，进度不会在 Rollout 暂停期间估计。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 默认为 600 秒</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">progressDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="m">600</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 当超过 ProgressDeadlineSeconds 时，是否中止更新。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 可选，默认值为 false。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">progressDeadlineAbort</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># UTC 时间戳，Rollout 应该按顺序重新启动所有的 Pod。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 由“kubectl argo rollouts restart ROLLOUT”命令使用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 控制器将确保所有 Pod 的 creationTimestamp 大于或等于此值。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">restartAt</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2020-03-30T21:19:35Z&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 回滚窗口提供了一种快速跟踪到以前部署的版本的方法。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># 可选，默认未设置。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rollbackWindow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">revisions</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 蓝绿更新策略</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">blueGreen</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># Rollout 修改的服务的引用作为活动服务。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 必填项。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">activeService</span><span class="p">:</span><span class="w"> </span><span class="l">active-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 促销之前执行分析的运行，以在服务切换之前执行分析。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">prePromotionAnalysis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l">success-rate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">service-name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">guestbook-svc.default.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 促销后执行分析的运行，以在服务切换之后执行分析。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">postPromotionAnalysis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l">success-rate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">service-name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">guestbook-svc.default.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># Rollout 修改的服务的名称作为预览服务的名称。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">previewService</span><span class="p">:</span><span class="w"> </span><span class="l">preview-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在切换之前，在预览服务下运行的副本数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 一旦 Rollout 恢复，新的 ReplicaSet 将完全扩展，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 然后才会发生切换 +可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">previewReplicaCount</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 指示 Rollout 是否应自动将新的 ReplicaSet 提升为活动服务，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 还是进入暂停状态。如果未指定，则默认值为 true。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">autoPromotionEnabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在新的 ReplicaSet 准备就绪后，自动将当前 ReplicaSet 提升为活动状态</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 经过指定的暂停延迟时间（以秒为单位）。如果省略，则 Rollout 将进入暂停状态，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 直到通过将 spec.Paused 重置为 false 手动恢复。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">autoPromotionSeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在缩放之前添加延迟以缩小先前的 ReplicaSet。如果省略，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># Rollout 将在缩小先前的 ReplicaSet 之前等待 30 秒。建议至少等待 30 秒，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 以确保在集群中的节点之间进行 IP 表传播。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在被缩放之前可运行的旧 RS 的数量限制。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 默认为 nil。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">scaleDownDelayRevisionLimit</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 如果更新被中止，则在缩小预览副本集之前添加延迟。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 0 表示不缩小。默认为 30 秒。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">abortScaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 所需和先前 ReplicaSet 之间的反亲和力配置。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 只能指定一个</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">antiAffinity</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">preferredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c"># 在 1-100 之间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># activeMetadata 将合并并即时更新到活动 Pod 的 ReplicaSet 的 spec.template.metadata 中。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">activeMetadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">active</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 只在预览阶段将分配给预览 Pod 的元数据。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># +可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">previewMetadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">preview</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># 金丝雀更新策略</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">canary</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 控制器将更新以选择金丝雀 Pod 的服务的引用。用于流量路由。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 必需的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">canaryService</span><span class="p">:</span><span class="w"> </span><span class="l">canary-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 控制器将更新以选择稳定 Pod 的服务的引用。用于流量路由。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 必需的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">stableService</span><span class="p">:</span><span class="w"> </span><span class="l">stable-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 将附加到金丝雀 Pod 的元数据。此元数据仅在更新期间存在，因为在完全推广的 Rollout 中没有金丝雀 Pod。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">canaryMetadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 将附加到稳定 Pod 的元数据。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">stableMetadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">annotations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">stable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l">stable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在更新期间可以不可用的最大 Pod 数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 值可以是绝对数（例如 5），也可以是开始更新时总 Pod 数的百分比（例如 10％）。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 绝对数由百分比四舍五入计算。如果 MaxSurge 为 0，则不能为 0。默认情况下，使用固定值 1。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 例如：将此设置为 30％时，可以在滚动更新开始时立即将旧 RC 缩减 30％。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 一旦新的 Pod 准备就绪，旧的 RC 可以进一步缩减，然后才能扩展新的 RC，从而确保</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在更新期间始终至少有 70％的原始 Pod 数可用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># +可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">maxUnavailable</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 可以调度的 Pod 的最大数量，超过原始 Pod 数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 值可以是绝对数（例如 5）或开始更新时总 Pod 数量的百分比（例如 10％）。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 如果 MaxUnavailable 为 0，则不能为 0。绝对数从百分比计算，四舍五入。默认情况下，使用值 1。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 例如：将此设置为 30％时，可以在滚动更新开始时立即将新的 RC 扩展 30％。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 一旦旧 Pod 被杀死，新的 RC 可以进一步扩展，以确保在更新期间运行的 Pod 的总数最多为原始 Pod 的 130％。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># +可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">maxSurge</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;20%&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 当使用流量路由的金丝雀策略时，添加在缩小先前的 ReplicaSet 之前的延迟（默认为 30 秒）。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在将稳定服务选择器切换到指向新的 ReplicaSet 之后，需要在缩小先前的 ReplicaSet 之前延迟，以便为流量提供程序提供时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 重新定位新的 Pod。在基本的，基于副本权重的金丝雀策略中使用此值时，将忽略它。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">scaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在使用流量路由的金丝雀时，每个 ReplicaSet 将请求的最小 Pod 数量。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 这是为了确保每个 ReplicaSet 的高可用性。默认为 1。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">minPodsPerReplicaSet</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在被缩放之前可运行的旧 RS 的数量限制。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 默认为 nil。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">scaleDownDelayRevisionLimit</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在滚动更新期间运行的后台分析。在滚动更新的初始部署时跳过。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">analysis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l">success-rate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">service-name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">guestbook-svc.default.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># valueFrom.podTemplateHashValue 是一种方便的方法，用于提供稳定 ReplicaSet 或最新 ReplicaSet 的 rollouts-pod-template-hash 值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">stable-hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">podTemplateHashValue</span><span class="p">:</span><span class="w"> </span><span class="l">Stable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">latest-hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">podTemplateHashValue</span><span class="p">:</span><span class="w"> </span><span class="l">Latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># valueFrom.fieldRef 允许提供有关 Rollout 的元数据作为分析的参数。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">region</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">fieldRef</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">fieldPath</span><span class="p">:</span><span class="w"> </span><span class="l">metadata.labels[&#39;region&#39;]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 步骤定义了在更新金丝雀时要执行的步骤序列。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在 Rollout 的初始部署时跳过。+可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 将金丝雀 ReplicaSet 的比例设置为 20％</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setWeight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 暂停 Rollout 一小时。支持的单位：s，m，h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">pause</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l">1h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 无限期暂停，直到手动恢复</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">pause</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 设置金丝雀规模为显式计数，而不更改流量权重</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># （仅在 trafficRouting 中支持）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setCanaryScale</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 将金丝雀规模设置为 spec.replicas 的百分比，而不更改流量权重</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># （仅在 trafficRouting 中支持）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setCanaryScale</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 将金丝雀规模设置为匹配金丝雀流量权重（默认行为）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setCanaryScale</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">matchTrafficWeight</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 基于标头值设置标头路由</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 设置基于标头的路由将会将所有流量发送到金丝雀，对于请求头“version”中指定的请求</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># （仅在 trafficRouting 中受支持，目前仅适用于 Istio）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setHeaderRoute</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># argo rollouts 将创建的路由的名称，这也必须在 spec.strategy.canary.trafficRouting.managedRoutes 中配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;header-route-1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 标头路由的匹配规则，如果缺少，它将作为路由的删除</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">match</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="c"># headerName 应用匹配规则的标头名称</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">headerName</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;version&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="c"># headerValue 必须包含一个精确、正则表达式或前缀字段。并非所有的流量路由器都支持所有类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">headerValue</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c"># 精确匹配只有在标头值完全相同的情况下才会匹配</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c"># 如果正则表达式匹配，则会匹配该规则</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2.0.(.*)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c"># 前缀将是标头值的前缀匹配</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2.0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 使用指定的匹配规则设置阴影路由</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 在部署期间，流量将在配置的百分比下被镜像到金丝雀服务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># （仅在 trafficRouting 中受支持，目前仅适用于 Istio）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">setMirrorRoute</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># argo rollouts 将创建的路由的名称，这也必须在 spec.strategy.canary.trafficRouting.managedRoutes 中配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;header-route-1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 匹配流量的百分比，将流量复制到金丝雀</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">percentage</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 阴影路由的匹配规则，如果缺少，它将作为路由的删除</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 单个 match 块内的所有条件都有 AND 语义，而 match 块列表具有 OR 语义。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 每个 match 中的类型（方法、路径、标头）必须具有一种且仅一种匹配类型（exact、regex、prefix）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 并非所有的匹配类型（exact、regex、prefix）都被所有流量路由器支持。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">match</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="c"># 匹配哪种 HTTP 方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;GET&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;P.*&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;POST&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="c"># 匹配哪些 HTTP URL 路径。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/test&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/test/.*&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">agent-1b</span><span class="p">:</span><span class="w"> </span><span class="c"># 在匹配中使用的 HTTP 标头名称。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;firefox&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;firefox2(.*)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;firefox&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 内联分析步骤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">analysis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l">success-rate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 内联实验步骤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">experiment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l">1h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">baseline</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">specRef</span><span class="p">:</span><span class="w"> </span><span class="l">stable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c"># 可选，如果设置，将为实验创建一个服务</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">service</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="c"># 可选，如果未包括名称，则 service: {} 也可以接受</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">test-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">specRef</span><span class="p">:</span><span class="w"> </span><span class="l">canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c"># 可选，设置路由到该版本的流量权重</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">analyses</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name </span><span class="p">:</span><span class="w"> </span><span class="l">mann-whitney</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">templateName</span><span class="p">:</span><span class="w"> </span><span class="l">mann-whitney</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c"># 附加到 AnalysisRun 的元数据。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">analysisRunMetadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">app.service.io/analysisType</span><span class="p">:</span><span class="w"> </span><span class="l">smoke-test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">annotations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">link.argocd.argoproj.io/external-link</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;http://my-loggin-platform.com/pre-generated-link&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 期望和先前的 ReplicaSet 之间的反亲和性配置。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 只能指定一个。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">antiAffinity</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">preferredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c"># 在 1-100 之间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 流量路由指定 Ingress 控制器或服务网格</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 配置以实现高级流量分割。如果省略，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 会通过金丝雀和稳定 ReplicaSet 之间的加权副本计数实现流量分割。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">trafficRouting</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 这是 Argo Rollouts 有权管理的路由列表，目前仅对 setMirrorRoute 和 setHeaderRoute 必需。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># managedRoutes 数组的顺序还设置了流量路由器中的优先级。Argo Rollouts 将按上面指定的顺序将这些路由置于</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 任何已定义于使用的流量路由器中的路由之上，如果存在。这里的名称必须与 setHeaderRoute 和 setMirrorRoute 步骤中的名称相匹配。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">managedRoutes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">set-header</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">mirror-route</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># Istio 流量路由器配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">istio</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># virtualService 或 virtualServices 都可以配置。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">virtualService</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rollout-vsvc </span><span class="w"> </span><span class="c"># 必需</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">primary</span><span class="w"> </span><span class="c"># 如果 VirtualService 中只有一个路由，则为可选项，否则为必需项</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">virtualServices</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 可配置一个或多个 virtualServices</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rollouts-vsvc1 </span><span class="w"> </span><span class="c"># 必需</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span>- <span class="l">primary</span><span class="w"> </span><span class="c"># 如果 VirtualService 中只有一个路由，则为可选项，否则为必需项</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rollouts-vsvc2 </span><span class="w"> </span><span class="c"># 必需</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span>- <span class="l">secondary</span><span class="w"> </span><span class="c"># 如果 VirtualService 中只有一个路由，则为可选项，否则为必需项</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># NGINX Ingress 控制器路由配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">nginx</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># 必须配置 stableIngress 或 stableIngresses，但不能同时配置两者。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">stableIngress</span><span class="p">:</span><span class="w"> </span><span class="l">primary-ingress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">stableIngresses</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">primary-ingress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">secondary-ingress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">tertiary-ingress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">annotationPrefix</span><span class="p">:</span><span class="w"> </span><span class="l">customingress.nginx.ingress.kubernetes.io</span><span class="w"> </span><span class="c"># 可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">additionalIngressAnnotations</span><span class="p">:</span><span class="w">   </span><span class="c"># 可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">canary-by-header</span><span class="p">:</span><span class="w"> </span><span class="l">X-Canary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">canary-by-header-value</span><span class="p">:</span><span class="w"> </span><span class="l">iwantsit</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># ALB Ingress 控制器路由配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">alb</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">ingress</span><span class="p">:</span><span class="w"> </span><span class="l">ingress </span><span class="w"> </span><span class="c"># 必需</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">servicePort</span><span class="p">:</span><span class="w"> </span><span class="m">443</span><span class="w">  </span><span class="c"># 必需</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">annotationPrefix</span><span class="p">:</span><span class="w"> </span><span class="l">custom.alb.ingress.kubernetes.io</span><span class="w"> </span><span class="c"># 可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># 服务网格接口路由配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">smi</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">rootService</span><span class="p">:</span><span class="w"> </span><span class="l">root-svc</span><span class="w"> </span><span class="c"># 可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">trafficSplitName</span><span class="p">:</span><span class="w"> </span><span class="l">rollout-example-traffic-split</span><span class="w"> </span><span class="c"># 可选</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 在使用流量路由的金丝雀策略中，更新中止之前的金丝雀 Pod 缩减的延迟时间。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># 0 表示不缩减金丝雀 Pod。默认为 30 秒。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">abortScaleDownDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">status</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">pauseConditions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="l">StepPause</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">startTime</span><span class="p">:</span><span class="w"> </span><span class="ld">2019-10-00</span><span class="l">T1234</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="l">BlueGreenPause</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">startTime</span><span class="p">:</span><span class="w"> </span><span class="ld">2019-10-00</span><span class="l">T1234</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="l">AnalysisRunInconclusive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">startTime</span><span class="p">:</span><span class="w"> </span><span class="ld">2019-10-00</span><span class="l">T1234</span><span class="w">
</span></span></span></code></pre></div><h2 id="示例">示例</h2>
<p>你可以在以下位置找到 Rollouts 示例：</p>
<ul>
<li><a href="https://github.com/argoproj/argo-rollouts/tree/master/examples" title="example 目录" target="_blank" rel="noopener">example 目录</a>
</li>
<li><a href="https://github.com/argoproj/rollouts-demo" title="Argo Rollouts Demo 应用" target="_blank" rel="noopener">Argo Rollouts Demo 应用</a>
</li>
</ul>

      </article>
      <div class="mb-4">
          最后更新于 2024/05/16
          <div class="mb-4">
            


          </div>
          
            
<div>
  <ul class="pager blog-pager">
  
    <li class="next">
      <a href="https://jimmysong.io/book/argo-rollouts/rollout/hpa-support/" data-toggle="tooltip" data-placement="top" title="水平 Pod 自动缩放">下一篇 &rarr;</a>
    </li>
  
  
  </ul>
</div>

          
          <div class="body-footer">
            
          </div>
      </div>
    </main>
  </div>
</div>

      
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var notificationEnabled =  true ;
        var showOnMobile =  false ;
        
        function isMobile() {
            return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        }

        if (notificationEnabled && (!isMobile() || showOnMobile)) {
            var notificationKey = 'hasSeenNotification';
            var notificationExpiryKey = 'notificationExpiry';
            var notificationExpiryDuration =  24  * 60 * 60 * 1000;  

            var hasSeenNotification = localStorage.getItem(notificationKey);
            var notificationExpiry = localStorage.getItem(notificationExpiryKey);
            var currentTime = new Date().getTime();

            if (!hasSeenNotification || currentTime > notificationExpiry) {
                var notificationMessage = '请按组合键 ⌘\/CTRL \u002b K';
                var notificationTitle = '欢迎使用站内搜索';
                var notificationType = 'info';
                var notificationPositionClass = 'toast-bottom-left';
                var notificationShowDuration =  300 ;
                var notificationHideDuration =  1000 ;
                var notificationTimeOut =  5000 ;
                var notificationExtendedTimeOut =  1000 ;

                toastr.options = {
                    "closeButton": true,
                    "progressBar": true,
                    "positionClass": notificationPositionClass,
                    "showDuration": notificationShowDuration,
                    "hideDuration": notificationHideDuration,
                    "timeOut": notificationTimeOut,
                    "extendedTimeOut": notificationExtendedTimeOut,
                    "preventDuplicates": true  
                };

                if (notificationMessage) {
                    toastr[notificationType](notificationMessage, notificationTitle);
                }

                
                localStorage.setItem(notificationKey, 'true');
                localStorage.setItem(notificationExpiryKey, currentTime + notificationExpiryDuration);
            }
        }
    });
</script>


<footer>
  
  <div class="footer bg-footer section-sm border-bottom">
    <div class="container-xl">
      <div class="row">
        <div class="col col-xl-4 d-sm-none mb-2 mb-lg-0 d-xl-block d-none">
          
          <p class="h4 text-white mb-4 text-uppercase">联系</p>
          
          <ul class="list-unstyled">
            
            
            <li class="mb-4 text-color">微信公众号</li>
            
            
            <li class="mb-4"><img src="/images/servicemesher-wechat.webp" width="118px" height="118px" alt="footer image"></li>
            
            
            
          
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h4 text-white mb-4 text-uppercase">博客</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/blog/istio-ambient-mode-limitations/">Istio Ambient 模式的局限性解析</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/envoy-gateway-introduction/">Envoy Gateway 概述——使用 Gateway API 的现代 Kubernetes 入口</a></li>
            
            <li class="mb-3"><a class="text-color" href="/blog/kubecon-eu-2024-transparency-report/">KubeCon EU 2024 透明度报告解读</a></li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h4 text-white mb-4 text-uppercase">链接</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://tetrate.io/?jimmysong" target="_blank" rel="noopener noreferrer">
                  Tetrate 公司
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://space.bilibili.com/515485124" target="_blank" rel="noopener noreferrer">
                  云原生学院|Bilibili
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/awesome-cloud-native/" target="_blank" rel="noopener noreferrer">
                  云原生开源项目大全
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://cloudnative.to" target="_blank" rel="noopener noreferrer">
                  云原生社区（中国）
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book" >
                  云原生资料库
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h4 text-white mb-4 text-uppercase">教程</p>
          <ul class="list-unstyled">
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Envoy 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="https://academy.tetrate.io/courses/istio-fundamentals-zh" target="_blank" rel="noopener noreferrer">
                  Istio 基础教程
                  
                  <i class="fa-solid fa-arrow-up-right-from-square icon-small"></i>
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/book/kubernetes-handbook/" >
                  Kubernetes 基础教程
                  
              </a>
            </li>
            
            <li class="mb-3">
              <a class="text-color" href="/blog/istio-service-mesh-book/" >
                  深入理解 Istio
                  
              </a>
            </li>
            
          </ul>
        </div>

        
        <div class="col col-xl-2 col-6 col-sm-3 mb-2">
          <p class="h4 text-white mb-4 text-uppercase">通知</p>
          <ul class="list-unstyled">
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-meetup-dalian-2024/">2024 大连云原生技术开放日</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/cloud-native-library-migration/">云原生资料库已整合至主站</a></li>
            
            <li class="mb-3"><a class="text-color" href="/notice/kubecon-eu-2024/">KubeCon 欧洲 2024 巴黎见！</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>

  
  <div class="copyright py-4 bg-footer">
    <div class="container-xl">
      <div class="row">
        <div class="col-sm-6 text-sm-left text-center">
          <p class="mb-0 text-color">© 2017-2024 Jimmy Song 保留所有权利</p>
        </div>
        <div class="col-sm-6 text-sm-right text-center">
          <ul class="list-inline">
            
            <li class="list-inline-item">
                <a class="d-inline-block p-2" href="https://twitter.com/jimmysongio" target="_blank" rel="noopener">
                    <i class="fa-brands fa-x-twitter text-white"></i>
                </a>
            </li>
            
            <li class="list-inline-item">
                <a class="d-inline-block p-2" href="https://github.com/rootsongjc" target="_blank" rel="noopener">
                    <i class="fa-brands fa-github text-white"></i>
                </a>
            </li>
            
            <li class="list-inline-item">
                <a class="d-inline-block p-2" href="https://linkedin.com/in/jimmysongio" target="_blank" rel="noopener">
                    <i class="fa-brands fa-linkedin text-white"></i>
                </a>
            </li>
            
            <li class="list-inline-item">
                <a class="d-inline-block p-2" href="mailto:rootsongjc@gmail.com" target="_blank" rel="noopener">
                    <i class="fa-solid fa-envelope text-white"></i>
                </a>
            </li>
            
            <li class="list-inline-item">
                <a class="d-inline-block p-2" href="/blog/index.xml" target="_blank" rel="noopener">
                    <i class="fa-solid fa-rss text-white"></i>
                </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- JS Plugins -->

<script src="/plugins/popper/popper.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/filterizr/jquery.filterizr.min.js"></script>

<script src="/plugins/search/fuse.min.js"></script>

<script src="/plugins/search/mark.js"></script>

<script src="/plugins/hex_md5/hex_md5.js"></script>

<script src="/plugins/anchor/anchor.min.js"></script>

<script src="/plugins/tocbot/tocbot.min.js"></script>

<script src="/plugins/bigger-picture/bigger-picture.min.js"></script>


<!-- Main Script -->

<script src="/js/script.min.77eac72a1079cf6df65de5aeebd30ac100f200ca8d2267f9e9974d927ec63571.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESY906ZWZ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ESY906ZWZ0');
</script>


<!-- Baidu analysis -->
<meta name="baidu-site-verification" content="g8IYR9SNLF" />


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>




<script>
    anchors.add();
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>







<script src="/js/wowchemy-search.min.878c286b398e3aef67e3fa00875e5f0c.js" type="module"></script>
<script id="search-hit-fuse-template" type="text/x-template">
  <div class="search-hit" id="summary-{{key}}">
    <div class="search-hit-content border-bottom">
      <div class="search-hit-name">
        <div class='search-hit-link'><a href="{{relpermalink}}">{{title}}</a></div>
        <div class="search-hit-metadata">
            <span><i class="fa-regular fa-calendar mr-1"></i>{{date}}</span>
            <span>{{section}}</span>
        </div>
        <div class="search-hit-description">{{snippet}}</div>
      </div>
    </div>
  </div>
</script>


</body>

</html>
