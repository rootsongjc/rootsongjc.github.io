<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="baidu-site-verification" content="g8IYR9SNLF" />
    <meta name="uyan_auth" content="419f63884b" /> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="kubernetes, traefik, ingress, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="Kubernetes traefik ingresså®‰è£…è¯•ç”¨ : jimmysong.io"/>
<meta property="og:site_name" content="rootsongjc is Jimmy Song"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="https://jimmysong.io/blogs/traefik-ingress-installation/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-20"/>
<meta property="article:modified_time" content="2017-04-20"/>



<meta property="article:tag" content="kubernetes">
<meta property="article:tag" content="traefik">
<meta property="article:tag" content="ingress">




<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rootsongjc">
<meta name="twitter:title" content="Kubernetes traefik ingresså®‰è£…è¯•ç”¨ : jimmysong.io">
<meta name="twitter:creator" content="@rootsongjc">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="jimmysong.io">

    <base href="https://jimmysong.io/">
    <title> Kubernetes traefik ingresså®‰è£…è¯•ç”¨ - jimmysong.io focus on Cloud Native & Big Data </title>
    <link rel="canonical" href="https://jimmysong.io/blogs/traefik-ingress-installation/"> <link rel="stylesheet" href="https://jimmysong.io/static/css/style.css">




<link rel="stylesheet" href="/static/css/syntax.css">


<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?11f7d254cfa4e0ca44b175c66d379ecc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>





    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>


<body lang="en" itemscope itemtype="http://schema.org/Article">
    <header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-octocat" id="logo"> </div></a>
    </figure>
    <div id="byline">by Jimmy Song</div>
    <nav id="nav">
    <ul id="mainnav">
    <li>
        <a href="/blogs/">
            <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
            <span> blogs </span>
        </a>
    </li>
    <li>
        <a href="/projects/">
            <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
            <span> projects </span>
        </a>
    </li>
    <li>
        <a href="/talks/">
            <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
            <span> talks </span>
        </a>
    </li>
    <li>
        <a href="http://www.linkedin.com/in/rootsongjc">
            <span class="icon"> <i aria-hidden="true" class="icon-linkedin"></i></span>
            <span> me </span>
        </a>
    </li>
</ul>
    <ul id="social">
    <li id="share">
        <span class="icon icon-bubbles"> </span>
        <span class="title"> share </span>
        <div class="dropdown share">
            <ul class="social">
                <li> <a href="https://twitter.com/intent/tweet?status=Kubernetes%20traefik%20ingress%e5%ae%89%e8%a3%85%e8%af%95%e7%94%a8-https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="https://plus.google.com/share?url=https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f&title=Kubernetes%20traefik%20ingress%e5%ae%89%e8%a3%85%e8%af%95%e7%94%a8&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://del.icio.us/post?url=https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                <li> <a href="http://www.reddit.com/submit?url=https%3a%2f%2fjimmysong.io%2fblogs%2ftraefik-ingress-installation%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
            </ul>
            <span class="subcount">sharing is caring</span>
        </div>
    </li>
    <li id="follow">
        <span class="icon icon-rocket"> </span>
        <span class="title"> follow </span>
        <div class="dropdown follow">
            <ul class="social">
                <li> <a href="http://www.twitter.com/jimmysongio" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                <li> <a href="http://www.facebook.com/jimmysongio" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                <li> <a href="http://www.linkedin.com/in/jimmysongio" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                <li> <a href="http://github.com/rootsongjc" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                <li> <a href="https://www.douban.com/people/deamonj/" target="_blank" title="è±†ç“£" class="facebook"><span class="icon icon-idea"></span>Douban</a> </li>
                <li> <a href="https://jimmysongio.tuchong.com/" target="_blank" title="å›¾è™«" class="github"><span class="icon icon-cc-2"></span>Tuchong</a> </li>
            </ul>
            <span class="subcount">join 10k+ subscribers &amp; followers</span>
        </div>
    </li>
</ul>

    </nav>
</header>
 
    <section id="main">
        <h1 itemprop="name" id="title">Kubernetes traefik ingresså®‰è£…è¯•ç”¨</h1>
        <div>
            <article itemprop="articleBody" id="content">
                

<p><img src="http://olz1di9xf.bkt.clouddn.com/20160915046.jpg" alt="fish" /></p>

<p><em>ï¼ˆé¢˜å›¾ï¼šğŸŸ@é±¼ç¼¸ Sep 15,2016ï¼‰</em></p>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>æ˜¨å¤©ç¿»äº†ä¸‹<a href="https://jimmysong.io/blogs/kubernetes-ingress-resource/">Ingressè§£æ</a>ï¼Œç„¶åå®‰è£…è¯•ç”¨äº†ä¸‹<a href="https://traefik.io">traefik</a>ï¼Œè¿‡ç¨‹å·²åŒæ­¥åˆ°<a href="https://www.gitbook.com/book/rootsongjc/kubernetes-handbook">kubernetes-handbook</a>ä¸Šï¼ŒGithubåœ°å€<a href="https://github.com/rootsongjc/kubernetes-handbook">https://github.com/rootsongjc/kubernetes-handbook</a></p>

<h2 id="ingressç®€ä»‹">Ingressç®€ä»‹</h2>

<p>å¦‚æœä½ è¿˜ä¸äº†è§£ï¼Œingressæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å…ˆçœ‹ä¸‹æˆ‘ç¿»è¯‘çš„Kuberneteså®˜ç½‘ä¸Šingressçš„ä»‹ç»<a href="https://jimmysong.io/blogs/kubernetes-ingress-resource/">Kubernetes Ingressè§£æ</a>ã€‚</p>

<p><strong>ç†è§£Ingress</strong></p>

<p>ç®€å•çš„è¯´ï¼Œingresså°±æ˜¯ä»kubernetesé›†ç¾¤å¤–è®¿é—®é›†ç¾¤çš„å…¥å£ï¼Œå°†ç”¨æˆ·çš„URLè¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„serviceä¸Šã€‚Ingressç›¸å½“äºnginxã€apacheç­‰è´Ÿè½½å‡è¡¡æ–¹å‘ä»£ç†æœåŠ¡å™¨ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬è§„åˆ™å®šä¹‰ï¼Œå³URLçš„è·¯ç”±ä¿¡æ¯ï¼Œè·¯ç”±ä¿¡æ¯å¾—çš„åˆ·æ–°ç”±<a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#ingress-controllers">Ingress controller</a>æ¥æä¾›ã€‚</p>

<p><strong>ç†è§£Ingress Controller</strong></p>

<p>Ingress Controller å®è´¨ä¸Šå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸ªç›‘è§†å™¨ï¼ŒIngress Controller é€šè¿‡ä¸æ–­åœ°è·Ÿ kubernetes API æ‰“äº¤é“ï¼Œå®æ—¶çš„æ„ŸçŸ¥åç«¯ serviceã€pod ç­‰å˜åŒ–ï¼Œæ¯”å¦‚æ–°å¢å’Œå‡å°‘ podï¼Œservice å¢åŠ ä¸å‡å°‘ç­‰ï¼›å½“å¾—åˆ°è¿™äº›å˜åŒ–ä¿¡æ¯åï¼ŒIngress Controller å†ç»“åˆä¸‹æ–‡çš„ Ingress ç”Ÿæˆé…ç½®ï¼Œç„¶åæ›´æ–°åå‘ä»£ç†è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶åˆ·æ–°å…¶é…ç½®ï¼Œè¾¾åˆ°æœåŠ¡å‘ç°çš„ä½œç”¨ã€‚</p>

<h2 id="éƒ¨ç½²traefik">éƒ¨ç½²Traefik</h2>

<p><strong>ä»‹ç»traefik</strong></p>

<p><a href="https://traefik.io/">Traefik</a>æ˜¯ä¸€æ¬¾å¼€æºçš„åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡å·¥å…·ã€‚å®ƒæœ€å¤§çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿä¸å¸¸è§çš„å¾®æœåŠ¡ç³»ç»Ÿç›´æ¥æ•´åˆï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–åŠ¨æ€é…ç½®ã€‚ç›®å‰æ”¯æŒDocker, Swarm, Mesos/Marathon, Mesos, Kubernetes, Consul, Etcd, Zookeeper, BoltDB, Rest APIç­‰ç­‰åç«¯æ¨¡å‹ã€‚</p>

<p>ä»¥ä¸‹é…ç½®æ–‡ä»¶å¯ä»¥åœ¨<a href="https://github.com/rootsongjc/kubernetes-handbook">kubernetes-handbook</a>GitHubä»“åº“ä¸­çš„<a href="manifests/traefik-ingress/">manifests/traefik-ingress/</a>ç›®å½•ä¸‹æ‰¾åˆ°ã€‚</p>

<p><strong>åˆ›å»ºingress-rbac.yaml</strong></p>

<p>å°†ç”¨äºservice accountéªŒè¯ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-Yaml" data-lang="Yaml"><span class="">apiVersion: v1
</span><span class="">kind: ServiceAccount
</span><span class="">metadata:
</span><span class="">  name: ingress
</span><span class="">  namespace: kube-system
</span><span class="">
</span><span class="">---
</span><span class="">
</span><span class="">kind: ClusterRoleBinding
</span><span class="">apiVersion: rbac.authorization.k8s.io/v1beta1
</span><span class="">metadata:
</span><span class="">  name: ingress
</span><span class="">subjects:
</span><span class="">  - kind: ServiceAccount
</span><span class="">    name: ingress
</span><span class="">    namespace: kube-system
</span><span class="">roleRef:
</span><span class="">  kind: ClusterRole
</span><span class="">  name: cluster-admin
</span><span class="">  apiGroup: rbac.authorization.k8s.io</span></code></pre>
</div>
<p><strong>åˆ›å»ºåä¸º<code>traefik-ingress</code>çš„ingress</strong>ï¼Œæ–‡ä»¶åtraefik.yaml</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="">extensions/v1beta</span><span class="m">1</span><span class="w">
</span><span class="w"></span><span class="">kind</span><span class="p">:</span><span class="w"> </span><span class="">Ingress</span><span class="w">
</span><span class="w"></span><span class="">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">name</span><span class="p">:</span><span class="w"> </span><span class="">traefik-ingress</span><span class="w">
</span><span class="w"></span><span class="">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">rules</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">-</span><span class="w"> </span><span class="">host</span><span class="p">:</span><span class="w"> </span><span class="">traefik.nginx.io</span><span class="w">
</span><span class="w">    </span><span class="">http</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">paths</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">-</span><span class="w"> </span><span class="">path</span><span class="p">:</span><span class="w"> </span><span class="">/</span><span class="w">
</span><span class="w">        </span><span class="">backend</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="">serviceName</span><span class="p">:</span><span class="w"> </span><span class="">my-nginx</span><span class="w">
</span><span class="w">          </span><span class="">servicePort</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">  </span><span class="">-</span><span class="w"> </span><span class="">host</span><span class="p">:</span><span class="w"> </span><span class="">traefik.frontend.io</span><span class="w">
</span><span class="w">    </span><span class="">http</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">paths</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">-</span><span class="w"> </span><span class="">path</span><span class="p">:</span><span class="w"> </span><span class="">/</span><span class="w">
</span><span class="w">        </span><span class="">backend</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="">serviceName</span><span class="p">:</span><span class="w"> </span><span class="">frontend</span><span class="w">
</span><span class="w">          </span><span class="">servicePort</span><span class="p">:</span><span class="w"> </span><span class="m">80</span></code></pre>
</div>
<p>è¿™å…¶ä¸­çš„<code>backend</code>ä¸­è¦é…ç½®default namespaceä¸­å¯åŠ¨çš„serviceåå­—ã€‚<code>path</code>å°±æ˜¯URLåœ°å€åçš„è·¯å¾„ï¼Œå¦‚traefik.frontend.io/pathï¼Œserviceå°†ä¼šæ¥å—pathè¿™ä¸ªè·¯å¾„ï¼Œhostæœ€å¥½ä½¿ç”¨service-name.filed1.filed2.domain-nameè¿™ç§ç±»ä¼¼ä¸»æœºåç§°çš„å‘½åæ–¹å¼ï¼Œæ–¹ä¾¿åŒºåˆ†æœåŠ¡ã€‚</p>

<p>æ ¹æ®ä½ è‡ªå·±ç¯å¢ƒä¸­éƒ¨ç½²çš„serviceçš„åå­—å’Œç«¯å£è‡ªè¡Œä¿®æ”¹ï¼Œæœ‰æ–°serviceå¢åŠ æ—¶ï¼Œä¿®æ”¹è¯¥æ–‡ä»¶åå¯ä»¥ä½¿ç”¨<code>kubectl replace -f traefik.yaml</code>æ¥æ›´æ–°ã€‚</p>

<p>æˆ‘ä»¬ç°åœ¨é›†ç¾¤ä¸­å·²ç»æœ‰ä¸¤ä¸ªserviceäº†ï¼Œä¸€ä¸ªæ˜¯nginxï¼Œå¦ä¸€ä¸ªæ˜¯å®˜æ–¹çš„<code>guestbook</code>ä¾‹å­ã€‚</p>

<p><strong>åˆ›å»ºDepeloyment</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-Yaml" data-lang="Yaml"><span class="">apiVersion: extensions/v1beta1
</span><span class="">kind: Deployment
</span><span class="">metadata:
</span><span class="">  name: traefik-ingress-lb
</span><span class="">  namespace: kube-system
</span><span class="">  labels:
</span><span class="">    k8s-app: traefik-ingress-lb
</span><span class="">spec:
</span><span class="">  template:
</span><span class="">    metadata:
</span><span class="">      labels:
</span><span class="">        k8s-app: traefik-ingress-lb
</span><span class="">        name: traefik-ingress-lb
</span><span class="">    spec:
</span><span class="">      terminationGracePeriodSeconds: 60
</span><span class="">      hostNetwork: true
</span><span class="">      restartPolicy: Always
</span><span class="">      serviceAccountName: ingress
</span><span class="">      containers:
</span><span class="">      - image: traefik
</span><span class="">        name: traefik-ingress-lb
</span><span class="">        resources:
</span><span class="">          limits:
</span><span class="">            cpu: 200m
</span><span class="">            memory: 30Mi
</span><span class="">          requests:
</span><span class="">            cpu: 100m
</span><span class="">            memory: 20Mi
</span><span class="">        ports:
</span><span class="">        - name: http
</span><span class="">          containerPort: 80
</span><span class="">          hostPort: 80
</span><span class="">        - name: admin
</span><span class="">          containerPort: 8580
</span><span class="">          hostPort: 8580
</span><span class="">        args:
</span><span class="">        - --web
</span><span class="">        - --web.address=:8580
</span><span class="">        - --kubernetes</span></code></pre>
</div>
<p>æ³¨æ„æˆ‘ä»¬è¿™é‡Œç”¨çš„æ˜¯Deployç±»å‹ï¼Œæ²¡æœ‰é™å®šè¯¥podè¿è¡Œåœ¨å“ªä¸ªä¸»æœºä¸Šã€‚Traefikçš„ç«¯å£æ˜¯8580ã€‚</p>

<p><strong>Traefik UI</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="">v</span><span class="m">1</span><span class="w">
</span><span class="w"></span><span class="">kind</span><span class="p">:</span><span class="w"> </span><span class="">Service</span><span class="w">
</span><span class="w"></span><span class="">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">name</span><span class="p">:</span><span class="w"> </span><span class="">traefik-web-ui</span><span class="w">
</span><span class="w">  </span><span class="">namespace</span><span class="p">:</span><span class="w"> </span><span class="">kube-system</span><span class="w">
</span><span class="w"></span><span class="">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="">k8s-app</span><span class="p">:</span><span class="w"> </span><span class="">traefik-ingress-lb</span><span class="w">
</span><span class="w">  </span><span class="">ports</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">-</span><span class="w"> </span><span class="">name</span><span class="p">:</span><span class="w"> </span><span class="">web</span><span class="w">
</span><span class="w">    </span><span class="">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">    </span><span class="">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">8580</span><span class="w">
</span><span class="w"></span><span class="">---</span><span class="w">
</span><span class="w"></span><span class="">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="">extensions/v1beta</span><span class="m">1</span><span class="w">
</span><span class="w"></span><span class="">kind</span><span class="p">:</span><span class="w"> </span><span class="">Ingress</span><span class="w">
</span><span class="w"></span><span class="">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">name</span><span class="p">:</span><span class="w"> </span><span class="">traefik-web-ui</span><span class="w">
</span><span class="w">  </span><span class="">namespace</span><span class="p">:</span><span class="w"> </span><span class="">kube-system</span><span class="w">
</span><span class="w"></span><span class="">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">rules</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="">-</span><span class="w"> </span><span class="">host</span><span class="p">:</span><span class="w"> </span><span class="">traefik-ui.local</span><span class="w">
</span><span class="w">    </span><span class="">http</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">paths</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="">-</span><span class="w"> </span><span class="">path</span><span class="p">:</span><span class="w"> </span><span class="">/</span><span class="w">
</span><span class="w">        </span><span class="">backend</span><span class="p">:</span><span class="w">
</span><span class="w">          </span><span class="">serviceName</span><span class="p">:</span><span class="w"> </span><span class="">traefik-web-ui</span><span class="w">
</span><span class="w">          </span><span class="">servicePort</span><span class="p">:</span><span class="w"> </span><span class="">web</span></code></pre>
</div>
<p>é…ç½®å®Œæˆåå°±å¯ä»¥å¯åŠ¨treafik ingressäº†ã€‚</p>

<pre><code>kubectl create -f .
</code></pre>

<p>æˆ‘æŸ¥çœ‹åˆ°traefikçš„podåœ¨<code>172.20.0.115</code>è¿™å°èŠ‚ç‚¹ä¸Šå¯åŠ¨äº†ã€‚</p>

<p>è®¿é—®è¯¥åœ°å€<code>http://172.20.0.115:8580/</code>å°†å¯ä»¥çœ‹åˆ°dashboardã€‚</p>

<p><img src="http://olz1di9xf.bkt.clouddn.com/traefik-dashboard.jpg" alt="kubernetes-dashboard" /></p>

<p>å·¦ä¾§é»„è‰²éƒ¨åˆ†éƒ¨åˆ†åˆ—å‡ºçš„æ˜¯æ‰€æœ‰çš„ruleï¼Œå³ä¾§ç»¿è‰²éƒ¨åˆ†æ˜¯æ‰€æœ‰çš„backendã€‚</p>

<h2 id="æµ‹è¯•">æµ‹è¯•</h2>

<p>åœ¨é›†ç¾¤çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚å‡å¦‚ç°åœ¨æˆ‘è¦è®¿é—®nginxçš„&rdquo;/&ldquo;è·¯å¾„ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="">$ curl -H Host:traefik.nginx.io http://172.20.0.115/
</span><span class="">&lt;!DOCTYPE html&gt;
</span><span class="">&lt;html&gt;
</span><span class="">&lt;head&gt;
</span><span class="">&lt;title&gt;Welcome to nginx!&lt;/title&gt;
</span><span class="">&lt;style&gt;
</span><span class="">    body </span><span class="o">{</span><span class="">
</span><span class="">        width: 35em</span><span class="p">;</span><span class="">
</span><span class="">        margin: </span><span class="m">0</span><span class=""> auto</span><span class="p">;</span><span class="">
</span><span class="">        font-family: Tahoma, Verdana, Arial, sans-serif</span><span class="p">;</span><span class="">
</span><span class="">    </span><span class="o">}</span><span class="">
</span><span class="">&lt;/style&gt;
</span><span class="">&lt;/head&gt;
</span><span class="">&lt;body&gt;
</span><span class="">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
</span><span class="">&lt;p&gt;If you see this page, the nginx web server is successfully installed and
</span><span class="">working. Further configuration is required.&lt;/p&gt;
</span><span class="">
</span><span class="">&lt;p&gt;For online documentation and support please refer to
</span><span class="">&lt;a </span><span class="nv">href</span><span class=""></span><span class="o">=</span><span class="s2">&#34;http://nginx.org/&#34;</span><span class="">&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span><span class="">Commercial support is available at
</span><span class="">&lt;a </span><span class="nv">href</span><span class=""></span><span class="o">=</span><span class="s2">&#34;http://nginx.com/&#34;</span><span class="">&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span><span class="">
</span><span class="">&lt;p&gt;&lt;em&gt;Thank you </span><span class="k">for</span><span class=""> using nginx.&lt;/em&gt;&lt;/p&gt;
</span><span class="">&lt;/body&gt;
</span><span class="">&lt;/html&gt;</span></code></pre>
</div>
<p>å¦‚æœä½ éœ€è¦åœ¨kubernetesé›†ç¾¤ä»¥å¤–è®¿é—®å°±éœ€è¦è®¾ç½®DNSï¼Œæˆ–è€…ä¿®æ”¹æœ¬æœºçš„hostsæ–‡ä»¶ã€‚</p>

<p>åœ¨å…¶ä¸­åŠ å…¥ï¼š</p>

<pre><code>172.20.0.115 traefik.nginx.io
172.20.0.115 traefik.frontend.io
</code></pre>

<p>æ‰€æœ‰è®¿é—®è¿™äº›åœ°å€çš„æµé‡éƒ½ä¼šå‘é€ç»™172.20.0.115è¿™å°ä¸»æœºï¼Œå°±æ˜¯æˆ‘ä»¬å¯åŠ¨traefikçš„ä¸»æœºã€‚</p>

<p>Traefikä¼šè§£æhttpè¯·æ±‚headeré‡Œçš„Hostå‚æ•°å°†æµé‡è½¬å‘ç»™Ingressé…ç½®é‡Œçš„ç›¸åº”serviceã€‚</p>

<p>ä¿®æ”¹hostsåå°±å°±å¯ä»¥åœ¨kubernetesé›†ç¾¤å¤–è®¿é—®ä»¥ä¸Šä¸¤ä¸ªserviceï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="http://olz1di9xf.bkt.clouddn.com/traefik-nginx.jpg" alt="traefik-nginx" /></p>

<p><img src="http://olz1di9xf.bkt.clouddn.com/traefik-guestbook.jpg" alt="traefik-guestbook" /></p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="http://www.colabug.com/thread-1703745-1-1.html">Traefik-kubernetes åˆè¯•</a></p>

<p><a href="http://www.tuicool.com/articles/ZnuEfay">Traefikç®€ä»‹</a></p>

<p><a href="https://github.com/kubernetes/kubernetes/tree/master/examples/guestbook">Guestbook example</a></p>

            </article>
             
            <h2>See Also</h2>
            <ul>
                
                <li><a href="/blogs/kubernetes-ingress-resource/">Kubernetes ingressè§£æ</a></li>
                
                <li><a href="/projects/kubernetes-handbook-startup/">Kubernetes Handbookå‘èµ·</a></li>
                
                <li><a href="/projects/kubernetes-installation-document/">Kubernetes1.6é›†ç¾¤éƒ¨ç½²å®Œå…¨æŒ‡å— â€”â€”äºŒè¿›åˆ¶æ–‡ä»¶éƒ¨ç½²å¼€å¯TLSåŸºäºCentOS7å‘å¸ƒ</a></li>
                
                <li><a href="/blogs/kubernetes-efk-installation-with-tls/">åœ¨å¼€å¯TLSçš„Kubernetes1.6é›†ç¾¤ä¸Šå®‰è£…EFK</a></li>
                
                <li><a href="/blogs/kubernetes-heapster-installation-with-tls/">åœ¨å¼€å¯TLSçš„Kubernetes1.6é›†ç¾¤ä¸Šå®‰è£…heapster</a></li>
                
            </ul>
            
        </div>
    </section>

    

<aside id="meta">

<div>
    <section id="datecount">
        <h4 id="date"> Thu Apr 20, 2017 </h4>
        <h5 id="wc"> 1700 Words </h5>
        <h5 id="readtime"> Read in about 4 Min </h5>
    </section>
    <ul id="categories">
        
    </ul>
    <ul id="tags">
        
        <li> <a href="https://jimmysong.io//tags/kubernetes">kubernetes</a> </li>
        
        <li> <a href="https://jimmysong.io//tags/traefik">traefik</a> </li>
        
        <li> <a href="https://jimmysong.io//tags/ingress">ingress</a> </li>
        
    </ul>
</div>

<div>
    <section id="prev">
        &nbsp;<a class="previous" href="https://jimmysong.io/blogs/kubernetes-rbac-support/"><i class="icon-arrow-left"></i> Kubernetesä¸­çš„RBACæ”¯æŒ</a><br>
    </section>
    <section id="next">
        &nbsp;<a class="next" href="https://jimmysong.io/blogs/kubernetes-ingress-resource/">Kubernetes ingressè§£æ <i class="icon-arrow-right"></i></a>
    </section>
</div>

<div>
    <section id="author">
        <h4>About the Author</h4>
        <p>
            <a href="https://jimmysong.io/about/">Jimmy Song</a> is a software engineer in Beijing, also an open source enthusiast and Big Data, Cloud Native fans. If you not see him front of computer, he must be traveling or taking pictures outside,
            visit the amazing pictures at <a href=https://jimmysongio.tuchong.com/>tuchong(å›¾è™«)</a>. Feel free to <a href=https://twitter.com/jimmysongio>follow him on twitter</a>.
        </p>
    </section>

</div>

</aside>

<meta itemprop="wordCount" content="1675">
<meta itemprop="datePublished" content="2017-04-20">
<meta itemprop="url" content="https://jimmysong.io/blogs/traefik-ingress-installation/">
 <aside id=comments>
    <div>
        <h2> Comments </h2>
    </div>
    
    
    
    <div id="container"></div>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script>
        var gitment = new Gitment({
            owner: 'rootsongjc', 
            repo: 'rootsongjc.github.io', 
            oauth: {
                client_id: '93a0df08e0f93ff0c8a3',
                client_secret: '3bdbf0b42c525f78582600bd38cf7f722ee40541',
            },
        })
        gitment.render('container')
    </script>
</aside> <footer>
    <div>
        <p>
            <a href="https://jimmysong.io/kubernetes-handbook">Kubernetes Handbookä¸­æ–‡æŒ‡å—/å®è·µæ‰‹å†Œ</a> |
            <a href="https://jimmysong.io/cloud-native-go">Cloud Native Go</a> |
            <a href="https://jimmysong.io/awesome-cloud-native">Awesome Cloud Native</a> |
            <a href="https://jimmysong.io/migrating-to-cloud-native-application-architectures">è¿ç§»åˆ°äº‘åŸç”Ÿåº”ç”¨æ¶æ„æ‰‹å†Œ</a> |
            <a href="https://istio.doczh.cn/">Istio Service Meshä¸­æ–‡æ–‡æ¡£</a> |
            <a href="https://jimmysong.io/spark-on-k8s">Spark on Kubernetes</a> |
            Cloud Native Python comming soon...
    </div>
    <div>
        <p>

        </p>
        <p>Copyright &copy; 2013-2017 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span itemprop="name"><a href="https://jimmysong.io/about">Jimmy Song</a></span><span>
                Powered by <a href="https://gohugo.io">Hugo</a> â¤ï¸  &nbsp; </span> <span> Theme <a href="https://themes.gohugo.io/nixon/">nixon</a></span>
            </span>
    </div>
</footer>


</body>

</html>

    
