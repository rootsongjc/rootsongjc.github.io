<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blogs on Jimmy Song&#39;s Blog</title>
    <link>http://rootsongjc.github.io/blogs/</link>
    <description>Recent content in Blogs on Jimmy Song&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 16 May 2017 17:46:15 +0800</lastBuildDate>
    
	<atom:link href="http://rootsongjc.github.io/blogs/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ä½¿ç”¨Logstashæ”¶é›†Kubernetesçš„åº”ç”¨æ—¥å¿—</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-logstash/</link>
      <pubDate>Tue, 16 May 2017 17:46:15 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-logstash/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼š798è‰ºæœ¯åŒº May 14,2017ï¼‰
å‰è¨€ æœ¬æ–‡åŒæ­¥æ›´æ–°åˆ°Githubä»“åº“kubernetes-handbookä¸­ã€‚
å¾ˆå¤šä¼ä¸šå†…éƒ¨éƒ½æœ‰è‡ªå·±çš„ElasticSearché›†ç¾¤ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦åœ¨kubernetesé›†ç¾¤å†…éƒ¨å†éƒ¨ç½²ä¸€ä¸ªï¼Œè€Œä¸”è¿™æ ·è¿˜éš¾äºç®¡ç†ï¼Œå› æ­¤æˆ‘ä»¬è€ƒè™‘åœ¨å®¹å™¨é‡Œéƒ¨ç½²logstashæ”¶é›†æ—¥å¿—åˆ°å·²æœ‰çš„ElasticSearché›†ç¾¤ä¸­ã€‚
æ–¹æ¡ˆé€‰æ‹© Kuberneteså®˜æ–¹æä¾›äº†EFKçš„æ—¥å¿—æ”¶é›†è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯è¿™ç§æ–¹æ¡ˆå¹¶ä¸é€‚åˆæ‰€æœ‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œå®ƒæœ¬èº«å°±æœ‰ä¸€äº›å±€é™æ€§ï¼Œä¾‹å¦‚ï¼š
 æ‰€æœ‰æ—¥å¿—éƒ½å¿…é¡»æ˜¯outå‰å°è¾“å‡ºï¼ŒçœŸå®ä¸šåŠ¡åœºæ™¯ä¸­æ— æ³•ä¿è¯æ‰€æœ‰æ—¥å¿—éƒ½åœ¨å‰å°è¾“å‡º åªèƒ½æœ‰ä¸€ä¸ªæ—¥å¿—è¾“å‡ºæ–‡ä»¶ï¼Œè€ŒçœŸå®ä¸šåŠ¡åœºæ™¯ä¸­å¾€å¾€æœ‰å¤šä¸ªæ—¥å¿—è¾“å‡ºæ–‡ä»¶ Fluentdå¹¶ä¸æ˜¯å¸¸ç”¨çš„æ—¥å¿—æ”¶é›†å·¥å…·ï¼Œæˆ‘ä»¬æ›´ä¹ æƒ¯ç”¨logstash æˆ‘ä»¬å·²ç»æœ‰è‡ªå·±çš„ELKé›†ç¾¤ä¸”æœ‰ä¸“äººç»´æŠ¤ï¼Œæ²¡æœ‰å¿…è¦å†åœ¨kubernetesä¸Šåšä¸€ä¸ªæ—¥å¿—æ”¶é›†æœåŠ¡  åŸºäºä»¥ä¸Šå‡ ä¸ªåŸå› ï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨è‡ªå·±çš„ELKé›†ç¾¤ã€‚
Kubernetesé›†ç¾¤ä¸­çš„æ—¥å¿—æ”¶é›†è§£å†³æ–¹æ¡ˆ
   ç¼–å· æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹     1 æ¯ä¸ªappçš„é•œåƒä¸­éƒ½é›†æˆæ—¥å¿—æ”¶é›†ç»„ä»¶ éƒ¨ç½²æ–¹ä¾¿ï¼Œkubernetesçš„yamlæ–‡ä»¶æ— é¡»ç‰¹åˆ«é…ç½®ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªappè‡ªå®šä¹‰æ—¥å¿—æ”¶é›†é…ç½® å¼ºè€¦åˆï¼Œä¸æ–¹ä¾¿åº”ç”¨å’Œæ—¥å¿—æ”¶é›†ç»„ä»¶å‡çº§å’Œç»´æŠ¤ä¸”ä¼šå¯¼è‡´é•œåƒè¿‡å¤§   2 å•ç‹¬åˆ›å»ºä¸€ä¸ªæ—¥å¿—æ”¶é›†ç»„ä»¶è·Ÿappçš„å®¹å™¨ä¸€èµ·è¿è¡Œåœ¨åŒä¸€ä¸ªpodä¸­ ä½è€¦åˆï¼Œæ‰©å±•æ€§å¼ºï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œå‡çº§ éœ€è¦å¯¹kubernetesçš„yamlæ–‡ä»¶è¿›è¡Œå•ç‹¬é…ç½®ï¼Œç•¥æ˜¾ç¹ç   3 å°†æ‰€æœ‰çš„Podçš„æ—¥å¿—éƒ½æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Šï¼Œæ¯å°ä¸»æœºä¸Šå•ç‹¬èµ·ä¸€ä¸ªæ—¥å¿—æ”¶é›†Pod å®Œå…¨è§£è€¦ï¼Œæ€§èƒ½æœ€é«˜ï¼Œç®¡ç†èµ·æ¥æœ€æ–¹ä¾¿ éœ€è¦ç»Ÿä¸€æ—¥å¿—æ”¶é›†è§„åˆ™ï¼Œç›®å½•å’Œè¾“å‡ºæ–¹å¼    ç»¼åˆä»¥ä¸Šä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨æ–¹æ¡ˆäºŒã€‚
è¯¥æ–¹æ¡ˆåœ¨æ‰©å±•æ€§ã€ä¸ªæ€§åŒ–ã€éƒ¨ç½²å’ŒåæœŸç»´æŠ¤æ–¹é¢éƒ½èƒ½åšåˆ°å‡è¡¡ï¼Œå› æ­¤é€‰æ‹©è¯¥æ–¹æ¡ˆã€‚
æˆ‘ä»¬åˆ›å»ºäº†è‡ªå·±çš„logstashé•œåƒã€‚åˆ›å»ºè¿‡ç¨‹å’Œä½¿ç”¨æ–¹å¼è§https://github.com/rootsongjc/docker-images
é•œåƒåœ°å€ï¼šindex.tenxcloud.com/jimmy/logstash:5.3.0
æµ‹è¯• æˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªåº”ç”¨å¯¹logstashçš„æ—¥å¿—æ”¶é›†åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚
åˆ›å»ºåº”ç”¨yamlæ–‡ä»¶logstash-test.yamlã€‚
apiVersion: extensions/v1beta1 kind: Deployment metadata: name: logstash-test namespace: default spec: replicas: 3 template: metadata: labels: k8s-app: logstash-test spec: containers: - image: sz-pg-oam-docker-hub-001.</description>
    </item>
    
    <item>
      <title>Kuberneteæ¦‚å¿µè§£æä¹‹Deployment</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-concept-deployment/</link>
      <pubDate>Sat, 13 May 2017 00:46:37 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-concept-deployment/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šäº¬å¹¿æ¡¥@åŒ—äº¬å›½è´¸ Apr 30,2017ï¼‰
å‰è¨€ æœ¬æ–‡åŒæ­¥æ›´æ–°åˆ°Githubä»“åº“kubernetes-handbookä¸­ã€‚
æœ¬æ–‡ç¿»è¯‘è‡ªkuberneteså®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/kubernetes/kubernetes.github.io/blob/master/docs/concepts/workloads/controllers/deployment.md
æœ¬æ–‡ç« æ ¹æ®2017å¹´5æœˆ10æ—¥çš„Commit 8481c02ç¿»è¯‘ã€‚
Deploymentæ˜¯Kubernetesä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä»å®ƒå¼€å§‹æ˜¯äº†è§£kubernetesä¸­èµ„æºæ¦‚å¿µçš„ä¸€ä¸ªå¾ˆå¥½çš„åˆ‡å…¥ç‚¹ï¼Œçœ‹åˆ°ç½‘ä¸Šä¹Ÿæ²¡ä»€ä¹ˆè¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼Œæˆ‘å°±éšæ‰‹ç¿»è¯‘äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼ˆGithubä¸­çš„æ–‡æ¡£ï¼‰ï¼Œkuberneteså®˜ç½‘ä¸Šçš„æ–‡æ¡£è¿˜æ²¡æœ‰è¿™ä¸ªæ–°ã€‚è¿™ç¯‡æ–‡ç« å¯¹Deploymentçš„æ¦‚å¿µè§£é‡Šçš„é¢é¢ä¿±åˆ°ååˆ†è¯¦å°½ã€‚
Deploymentæ˜¯ä»€ä¹ˆï¼Ÿ Deploymentä¸ºPodå’ŒReplica Setï¼ˆä¸‹ä¸€ä»£Replication Controllerï¼‰æä¾›å£°æ˜å¼æ›´æ–°ã€‚
ä½ åªéœ€è¦åœ¨Deploymentä¸­æè¿°ä½ æƒ³è¦çš„ç›®æ ‡çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŒDeployment controllerå°±ä¼šå¸®ä½ å°†Podå’ŒReplica Setçš„å®é™…çŠ¶æ€æ”¹å˜åˆ°ä½ çš„ç›®æ ‡çŠ¶æ€ã€‚ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„Deploymentï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ›¿æ¢æ—§çš„Deploymentã€‚
ä¸€ä¸ªå…¸å‹çš„ç”¨ä¾‹å¦‚ä¸‹ï¼š
 ä½¿ç”¨Deploymentæ¥åˆ›å»ºReplicaSetã€‚ReplicaSetåœ¨åå°åˆ›å»ºpodã€‚æ£€æŸ¥å¯åŠ¨çŠ¶æ€ï¼Œçœ‹å®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚ ç„¶åï¼Œé€šè¿‡æ›´æ–°Deploymentçš„PodTemplateSpecå­—æ®µæ¥å£°æ˜Podçš„æ–°çŠ¶æ€ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ReplicaSetï¼ŒDeploymentä¼šæŒ‰ç…§æ§åˆ¶çš„é€Ÿç‡å°†podä»æ—§çš„ReplicaSetç§»åŠ¨åˆ°æ–°çš„ReplicaSetä¸­ã€‚ å¦‚æœå½“å‰çŠ¶æ€ä¸ç¨³å®šï¼Œå›æ»šåˆ°ä¹‹å‰çš„Deployment revisionã€‚æ¯æ¬¡å›æ»šéƒ½ä¼šæ›´æ–°Deploymentçš„revisionã€‚ æ‰©å®¹Deploymentä»¥æ»¡è¶³æ›´é«˜çš„è´Ÿè½½ã€‚ æš‚åœDeploymentæ¥åº”ç”¨PodTemplateSpecçš„å¤šä¸ªä¿®å¤ï¼Œç„¶åæ¢å¤ä¸Šçº¿ã€‚ æ ¹æ®Deployment çš„çŠ¶æ€åˆ¤æ–­ä¸Šçº¿æ˜¯å¦hangä½äº†ã€‚ æ¸…æ¥šæ—§çš„ä¸å¿…è¦çš„ReplicaSetã€‚  åˆ›å»ºDeployment ä¸‹é¢æ˜¯ä¸€ä¸ªDeploymentç¤ºä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªReplica Setæ¥å¯åŠ¨3ä¸ªnginx podã€‚
ä¸‹è½½ç¤ºä¾‹æ–‡ä»¶å¹¶æ‰§è¡Œå‘½ä»¤ï¼š
$ kubectl create -f docs/user-guide/nginx-deployment.yaml --record deployment &amp;quot;nginx-deployment&amp;quot; created  å°†kubectlçš„ â€”record çš„flagè®¾ç½®ä¸º trueå¯ä»¥åœ¨annotationä¸­è®°å½•å½“å‰å‘½ä»¤åˆ›å»ºæˆ–è€…å‡çº§äº†è¯¥èµ„æºã€‚è¿™åœ¨æœªæ¥ä¼šå¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚ï¼ŒæŸ¥çœ‹åœ¨æ¯ä¸ªDeployment revisionä¸­æ‰§è¡Œäº†å“ªäº›å‘½ä»¤ã€‚
ç„¶åç«‹å³æ‰§è¡ŒgetÃ­å°†è·å¾—å¦‚ä¸‹ç»“æœï¼š
$ kubectl get deployments NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE nginx-deployment 3 0 0 0 1s  è¾“å‡ºç»“æœè¡¨æ˜æˆ‘ä»¬å¸Œæœ›çš„repalicaæ•°æ˜¯3ï¼ˆæ ¹æ®deploymentä¸­çš„.spec.replicasé…ç½®ï¼‰å½“å‰replicaæ•°ï¼ˆ .status.replicasï¼‰æ˜¯0, æœ€æ–°çš„replicaæ•°ï¼ˆ.status.updatedReplicasï¼‰æ˜¯0ï¼Œå¯ç”¨çš„replicaæ•°ï¼ˆ.status.availableReplicasï¼‰æ˜¯0ã€‚</description>
    </item>
    
    <item>
      <title>Kubernetesä¸­çš„Rolling UpdateæœåŠ¡æ»šåŠ¨å‡çº§</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-service-rolling-update/</link>
      <pubDate>Wed, 10 May 2017 17:14:20 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-service-rolling-update/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šåæµ·å¤œè‰² Apr 30,2017ï¼‰
å‰è¨€ æœ¬æ–‡å·²åŒæ­¥åˆ°gitbook kubernetes-handbookçš„ç¬¬8ç« ç¬¬1èŠ‚ã€‚
æœ¬æ–‡è¯´æ˜åœ¨Kubernetes1.6ä¸­æœåŠ¡å¦‚ä½•æ»šåŠ¨å‡çº§ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚
å½“æœ‰é•œåƒå‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬æœåŠ¡ä¸Šçº¿æ—¶å¦‚ä½•å®ç°æœåŠ¡çš„æ»šåŠ¨å’Œå¹³æ»‘å‡çº§ï¼Ÿ
å¦‚æœä½ ä½¿ç”¨ReplicationControlleråˆ›å»ºçš„podå¯ä»¥ä½¿ç”¨kubectl rollingupdateå‘½ä»¤æ»šåŠ¨å‡çº§ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯Deploymentåˆ›å»ºçš„Podå¯ä»¥ç›´æ¥ä¿®æ”¹yamlæ–‡ä»¶åæ‰§è¡Œkubectl applyå³å¯ã€‚
Deploymentå·²ç»å†…ç½®äº†RollingUpdate strategyï¼Œå› æ­¤ä¸ç”¨å†è°ƒç”¨kubectl rollingupdateå‘½ä»¤ï¼Œå‡çº§çš„è¿‡ç¨‹æ˜¯å…ˆåˆ›å»ºæ–°ç‰ˆçš„podå°†æµé‡å¯¼å…¥åˆ°æ–°podä¸Šåé”€æ¯åŸæ¥çš„æ—§çš„podã€‚
Rolling Updateé€‚ç”¨äºDeploymentã€Replication Controllerï¼Œå®˜æ–¹æ¨èä½¿ç”¨Deploymentè€Œä¸å†ä½¿ç”¨Replication Controllerã€‚
ä½¿ç”¨ReplicationControlleræ—¶çš„æ»šåŠ¨å‡çº§è¯·å‚è€ƒå®˜ç½‘è¯´æ˜ï¼šhttps://kubernetes.io/docs/tasks/run-application/rolling-update-replication-controller/
ReplicationControllerä¸Deploymentçš„å…³ç³» ReplicationControllerå’ŒDeploymentçš„RollingUpdateå‘½ä»¤æœ‰äº›ä¸åŒï¼Œä½†æ˜¯å®ç°çš„æœºåˆ¶æ˜¯ä¸€æ ·çš„ï¼Œå…³äºè¿™ä¸¤ä¸ªkindçš„å…³ç³»æˆ‘å¼•ç”¨äº†ReplicationControllerä¸Deploymentçš„åŒºåˆ«ä¸­çš„éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼Œè¯¦ç»†åŒºåˆ«è¯·æŸ¥çœ‹åŸæ–‡ã€‚
ReplicationController Replication Controllerä¸ºKubernetesçš„ä¸€ä¸ªæ ¸å¿ƒå†…å®¹ï¼Œåº”ç”¨æ‰˜ç®¡åˆ°Kubernetesä¹‹åï¼Œéœ€è¦ä¿è¯åº”ç”¨èƒ½å¤ŸæŒç»­çš„è¿è¡Œï¼ŒReplication Controllerå°±æ˜¯è¿™ä¸ªä¿è¯çš„keyï¼Œä¸»è¦çš„åŠŸèƒ½å¦‚ä¸‹ï¼š
 ç¡®ä¿podæ•°é‡ï¼šå®ƒä¼šç¡®ä¿Kubernetesä¸­æœ‰æŒ‡å®šæ•°é‡çš„Podåœ¨è¿è¡Œã€‚å¦‚æœå°‘äºæŒ‡å®šæ•°é‡çš„podï¼ŒReplication Controllerä¼šåˆ›å»ºæ–°çš„ï¼Œåä¹‹åˆ™ä¼šåˆ é™¤æ‰å¤šä½™çš„ä»¥ä¿è¯Podæ•°é‡ä¸å˜ã€‚ ç¡®ä¿podå¥åº·ï¼šå½“podä¸å¥åº·ï¼Œè¿è¡Œå‡ºé”™æˆ–è€…æ— æ³•æä¾›æœåŠ¡æ—¶ï¼ŒReplication Controllerä¹Ÿä¼šæ€æ­»ä¸å¥åº·çš„podï¼Œé‡æ–°åˆ›å»ºæ–°çš„ã€‚ å¼¹æ€§ä¼¸ç¼© ï¼šåœ¨ä¸šåŠ¡é«˜å³°æˆ–è€…ä½å³°æœŸçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡Replication ControlleråŠ¨æ€çš„è°ƒæ•´podçš„æ•°é‡æ¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚åŒæ—¶ï¼Œé…ç½®ç›¸åº”çš„ç›‘æ§åŠŸèƒ½ï¼ˆHroizontal Pod Autoscalerï¼‰ï¼Œä¼šå®šæ—¶è‡ªåŠ¨ä»ç›‘æ§å¹³å°è·å–Replication Controllerå…³è”podçš„æ•´ä½“èµ„æºä½¿ç”¨æƒ…å†µï¼Œåšåˆ°è‡ªåŠ¨ä¼¸ç¼©ã€‚ æ»šåŠ¨å‡çº§ï¼šæ»šåŠ¨å‡çº§ä¸ºä¸€ç§å¹³æ»‘çš„å‡çº§æ–¹å¼ï¼Œé€šè¿‡é€æ­¥æ›¿æ¢çš„ç­–ç•¥ï¼Œä¿è¯æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šï¼Œåœ¨åˆå§‹åŒ–å‡çº§çš„æ—¶å€™å°±å¯ä»¥åŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ï¼Œé¿å…é—®é¢˜ä¸æ–­æ‰©å¤§ã€‚  Deployment DeploymentåŒæ ·ä¸ºKubernetesçš„ä¸€ä¸ªæ ¸å¿ƒå†…å®¹ï¼Œä¸»è¦èŒè´£åŒæ ·æ˜¯ä¸ºäº†ä¿è¯podçš„æ•°é‡å’Œå¥åº·ï¼Œ90%çš„åŠŸèƒ½ä¸Replication Controllerå®Œå…¨ä¸€æ ·ï¼Œå¯ä»¥çœ‹åšæ–°ä¸€ä»£çš„Replication Controllerã€‚ä½†æ˜¯ï¼Œå®ƒåˆå…·å¤‡äº†Replication Controllerä¹‹å¤–çš„æ–°ç‰¹æ€§ï¼š
 Replication Controllerå…¨éƒ¨åŠŸèƒ½ï¼šDeploymentç»§æ‰¿äº†ä¸Šé¢æè¿°çš„Replication Controllerå…¨éƒ¨åŠŸèƒ½ã€‚ äº‹ä»¶å’ŒçŠ¶æ€æŸ¥çœ‹ï¼šå¯ä»¥æŸ¥çœ‹Deploymentçš„å‡çº§è¯¦ç»†è¿›åº¦å’ŒçŠ¶æ€ã€‚ å›æ»šï¼šå½“å‡çº§podé•œåƒæˆ–è€…ç›¸å…³å‚æ•°çš„æ—¶å€™å‘ç°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å›æ»šæ“ä½œå›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬æˆ–è€…æŒ‡å®šçš„ç‰ˆæœ¬ã€‚ ç‰ˆæœ¬è®°å½•: æ¯ä¸€æ¬¡å¯¹Deploymentçš„æ“ä½œï¼Œéƒ½èƒ½ä¿å­˜ä¸‹æ¥ï¼Œç»™äºˆåç»­å¯èƒ½çš„å›æ»šä½¿ç”¨ã€‚ æš‚åœå’Œå¯åŠ¨ï¼šå¯¹äºæ¯ä¸€æ¬¡å‡çº§ï¼Œéƒ½èƒ½å¤Ÿéšæ—¶æš‚åœå’Œå¯åŠ¨ã€‚ å¤šç§å‡çº§æ–¹æ¡ˆï¼šRecreateï¼šåˆ é™¤æ‰€æœ‰å·²å­˜åœ¨çš„pod,é‡æ–°åˆ›å»ºæ–°çš„; RollingUpdateï¼šæ»šåŠ¨å‡çº§ï¼Œé€æ­¥æ›¿æ¢çš„ç­–ç•¥ï¼ŒåŒæ—¶æ»šåŠ¨å‡çº§æ—¶ï¼Œæ”¯æŒæ›´å¤šçš„é™„åŠ å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®æœ€å¤§ä¸å¯ç”¨podæ•°é‡ï¼Œæœ€å°å‡çº§é—´éš”æ—¶é—´ç­‰ç­‰ã€‚  åˆ›å»ºæµ‹è¯•é•œåƒ æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç‰¹åˆ«ç®€å•çš„webæœåŠ¡ï¼Œå½“ä½ è®¿é—®ç½‘é¡µæ—¶ï¼Œå°†è¾“å‡ºä¸€å¥ç‰ˆæœ¬ä¿¡æ¯ã€‚é€šè¿‡åŒºåˆ†è¿™å¥ç‰ˆæœ¬ä¿¡æ¯è¾“å‡ºæˆ‘ä»¬å°±å¯ä»¥æ–­å®šå‡çº§æ˜¯å¦å®Œæˆã€‚
æ‰€æœ‰é…ç½®å’Œä»£ç è§Githubä¸Šçš„manifests/test/rolling-update-testç›®å½•ã€‚
WebæœåŠ¡çš„ä»£ç main.go
package main import ( &amp;quot;fmt&amp;quot; &amp;quot;log&amp;quot; &amp;quot;net/http&amp;quot; ) func sayhello(w http.</description>
    </item>
    
    <item>
      <title>Kubernetesçš„è¾¹ç¼˜èŠ‚ç‚¹é…ç½®</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-edge-node-configuration/</link>
      <pubDate>Tue, 09 May 2017 12:59:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-edge-node-configuration/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå—å±æ™šé’Ÿ@åœ†æ˜å›­ May 6,2017ï¼‰
å‰è¨€ ä¸ºäº†é…ç½®kubernetesä¸­çš„traefik ingressçš„é«˜å¯ç”¨ï¼Œå¯¹äºkubernetesé›†ç¾¤ä»¥å¤–åªæš´éœ²ä¸€ä¸ªè®¿é—®å…¥å£ï¼Œéœ€è¦ä½¿ç”¨keepalivedæ’é™¤å•ç‚¹é—®é¢˜ã€‚æœ¬æ–‡å‚è€ƒäº†kube-keepalived-vipï¼Œä½†å¹¶æ²¡æœ‰ä½¿ç”¨å®¹å™¨æ–¹å¼å®‰è£…ï¼Œè€Œæ˜¯ç›´æ¥åœ¨nodeèŠ‚ç‚¹ä¸Šå®‰è£…ã€‚
æœ¬æ–‡å·²åŒæ­¥åˆ°gitbook kubernetes-handbookçš„ç¬¬2ç« ç¬¬5èŠ‚ã€‚
å®šä¹‰ é¦–å…ˆè§£é‡Šä¸‹ä»€ä¹ˆå«è¾¹ç¼˜èŠ‚ç‚¹ï¼ˆEdge Nodeï¼‰ï¼Œæ‰€è°“çš„è¾¹ç¼˜èŠ‚ç‚¹å³é›†ç¾¤å†…éƒ¨ç”¨æ¥å‘é›†ç¾¤å¤–æš´éœ²æœåŠ¡èƒ½åŠ›çš„èŠ‚ç‚¹ï¼Œé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡é€šè¿‡è¯¥èŠ‚ç‚¹æ¥è°ƒç”¨é›†ç¾¤å†…éƒ¨çš„æœåŠ¡ï¼Œè¾¹ç¼˜èŠ‚ç‚¹æ˜¯é›†ç¾¤å†…å¤–äº¤æµçš„ä¸€ä¸ªEndpointã€‚
è¾¹ç¼˜èŠ‚ç‚¹è¦è€ƒè™‘ä¸¤ä¸ªé—®é¢˜
 è¾¹ç¼˜èŠ‚ç‚¹çš„é«˜å¯ç”¨ï¼Œä¸èƒ½æœ‰å•ç‚¹æ•…éšœï¼Œå¦åˆ™æ•´ä¸ªkubernetesé›†ç¾¤å°†ä¸å¯ç”¨ å¯¹å¤–çš„ä¸€è‡´æš´éœ²ç«¯å£ï¼Œå³åªèƒ½æœ‰ä¸€ä¸ªå¤–ç½‘è®¿é—®IPå’Œç«¯å£  æ¶æ„ ä¸ºäº†æ»¡è¶³è¾¹ç¼˜èŠ‚ç‚¹çš„ä»¥ä¸Šéœ€æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨keepalivedæ¥å®ç°ã€‚
åœ¨Kubernetesé›†ç¾¤å¤–éƒ¨é…ç½®nginxæ¥è®¿é—®è¾¹ç¼˜èŠ‚ç‚¹çš„VIPã€‚
é€‰æ‹©Kubernetesçš„ä¸‰ä¸ªnodeä½œä¸ºè¾¹ç¼˜èŠ‚ç‚¹ï¼Œå¹¶å®‰è£…keepalivedã€‚
å‡†å¤‡ å¤ç”¨kubernetesæµ‹è¯•é›†ç¾¤çš„ä¸‰å°ä¸»æœºã€‚
172.20.0.113
172.20.0.114
172.20.0.115
å®‰è£… ä½¿ç”¨keepalivedç®¡ç†VIPï¼ŒVIPæ˜¯ä½¿ç”¨IPVSåˆ›å»ºçš„ï¼ŒIPVSå·²ç»æˆä¸ºlinuxå†…æ ¸çš„æ¨¡å—ï¼Œä¸éœ€è¦å®‰è£…
LVSçš„å·¥ä½œåŸç†è¯·å‚è€ƒï¼šhttp://www.cnblogs.com/codebean/archive/2011/07/25/2116043.html
ä¸ä½¿ç”¨é•œåƒæ–¹å¼å®‰è£…äº†ï¼Œç›´æ¥æ‰‹åŠ¨å®‰è£…ï¼ŒæŒ‡å®šä¸‰ä¸ªèŠ‚ç‚¹ä¸ºè¾¹ç¼˜èŠ‚ç‚¹ï¼ˆEdge nodeï¼‰ã€‚
å› ä¸ºæˆ‘ä»¬çš„æµ‹è¯•é›†ç¾¤ä¸€å…±åªæœ‰ä¸‰ä¸ªnodeï¼Œæ‰€æœ‰åœ¨åœ¨ä¸‰ä¸ªnodeä¸Šéƒ½è¦å®‰è£…keepalivedå’Œipvsadminã€‚
yum install keepalived ipvsadm  é…ç½®è¯´æ˜ éœ€è¦å¯¹åŸå…ˆçš„traefik ingressè¿›è¡Œæ”¹é€ ï¼Œä»ä»¥Deploymentæ–¹å¼å¯åŠ¨æ”¹æˆDeamonSetã€‚è¿˜éœ€è¦æŒ‡å®šä¸€ä¸ªä¸nodeåœ¨åŒä¸€ç½‘æ®µçš„IPåœ°å€ä½œä¸ºVIPï¼Œæˆ‘ä»¬æŒ‡å®šæˆ172.20.0.119ï¼Œé…ç½®keepalivedå‰éœ€è¦å…ˆä¿è¯è¿™ä¸ªIPæ²¡æœ‰è¢«åˆ†é…ã€‚ã€‚
 Traefikä»¥DaemonSetçš„æ–¹å¼å¯åŠ¨ é€šè¿‡nodeSelectoré€‰æ‹©è¾¹ç¼˜èŠ‚ç‚¹ é€šè¿‡hostPortæš´éœ²ç«¯å£ å½“å‰VIPæ¼‚ç§»åˆ°äº†172.20.0.115ä¸Š Traefikæ ¹æ®è®¿é—®çš„hostå’Œpathé…ç½®ï¼Œå°†æµé‡è½¬å‘åˆ°ç›¸åº”çš„serviceä¸Š  é…ç½®keepalived å‚è€ƒåŸºäºkeepalived å®ç°VIPè½¬ç§»ï¼Œlvsï¼Œnginxçš„é«˜å¯ç”¨ï¼Œé…ç½®keepalivedã€‚
keepalivedçš„å®˜æ–¹é…ç½®æ–‡æ¡£è§ï¼šhttp://keepalived.org/pdf/UserGuide.pdf
é…ç½®æ–‡ä»¶/etc/keepalived/keepalived.confæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
! Configuration File for keepalived global_defs { notification_email { root@localhost } notification_email_from kaadmin@localhost smtp_server 127.0.0.1 smtp_connect_timeout 30 router_id LVS_DEVEL } vrrp_instance VI_1 { state MASTER interface eth0 virtual_router_id 51 priority 100 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 172.</description>
    </item>
    
    <item>
      <title>åœ¨kubernetesä¸­ä½¿ç”¨glusterfsåšæŒä¹…åŒ–å­˜å‚¨</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-with-glusterfs/</link>
      <pubDate>Thu, 04 May 2017 20:06:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-with-glusterfs/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ— é¢˜@åŒ—äº¬å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­ May 1,2017ï¼‰
å‰è¨€ æœ¬æ–‡ç« å·²åŒæ­¥åˆ°kubernetes-handbook 7.1ç« èŠ‚ã€‚
Kubernetesé›†ç¾¤æ²¿ç”¨è·Ÿæˆ‘ä¸€èµ·éƒ¨ç½²kubernetes1.6é›†ç¾¤ä¸­çš„ä¸‰å°æœºå™¨ã€‚
æˆ‘ä»¬å¤ç”¨kubernetesé›†ç¾¤çš„è¿™ä¸‰å°ä¸»æœºåšglusterfså­˜å‚¨ã€‚
ä»¥ä¸‹æ­¥éª¤å‚è€ƒè‡ªï¼šhttps://www.xf80.com/2017/04/21/kubernetes-glusterfs/
å®‰è£…glusterfs æˆ‘ä»¬ç›´æ¥åœ¨ç‰©ç†æœºä¸Šä½¿ç”¨yumå®‰è£…ï¼Œå¦‚æœä½ é€‰æ‹©åœ¨kubernetesä¸Šå®‰è£…ï¼Œè¯·å‚è€ƒï¼šhttps://github.com/gluster/gluster-kubernetes/blob/master/docs/setup-guide.md
# å…ˆå®‰è£… gluster æº $ yum install centos-release-gluster -y # å®‰è£… glusterfs ç»„ä»¶ $ yum install -y glusterfs glusterfs-server glusterfs-fuse glusterfs-rdma glusterfs-geo-replication glusterfs-devel ## åˆ›å»º glusterfs ç›®å½• $ mkdir /opt/glusterd ## ä¿®æ”¹ glusterd ç›®å½• $ sed -i &#39;s/var\/lib/opt/g&#39; /etc/glusterfs/glusterd.vol # å¯åŠ¨ glusterfs $ systemctl start glusterd.service # è®¾ç½®å¼€æœºå¯åŠ¨ $ systemctl enable glusterd.service #æŸ¥çœ‹çŠ¶æ€ $ systemctl status glusterd.service  é…ç½® glusterfs # é…ç½® hosts $ vi /etc/hosts 172.</description>
    </item>
    
    <item>
      <title>Kubernetesç½‘ç»œå’Œé›†ç¾¤æ€§èƒ½æµ‹è¯•</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-performance-test/</link>
      <pubDate>Tue, 25 Apr 2017 22:14:49 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-performance-test/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ— é¢˜@å®‰è´é—¨ Jun 18,2016ï¼‰
å‰è¨€ è¯¥æµ‹è¯•æ˜¯ä¸ºäº†æµ‹è¯•åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œè®¿é—®kubernetesçš„å»¶è¿Ÿä»¥åŠkubernetesçš„æ€§èƒ½ã€‚è¿›è¡Œä»¥ä¸‹æµ‹è¯•å‰ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªéƒ¨ç½²å¥½çš„kubernetesé›†ç¾¤ï¼Œå…³äºå¦‚ä½•éƒ¨ç½²kuberentes1.6é›†ç¾¤ï¼Œè¯·å‚è€ƒkubernetes-handbookã€‚
å‡†å¤‡ æµ‹è¯•ç¯å¢ƒ
åœ¨ä»¥ä¸‹å‡ ç§ç¯å¢ƒä¸‹è¿›è¡Œæµ‹è¯•ï¼š
 Kubernetesé›†ç¾¤nodeèŠ‚ç‚¹ä¸Šé€šè¿‡Cluster IPæ–¹å¼è®¿é—® Kubernetesé›†ç¾¤å†…éƒ¨é€šè¿‡serviceè®¿é—® Kubernetesé›†ç¾¤å¤–éƒ¨é€šè¿‡traefik ingressæš´éœ²çš„åœ°å€è®¿é—®  æµ‹è¯•åœ°å€
Cluster IP: 10.254.149.31
Service Portï¼š8000
Ingress Hostï¼štraefik.sample-webapp.io
æµ‹è¯•å·¥å…·
 Locustï¼šä¸€ä¸ªç®€å•æ˜“ç”¨çš„ç”¨æˆ·è´Ÿè½½æµ‹è¯•å·¥å…·ï¼Œç”¨æ¥æµ‹è¯•webæˆ–å…¶ä»–ç³»ç»Ÿèƒ½å¤ŸåŒæ—¶å¤„ç†çš„å¹¶å‘ç”¨æˆ·æ•°ã€‚ curl kubemark æµ‹è¯•ç¨‹åºï¼šsample-webappï¼Œæºç è§Github kubernetesçš„åˆ†å¸ƒå¼è´Ÿè½½æµ‹è¯•  æµ‹è¯•è¯´æ˜
é€šè¿‡å‘sample-webappå‘é€curlè¯·æ±‚è·å–å“åº”æ—¶é—´ï¼Œç›´æ¥curlåçš„ç»“æœä¸ºï¼š
$ curl &amp;quot;http://10.254.149.31:8000/&amp;quot; Welcome to the &amp;quot;Distributed Load Testing Using Kubernetes&amp;quot; sample web app  ç½‘ç»œå»¶è¿Ÿæµ‹è¯• åœºæ™¯ä¸€ã€ Kubernetesé›†ç¾¤nodeèŠ‚ç‚¹ä¸Šé€šè¿‡Cluster IPè®¿é—® æµ‹è¯•å‘½ä»¤
curl -o /dev/null -s -w &#39;%{time_connect} %{time_starttransfer} %{time_total}&#39; &amp;quot;http://10.254.149.31:8000/&amp;quot;  10ç»„æµ‹è¯•ç»“æœ
   No time_connect time_starttransfer time_total     1 0.</description>
    </item>
    
    <item>
      <title>è¿ç”¨kubernetesè¿›è¡Œåˆ†å¸ƒå¼è´Ÿè½½æµ‹è¯•</title>
      <link>http://rootsongjc.github.io/blogs/distributed-load-testing-using-kubernetes/</link>
      <pubDate>Mon, 24 Apr 2017 21:32:52 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/distributed-load-testing-using-kubernetes/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šKubrick Book Store Mar 25,2016ï¼‰
å‰è¨€ Githubåœ°å€https://github.com/rootsongjc/distributed-load-testing-using-kubernetes
è¯¥æ•™ç¨‹æè¿°å¦‚ä½•åœ¨Kubernetesä¸­è¿›è¡Œåˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡æµ‹è¯•ï¼ŒåŒ…æ‹¬ä¸€ä¸ªwebåº”ç”¨ã€dockeré•œåƒå’ŒKubernetes controllers/servicesã€‚æ›´å¤šèµ„æ–™è¯·æŸ¥çœ‹Distributed Load Testing Using Kubernetes ã€‚
æ³¨æ„ï¼šè¯¥æµ‹è¯•æ˜¯åœ¨æˆ‘è‡ªå·±æœ¬åœ°æ­å»ºçš„kubernetesé›†ç¾¤ä¸Šæµ‹è¯•çš„ï¼Œä¸éœ€è¦ä½¿ç”¨Google Cloud Platformã€‚
å‡†å¤‡ ä¸éœ€è¦GCEåŠå…¶ä»–ç»„ä»¶ï¼Œä½ åªéœ€è¦æœ‰ä¸€ä¸ªkubernetesé›†ç¾¤å³å¯ã€‚
å¦‚æœä½ è¿˜æ²¡æœ‰kubernetesé›†ç¾¤ï¼Œå¯ä»¥å‚è€ƒkubernetes-handbookéƒ¨ç½²ä¸€ä¸ªã€‚
éƒ¨ç½²Webåº”ç”¨ sample-webapp ç›®å½•ä¸‹åŒ…å«ä¸€ä¸ªç®€å•çš„webæµ‹è¯•åº”ç”¨ã€‚æˆ‘ä»¬å°†å…¶æ„å»ºä¸ºdockeré•œåƒï¼Œåœ¨kubernetesä¸­è¿è¡Œã€‚ä½ å¯ä»¥è‡ªå·±æ„å»ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªæˆ‘æ„å»ºå¥½çš„é•œåƒindex.tenxcloud.com/jimmy/k8s-sample-webapp:latestã€‚
åœ¨kubernetesä¸Šéƒ¨ç½²sample-webappã€‚
$ cd kubernetes-config $ kubectl create -f sample-webapp-controller.yaml $ kubectl create -f kubectl create -f sample-webapp-service.yaml  éƒ¨ç½²Locustçš„Controllerå’ŒService locust-masterå’Œlocust-workä½¿ç”¨åŒæ ·çš„dockeré•œåƒï¼Œä¿®æ”¹cotnrollerä¸­spec.template.spec.containers.envå­—æ®µä¸­çš„valueä¸ºä½ sample-webapp serviceçš„åå­—ã€‚
- name: TARGET_HOST value: http://sample-webapp:8000  åˆ›å»ºController Dockeré•œåƒï¼ˆå¯é€‰ï¼‰ locust-masterå’Œlocust-work controllerä½¿ç”¨çš„éƒ½æ˜¯locust-tasks dockeré•œåƒã€‚ä½ å¯ä»¥ç›´æ¥ä¸‹è½½gcr.io/cloud-solutions-http://olz1di9xf.bkt.clouddn.com/locust-tasksï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–è¯‘ã€‚è‡ªå·±ç¼–è¯‘å¤§æ¦‚è¦èŠ±å‡ åˆ†é’Ÿæ—¶é—´ï¼Œé•œåƒå¤§å°ä¸º820Mã€‚
$ docker build -t index.tenxcloud.com/jimmy/locust-tasks:latest . $ docker push index.tenxcloud.com/jimmy/locust-tasks:latest  æ³¨æ„ï¼šæˆ‘ä½¿ç”¨çš„æ˜¯æ—¶é€Ÿäº‘çš„é•œåƒä»“åº“ã€‚
æ¯ä¸ªcontrollerçš„yamlçš„spec.template.spec.containers.image å­—æ®µæŒ‡å®šçš„æ˜¯æˆ‘çš„é•œåƒï¼š</description>
    </item>
    
    <item>
      <title>Kubernetesä¸­çš„IPå’ŒæœåŠ¡å‘ç°ä½“ç³»</title>
      <link>http://rootsongjc.github.io/blogs/ip-and-service-discovry-in-kubernetes/</link>
      <pubDate>Mon, 24 Apr 2017 16:11:16 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/ip-and-service-discovry-in-kubernetes/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šè·¯è¾¹çš„é‡èŠ±@æœé˜³å…¬å›­ Nov 8,2015ï¼‰
Cluster IP å³Serviceçš„IPï¼Œé€šå¸¸åœ¨é›†ç¾¤å†…éƒ¨ä½¿ç”¨Service Nameæ¥è®¿é—®æœåŠ¡ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“è¯¥IPåœ°å€ï¼Œkubednsä¼šè‡ªåŠ¨æ ¹æ®service nameè§£æåˆ°æœåŠ¡çš„IPåœ°å€ï¼Œå°†æµé‡åˆ†å‘ç»™Podã€‚
Service Nameæ‰æ˜¯å¯¹å¤–æš´éœ²æœåŠ¡çš„å…³é”®ã€‚
åœ¨kubeapiçš„é…ç½®ä¸­æŒ‡å®šè¯¥åœ°å€èŒƒå›´ã€‚
é»˜è®¤é…ç½®
--service-cluster-ip-range=10.254.0.0/16 --service-node-port-range=30000-32767  Pod IP é€šè¿‡é…ç½®flannelçš„networkå’Œsubnetæ¥å®ç°ã€‚
é»˜è®¤é…ç½®
FLANNEL_NETWORK=172.30.0.0/16 FLANNEL_SUBNET=172.30.46.1/24  Podçš„IPåœ°å€ä¸å›ºå®šï¼Œå½“podé‡å¯æ—¶IPåœ°å€ä¼šå˜åŒ–ã€‚
è¯¥IPåœ°å€ä¹Ÿæ˜¯ç”¨æˆ·æ— éœ€å…³å¿ƒçš„ã€‚
ä½†æ˜¯Flannelä¼šåœ¨æœ¬åœ°ç”Ÿæˆç›¸åº”IPæ®µçš„è™šæ‹Ÿç½‘å¡ï¼Œä¸ºäº†é˜²æ­¢å’Œé›†ç¾¤ä¸­çš„å…¶ä»–IPåœ°å€å†²çªï¼Œéœ€è¦è§„åˆ’IPæ®µã€‚
ä¸»æœº/Node IP ç‰©ç†æœºçš„IPåœ°å€ï¼Œå³kubernetesç®¡ç†çš„ç‰©ç†æœºçš„IPåœ°å€ã€‚
$ kubectl get nodes NAME STATUS AGE VERSION 172.20.0.113 Ready 12d v1.6.0 172.20.0.114 Ready 12d v1.6.0 172.20.0.115 Ready 12d v1.6.0  æœåŠ¡å‘ç° é›†ç¾¤å†…éƒ¨çš„æœåŠ¡å‘ç°
é€šè¿‡DNSå³å¯å‘ç°ï¼Œkubendsæ˜¯kubernetesçš„ä¸€ä¸ªæ’ä»¶ï¼Œä¸åŒæœåŠ¡ä¹‹é—´å¯ä»¥ç›´æ¥ä½¿ç”¨service nameè®¿é—®ã€‚
é€šè¿‡sericename:portå³å¯è°ƒç”¨æœåŠ¡ã€‚
æœåŠ¡å¤–éƒ¨çš„æœåŠ¡å‘ç°
é€šè¿‡Ingressæ¥å®ç°ï¼Œæˆ‘ä»¬æ˜¯ç”¨çš„Traefikæ¥å®ç°ã€‚
å‚è€ƒ Ingressè§£æ
Kubernetes Traefik Ingresså®‰è£…è¯•ç”¨</description>
    </item>
    
    <item>
      <title>Kubernetesä¸­çš„RBACæ”¯æŒ</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-rbac-support/</link>
      <pubDate>Fri, 21 Apr 2017 19:53:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-rbac-support/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ— é¢˜ Apr 2,2016ï¼‰
 åœ¨Kubernetes1.6ç‰ˆæœ¬ä¸­æ–°å¢è§’è‰²è®¿é—®æ§åˆ¶æœºåˆ¶ï¼ˆRole-Based Accessï¼ŒRBACï¼‰è®©é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥é’ˆå¯¹ç‰¹å®šä½¿ç”¨è€…æˆ–æœåŠ¡è´¦å·çš„è§’è‰²ï¼Œè¿›è¡Œæ›´ç²¾ç¡®çš„èµ„æºè®¿é—®æ§åˆ¶ã€‚åœ¨RBACä¸­ï¼Œæƒé™ä¸è§’è‰²ç›¸å…³è”ï¼Œç”¨æˆ·é€šè¿‡æˆä¸ºé€‚å½“è§’è‰²çš„æˆå‘˜è€Œå¾—åˆ°è¿™äº›è§’è‰²çš„æƒé™ã€‚è¿™å°±æå¤§åœ°ç®€åŒ–äº†æƒé™çš„ç®¡ç†ã€‚åœ¨ä¸€ä¸ªç»„ç»‡ä¸­ï¼Œè§’è‰²æ˜¯ä¸ºäº†å®Œæˆå„ç§å·¥ä½œè€Œåˆ›é€ ï¼Œç”¨æˆ·åˆ™ä¾æ®å®ƒçš„è´£ä»»å’Œèµ„æ ¼æ¥è¢«æŒ‡æ´¾ç›¸åº”çš„è§’è‰²ï¼Œç”¨æˆ·å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»ä¸€ä¸ªè§’è‰²è¢«æŒ‡æ´¾åˆ°å¦ä¸€ä¸ªè§’è‰²ã€‚
 å‰è¨€ æœ¬æ–‡ç¿»è¯‘è‡ªRBAC Support in Kubernetesï¼Œè½¬è½½è‡ªkubernetesä¸­æ–‡ç¤¾åŒºï¼Œè¯‘è€…å‚¬æ€»ï¼ŒJimmy Songåšäº†ç¨è®¸ä¿®æ”¹ã€‚è¯¥æ–‡ç« æ˜¯5å¤©å†…äº†è§£Kubernetes1.6æ–°ç‰¹æ€§çš„ç³»åˆ—æ–‡ç« ä¹‹ä¸€ã€‚
One of the highlights of the Kubernetes 1.6ä¸­çš„ä¸€ä¸ªäº®ç‚¹æ—¶RBACè®¿é—®æ§åˆ¶æœºåˆ¶å‡çº§åˆ°äº†betaç‰ˆæœ¬ã€‚RBACï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œæ˜¯ç”¨æ¥ç®¡ç†kubernetesé›†ç¾¤ä¸­èµ„æºè®¿é—®æƒé™çš„æœºåˆ¶ã€‚ä½¿ç”¨RBACå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ›´æ–°è®¿é—®æˆæƒç­–ç•¥è€Œä¸ç”¨é‡å¯é›†ç¾¤ã€‚
æœ¬æ–‡ä¸»è¦å…³æ³¨æ–°ç‰¹æ€§å’Œæœ€ä½³å®è·µã€‚
RBAC vs ABAC ç›®å‰kubernetesä¸­å·²ç»æœ‰ä¸€ç³»åˆ—l é‰´æƒæœºåˆ¶ã€‚é‰´æƒçš„ä½œç”¨æ˜¯ï¼Œå†³å®šä¸€ä¸ªç”¨æˆ·æ˜¯å¦æœ‰æƒä½¿ç”¨ Kubernetes API åšæŸäº›äº‹æƒ…ã€‚å®ƒé™¤äº†ä¼šå½±å“ kubectl ç­‰ç»„ä»¶ä¹‹å¤–ï¼Œè¿˜ä¼šå¯¹ä¸€äº›è¿è¡Œåœ¨é›†ç¾¤å†…éƒ¨å¹¶å¯¹é›†ç¾¤è¿›è¡Œæ“ä½œçš„è½¯ä»¶äº§ç”Ÿä½œç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨äº† Kubernetes æ’ä»¶çš„ Jenkinsï¼Œæˆ–è€…æ˜¯åˆ©ç”¨ Kubernetes API è¿›è¡Œè½¯ä»¶éƒ¨ç½²çš„ Helmã€‚ABAC å’Œ RBAC éƒ½èƒ½å¤Ÿå¯¹è®¿é—®ç­–ç•¥è¿›è¡Œé…ç½®ã€‚
ABACï¼ˆAttribute Based Access Controlï¼‰æœ¬æ¥æ˜¯ä¸é”™çš„æ¦‚å¿µï¼Œä½†æ˜¯åœ¨ Kubernetes ä¸­çš„å®ç°æ¯”è¾ƒéš¾äºç®¡ç†å’Œç†è§£ï¼Œè€Œä¸”éœ€è¦å¯¹ Master æ‰€åœ¨èŠ‚ç‚¹çš„ SSH å’Œæ–‡ä»¶ç³»ç»Ÿæƒé™ï¼Œè€Œä¸”è¦ä½¿å¾—å¯¹æˆæƒçš„å˜æ›´æˆåŠŸç”Ÿæ•ˆï¼Œè¿˜éœ€è¦é‡æ–°å¯åŠ¨ API Serverã€‚
è€Œ RBAC çš„æˆæƒç­–ç•¥å¯ä»¥åˆ©ç”¨ kubectl æˆ–è€… Kubernetes API ç›´æ¥è¿›è¡Œé…ç½®ã€‚RBAC å¯ä»¥æˆæƒç»™ç”¨æˆ·ï¼Œè®©ç”¨æˆ·æœ‰æƒè¿›è¡Œæˆæƒç®¡ç†ï¼Œè¿™æ ·å°±å¯ä»¥æ— éœ€æ¥è§¦èŠ‚ç‚¹ï¼Œç›´æ¥è¿›è¡Œæˆæƒç®¡ç†ã€‚RBAC åœ¨ Kubernetes ä¸­è¢«æ˜ å°„ä¸º API èµ„æºå’Œæ“ä½œã€‚
å› ä¸º Kubernetes ç¤¾åŒºçš„æŠ•å…¥å’Œåå¥½ï¼Œç›¸å¯¹äº ABAC è€Œè¨€ï¼ŒRBAC æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</description>
    </item>
    
    <item>
      <title>Kubernetes traefik ingresså®‰è£…è¯•ç”¨</title>
      <link>http://rootsongjc.github.io/blogs/traefik-ingress-installation/</link>
      <pubDate>Thu, 20 Apr 2017 22:38:40 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/traefik-ingress-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šğŸŸ@é±¼ç¼¸ Sep 15,2016ï¼‰
å‰è¨€ æ˜¨å¤©ç¿»äº†ä¸‹Ingressè§£æï¼Œç„¶åå®‰è£…è¯•ç”¨äº†ä¸‹traefikï¼Œè¿‡ç¨‹å·²åŒæ­¥åˆ°kubernetes-handbookä¸Šï¼ŒGithubåœ°å€https://github.com/rootsongjc/kubernetes-handbook
Ingressç®€ä»‹ å¦‚æœä½ è¿˜ä¸äº†è§£ï¼Œingressæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å…ˆçœ‹ä¸‹æˆ‘ç¿»è¯‘çš„Kuberneteså®˜ç½‘ä¸Šingressçš„ä»‹ç»Kubernetes Ingressè§£æã€‚
ç†è§£Ingress
ç®€å•çš„è¯´ï¼Œingresså°±æ˜¯ä»kubernetesé›†ç¾¤å¤–è®¿é—®é›†ç¾¤çš„å…¥å£ï¼Œå°†ç”¨æˆ·çš„URLè¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„serviceä¸Šã€‚Ingressç›¸å½“äºnginxã€apacheç­‰è´Ÿè½½å‡è¡¡æ–¹å‘ä»£ç†æœåŠ¡å™¨ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬è§„åˆ™å®šä¹‰ï¼Œå³URLçš„è·¯ç”±ä¿¡æ¯ï¼Œè·¯ç”±ä¿¡æ¯å¾—çš„åˆ·æ–°ç”±Ingress controlleræ¥æä¾›ã€‚
ç†è§£Ingress Controller
Ingress Controller å®è´¨ä¸Šå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸ªç›‘è§†å™¨ï¼ŒIngress Controller é€šè¿‡ä¸æ–­åœ°è·Ÿ kubernetes API æ‰“äº¤é“ï¼Œå®æ—¶çš„æ„ŸçŸ¥åç«¯ serviceã€pod ç­‰å˜åŒ–ï¼Œæ¯”å¦‚æ–°å¢å’Œå‡å°‘ podï¼Œservice å¢åŠ ä¸å‡å°‘ç­‰ï¼›å½“å¾—åˆ°è¿™äº›å˜åŒ–ä¿¡æ¯åï¼ŒIngress Controller å†ç»“åˆä¸‹æ–‡çš„ Ingress ç”Ÿæˆé…ç½®ï¼Œç„¶åæ›´æ–°åå‘ä»£ç†è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶åˆ·æ–°å…¶é…ç½®ï¼Œè¾¾åˆ°æœåŠ¡å‘ç°çš„ä½œç”¨ã€‚
éƒ¨ç½²Traefik ä»‹ç»traefik
Traefikæ˜¯ä¸€æ¬¾å¼€æºçš„åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡å·¥å…·ã€‚å®ƒæœ€å¤§çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿä¸å¸¸è§çš„å¾®æœåŠ¡ç³»ç»Ÿç›´æ¥æ•´åˆï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–åŠ¨æ€é…ç½®ã€‚ç›®å‰æ”¯æŒDocker, Swarm, Mesos/Marathon, Mesos, Kubernetes, Consul, Etcd, Zookeeper, BoltDB, Rest APIç­‰ç­‰åç«¯æ¨¡å‹ã€‚
ä»¥ä¸‹é…ç½®æ–‡ä»¶å¯ä»¥åœ¨kubernetes-handbookGitHubä»“åº“ä¸­çš„manifests/traefik-ingress/ç›®å½•ä¸‹æ‰¾åˆ°ã€‚
åˆ›å»ºingress-rbac.yaml
å°†ç”¨äºservice accountéªŒè¯ã€‚
apiVersion: v1 kind: ServiceAccount metadata: name: ingress namespace: kube-system --- kind: ClusterRoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: ingress subjects: - kind: ServiceAccount name: ingress namespace: kube-system roleRef: kind: ClusterRole name: cluster-admin apiGroup: rbac.</description>
    </item>
    
    <item>
      <title>Kubernetes ingressè§£æ</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-ingress-resource/</link>
      <pubDate>Wed, 19 Apr 2017 21:05:47 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-ingress-resource/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæœé˜³é—¨é“¶æ²³SOHO Jan 31,2016ï¼‰
å‰è¨€ è¿™æ˜¯kuberneteå®˜æ–¹æ–‡æ¡£ä¸­Ingress Resourceçš„ç¿»è¯‘ï¼Œå› ä¸ºæœ€è¿‘å·¥ä½œä¸­ç”¨åˆ°ï¼Œæ–‡ç« ä¹Ÿä¸é•¿ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ï¼Œç´¢æ€§ç¿»è¯‘ä¸€ä¸‹ï¼Œä¹Ÿä¾¿äºè‡ªå·±åŠ æ·±ç†è§£ï¼ŒåŒæ—¶é€ ç¦kubernetesä¸­æ–‡ç¤¾åŒºã€‚åç»­å‡†å¤‡ä½¿ç”¨Traefikæ¥åšIngress controllerï¼Œæ–‡ç« æœ«å°¾ç»™å‡ºäº†å‡ ä¸ªç›¸å…³é“¾æ¥ï¼Œå®é™…ä½¿ç”¨æ¡ˆä¾‹æ­£åœ¨æ‘¸ç´¢ä¸­ï¼Œå±Šæ—¶ç›¸å…³å®‰è£…æ–‡æ¡£å’Œé…ç½®è¯´æ˜å°†åŒæ­¥æ›´æ–°åˆ°kubernetes-handbookä¸­ã€‚
æœ¯è¯­
åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ä½ å°†ä¼šçœ‹åˆ°ä¸€äº›åœ¨å…¶ä»–åœ°æ–¹è¢«äº¤å‰ä½¿ç”¨çš„æœ¯è¯­ï¼Œä¸ºäº†é˜²æ­¢äº§ç”Ÿæ­§ä¹‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥æ¾„æ¸…ä¸‹ã€‚
 èŠ‚ç‚¹ï¼šKubernetesé›†ç¾¤ä¸­çš„ä¸€å°ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºã€‚ é›†ç¾¤ï¼šä½äºInterneté˜²ç«å¢™åçš„èŠ‚ç‚¹ï¼Œè¿™æ˜¯kubernetesç®¡ç†çš„ä¸»è¦è®¡ç®—èµ„æºã€‚
 è¾¹ç•Œè·¯ç”±å™¨ï¼šä¸ºé›†ç¾¤å¼ºåˆ¶æ‰§è¡Œé˜²ç«å¢™ç­–ç•¥çš„è·¯ç”±å™¨ã€‚ è¿™å¯èƒ½æ˜¯ç”±äº‘æä¾›å•†æˆ–ç‰©ç†ç¡¬ä»¶ç®¡ç†çš„ç½‘å…³ã€‚
 é›†ç¾¤ç½‘ç»œï¼šä¸€ç»„é€»è¾‘æˆ–ç‰©ç†é“¾æ¥ï¼Œå¯æ ¹æ®Kubernetesç½‘ç»œæ¨¡å‹å®ç°ç¾¤é›†å†…çš„é€šä¿¡ã€‚ é›†ç¾¤ç½‘ç»œçš„å®ç°åŒ…æ‹¬Overlayæ¨¡å‹çš„ flannel å’ŒåŸºäºSDNçš„OVSã€‚
 æœåŠ¡ï¼šä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ ‡è¯†ä¸€ç»„podæˆä¸ºçš„KubernetesæœåŠ¡ã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æœåŠ¡å‡å®šåœ¨é›†ç¾¤ç½‘ç»œå†…ä»…å¯é€šè¿‡è™šæ‹ŸIPè®¿é—®ã€‚
  ä»€ä¹ˆæ˜¯Ingressï¼Ÿ é€šå¸¸æƒ…å†µä¸‹ï¼Œserviceå’Œpodä»…å¯åœ¨é›†ç¾¤å†…éƒ¨ç½‘ç»œä¸­é€šè¿‡IPåœ°å€è®¿é—®ã€‚æ‰€æœ‰åˆ°è¾¾è¾¹ç•Œè·¯ç”±å™¨çš„æµé‡æˆ–è¢«ä¸¢å¼ƒæˆ–è¢«è½¬å‘åˆ°å…¶ä»–åœ°æ–¹ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œå¯èƒ½åƒä¸‹é¢è¿™æ ·ï¼š
 internet | ------------ [ Services ]  Ingressæ˜¯æˆæƒå…¥ç«™è¿æ¥åˆ°è¾¾é›†ç¾¤æœåŠ¡çš„è§„åˆ™é›†åˆã€‚
 internet | [ Ingress ] --|-----|-- [ Services ]  ä½ å¯ä»¥ç»™Ingressé…ç½®æä¾›å¤–éƒ¨å¯è®¿é—®çš„URLã€è´Ÿè½½å‡è¡¡ã€SSLã€åŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºç­‰ã€‚ç”¨æˆ·é€šè¿‡POST Ingressèµ„æºåˆ°API serverçš„æ–¹å¼æ¥è¯·æ±‚ingressã€‚ Ingress controllerè´Ÿè´£å®ç°Ingressï¼Œé€šå¸¸ä½¿ç”¨è´Ÿè½½å¹³è¡¡å™¨ï¼Œå®ƒè¿˜å¯ä»¥é…ç½®è¾¹ç•Œè·¯ç”±å’Œå…¶ä»–å‰ç«¯ï¼Œè¿™æœ‰åŠ©äºä»¥HAæ–¹å¼å¤„ç†æµé‡ã€‚
å…ˆå†³æ¡ä»¶ åœ¨ä½¿ç”¨Ingress resourceä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆäº†è§£ä¸‹é¢å‡ ä»¶äº‹æƒ…ã€‚Ingressæ˜¯betaç‰ˆæœ¬çš„resourceï¼Œåœ¨kubernetes1.1ä¹‹å‰è¿˜æ²¡æœ‰ã€‚ä½ éœ€è¦ä¸€ä¸ªIngress Controlleræ¥å®ç°Ingressï¼Œå•çº¯çš„åˆ›å»ºä¸€ä¸ªIngressæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚
GCE/GKEä¼šåœ¨masterèŠ‚ç‚¹ä¸Šéƒ¨ç½²ä¸€ä¸ªingress controllerã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªpodä¸­éƒ¨ç½²ä»»æ„ä¸ªè‡ªå®šä¹‰çš„ingress controllerã€‚ä½ å¿…é¡»æ­£ç¡®åœ°annotateæ¯ä¸ªingressï¼Œæ¯”å¦‚ è¿è¡Œå¤šä¸ªingress controller å’Œ å…³é—­glbc.
ç¡®å®šä½ å·²ç»é˜…è¯»äº†Ingress controllerçš„betaç‰ˆæœ¬é™åˆ¶ã€‚åœ¨éGCE/GKEçš„ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦åœ¨podä¸­éƒ¨ç½²ä¸€ä¸ªcontrollerã€‚
Ingress Resource æœ€ç®€åŒ–çš„Ingressé…ç½®ï¼š
1: apiVersion: extensions/v1beta1 2: kind: Ingress 3: metadata: 4: name: test-ingress 5: spec: 6: rules: 7: - http: 8: paths: 9: - path: /testpath 10: backend: 11: serviceName: test 12: servicePort: 80  å¦‚æœä½ æ²¡æœ‰é…ç½®Ingress controllerå°±å°†å…¶POSTåˆ°API serverä¸ä¼šæœ‰ä»»ä½•ç”¨å¤„</description>
    </item>
    
    <item>
      <title>åœ¨å¼€å¯TLSçš„Kubernetes1.6é›†ç¾¤ä¸Šå®‰è£…EFK</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-efk-installation-with-tls/</link>
      <pubDate>Thu, 13 Apr 2017 12:28:10 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-efk-installation-with-tls/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šç°‹è¡— Jun 17,2016ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®(forkè‡ªopsnull)ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œåœ¨å¼€å¯äº†TLSéªŒè¯çš„é›†ç¾¤ä¸­éƒ¨ç½²EFKæ—¥å¿—æ”¶é›†ç›‘æ§æ’ä»¶ã€‚
é…ç½®å’Œå®‰è£… EFK å®˜æ–¹æ–‡ä»¶ç›®å½•ï¼šcluster/addons/fluentd-elasticsearch
$ ls *.yaml es-controller.yaml es-service.yaml fluentd-es-ds.yaml kibana-controller.yaml kibana-service.yaml efk-rbac.yaml  åŒæ ·EFKæœåŠ¡ä¹Ÿéœ€è¦ä¸€ä¸ªefk-rbac.yamlæ–‡ä»¶ï¼Œé…ç½®serviceaccountä¸ºefkã€‚
å·²ç»ä¿®æ”¹å¥½çš„ yaml æ–‡ä»¶è§ï¼šEFK
é…ç½® es-controller.yaml $ diff es-controller.yaml.orig es-controller.yaml 24c24 &amp;lt; - image: gcr.io/google_containers/elasticsearch:v2.4.1-2 --- &amp;gt; - image: sz-pg-oam-docker-hub-001.tendcloud.com/library/elasticsearch:v2.4.1-2  é…ç½® es-service.yaml æ— éœ€é…ç½®ï¼›
é…ç½® fluentd-es-ds.yaml $ diff fluentd-es-ds.yaml.orig fluentd-es-ds.yaml 26c26 &amp;lt; image: gcr.io/google_containers/fluentd-elasticsearch:1.22 --- &amp;gt; image: sz-pg-oam-docker-hub-001.tendcloud.com/library/fluentd-elasticsearch:1.22  é…ç½® kibana-controller.yaml $ diff kibana-controller.yaml.orig kibana-controller.yaml 22c22 &amp;lt; image: gcr.io/google_containers/kibana:v4.6.1-1 --- &amp;gt; image: sz-pg-oam-docker-hub-001.</description>
    </item>
    
    <item>
      <title>åœ¨å¼€å¯TLSçš„Kubernetes1.6é›†ç¾¤ä¸Šå®‰è£…heapster</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation-with-tls/</link>
      <pubDate>Wed, 12 Apr 2017 20:20:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation-with-tls/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå¤§å–µ Aug 8,2016ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®(forkè‡ªopsnull)ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œåœ¨å¼€å¯äº†TLSéªŒè¯çš„é›†ç¾¤ä¸­éƒ¨ç½²heapsterï¼ŒåŒ…æ‹¬influxdbã€grafanaç­‰ç»„ä»¶ã€‚
é…ç½®å’Œå®‰è£…Heapster åˆ° heapster release é¡µé¢ ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ heapsterã€‚
$ wget https://github.com/kubernetes/heapster/archive/v1.3.0.zip $ unzip v1.3.0.zip $ mv v1.3.0.zip heapster-1.3.0  æ–‡ä»¶ç›®å½•ï¼š heapster-1.3.0/deploy/kube-config/influxdb
$ cd heapster-1.3.0/deploy/kube-config/influxdb $ ls *.yaml grafana-deployment.yaml grafana-service.yaml heapster-deployment.yaml heapster-service.yaml influxdb-deployment.yaml influxdb-service.yaml heapster-rbac.yaml  æˆ‘ä»¬è‡ªå·±åˆ›å»ºäº†heapsterçš„rbacé…ç½®heapster-rbac.yamlã€‚
å·²ç»ä¿®æ”¹å¥½çš„ yaml æ–‡ä»¶è§ï¼šheapster
é…ç½® grafana-deployment $ diff grafana-deployment.yaml.orig grafana-deployment.yaml 16c16 &amp;lt; image: gcr.io/google_containers/heapster-grafana-amd64:v4.0.2 --- &amp;gt; image: sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-grafana-amd64:v4.0.2 40,41c40,41 &amp;lt; # value: /api/v1/proxy/namespaces/kube-system/services/monitoring-grafana/ &amp;lt; value: / --- &amp;gt; value: /api/v1/proxy/namespaces/kube-system/services/monitoring-grafana/ &amp;gt; #value: /  å¦‚æœåç»­ä½¿ç”¨ kube-apiserver æˆ–è€… kubectl proxy è®¿é—® grafana dashboardï¼Œåˆ™å¿…é¡»å°† GF_SERVER_ROOT_URL è®¾ç½®ä¸º /api/v1/proxy/namespaces/kube-system/services/monitoring-grafana/ï¼Œå¦åˆ™åç»­è®¿é—®grafanaæ—¶è®¿é—®æ—¶æç¤ºæ‰¾ä¸åˆ°http://10.</description>
    </item>
    
    <item>
      <title>åœ¨å¼€å¯TLSçš„Kubernetes1.6é›†ç¾¤ä¸Šå®‰è£…dashboard</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation-with-tls/</link>
      <pubDate>Wed, 12 Apr 2017 15:53:39 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation-with-tls/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šä¸œç›´é—¨æ¡¥ Aug 20,2016ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®(forkè‡ªopsnull)ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œåœ¨å¼€å¯äº†TLSéªŒè¯çš„é›†ç¾¤ä¸­éƒ¨ç½²dashboardã€‚
æ„Ÿè°¢opsnullå’Œipchyçš„ç»†å¿ƒè§£ç­”ã€‚
å®‰è£…ç¯å¢ƒé…ç½®ä¿¡æ¯
 CentOS 7.2.1511 Docker 1.12.5 Flannel 0.7 Kubernetes 1.6.0  é…ç½®å’Œå®‰è£… dashboard å®˜æ–¹æ–‡ä»¶ç›®å½•ï¼škubernetes/cluster/addons/dashboard
æˆ‘ä»¬ä½¿ç”¨çš„æ–‡ä»¶
$ ls *.yaml dashboard-controller.yaml dashboard-service.yaml dashboard-rbac.yaml  å·²ç»ä¿®æ”¹å¥½çš„ yaml æ–‡ä»¶è§ï¼šdashboard
ç”±äº kube-apiserver å¯ç”¨äº† RBAC æˆæƒï¼Œè€Œå®˜æ–¹æºç ç›®å½•çš„ dashboard-controller.yaml æ²¡æœ‰å®šä¹‰æˆæƒçš„ ServiceAccountï¼Œæ‰€ä»¥åç»­è®¿é—® kube-apiserver çš„ API æ—¶ä¼šè¢«æ‹’ç»ï¼Œwebä¸­æç¤ºï¼š
Forbidden (403) User &amp;quot;system:serviceaccount:kube-system:default&amp;quot; cannot list jobs.batch in the namespace &amp;quot;default&amp;quot;. (get jobs.batch)  å¢åŠ äº†ä¸€ä¸ªdashboard-rbac.yamlæ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªåä¸º dashboard çš„ ServiceAccountï¼Œç„¶åå°†å®ƒå’Œ Cluster Role view ç»‘å®šã€‚
é…ç½®dashboard-service $ diff dashboard-service.yaml.orig dashboard-service.</description>
    </item>
    
    <item>
      <title>Kuberneteså®‰è£…ä¹‹kubednsé…ç½®</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-kubedns-installation/</link>
      <pubDate>Wed, 12 Apr 2017 13:04:45 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-kubedns-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé›¨è¿‡å¤©æ™´@åŒ—äº¬å®šç¦åº„ Aug 27,2016ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®(forkè‡ªopsnull)ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œä½¿ç”¨yamlæ–‡ä»¶éƒ¨ç½²kubednsã€‚
å®‰è£…ç¯å¢ƒé…ç½®ä¿¡æ¯
 CentOS 7.2.1511 Docker 1.12.5 Flannel 0.7 Kubernetes 1.6.0  å®‰è£…å’Œé…ç½® kubedns æ’ä»¶ å®˜æ–¹çš„yamlæ–‡ä»¶ç›®å½•ï¼škubernetes/cluster/addons/dnsã€‚
è¯¥æ’ä»¶ç›´æ¥ä½¿ç”¨kuberneteséƒ¨ç½²ï¼Œå®˜æ–¹çš„é…ç½®æ–‡ä»¶ä¸­åŒ…å«ä»¥ä¸‹é•œåƒï¼š
gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.1 gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.1 gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.1  æˆ‘cloneäº†ä¸Šè¿°é•œåƒï¼Œä¸Šä¼ åˆ°æˆ‘çš„ç§æœ‰é•œåƒä»“åº“ï¼š
sz-pg-oam-docker-hub-001.tendcloud.com/library/k8s-dns-dnsmasq-nanny-amd64:1.14.1 sz-pg-oam-docker-hub-001.tendcloud.com/library/k8s-dns-kube-dns-amd64:1.14.1 sz-pg-oam-docker-hub-001.tendcloud.com/library/k8s-dns-sidecar-amd64:1.14.1  åŒæ—¶ä¸Šä¼ äº†ä¸€ä»½åˆ°æ—¶é€Ÿäº‘å¤‡ä»½ï¼š
index.tenxcloud.com/jimmy/k8s-dns-dnsmasq-nanny-amd64:1.14.1 index.tenxcloud.com/jimmy/k8s-dns-kube-dns-amd64:1.14.1 index.tenxcloud.com/jimmy/k8s-dns-sidecar-amd64:1.14.1  ä»¥ä¸‹yamlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯ç§æœ‰é•œåƒä»“åº“ä¸­çš„é•œåƒã€‚
kubedns-cm.yaml kubedns-sa.yaml kubedns-controller.yaml kubedns-svc.yaml  å·²ç»ä¿®æ”¹å¥½çš„ yaml æ–‡ä»¶è§ï¼šgithubé¡¹ç›®ä¸­çš„manifest/kubedns/ç›®å½•ã€‚
ç³»ç»Ÿé¢„å®šä¹‰çš„ RoleBinding é¢„å®šä¹‰çš„ RoleBinding system:kube-dns å°† kube-system å‘½åç©ºé—´çš„ kube-dns ServiceAccount ä¸ system:kube-dns Role ç»‘å®šï¼Œ è¯¥ Role å…·æœ‰è®¿é—® kube-apiserver DNS ç›¸å…³ API çš„æƒé™ï¼›
$ kubectl get clusterrolebindings system:kube-dns -o yaml apiVersion: rbac.</description>
    </item>
    
    <item>
      <title>Kubernetes nodeèŠ‚ç‚¹å®‰è£…</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-node-installation/</link>
      <pubDate>Tue, 11 Apr 2017 22:20:31 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-node-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå¤ªé˜³å®«æ¡¥@åŒ—äº¬ä¸œåŒ—ä¸‰ç¯ Dec 11,2016ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®(forkè‡ªopsnull)ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œéƒ¨ç½²nodeèŠ‚ç‚¹ä¸Šçš„kube-proxyå’Œkubeletï¼ŒåŒæ—¶å¯¹ä¹‹å‰éƒ¨ç½²çš„flannelæ”¹é€ ã€‚
å®‰è£…ç¯å¢ƒé…ç½®ä¿¡æ¯
 CentOS7.2.1511 Docker 1.12.5 Flannel 0.7 Kubernetes 1.6.0  éƒ¨ç½²kubernetes nodeèŠ‚ç‚¹ kubernetes node èŠ‚ç‚¹åŒ…å«å¦‚ä¸‹ç»„ä»¶ï¼š
 Flanneldï¼šå‚è€ƒæˆ‘ä¹‹å‰å†™çš„æ–‡ç« KubernetesåŸºäºFlannelçš„ç½‘ç»œé…ç½®ï¼Œä¹‹å‰æ²¡æœ‰é…ç½®TLSï¼Œç°åœ¨éœ€è¦åœ¨serivceé…ç½®æ–‡ä»¶ä¸­å¢åŠ TLSé…ç½®ã€‚ Docker1.12.5ï¼šdockerçš„å®‰è£…å¾ˆç®€å•ï¼Œè¿™é‡Œä¹Ÿä¸è¯´äº†ã€‚ kubelet kube-proxy  ä¸‹é¢ç€é‡è®²kubeletå’Œkube-proxyçš„å®‰è£…ï¼ŒåŒæ—¶è¿˜è¦å°†ä¹‹å‰å®‰è£…çš„flannelé›†æˆTLSéªŒè¯ã€‚
ç›®å½•å’Œæ–‡ä»¶ æˆ‘ä»¬å†æ£€æŸ¥ä¸€ä¸‹ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç»è¿‡å‰å‡ æ­¥æ“ä½œç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚
$ ls /etc/kubernetes/ssl admin-key.pem admin.pem ca-key.pem ca.pem kube-proxy-key.pem kube-proxy.pem kubernetes-key.pem kubernetes.pem $ ls /etc/kubernetes/ apiserver bootstrap.kubeconfig config controller-manager kubelet kube-proxy.kubeconfig proxy scheduler ssl token.csv  é…ç½®Flanneld å‚è€ƒæˆ‘ä¹‹å‰å†™çš„æ–‡ç« KubernetesåŸºäºFlannelçš„ç½‘ç»œé…ç½®ï¼Œä¹‹å‰æ²¡æœ‰é…ç½®TLSï¼Œç°åœ¨éœ€è¦åœ¨serivceé…ç½®æ–‡ä»¶ä¸­å¢åŠ TLSé…ç½®ã€‚
serviceé…ç½®æ–‡ä»¶/usr/lib/systemd/system/flanneld.serviceã€‚
[Unit] Description=Flanneld overlay address etcd agent After=network.target After=network-online.target Wants=network-online.target After=etcd.service Before=docker.service [Service] Type=notify EnvironmentFile=/etc/sysconfig/flanneld EnvironmentFile=-/etc/sysconfig/docker-network ExecStart=/usr/bin/flanneld-start $FLANNEL_OPTIONS ExecStartPost=/usr/libexec/flannel/mk-docker-opts.</description>
    </item>
    
    <item>
      <title>Kubernetesé«˜å¯ç”¨masterèŠ‚ç‚¹å®‰è£…</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-ha-master-installation/</link>
      <pubDate>Tue, 11 Apr 2017 19:55:56 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-ha-master-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé¬¼è§æ„@åŒ—äº¬è¥¿å±± Sep 14,2015ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®((forkè‡ªopsnull))ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œéƒ¨ç½²masterèŠ‚ç‚¹çš„kube-apiserverã€kube-controller-managerå’Œkube-schedulerçš„è¿‡ç¨‹ã€‚
é«˜å¯ç”¨kubernetes masterèŠ‚ç‚¹å®‰è£… kubernetes master èŠ‚ç‚¹åŒ…å«çš„ç»„ä»¶ï¼š
 kube-apiserver kube-scheduler kube-controller-manager  ç›®å‰è¿™ä¸‰ä¸ªç»„ä»¶éœ€è¦éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚
 kube-schedulerã€kube-controller-manager å’Œ kube-apiserver ä¸‰è€…çš„åŠŸèƒ½ç´§å¯†ç›¸å…³ï¼› åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ª kube-schedulerã€kube-controller-manager è¿›ç¨‹å¤„äºå·¥ä½œçŠ¶æ€ï¼Œå¦‚æœè¿è¡Œå¤šä¸ªï¼Œåˆ™éœ€è¦é€šè¿‡é€‰ä¸¾äº§ç”Ÿä¸€ä¸ª leaderï¼›  æœ¬æ–‡æ¡£è®°å½•éƒ¨ç½²ä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹çš„é«˜å¯ç”¨ kubernetes master é›†ç¾¤æ­¥éª¤ã€‚ï¼ˆåç»­åˆ›å»ºä¸€ä¸ª load balancer æ¥ä»£ç†è®¿é—® kube-apiserver çš„è¯·æ±‚ï¼‰
TLS è¯ä¹¦æ–‡ä»¶ pemå’Œtoken.csvè¯ä¹¦æ–‡ä»¶æˆ‘ä»¬åœ¨TLSè¯ä¹¦å’Œç§˜é’¥è¿™ä¸€æ­¥ä¸­å·²ç»åˆ›å»ºè¿‡äº†ã€‚æˆ‘ä»¬å†æ£€æŸ¥ä¸€ä¸‹ã€‚
$ ls /etc/kubernetes/ssl admin-key.pem admin.pem ca-key.pem ca.pem kube-proxy-key.pem kube-proxy.pem kubernetes-key.pem kubernetes.pem  ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶æ–‡ä»¶ æœ‰ä¸¤ç§ä¸‹è½½æ–¹å¼
æ–¹å¼ä¸€
ä» github release é¡µé¢ ä¸‹è½½å‘å¸ƒç‰ˆ tarballï¼Œè§£å‹åå†æ‰§è¡Œä¸‹è½½è„šæœ¬
$ wget https://github.com/kubernetes/kubernetes/releases/download/v1.6.0/kubernetes.tar.gz $ tar -xzvf kubernetes.tar.gz ... $ cd kubernetes $ .</description>
    </item>
    
    <item>
      <title>Kuberneteså®‰è£…ä¹‹etcdé«˜å¯ç”¨é…ç½®</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-etcd-ha-config/</link>
      <pubDate>Tue, 11 Apr 2017 15:21:39 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-etcd-ha-config/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šåŒ—äº¬å¤œæ™¯@è¥¿å±±ï¼‰
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®((forkè‡ªopsnull))ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œç”Ÿæˆkubeconfigæ–‡ä»¶çš„è¿‡ç¨‹ã€‚
åˆ›å»ºé«˜å¯ç”¨ etcd é›†ç¾¤ kuberntes ç³»ç»Ÿä½¿ç”¨ etcd å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œæœ¬æ–‡æ¡£ä»‹ç»éƒ¨ç½²ä¸€ä¸ªä¸‰èŠ‚ç‚¹é«˜å¯ç”¨ etcd é›†ç¾¤çš„æ­¥éª¤ï¼Œè¿™ä¸‰ä¸ªèŠ‚ç‚¹å¤ç”¨ kubernetes master æœºå™¨ï¼Œåˆ†åˆ«å‘½åä¸ºsz-pg-oam-docker-test-001.tendcloud.comã€sz-pg-oam-docker-test-002.tendcloud.comã€sz-pg-oam-docker-test-003.tendcloud.comï¼š
 sz-pg-oam-docker-test-001.tendcloud.comï¼š172.20.0.113 sz-pg-oam-docker-test-002.tendcloud.comï¼š172.20.0.114 sz-pg-oam-docker-test-003.tendcloud.comï¼š172.20.0.115  TLS è®¤è¯æ–‡ä»¶ éœ€è¦ä¸º etcd é›†ç¾¤åˆ›å»ºåŠ å¯†é€šä¿¡çš„ TLS è¯ä¹¦ï¼Œè¿™é‡Œå¤ç”¨ä»¥å‰åˆ›å»ºçš„ kubernetes è¯ä¹¦
$ cp ca.pem kubernetes-key.pem kubernetes.pem /etc/kubernetes/ssl   kubernetes è¯ä¹¦çš„ hosts å­—æ®µåˆ—è¡¨ä¸­åŒ…å«ä¸Šé¢ä¸‰å°æœºå™¨çš„ IPï¼Œå¦åˆ™åç»­è¯ä¹¦æ ¡éªŒä¼šå¤±è´¥ï¼›  ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ åˆ° https://github.com/coreos/etcd/releases é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶æ–‡ä»¶
$ https://github.com/coreos/etcd/releases/download/v3.1.5/etcd-v3.1.5-linux-amd64.tar.gz $ tar -xvf etcd-v3.1.4-linux-amd64.tar.gz $ sudo mv etcd-v3.1.4-linux-amd64/etcd* /root/local/bin  åˆ›å»º etcd çš„ systemd unit æ–‡ä»¶ æ³¨æ„æ›¿æ¢ ETCD_NAME å’Œ INTERNAL_IP å˜é‡çš„å€¼ï¼›</description>
    </item>
    
    <item>
      <title>Kuberneteså®‰è£…ä¹‹åˆ›å»ºkubeconfigæ–‡ä»¶</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-create-kubeconfig/</link>
      <pubDate>Tue, 11 Apr 2017 14:34:54 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-create-kubeconfig/</guid>
      <description>(é¢˜å›¾ï¼šåŒ—æµ·å…¬å›­ May 8,2016)
å‰è¨€ è¿™æ˜¯å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤é¡¹ç›®((forkè‡ªopsnull))ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹äº§ç”Ÿçš„kuberentesç¯å¢ƒï¼Œç”Ÿæˆkubeconfigæ–‡ä»¶çš„è¿‡ç¨‹ã€‚ kubeletã€kube-proxy ç­‰ Node æœºå™¨ä¸Šçš„è¿›ç¨‹ä¸ Master æœºå™¨çš„ kube-apiserver è¿›ç¨‹é€šä¿¡æ—¶éœ€è¦è®¤è¯å’Œæˆæƒï¼› kubernetes 1.4 å¼€å§‹æ”¯æŒç”± kube-apiserver ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆ TLS è¯ä¹¦çš„ TLS Bootstrapping åŠŸèƒ½ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆè¯ä¹¦äº†ï¼›è¯¥åŠŸèƒ½å½“å‰ä»…æ”¯æŒä¸º kubelet ç”Ÿæˆè¯ä¹¦ã€‚
åˆ›å»º TLS Bootstrapping Token Token auth file
Tokenå¯ä»¥æ˜¯ä»»æ„çš„åŒ…æ¶µ128 bitçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°å‘ç”Ÿå™¨ç”Ÿæˆã€‚
export BOOTSTRAP_TOKEN=$(head -c 16 /dev/urandom | od -An -t x | tr -d &#39; &#39;) cat &amp;gt; token.csv &amp;lt;&amp;lt;EOF ${BOOTSTRAP_TOKEN},kubelet-bootstrap,10001,&amp;quot;system:kubelet-bootstrap&amp;quot; EOF   åä¸‰è¡Œæ˜¯ä¸€å¥ï¼Œç›´æ¥å¤åˆ¶ä¸Šé¢çš„è„šæœ¬è¿è¡Œå³å¯ã€‚
 å°†token.csvå‘åˆ°æ‰€æœ‰æœºå™¨ï¼ˆMaster å’Œ Nodeï¼‰çš„ /etc/kubernetes/ ç›®å½•ã€‚
$cp token.csv /etc/kubernetes/  åˆ›å»º kubelet bootstrapping kubeconfig æ–‡ä»¶ $ cd /etc/kubernetes $ export KUBE_APISERVER=&amp;quot;https://172.</description>
    </item>
    
    <item>
      <title>å¼€æºå¾®æœåŠ¡ç®¡ç†å¹³å°fabric8ç®€ä»‹</title>
      <link>http://rootsongjc.github.io/blogs/fabric8-introduction/</link>
      <pubDate>Mon, 10 Apr 2017 21:39:00 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/fabric8-introduction/</guid>
      <description>å‰è¨€ æ— æ„ä¸­å‘ç°Fabric8è¿™ä¸ªå¯¹äºJavaå‹å¥½çš„å¼€æºå¾®æœåŠ¡ç®¡ç†å¹³å°ã€‚
å…¶å®è¿™åœ¨è¿™é‡Œå‘ç°çš„Achieving CI/CD with Kubernetesï¼ˆby Ramit Surana,on February 17, 2017ï¼‰ï¼Œå…¶å®æ˜¯å…ˆåœ¨slideshareä¸Šçœ‹åˆ°çš„ï¼Œpdfå¯ä»¥åœ¨æ­¤ä¸‹è½½ï¼Œå¤§å°2.04Mã€‚
å¤§å®¶å¯èƒ½ä»¥å‰å¬è¿‡ä¸€ä¸ªå«åšfabricçš„å·¥å…·ï¼Œé‚£æ˜¯ä¸€ä¸ª Python (2.5-2.7) åº“å’Œå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥æµæ°´çº¿åŒ–æ‰§è¡Œ SSH ä»¥éƒ¨ç½²åº”ç”¨æˆ–ç³»ç»Ÿç®¡ç†ä»»åŠ¡ã€‚æ‰€ä»¥å¤§å®¶ä¸è¦æŠŠfabric8è·Ÿfabricææ··ï¼Œè™½ç„¶å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…±åŒç‚¹ï¼Œä½†ä¸¤è€…å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œfabric8ä¸æ˜¯fabricçš„ä¸€ä¸ªç‰ˆæœ¬ã€‚Fabricæ˜¯ç”¨pythonå¼€å‘çš„ï¼Œfabric8æ˜¯javaå¼€å‘çš„ã€‚
å¦‚æœä½ æƒ³äº†è§£ç®€åŒ–Fabricå¯ä»¥çœ‹å®ƒçš„ä¸­æ–‡å®˜æ–¹æ–‡æ¡£ã€‚
Fabric8ç®€ä»‹ fabric8æ˜¯ä¸€ä¸ªå¼€æºé›†æˆå¼€å‘å¹³å°ï¼Œä¸ºåŸºäºKuberneteså’ŒJenkinsçš„å¾®æœåŠ¡æä¾›æŒç»­å‘å¸ƒã€‚
ä½¿ç”¨fabricå¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡Continuous Delivery pipelinesåˆ›å»ºã€ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å¾®æœåŠ¡ï¼Œç„¶åé€šè¿‡Continuous Improvementå’ŒChatOpsè¿è¡Œå’Œç®¡ç†ä»–ä»¬ã€‚
Fabric8å¾®æœåŠ¡å¹³å°æä¾›ï¼š
 Developer Consoleï¼Œæ˜¯ä¸€ä¸ªå¯Œwebåº”ç”¨ï¼Œæä¾›ä¸€ä¸ªå•é¡µé¢æ¥åˆ›å»ºã€ç¼–è¾‘ã€ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å¾®æœåŠ¡ã€‚ Continuous Integration and Continous Deliveryï¼Œä½¿ç”¨ Jenkins with a Jenkins Workflow Libraryæ›´å¿«å’Œæ›´å¯é çš„äº¤ä»˜è½¯ä»¶ã€‚ Managementï¼Œé›†ä¸­å¼ç®¡ç†Loggingã€Metrics, ChatOpsã€Chaos Monkeyï¼Œä½¿ç”¨Hawtioå’ŒJolokiaç®¡ç†Java Containersã€‚ Integration Integration Platform As A Service with deep visualisation of your Apache Camel integration services, an API Registry to view of all your RESTful and SOAP APIs and Fabric8 MQ provides Messaging As A Service based on Apache ActiveMQã€‚ Java Tools å¸®åŠ©Javaåº”ç”¨ä½¿ç”¨Kubernetes:  Maven Plugin for working with Kubernetes ï¼Œè¿™çœŸæ˜¯æå¥½çš„ Integration and System Testing of Kubernetes resources easily inside JUnit with Arquillian Java Libraries and support for CDI extensions for working with Kubernetes.</description>
    </item>
    
    <item>
      <title>Kuberneteså®‰è£…ä¹‹è¯ä¹¦éªŒè¯</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-tls-certificate/</link>
      <pubDate>Mon, 10 Apr 2017 17:28:41 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-tls-certificate/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé“œç‰›@é¢å’Œå›­ Aug 25,2014ï¼‰
å‰è¨€ æ˜¨æ™šï¼ˆApr 9,2017ï¼‰é‡‘å±±è½¯ä»¶çš„opsnullå‘å¸ƒäº†ä¸€ä¸ªå¼€æºé¡¹ç›®å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹æ‰“é€ çš„kubernetesç¯å¢ƒå’Œopsnullçš„æ–‡ç« åˆ›å»º kubernetes å„ç»„ä»¶ TLS åŠ å¯†é€šä¿¡çš„è¯ä¹¦å’Œç§˜é’¥çš„å®è·µã€‚ä¹‹å‰å®‰è£…è¿‡ç¨‹ä¸­ä¸€ç›´ä½¿ç”¨çš„æ˜¯éåŠ å¯†æ–¹å¼ï¼Œä¸€ç›´åˆ°åæ¥ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—æ—¶å‘ç°æœ‰æƒé™éªŒè¯é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†æ·±å…¥ç ”ç©¶kubernentesã€‚
Kubernentesä¸­çš„èº«ä»½éªŒè¯ kubernetes ç³»ç»Ÿçš„å„ç»„ä»¶éœ€è¦ä½¿ç”¨ TLS è¯ä¹¦å¯¹é€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Œæœ¬æ–‡æ¡£ä½¿ç”¨ CloudFlare çš„ PKI å·¥å…·é›† cfssl æ¥ç”Ÿæˆ Certificate Authority (CA) å’Œå…¶å®ƒè¯ä¹¦ï¼›
ç”Ÿæˆçš„ CA è¯ä¹¦å’Œç§˜é’¥æ–‡ä»¶å¦‚ä¸‹ï¼š
 ca-key.pem ca.pem kubernetes-key.pem kubernetes.pem kube-proxy.pem kube-proxy-key.pem admin.pem admin-key.pem  ä½¿ç”¨è¯ä¹¦çš„ç»„ä»¶å¦‚ä¸‹ï¼š
 etcdï¼šä½¿ç”¨ ca.pemã€kubernetes-key.pemã€kubernetes.pemï¼› kube-apiserverï¼šä½¿ç”¨ ca.pemã€kubernetes-key.pemã€kubernetes.pemï¼› kubeletï¼šä½¿ç”¨ ca.pemï¼› kube-proxyï¼šä½¿ç”¨ ca.pemã€kube-proxy-key.pemã€kube-proxy.pemï¼› kubectlï¼šä½¿ç”¨ ca.pemã€admin-key.pemã€admin.pemï¼›  kube-controllerã€kube-scheduler å½“å‰éœ€è¦å’Œ kube-apiserver éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šä¸”ä½¿ç”¨éå®‰å…¨ç«¯å£é€šä¿¡ï¼Œæ•…ä¸éœ€è¦è¯ä¹¦ã€‚
å®‰è£… CFSSL æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æºç åŒ…å®‰è£…
$ wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 $ chmod +x cfssl_linux-amd64 $ sudo mv cfssl_linux-amd64 /root/local/bin/cfssl $ wget https://pkg.</description>
    </item>
    
    <item>
      <title>ã€Šäº‘è®¡ç®—æŠ€æœ¯æ¶æ„ä¸å®è·µï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹è¯»åæ„Ÿ</title>
      <link>http://rootsongjc.github.io/blogs/cloud-computing-architecture-practice/</link>
      <pubDate>Sat, 08 Apr 2017 12:29:36 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/cloud-computing-architecture-practice/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé•¿æ±Ÿä¸‰å³¡å¤§å@æ¹–åŒ—å®œæ˜Œ Apr 6,2015ï¼‰
å‰è¨€ æœ€è¿‘ï¼ˆ2017å¹´3æœˆï¼‰å‹äººæ¨èäº†ä¸€æœ¬ä¹¦ï¼Œæ˜¯åä¸ºçš„å·¥ç¨‹å¸ˆå†™çš„ã€Šäº‘è®¡ç®—æ¶æ„ä¸å®è·µç¬¬äºŒç‰ˆã€‹ï¼Œæ­£å¥½åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è¿™æœ¬ä¹¦çš„pdfï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œç‚¹è¿™é‡Œä¸‹è½½ï¼Œä¹¦æ˜¯æ–‡å­—ç‰ˆçš„ï¼Œå¤§å°13.04MBï¼Œé™¤äº†ç« èŠ‚é¡ºåºæœ‰ç‚¹é—®é¢˜å¤–æ²¡æœ‰å…¶ä»–ä»€ä¹ˆé—®é¢˜ã€‚è¿™æ˜¯è¯¥ä¹¦çš„ç¬¬äºŒç‰ˆï¼Œç¬¬ä¸€ç‰ˆ2014å¹´9æœˆå‡ºç‰ˆï¼Œç¬¬äºŒç‰ˆ2016å¹´9æœˆå‡ºç‰ˆï¼Œç¬¬äºŒç‰ˆçš„ç¼–è€…å›¢é˜Ÿå±…ç„¶æœ‰50äººä¹‹å¤šğŸ˜“
ç¬¬äºŒç‰ˆåˆ†äº«äº†åä¸ºåœ¨äº‘è®¡ç®—æ ¸å¿ƒç«äº‰åŠ›æ„å»ºä¸ä»·å€¼è½¬æ¢æ–¹é¢çš„ç»éªŒä¸å»ºè®®ï¼Œå¹¶è¡¥å……äº†ä¸šç•Œåœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¡Œä¸šäº‘ä»¥åŠç”µä¿¡ç½‘ç»œäº‘åŒ–å•†ç”¨è½åœ°ä¸æŠ€æœ¯åº”ç”¨æ–¹é¢çš„æˆåŠŸä¼˜ç§€å®è·µã€‚å¢åŠ äº†å¯¹Dockerå®¹å™¨ä¸å¾®æœåŠ¡æ•æ·è¿­ä»£ã€å¤§æ•°æ®ä¸æ•°æ®åº“äº‘åŒ–ã€è¡Œä¸šå»ºæ¨¡ä¸æœºå™¨å­¦ä¹ ç®—æ³•ã€æ··åˆäº‘ä¸ç®¡ç†è‡ªåŠ¨åŒ–ç¼–æ’ã€äº‘ç”Ÿæ€å»ºè®¾ç­‰æ–¹é¢çš„ä»‹ç»ã€‚
ç¬¬1ç«  äº‘è®¡ç®—çš„å•†ä¸šåŠ¨åŠ›ä¸æŠ€æœ¯è¶‹åŠ¿ â€‹
â€‹
â€‹
â€‹
â€‹
â€‹</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation/</link>
      <pubDate>Fri, 07 Apr 2017 20:13:24 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šç å¤´@å¤åŒ—æ°´é•‡ Apr 30,2016ï¼‰
å‰è¨€ åœ¨å®‰è£…å¥½äº†Kubernetesé›†ç¾¤ã€é…ç½®å¥½äº†flannelç½‘ç»œã€å®‰è£…äº†Kubernetes Dashboardå’Œé…ç½®Heapsterç›‘æ§æ’ä»¶åï¼Œè¿˜æœ‰ä¸€é¡¹é‡è¦çš„å·¥ä½œï¼Œä¸ºäº†è°ƒè¯•å’Œæ•…éšœæ’æŸ¥ï¼Œè¿˜éœ€è¦è¿›è¡Œæ—¥å¿—æ”¶é›†å·¥ä½œã€‚
å®˜æ–¹æ–‡æ¡£
Kubernetes Logging and Monitoring Cluster Activity
Logging Using Elasticsearch and Kibanaï¼šä¸è¿‡è¿™ç¯‡æ–‡ç« æ˜¯åœ¨GCEä¸Šé…ç½®çš„ï¼Œå‚è€ƒä»·å€¼ä¸å¤§ã€‚
å®¹å™¨æ—¥å¿—çš„å­˜åœ¨å½¢å¼ ç›®å‰å®¹å™¨æ—¥å¿—æœ‰ä¸¤ç§è¾“å‡ºå½¢å¼ï¼š
stdout,stderræ ‡å‡†è¾“å‡º
è¿™ç§å½¢å¼çš„æ—¥å¿—è¾“å‡ºæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨docker logsæŸ¥çœ‹æ—¥å¿—ï¼Œkubernetesé›†ç¾¤ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨kubectl logsç±»ä¼¼çš„å½¢å¼æŸ¥çœ‹æ—¥å¿—ã€‚
æ—¥å¿—æ–‡ä»¶è®°å½•
è¿™ç§æ—¥å¿—è¾“å‡ºæˆ‘ä»¬æ— æ³•ä»ä»¥ä¸Šæ–¹æ³•æŸ¥çœ‹æ—¥å¿—å†…å®¹ï¼Œåªèƒ½tailæ—¥å¿—æ–‡ä»¶æŸ¥çœ‹ã€‚
Fluentdä»‹ç» Fluentdæ˜¯ä½¿ç”¨Rubyç¼–å†™çš„ï¼Œé€šè¿‡åœ¨åç«¯ç³»ç»Ÿä¹‹é—´æä¾›ç»Ÿä¸€çš„æ—¥å¿—è®°å½•å±‚æ¥ä»åç«¯ç³»ç»Ÿä¸­è§£è€¦æ•°æ®æºã€‚ æ­¤å±‚å…è®¸å¼€å‘äººå‘˜å’Œæ•°æ®åˆ†æäººå‘˜åœ¨ç”Ÿæˆæ—¥å¿—æ—¶ä½¿ç”¨å¤šç§ç±»å‹çš„æ—¥å¿—ã€‚ ç»Ÿä¸€çš„æ—¥å¿—è®°å½•å±‚å¯ä»¥è®©æ‚¨å’Œæ‚¨çš„ç»„ç»‡æ›´å¥½åœ°ä½¿ç”¨æ•°æ®ï¼Œå¹¶æ›´å¿«åœ°åœ¨æ‚¨çš„è½¯ä»¶ä¸Šè¿›è¡Œè¿­ä»£ã€‚ ä¹Ÿå°±æ˜¯è¯´fluentdæ˜¯ä¸€ä¸ªé¢å‘å¤šç§æ•°æ®æ¥æºä»¥åŠé¢å‘å¤šç§æ•°æ®å‡ºå£çš„æ—¥å¿—æ”¶é›†å™¨ã€‚å¦å¤–å®ƒé™„å¸¦äº†æ—¥å¿—è½¬å‘çš„åŠŸèƒ½ã€‚
Fluentdæ”¶é›†çš„eventç”±ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ç»„æˆï¼š
 Tagï¼šå­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ç‚¹éš”å¼€ï¼Œå¦‚myapp.access Timeï¼šUNIXæ—¶é—´æ ¼å¼ Recordï¼šJSONæ ¼å¼  Fluentdç‰¹ç‚¹  éƒ¨ç½²ç®€å•çµæ´» å¼€æº ç»è¿‡éªŒè¯çš„å¯é æ€§å’Œæ€§èƒ½ ç¤¾åŒºæ”¯æŒï¼Œæ’ä»¶è¾ƒå¤š ä½¿ç”¨jsonæ ¼å¼äº‹ä»¶æ ¼å¼ å¯æ‹”æ’çš„æ¶æ„è®¾è®¡ ä½èµ„æºè¦æ±‚ å†…ç½®é«˜å¯é æ€§  å®‰è£… æŸ¥çœ‹cluster/addons/fluentd-elasticsearchæ’ä»¶ç›®å½•ï¼Œè·å–åˆ°éœ€è¦ç”¨åˆ°çš„dockeré•œåƒåç§°ã€‚
$grep -rn &amp;quot;gcr.io&amp;quot; *.yaml es-controller.yaml:24: - image: gcr.io/google_containers/elasticsearch:v2.4.1-2 fluentd-es-ds.yaml:26: image: gcr.io/google_containers/fluentd-elasticsearch:1.22 kibana-controller.yaml:22: image: gcr.io/google_containers/kibana:v4.6.1-1  éœ€è¦ç”¨åˆ°çš„é•œåƒ
 gcr.io/google_containers/kibana:v4.6.1-1 gcr.io/google_containers/elasticsearch:v2.4.1-2 gcr.</description>
    </item>
    
    <item>
      <title>Kubernetesçš„ConfigMapè§£æ</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-configmap-introduction/</link>
      <pubDate>Thu, 06 Apr 2017 21:24:20 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-configmap-introduction/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé¾™å½¢ç¯ç¬¼@å¤åŒ—æ°´é•‡ Apr 30,2016ï¼‰
å‰è¨€ ä¸ºä»€ä¹ˆè¦ç¿»è¯‘è¿™ç¯‡æ–‡ç« ï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—çš„æ—¶å€™é‡åˆ°äº†éœ€è¦ä¿®æ”¹é•œåƒä¸­é…ç½®çš„é—®é¢˜ï¼Œfluent-plugin-kubernetes_metadataé‡Œçš„éœ€è¦çš„td-agent.confæ–‡ä»¶ã€‚
å…¶å®ConfigMapåŠŸèƒ½åœ¨Kubernetes1.2ç‰ˆæœ¬çš„æ—¶å€™å°±æœ‰äº†ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä¼šä»é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°æˆ–ç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚è¿™äº›é…ç½®ä¿¡æ¯éœ€è¦ä¸docker imageè§£è€¦ï¼Œä½ æ€»ä¸èƒ½æ¯ä¿®æ”¹ä¸€ä¸ªé…ç½®å°±é‡åšä¸€ä¸ªimageå§ï¼ŸConfigMap APIç»™æˆ‘ä»¬æä¾›äº†å‘å®¹å™¨ä¸­æ³¨å…¥é…ç½®ä¿¡æ¯çš„æœºåˆ¶ï¼ŒConfigMapå¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜æ•´ä¸ªé…ç½®æ–‡ä»¶æˆ–è€…JSONäºŒè¿›åˆ¶å¤§å¯¹è±¡ã€‚
ConfigMapæ¦‚è§ˆ ConfigMap APIèµ„æºç”¨æ¥ä¿å­˜key-value pairé…ç½®æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥åœ¨podsé‡Œä½¿ç”¨ï¼Œæˆ–è€…è¢«ç”¨æ¥ä¸ºåƒcontrollerä¸€æ ·çš„ç³»ç»Ÿç»„ä»¶å­˜å‚¨é…ç½®æ•°æ®ã€‚è™½ç„¶ConfigMapè·ŸSecretsç±»ä¼¼ï¼Œä½†æ˜¯ConfigMapæ›´æ–¹ä¾¿çš„å¤„ç†ä¸å«æ•æ„Ÿä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚ æ³¨æ„ï¼šConfigMapsä¸æ˜¯å±æ€§é…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ã€‚ConfigMapsåªæ˜¯ä½œä¸ºå¤šä¸ªpropertiesæ–‡ä»¶çš„å¼•ç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºLinuxç³»ç»Ÿä¸­çš„/etcç›®å½•ï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨ConfigMapé…ç½®æ¥åˆ›å»ºKuberntes Volumesï¼ŒConfigMapä¸­çš„æ¯ä¸ªdataé¡¹éƒ½ä¼šæˆä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚
kind: ConfigMap apiVersion: v1 metadata: creationTimestamp: 2016-02-18T19:14:38Z name: example-config namespace: default data: example.property.1: hello example.property.2: world example.property.file: |- property.1=value-1 property.2=value-2 property.3=value-3  dataä¸€æ åŒ…æ‹¬äº†é…ç½®æ•°æ®ï¼ŒConfigMapå¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ é…ç½®æ•°æ®å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼åœ¨Podsé‡Œè¢«ä½¿ç”¨ã€‚ConfigMapså¯ä»¥è¢«ç”¨æ¥ï¼š
 è®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼ åœ¨å®¹å™¨é‡Œè®¾ç½®å‘½ä»¤è¡Œå‚æ•° åœ¨æ•°æ®å·é‡Œé¢åˆ›å»ºconfigæ–‡ä»¶  ç”¨æˆ·å’Œç³»ç»Ÿç»„ä»¶ä¸¤è€…éƒ½å¯ä»¥åœ¨ConfigMapé‡Œé¢å­˜å‚¨é…ç½®æ•°æ®ã€‚
å…¶å®ä¸ç”¨çœ‹ä¸‹é¢çš„æ–‡ç« ï¼Œç›´æ¥ä»kubectl create configmap -hçš„å¸®åŠ©ä¿¡æ¯ä¸­å°±å¯ä»¥å¯¹ConfigMapç©¶ç«Ÿå¦‚ä½•åˆ›å»ºç•¥çŸ¥ä¸€äºŒäº†ã€‚
Examples: # Create a new configmap named my-config based on folder bar kubectl create configmap my-config --from-file=path/to/bar # Create a new configmap named my-config with specified keys instead of file basenames on disk kubectl create configmap my-config --from-file=key1=/path/to/bar/file1.</description>
    </item>
    
    <item>
      <title>TensorFlowæ·±åº¦å­¦ä¹ æ‰‹å†™æ•°å­—è¯†åˆ«åˆä½“éªŒ</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-and-deep-learning-without-a-phd/</link>
      <pubDate>Wed, 05 Apr 2017 21:52:01 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-and-deep-learning-without-a-phd/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šç¦¾é›€ @åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰
å‰è¨€ TensorFlowå­¦ä¹ æ›²çº¿æ˜¯é™¡å³­çš„ï¼Œä¸æ˜¯æ‰€æœ‰çš„ITä»ä¸šäººå‘˜éƒ½å¾ˆå®¹æ˜“å‚ä¸çš„ï¼Œä½ éœ€è¦æœ‰ä¸€å®šçš„æ•°å­¦ä¸“ä¸šçŸ¥è¯†ï¼Œå¯¹äºå¯¹æ·±åº¦å­¦ä¹ æ²¡æœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼Œè¦æƒ³äº†è§£è¿™é—¨æŠ€æœ¯ï¼Œæœ€å¿«æ·çš„é€”å¾„æ˜¯å…ˆè¿è¡Œä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬è®¤è¯†äº‹ç‰©éƒ½æ˜¯å…ˆä»æ„Ÿæ€§ã€åˆ°ç†æ€§çš„æ€è¾¨è¿‡ç¨‹ã€‚
ä¸‹é¢æˆ‘ä»¬æ¥è·ŸéšMartin Gornerçš„TensorFlow and Deep Learing Without a PhDæ¥ç¼–å†™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªTensorFlowç¨‹åºâ€”â€”æ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œè¿™ç¯‡æ–‡ç« çš„ä¸­æ–‡ç‰ˆæ²¡æœ‰åšå£«å­¦ä½å¦‚ä½•ç©è½¬TensorFlowå’Œæ·±åº¦å­¦ä¹ äº2017å¹´3æœˆ13æ—¥å‘è¡¨åœ¨å‘è¡¨åœ¨æœºå™¨ä¹‹å¿ƒä¸Šã€‚è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æ ¹æ®3æœˆ8æ—¥-10æ—¥çš„Google Cloud NEXT&amp;rsquo;17å¤§ä¼šä¸ŠMartin Gorneråšçš„è®²è§£æ•´ç†è€Œæˆçš„ï¼Œæ•™ç¨‹ | æ²¡æœ‰åšå£«å­¦ä½ï¼Œç…§æ ·ç©è½¬TensorFlowæ·±åº¦å­¦ä¹ è¿™ç¯‡æ–‡ç« æ˜¯å¯¹Martin Gornerçš„ç®€æ˜“æ•™ç¨‹çš„åŸæ–‡ç¿»è¯‘ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸è¦æ±‚äº†è§£TensorFlowèƒŒåå¤æ‚çš„ç†è®ºï¼Œæˆ‘ä»¬å…ˆè·Ÿéšè¿™ç¯‡ç®€æ˜“æ•™ç¨‹ç©ä¸€æŠŠTensorFlowçš„æ‰‹å†™æ•°å­—è¯†åˆ«ã€‚
å¦‚æœä½ æƒ³æ·±å…¥äº†è§£è¿™æœ¬åçš„åŸç†çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ç¤¾ä¼šè®¡ç®—ä¸ä¿¡æ¯æ£€ç´¢ç ”ç©¶ä¸­å¿ƒç¿»è¯‘çš„ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹è¿™æœ¬ä¹¦ï¼Œè¯¥ä¹¦ç¿»è¯‘è‡ªNeural Networks and Deep Learningçš„ä¸­æ–‡ç¿»è¯‘ï¼ŒåŸæ–‡ä½œè€… Michael Nielsenï¼Œè€Œä¸”è¿™è¿˜æ˜¯ä¸€æœ¬å…è´¹çš„ç”µå­ä¹¦ï¼Œè¯¥ä¹¦ä¸­ç³»ç»Ÿè®²è§£äº†ä½¿ç”¨ç¥ç»ç½‘ç»œè¯†åˆ«æ‰‹å†™æ•°å­—èƒŒåçš„åŸç†ã€‚è¯¥ä¹¦æ‰˜ç®¡åœ¨GitBookä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»è¿™é‡Œç›´æ¥ä¸‹è½½è¯¥ä¹¦ä¸­æ–‡ç‰ˆçš„PDFã€‚
å‡†å¤‡ ä¸‹è½½ä»£ç 
è¿™ä¸ªä»£ç ä»“åº“é‡ŒåŒ…å«äº†æ‰‹å†™æ•°å­—è¯†åˆ«å’Œä¸‹è½½ä¾èµ–çš„è®­ç»ƒæ•°æ®çš„ä»£ç ï¼Œæˆ‘ä»¬å°†åªç”¨åˆ°mnist_1.0_softmax.pyè¿™ä¸€ä¸ªä»£ç æ–‡ä»¶ã€‚æ•´ä¸ªmnist_1.0_softmax.pyä»£ç å¹¶ä¸å¤æ‚ï¼Œä¸ç®—æ³¨é‡Šçš„è¯åªæœ‰36è¡Œã€‚
git clone https://github.com/martin-gorner/tensorflow-mnist-tutorial.git  ä¸‹è½½å®Œåï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªINSTALL.txtï¼Œè¿™ç¯‡æ–‡ç« æ˜¯è¿è¡Œä»£ç æ‰€å¿…éœ€çš„ç¯å¢ƒè¦æ±‚è¯´æ˜ã€‚
å®‰è£…TensorFlow
æˆ‘ä¹‹å‰å†™è¿‡è¯¦ç»†çš„TensorFlowå®‰è£…æ•™ç¨‹TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬äºŒç« TensorFlowç¯å¢ƒæ­å»ºï¼Œè¿™ç¯‡æ–‡ç« ä¸­ä¸»è¦è®²æ€æ ·åœ¨dockeré‡Œå®‰è£…TensorFlowã€‚
æˆ‘ä½¿ç”¨çš„Macè€Œä¸”è¿˜æ˜¯python2.7ï¼Œæ‰€ä»¥æˆ‘è¿™æ ·å®‰è£…ï¼š
pip install --upgrade tensorflow --user -U pip install --upgrade matplotlib --user -U  è¿è¡Œç¤ºä¾‹ è¿è¡Œæ‰‹å†™æ•°å­—è®­ç»ƒç¤ºä¾‹ã€‚
python mnist_1.0_softmax.py  è¿è¡Œè¿‡ç¨‹ä¸­ä½ ä¼šçœ‹åˆ°ä¸€å¤§æ®µè¾“å‡ºï¼š
Collecting matplotlib Downloading matplotlib-2.0.0-cp27-cp27m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl (12.8MB) 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 12.8MB 26kB/s Requirement already up-to-date: pyparsing!</description>
    </item>
    
    <item>
      <title>Kubernetes heapsterç›‘æ§æ’ä»¶å®‰è£…æ–‡æ¡£</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation/</link>
      <pubDate>Wed, 05 Apr 2017 18:41:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå—‘çŒ«è–„è·çš„ç™½åŒ–å­ŸåŠ æ‹‰è™@åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰
å‰è¨€ å‰é¢å‡ ç¯‡æ–‡ç« ä¸­è®°å½•äº†æˆ‘ä»¬å®‰è£…å¥½äº†Kubernetesé›†ç¾¤ã€é…ç½®å¥½äº†flannelç½‘ç»œã€å®‰è£…äº†Kubernetes Dashboardï¼Œä½†æ˜¯è¿˜æ²¡æ³•æŸ¥çœ‹Podçš„ç›‘æ§ä¿¡æ¯ï¼Œè™½ç„¶kubeleté»˜è®¤é›†æˆäº†cAdvisorï¼ˆåœ¨æ¯ä¸ªnodeçš„4194ç«¯å£å¯ä»¥æŸ¥çœ‹åˆ°ï¼‰ï¼Œä½†æ˜¯å¾ˆä¸æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©å®‰è£…heapsterã€‚
å®‰è£… ä¸‹è½½heapsterçš„ä»£ç 
ç›´æ¥ç°åœ¨Githubä¸Šçš„æœ€æ–°ä»£ç ã€‚
git pull https://github.com/kubernetes/heapster.git  ç›®å‰çš„æœ€é«˜ç‰ˆæœ¬æ˜¯1.3.0ã€‚
åœ¨heapster/deploy/kube-config/influxdbç›®å½•ä¸‹æœ‰å‡ ä¸ªyamlæ–‡ä»¶ï¼š
grafana-deployment.yaml grafana-service.yaml heapster-deployment.yaml heapster-service.yaml influxdb-deployment.yaml influxdb-service.yaml  æˆ‘ä»¬å†çœ‹ä¸‹ç”¨äº†å“ªäº›é•œåƒï¼š
grafana-deployment.yaml:16: image: gcr.io/google_containers/heapster-grafana-amd64:v4.0.2 heapster-deployment.yaml:16: image: gcr.io/google_containers/heapster-amd64:v1.3.0-beta.1 influxdb-deployment.yaml:16: image: gcr.io/google_containers/heapster-influxdb-amd64:v1.1.1  ä¸‹è½½é•œåƒ
æˆ‘ä»¬ä¸‹è½½å¥½äº†è¿™äº›imagesåï¼Œå­˜å‚¨åˆ°ç§æœ‰é•œåƒä»“åº“é‡Œï¼š
 sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-amd64:v1.3.0-beta.1 sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-grafana-amd64:v4.0.2 sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-influxdb-amd64:v1.1.1  æˆ‘å·²ç»å°†å®˜æ–¹é•œåƒå…‹éš†åˆ°äº†æ—¶é€Ÿäº‘ä¸Šï¼Œé•œåƒåœ°å€ï¼š
 index.tenxcloud.com/jimmy/heapster-amd64:v1.3.0-beta.1 index.tenxcloud.com/jimmy/heapster-influxdb-amd64:v1.1.1 index.tenxcloud.com/jimmy/heapster-grafana-amd64:v4.0.2  éœ€è¦çš„å¯ä»¥å»ä¸‹è½½ï¼Œä¸‹è½½å‰éœ€è¦ç”¨æ—¶é€Ÿäº‘è´¦æˆ·ç™»é™†ï¼Œç„¶åå†æ‰§è¡Œpullæ“ä½œã€‚
docker login index.tendcloud.com  é…ç½® å‚è€ƒRun Heapster in a Kubernetes cluster with an InfluxDB backend and a Grafana UIå’ŒConfiguring Sourceï¼Œéœ€è¦ä¿®æ”¹yamlæ–‡ä»¶ä¸­çš„å‡ ä¸ªé…ç½®ã€‚
 é¦–å…ˆä¿®æ”¹ä¸‰ä¸ªdeployment.yamlæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„é•œåƒæ–‡ä»¶åœ°å€æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„ç§æœ‰é•œåƒä»“åº“çš„ ä¿®æ”¹heapster-deployment.</description>
    </item>
    
    <item>
      <title>Kubernetes Dashboard/Web UIå®‰è£…å…¨è®°å½•</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/</link>
      <pubDate>Wed, 05 Apr 2017 14:28:51 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ™’å¤ªé˜³çš„è¢‹é¼ @åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰
å‰è¨€ å‰å‡ å¤©åœ¨CentOS7.2ä¸Šå®‰è£…Kubernetes1.6å’Œå®‰è£…å¥½flannelç½‘ç»œé…ç½®ï¼Œä»Šå¤©æˆ‘ä»¬æ¥å®‰è£…ä¸‹kuberentnesçš„dashboardã€‚
Dashboardæ˜¯Kubernetesçš„ä¸€ä¸ªæ’ä»¶ï¼Œä»£ç åœ¨å•ç‹¬çš„å¼€æºé¡¹ç›®é‡Œã€‚1å¹´å‰è¿˜æ˜¯ç‰¹åˆ«ç®€å•çš„ä¸€ä¸ªUIï¼Œåªèƒ½åœ¨ä¸Šé¢æŸ¥çœ‹podçš„ä¿¡æ¯å’Œéƒ¨ç½²podè€Œå·²ï¼Œç°åœ¨å·²ç»åšçš„è·ŸDocker Enterprise Editionçš„Docker Datacenterå¾ˆåƒäº†ã€‚
å®‰è£…Dashboard å®˜ç½‘çš„å®‰è£…æ–‡æ¡£https://kubernetes.io/docs/user-guide/ui/ï¼Œå…¶å®å®˜ç½‘æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨ç°æˆçš„imageæ¥ç”¨kuberneteséƒ¨ç½²å³å¯ã€‚
é¦–å…ˆéœ€è¦ä¸€ä¸ªkubernetes-dashboard.yamlçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨Githubçš„src/deploy/kubernetes-dashboard.yamlä¸‹è½½ã€‚
æˆ‘ä»¬èƒ½çœ‹ä¸‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š
# Copyright 2015 Google Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</description>
    </item>
    
    <item>
      <title>KubernetesåŸºäºflannelçš„ç½‘ç»œé…ç½®</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-network-config/</link>
      <pubDate>Fri, 31 Mar 2017 11:05:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-network-config/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šè¥¿å®‰é¼“æ¥¼ Oct 4,2014ï¼‰
ä¹¦æ¥ä¸Šæ–‡åœ¨CentOSä¸­å®‰è£…Kubernetesè¯¦ç»†æŒ‡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œä½œä¸ºå­¦ä¹ Kubernetesçš„å¿ƒè·¯å†ç¨‹å§ã€‚
æœ¬æ–‡ä¸»è¦è®²è§£Kubernetesçš„ç½‘ç»œé…ç½®ï¼ŒğŸ‘†æ–‡ä¸­æœ‰ä¸€ä¸ªå®‰è£…Flannelçš„æ­¥éª¤ï¼Œä½†æ˜¯å®‰è£…å¥½åå¹¶æ²¡æœ‰ç›¸åº”çš„é…ç½®è¯´æ˜ã€‚
é…ç½®flannel æˆ‘ä»¬ç›´æ¥ä½¿ç”¨çš„yumå®‰è£…çš„flannleï¼Œå®‰è£…å¥½åä¼šç”Ÿæˆ/usr/lib/systemd/system/flanneld.serviceé…ç½®æ–‡ä»¶ã€‚
[Unit] Description=Flanneld overlay address etcd agent After=network.target After=network-online.target Wants=network-online.target After=etcd.service Before=docker.service [Service] Type=notify EnvironmentFile=/etc/sysconfig/flanneld EnvironmentFile=-/etc/sysconfig/docker-network ExecStart=/usr/bin/flanneld-start $FLANNEL_OPTIONS ExecStartPost=/usr/libexec/flannel/mk-docker-opts.sh -k DOCKER_NETWORK_OPTIONS -d /run/flannel/docker Restart=on-failure [Install] WantedBy=multi-user.target RequiredBy=docker.service  å¯ä»¥çœ‹åˆ°flannelç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶åœ¨/etc/sysconfig/flanneldã€‚
# Flanneld configuration options # etcd url location. Point this to the server where etcd runs FLANNEL_ETCD_ENDPOINTS=&amp;quot;http://sz-pg-oam-docker-test-001.tendcloud.com:2379&amp;quot; # etcd config key. This is the configuration key that flannel queries # For address range assignment FLANNEL_ETCD_PREFIX=&amp;quot;/kube-centos/network&amp;quot; # Any additional options that you want to pass #FLANNEL_OPTIONS=&amp;quot;&amp;quot;   etcdçš„åœ°å€FLANNEL_ETCD_ENDPOINT etcdæŸ¥è¯¢çš„ç›®å½•ï¼ŒåŒ…å«dockerçš„IPåœ°å€æ®µé…ç½®ã€‚FLANNEL_ETCD_PREFIX  åœ¨etcdä¸­åˆ›å»ºç½‘ç»œé…ç½®</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬ä¸‰ç« TensorFlowå…¥é—¨</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-03/</link>
      <pubDate>Thu, 30 Mar 2017 21:34:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-03/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ‰¬å·ä¸œå…³ May 24,2015ï¼‰
è¿™æ˜¯æˆ‘é˜…è¯»æ‰äº‘ç§‘æŠ€éƒ‘æ³½å®‡çš„ã€ŠTensorFlowå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹çš„è¯»ä¹¦ç¬”è®°ç³»åˆ—æ–‡ç« ï¼ŒæŒ‰ç…§æ–‡ç« çš„ç« èŠ‚é¡ºåºæ¥å†™çš„ã€‚æ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨è¿™é‡Œã€‚
P.S æœ¬ä¹¦çš„å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨è¿™é‡Œï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚
è¿™ä¸€ç« ä»ä¸‰ä¸ªè§’åº¦å¸¦å¤§å®¶å…¥é—¨ã€‚
åˆ†åˆ«æ˜¯TensorFlowçš„
 è®¡ç®—æ¨¡å‹ æ•°æ®æ¨¡å‹ è¿è¡Œæ¨¡å‹  3.1 TensorFlowçš„è®¡ç®—æ¨¡å‹â€”â€”å›¾è®¡ç®— è®¡ç®—å›¾æ˜¯TensorFlowä¸­çš„ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¦‚å¿µï¼ŒTensorFlowä¸­çš„æ‰€æœ‰è®¡ç®—éƒ½ä¼šè½¬åŒ–æˆè®¡ç®—å›¾ä¸Šçš„èŠ‚ç‚¹ã€‚
å…¶å®TensorFlowçš„åå­—å·²ç»æš—ç¤ºäº†å®ƒçš„å®ç°æ–¹å¼äº†ï¼ŒTensorè¡¨ç¤ºçš„æ˜¯æ•°æ®ç»“æ„â€”â€”å¼ é‡ï¼ŒFlowè¡¨ç¤ºæ•°æ®æµâ€”â€”Tensoré€šè¿‡æ•°æ®æµç›¸äº’è½¬åŒ–ã€‚
å¸¸ç”¨çš„æ–¹æ³•
 åœ¨pythonä¸­å¯¼å…¥tensorflowï¼šimport tensorflow as tf è·å–å½“å‰é»˜è®¤çš„è®¡ç®—å›¾ï¼štf.get_default_graph() ç”Ÿæˆæ–°çš„è®¡ç®—å›¾ï¼štf.Graph()  ä¹¦ä¸­è¿™é‡Œéƒ½æœ‰ä¾‹å­è®²è§£ï¼Œå¯ä»¥ä»Githubä¸­ä¸‹è½½ä»£ç ï¼Œæˆ–è€…å¦‚æœä½ ä½¿ç”¨æ‰äº‘æä¾›çš„dockeré•œåƒçš„æ–¹å¼å®‰è£…çš„è¯ï¼Œåœ¨jupyterä¸­å¯ä»¥çœ‹åˆ°å„ä¸ªç« èŠ‚çš„ä»£ç ã€‚
å®šä¹‰ä¸¤ä¸ªä¸åŒçš„å›¾
import tensorflow as tf g1 = tf.Graph() with g1.as_default(): v = tf.get_variable(&amp;quot;v&amp;quot;, [1], initializer = tf.zeros_initializer) # è®¾ç½®åˆå§‹å€¼ä¸º0 g2 = tf.Graph() with g2.as_default(): v = tf.get_variable(&amp;quot;v&amp;quot;, [1], initializer = tf.ones_initializer()) # è®¾ç½®åˆå§‹å€¼ä¸º1 with tf.Session(graph = g1) as sess: tf.global_variables_initializer().run() with tf.variable_scope(&amp;quot;&amp;quot;, reuse=True): print(sess.</description>
    </item>
    
    <item>
      <title>åœ¨CentOSä¸Šå®‰è£…kubernetesè¯¦ç»†æŒ‡å—</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/</link>
      <pubDate>Thu, 30 Mar 2017 20:44:20 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šåŒ—äº¬åœ†æ˜å›­ Aug 25,2014ï¼‰
ä½œè€…ï¼šJimmy Songï¼ŒPeter Maï¼Œ2017å¹´3æœˆ30æ—¥
æœ€è¿‘å†³å®šä»Docker Swarm ModeæŠ•å…¥åˆ°Kubernetesçš„æ€€æŠ±ï¼Œå¯¹Dockerçš„æˆ˜ç•¥å’Œä¼ä¸šåŒ–å‘å±•å‰æ™¯æ¯”è¾ƒå ªå¿§ï¼Œè€ŒKubernetesæ˜¯CNCFçš„æˆå‘˜ä¹‹ä¸€ã€‚
è¿™ç¯‡æ˜¯æ ¹æ®å®˜æ–¹å®‰è£…æ–‡æ¡£å®è·µæ•´ç†çš„ï¼Œæ“ä½œç³»ç»Ÿæ˜¯çº¯å‡€çš„CentOS7.2ã€‚
å¦å¤–è¿˜æœ‰ä¸€ä¸ªPeter Maå†™çš„åœ¨CentOSä¸Šæ‰‹åŠ¨å®‰è£…kubernetesçš„æ–‡æ¡£å¯ä»¥å‚è€ƒã€‚
è§’è‰²åˆ†é…
ä¸‹é¢ä»¥åœ¨ä¸‰å°ä¸»æœºä¸Šå®‰è£…Kubernetesä¸ºä¾‹ã€‚
172.20.0.113 master/node kube-apiserver kube-controller-manager kube-scheduler kubelet kube-proxy etcd flannel 172.20.0.114 node kubectl kube-proxy flannel 172.20.0.115 node kubectl kube-proxy flannel  ç¬¬ä¸€å°ä¸»æœºæ—¢ä½œä¸ºmasterä¹Ÿä½œä¸ºnodeã€‚
ç³»ç»Ÿç¯å¢ƒ
 Centos 7.2.1511 docker 1.12.6 etcd 3.1.5 kubernetes 1.6.0 flannel 0.7.0-1  å®‰è£… ä¸‹é¢ç»™å‡ºä¸¤ç§å®‰è£…æ–¹å¼ï¼š
 é…ç½®yumæºåï¼Œä½¿ç”¨yumå®‰è£…ï¼Œå¥½å¤„æ˜¯ç®€å•ï¼Œåå¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œéœ€è¦googleæ›´æ–°yumæºæ‰èƒ½è·å¾—æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œè€Œæ‰€æœ‰è½¯ä»¶çš„ä¾èµ–åˆä¸èƒ½è‡ªå·±æŒ‡å®šï¼Œå°¤å…¶æ˜¯ä½ çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬å¦‚æœä½çš„è¯ï¼Œä½¿ç”¨yumæºå®‰è£…çš„kubernetesçš„ç‰ˆæœ¬ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ï¼Œå¥½å¤„æ˜¯å¯ä»¥å®‰è£…ä»»æ„ç‰ˆæœ¬çš„kubernetesï¼Œåå¤„æ˜¯é…ç½®æ¯”è¾ƒå¤æ‚ã€‚  æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼å®‰è£…ã€‚
æœ¬æ–‡çš„å¾ˆå¤šå®‰è£…æ­¥éª¤å’Œå‘½ä»¤æ˜¯å‚è€ƒçš„Kuberneteså®˜ç½‘CentOS Manual Configæ–‡æ¡£ã€‚
ç¬¬ä¸€ç§æ–¹å¼ï¼šCentOSç³»ç»Ÿä¸­ç›´æ¥ä½¿ç”¨yumå®‰è£… ç»™yumæºå¢åŠ ä¸€ä¸ªRepo
[virt7-docker-common-release] name=virt7-docker-common-release baseurl=http://cbs.centos.org/repos/virt7-docker-common-release/x86_64/os/ gpgcheck=0  å®‰è£…dockerã€kubernetesã€etcdã€flannelä¸€æ­¥åˆ°ä½
yum -y install --enablerepo=virt7-docker-common-release kubernetes etcd flannel  å®‰è£…å¥½äº†ä¹‹åéœ€è¦ä¿®æ”¹ä¸€ç³»åˆ—é…ç½®æ–‡ä»¶ã€‚</description>
    </item>
    
    <item>
      <title>Pivotal Cloud foundryå¿«é€Ÿå¼€å§‹æŒ‡å—</title>
      <link>http://rootsongjc.github.io/blogs/cloud-foundry-tryout/</link>
      <pubDate>Thu, 23 Mar 2017 22:54:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/cloud-foundry-tryout/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šé»„å±±æ—¥å‡ºåçš„äº‘æµ· Oct 3,2013ï¼‰
å‰è¨€ æœ€è¿‘ç ”ç©¶äº†ä¸‹Pivotalçš„Cloud foundryï¼ŒCFæœ¬èº«æ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œå¾ˆå¤šPAASå‚å•†éƒ½åŠ å…¥äº†CFï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯çš„PCF Devï¼ˆPCF Devæ˜¯ä¸€æ¬¾å¯ä»¥åœ¨å·¥ä½œç«™ä¸Šè¿è¡Œçš„è½»é‡çº§PCFå®‰è£…ï¼‰æ¥è¯•ç”¨çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥éƒ¨ç½²åœ¨è‡ªå·±çš„ç¯å¢ƒé‡Œï¼Œè€ŒPivotal Web Servicesåªå…è´¹ä¸¤ä¸ªæœˆï¼Œä¹‹åå°±è¦æ”¶è´¹ã€‚è¿™é‡Œæœ‰å®˜æ–¹çš„è¯¦ç»†æ•™ç¨‹ã€‚
å¼€å§‹ æ ¹æ®å®˜ç½‘çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†è¿è¡Œä¸€ä¸ªJavaç¨‹åºç¤ºä¾‹ã€‚
å®‰è£…å‘½ä»¤è¡Œç»ˆç«¯
ä¸‹è½½ååŒå‡»å®‰è£…å³å¯ï¼Œç„¶åæ‰§è¡Œcf helpèƒ½å¤Ÿçœ‹åˆ°å¸®åŠ©ã€‚
å®‰è£…PCF Dev
å…ˆä¸‹è½½ï¼Œå¦‚æœä½ æ²¡æœ‰Pivotal networkè´¦å·çš„è¯ï¼Œè¿˜éœ€è¦æ³¨å†Œä¸ªç”¨æˆ·ï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š
$./pcfdev-VERSION-osx &amp;amp;&amp;amp; \ cf dev start Less than 4096 MB of free memory detected, continue (y/N): &amp;gt; y Please sign in with your Pivotal Network account. Need an account? Join Pivotal Network: https://network.pivotal.io Email&amp;gt; 849122844@qq.com Password&amp;gt; Downloading VM... Progress: |+++++++++++++=======&amp;gt;| 100% VM downloaded. Allocating 4096 MB out of 16384 MB total system memory (3514 MB free).</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬äºŒç« TensorFlowç¯å¢ƒæ­å»º</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-02/</link>
      <pubDate>Thu, 23 Mar 2017 19:34:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-02/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå¹¿å·æµ·ç æ¡¥ Aug 10,2014ï¼‰
 è¿™æ˜¯æˆ‘é˜…è¯»æ‰äº‘ç§‘æŠ€éƒ‘æ³½å®‡çš„ã€ŠTensorFlowå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹çš„è¯»ä¹¦ç¬”è®°ç³»åˆ—æ–‡ç« ï¼ŒæŒ‰ç…§æ–‡ç« çš„ç« èŠ‚é¡ºåºæ¥å†™çš„ã€‚æ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨è¿™é‡Œã€‚
 P.S æœ¬ä¹¦çš„å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨è¿™é‡Œï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚
ç‡å®Œè¿™ä¸€ç« ååº”è¯¥å°±å¯ä»¥è‡ªå·±æ­å»ºå‡ºä¸€ä¸ªTensorFlowçš„ç¯å¢ƒï¼Œæˆ‘ä¹‹å‰åœ¨dockeré‡Œç©è¿‡ï¼Œé•œåƒæ¯”è¾ƒå¤§ï¼Œä¸‹è½½æ…¢ä¸€ç‚¹ï¼Œä¸è¿‡ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå¦‚æœä½ ä»…ä»…æ˜¯æƒ³è¯•ç”¨ä¸€ä¸‹TensorFlowï¼Œçœ‹çœ‹å®ƒèƒ½å¹²ä»€ä¹ˆçš„è¯ï¼Œå¯ä»¥ç›´æ¥åœ¨dockeré‡Œè¯•ç”¨ä¸€ä¸‹ã€‚åœ¨Macä¸Šå®‰è£…çš„è¯¦ç»†æ­¥éª¤ï¼Œå®˜æ–¹å®‰è£…è¯´æ˜æ–‡æ¡£ã€‚
2.1 TensorFlowçš„ä¸»è¦ä¾èµ–åŒ… TensorFlowä¸»è¦ç”¨åˆ°ä»¥ä¸‹ä¸¤ä¸ªä¾èµ–ï¼š
 Protocol bufferï¼šæ•°æ®ç»“æ„åŒ–å·¥å…·ã€‚Googleå¼€æºçš„ç»“æ„åŒ–æ•°æ®æ ¼å¼ï¼Œç”¨äºç½‘ç»œä¼ è¾“æ•°æ®æ—¶å€™çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦å…ˆå®šä¹‰schemaï¼Œgithubåœ°å€https://github.com/google/protobufã€‚åˆ†å¸ƒå¼TensorFlowä½¿ç”¨åˆ°é¢gRPCä¹Ÿæ˜¯ä½¿ç”¨Protocol Bufferæ¥ç»„ç»‡çš„ï¼Œ Bazel:è‡ªåŠ¨åŒ–ç¼–è¯‘æ„å»ºå·¥å…·ã€‚Googleå¼€æºçš„ï¼Œgithubåœ°å€https://github.com/bazelbuild/bazelï¼Œå®ƒæ”¯æŒå¤šè¯­è¨€ã€å¤šå¹³å°ã€å¯é‡å¤ç¼–è¯‘å’Œå¯ä¼¸ç¼©ï¼Œæ„å»ºå¤§å‹è½¯ä»¶é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ã€‚Bazelä½¿ç”¨**é¡¹ç›®ç©ºé—´**çš„å½¢å¼ç®¡ç†ç¼–è¯‘çš„ï¼Œæ¯ä¸ªé¡¹ç›®ç©ºé—´éœ€è¦åŒ…å«[BUILDæ–‡ä»¶](https://github.com/tensorflow/tensorflow/blob/master/bower.BUILD)ï¼ˆå®šä¹‰ç¼–è¯‘ç›®æ ‡ï¼‰å’Œ[WORKSPACE](https://github.com/tensorflow/tensorflow/blob/master/WORKSPACE)æ–‡ä»¶ï¼ˆå®šä¹‰ç¼–è¯‘çš„ä¾èµ–ç¯å¢ƒï¼‰ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æœ‰ç‚¹ç±»ä¼¼pythonè¯­æ³•ã€‚  2.2 TensorFlowå®‰è£… TensorFlowçš„å®‰è£…æ–¹å¼åŒ…æ‹¬dockeré•œåƒã€pipå®‰è£…ã€æºç ç¼–è¯‘å®‰è£…ã€‚
æˆ‘é€‰æ‹©æœ€æ–¹ä¾¿çš„dockeré•œåƒæ–¹å¼ï¼Œå…¶ä»–æ–¹å¼å¯¹æœ¬åœ°ç¯å¢ƒåšå¾ˆå¤šé…ç½®ï¼ŒæŠ˜è…¾èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚
æˆ‘æ—©å°±åœ¨dockerä¸­å®‰è£…è¿‡TensorFlow0.9å°è¯•è¿‡ç‰›åˆ€ã€‚ç°åœ¨1.0.1ç‰ˆæœ¬å·²ç»releasedäº†ã€‚TensorFlowçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æœ‰å¯¹åº”çš„dockeré•œåƒå‘å¸ƒåœ¨docker hubï¼Œå¯ä»¥ç›´æ¥docker pullå®‰è£…ã€‚
ä¸ºäº†å’Œä¹¦ä¸­æ‰€ç”¨çš„é•œåƒä¿æŒç»Ÿä¸€ï¼Œæˆ‘å°†ä½¿ç”¨caicloudæä¾›çš„é•œåƒï¼ŒåŸºäºTensorFlow0.12.0ï¼ˆè¿™ä¸ªç‰ˆæœ¬æ˜¯2016å¹´12æœˆ20æ—¥å‘å¸ƒçš„ï¼‰ï¼Œä»–ä»¬å¢åŠ äº†ä¸€äº›å…¶ä»–æœºå™¨å­¦ä¹ å·¥å…·åŒ…å’ŒTensorFlowå¯è§†åŒ–å·¥å…·TensorBoardã€‚
dockeré•œåƒæ–¹å¼å®‰è£…
é¦–å…ˆä¸‹è½½é•œåƒï¼Œè¿™ä¸ªimageæ¯”è¾ƒå¤§ï¼Œä¸‹è½½ä¸‹æ¥æ¯”è¾ƒè´¹æ—¶é—´ï¼Œæˆ‘ç”¨äº†å·®ä¸å¤š15åˆ†é’Ÿå§ã€‚
docker pull cargo.caicloud.io/tensorflow/tensorflow:0.12.0  ä¸‹è½½ä¸‹æ¥åæˆ‘ä»¬å†checkä¸‹è¿™ä¸ªå¤§å°ä¸º1.41GBé•œåƒçš„layersã€‚
å¦å¤–è¿˜æœ‰ä¸ªnvidiaç‰ˆæœ¬çš„dockerï¼Œå¯ä»¥å°†ä½ ç”µè„‘çš„GPUæ´¾å±±ç”¨åœºï¼Œæˆ‘æš‚æ—¶æ²¡ç”¨åˆ°GPUï¼Œæˆ‘ç”µè„‘è£…çš„æ˜¯docker17.03-ceï¼Œå°±ä¸æŠ˜è…¾GPUç‰ˆæœ¬çš„TensorFlowäº†ã€‚
IMAGE CREATED CREATED BY SIZE COMMENT c8a8409297f2 5 weeks ago /bin/sh -c #(nop) CMD [&amp;quot;/run_tf.sh&amp;quot;] 0 B &amp;lt;missing&amp;gt; 5 weeks ago /bin/sh -c #(nop) COPY file:78332d36244852... 122 B &amp;lt;missing&amp;gt; 5 weeks ago /bin/sh -c #(nop) COPY dir:8b6ab7d235e3975.</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬ä¸€ç« æ·±åº¦å­¦ä¹ ç®€ä»‹</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-01/</link>
      <pubDate>Mon, 20 Mar 2017 22:04:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-01/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šTensofFlowå®æˆ˜å›¾ä¹¦å°é¢ï¼‰
ğŸ™ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾ç¼–è¾‘èµ ä¹¦ï¼Œèƒ½å¤Ÿè¿™ä¹ˆå¿«çš„æ‹¿åˆ°è¿™æœ¬ä¹¦ï¼Œä¹ŸğŸ™æ‰äº‘ç§‘æŠ€çš„éƒ‘æ³½å®‡å¤§å“¥è€å¿ƒçš„å†™äº†è¿™æœ¬ä¹¦ï¼Œèƒ½å¤Ÿè®©æˆ‘ç­‰å°ç™½ä¸€çª¥æ·±åº¦å­¦ä¹ çš„çœŸå®¹ã€‚å¦å¤–è¦å¼ºçƒˆæ¨èä¸‹è¿™æœ¬ä¹¦ï¼Œè¿™æ˜¯æœ¬TensorFlowæ·±åº¦å­¦ä¹ å¾ˆå¥½çš„å…¥é—¨ä¹¦ã€‚ä¹¦ä¸­æä¾›çš„ä»£ç ä¸‹è½½åœ°å€ï¼Œæ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨è¿™é‡Œã€‚
P.S æœ¬ä¹¦çš„å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨è¿™é‡Œï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚
1.1 äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹  è¿™ä¸€èŠ‚æ˜¯è®²è§£ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚
é¦–å…ˆä»¥åƒåœ¾é‚®ä»¶åˆ†ç±»é—®é¢˜å¼•å…¥æœºå™¨å­¦ä¹ çš„é€»è¾‘å›å½’ç®—æ³•ã€‚
é€»è¾‘å›å½’ç®—æ³•çš„å‡†ç¡®æ€§å–å†³äºè®­ç»ƒæ•°æ®ä¸­çš„ç‰¹å¾çš„æå–ï¼Œä»¥åŠè®­ç»ƒçš„æ•°æ®æ•°é‡ã€‚
æ–‡ç« ä¸­åˆæäº†ä¸€ä¸ªä»å®ä½“ä¸­æå–ç‰¹å¾çš„ä¾‹å­ï¼šé€šè¿‡ç¬›å¡å°”åæ ‡ç³»æ´»æè§’åæ ‡ç³»æ¥è¡¨ç¤ºä¸åŒé¢œè‰²çš„ç‚¹ï¼Œçœ‹çœ‹èƒ½å¦ç”¨ä¸€æ¡ç›´çº¿åˆ’åˆ†ã€‚è¿™ä¸ªä¾‹å­ç”¨æ¥è¯´æ˜ä¸€æ—¦è§£å†³äº†æ•°æ®è¡¨è¾¾å’Œç‰¹å¾æå–ï¼Œå¾ˆå¤šäººå·¥æ™ºèƒ½çš„é—®é¢˜å°±èƒ½è¿åˆƒè€Œè§£ã€‚
æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œé™¤äº†èƒ½å¤Ÿå­¦ä¹ ç‰¹å¾å’Œä»»åŠ¡ä¹‹é—´çš„å…³è”ä¹‹å¤–ï¼Œè¿˜èƒ½è‡ªåŠ¨ä»ç®€å•ç‰¹å¾ä¸­æå–æ›´åŠ å¤æ‚çš„ç‰¹å¾ï¼Œè¿™æ˜¯å…¶åŒºåˆ«äºæœºå™¨å­¦ä¹ çš„å…³é”®ç‚¹ã€‚
æ€»çš„æ¥è¯´ï¼Œäººå·¥æ™ºèƒ½&amp;gt;æœºå™¨å­¦ä¹ &amp;gt;æ·±åº¦å­¦ä¹ ã€‚
1.2æ·±åº¦å­¦ä¹ çš„å‘å±•å†ç¨‹ æœ¬èŠ‚ä»‹ç»äº†æ·±åº¦ç½‘ç»œå†å²çš„ä¸‰ä¸ªå‘å±•é˜¶æ®µã€‚
2012å¹´çš„ImageNetå›¾åƒåˆ†ç±»ç«èµ›ä¸Šï¼Œæ·±åº¦å­¦ä¹ ç³»ç»ŸAlexNetèµ¢å¾—å† å†›ï¼Œè‡ªæ­¤æ·±åº¦å­¦ä¹ ä½œä¸ºæ·±å±‚ç¥ç»ç½‘ç»œçš„ä»£åè¯è€Œè¢«äººç†ŸçŸ¥ã€‚
1.3æ·±åº¦å­¦ä¹ çš„åº”ç”¨ è¿™ä¸€èŠ‚è®²çš„æ˜¯æ·±åº¦å­¦ä¹ çš„åº”ç”¨ï¼Œé¦–å…ˆè¿˜æ˜¯ä»ImageNetçš„å›¾åƒè¯†åˆ«å¼€å§‹ï¼Œåº”ç”¨åˆ°äº†OCRï¼ˆæåˆ°äº†å·ç§¯ç¥ç»ç½‘ç»œï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆæåˆ°äº†æ··åˆæé«˜æ–¯æ¨¡å‹ï¼‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆæåˆ°äº†è¯­æ–™åº“ã€å•è¯å‘é‡ã€æœºå™¨ç¿»è¯‘ã€æƒ…æ„Ÿåˆ†æï¼‰ã€äººæœºå¯¹å¼ˆï¼ˆæåˆ°äº†AlphaGOï¼‰ã€‚
1.4 æ·±åº¦å­¦ä¹ å·¥å…·ä»‹ç»ä¸å¯¹æ¯” TensorFlowçš„æ¸Šæºæ˜¯Googleå¤§è„‘å›¢é˜Ÿåœ¨2011å¹´å¼€å‘ï¼Œåœ¨å†…éƒ¨ä½¿ç”¨çš„DistBeliefï¼Œå¹¶èµ¢å¾—äº†ImageNet 2014å¹´çš„æ¯”èµ›ï¼ŒTFæ˜¯å…¶å¼€æºç‰ˆæœ¬ï¼Œè¿˜å‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡TensorFlow: Large-Scale Machine Learning on Heteogeneous Distributed systemsï¼Œè¿™å°±è·Ÿå½“å¹´çš„HDFSã€MapReduceä¸€ä¸ªå¥—è·¯å•Šã€‚
Googleè¿˜æŠŠå®ƒç”¨æ¥åšRankBrainå’Œå¾ˆå¤šå…¶ä»–çš„äº§å“çº¿ä¸Šä½¿ç”¨ã€‚
å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ·±åº¦å­¦ä¹ å·¥å…·ï¼Œæ¯”å¦‚Caffeã€Deeplearning4jã€Torchç­‰ä¸ä¸€è€Œè¶³ã€‚ä»å„ç§æŒ‡æ ‡æ¥çœ‹ï¼ŒTensorFlowéƒ½æ˜¯ç›®å‰æœ€å—å…³æ³¨çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</description>
    </item>
    
    <item>
      <title>Dockeræºç åˆ†æç¬¬ä¸€ç¯‡â€”â€”ä»£ç ç»“æ„</title>
      <link>http://rootsongjc.github.io/blogs/docker-source-code-analysis-code-structure/</link>
      <pubDate>Sun, 19 Mar 2017 23:00:29 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-source-code-analysis-code-structure/</guid>
      <description>(é¢˜å›¾ï¼šåŒ—äº¬å…«è¾¾å²­é•¿åŸ Oct 1,2015)
å‰è¨€ ä¹‹å‰é™†é™†ç»­ç»­çœ‹è¿‡ä¸€ç‚¹dockerçš„æºç ï¼Œéƒ½æœªæˆä½“ç³»ï¼Œæœ€è¿‘åœ¨ç ”ç©¶Docker-17.03-CEï¼Œè¶æ­¤æœºä¼šç ”ç©¶ä¸‹dockerçš„æºç ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›ç›¸å…³èµ„æ–™ï¼Œéƒ½æ¯”è¾ƒè¿‡æ—¶äº†ï¼Œå‘ç°*å­™å®äº®*å¤§å“¥å†™è¿‡ä¸€æœ¬ä¹¦å«ã€ŠDockeræºç åˆ†æã€‹ï¼Œè€Œä¸”ä¹‹å‰ä¹Ÿåœ¨InfoQä¸Šé™†ç»­å‘è¿‡ä¸€äº›æ–‡ç« ï¼Œè™½ç„¶æ–‡ç« éƒ½æ¯”è¾ƒè€äº†ï¼ŒåŸºäºè€çš„dockerç‰ˆæœ¬ï¼Œä½†æˆ‘è®¤ä¸ºä¾ç„¶æœ‰é˜…è¯»çš„ä»·å€¼ã€‚èµ·ç èƒ½æœ‰è¿™ä¸‰æ–¹é¢æ”¶è·ï¼š
 ä¸€æ˜¯åŸ¹å…»é˜…è¯»æºç çš„æ€ç»´æ–¹å¼ï¼Œä¸ºè‡ªå·±é˜…è¯»dockeræºç æä¾›å€Ÿé‰´ã€‚ äºŒæ˜¯å¯ä»¥äº†è§£dockerç‰ˆæœ¬çš„æ¥é¾™å»è„‰ã€‚ ä¸‰è¿˜å¯ä»¥ä½œä¸ºGoè¯­è¨€é¡¹ç›®å¼€å‘ä½œä¸ºå€Ÿé‰´ã€‚  ä¸‹è½½åœ°å€ é‰´äºè¿™æœ¬ä¹¦å·²ç»å‘è¡Œä¸€å¹´åŠäº†äº†ï¼ŒåŸºäºçš„dockerç‰ˆæœ¬è¿˜æ˜¯1.2.0ï¼Œè€Œå¦‚ä»Šéƒ½åˆ°äº†1.13.0ï¼ˆdocker17.03çš„è€ç‰ˆæœ¬å·ï¼‰ï¼Œåº”è¯¥å¾ˆå°‘æœ‰äººä¹°äº†å§ï¼Œå¯ä»¥è¯´è¿™æœ¬ä¹¦çš„çº¸è´¨ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå·®ä¸å¤šäº†å§ã€‚å¦‚æœæœ‰äººæ„Ÿå…´è¶£å¯ä»¥ä¸‹è½½pdfç‰ˆæœ¬çœ‹çœ‹ï¼ŒDockeræºç è§£æ-æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾-å­™å®äº®è‘—-2015å¹´8æœˆï¼ˆå®Œæ•´æ–‡å­—ç‰ˆï¼Œå¤§å°25.86Mï¼‰ï¼ŒDockeræºç è§£æ-çœ‹äº‘æ•´ç†ç‰ˆï¼ˆæ–‡å­—ç‰ˆï¼Œæœ‰ç¼©ç•¥ï¼Œå¤§å°7.62Mï¼‰ã€‚
Out-of-date æœ‰ä¸€ç‚¹å¿…é¡»å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œè¿™æœ¬ä¹¦ä¸­çš„dockeræºç åˆ†ææ˜¯åŸºäºdocker1.2.0ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬çš„dockeræºç åœ¨githubä¸Šå·²ç»æ— æ³•ä¸‹è½½åˆ°äº†ï¼Œgithubä¸Šavailableçš„æœ€ä½ç‰ˆæœ¬çš„dockeræºç æ˜¯1.4.1ã€‚
 é¡ºä¾¿æ„Ÿå¹ä¸€å¥ï¼Œç§‘æŠ€è¡Œä¸šå‘å±•å®åœ¨å¤ªå¿«äº†ï¼Œå°¤å…¶æ˜¯äº’è”ç½‘ï¼Œä¸€æœ¬ä¹¦èƒ½è¿ç»­ç”¨ä¸Šä¸‰å¹´éƒ½ä¸è¿‡æ—¶ï¼Œå¦‚æœè¿™æ ·çš„è¯é‚£ä¹ˆè¿™é—¨æŠ€æœ¯ææ€•éƒ½å°±è¦è¢«æ·˜æ±°äº†å§ï¼Ÿ
 æ€»ä½“æ¶æ„ Dockeræ€»ä½“ä¸Šæ˜¯ç”¨çš„æ˜¯Client/Serveræ¨¡å¼ï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½å¯ä»¥é€šè¿‡RESTfulæ¥å£ä¼ é€’ã€‚
æ•´ä¸ªDockerè½¯ä»¶çš„æ¶æ„ä¸­å¯ä»¥åˆ†æˆä¸‰ä¸ªè§’è‰²ï¼š
 Daemonï¼šå¸¸é©»åå°è¿è¡Œçš„è¿›ç¨‹ï¼Œæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç®¡ç†dockerå®¹å™¨ã€‚ Clientï¼šå‘½ä»¤è¡Œç»ˆç«¯ï¼ŒåŒ…è£…å‘½ä»¤å‘é€APIè¯·æ±‚ã€‚ Engineï¼šçœŸæ­£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„åç«¯ç¨‹åºã€‚  ä»£ç ç»“æ„ Dockerçš„ä»£ç ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼Œåˆ†æˆçš„ç›®å½•æ¯”è¾ƒå¤šï¼Œæœ‰ä»¥ä¸‹è¿™äº›ï¼š
 apiï¼šå®šä¹‰APIï¼Œä½¿ç”¨äº†Swagger2.0è¿™ä¸ªå·¥å…·æ¥ç”ŸæˆAPIï¼Œé…ç½®æ–‡ä»¶åœ¨api/swagger.yaml builderï¼šç”¨æ¥build dockeré•œåƒçš„åŒ…ï¼Œçœ‹æ¥å†å²æ¯”è¾ƒæ‚ ä¹…äº† bundlesï¼šè¿™ä¸ªåŒ…æ˜¯åœ¨è¿›è¡Œdockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒæ­å»ºçš„æ—¶å€™ç”¨åˆ°çš„ï¼Œç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚ cliï¼šä½¿ç”¨cobraå·¥å…·ç”Ÿæˆçš„dockerå®¢æˆ·ç«¯å‘½ä»¤è¡Œè§£æå™¨ã€‚ clientï¼šæ¥æ”¶cliçš„è¯·æ±‚ï¼Œè°ƒç”¨RESTful APIä¸­çš„æ¥å£ï¼Œå‘serverç«¯å‘é€httpè¯·æ±‚ã€‚ cmdï¼šå…¶ä¸­åŒ…æ‹¬dockerå’Œdockerdä¸¤ä¸ªåŒ…ï¼Œä»–ä»¬åˆ†åˆ«åŒ…å«äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„mainå‡½æ•°å…¥å£ã€‚ containerï¼šå®¹å™¨çš„é…ç½®ç®¡ç†ï¼Œå¯¹ä¸åŒçš„platformé€‚é…ã€‚ contribï¼šè¿™ä¸ªç›®å½•åŒ…æ‹¬ä¸€äº›æœ‰ç”¨çš„è„šæœ¬ã€é•œåƒå’Œå…¶ä»–édocker coreä¸­çš„éƒ¨åˆ†ã€‚ daemonï¼šè¿™ä¸ªåŒ…ä¸­å°†docker deamonè¿è¡Œæ—¶çŠ¶æ€exposeå‡ºæ¥ã€‚ distributionï¼šè´Ÿè´£dockeré•œåƒçš„pullã€pushå’Œé•œåƒä»“åº“çš„ç»´æŠ¤ã€‚ dockerversionï¼šç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ docsï¼šæ–‡æ¡£ã€‚è¿™ä¸ªç›®å½•å·²ç»ä¸å†ç»´æŠ¤ï¼Œæ–‡æ¡£åœ¨å¦ä¸€ä¸ªä»“åº“é‡Œhttps://github.com/docker/docker.github.io/ã€‚ experimentalï¼šä»docker1.13.0ç‰ˆæœ¬èµ·å¼€å§‹å¢åŠ äº†å®éªŒç‰¹æ€§ã€‚ hackï¼šåˆ›å»ºdockerå¼€å‘ç¯å¢ƒå’Œç¼–è¯‘æ‰“åŒ…æ—¶ç”¨åˆ°çš„è„šæœ¬å’Œé…ç½®æ–‡ä»¶ã€‚ imageï¼šç”¨äºæ„å»ºdockeré•œåƒçš„ã€‚ integration-cliï¼šé›†æˆæµ‹è¯• layerï¼šç®¡ç† union file system driverä¸Šçš„read-onlyå’Œread-write mountsã€‚ libcontainerdï¼šè®¿é—®å†…æ ¸ä¸­çš„å®¹å™¨ç³»ç»Ÿè°ƒç”¨ã€‚ manï¼šç”Ÿæˆman pagesã€‚ migrateï¼šå°†è€ç‰ˆæœ¬çš„graphç›®å½•è½¬æ¢æˆæ–°çš„metadataã€‚ ociï¼šOpen Container Interfaceåº“ optsï¼šå‘½ä»¤è¡Œçš„é€‰é¡¹åº“ã€‚ pkgï¼š pluginï¼šdockeræ’ä»¶åç«¯å®ç°åŒ…ã€‚ profilesï¼šé‡Œé¢æœ‰apparmorå’Œseccompä¸¤ä¸ªç›®å½•ã€‚ç”¨äºå†…æ ¸è®¿é—®æ§åˆ¶ã€‚ projectï¼šé¡¹ç›®ç®¡ç†çš„ä¸€äº›è¯´æ˜æ–‡æ¡£ã€‚ referenceï¼šå¤„ç†docker storeä¸­é•œåƒçš„referenceã€‚ registryï¼šdocker registryçš„å®ç°ã€‚ restartmanagerï¼šå¤„ç†é‡å¯åçš„åŠ¨ä½œã€‚ runconfigï¼šé…ç½®æ ¼å¼è§£ç å’Œæ ¡éªŒã€‚ vendorï¼šå„ç§ä¾èµ–åŒ…ã€‚ volumeï¼šdocker volumeçš„å®ç°ã€‚  ä¸‹ä¸€ç¯‡å°†è®²è§£dockerçš„å„ä¸ªåŠŸèƒ½æ¨¡å—å’ŒåŸç†ã€‚</description>
    </item>
    
    <item>
      <title>Contiv Ultimate-Docker17.03CEä¸‹æ€ç§‘dockerç½‘ç»œæ’ä»¶contivè¶Ÿå‘ç»ˆæç‰ˆ</title>
      <link>http://rootsongjc.github.io/blogs/contiv-ultimate/</link>
      <pubDate>Fri, 17 Mar 2017 17:52:37 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/contiv-ultimate/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šå¹¿å·çŸ³ç‰Œæ¡¥ Aug 10,2014ï¼‰
å‰å‡ å¤©å†™çš„å‡ ç¯‡å…³äºContivçš„æ–‡ç« å·²ç»æŠŠå¼•å…¥å‘äº†ğŸ˜‚
ä»Šå¤©è¿™ç¯‡æ–‡ç« å°†å¸¦é¢†å¤§å®¶ç”¨æ­£ç¡®çš„å§¿åŠ¿ç¼–è¯‘å’Œæ‰“åŒ…ä¸€ä¸ªcontiv netpluginã€‚
 è¯·ä¸€å®šè¦åœ¨Linuxç¯å¢ƒä¸­ç¼–è¯‘ã€‚dockerä¸­ç¼–è¯‘ä¹Ÿä¼šæŠ¥é”™ï¼Œæœ€å¥½è¿˜æ˜¯æä¸ªè™šæ‹ŸğŸ”å§ï¼Œæœ€å¥½è¿˜æœ‰VPNèƒ½ç¿»å¢™ã€‚
 ç¯å¢ƒå‡†å¤‡ æˆ‘ä½¿ç”¨çš„æ˜¯docker17.03-CEã€å®‰è£…äº†open vSwitch(è¿™ä¸ªåŒ…redhatçš„æºé‡Œæ²¡æœ‰ï¼Œéœ€è¦è‡ªå·±çš„ç¼–è¯‘å®‰è£…)ï¼Œå¦‚æœä½ æ‡’å¾—ç¼–è¯‘å¯ä»¥ç”¨æˆ‘ç¼–è¯‘çš„rpmåŒ…ï¼Œç‚¹è¿™é‡Œä¸‹è½½ã€‚
ç¼–è¯‘ è¿™ä¸€æ­¥æ˜¯å¾ˆå®¹æ˜“å¤±è´¥çš„ï¼Œæœ‰äººæè¿‡issue-779
å…·ä½“æ­¥éª¤
 åˆ›å»ºä¸€ä¸ªlink /goé“¾æ¥åˆ°ä½ çš„GOPATHç›®å½•ï¼Œä¸‹é¢ç¼–è¯‘çš„æ—¶å€™è¦ç”¨ã€‚ å°†æºç çš„venderç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´åˆ°$GOPATH/srcç›®å½•ã€‚ æ‰§è¡Œç¼–è¯‘  åœ¨netpluginç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤èƒ½å¤Ÿç¼–è¯‘å‡ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
NET_CONTAINER_BUILD=1 make build  åœ¨ä½ çš„/$GOPATH/binç›®å½•ä¸‹åº”è¯¥ä¼šæœ‰å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š
contivk8s github-release godep golint misspell modelgen netcontiv netctl netmaster netplugin  âš ï¸ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ° æœ‰äº›åŒ…ä¸å­˜åœ¨æˆ–è€…éœ€è¦ç¿»å¢™ä¸‹è½½ã€‚
æ‰“åŒ… æˆ‘ä»¬å°†å…¶æ‰“åŒ…ä¸ºdocker pluginã€‚
Makefileé‡Œç”¨äºåˆ›å»ºplugin rootfsçš„å‘½ä»¤æ˜¯ï¼š
host-pluginfs-create: @echo dev: creating a docker v2plugin rootfs ... sh scripts/v2plugin_rootfs.sh  v2plugin_rootfs.shè¿™ä¸ªè„šæœ¬çš„å†…å®¹ï¼š
#!/bin/bash # Script to create the docker v2 plugin # run this script from contiv/netplugin directory echo &amp;quot;Creating rootfs for v2plugin &amp;quot;, ${CONTIV_V2PLUGIN_NAME} cat install/v2plugin/config.</description>
    </item>
    
    <item>
      <title>Docker17.03-CEæ’ä»¶å¼€å‘-ä¸¾ä¸ªğŸŒ°</title>
      <link>http://rootsongjc.github.io/blogs/docker-plugin-develop/</link>
      <pubDate>Wed, 15 Mar 2017 13:57:26 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-plugin-develop/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ­å·å´å±±æ­¥é“æ—çš„å¢™å£ Oct 16,2016ï¼‰
 å½“ä½ çœ‹åˆ°è¿™ç¯‡æ–‡ç« æ—¶ï¼Œå¦‚æœä½ ä¹Ÿæ­£åœ¨è¿›è¡Œdocker1.13+ç‰ˆæœ¬ä¸‹çš„pluginå¼€å‘ï¼Œæ­å–œä½ ä¹Ÿå…¥å‘äº†ï¼Œå¦‚æœä½ è¶Ÿå‡ºå‘ï¼Œéº»çƒ¦å‘Šè¯‰ä½ çš„æ–¹æ³•ï¼Œæ„Ÿæ©ä¸å°½ğŸ™
 çœ‹äº†æ–‡ç« åä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œå®˜ç½‘ä¸Šçš„å¯èƒ½æ˜¯ä¸ªå‡ğŸŒ°ã€‚è™½ç„¶å®˜ç½‘ä¸Šçš„æ–‡æ¡£å†™çš„æœ‰ç‚¹ä¸å¯¹ï¼Œä¸è¿‡ä½ ä½¿ç”¨docker-ssh-volumeçš„å¼€æºä»£ç è‡ªå·±å»æ„å»ºpluginçš„è¿˜æ˜¯å¯ä»¥æˆåŠŸçš„ï¼
Docker pluginå¼€å‘æ–‡æ¡£ é¦–å…ˆdockerå®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªdocker legacy pluginæ–‡æ¡£ï¼Œè¿™ç¯‡æ–‡ç« åŸºæœ¬å°±æ˜¯å‘Šè¯‰ä½ dockerç›®å‰æ”¯æŒå“ªäº›æ’ä»¶ï¼Œç½—åˆ—äº†ä¸€ç³»åˆ—è¿æ¥ï¼Œä¸è¿‡å¯¹ä¸èµ·ï¼Œè¿™äº›ä¸æ˜¯dockerå®˜æ–¹æ’ä»¶ï¼Œæœ‰é—®é¢˜å»æ‰¾å®ƒä»¬çš„å¼€å‘è€…å»å§ğŸ˜‚
Docker pluginè²Œä¼¼å¼€å§‹ä½¿ç”¨äº†æ–°çš„v2 pluginäº†ï¼Œlegacyç‰ˆæœ¬çš„pluginå¯ä»¥èƒ½åœ¨åæœŸè¢«åºŸå¼ƒã€‚
ä»dockerçš„æºç plugin/store.goä¸­å¯ä»¥çœ‹åˆ°ï¼š
/* allowV1PluginsFallback determines daemon&#39;s support for V1 plugins. * When the time comes to remove support for V1 plugins, flipping * this bool is all that will be needed. */ const allowV1PluginsFallback bool = true /* defaultAPIVersion is the version of the plugin API for volume, network, IPAM and authz. This is a very stable API.</description>
    </item>
    
    <item>
      <title>Docker 17.03-CE create pluginæºç è§£æ</title>
      <link>http://rootsongjc.github.io/blogs/docker-create-plugin/</link>
      <pubDate>Wed, 15 Mar 2017 12:09:26 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-create-plugin/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šæ•…å®« Apr 3,2016ï¼‰
ç»§ç»­ä¸Šä¸€ç¯‡Docker17.03-CEæ’ä»¶å¼€å‘çš„ğŸŒ°ï¼Œä»Šå¤©æ¥çœ‹ä¸‹docker create pluginçš„æºç ã€‚
cli/command/plugin/create.go
Dockerå‘½ä»¤è¡Œdocker plugin createè°ƒç”¨çš„ï¼Œä½¿ç”¨çš„æ˜¯cobraï¼Œè¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·å¼€å‘åŒ…å¾ˆå¥½ç”¨ï¼Œæ¨èä¸‹ã€‚
æ‰§è¡Œè¿™ä¸¤ä¸ªå‡½æ•°
func newCreateCommand(dockerCli *command.DockerCli) *cobra.Command //è°ƒç”¨ä¸‹é¢çš„å‡½æ•°ï¼Œæ‹¼è£…æˆURLè°ƒç”¨RESTful APIæ¥å£ func runCreate(dockerCli *command.DockerCli, options pluginCreateOptions) error { ... if err = dockerCli.Client().PluginCreate(ctx, createCtx, createOptions); err != nil { return err } ... }  åœ¨api/server/router/plugin/plugin_routes.goä¸­
func (pr *pluginRouter) createPlugin(ctx context.Context, w http.ResponseWriter, r *http.Request, vars map[string]string) error { ... if err := pr.backend.CreateFromContext(ctx, r.Body, options); err != nil { return err } ... }  createPluginè¿™ä¸ªæ–¹æ³•å®šä¹‰åœ¨api/server/route/plugin/backen.</description>
    </item>
    
    <item>
      <title>Docker v.s Kubernetes part2</title>
      <link>http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part2/</link>
      <pubDate>Fri, 10 Mar 2017 22:06:32 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part2/</guid>
      <description> ï¼ˆé¢˜å›¾ï¼šæ²³åŒ—æ‰¿å¾·å…´éš†å¿é›¾çµå±±äº¬éƒŠæœ€ä½³æ˜Ÿç©ºæ‹æ‘„ç‚¹ July 9,2016)
æœ¬æ–‡æ˜¯Docker v.s Kubernetesç¬¬äºŒç¯‡ï¼Œç»­æ¥ä¸Šæ–‡Docker v.s Kuberntes Part1ã€‚
Kubernetesæ˜¯å…¸å‹çš„Master/Slaveæ¶æ„æ¨¡å¼ï¼Œæœ¬æ–‡ç®€è¦çš„ä»‹ç»kubenetesçš„æ¶æ„å’Œç»„ä»¶æ„æˆã€‚
Kubernetesæ ¸å¿ƒæ¶æ„ masterèŠ‚ç‚¹  apiserverï¼šä½œä¸ºkubernetesç³»ç»Ÿçš„å…¥å£ï¼Œå°è£…äº†æ ¸å¿ƒå¯¹è±¡çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä»¥RESTFulæ¥å£æ–¹å¼æä¾›ç»™å¤–éƒ¨å®¢æˆ·å’Œå†…éƒ¨ç»„ä»¶è°ƒç”¨ã€‚å®ƒç»´æŠ¤çš„RESTå¯¹è±¡å°†æŒä¹…åŒ–åˆ°etcdï¼ˆä¸€ä¸ªåˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§çš„key/valueå­˜å‚¨ï¼‰ã€‚ schedulerï¼šè´Ÿè´£é›†ç¾¤çš„èµ„æºè°ƒåº¦ï¼Œä¸ºæ–°å»ºçš„Podåˆ†é…æœºå™¨ã€‚è¿™éƒ¨åˆ†å·¥ä½œåˆ†å‡ºæ¥å˜æˆä¸€ä¸ªç»„ä»¶ï¼Œæ„å‘³ç€å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢æˆå…¶ä»–çš„è°ƒåº¦å™¨ã€‚ controller-managerï¼šè´Ÿè´£æ‰§è¡Œå„ç§æ§åˆ¶å™¨ï¼Œç›®å‰æœ‰ä¸¤ç±»ï¼š  endpoint-controllerï¼šå®šæœŸå…³è”serviceå’ŒPod(å…³è”ä¿¡æ¯ç”±endpointå¯¹è±¡ç»´æŠ¤)ï¼Œä¿è¯serviceåˆ°Podçš„æ˜ å°„æ€»æ˜¯æœ€æ–°çš„ã€‚ replication-controllerï¼šå®šæœŸå…³è”replicationControllerå’ŒPodï¼Œä¿è¯replicationControllerå®šä¹‰çš„å¤åˆ¶æ•°é‡ä¸å®é™…è¿è¡ŒPodçš„æ•°é‡æ€»æ˜¯ä¸€è‡´çš„ã€‚   nodeèŠ‚ç‚¹  kubeletï¼šè´Ÿè´£ç®¡æ§dockerå®¹å™¨ï¼Œå¦‚å¯åŠ¨/åœæ­¢ã€ç›‘æ§è¿è¡ŒçŠ¶æ€ç­‰ã€‚å®ƒä¼šå®šæœŸä»etcdè·å–åˆ†é…åˆ°æœ¬æœºçš„Podï¼Œå¹¶æ ¹æ®Podä¿¡æ¯å¯åŠ¨æˆ–åœæ­¢ç›¸åº”çš„å®¹å™¨ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿä¼šæ¥æ”¶apiserverçš„HTTPè¯·æ±‚ï¼Œæ±‡æŠ¥Podçš„è¿è¡ŒçŠ¶æ€ã€‚ proxyï¼šè´Ÿè´£ä¸ºPodæä¾›ä»£ç†ã€‚å®ƒä¼šå®šæœŸä»etcdè·å–æ‰€æœ‰çš„serviceï¼Œå¹¶æ ¹æ®serviceä¿¡æ¯åˆ›å»ºä»£ç†ã€‚å½“æŸä¸ªå®¢æˆ·Podè¦è®¿é—®å…¶ä»–Podæ—¶ï¼Œè®¿é—®è¯·æ±‚ä¼šç»è¿‡æœ¬æœºproxyåšè½¬å‘ã€‚  Kubernetesç»„ä»¶è¯¦ç»†ä»‹ç» etcd è™½ç„¶ä¸æ˜¯Kubernetesçš„ç»„ä»¶ä½†æ˜¯æœ‰å¿…è¦æä¸€ä¸‹ï¼Œetcdæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ååŒæ•°æ®åº“ï¼ŒåŸºäºGoè¯­è¨€å¼€å‘ï¼ŒCoreOSå…¬å¸å‡ºå“ï¼Œä½¿ç”¨raftä¸€è‡´æ€§ç®—æ³•ååŒã€‚Kubernetesçš„ä¸»æ•°æ®åº“ï¼Œåœ¨å®‰è£…kubernetesä¹‹å‰å°±è¦å…ˆå®‰è£…å®ƒï¼Œå¾ˆå¤šå¼€æºä¸‹é¡¹ç›®éƒ½ç”¨åˆ°ï¼Œè€ç‰ˆæœ¬çš„docker swarmä¹Ÿç”¨åˆ°äº†å®ƒã€‚ç›®å‰ä¸»è¦ä½¿ç”¨çš„æ˜¯2.7.xç‰ˆæœ¬ï¼Œ3.0+ç‰ˆæœ¬çš„APIå˜åŒ–å¤ªå¤§ã€‚
APIServer APIServerè´Ÿè´£å¯¹å¤–æä¾›kubernetes APIæœåŠ¡ï¼Œå®ƒè¿è¡Œåœ¨masterèŠ‚ç‚¹ä¸Šã€‚ä»»ä½•å¯¹èµ„æºçš„å¢åˆ æ”¹æŸ¥éƒ½è¦äº¤ç»™APIServerå¤„ç†åæ‰èƒ½æäº¤ç»™etcdã€‚APIServeræ€»ä½“ä¸Šç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šHTTP/HTTPSæœåŠ¡å’Œä¸€äº›åŠŸèƒ½æ€§æ’ä»¶ã€‚è¿™äº›åŠŸèƒ½æ€§æ’ä»¶åˆåˆ†ä¸ºä¸¤ç§ï¼šä¸€éƒ¨åˆ†ä¸åº•å±‚IaaSå¹³å°ï¼ˆCloud Provideï¼‰ç›¸å…³ï¼›å¦ä¸€éƒ¨åˆ†ä¸èµ„æºç®¡ç†æ§åˆ¶ï¼ˆAdmission Controlï¼‰ç›¸å…³ã€‚
Scheduler Schedulerçš„ä½œç”¨æ˜¯æ ¹æ®ç‰¹å®šçš„è°ƒåº¦ç®—æ³•å°†podè°ƒåº¦åˆ°nodeèŠ‚ç‚¹ä¸Šï¼Œè¿™ä¸€è¿‡ç¨‹ä¹Ÿè¢«ç§°ä¸ºç»‘å®šã€‚Schedulerè°ƒåº¦å™¨çš„è¾“å…¥æ˜¯å¾…è°ƒåº¦çš„podå’Œå¯ç”¨çš„å·¥ä½œèŠ‚ç‚¹åˆ—è¡¨ï¼Œè¾“å‡ºåˆ™æ˜¯ä¸€ä¸ªå·²ç»ç»‘å®šäº†podçš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ˜¯é€šè¿‡è°ƒåº¦ç®—æ³•åœ¨å·¥ä½œèŠ‚ç‚¹åˆ—è¡¨ä¸­é€‰æ‹©çš„æœ€ä¼˜èŠ‚ç‚¹ã€‚
å·¥ä½œèŠ‚ç‚¹ä»å“ªé‡Œæ¥ï¼Ÿå·¥ä½œèŠ‚ç‚¹å¹¶ä¸æ˜¯ç”±Kubernetesåˆ›å»ºï¼Œå®ƒæ˜¯ç”±IaaSå¹³å°åˆ›å»ºï¼Œæˆ–è€…å°±æ˜¯ç”±ç”¨æˆ·ç®¡ç†çš„ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºã€‚ä½†æ˜¯Kubernetesä¼šåˆ›å»ºä¸€ä¸ªNodeå¯¹è±¡ï¼Œç”¨æ¥æè¿°è¿™ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚æè¿°çš„å…·ä½“ä¿¡æ¯ç”±åˆ›å»ºNodeå¯¹è±¡çš„é…ç½®æ–‡ä»¶ç»™å‡ºã€‚ä¸€æ—¦ç”¨æˆ·åˆ›å»ºèŠ‚ç‚¹çš„è¯·æ±‚è¢«æˆåŠŸå¤„ç†ï¼ŒKubernetesåˆä¼šç«‹å³åœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªnodeå¯¹è±¡ï¼Œå†å»æ£€æŸ¥è¯¥èŠ‚ç‚¹çš„å¥åº·çŠ¶å†µã€‚åªæœ‰é‚£äº›å½“å‰å¯ç”¨çš„nodeæ‰ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹å¹¶å…è®¸podè°ƒåº¦åˆ°ä¸Šé¢è¿è¡Œã€‚
å·¥ä½œèŠ‚ç‚¹å¯ä»¥é€šè¿‡èµ„æºé…ç½®æ–‡ä»¶æˆ–è€…kubectlå‘½ä»¤è¡Œå·¥å…·æ¥åˆ›å»ºã€‚Kubernetesä¸»è¦ç»´æŠ¤å·¥ä½œèŠ‚ç‚¹çš„ä¸¤ä¸ªå±æ€§ï¼šspecå’Œstatusæ¥æè¿°ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹çš„æœŸæœ›çŠ¶æ€å’Œå½“å‰çŠ¶æ€ã€‚å…¶ä¸­ï¼Œæ‰€è°“çš„å½“å‰çŠ¶æ€ä¿¡æ¯ç”±3ä¸ªä¿¡æ¯ç»„æˆï¼šHostIpã€NodePhaseå’ŒNode Conditionã€‚
å·¥ä½œèŠ‚ç‚¹çš„åŠ¨æ€ç»´æŠ¤è¿‡ç¨‹ä¾é Node Controlleræ¥å®Œæˆï¼Œå®ƒæ˜¯Kubernetes Controller Managerä¸‹å±çš„ä¸€ä¸ªæ§åˆ¶å™¨ã€‚å®ƒä¼šä¸€ç›´ä¸æ–­çš„æ£€æŸ¥Kuberneteså·²çŸ¥çš„æ¯å°nodeèŠ‚ç‚¹æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œå¦‚æœä¸€ä¸ªä¹‹å‰å·²ç»å¤±è´¥çš„èŠ‚ç‚¹åœ¨è¿™ä¸ªæ£€æŸ¥å¾ªç¯ä¸­è¢«æ£€æŸ¥ä¸ºå¯ä»¥å·¥ä½œçš„ï¼Œé‚£ä¹ˆNode Controllerä¼šæŠŠè¿™ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°å·¥ä½œèŠ‚ç‚¹ä¸­ï¼ŒNode Controllerä¼šä»å·¥ä½œèŠ‚ç‚¹ä¸­åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ã€‚
Controller Manager Controller Managerè¿è¡Œåœ¨é›†ç¾¤çš„MasterèŠ‚ç‚¹ä¸Šï¼Œæ˜¯åŸºäºpod APIçš„ä¸€ä¸ªç‹¬ç«‹æœåŠ¡ï¼Œå®ƒé‡ç‚¹å®ç°service Endpointï¼ˆæœåŠ¡ç«¯ç‚¹ï¼‰çš„åŠ¨æ€æ›´æ–°ã€‚ç®¡ç†ç€Kubernetesé›†ç¾¤ä¸­å„ç§æ§åˆ¶èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬replication Controllerå’Œnode Controllerã€‚
ä¸APIServerç›¸æ¯”ï¼ŒAPIServerè´Ÿè´£æ¥å—ç”¨æˆ·è¯·æ±‚å¹¶åˆ›å»ºå¯¹åº”çš„èµ„æºï¼Œè€ŒController Manageråœ¨ç³»ç»Ÿä¸­æ‰®æ¼”çš„è§’è‰²æ˜¯åœ¨ä¸€æ—æ—é»˜é»˜çš„ç®¡æ§è¿™äº›èµ„æºï¼Œç¡®ä¿ä»–ä»¬æ°¸è¿œä¿æŒåœ¨é¢„æœŸçš„çŠ¶æ€ã€‚å®ƒé‡‡ç”¨å„ç§ç®¡ç†å™¨å®šæ—¶çš„å¯¹podã€èŠ‚ç‚¹ç­‰èµ„æºè¿›è¡Œé¢„è®¾çš„æ£€æŸ¥ï¼Œç„¶ååˆ¤æ–­å‡ºäºé¢„æœŸçš„æ˜¯å¦ä¸€è‡´ï¼Œè‹¥ä¸ä¸€è‡´ï¼Œåˆ™é€šçŸ¥APIServeré‡‡å–è¡ŒåŠ¨ï¼Œæ¯”å¦‚é‡å¯ã€è¿ç§»ã€åˆ é™¤ç­‰ã€‚
kubelet kubeletç»„ä»¶å·¥ä½œåœ¨Kubernetesçš„nodeä¸Šï¼Œè´Ÿè´£ç®¡ç†å’Œç»´æŠ¤åœ¨è¿™å°ä¸»æœºä¸Šè¿è¡Œç€çš„æ‰€æœ‰å®¹å™¨ã€‚ kubeletä¸cAdvisoräº¤äº’æ¥æŠ“å–dockerå®¹å™¨å’Œä¸»æœºçš„èµ„æºä¿¡æ¯ã€‚ kubeletåƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒåŒ…æ‹¬å®¹å™¨åƒåœ¾å›æ”¶å’Œé•œåƒåƒåœ¾å›æ”¶ã€‚ kubeletå·¥ä½œèŠ‚ç‚¹çŠ¶æ€åŒæ­¥ã€‚
kube-proxy kube-proxyæä¾›ä¸¤ç§åŠŸèƒ½:
 æä¾›ç®—æ³•å°†å®¢æœç«¯æµé‡è´Ÿè½½å‡è¡¡åˆ°serviceå¯¹åº”çš„ä¸€ç»„åç«¯podã€‚ ä½¿ç”¨etcdçš„watchæœºåˆ¶ï¼Œå®ç°æœåŠ¡å‘ç°åŠŸèƒ½ï¼Œç»´æŠ¤ä¸€å¼ ä»serviceåˆ°endpointçš„æ˜ å°„å…³ç³»ï¼Œä»è€Œä¿è¯åç«¯podçš„IPå˜åŒ–ä¸ä¼šå¯¹è®¿é—®è€…çš„è®¿é—®é€ æˆå½±å“ã€‚  </description>
    </item>
    
    <item>
      <title>Docker v.s Kubernetes part1</title>
      <link>http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part1/</link>
      <pubDate>Fri, 10 Mar 2017 21:09:47 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-vs-kubernetes-part1/</guid>
      <description> ï¼ˆé¢˜å›¾ï¼šæ­å·è¥¿æ¹– Oct 16,2016ï¼‰
å‰è¨€ è¿™ä¸€ç³»åˆ—æ–‡ç« æ˜¯å¯¹æ¯”kubernetes å’Œdockerä¸¤è€…ä¹‹é—´çš„å·®å¼‚ï¼Œé‰´äºæˆ‘ä¹‹å‰ä»docker1.10.3èµ·å¼€å§‹ä½¿ç”¨dockerï¼Œå¯¹åŸç”Ÿdockerçš„äº†è§£æ¯”è¾ƒå¤šï¼Œæœ€è¿‘åˆæ­£åœ¨çœ‹Kunernetesæƒå¨æŒ‡å—ï¼ˆç¬¬äºŒç‰ˆï¼‰è¿™æœ¬ä¹¦ï¼ˆP.Sæ„Ÿè°¢ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾çš„ç¼–è¾‘æœ‹å‹èµ é€æ­¤ä¹¦ï¼‰ã€‚è¿™ç³»åˆ—æ–‡ç« ä¸æ˜¯ä¸ºäº†æ¯”è¾ƒå­°ä¼˜å­°åŠ£ï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ã€‚
æ­¤ç³»åˆ—æ–‡ç« ä¸­æ‰€è¯´çš„dockeræŒ‡çš„æ˜¯*17.03-ce*ç‰ˆæœ¬ã€‚
æ¦‚å¿µæ€§çš„å·®åˆ« Kubernetes
äº†è§£ä¸€æ ·ä¸œè¥¿é¦–å…ˆè¦é«˜å±‹å»ºç“´çš„äº†è§£å®ƒçš„æ¦‚å¿µï¼ŒkubernetesåŒ…æ‹¬ä»¥ä¸‹å‡ ç§èµ„æºå¯¹è±¡ï¼š
 Pod Service Volume Namespace ReplicaSet Deployment StatefulSet DaemonSet Job  Docker
Dockerçš„èµ„æºå¯¹è±¡ç›¸å¯¹äºkubernetesæ¥è¯´å°±ç®€å•å¤šäº†ï¼Œåªæœ‰ä»¥ä¸‹å‡ ä¸ªï¼š
 Service Node Stack Docker  å°±è¿™ä¹ˆç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ª*docker-compose.yml*å³å¯ä»¥å¯åŠ¨ä¸€ç³»åˆ—æœåŠ¡ã€‚å½“ç„¶ç®€å•çš„å¥½å¤„æ˜¯ä¾¿äºç†è§£å’Œç®¡ç†ï¼Œä½†æ˜¯åœ¨åŠŸèƒ½æ–¹é¢å°±æ²¡æœ‰kubernetesé‚£ä¹ˆå¼ºå¤§äº†ã€‚
åŠŸèƒ½æ€§å·®åˆ«  Kubernetes èµ„æºé™åˆ¶ CPU 100måƒåˆ†ä¹‹ä¸€æ ¸ä¸ºå•ä½ï¼Œç»å¯¹å€¼ï¼Œrequests å’Œlimitsï¼Œè¶…è¿‡è¿™ä¸ªå€¼å¯èƒ½è¢«æ€æ‰ï¼Œèµ„æºé™åˆ¶åŠ›åº¦æ¯”dockeræ›´ç»†ã€‚ Podä¸­æœ‰ä¸ªæœ€åº•å±‚çš„pause å®¹å™¨ï¼Œå…¶ä»–ä¸šåŠ¡å®¹å™¨å…±ç”¨ä»–çš„IPï¼Œdockerå› ä¸ºæ²¡æœ‰è¿™å±‚æ¦‚å¿µï¼Œæ‰€ä»¥æ²¡æ³•å…±ç”¨IPï¼Œè€Œæ˜¯ä½¿ç”¨overlayç½‘ç»œåŒå¤„äºä¸€ä¸ªç½‘ç»œé‡Œæ¥é€šä¿¡ã€‚ Kubernetesåœ¨rcä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’é…ç½®ï¼ˆ1.3ç‰ˆæœ¬æ˜¯è¿™æ ·çš„ï¼Œåç»­ç‰ˆæœ¬è¿˜æ²¡æœ‰ç ”ç©¶è¿‡ï¼‰ Kuberentes Label å¯ä»¥åœ¨å¼€å§‹å’ŒåŠ¨æ€çš„æ·»åŠ ä¿®æ”¹ï¼Œæ‰€æœ‰çš„èµ„æºå¯¹è±¡éƒ½æœ‰ï¼Œè¿™ä¸€ç‚¹dockerä¹Ÿæœ‰ï¼Œä½†æ˜¯èµ„æºè°ƒåº¦å› ä¸ºæ²¡æœ‰kubernetesé‚£ä¹ˆå±‚çº§ï¼Œæ‰€æœ‰è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒå¼±ä¸€äº›ã€‚ Kuberneteså¯¹è±¡é€‰æ‹©æœºåˆ¶ç»§ç»­é€šè¿‡label selectorï¼Œç”¨äºå¯¹è±¡è°ƒåº¦ã€‚ Kubernetesä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„é•œåƒï¼Œå«åšgoogle_containers/pauseï¼Œè¿™ä¸ªé•œåƒæ˜¯ç”¨æ¥å®ç°Podæ¦‚å¿µçš„ã€‚ HPA horizontal pod autoscaling æ¨ªå‘ç§»åŠ¨æ‰©å®¹ï¼Œä¹Ÿæ˜¯ä¸€ç§èµ„æºå¯¹è±¡ï¼Œæ ¹æ®è´Ÿè½½å˜åŒ–æƒ…å†µé’ˆå¯¹æ€§çš„è°ƒæ•´podç›®æ ‡å‰¯æœ¬æ•°ã€‚ Kubernetesä¸­æœ‰ä¸‰ä¸ªIPï¼ŒNode,Pod,Cluster IPçš„å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œdockerä¸­æ²¡æœ‰Cluster IPçš„æ¦‚å¿µã€‚ æŒä¹…åŒ–å­˜å‚¨ï¼Œåœ¨Kubernetesä¸­æœ‰Persistent volume åªèƒ½æ˜¯ç½‘ç»œå­˜å‚¨ï¼Œä¸å±äºä»»ä½•nodeï¼Œç‹¬ç«‹äºpodä¹‹å¤–ï¼Œè€Œdockeråªèƒ½ä½¿ç”¨volume pluginã€‚ å¤šç§Ÿæˆ·ç®¡ç†ï¼Œkubernetesä¸­æœ‰`Namespaceï¼Œdockeræš‚æ—¶æ²¡æœ‰å¤šç§Ÿæˆ·ç®¡ç†åŠŸèƒ½ã€‚  æ€»ä½“æ¥è¯´Dockeræ¶æ„æ›´åŠ ç®€å•ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šçš„é…ç½®ï¼Œåªéœ€è¦æ¯ä¸ªç»“ç‚¹éƒ½å®‰è£…dockerå³å¯ï¼Œè°ƒåº¦å’Œç®¡ç†åŠŸèƒ½æ²¡kubernetesé‚£ä¹ˆå¤æ‚ã€‚ä½†æ˜¯kubernetesæœ¬èº«å°±æ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®ä¸­å¿ƒç®¡ç†å·¥å…·ï¼Œä¸ä»…å¯ä»¥ç”¨æ¥ç®¡ç†dockerï¼Œ*pod*è¿™ä¸ªæ¦‚å¿µé‡Œå°±å¯ä»¥è¿è¡Œä¸ä»…æ˜¯dockeräº†ã€‚
 ä»¥åçš„æ–‡ç« ä¸­å°†ç»“åˆdockerç€é‡è®²Kubernetesï¼ŒåŸºäº1.3ç‰ˆæœ¬ã€‚
 </description>
    </item>
    
    <item>
      <title>Contivå…¥å‘æŒ‡å—-v2plugin</title>
      <link>http://rootsongjc.github.io/blogs/contiv-v2plugin/</link>
      <pubDate>Fri, 10 Mar 2017 11:51:09 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/contiv-v2plugin/</guid>
      <description>(é¢˜å›¾ï¼šä¸Šæµ·äº¤é€šå¤§å­¦ Oct 22,2016)
ç»§ç»­è¶Ÿæ˜¨å¤©æŒ–çš„å‘ã€‚
æ˜¨å¤©çš„issue-776å·²ç»å¾—åˆ°@gkvijayçš„å›å¤ï¼ŒåŸæ¥æ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…contiv/v2pluginçš„ç¼˜æ•…ï¼Œæ‰€ä»¥create contiv networkå¤±è´¥ï¼Œæˆ‘éœ€è¦è‡ªå·±buildä¸€ä¸ªdocker pluginã€‚
æŸ¥çœ‹ä¸‹è¿™ä¸ªcommité‡Œé¢æœ‰build v2pluginçš„è„šæœ¬æ›´æ”¹ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥buildè‡ªå·±çš„v2pluginã€‚
å‰æä½ éœ€è¦å…ˆbuildå‡ºnetctlã€netmasterã€netpluginä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¿å­˜åˆ°binç›®å½•ä¸‹ï¼Œå¦‚æœä½ æ²¡è‡ªå·±buildç›´æ¥ä¸‹è½½releaseé‡Œé¢çš„æ–‡ä»¶ä¿å­˜è¿›å»ä¹Ÿè¡Œã€‚
ç¼–è¯‘v2pluginæ’ä»¶ ä¿®æ”¹config.jsonæ’ä»¶é…ç½®æ–‡ä»¶
{ &amp;quot;manifestVersion&amp;quot;: &amp;quot;v0&amp;quot;, &amp;quot;description&amp;quot;: &amp;quot;Contiv network plugin for Docker&amp;quot;, &amp;quot;documentation&amp;quot;: &amp;quot;https://contiv.github.io&amp;quot;, &amp;quot;entrypoint&amp;quot;: [&amp;quot;/startcontiv.sh&amp;quot;], &amp;quot;network&amp;quot;: { &amp;quot;type&amp;quot;: &amp;quot;host&amp;quot; }, &amp;quot;env&amp;quot;: [ { &amp;quot;Description&amp;quot;: &amp;quot;To enable debug mode, set to &#39;-debug&#39;&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;dbg_flag&amp;quot;, &amp;quot;Settable&amp;quot;: [ &amp;quot;value&amp;quot; ], &amp;quot;Value&amp;quot;: &amp;quot;-debug&amp;quot; }, { &amp;quot;Description&amp;quot;: &amp;quot;VLAN uplink interface used by OVS&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;iflist&amp;quot;, &amp;quot;Settable&amp;quot;: [ &amp;quot;value&amp;quot; ], &amp;quot;Value&amp;quot;: &amp;quot;&amp;quot; }, { &amp;quot;Description&amp;quot;: &amp;quot;Etcd or Consul cluster store url&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;cluster_store&amp;quot;, &amp;quot;Settable&amp;quot;: [ &amp;quot;value&amp;quot; ], &amp;quot;Value&amp;quot;: &amp;quot;etcd://172.</description>
    </item>
    
    <item>
      <title>Contivå…¥å‘æŒ‡å—-è¯•ç”¨å…¨è®°å½•</title>
      <link>http://rootsongjc.github.io/blogs/contiv-tryout/</link>
      <pubDate>Thu, 09 Mar 2017 14:23:04 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/contiv-tryout/</guid>
      <description>(é¢˜å›¾ï¼šå±±ä¸œè£æˆæ»¨æµ·é£åŠ›å‘ç”µåœº Jan 31,2017ï¼‰
å…³äºcontivçš„ä»‹ç»è¯·çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« Contiv Introã€‚
å¼€å‘ç¯å¢ƒä½¿ç”¨Vagrantæ­å»ºï¼Œæ˜¨å¤©è¯•ç”¨äº†ä¸‹ï¼ŒçœŸä¸çŸ¥é“å®ƒä»¬æ˜¯æ€ä¹ˆæƒ³çš„ï¼Œå³ç„¶æ˜¯dockeræ’ä»¶ä¸ºå•¥ä¸ç›´æ¥åœ¨dockerä¸­å¼€å‘å‘¢ï¼Œæˆ‘æœ‰ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•æ­å»ºdockerå¼€å‘ç¯å¢ƒï¼Œå¯ä»¥åœ¨dockerä¸­å¼€å‘dockerï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ¥å¼€å‘contivå•ŠğŸ˜„ï¼Œåªè¦ä¸‹è½½ä¸€ä¸ªdockeré•œåƒdockercore/docker:latestå³å¯ï¼Œä¸è¿‡æœ‰ç‚¹å¤§2.31Gï¼Œä½¿ç”¨é˜¿é‡Œäº‘çš„mirrorä¸‹è½½å€’æ˜¯ä¹Ÿåˆ’ç®—ï¼Œæ€»æ¯”ä½ è‡ªå·±éƒ¨ç½²ä¸€ä¸ªå¼€å‘ç¯å¢ƒèŠ‚çœæ—¶é—´ã€‚
Contivæ¦‚å¿µè§£æ Contivç”¨äºç»™å®¹å™¨åˆ›å»ºå’Œåˆ†é…ç½‘è·¯ï¼Œå¯ä»¥åˆ›å»ºç­–ç•¥ç®¡ç†å®¹å™¨çš„å®‰å…¨ã€å¸¦å®½ã€ä¼˜å…ˆçº§ç­‰ï¼Œç›¸å½“äºä¸€ä¸ªSDNã€‚
Group æŒ‰å®¹å™¨æˆ–Podçš„åŠŸèƒ½ç»™å®¹å™¨åˆ†é…ç­–ç•¥ç»„ï¼Œé€šå¸¸æ˜¯æŒ‰ç…§å®¹å™¨/Podçš„labelæ¥åˆ†ç»„ï¼Œåº”ç”¨ç»„è·Ÿcontivçš„networkä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¯ä»¥å¾ˆå¤šåº”ç”¨ç»„å±äºåŒä¸€ä¸ªnetworkæˆ–IP subnetã€‚
Polices ç”¨æ¥é™å®šgroupçš„è¡Œä¸ºï¼Œcontivæ”¯æŒä¸¤ç§ç±»å‹çš„policyï¼š
 Bandwidth é™å®šåº”ç”¨ç»„çš„èµ„æºä½¿ç”¨ä¸Šé™ Isolation èµ„æºç»„çš„è®¿é—®æƒé™  Groupå¯ä»¥åŒæ—¶åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªpolicyï¼Œå½“æœ‰å®¹å™¨è°ƒåº¦åˆ°è¯¥groupé‡Œå°±ä¼šé€‚ç”¨è¯¥groupçš„policyã€‚
Network IPv4æˆ–IPv6ç½‘ç»œï¼Œå¯ä»¥é…ç½®subnetå’Œgatewayã€‚
Contivä¸­çš„ç½‘ç»œ
åœ¨contivä¸­å¯ä»¥é…ç½®ä¸¤ç§ç±»å‹çš„ç½‘ç»œ
 application networkï¼šå®¹å™¨ä½¿ç”¨çš„ç½‘ç»œ infrastructure networkï¼šhost namespaceçš„è™šæ‹Ÿç½‘ç»œï¼Œæ¯”å¦‚åŸºç¡€è®¾æ–½ç›‘æ§ç½‘ç»œ  ç½‘ç»œå°è£…
Contivä¸­æœ‰ä¸¤ç§ç±»å‹çš„ç½‘ç»œå°è£…
 Routedï¼šoverlay topologyå’ŒL3-routed BGP topology Bridgedï¼šlayer2 VLAN  Tenant Tenantæä¾›contivä¸­çš„namespaceéš”ç¦»ã€‚ä¸€ä¸ªtenantå¯ä»¥æœ‰å¾ˆå¤šä¸ªnetworkï¼Œæ¯ä¸ªnetworkéƒ½æœ‰ä¸ªsubnetã€‚è¯¥tenantä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒçš„ä»»æ„networkå’Œsubnetçš„IPã€‚
ç‰©ç†ç½‘ç»œä¸­çš„tenantç§°ä½œè™šæ‹Ÿè·¯ç”±è½¬å‘(VRF)ã€‚Contivä½¿ç”¨VLANå’ŒVXLAN IDæ¥å®ç°å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œè¿™å–å†³ä½ ä½¿ç”¨çš„æ˜¯layer2ã€layer3è¿˜æ˜¯Cisco ACIã€‚
Contivä¸‹è½½ Contivçš„ç¼–è¯‘å®‰è£…æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½githubä¸Šçš„release-1.0.0-beta.3-03-08-2017.18-51-20.UTCæ–‡ä»¶è§£å‹è·å¾—äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€‚
 https://github.com/contiv/install/blob/master/README.mdè¿™ä¸ªå®˜æ–¹æ–‡æ¡£å·²ç»è¿‡æ—¶ï¼Œä¸è¦çœ‹äº†ã€‚
 å¦‚æœè¯•ç”¨å¯ä»¥çš„è¯ï¼Œæˆ‘ä¼šåç»­å†™contivå¼€å‘ç¯å¢ƒæ­å»ºçš„æ–‡ç« ã€‚
è¿™ä¸ªreleaseæ˜¯2017å¹´3æœˆ8æ—¥å‘å¸ƒçš„ï¼Œå°±åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„å‰ä¸€å¤©ã€‚æœ‰ä¸ªæœ€é‡è¦çš„æ›´æ–°æ˜¯æ”¯æŒdocker1.13 swarm modeã€‚
å®˜æ–¹å®‰è£…æ–‡æ¡£
ä¸‹è½½è§£å‹åä¼šå¾—åˆ°å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š
 contivk8s k8sä¸“ç”¨çš„ contrib æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸ªnetctlçš„bashè„šæœ¬ netcontiv è¿™ä¸ªå‘½ä»¤å°±ä¸€ä¸ª-versioné€‰é¡¹ç”¨æ¥æŸ¥çœ‹contivçš„ç‰ˆæœ¬ğŸ˜“ netctl contivå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥é…ç½®ç½‘ç»œã€ç­–ç•¥ã€æœåŠ¡è´Ÿè½½å‡è¡¡ï¼Œä½¿ç”¨è¯´æ˜ netmaster contivçš„ä¸»èŠ‚ç‚¹æœåŠ¡ netplugin  ä¸‹é¢çš„å®‰è£…ä¸­ç”¨åˆ°çš„åªæœ‰netctlã€netmasterå’Œnetpluginè¿™ä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</description>
    </item>
    
    <item>
      <title>Contiv Intro</title>
      <link>http://rootsongjc.github.io/blogs/contiv-guide/</link>
      <pubDate>Thu, 09 Mar 2017 11:28:34 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/contiv-guide/</guid>
      <description>(é¢˜å›¾ï¼šåŒ—äº¬è“è‰²æ¸¯æ¹¾å¤œæ™¯ Feb 11,2017 å…ƒå®µèŠ‚)
Contivæ˜¯æ€ç§‘å¼€å‘çš„dockerç½‘ç»œæ’ä»¶ï¼Œä»2015å¹´å°±å¼€æºäº†ï¼Œä¸šç•Œé€šå¸¸æ‹¿å®ƒå’ŒCalicoæ¯”è¾ƒã€‚è²Œä¼¼Contivä»¥å‰è¿˜å¼€å‘è¿‡volume pluginï¼Œç°åœ¨é”€å£°åŒ¿è¿¹äº†ï¼Œåªæœ‰netpluginä»åœ¨æ´»è·ƒå¼€å‘ã€‚
å®¹å™¨ç½‘ç»œæ’ä»¶ Calico ä¸ Contiv Netpluginæ·±å…¥æ¯”è¾ƒ
è¿˜æœ‰ç¯‡æ–‡ç« è®²è§£äº†dockerç½‘ç»œæ–¹æ¡ˆçš„æ”¹è¿›
Contiv Netplugin ç®€ä»‹ Contiv Netplugin æ˜¯æ¥è‡ªæ€ç§‘çš„è§£å†³æ–¹æ¡ˆã€‚ç¼–ç¨‹è¯­è¨€ä¸º Goã€‚å®ƒåŸºäº OpenvSwitchï¼Œä»¥æ’ä»¶åŒ–çš„å½¢å¼æ”¯æŒå®¹å™¨è®¿é—®ç½‘ç»œï¼Œæ”¯æŒ VLANï¼ŒVxlanï¼Œå¤šç§Ÿæˆ·ï¼Œä¸»æœºè®¿é—®æ§åˆ¶ç­–ç•¥ç­‰ã€‚ä½œä¸ºæ€ç§‘æ•´ä½“æ”¯æŒå®¹å™¨åŸºç¡€è®¾æ–½contivé¡¹ç›®çš„ç½‘ç»œéƒ¨åˆ†ï¼Œæœ€å¤§çš„äº®ç‚¹åœ¨äºå®¹å™¨è¢«èµ‹äºˆäº† SDN èƒ½åŠ›ï¼Œå®ç°å¯¹å®¹å™¨æ›´ç»†ç²’åº¦ï¼Œæ›´ä¸°å¯Œçš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚å¦å¤–ï¼Œå¯¹ Docker CNM ç½‘ç»œæ¨¡å‹çš„æ”¯æŒï¼Œå¹¶å†…ç½®äº† IPAM æ¥å£ï¼Œä¸ä»…ä»…æä¾›äº†ä¸€å®¹å™¨ä¸€ IPï¼Œè€Œä¸”å®¹å™¨çš„ç½‘ç»œä¿¡æ¯è¢«è®°å½•çš„å®¹å™¨é…ç½®ä¸­ï¼Œä¼´éšç€å®¹å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå‡ä½å› ä¸ºçŠ¶æ€ä¸åŒæ­¥é€ æˆç½‘ç»œä¿¡æ¯ä¸¢å¤±çš„é£é™©ã€‚æœ‰åˆ«äº CNIï¼Œè¿™ç§å†…èšåŒ–çš„è®¾è®¡æœ‰åˆ©äºå‡å°‘å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä¾èµ–ã€‚éšç€é¡¹ç›®çš„å‘å±•ï¼Œé™¤äº† Dockerï¼Œè¿˜æä¾›äº†å¯¹ Kubernetes ä»¥åŠ Mesos çš„æ”¯æŒï¼Œå³ CNI æ¥å£ã€‚

 Netmaster åå°è¿›ç¨‹è´Ÿè´£è®°å½•æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€ï¼Œä¿å­˜ç½‘ç»œä¿¡æ¯ï¼Œåˆ†é… IP åœ°å€ Netplugin åå°è¿›ç¨‹ä½œä¸ºæ¯ä¸ªå®¿ä¸»æœºä¸Šçš„ Agent ä¸ Docker åŠ OVS é€šä¿¡ï¼Œå¤„ç†æ¥è‡ª Docker çš„è¯·æ±‚ï¼Œç®¡ç† OVSã€‚Docker æ–¹é¢æ¥å£ä¸º remote driverï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ— Docker å®šä¹‰çš„ JSON-RPC(POST) æ¶ˆæ¯ã€‚OVS æ–¹é¢æ¥å£ä¸º remote ovsdbï¼Œä¹Ÿæ˜¯ JSON-RPC æ¶ˆæ¯ã€‚ä»¥ä¸Šæ¶ˆæ¯éƒ½åœ¨ localhost ä¸Šå¤„ç†ã€‚ é›†ç¾¤ç®¡ç†ä¾èµ– etcd/serf</description>
    </item>
    
    <item>
      <title>Packer Intro</title>
      <link>http://rootsongjc.github.io/blogs/packer-intro/</link>
      <pubDate>Thu, 09 Mar 2017 10:58:42 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/packer-intro/</guid>
      <description>æ˜¨å¤©ç ”ç©¶äº†ä¸‹Vagrantï¼Œæ„Ÿè§‰å®ƒçš„è™šæ‹Ÿæœºrubyæ ¼å¼å®šä¹‰å¾ˆéº»çƒ¦ï¼Œç»äººæŒ‡ç‚¹è¿˜æœ‰ä¸€ä¸ªå«åšpackerçš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯Hashicorpè¿™å®¶å…¬å¸å‡ºå“çš„ï¼Œä»Šå¤©çœ‹äº†ä¸‹ã€‚
Packeræ˜¯ä¸€æ¬¾å¼€æºè½»é‡çº§çš„é•œåƒå®šä¹‰å·¥å…·ï¼Œå¯ä»¥æ ¹æ®ä¸€ä»½å®šä¹‰æ–‡ä»¶ç”Ÿæˆå¤šä¸ªå¹³å°çš„é•œåƒï¼Œæ”¯æŒçš„å¹³å°æœ‰ï¼š
 Amazon EC2 (AMI). Both EBS-backed and instance-store AMIs Azure DigitalOcean Docker Google Compute Engine OpenStack Parallels QEMU. Both KVM and Xen images. VirtualBox VMware  Packeråˆ›é€ çš„é•œåƒä¹Ÿèƒ½è½¬æ¢æˆVagrant boxesã€‚
Packerçš„é•œåƒåˆ›å»ºéœ€è¦ä¸€ä¸ªjsonæ ¼å¼çš„å®šä¹‰æ–‡ä»¶ï¼Œä¾‹å¦‚quick-start.json
{ &amp;quot;variables&amp;quot;: { &amp;quot;access_key&amp;quot;: &amp;quot;{{env `AWS_ACCESS_KEY_ID`}}&amp;quot;, &amp;quot;secret_key&amp;quot;: &amp;quot;{{env `AWS_SECRET_ACCESS_KEY`}}&amp;quot; }, &amp;quot;builders&amp;quot;: [{ &amp;quot;type&amp;quot;: &amp;quot;amazon-ebs&amp;quot;, &amp;quot;access_key&amp;quot;: &amp;quot;{{user `access_key`}}&amp;quot;, &amp;quot;secret_key&amp;quot;: &amp;quot;{{user `secret_key`}}&amp;quot;, &amp;quot;region&amp;quot;: &amp;quot;us-east-1&amp;quot;, &amp;quot;source_ami&amp;quot;: &amp;quot;ami-af22d9b9&amp;quot;, &amp;quot;instance_type&amp;quot;: &amp;quot;t2.micro&amp;quot;, &amp;quot;ssh_username&amp;quot;: &amp;quot;ubuntu&amp;quot;, &amp;quot;ami_name&amp;quot;: &amp;quot;packer-example {{timestamp}}&amp;quot; }] }  ä½¿ç”¨packer build quick-start.jsonå¯ä»¥åœ¨AWSä¸Šbuildä¸€ä¸ªAIMé•œåƒã€‚
Packerçš„è¯¦ç»†æ–‡æ¡£ï¼šhttps://www.packer.io/docs/</description>
    </item>
    
    <item>
      <title>Vagrantä»‹ç»-ä»ä½¿ç”¨åˆ°æ”¾å¼ƒå®Œå…¨æŒ‡å—</title>
      <link>http://rootsongjc.github.io/blogs/vagrant-intro/</link>
      <pubDate>Wed, 08 Mar 2017 20:40:08 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/vagrant-intro/</guid>
      <description>ï¼ˆé¢˜å›¾ï¼šåŒ—äº¬åœ°é“13å·çº¿å…‰ç†™å®¶å›­å¤œæ™¯ Mar 5,2017ï¼‰
èµ·æº ä¹…é—»Vagrantå¤§åï¼Œä¹‹å‰ç»å¸¸çœ‹åˆ°æœ‰å¼€æºé¡¹ç›®ä½¿ç”¨å®ƒä½œä¸ºåˆ†å¸ƒå¼å¼€å‘çš„ç¯å¢ƒé…ç½®ã€‚
å› ä¸ºä»Šå¤©åœ¨çœ‹contivæ­£å¥½é‡Œé¢ä½¿ç”¨vagrantæ­å»ºçš„å¼€å‘æµ‹è¯•ç¯å¢ƒï¼Œæ‰€ä»¥é¡ºä¾¿äº†è§£ä¸‹ã€‚å®ƒçš„Vagrantfileæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸‰å°ä¸»æœºã€‚å¹¶å®‰è£…äº†å¾ˆå¤šä¾èµ–è½¯ä»¶ï¼Œå¦‚consulã€etcdã€dockerã€goç­‰ï¼Œæ•´çš„æ¯”è¾ƒå¤æ‚ã€‚
âœ netplugin git:(master) âœ— vagrant status Current machine states: netplugin-node1 running (virtualbox) netplugin-node2 running (virtualbox) netplugin-node3 running (virtualbox) This environment represents multiple VMs. The VMs are all listed above with their current state. For more information about a specific VM, run `vagrant status NAME`.  Vagrantæ˜¯hashicorpè¿™å®¶å…¬å¸çš„äº§å“ï¼Œè¿™å®¶å…¬å¸ä¸»è¦åšæ•°æ®ä¸­å¿ƒPAASå’Œè™šæ‹ŸåŒ–ï¼Œå…¶åä¸‹å¤§åé¼é¼çš„äº§å“æœ‰Consulã€Vaultã€Nomadã€Terraformã€‚ä»–ä»¬çš„äº§å“éƒ½æ˜¯åŸºäºOpen Sourceçš„Githubåœ°å€ã€‚
ç”¨é€” Vagrantæ˜¯ç”¨æ¥ç®¡ç†è™šæ‹Ÿæœºçš„ï¼Œå¦‚VirtualBoxã€VMwareã€AWSç­‰ï¼Œä¸»è¦å¥½å¤„æ˜¯å¯ä»¥æä¾›ä¸€ä¸ªå¯é…ç½®ã€å¯ç§»æ¤å’Œå¤ç”¨çš„è½¯ä»¶ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨shellã€chefã€puppetç­‰å·¥å…·éƒ¨ç½²ã€‚æ‰€ä»¥vagrantä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¦‚æœä½ ç”¨å®ƒæ¥ç®¡ç†è‡ªå·±çš„å¼€å‘ç¯å¢ƒçš„è¯ï¼Œå¿…é¡»åœ¨è‡ªå·±çš„ç”µè„‘é‡Œå®‰è£…äº†è™šæ‹Ÿæœºè½¯ä»¶ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯virtualboxã€‚
Vagrantæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·vagrantï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·å¯ä»¥ç›´æ¥å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå½“ç„¶ä½ éœ€è¦æå‰å®šä¹‰ä¸€ä¸ªVagrantfileæ–‡ä»¶ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼Dockerfileä¹‹äºdockeräº†ã€‚
è·Ÿdockerç±»æ¯”è¿™æ¥çœ‹vagrantå°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œvagrantä¹Ÿæ˜¯ç”¨æ¥æä¾›ä¸€è‡´æ€§ç¯å¢ƒçš„ï¼Œvagrantæœ¬èº«ä¹Ÿæä¾›ä¸€ä¸ªé•œåƒæºï¼Œä½¿ç”¨vagrant init hashicorp/precise64å°±å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªUbuntu 12.04çš„é•œåƒã€‚
ç”¨æ³• ä½ å¯ä»¥ä¸‹è½½å®‰è£…æ–‡ä»¶æ¥å®‰è£…vagrantï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RubyGemå®‰è£…ï¼Œå®ƒæ˜¯ç”¨Rubyå¼€å‘çš„ã€‚
Vagrantfile
Vagrantfileæ˜¯ç”¨æ¥å®šä¹‰vagrant projectçš„ï¼Œä½¿ç”¨rubyè¯­æ³•ï¼Œä¸è¿‡ä½ ä¸å¿…äº†è§£rubyå°±å¯ä»¥å†™ä¸€ä¸ªVagrantfileã€‚
çœ‹ä¸ªä¾‹å­ï¼Œé€‰è‡ªhttps://github.com/fenbox/Vagrantfile
# -*- mode: ruby -*- # vi: set ft=ruby : # All Vagrant configuration is done below.</description>
    </item>
    
    <item>
      <title>Dockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒæ­å»º</title>
      <link>http://rootsongjc.github.io/blogs/docker-dev-env/</link>
      <pubDate>Mon, 06 Mar 2017 17:03:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-dev-env/</guid>
      <description>çœ‹äº†ä¸‹ç½‘ä¸Šå…¶ä»–äººå†™çš„dockerå¼€å‘ç¯å¢ƒæ­å»ºï¼Œè¦ä¹ˆæ˜¯åœ¨ubuntuä¸‹æ­å»ºï¼Œè¦ä¹ˆå°±æ˜¯ä½¿ç”¨å®˜æ–¹è¯´æ˜çš„build docker-devé•œåƒçš„æ–¹å¼ä¸€æ­¥æ­¥æ­å»ºçš„ï¼Œç”šæ˜¯ç¹çï¼Œdocker hubä¸Šæœ‰ä¸€ä¸ªdockerå®˜æ–¹æ¨å‡ºçš„dockercore/dockeré•œåƒï¼Œå…¶å®è¿™å°±æ˜¯å®˜ç½‘ä¸Šæ‰€è¯´çš„docker-devé•œåƒï¼Œä¸è¿‡ä»¥å‰çš„é‚£ä¸ªdeprecatedäº†ï¼Œä½¿ç”¨ç›®å‰è¿™ä¸ªé•œåƒæ­å»ºdockerå¼€å‘ç¯å¢ƒæ˜¯æœ€å¿«æ·çš„äº†ã€‚
æƒ³è¦ä¿®æ”¹dockeræºç å’Œåšdockerå®šåˆ¶å¼€å‘çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹ã€‚
å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£ï¼šhttps://docs.docker.com/opensource/code/
è®¾ç½®dockerå¼€å‘ç¯å¢ƒï¼šhttps://docs.docker.com/opensource/project/set-up-dev-env/
dockerçš„ç¼–è¯‘å®è´¨ä¸Šæ˜¯åœ¨dockerå®¹å™¨ä¸­è¿è¡Œdockerã€‚
å› æ­¤åœ¨æœ¬åœ°ç¼–è¯‘dockerçš„å‰ææ˜¯éœ€è¦å®‰è£…äº†dockerï¼Œè¿˜éœ€è¦ç”¨gitæŠŠä»£ç pullä¸‹æ¥ã€‚
åˆ›å»ºåˆ†æ”¯ ä¸ºäº†æ–¹ä¾¿ä»¥åç»™dockeræäº¤æ›´æ”¹ï¼Œæˆ‘ä»¬ä»dockerå®˜æ–¹forkä¸€ä¸ªåˆ†æ”¯ã€‚
git clone https://github.com/rootsongjc/docker.git git config --local user.name &amp;quot;Jimmy Song&amp;quot; git config --local user.email &amp;quot;rootsongjc@gmail.com&amp;quot; git remote add upstream https://github.com/docker/docker.git git config --local -l git remote -v git checkout -b dry-run-test touch TEST.md vim TEST.md git status git add TEST.md git commit -am &amp;quot;Making a dry run test.&amp;quot; git push --set-upstream origin dry-run-test  ç„¶åå°±å¯ä»¥åœ¨dry-run-testè¿™ä¸ªåˆ†æ”¯ä¸‹å·¥ä½œäº†ã€‚
é…ç½®dockerå¼€å‘ç¯å¢ƒ å®˜ç½‘ä¸Šè¯´éœ€è¦å…ˆæ¸…ç©ºè‡ªå·±ç”µè„‘ä¸Šå·²æœ‰çš„å®¹å™¨å’Œé•œåƒã€‚
dockerå¼€å‘ç¯å¢ƒæœ¬è´¨ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªdockeré•œåƒï¼Œé•œåƒé‡ŒåŒ…å«äº†dockerçš„æ‰€æœ‰å¼€å‘è¿è¡Œç¯å¢ƒï¼Œæœ¬åœ°ä»£ç é€šè¿‡æŒ‚è½½çš„æ–¹å¼æ”¾åˆ°å®¹å™¨ä¸­è¿è¡Œï¼Œä¸‹é¢è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºè¿™æ ·ä¸€ä¸ªé•œåƒã€‚
åœ¨dry-run-teståˆ†æ”¯ä¸‹æ‰§è¡Œ
make BIND_DIR=.</description>
    </item>
    
    <item>
      <title>12å› ç´ æ³•åˆ™</title>
      <link>http://rootsongjc.github.io/blogs/12-factor-app/</link>
      <pubDate>Mon, 27 Feb 2017 22:32:40 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/12-factor-app/</guid>
      <description>Twelve-factor App ç®€ä»‹ å¦‚ä»Šï¼Œè½¯ä»¶é€šå¸¸ä¼šä½œä¸ºä¸€ç§æœåŠ¡æ¥äº¤ä»˜ï¼Œå®ƒä»¬è¢«ç§°ä¸ºç½‘ç»œåº”ç”¨ç¨‹åºï¼Œæˆ–è½¯ä»¶å³æœåŠ¡ï¼ˆSaaSï¼‰ã€‚12-Factor ä¸ºæ„å»ºå¦‚ä¸‹çš„ SaaS åº”ç”¨æä¾›äº†æ–¹æ³•è®ºï¼š
 ä½¿ç”¨æ ‡å‡†åŒ–æµç¨‹è‡ªåŠ¨é…ç½®ï¼Œä»è€Œä½¿æ–°çš„å¼€å‘è€…èŠ±è´¹æœ€å°‘çš„å­¦ä¹ æˆæœ¬åŠ å…¥è¿™ä¸ªé¡¹ç›®ã€‚ å’Œæ“ä½œç³»ç»Ÿä¹‹é—´å°½å¯èƒ½çš„åˆ’æ¸…ç•Œé™ï¼Œåœ¨å„ä¸ªç³»ç»Ÿä¸­æä¾›æœ€å¤§çš„å¯ç§»æ¤æ€§ã€‚ é€‚åˆéƒ¨ç½²åœ¨ç°ä»£çš„äº‘è®¡ç®—å¹³å°ï¼Œä»è€Œåœ¨æœåŠ¡å™¨å’Œç³»ç»Ÿç®¡ç†æ–¹é¢èŠ‚çœèµ„æºã€‚ å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚é™è‡³æœ€ä½ï¼Œå¹¶ä½¿ç”¨æŒç»­äº¤ä»˜å®æ–½æ•æ·å¼€å‘ã€‚ å¯ä»¥åœ¨å·¥å…·ã€æ¶æ„å’Œå¼€å‘æµç¨‹ä¸å‘ç”Ÿæ˜æ˜¾å˜åŒ–çš„å‰æä¸‹å®ç°æ‰©å±•ã€‚  è¿™å¥—ç†è®ºé€‚ç”¨äºä»»æ„è¯­è¨€å’Œåç«¯æœåŠ¡ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ç­‰ï¼‰å¼€å‘çš„åº”ç”¨ç¨‹åºã€‚
èƒŒæ™¯ æœ¬æ–‡çš„è´¡çŒ®è€…è€…å‚ä¸è¿‡æ•°ä»¥ç™¾è®¡çš„åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œéƒ¨ç½²ï¼Œå¹¶é€šè¿‡Â HerokuÂ å¹³å°é—´æ¥è§è¯äº†æ•°åä¸‡åº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œè¿ä½œä»¥åŠæ‰©å±•çš„è¿‡ç¨‹ã€‚
æœ¬æ–‡ç»¼åˆäº†æˆ‘ä»¬å…³äº SaaS åº”ç”¨å‡ ä¹æ‰€æœ‰çš„ç»éªŒå’Œæ™ºæ…§ï¼Œæ˜¯å¼€å‘æ­¤ç±»åº”ç”¨çš„ç†æƒ³å®è·µæ ‡å‡†ï¼Œå¹¶ç‰¹åˆ«å…³æ³¨äºåº”ç”¨ç¨‹åºå¦‚ä½•ä¿æŒè‰¯æ€§æˆé•¿ï¼Œå¼€å‘è€…ä¹‹é—´å¦‚ä½•è¿›è¡Œæœ‰æ•ˆçš„ä»£ç åä½œï¼Œä»¥åŠå¦‚ä½•Â é¿å…è½¯ä»¶æ±¡æŸ“Â ã€‚
æˆ‘ä»¬çš„åˆè¡·æ˜¯åˆ†äº«åœ¨ç°ä»£è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›ç³»ç»Ÿæ€§é—®é¢˜ï¼Œå¹¶åŠ æ·±å¯¹è¿™äº›é—®é¢˜çš„è®¤è¯†ã€‚æˆ‘ä»¬æä¾›äº†è®¨è®ºè¿™äº›é—®é¢˜æ—¶æ‰€éœ€çš„å…±äº«è¯æ±‡ï¼ŒåŒæ—¶ä½¿ç”¨ç›¸å…³æœ¯è¯­ç»™å‡ºä¸€å¥—é’ˆå¯¹è¿™äº›é—®é¢˜çš„å¹¿ä¹‰è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡æ ¼å¼çš„çµæ„Ÿæ¥è‡ªäº Martin Fowler çš„ä¹¦ç±ï¼šÂ *Patterns of Enterprise Application Architecture*Â ï¼ŒÂ *Refactoring*Â ã€‚
12-factors I. åŸºå‡†ä»£ç  ä¸€ä»½åŸºå‡†ä»£ç ï¼Œå¤šä»½éƒ¨ç½² II. ä¾èµ– æ˜¾å¼å£°æ˜ä¾èµ–å…³ç³» III. é…ç½® åœ¨ç¯å¢ƒä¸­å­˜å‚¨é…ç½® IV. åç«¯æœåŠ¡ æŠŠåç«¯æœåŠ¡å½“ä½œé™„åŠ èµ„æº V. æ„å»ºï¼Œå‘å¸ƒï¼Œè¿è¡Œ ä¸¥æ ¼åˆ†ç¦»æ„å»ºå’Œè¿è¡Œ VI. è¿›ç¨‹ ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨ VII. ç«¯å£ç»‘å®š é€šè¿‡ç«¯å£ç»‘å®šæä¾›æœåŠ¡ VIII. å¹¶å‘ é€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±• IX. æ˜“å¤„ç† å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ç»ˆæ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§ X. å¼€å‘ç¯å¢ƒä¸çº¿ä¸Šç¯å¢ƒç­‰ä»· å°½å¯èƒ½çš„ä¿æŒå¼€å‘ï¼Œé¢„å‘å¸ƒï¼Œçº¿ä¸Šç¯å¢ƒç›¸åŒ XI. æ—¥å¿— æŠŠæ—¥å¿—å½“ä½œäº‹ä»¶æµ XII.</description>
    </item>
    
    <item>
      <title>Docker Service Discovery</title>
      <link>http://rootsongjc.github.io/blogs/docker-service-discovery/</link>
      <pubDate>Mon, 27 Feb 2017 18:27:07 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-service-discovery/</guid>
      <description>Prior to Docker 1.12 release, setting up Swarm cluster needed some sort ofÂ service discovery backend. There are multiple discovery backends available like hosted discovery service, using a static file describing the cluster, etcd, consul, zookeeper or using static list of IP address.

Thanks to Docker 1.12 Swarm Mode, we donâ€™t have to depend upon these external tools and complex configurations.Â Docker Engine 1.12Â runs itâ€™s own internal DNS service to route services by name.</description>
    </item>
    
    <item>
      <title>Dockerå†…ç½®DNS</title>
      <link>http://rootsongjc.github.io/blogs/docker-embedded-dns/</link>
      <pubDate>Mon, 27 Feb 2017 18:23:42 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-embedded-dns/</guid>
      <description>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Dockerå®¹å™¨çš„DNSé…ç½®åŠå…¶æ³¨æ„ç‚¹ï¼Œé‡ç‚¹å¯¹docker 1.10å‘å¸ƒçš„embedded DNS serverè¿›è¡Œäº†æºç åˆ†æï¼Œçœ‹çœ‹embedded DNS serveråˆ°åº•æ˜¯ä¸ªå•¥ï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
Configure container DNS DNS in default bridge network    Options Description     -h HOSTNAME or â€“hostname=HOSTNAME åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†HOSTNAMEè®¾ç½®åˆ°å®¹å™¨å†…çš„/etc/hosts, /etc/hostname, /bin/bashæç¤ºä¸­ã€‚   â€“link=CONTAINER_NAME or ID:ALIAS åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†ALIASå’ŒCONTAINER_NAME/IDå¯¹åº”çš„å®¹å™¨IPæ·»åŠ åˆ°/etc/hosts. å¦‚æœ CONTAINER_NAME/IDæœ‰å¤šä¸ªIPåœ°å€ ï¼Ÿ   â€“dns=IP_ADDRESSâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†nameserver IP_ADDRESSæ·»åŠ åˆ°å®¹å™¨å†…çš„/etc/resolv.confä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚   â€“dns-search=DOMAINâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†DOMAINæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confçš„dns searchåˆ—è¡¨ä¸­ã€‚å¯ä»¥é…ç½®å¤šä¸ªã€‚   â€“dns-opt=OPTIONâ€¦ åœ¨è¯¥å®¹å™¨å¯åŠ¨æ—¶ï¼Œå°†OPTIONæ·»åŠ åˆ°å®¹å™¨å†…/etc/resolv.confä¸­çš„optionsé€‰é¡¹ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚     è¯´æ˜ï¼š
 å¦‚æœdocker runæ—¶ä¸å«--dns=IP_ADDRESS..., --dns-search=DOMAIN..., or --dns-opt=OPTION...å‚æ•°ï¼Œdocker daemonä¼šå°†copyæœ¬ä¸»æœºçš„/etc/resolv.confï¼Œç„¶åå¯¹è¯¥copyè¿›è¡Œå¤„ç†ï¼ˆå°†é‚£äº›/etc/resolv.confä¸­pingä¸é€šçš„nameserveré¡¹ç»™æŠ›å¼ƒï¼‰,å¤„ç†å®Œæˆåç•™ä¸‹çš„éƒ¨åˆ†å°±ä½œä¸ºè¯¥å®¹å™¨å†…éƒ¨çš„/etc/resolv.confã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åˆ©ç”¨å®¿ä¸»æœºä¸­çš„/etc/resolv.confé…ç½®çš„nameserverè¿›è¡ŒåŸŸåè§£æï¼Œé‚£ä¹ˆä½ éœ€è¦å®¿ä¸»æœºä¸­è¯¥dns serviceé…ç½®ä¸€ä¸ªå®¿ä¸»æœºå†…å®¹å™¨èƒ½pingé€šçš„IPã€‚ å¦‚æœå®¿ä¸»æœºçš„/etc/resolv.confå†…å®¹å‘ç”Ÿæ”¹å˜ï¼Œdocker daemonæœ‰ä¸€ä¸ªå¯¹åº”çš„file change notifierä¼šwatchåˆ°è¿™ä¸€å˜åŒ–ï¼Œç„¶åæ ¹æ®å®¹å™¨çŠ¶æ€é‡‡å–å¯¹åº”çš„æªæ–½ï¼š  å¦‚æœå®¹å™¨çŠ¶æ€ä¸ºstoppedï¼Œåˆ™ç«‹åˆ»æ ¹æ®å®¿ä¸»æœºçš„/etc/resolv.</description>
    </item>
    
    <item>
      <title>Raftä¸€è‡´æ€§ç®—æ³•</title>
      <link>http://rootsongjc.github.io/blogs/raft/</link>
      <pubDate>Mon, 27 Feb 2017 10:47:14 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/raft/</guid>
      <description>è¿™æ˜¯ä¸€ä¸ªåŠ¨ç”»æ¼”ç¤ºç‰ˆçš„Raftä¸€è‡´æ€§ç®—æ³•çš„è¯´æ˜ï¼Œå¾ˆç›´è§‚ï¼Œæ¨èè§‚çœ‹ã€‚ http://thesecretlivesofdata.com/raft/
P.S Raftä¸€è‡´æ€§ç®—æ³•åœ¨å¾ˆå¤šè½¯ä»¶ä¸­éƒ½æœ‰åº”ç”¨ï¼Œå¦‚Dockerï¼ˆSwarm Modeï¼‰ã€Ectdç­‰ï¼ŒHadoopç”Ÿæ€åœˆé‡Œçš„Zookeeperç”¨çš„æ˜¯è‰°æ·±çš„Paxosç®—æ³•ã€‚</description>
    </item>
    
  </channel>
</rss>