<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blogs on Jimmy Song&#39;s Blog</title>
    <link>http://rootsongjc.github.io/blogs/index.xml</link>
    <description>Recent content in Blogs on Jimmy Song&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 10 Apr 2017 21:39:00 +0800</lastBuildDate>
    <atom:link href="http://rootsongjc.github.io/blogs/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Fabric8ç®€ä»‹</title>
      <link>http://rootsongjc.github.io/blogs/fabric8-introduction/</link>
      <pubDate>Mon, 10 Apr 2017 21:39:00 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/fabric8-introduction/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;https://fabric8.io/images/fabric8_logo.svg&#34; alt=&#34;fabric8&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;æ— æ„ä¸­å‘ç°&lt;a href=&#34;https://github.com/fabric8io/fabric8&#34;&gt;Fabric8&lt;/a&gt;è¿™ä¸ª&lt;strong&gt;å¯¹äºJavaå‹å¥½çš„å¼€æºå¾®æœåŠ¡ç®¡ç†å¹³å°&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®è¿™åœ¨è¿™é‡Œå‘ç°çš„&lt;a href=&#34;http://blog.sonatype.com/achieving-ci/cd-with-kubernetes&#34;&gt;Achieving CI/CD with Kubernetes&lt;/a&gt;ï¼ˆby Ramit Surana,on February 17, 2017ï¼‰ï¼Œå…¶å®æ˜¯å…ˆåœ¨&lt;a href=&#34;https://www.slideshare.net/ramitsurana/achieving-cicd-with-kubernetes&#34;&gt;slideshare&lt;/a&gt;ä¸Šçœ‹åˆ°çš„ï¼Œpdfå¯ä»¥&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/achiveving-ci-cd-with-kubernetes-ramit-surana.pdf&#34;&gt;åœ¨æ­¤ä¸‹è½½&lt;/a&gt;ï¼Œå¤§å°2.04Mã€‚&lt;/p&gt;

&lt;p&gt;å¤§å®¶å¯èƒ½ä»¥å‰å¬è¿‡ä¸€ä¸ªå«åš&lt;a href=&#34;https://github.com/fabric/fabric/&#34;&gt;fabric&lt;/a&gt;çš„å·¥å…·ï¼Œé‚£æ˜¯ä¸€ä¸ª Python (2.5-2.7) åº“å’Œå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥æµæ°´çº¿åŒ–æ‰§è¡Œ SSH ä»¥éƒ¨ç½²åº”ç”¨æˆ–ç³»ç»Ÿç®¡ç†ä»»åŠ¡ã€‚æ‰€ä»¥å¤§å®¶ä¸è¦æŠŠfabric8è·Ÿfabricææ··ï¼Œè™½ç„¶å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…±åŒç‚¹ï¼Œä½†ä¸¤è€…å®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œ&lt;strong&gt;fabric8ä¸æ˜¯fabricçš„ä¸€ä¸ªç‰ˆæœ¬&lt;/strong&gt;ã€‚Fabricæ˜¯ç”¨pythonå¼€å‘çš„ï¼Œfabric8æ˜¯javaå¼€å‘çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æƒ³äº†è§£ç®€åŒ–Fabricå¯ä»¥çœ‹å®ƒçš„&lt;a href=&#34;http://fabric-docs-cn.readthedocs.io/zh_CN/latest/tutorial.html&#34;&gt;ä¸­æ–‡å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;fabric8ç®€ä»‹&#34;&gt;Fabric8ç®€ä»‹&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;fabric8&lt;/strong&gt;æ˜¯ä¸€ä¸ªå¼€æº&lt;strong&gt;é›†æˆå¼€å‘å¹³å°&lt;/strong&gt;ï¼Œä¸ºåŸºäº&lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;å’Œ&lt;a href=&#34;https://jenkins.io/&#34;&gt;Jenkins&lt;/a&gt;çš„å¾®æœåŠ¡æä¾›&lt;a href=&#34;http://fabric8.io/guide/cdelivery.html&#34;&gt;æŒç»­å‘å¸ƒ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨fabricå¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡&lt;a href=&#34;http://fabric8.io/guide/cdelivery.html&#34;&gt;Continuous Delivery pipelines&lt;/a&gt;åˆ›å»ºã€ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å¾®æœåŠ¡ï¼Œç„¶åé€šè¿‡Continuous Improvementå’Œ&lt;a href=&#34;http://fabric8.io/guide/chat.html&#34;&gt;ChatOps&lt;/a&gt;è¿è¡Œå’Œç®¡ç†ä»–ä»¬ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://fabric8.io/guide/fabric8DevOps.html&#34;&gt;Fabric8å¾®æœåŠ¡å¹³å°&lt;/a&gt;æä¾›ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/console.html&#34;&gt;Developer Console&lt;/a&gt;ï¼Œæ˜¯ä¸€ä¸ª&lt;a href=&#34;http://www.infoq.com/cn/news/2014/11/seven-principles-rich-web-app&#34;&gt;å¯Œwebåº”ç”¨&lt;/a&gt;ï¼Œæä¾›ä¸€ä¸ªå•é¡µé¢æ¥åˆ›å»ºã€ç¼–è¾‘ã€ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å¾®æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/cdelivery.html&#34;&gt;Continuous Integration and Continous Delivery&lt;/a&gt;ï¼Œä½¿ç”¨ &lt;a href=&#34;https://jenkins.io/&#34;&gt;Jenkins&lt;/a&gt; with a &lt;a href=&#34;http://fabric8.io/guide/jenkinsWorkflowLibrary.html&#34;&gt;Jenkins Workflow Library&lt;/a&gt;æ›´å¿«å’Œæ›´å¯é çš„äº¤ä»˜è½¯ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/management.html&#34;&gt;Management&lt;/a&gt;ï¼Œé›†ä¸­å¼ç®¡ç†&lt;a href=&#34;http://fabric8.io/guide/logging.html&#34;&gt;Logging&lt;/a&gt;ã€&lt;a href=&#34;http://fabric8.io/guide/metrics.html&#34;&gt;Metrics&lt;/a&gt;, &lt;a href=&#34;http://fabric8.io/guide/chat.html&#34;&gt;ChatOps&lt;/a&gt;ã€&lt;a href=&#34;http://fabric8.io/guide/chaosMonkey.html&#34;&gt;Chaos Monkey&lt;/a&gt;ï¼Œä½¿ç”¨&lt;a href=&#34;http://hawt.io/&#34;&gt;Hawtio&lt;/a&gt;å’Œ&lt;a href=&#34;http://jolokia.org/&#34;&gt;Jolokia&lt;/a&gt;ç®¡ç†Java Containersã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/ipaas.html&#34;&gt;Integration&lt;/a&gt; &lt;u&gt;&lt;em&gt;Integration Platform As A Service&lt;/em&gt;&lt;/u&gt; with &lt;a href=&#34;http://fabric8.io/guide/console.html&#34;&gt;deep visualisation&lt;/a&gt; of your &lt;a href=&#34;http://camel.apache.org/&#34;&gt;Apache Camel&lt;/a&gt; integration services, an &lt;a href=&#34;http://fabric8.io/guide/apiRegistry.html&#34;&gt;API Registry&lt;/a&gt; to view of all your RESTful and SOAP APIs and &lt;a href=&#34;http://fabric8.io/guide/fabric8MQ.html&#34;&gt;Fabric8 MQ&lt;/a&gt; provides &lt;u&gt;&lt;em&gt;Messaging As A Service&lt;/em&gt;&lt;/u&gt; based on &lt;a href=&#34;http://activemq.apache.org/&#34;&gt;Apache ActiveMQ&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/tools.html&#34;&gt;Java Tools&lt;/a&gt; å¸®åŠ©Javaåº”ç”¨ä½¿ç”¨&lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;:

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/mavenPlugin.html&#34;&gt;Maven Plugin&lt;/a&gt; for working with &lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt; ï¼Œè¿™çœŸæ˜¯æå¥½çš„&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/testing.html&#34;&gt;Integration and System Testing&lt;/a&gt; of &lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt; resources easily inside &lt;a href=&#34;http://junit.org/&#34;&gt;JUnit&lt;/a&gt; with &lt;a href=&#34;http://arquillian.org/&#34;&gt;Arquillian&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/javaLibraries.html&#34;&gt;Java Libraries&lt;/a&gt; and support for &lt;a href=&#34;http://fabric8.io/guide/cdi.html&#34;&gt;CDI&lt;/a&gt; extensions for working with &lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;fabric8å¾®æœåŠ¡å¹³å°&#34;&gt;Fabric8å¾®æœåŠ¡å¹³å°&lt;/h2&gt;

&lt;p&gt;Fabric8æä¾›äº†ä¸€ä¸ªå®Œå…¨é›†æˆçš„å¼€æºå¾®æœåŠ¡å¹³å°ï¼Œå¯åœ¨ä»»ä½•çš„&lt;a href=&#34;http://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;å’Œ&lt;a href=&#34;http://www.openshift.org/&#34;&gt;OpenShift&lt;/a&gt;ç¯å¢ƒä¸­å¼€ç®±å³ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä¸ªå¹³å°æ˜¯åŸºäºå¾®æœåŠ¡è€Œä¸”æ˜¯æ¨¡å—åŒ–çš„ï¼Œä½ å¯ä»¥æŒ‰ç…§å¾®æœåŠ¡çš„æ–¹å¼æ¥ä½¿ç”¨å®ƒã€‚&lt;/p&gt;

&lt;p&gt;å¾®æœåŠ¡å¹³å°æä¾›çš„æœåŠ¡æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¼€å‘è€…æ§åˆ¶å°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ŒWebåº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå•ä¸€çš„é¡µé¢æ¥åˆ›å»ºã€ç¼–è¾‘ã€ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•å¾®æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼Œå¸®åŠ©å›¢é˜Ÿä»¥æ›´å¿«æ›´å¯é çš„æ–¹å¼äº¤ä»˜è½¯ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¼€æºè½¯ä»¶ï¼š

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://jenkins.io/&#34;&gt;Jenkins&lt;/a&gt;ï¼šCIï¼CD pipeline&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.sonatype.org/nexus/&#34;&gt;Nexus&lt;/a&gt;ï¼š ç»„ä»¶åº“&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gogs.io/&#34;&gt;Gogs&lt;/a&gt;ï¼šgitä»£ç åº“&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.sonarqube.org/&#34;&gt;SonarQube&lt;/a&gt;ï¼šä»£ç è´¨é‡ç»´æŠ¤å¹³å°&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/jenkinsWorkflowLibrary.html&#34;&gt;Jenkins Workflow Library&lt;/a&gt;ï¼šåœ¨ä¸åŒçš„é¡¹ç›®ä¸­å¤ç”¨&lt;a href=&#34;https://github.com/fabric8io/jenkins-workflow-library&#34;&gt;Jenkins Workflow scripts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/fabric8YmlFile.html&#34;&gt;Fabric8.yml&lt;/a&gt;ï¼šä¸ºæ¯ä¸ªé¡¹ç›®ã€å­˜å‚¨åº“ã€èŠå¤©å®¤ã€å·¥ä½œæµè„šæœ¬å’Œé—®é¢˜è·Ÿè¸ªå™¨æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/chat.html&#34;&gt;ChatOps&lt;/a&gt;ï¼šé€šè¿‡ä½¿ç”¨&lt;a href=&#34;https://hubot.github.com/&#34;&gt;hubot&lt;/a&gt;æ¥å¼€å‘å’Œç®¡ç†ï¼Œèƒ½å¤Ÿè®©ä½ çš„å›¢é˜Ÿæ‹¥æŠ±DevOpsï¼Œé€šè¿‡èŠå¤©å’Œç³»ç»Ÿé€šçŸ¥çš„æ–¹å¼æ¥&lt;a href=&#34;https://github.com/fabric8io/fabric8-jenkins-workflow-steps#hubotapprove&#34;&gt;approval of release promotion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/chaosMonkey.html&#34;&gt;Chaos Monkey&lt;/a&gt;ï¼šé€šè¿‡å¹²æ‰&lt;a href=&#34;http://fabric8.io/guide/pods.html&#34;&gt;pods&lt;/a&gt;æ¥æµ‹è¯•ç³»ç»Ÿå¥å£®æ€§å’Œå¯é æ€§&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/management.html&#34;&gt;ç®¡ç†&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/logging.html&#34;&gt;æ—¥å¿—&lt;/a&gt; ç»Ÿä¸€é›†ç¾¤æ—¥å¿—å’Œå¯è§†åŒ–æŸ¥çœ‹çŠ¶æ€&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://fabric8.io/guide/metrics.html&#34;&gt;metris&lt;/a&gt; å¯æŸ¥çœ‹å†å²metricså’Œå¯è§†åŒ–&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://hao.jobbole.com/fabric8/&#34;&gt;fabric8ï¼šå®¹å™¨é›†æˆå¹³å°â€”â€”ä¼¯ä¹åœ¨çº¿&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://mp.weixin.qq.com/s?__biz=MzI0NjI4MDg5MQ==&amp;amp;mid=2715290731&amp;amp;idx=1&amp;amp;sn=f1fcacb9aa4f1f3037918f03c29c0465&amp;amp;chksm=cd6d0bbffa1a82a978ccc0405afa295bd9265bd9f89f2217c80f48e1c497b25d1f24090108af&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0410RTk3PKkxlFlLbCVlOKMK#rd&#34;&gt;Kuberneteséƒ¨ç½²å¾®æœåŠ¡é€ŸæˆæŒ‡å—â€”â€”&lt;em&gt;2017-03-09&lt;/em&gt; &lt;em&gt;å¾è–›å½ª&lt;/em&gt; å®¹å™¨æ—¶ä»£å¾®ä¿¡å…¬ä¼—å·&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šé¢é‚£ç¯‡æ–‡ç« æ˜¯ç¿»è¯‘çš„ï¼Œè‹±æ–‡åŸæ–‡åœ°å€ï¼š&lt;a href=&#34;http://www.eclipse.org/community/eclipse_newsletter/2017/january/article2.php&#34;&gt;Quick Guide to Developing Microservices on Kubernetes and Docker&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://fabric8.io/&#34;&gt;fabric8å®˜ç½‘&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://fabric8.io/guide/getStarted/gofabric8.html&#34;&gt;fabric8 get started&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;&lt;del&gt;æˆ‘åœ¨è‡ªå·±ç¬”è®°æœ¬ä¸Šè£…äº†ä¸ªminikubeï¼Œè¯•ç©æ„Ÿå—å°†åœ¨åç»­å‘è¡¨ã€‚&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;è¯•ç©æ—¶éœ€è¦ç§‘å­¦ä¸Šç½‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$gofabric8 start
using the executable /usr/local/bin/minikube
minikube already running
using the executable /usr/local/bin/kubectl
Switched to context &amp;quot;minikube&amp;quot;.
Deploying fabric8 to your Kubernetes installation at https://192.168.99.100:8443 for domain  in namespace default

Loading fabric8 releases from maven repository:https://repo1.maven.org/maven2/
Deploying package: platform version: 2.4.24

Now about to install package https://repo1.maven.org/maven2/io/fabric8/platform/packages/fabric8-platform/2.4.24/fabric8-platform-2.4.24-kubernetes.yml
Processing resource kind: Namespace in namespace default name user-secrets-source-admin
Found namespace on kind Secret of user-secrets-source-adminProcessing resource kind: Secret in namespace user-secrets-source-admin name default-gogs-git
Processing resource kind: Secret in namespace default name jenkins-docker-cfg
Processing resource kind: Secret in namespace default name jenkins-git-ssh
Processing resource kind: Secret in namespace default name jenkins-hub-api-token
Processing resource kind: Secret in namespace default name jenkins-master-ssh
Processing resource kind: Secret in namespace default name jenkins-maven-settings
Processing resource kind: Secret in namespace default name jenkins-release-gpg
Processing resource kind: Secret in namespace default name jenkins-ssh-config
Processing resource kind: ServiceAccount in namespace default name configmapcontroller
Processing resource kind: ServiceAccount in namespace default name exposecontroller
Processing resource kind: ServiceAccount in namespace default name fabric8
Processing resource kind: ServiceAccount in namespace default name gogs
Processing resource kind: ServiceAccount in namespace default name jenkins
Processing resource kind: Service in namespace default name fabric8
Processing resource kind: Service in namespace default name fabric8-docker-registry
Processing resource kind: Service in namespace default name fabric8-forge
Processing resource kind: Service in namespace default name gogs
...
-------------------------

Default GOGS admin username/password = gogsadmin/RedHat$1

Checking if PersistentVolumeClaims bind to a PersistentVolume ....
Downloading images and waiting to open the fabric8 console...

-------------------------
.....................................................
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨äº†åŠå¤©ä¸€ç›´æ˜¯è¿™ç§çŠ¶æ€ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Waiting, endpoint for service is not ready yet...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä¸€çœ‹ä¸‹è½½ä¸‹æ¥çš„&lt;code&gt;https://repo1.maven.org/maven2/io/fabric8/platform/packages/fabric8-platform/2.4.24/fabric8-platform-2.4.24-kubernetes.yml&lt;/code&gt;æ–‡ä»¶ï¼ŒçœŸæ˜¯&lt;strong&gt;è”šä¸ºå£®è§‚&lt;/strong&gt;å•Šï¼Œè¶³è¶³æœ‰&lt;strong&gt;24712è¡Œ&lt;/strong&gt;(è¿™é‡Œé¢éƒ½æ˜¯å®é™…é…ç½®ï¼Œæ²¡æœ‰é…ç½®å……è¡Œæ•°)ï¼Œä½¿ç”¨äº†å¦‚ä¸‹è¿™äº›dockeré•œåƒï¼Œè¶³è¶³æœ‰&lt;strong&gt;53ä¸ªdockeré•œåƒ&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fabric8/alpine-caddy:2.2.311
fabric8/apiman-gateway:2.2.168
fabric8/apiman:2.2.168
fabric8/chaos-monkey:2.2.311
fabric8/configmapcontroller:2.3.5
fabric8/eclipse-orion:2.2.311
fabric8/elasticsearch-k8s:2.3.4
fabric8/elasticsearch-logstash-template:2.2.311
fabric8/elasticsearch-v1:2.2.168
fabric8/exposecontroller:2.3.2
fabric8/fabric8-console:2.2.199
fabric8/fabric8-forge:2.3.88
fabric8/fabric8-kiwiirc:2.2.311
fabric8/fluentd-kubernetes:v1.19
fabric8/gerrit:2.2.311
fabric8/git-collector:2.2.311
fabric8/gogs:v0.9.97
fabric8/grafana:2.6.1
fabric8/hubot-irc:2.2.311
fabric8/hubot-letschat:v1.0.0
fabric8/hubot-notifier:2.2.311
fabric8/hubot-slack:2.2.311
fabric8/jenkins-docker:2.2.311
fabric8/jenkinshift:2.2.199
fabric8/kafka:2.2.153
fabric8/kibana-config:2.2.311
fabric8/kibana4:v4.5.3
fabric8/lets-chat:2.2.311
fabric8/maven-builder:2.2.311
fabric8/message-broker:2.2.168
fabric8/message-gateway:2.2.168
fabric8/nexus:2.2.311
fabric8/taiga-back:2.2.311
fabric8/taiga-front:2.2.311
fabric8/turbine-server:1.0.28
fabric8/zookeeper:2.2.153
fabric8/zookeeper:2.2.168
funktion/funktion-nodejs-runtime:1.0.3
funktion/funktion:1.0.9
gitlab/gitlab-ce
jboss/keycloak:2.2.0.Final
jfrog-docker-registry.bintray.io/artifactory/artifactory-oss
jimmidyson/configmap-reload:v0.1
manageiq/manageiq:latest
mongo
mysql:5.7
nginxdemos/nginx-ingress:0.3.1
openzipkin/zipkin:1.13.0
postgres
prom/blackbox-exporter:master
prom/node-exporter
prom/prometheus:v1.3.1
registry:2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½ ä»¬æ„Ÿå—ä¸‹å§ï¼Œæˆ‘æœæ–­æ”¾å¼ƒäº†åœ¨è‡ªå·±ç¬”è®°æœ¬ä¸Šå®‰è£…çš„å¿µå¤´ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kuberneteså®‰è£…ä¹‹è¯ä¹¦éªŒè¯</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-tls-certificate/</link>
      <pubDate>Mon, 10 Apr 2017 17:28:41 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-tls-certificate/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2014082502.jpg&#34; alt=&#34;é¢å’Œå›­&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šé“œç‰›@é¢å’Œå›­ Aug 25,2014ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;æ˜¨æ™šï¼ˆApr 9,2017ï¼‰é‡‘å±±è½¯ä»¶çš„&lt;a href=&#34;https://github.com/opsnull&#34;&gt;opsnull&lt;/a&gt;å‘å¸ƒäº†ä¸€ä¸ªå¼€æºé¡¹ç›®&lt;a href=&#34;https://github.com/opsnull/follow-me-install-kubernetes-cluster&#34;&gt;å’Œæˆ‘ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤&lt;/a&gt;ï¼Œä¸‹æ–‡æ˜¯ç»“åˆæˆ‘&lt;a href=&#34;http://rootsongjc.github.io/tags/kubernetes/&#34;&gt;ä¹‹å‰éƒ¨ç½²kubernetesçš„è¿‡ç¨‹&lt;/a&gt;æ‰“é€ çš„kubernetesç¯å¢ƒå’Œopsnullçš„æ–‡ç« &lt;a href=&#34;https://github.com/opsnull/follow-me-install-kubernetes-cluster/blob/master/01-TLS%E8%AF%81%E4%B9%A6%E5%92%8C%E7%A7%98%E9%92%A5.md&#34;&gt;åˆ›å»º kubernetes å„ç»„ä»¶ TLS åŠ å¯†é€šä¿¡çš„è¯ä¹¦å’Œç§˜é’¥&lt;/a&gt;çš„å®è·µã€‚ä¹‹å‰å®‰è£…è¿‡ç¨‹ä¸­ä¸€ç›´ä½¿ç”¨çš„æ˜¯éåŠ å¯†æ–¹å¼ï¼Œä¸€ç›´åˆ°åæ¥&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation/&#34;&gt;ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—&lt;/a&gt;æ—¶å‘ç°æœ‰æƒé™éªŒè¯é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†æ·±å…¥ç ”ç©¶kubernentesã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernentesä¸­çš„èº«ä»½éªŒè¯&#34;&gt;Kubernentesä¸­çš„èº«ä»½éªŒè¯&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;kubernetes&lt;/code&gt; ç³»ç»Ÿçš„å„ç»„ä»¶éœ€è¦ä½¿ç”¨ &lt;code&gt;TLS&lt;/code&gt; è¯ä¹¦å¯¹é€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Œæœ¬æ–‡æ¡£ä½¿ç”¨ &lt;code&gt;CloudFlare&lt;/code&gt; çš„ PKI å·¥å…·é›† &lt;a href=&#34;https://github.com/cloudflare/cfssl&#34;&gt;cfssl&lt;/a&gt; æ¥ç”Ÿæˆ Certificate Authority (CA) å’Œå…¶å®ƒè¯ä¹¦ï¼›&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ç”Ÿæˆçš„ CA è¯ä¹¦å’Œç§˜é’¥æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ca-key.pem&lt;/li&gt;
&lt;li&gt;ca.pem&lt;/li&gt;
&lt;li&gt;kubernetes-key.pem&lt;/li&gt;
&lt;li&gt;kubernetes.pem&lt;/li&gt;
&lt;li&gt;kube-proxy.pem&lt;/li&gt;
&lt;li&gt;kube-proxy-key.pem&lt;/li&gt;
&lt;li&gt;admin.pem&lt;/li&gt;
&lt;li&gt;admin-key.pem&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨è¯ä¹¦çš„ç»„ä»¶å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;etcdï¼šä½¿ç”¨ ca.pemã€kubernetes-key.pemã€kubernetes.pemï¼›&lt;/li&gt;
&lt;li&gt;kube-apiserverï¼šä½¿ç”¨ ca.pemã€kubernetes-key.pemã€kubernetes.pemï¼›&lt;/li&gt;
&lt;li&gt;kubeletï¼šä½¿ç”¨ ca.pemï¼›&lt;/li&gt;
&lt;li&gt;kube-proxyï¼šä½¿ç”¨ ca.pemã€kube-proxy-key.pemã€kube-proxy.pemï¼›&lt;/li&gt;
&lt;li&gt;kubectlï¼šä½¿ç”¨ ca.pemã€admin-key.pemã€admin.pemï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;kube-controller&lt;/code&gt;ã€&lt;code&gt;kube-scheduler&lt;/code&gt; å½“å‰éœ€è¦å’Œ &lt;code&gt;kube-apiserver&lt;/code&gt; éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šä¸”ä½¿ç”¨éå®‰å…¨ç«¯å£é€šä¿¡ï¼Œæ•…ä¸éœ€è¦è¯ä¹¦ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®‰è£…-cfssl&#34;&gt;å®‰è£… &lt;code&gt;CFSSL&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æºç åŒ…å®‰è£…&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64
$ chmod +x cfssl_linux-amd64
$ sudo mv cfssl_linux-amd64 /root/local/bin/cfssl

$ wget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64
$ chmod +x cfssljson_linux-amd64
$ sudo mv cfssljson_linux-amd64 /root/local/bin/cfssljson

$ wget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64
$ chmod +x cfssl-certinfo_linux-amd64
$ sudo mv cfssl-certinfo_linux-amd64 /root/local/bin/cfssl-certinfo

$ export PATH=/root/local/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;æ–¹å¼äºŒï¼šä½¿ç”¨goå‘½ä»¤å®‰è£…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„ç³»ç»Ÿä¸­å®‰è£…äº†Go1.7.5ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…æ›´å¿«æ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$go get -u github.com/cloudflare/cfssl/cmd/...
$echo $GOPATH
/usr/local
$ls /usr/local/bin/cfssl*
cfssl cfssl-bundle cfssl-certinfo cfssljson cfssl-newkey cfssl-scan
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;$GOPATH/bin&lt;/code&gt;ç›®å½•ä¸‹å¾—åˆ°ä»¥cfsslå¼€å¤´çš„å‡ ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åˆ›å»º-ca-certificate-authority&#34;&gt;åˆ›å»º CA (Certificate Authority)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»º CA é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ mkdir /root/ssl
$ cd /root/ssl
$ cfssl print-defaults config &amp;gt; config.json
$ cfssl print-defaults csr &amp;gt; csr.json
$ cat ca-config.json
{
  &amp;quot;signing&amp;quot;: {
    &amp;quot;default&amp;quot;: {
      &amp;quot;expiry&amp;quot;: &amp;quot;8760h&amp;quot;
    },
    &amp;quot;profiles&amp;quot;: {
      &amp;quot;kubernetes&amp;quot;: {
        &amp;quot;usages&amp;quot;: [
            &amp;quot;signing&amp;quot;,
            &amp;quot;key encipherment&amp;quot;,
            &amp;quot;server auth&amp;quot;,
            &amp;quot;client auth&amp;quot;
        ],
        &amp;quot;expiry&amp;quot;: &amp;quot;8760h&amp;quot;
      }
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å­—æ®µè¯´æ˜&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ca-config.json&lt;/code&gt;ï¼šå¯ä»¥å®šä¹‰å¤šä¸ª profilesï¼Œåˆ†åˆ«æŒ‡å®šä¸åŒçš„è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨åœºæ™¯ç­‰å‚æ•°ï¼›åç»­åœ¨ç­¾åè¯ä¹¦æ—¶ä½¿ç”¨æŸä¸ª profileï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;signing&lt;/code&gt;ï¼šè¡¨ç¤ºè¯¥è¯ä¹¦å¯ç”¨äºç­¾åå…¶å®ƒè¯ä¹¦ï¼›ç”Ÿæˆçš„ ca.pem è¯ä¹¦ä¸­ &lt;code&gt;CA=TRUE&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;server auth&lt;/code&gt;ï¼šè¡¨ç¤ºclientå¯ä»¥ç”¨è¯¥ CA å¯¹serveræä¾›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;client auth&lt;/code&gt;ï¼šè¡¨ç¤ºserverå¯ä»¥ç”¨è¯¥CAå¯¹clientæä¾›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»º CA è¯ä¹¦ç­¾åè¯·æ±‚&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat ca-csr.json
{
  &amp;quot;CN&amp;quot;: &amp;quot;kubernetes&amp;quot;,
  &amp;quot;key&amp;quot;: {
    &amp;quot;algo&amp;quot;: &amp;quot;rsa&amp;quot;,
    &amp;quot;size&amp;quot;: 2048
  },
  &amp;quot;names&amp;quot;: [
    {
      &amp;quot;C&amp;quot;: &amp;quot;CN&amp;quot;,
      &amp;quot;ST&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;L&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;O&amp;quot;: &amp;quot;k8s&amp;quot;,
      &amp;quot;OU&amp;quot;: &amp;quot;System&amp;quot;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;CN&amp;rdquo;ï¼š&lt;code&gt;Common Name&lt;/code&gt;ï¼Œkube-apiserver ä»è¯ä¹¦ä¸­æå–è¯¥å­—æ®µä½œä¸ºè¯·æ±‚çš„ç”¨æˆ·å (User Name)ï¼›æµè§ˆå™¨ä½¿ç”¨è¯¥å­—æ®µéªŒè¯ç½‘ç«™æ˜¯å¦åˆæ³•ï¼›&lt;/li&gt;
&lt;li&gt;&amp;ldquo;O&amp;rdquo;ï¼š&lt;code&gt;Organization&lt;/code&gt;ï¼Œkube-apiserver ä»è¯ä¹¦ä¸­æå–è¯¥å­—æ®µä½œä¸ºè¯·æ±‚ç”¨æˆ·æ‰€å±çš„ç»„ (Group)ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ç”Ÿæˆ CA è¯ä¹¦å’Œç§é’¥&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cfssl gencert -initca ca-csr.json | cfssljson -bare ca
$ ls ca*
ca-config.json  ca.csr  ca-csr.json  ca-key.pem  ca.pem
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ›å»º-kubernetes-è¯ä¹¦&#34;&gt;åˆ›å»º kubernetes è¯ä¹¦&lt;/h2&gt;

&lt;p&gt;åˆ›å»º kubernetes è¯ä¹¦ç­¾åè¯·æ±‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat kubernetes-csr.json
{
    &amp;quot;CN&amp;quot;: &amp;quot;kubernetes&amp;quot;,
    &amp;quot;hosts&amp;quot;: [
      &amp;quot;127.0.0.1&amp;quot;,
      &amp;quot;172.20.0.112&amp;quot;,
      &amp;quot;172.20.0.113&amp;quot;,
      &amp;quot;172.20.0.114&amp;quot;,
      &amp;quot;172.20.0.115&amp;quot;,
      &amp;quot;10.254.0.1&amp;quot;,
      &amp;quot;kubernetes&amp;quot;,
      &amp;quot;kubernetes.default&amp;quot;,
      &amp;quot;kubernetes.default.svc&amp;quot;,
      &amp;quot;kubernetes.default.svc.cluster&amp;quot;,
      &amp;quot;kubernetes.default.svc.cluster.local&amp;quot;
    ],
    &amp;quot;key&amp;quot;: {
        &amp;quot;algo&amp;quot;: &amp;quot;rsa&amp;quot;,
        &amp;quot;size&amp;quot;: 2048
    },
    &amp;quot;names&amp;quot;: [
        {
            &amp;quot;C&amp;quot;: &amp;quot;CN&amp;quot;,
            &amp;quot;ST&amp;quot;: &amp;quot;BeiJing&amp;quot;,
            &amp;quot;L&amp;quot;: &amp;quot;BeiJing&amp;quot;,
            &amp;quot;O&amp;quot;: &amp;quot;k8s&amp;quot;,
            &amp;quot;OU&amp;quot;: &amp;quot;System&amp;quot;
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;å¦‚æœ hosts å­—æ®µä¸ä¸ºç©ºåˆ™éœ€è¦æŒ‡å®šæˆæƒä½¿ç”¨è¯¥è¯ä¹¦çš„ &lt;strong&gt;IP æˆ–åŸŸååˆ—è¡¨&lt;/strong&gt;ï¼Œç”±äºè¯¥è¯ä¹¦åç»­è¢« &lt;code&gt;etcd&lt;/code&gt; é›†ç¾¤å’Œ &lt;code&gt;kubernetes master&lt;/code&gt; é›†ç¾¤ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸Šé¢åˆ†åˆ«æŒ‡å®šäº† &lt;code&gt;etcd&lt;/code&gt; é›†ç¾¤ã€&lt;code&gt;kubernetes master&lt;/code&gt; é›†ç¾¤çš„ä¸»æœº IP å’Œ &lt;strong&gt;&lt;code&gt;kubernetes&lt;/code&gt; æœåŠ¡çš„æœåŠ¡ IP&lt;/strong&gt;ï¼ˆä¸€èˆ¬æ˜¯ &lt;code&gt;kue-apiserver&lt;/code&gt; æŒ‡å®šçš„ &lt;code&gt;service-cluster-ip-range&lt;/code&gt; ç½‘æ®µçš„ç¬¬ä¸€ä¸ªIPï¼Œå¦‚ 10.254.0.1ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ç”Ÿæˆ kubernetes è¯ä¹¦å’Œç§é’¥&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kubernetes-csr.json | cfssljson -bare kubernetes
$ ls kuberntes*
kubernetes.csr  kubernetes-csr.json  kubernetes-key.pem  kubernetes.pem
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šç›¸å…³å‚æ•°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ echo &#39;{&amp;quot;CN&amp;quot;:&amp;quot;kubernetes&amp;quot;,&amp;quot;hosts&amp;quot;:[&amp;quot;&amp;quot;],&amp;quot;key&amp;quot;:{&amp;quot;algo&amp;quot;:&amp;quot;rsa&amp;quot;,&amp;quot;size&amp;quot;:2048}}&#39; | cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes -hostname=&amp;quot;127.0.0.1,10.64.3.7,10.254.0.1,kubernetes,kubernetes.default&amp;quot; - | cfssljson -bare kubernetes
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ›å»º-admin-è¯ä¹¦&#34;&gt;åˆ›å»º admin è¯ä¹¦&lt;/h2&gt;

&lt;p&gt;åˆ›å»º admin è¯ä¹¦ç­¾åè¯·æ±‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat admin-csr.json
{
  &amp;quot;CN&amp;quot;: &amp;quot;admin&amp;quot;,
  &amp;quot;hosts&amp;quot;: [],
  &amp;quot;key&amp;quot;: {
    &amp;quot;algo&amp;quot;: &amp;quot;rsa&amp;quot;,
    &amp;quot;size&amp;quot;: 2048
  },
  &amp;quot;names&amp;quot;: [
    {
      &amp;quot;C&amp;quot;: &amp;quot;CN&amp;quot;,
      &amp;quot;ST&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;L&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;O&amp;quot;: &amp;quot;system:masters&amp;quot;,
      &amp;quot;OU&amp;quot;: &amp;quot;System&amp;quot;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;åç»­ &lt;code&gt;kube-apiserver&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;RBAC&lt;/code&gt; å¯¹å®¢æˆ·ç«¯(å¦‚ &lt;code&gt;kubelet&lt;/code&gt;ã€&lt;code&gt;kube-proxy&lt;/code&gt;ã€&lt;code&gt;Pod&lt;/code&gt;)è¯·æ±‚è¿›è¡Œæˆæƒï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kube-apiserver&lt;/code&gt; é¢„å®šä¹‰äº†ä¸€äº› &lt;code&gt;RBAC&lt;/code&gt; ä½¿ç”¨çš„ &lt;code&gt;RoleBindings&lt;/code&gt;ï¼Œå¦‚ &lt;code&gt;cluster-admin&lt;/code&gt; å°† Group &lt;code&gt;system:masters&lt;/code&gt; ä¸ Role &lt;code&gt;cluster-admin&lt;/code&gt; ç»‘å®šï¼Œè¯¥ Role æˆäºˆäº†è°ƒç”¨&lt;code&gt;kube-apiserver&lt;/code&gt; çš„&lt;strong&gt;æ‰€æœ‰ API&lt;/strong&gt;çš„æƒé™ï¼›&lt;/li&gt;
&lt;li&gt;OU æŒ‡å®šè¯¥è¯ä¹¦çš„ Group ä¸º &lt;code&gt;system:masters&lt;/code&gt;ï¼Œ&lt;code&gt;kubelet&lt;/code&gt; ä½¿ç”¨è¯¥è¯ä¹¦è®¿é—® &lt;code&gt;kube-apiserver&lt;/code&gt; æ—¶ ï¼Œç”±äºè¯ä¹¦è¢« CA ç­¾åï¼Œæ‰€ä»¥è®¤è¯é€šè¿‡ï¼ŒåŒæ—¶ç”±äºè¯ä¹¦ç”¨æˆ·ç»„ä¸ºç»è¿‡é¢„æˆæƒçš„ &lt;code&gt;system:masters&lt;/code&gt;ï¼Œæ‰€ä»¥è¢«æˆäºˆè®¿é—®æ‰€æœ‰ API çš„æƒé™ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç”Ÿæˆ admin è¯ä¹¦å’Œç§é’¥&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json | cfssljson -bare admin
$ ls admin*
admin.csr  admin-csr.json  admin-key.pem  admin.pem
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ›å»º-kube-proxy-è¯ä¹¦&#34;&gt;åˆ›å»º kube-proxy è¯ä¹¦&lt;/h2&gt;

&lt;p&gt;åˆ›å»º kube-proxy è¯ä¹¦ç­¾åè¯·æ±‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cat kube-proxy-csr.json
{
  &amp;quot;CN&amp;quot;: &amp;quot;system:kube-proxy&amp;quot;,
  &amp;quot;hosts&amp;quot;: [],
  &amp;quot;key&amp;quot;: {
    &amp;quot;algo&amp;quot;: &amp;quot;rsa&amp;quot;,
    &amp;quot;size&amp;quot;: 2048
  },
  &amp;quot;names&amp;quot;: [
    {
      &amp;quot;C&amp;quot;: &amp;quot;CN&amp;quot;,
      &amp;quot;ST&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;L&amp;quot;: &amp;quot;BeiJing&amp;quot;,
      &amp;quot;O&amp;quot;: &amp;quot;k8s&amp;quot;,
      &amp;quot;OU&amp;quot;: &amp;quot;System&amp;quot;
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;CN æŒ‡å®šè¯¥è¯ä¹¦çš„ User ä¸º &lt;code&gt;system:kube-proxy&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kube-apiserver&lt;/code&gt; é¢„å®šä¹‰çš„ RoleBinding &lt;code&gt;cluster-admin&lt;/code&gt; å°†User &lt;code&gt;system:kube-proxy&lt;/code&gt; ä¸ Role &lt;code&gt;system:node-proxier&lt;/code&gt; ç»‘å®šï¼Œè¯¥ Role æˆäºˆäº†è°ƒç”¨ &lt;code&gt;kube-apiserver&lt;/code&gt; Proxy ç›¸å…³ API çš„æƒé™ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç”Ÿæˆ kube-proxy å®¢æˆ·ç«¯è¯ä¹¦å’Œç§é’¥&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes  kube-proxy-csr.json | cfssljson -bare kube-proxy
$ ls kube-proxy*
kube-proxy.csr  kube-proxy-csr.json  kube-proxy-key.pem  kube-proxy.pem
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æ ¡éªŒè¯ä¹¦&#34;&gt;æ ¡éªŒè¯ä¹¦&lt;/h2&gt;

&lt;p&gt;ä»¥ kubernetes è¯ä¹¦ä¸ºä¾‹&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨-opsnssl-å‘½ä»¤&#34;&gt;ä½¿ç”¨ &lt;code&gt;opsnssl&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ openssl x509  -noout -text -in  kubernetes.pem
...
    Signature Algorithm: sha256WithRSAEncryption
        Issuer: C=CN, ST=BeiJing, L=BeiJing, O=k8s, OU=System, CN=Kubernetes
        Validity
            Not Before: Apr  5 05:36:00 2017 GMT
            Not After : Apr  5 05:36:00 2018 GMT
        Subject: C=CN, ST=BeiJing, L=BeiJing, O=k8s, OU=System, CN=kubernetes
...
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                DD:52:04:43:10:13:A9:29:24:17:3A:0E:D7:14:DB:36:F8:6C:E0:E0
            X509v3 Authority Key Identifier:
                keyid:44:04:3B:60:BD:69:78:14:68:AF:A0:41:13:F6:17:07:13:63:58:CD

            X509v3 Subject Alternative Name:
                DNS:kubernetes, DNS:kubernetes.default, DNS:kubernetes.default.svc, DNS:kubernetes.default.svc.cluster, DNS:kubernetes.default.svc.cluster.local, IP Address:127.0.0.1, IP Address:10.64.3.7, IP Address:10.254.0.1
...
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;ç¡®è®¤ &lt;code&gt;Issuer&lt;/code&gt; å­—æ®µçš„å†…å®¹å’Œ &lt;code&gt;ca-csr.json&lt;/code&gt; ä¸€è‡´ï¼›&lt;/li&gt;
&lt;li&gt;ç¡®è®¤ &lt;code&gt;Subject&lt;/code&gt; å­—æ®µçš„å†…å®¹å’Œ &lt;code&gt;kubernetes-csr.json&lt;/code&gt; ä¸€è‡´ï¼›&lt;/li&gt;
&lt;li&gt;ç¡®è®¤ &lt;code&gt;X509v3 Subject Alternative Name&lt;/code&gt; å­—æ®µçš„å†…å®¹å’Œ &lt;code&gt;kubernetes-csr.json&lt;/code&gt; ä¸€è‡´ï¼›&lt;/li&gt;
&lt;li&gt;ç¡®è®¤ &lt;code&gt;X509v3 Key Usageã€Extended Key Usage&lt;/code&gt; å­—æ®µçš„å†…å®¹å’Œ &lt;code&gt;ca-config.json&lt;/code&gt; ä¸­ &lt;code&gt;kubernetes&lt;/code&gt; profile ä¸€è‡´ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;ä½¿ç”¨-cfssl-certinfo-å‘½ä»¤&#34;&gt;ä½¿ç”¨ &lt;code&gt;cfssl-certinfo&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cfssl-certinfo -cert kubernetes.pem
...
{
  &amp;quot;subject&amp;quot;: {
    &amp;quot;common_name&amp;quot;: &amp;quot;kubernetes&amp;quot;,
    &amp;quot;country&amp;quot;: &amp;quot;CN&amp;quot;,
    &amp;quot;organization&amp;quot;: &amp;quot;k8s&amp;quot;,
    &amp;quot;organizational_unit&amp;quot;: &amp;quot;System&amp;quot;,
    &amp;quot;locality&amp;quot;: &amp;quot;BeiJing&amp;quot;,
    &amp;quot;province&amp;quot;: &amp;quot;BeiJing&amp;quot;,
    &amp;quot;names&amp;quot;: [
      &amp;quot;CN&amp;quot;,
      &amp;quot;BeiJing&amp;quot;,
      &amp;quot;BeiJing&amp;quot;,
      &amp;quot;k8s&amp;quot;,
      &amp;quot;System&amp;quot;,
      &amp;quot;kubernetes&amp;quot;
    ]
  },
  &amp;quot;issuer&amp;quot;: {
    &amp;quot;common_name&amp;quot;: &amp;quot;Kubernetes&amp;quot;,
    &amp;quot;country&amp;quot;: &amp;quot;CN&amp;quot;,
    &amp;quot;organization&amp;quot;: &amp;quot;k8s&amp;quot;,
    &amp;quot;organizational_unit&amp;quot;: &amp;quot;System&amp;quot;,
    &amp;quot;locality&amp;quot;: &amp;quot;BeiJing&amp;quot;,
    &amp;quot;province&amp;quot;: &amp;quot;BeiJing&amp;quot;,
    &amp;quot;names&amp;quot;: [
      &amp;quot;CN&amp;quot;,
      &amp;quot;BeiJing&amp;quot;,
      &amp;quot;BeiJing&amp;quot;,
      &amp;quot;k8s&amp;quot;,
      &amp;quot;System&amp;quot;,
      &amp;quot;Kubernetes&amp;quot;
    ]
  },
  &amp;quot;serial_number&amp;quot;: &amp;quot;174360492872423263473151971632292895707129022309&amp;quot;,
  &amp;quot;sans&amp;quot;: [
    &amp;quot;kubernetes&amp;quot;,
    &amp;quot;kubernetes.default&amp;quot;,
    &amp;quot;kubernetes.default.svc&amp;quot;,
    &amp;quot;kubernetes.default.svc.cluster&amp;quot;,
    &amp;quot;kubernetes.default.svc.cluster.local&amp;quot;,
    &amp;quot;127.0.0.1&amp;quot;,
    &amp;quot;10.64.3.7&amp;quot;,
    &amp;quot;10.254.0.1&amp;quot;
  ],
  &amp;quot;not_before&amp;quot;: &amp;quot;2017-04-05T05:36:00Z&amp;quot;,
  &amp;quot;not_after&amp;quot;: &amp;quot;2018-04-05T05:36:00Z&amp;quot;,
  &amp;quot;sigalg&amp;quot;: &amp;quot;SHA256WithRSA&amp;quot;,
...
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ†å‘è¯ä¹¦&#34;&gt;åˆ†å‘è¯ä¹¦&lt;/h2&gt;

&lt;p&gt;å°†ç”Ÿæˆçš„è¯ä¹¦å’Œç§˜é’¥æ–‡ä»¶ï¼ˆåç¼€åä¸º&lt;code&gt;.pem&lt;/code&gt;ï¼‰æ‹·è´åˆ°æ‰€æœ‰æœºå™¨çš„ &lt;code&gt;/etc/kubernetes/ssl&lt;/code&gt; ç›®å½•ä¸‹å¤‡ç”¨ï¼›&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ sudo mkdir -p /etc/kubernetes/ssl
$ sudo cp *.pem /etc/kubernetes/ssl
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://coreos.com/os/docs/latest/generate-self-signed-certificates.html&#34;&gt;Generate self-signed certificates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/kelseyhightower/kubernetes-the-hard-way/blob/master/docs/02-certificate-authority.md&#34;&gt;Setting up a Certificate Authority and Creating TLS Certificates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blogs.msdn.microsoft.com/kaushal/2012/02/17/client-certificates-vs-server-certificates/&#34;&gt;Client Certificates V/s Server Certificates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.jobbole.com/104919/&#34;&gt;æ•°å­—è¯ä¹¦åŠ CA çš„æ‰«ç›²ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>ã€Šäº‘è®¡ç®—æŠ€æœ¯æ¶æ„ä¸å®è·µï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹è¯»åæ„Ÿ</title>
      <link>http://rootsongjc.github.io/blogs/cloud-computing-architecture-practice/</link>
      <pubDate>Sat, 08 Apr 2017 12:29:36 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/cloud-computing-architecture-practice/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20150406003.jpg&#34; alt=&#34;é•¿æ±Ÿä¸‰å³¡&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šé•¿æ±Ÿä¸‰å³¡å¤§å@æ¹–åŒ—å®œæ˜Œ Apr 6,2015ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘ï¼ˆ2017å¹´3æœˆï¼‰å‹äººæ¨èäº†ä¸€æœ¬ä¹¦ï¼Œæ˜¯åä¸ºçš„å·¥ç¨‹å¸ˆå†™çš„ã€Šäº‘è®¡ç®—æ¶æ„ä¸å®è·µç¬¬äºŒç‰ˆã€‹ï¼Œæ­£å¥½åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è¿™æœ¬ä¹¦çš„pdfï¼Œåˆ†äº«ç»™å¤§å®¶ï¼Œ&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/docs/%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E8%B7%B5%E7%AC%AC2%E7%89%88.pdf&#34;&gt;ç‚¹è¿™é‡Œä¸‹è½½&lt;/a&gt;ï¼Œä¹¦æ˜¯æ–‡å­—ç‰ˆçš„ï¼Œå¤§å°13.04MBï¼Œé™¤äº†ç« èŠ‚é¡ºåºæœ‰ç‚¹é—®é¢˜å¤–æ²¡æœ‰å…¶ä»–ä»€ä¹ˆé—®é¢˜ã€‚è¿™æ˜¯è¯¥ä¹¦çš„ç¬¬äºŒç‰ˆï¼Œç¬¬ä¸€ç‰ˆ2014å¹´9æœˆå‡ºç‰ˆï¼Œç¬¬äºŒç‰ˆ2016å¹´9æœˆå‡ºç‰ˆï¼Œç¬¬äºŒç‰ˆçš„ç¼–è€…å›¢é˜Ÿå±…ç„¶æœ‰50äººä¹‹å¤šğŸ˜“&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒç‰ˆåˆ†äº«äº†åä¸ºåœ¨äº‘è®¡ç®—æ ¸å¿ƒç«äº‰åŠ›æ„å»ºä¸ä»·å€¼è½¬æ¢æ–¹é¢çš„ç»éªŒä¸å»ºè®®ï¼Œå¹¶è¡¥å……äº†ä¸šç•Œåœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¡Œä¸šäº‘ä»¥åŠç”µä¿¡ç½‘ç»œäº‘åŒ–å•†ç”¨è½åœ°ä¸æŠ€æœ¯åº”ç”¨æ–¹é¢çš„æˆåŠŸä¼˜ç§€å®è·µã€‚å¢åŠ äº†å¯¹Dockerå®¹å™¨ä¸å¾®æœåŠ¡æ•æ·è¿­ä»£ã€å¤§æ•°æ®ä¸æ•°æ®åº“äº‘åŒ–ã€è¡Œä¸šå»ºæ¨¡ä¸æœºå™¨å­¦ä¹ ç®—æ³•ã€æ··åˆäº‘ä¸ç®¡ç†è‡ªåŠ¨åŒ–ç¼–æ’ã€äº‘ç”Ÿæ€å»ºè®¾ç­‰æ–¹é¢çš„ä»‹ç»ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¬¬1ç« -äº‘è®¡ç®—çš„å•†ä¸šåŠ¨åŠ›ä¸æŠ€æœ¯è¶‹åŠ¿&#34;&gt;ç¬¬1ç«  äº‘è®¡ç®—çš„å•†ä¸šåŠ¨åŠ›ä¸æŠ€æœ¯è¶‹åŠ¿&lt;/h2&gt;

&lt;p&gt;â€‹&lt;br /&gt;
â€‹&lt;br /&gt;
â€‹&lt;/p&gt;

&lt;p&gt;â€‹&lt;br /&gt;
â€‹&lt;br /&gt;
â€‹&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation/</link>
      <pubDate>Fri, 07 Apr 2017 20:13:24 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20160430080.jpg&#34; alt=&#34;å¤åŒ—æ°´é•‡&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šç å¤´@å¤åŒ—æ°´é•‡ Apr 30,2016ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;åœ¨&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/&#34;&gt;å®‰è£…å¥½äº†Kubernetesé›†ç¾¤&lt;/a&gt;ã€&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-network-config/&#34;&gt;é…ç½®å¥½äº†flannelç½‘ç»œ&lt;/a&gt;ã€&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/&#34;&gt;å®‰è£…äº†Kubernetes Dashboard&lt;/a&gt;å’Œ&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-heapster-installation/&#34;&gt;é…ç½®Heapsterç›‘æ§æ’ä»¶&lt;/a&gt;åï¼Œè¿˜æœ‰ä¸€é¡¹é‡è¦çš„å·¥ä½œï¼Œä¸ºäº†è°ƒè¯•å’Œæ•…éšœæ’æŸ¥ï¼Œè¿˜éœ€è¦è¿›è¡Œæ—¥å¿—æ”¶é›†å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®˜æ–¹æ–‡æ¡£&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/cluster-administration/logging/&#34;&gt;Kubernetes Logging and Monitoring Cluster Activity&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/debug-application-cluster/logging-elasticsearch-kibana/&#34;&gt;Logging Using Elasticsearch and Kibana&lt;/a&gt;ï¼šä¸è¿‡è¿™ç¯‡æ–‡ç« æ˜¯åœ¨GCEä¸Šé…ç½®çš„ï¼Œå‚è€ƒä»·å€¼ä¸å¤§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®¹å™¨æ—¥å¿—çš„å­˜åœ¨å½¢å¼&#34;&gt;å®¹å™¨æ—¥å¿—çš„å­˜åœ¨å½¢å¼&lt;/h2&gt;

&lt;p&gt;ç›®å‰å®¹å™¨æ—¥å¿—æœ‰ä¸¤ç§è¾“å‡ºå½¢å¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;stdout,stderræ ‡å‡†è¾“å‡º&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§å½¢å¼çš„æ—¥å¿—è¾“å‡ºæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code&gt;docker logs&lt;/code&gt;æŸ¥çœ‹æ—¥å¿—ï¼Œkubernetesé›†ç¾¤ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨&lt;code&gt;kubectl logs&lt;/code&gt;ç±»ä¼¼çš„å½¢å¼æŸ¥çœ‹æ—¥å¿—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ—¥å¿—æ–‡ä»¶è®°å½•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§æ—¥å¿—è¾“å‡ºæˆ‘ä»¬æ— æ³•ä»ä»¥ä¸Šæ–¹æ³•æŸ¥çœ‹æ—¥å¿—å†…å®¹ï¼Œåªèƒ½&lt;code&gt;tail&lt;/code&gt;æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;fluentdä»‹ç»&#34;&gt;Fluentdä»‹ç»&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/fluent/fluentd&#34;&gt;Fluentd&lt;/a&gt;æ˜¯ä½¿ç”¨Rubyç¼–å†™çš„ï¼Œé€šè¿‡åœ¨åç«¯ç³»ç»Ÿä¹‹é—´æä¾›&lt;strong&gt;ç»Ÿä¸€çš„æ—¥å¿—è®°å½•å±‚&lt;/strong&gt;æ¥ä»åç«¯ç³»ç»Ÿä¸­è§£è€¦æ•°æ®æºã€‚
æ­¤å±‚å…è®¸å¼€å‘äººå‘˜å’Œæ•°æ®åˆ†æäººå‘˜åœ¨ç”Ÿæˆæ—¥å¿—æ—¶ä½¿ç”¨å¤šç§ç±»å‹çš„æ—¥å¿—ã€‚
ç»Ÿä¸€çš„æ—¥å¿—è®°å½•å±‚å¯ä»¥è®©æ‚¨å’Œæ‚¨çš„ç»„ç»‡æ›´å¥½åœ°ä½¿ç”¨æ•°æ®ï¼Œå¹¶æ›´å¿«åœ°åœ¨æ‚¨çš„è½¯ä»¶ä¸Šè¿›è¡Œè¿­ä»£ã€‚
ä¹Ÿå°±æ˜¯è¯´fluentdæ˜¯ä¸€ä¸ªé¢å‘å¤šç§æ•°æ®æ¥æºä»¥åŠé¢å‘å¤šç§æ•°æ®å‡ºå£çš„æ—¥å¿—æ”¶é›†å™¨ã€‚å¦å¤–å®ƒé™„å¸¦äº†æ—¥å¿—è½¬å‘çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://camo.githubusercontent.com/c4abfe337c0b54b36f81bce78481f8965acbc7a9/687474703a2f2f646f63732e666c75656e74642e6f72672f696d616765732f666c75656e74642d6172636869746563747572652e706e67&#34; alt=&#34;arch&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Fluentdæ”¶é›†çš„&lt;strong&gt;event&lt;/strong&gt;ç”±ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ç»„æˆï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tag&lt;/strong&gt;ï¼šå­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ç‚¹éš”å¼€ï¼Œå¦‚myapp.access&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Time&lt;/strong&gt;ï¼šUNIXæ—¶é—´æ ¼å¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Record&lt;/strong&gt;ï¼šJSONæ ¼å¼&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;fluentdç‰¹ç‚¹&#34;&gt;Fluentdç‰¹ç‚¹&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;éƒ¨ç½²ç®€å•çµæ´»&lt;/li&gt;
&lt;li&gt;å¼€æº&lt;/li&gt;
&lt;li&gt;ç»è¿‡éªŒè¯çš„å¯é æ€§å’Œæ€§èƒ½&lt;/li&gt;
&lt;li&gt;ç¤¾åŒºæ”¯æŒï¼Œæ’ä»¶è¾ƒå¤š&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨jsonæ ¼å¼äº‹ä»¶æ ¼å¼&lt;/li&gt;
&lt;li&gt;å¯æ‹”æ’çš„æ¶æ„è®¾è®¡&lt;/li&gt;
&lt;li&gt;ä½èµ„æºè¦æ±‚&lt;/li&gt;
&lt;li&gt;å†…ç½®é«˜å¯é æ€§&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h2&gt;

&lt;p&gt;æŸ¥çœ‹&lt;code&gt;cluster/addons/fluentd-elasticsearch&lt;/code&gt;æ’ä»¶ç›®å½•ï¼Œè·å–åˆ°éœ€è¦ç”¨åˆ°çš„dockeré•œåƒåç§°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$grep -rn &amp;quot;gcr.io&amp;quot; *.yaml
es-controller.yaml:24:      - image: gcr.io/google_containers/elasticsearch:v2.4.1-2
fluentd-es-ds.yaml:26:        image: gcr.io/google_containers/fluentd-elasticsearch:1.22
kibana-controller.yaml:22:        image: gcr.io/google_containers/kibana:v4.6.1-1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;éœ€è¦ç”¨åˆ°çš„é•œåƒ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;gcr.io/google_containers/kibana:v4.6.1-1&lt;/li&gt;
&lt;li&gt;gcr.io/google_containers/elasticsearch:v2.4.1-2&lt;/li&gt;
&lt;li&gt;gcr.io/google_containers/fluentd-elasticsearch:1.22&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å› ä¸ºè¿™äº›é•œåƒåœ¨å¢™å¤–ï¼Œæ‰€ä»¥æˆ‘ç‰¹æ„å¤‡ä»½äº†ä¸€ä»½åœ¨æœ¬åœ°è¿˜æœ‰æ—¶é€Ÿäº‘ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æµ‹è¯•ç¯å¢ƒé•œåƒåç§°&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/elasticsearch:v2.4.1-2&lt;/li&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/kibana:v4.6.1-1&lt;/li&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/fluentd-elasticsearch:1.22&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¤‡ä»½åˆ°æ—¶é€Ÿäº‘ä¸Šçš„é•œåƒåç§°&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/elasticsearch:v2.4.1-2&lt;/li&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/kibana:v4.6.1-1&lt;/li&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/fluentd-elasticsearch:1.22&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¿®æ”¹ä¸Šé¢çš„é‚£ä¸‰ä¸ªyamlæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„é•œåƒåç§°æ”¹æˆæˆ‘ä»¬æµ‹è¯•ç¯å¢ƒä¸­çš„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å¯åŠ¨é›†ç¾¤&#34;&gt;å¯åŠ¨é›†ç¾¤&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨åˆšä¿®æ”¹å¥½yamlæ–‡ä»¶çš„é‚£ä¸ªç›®å½•å¯åŠ¨fluentd-elasticsearchã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl create -f flucentd-elasticsearch
$kubectl get -f fluentd-elasticsearch/
NAME                          DESIRED   CURRENT   READY     AGE
rc/elasticsearch-logging-v1   2         2         2         13m

NAME                        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
svc/elasticsearch-logging   10.254.107.114   &amp;lt;none&amp;gt;        9200/TCP   13m

NAME                  DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE-SELECTOR                              AGE
ds/fluentd-es-v1.22   0         0         0         0            0           beta.kubernetes.io/fluentd-ds-ready=true   13m

NAME                    DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deploy/kibana-logging   1         1         1            1           13m

NAME                 CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
svc/kibana-logging   10.254.104.215   &amp;lt;none&amp;gt;        5601/TCP   13m

$kubectl cluster-info
Kubernetes master is running at http://sz-pg-oam-docker-test-001:8080
Elasticsearch is running at http://sz-pg-oam-docker-test-001:8080/api/v1/proxy/namespaces/kube-system/services/elasticsearch-logging
Heapster is running at http://sz-pg-oam-docker-test-001:8080/api/v1/proxy/namespaces/kube-system/services/heapster
Kibana is running at http://sz-pg-oam-docker-test-001:8080/api/v1/proxy/namespaces/kube-system/services/kibana-logging
monitoring-grafana is running at http://sz-pg-oam-docker-test-001:8080/api/v1/proxy/namespaces/kube-system/services/monitoring-grafana
monitoring-influxdb is running at http://sz-pg-oam-docker-test-001:8080/api/v1/proxy/namespaces/kube-system/services/monitoring-influxdb

To further debug and diagnose cluster problems, use &#39;kubectl cluster-info dump&#39;.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨å®Œæˆï¼Œä½†æ˜¯æŸ¥çœ‹podçš„æ—¥å¿—åä¼šå‘ç°å‡ºé”™äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä½•ä¿è¯æ¯ä¸ªèŠ‚ç‚¹å¯åŠ¨ä¸€ä¸ªFluentdå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨DaemonSetã€‚&lt;/p&gt;

&lt;h3 id=&#34;æ’é”™&#34;&gt;æ’é”™&lt;/h3&gt;

&lt;p&gt;æŸ¥çœ‹å¯åŠ¨çš„podã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl --namespace=kube-system get all
NAME                                       READY     STATUS    RESTARTS   AGE
po/elasticsearch-logging-v1-nshz2          1/1       Running   0          16m
po/elasticsearch-logging-v1-q515j          1/1       Running   0          16m
po/heapster-3669180046-06n3d               1/1       Running   0          23h
po/kibana-logging-4247188994-h8jxx         1/1       Running   0          16m
po/kubernetes-dashboard-1074266307-hsgxx   1/1       Running   0          1d
po/monitoring-grafana-127711743-xl9v1      1/1       Running   0          23h
po/monitoring-influxdb-1411048194-cvxmm    1/1       Running   0          23h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åº”è¯¥åœ¨ä¸ªnodeèŠ‚ç‚¹ä¸Šå¯åŠ¨çš„&lt;strong&gt;fluentd&lt;/strong&gt;æ²¡æœ‰çœ‹åˆ°ã€‚æŸ¥çœ‹logging podçš„æ—¥å¿—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl -n kube-system logs po/elasticsearch-logging-v1-nshz2
F0406 08:30:05.488197       7 elasticsearch_logging_discovery.go:49] Failed to make client: open /var/run/secrets/kubernetes.io/serviceaccount/token: no such file or directory
goroutine 1 [running]:
...
[2017-04-06 08:30:23,450][WARN ][discovery.zen.ping.unicast] [elasticsearch-logging-v1-nshz2] failed to send ping to [{#zen_unicast_1#}{127.0.0.1}{127.0.0.1:9300}]
SendRequestTransportException[[][127.0.0.1:9300][internal:discovery/zen/unicast]]; nested: NodeNotConnectedException[[][127.0.0.1:9300] Node not connected];
	at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:340)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.sendPingRequestToNode(UnicastZenPing.java:440)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.sendPings(UnicastZenPing.java:426)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.ping(UnicastZenPing.java:240)
	at org.elasticsearch.discovery.zen.ping.ZenPingService.ping(ZenPingService.java:106)
	at org.elasticsearch.discovery.zen.ping.ZenPingService.pingAndWait(ZenPingService.java:84)
	at org.elasticsearch.discovery.zen.ZenDiscovery.findMaster(ZenDiscovery.java:945)
	at org.elasticsearch.discovery.zen.ZenDiscovery.innerJoinCluster(ZenDiscovery.java:360)
	at org.elasticsearch.discovery.zen.ZenDiscovery.access$4400(ZenDiscovery.java:96)
	at org.elasticsearch.discovery.zen.ZenDiscovery$JoinThreadControl$1.run(ZenDiscovery.java:1296)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: NodeNotConnectedException[[][127.0.0.1:9300] Node not connected]
	at org.elasticsearch.transport.netty.NettyTransport.nodeChannel(NettyTransport.java:1141)
	at org.elasticsearch.transport.netty.NettyTransport.sendRequest(NettyTransport.java:830)
	at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:329)
	... 12 more
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¸­æœ‰è¿™æ ·çš„æè¿°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;discovery.zen.ping.unicast failed to send ping to [{#zen_unicast_1#}{127.0.0.1}{127.0.0.1:9300}]
SendRequestTransportException[[internal:discovery/zen/unicast]]; nested: NodeNotConnectedException[ Node not connected]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡Œé¢æœ‰ä¸¤ä¸ªé”™è¯¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ— æ³•è®¿é—®åˆ°API Server&lt;/li&gt;
&lt;li&gt;elasticsearchä¸¤ä¸ªèŠ‚ç‚¹é—´äº’pingå¤±è´¥&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯é•œåƒä¸­çš„é…ç½®é—®é¢˜ï¼Œé…ç½®æ–‡ä»¶åœ¨&lt;code&gt;fluentd-es-image/td-agent.conf&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒ&lt;a href=&#34;http://tonybai.com/2017/03/03/implement-kubernetes-cluster-level-logging-with-fluentd-and-elasticsearch-stack/&#34;&gt;ä½¿ç”¨Fluentdå’ŒElasticSearch Stackå®ç°Kubernetesçš„é›†ç¾¤Logging&lt;/a&gt;ï¼ŒTony Baiä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬äº†è§£ä¸‹&lt;a href=&#34;https://kubernetes.io/docs/user-guide/configmap/&#34;&gt;ConfigMap&lt;/a&gt;è¿˜æœ‰&lt;a href=&#34;https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter&#34;&gt;fluent-plugin-kubernetes_metadata_filter&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒæˆ‘çš„å¦ä¸€ç‰‡è¯‘æ–‡&lt;a href=&#34;rootsongjc.github.io/blogs/kubernetes-configmap-introduction&#34;&gt;Kubernetesä¸­ConfigMapè§£æ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;é—®é¢˜æ’æŸ¥&#34;&gt;é—®é¢˜æ’æŸ¥&lt;/h2&gt;

&lt;p&gt;å‰é¢å†™çš„æ˜¯ç›´æ¥ä½¿ç”¨&lt;code&gt;kubectl create -f flucentd-elasticsearch&lt;/code&gt;å‘½ä»¤å¯åŠ¨æ•´ä¸ªfluentd+elasticsearché›†ç¾¤ï¼Œè¿™æ ·å¯åŠ¨çœ‹ä¼¼å¾ˆç®€å•ï¼Œä½†æ˜¯å¯¹äºé—®é¢˜æ’æŸ¥çš„æ—¶å€™ä¸ä¾¿äºæˆ‘ä»¬åˆ†æå‡ºé”™åŸå› ï¼Œå› ä¸ºä½ æ ¹æœ¬ä¸çŸ¥é“æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å’Œå¯åŠ¨é¡ºåºï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬ä¾æ¬¡å¯åŠ¨æ¯ä¸ªæœåŠ¡ï¼Œçœ‹çœ‹èƒŒåéƒ½åšäº†ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;h3 id=&#34;å¯åŠ¨fluentd&#34;&gt;å¯åŠ¨fluentd&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆå¯åŠ¨fluentdæ”¶é›†æ—¥å¿—çš„æœåŠ¡ï¼Œä»&lt;code&gt;fluentd-es-ds.yaml&lt;/code&gt;çš„é…ç½®ä¸­å¯ä»¥çœ‹åˆ°fluentdæ˜¯ä»¥&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/&#34;&gt;DaemonSet&lt;/a&gt;æ–¹å¼æ¥è¿è¡Œçš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;DaemonSetç®€ä»‹&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;DaemonSetèƒ½å¤Ÿè®©æ‰€æœ‰ï¼ˆæˆ–è€…ä¸€äº›ç‰¹å®šï¼‰çš„NodeèŠ‚ç‚¹è¿è¡ŒåŒä¸€ä¸ªpodã€‚å½“èŠ‚ç‚¹åŠ å…¥åˆ°kubernetesé›†ç¾¤ä¸­ï¼Œpodä¼šè¢«ï¼ˆDaemonSetï¼‰è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå½“èŠ‚ç‚¹ä»kubernetesé›†ç¾¤ä¸­è¢«ç§»é™¤ï¼Œè¢«ï¼ˆDaemonSetï¼‰è°ƒåº¦çš„podä¼šè¢«ç§»é™¤ï¼Œå¦‚æœåˆ é™¤DaemonSetï¼Œæ‰€æœ‰è·Ÿè¿™ä¸ªDaemonSetç›¸å…³çš„podséƒ½ä¼šè¢«åˆ é™¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.dockerinfo.net/1139.html&#34;&gt;DaemonSetè¯¦ç»†ä»‹ç»&lt;/a&gt;ï¼Œè¿™æ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç¿»è¯‘ï¼Œå…¶ä¸­è¿˜æœ‰ç¤ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨fluentd&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl create -f fluentd-es-ds.yaml
daemonset &amp;quot;fluentd-es-v1.22&amp;quot; created
$kubectl get -f fluentd-es-ds.yaml 
NAME               DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE-SELECTOR                              AGE
fluentd-es-v1.22   0         0         0         0            0           beta.kubernetes.io/fluentd-ds-ready=true   2m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨æ²¡æœ‰ä¿®æ”¹&lt;code&gt;fluentd-es-ds.yaml&lt;/code&gt;çš„æƒ…å†µä¸‹ç›´æ¥å¯åŠ¨fluentdï¼Œå®é™…ä¸Šä¸€ä¸ªPodä¹Ÿæ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º&lt;strong&gt;NODE-SELECTOR&lt;/strong&gt;é€‰æ‹©çš„labelæ˜¯&lt;code&gt;beta.kubernetes.io/fluentd-ds-ready=true&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å†æ¥çœ‹ä¸‹&lt;strong&gt;node&lt;/strong&gt;çš„&lt;strong&gt;label&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl describe node sz-pg-oam-docker-test-001.tendcloud.com
Name:			sz-pg-oam-docker-test-001.tendcloud.com
Role:			
Labels:			beta.kubernetes.io/arch=amd64
			beta.kubernetes.io/os=linux
			kubernetes.io/hostname=sz-pg-oam-docker-test-001.tendcloud.com
Annotations:		node.alpha.kubernetes.io/ttl=0
			volumes.kubernetes.io/controller-managed-attach-detach=true
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬æ²¡æœ‰ç»™nodeè®¾ç½®&lt;code&gt;beta.kubernetes.io/fluentd-ds-ready=true&lt;/code&gt;çš„labelï¼Œæ‰€ä»¥DaemonSetæ²¡æœ‰è°ƒåº¦ä¸Šå»ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç»™kubernetesé›†ç¾¤çš„ä¸‰ä¸ªnodeæ·»åŠ labelã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl label node sz-pg-oam-docker-test-001.tendcloud.com beta.kubernetes.io/fluentd-ds-ready=true
node &amp;quot;sz-pg-oam-docker-test-001.tendcloud.com&amp;quot; labeled
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç»™å¦å¤–ä¸¤ä¸ªnodeæ‰§è¡ŒåŒæ ·çš„æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨å†æŸ¥çœ‹ä¸‹DaemonSetçš„çŠ¶æ€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl get -f fluentd-es-ds.yaml 
NAME               DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE-SELECTOR                              AGE
fluentd-es-v1.22   3         3         0         3            0           beta.kubernetes.io/fluentd-ds-ready=true   31m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªDeamonSetéƒ½å¯åŠ¨èµ·æ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹ä¸‹fluentdçš„æ—¥å¿—&lt;code&gt;/var/log/fluentd.log&lt;/code&gt;ï¼Œæ—¥å¿—æ˜¯mountåˆ°æœ¬åœ°çš„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2017-04-07 03:53:42 +0000 [info]: adding match pattern=&amp;quot;fluent.**&amp;quot; type=&amp;quot;null&amp;quot;
2017-04-07 03:53:42 +0000 [info]: adding filter pattern=&amp;quot;kubernetes.**&amp;quot; type=&amp;quot;kubernetes_metadata&amp;quot;
2017-04-07 03:53:42 +0000 [error]: config error file=&amp;quot;/etc/td-agent/td-agent.conf&amp;quot; error=&amp;quot;Invalid Kubernetes API v1 endpoint https://10.254.0.1:443/api: SSL_connect returned=1 errno=0 state=error: certificate verify failed&amp;quot;
2017-04-07 03:53:42 +0000 [info]: process finished code=256
2017-04-07 03:53:42 +0000 [warn]: process died within 1 second. exit.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»æ—¥å¿—çš„æœ€åå‡ è¡Œä¸­å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;Invalid Kubernetes API v1 endpoint https://10.254.0.1:443/api: SSL_connect returned=1 errno=0 state=error: certificate verify failed&lt;/code&gt;è¿™æ ·çš„é”™è¯¯ï¼Œè¿™äº›éœ€è¦åœ¨&lt;code&gt;/etc/td-agent/td-agent.conf&lt;/code&gt;æ–‡ä»¶ä¸­é…ç½®çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿™äº›é…ç½®å·²ç»åœ¨åˆ›å»º&lt;code&gt;gcr.io/google_containers/fluentd-elasticsearch:1.22&lt;/code&gt;é•œåƒï¼ˆè¯¥é•œåƒæ˜¯è¿è¡Œå¸¦æœ‰elasticsearchæ’ä»¶çš„fluentdçš„ï¼‰çš„æ—¶å€™å°±å·²ç»copyè¿›å»äº†ï¼Œä»&lt;code&gt;fluentd-elasticsearch/fluentd-es-image/Dockerfile&lt;/code&gt;æ–‡ä»¶ä¸­å°±å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Copy the Fluentd configuration file.
COPY td-agent.conf /etc/td-agent/td-agent.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-configmap-introduction/&#34;&gt;ConfigMap&lt;/a&gt;ï¼Œä¸ç”¨é‡æ–°å†buildé•œåƒï¼Œé€šè¿‡æ–‡ä»¶æŒ‚è½½çš„å½¢å¼æ›¿æ¢é•œåƒä¸­å·²æœ‰çš„td-agent.confæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;tonybai.com&#34;&gt;Tony Bai&lt;/a&gt;ç»™å‡ºçš„ä¸¤ç‚¹å»ºè®®ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨åŸºäºtd-agent.confåˆ›å»ºconfigmapèµ„æºä¹‹å‰ï¼Œéœ€è¦å°†td-agent.confä¸­çš„æ³¨é‡Šè¡Œéƒ½åˆ æ‰ï¼Œå¦åˆ™ç”Ÿæˆçš„configmapçš„å†…å®¹å¯èƒ½ä¸æ­£ç¡®ï¼›&lt;/li&gt;
&lt;li&gt;fluentd podå°†åˆ›å»ºåœ¨kube-systemä¸‹ï¼Œå› æ­¤ConfigMapèµ„æºä¹Ÿéœ€è¦åˆ›å»ºåœ¨kube-system namespaceä¸‹é¢ï¼Œå¦åˆ™kubectl createæ— æ³•æ‰¾åˆ°å¯¹åº”çš„ConfigMapã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨td-agent.confçš„é…ç½®æ–‡ä»¶çš„&lt;filter kubernetes.**&gt;ä¸­å¢åŠ ä¸¤æ¡é…ç½®é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;filter kubernetes.**&amp;gt;
  type kubernetes_metadata
  kubernetes_url sz-pg-oam-docker-test-001.tendcloud.com:8080
  verify_ssl false
&amp;lt;/filter&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»ºConfigMap&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl create configmap td-agent-config --from-file=fluentd-elasticsearch/fluentd-es-image/td-agent.conf -n kube-system
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹åˆšåˆ›å»ºçš„ConfigMap&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl -n kube-system get configmaps td-agent-config -o yaml
apiVersion: v1
data:
  td-agent.conf: |
    &amp;lt;match fluent.**&amp;gt;
      type null
    &amp;lt;/match&amp;gt;
...
&amp;lt;filter kubernetes.**&amp;gt;
  type kubernetes_metadata
  kubernetes_url http://sz-pg-oam-docker-test-001.tendcloud.com:8080
  verify_ssl false
&amp;lt;/filter&amp;gt;
...

&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;âš ï¸ kubernetes_urlåœ°å€è¦åŠ ä¸Š&lt;strong&gt;http&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¿®æ”¹&lt;code&gt;fluentd-es-ds.yaml&lt;/code&gt;æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¢åŠ &lt;code&gt;td-agent.conf&lt;/code&gt;æ–‡ä»¶çš„volumeã€‚&lt;/p&gt;

&lt;p&gt;è¯¥æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;apiVersion: extensions/v1beta1
kind: DaemonSet
metadata:
...
    spec:
     ...
        volumeMounts:
        - name: varlog
          mountPath: /var/log
        - name: varlibdockercontainers
          mountPath: /var/lib/docker/containers
          readOnly: true
        - name: td-agent-config
          mountPath: /etc/td-agent
...
      volumes:
      - name: varlog
        hostPath:
          path: /var/log
      - name: varlibdockercontainers
        hostPath:
          path: /var/lib/docker/containers
      - name: td-agent-config
        configMap:
          name: td-agent-config
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨æ—¥å¿—æ”¶é›†æœåŠ¡&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl create -f ./fluentd-elasticsearch
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å†æŸ¥çœ‹&lt;code&gt;/var/log/fluentd.log&lt;/code&gt;æ—¥å¿—é‡Œé¢å°±æ²¡æœ‰é”™è¯¯äº†ã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹ä¸‹elasticsearch podæ—¥å¿—ï¼Œå‘ç°é‡Œé¢è¿˜æœ‰é”™è¯¯ï¼Œè·Ÿä»¥å‰çš„ä¸€æ ·ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[2017-04-07 10:54:57,858][WARN ][discovery.zen.ping.unicast] [elasticsearch-logging-v1-wxd5f] failed to send ping to [{#zen_unicast_1#}{127.0.0.1}{127.0.0.1:9300}]
SendRequestTransportException[[][127.0.0.1:9300][internal:discovery/zen/unicast]]; nested: NodeNotConnectedException[[][127.0.0.1:9300] Node not connected];
	at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:340)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.sendPingRequestToNode(UnicastZenPing.java:440)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.sendPings(UnicastZenPing.java:426)
	at org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.ping(UnicastZenPing.java:240)
	at org.elasticsearch.discovery.zen.ping.ZenPingService.ping(ZenPingService.java:106)
	at org.elasticsearch.discovery.zen.ping.ZenPingService.pingAndWait(ZenPingService.java:84)
	at org.elasticsearch.discovery.zen.ZenDiscovery.findMaster(ZenDiscovery.java:945)
	at org.elasticsearch.discovery.zen.ZenDiscovery.innerJoinCluster(ZenDiscovery.java:360)
	at org.elasticsearch.discovery.zen.ZenDiscovery.access$4400(ZenDiscovery.java:96)
	at org.elasticsearch.discovery.zen.ZenDiscovery$JoinThreadControl$1.run(ZenDiscovery.java:1296)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: NodeNotConnectedException[[][127.0.0.1:9300] Node not connected]
	at org.elasticsearch.transport.netty.NettyTransport.nodeChannel(NettyTransport.java:1141)
	at org.elasticsearch.transport.netty.NettyTransport.sendRequest(NettyTransport.java:830)
	at org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:329)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹ä¸‹elasticsearch:v2.4.1-2é•œåƒçš„ä»£ç ï¼Œåœ¨&lt;code&gt;fluentd-elasticsearch/es-image&lt;/code&gt;ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•ç»“æ„ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;config
Dockerfile
elasticsearch_logging_discovery.go
Makefile
run.sh
template-k8s-logstash.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»&lt;strong&gt;Dockerfile&lt;/strong&gt;ä¸­å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Dockerfile&#34;&gt;RUN mkdir -p /elasticsearch/config/templates
COPY template-k8s-logstash.json /elasticsearch/config/templates/template-k8s-logstash.json

COPY config /elasticsearch/config

COPY run.sh /
COPY elasticsearch_logging_discovery /

RUN useradd --no-create-home --user-group elasticsearch \
    &amp;amp;&amp;amp; mkdir /data \
    &amp;amp;&amp;amp; chown -R elasticsearch:elasticsearch /elasticsearch

VOLUME [&amp;quot;/data&amp;quot;]
EXPOSE 9200 9300

CMD [&amp;quot;/run.sh&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†æœ¬åœ°çš„&lt;code&gt;config&lt;/code&gt;ç›®å½•ä½œä¸ºé…ç½®æ–‡ä»¶æ‹·è´åˆ°äº†é•œåƒé‡Œï¼Œ&lt;code&gt;run.sh&lt;/code&gt;å¯åŠ¨è„šæœ¬ä¸­æœ‰ä¸‰è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;/elasticsearch_logging_discovery &amp;gt;&amp;gt; /elasticsearch/config/elasticsearch.yml

chown -R elasticsearch:elasticsearch /data

exec gosu elasticsearch /elasticsearch/bin/elasticsearch
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å†è¿›å…¥åˆ°é•œåƒé‡ŒæŸ¥çœ‹ä¸‹&lt;code&gt;/elasticsearch/config/elasticsearch.yml&lt;/code&gt;æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;cluster.name: kubernetes-logging

node.name: ${NODE_NAME}
node.master: ${NODE_MASTER}
node.data: ${NODE_DATA}

transport.tcp.port: ${TRANSPORT_PORT}
http.port: ${HTTP_PORT}

path.data: /data

network.host: 0.0.0.0

discovery.zen.minimum_master_nodes: ${MINIMUM_MASTER_NODES}
discovery.zen.ping.multicast.enabled: false
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;è®°å½•å‡ ä¸ªé—®é¢˜&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Kubernetesä¸­çš„DNSæ²¡æœ‰é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;ElasticSearchçš„é…ç½®æœ‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¯å¦è¦ç”¨ServiceAccountï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;å‚è€ƒ&#34;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://tonybai.com/2017/03/03/implement-kubernetes-cluster-level-logging-with-fluentd-and-elasticsearch-stack/&#34;&gt;ä½¿ç”¨Fluentdå’ŒElasticSearch Stackå®ç°Kubernetesçš„é›†ç¾¤Logging&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://my.oschina.net/newlife111/blog/714574&#34;&gt;åœ¨Kubernetesä¸Šæ­å»ºEFKï¼ˆFluentdï¼‹Elasticsearchï¼‹Kibanaï¼‰&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.cnblogs.com/muzhiye/p/elasticsearch_set_cluster.html&#34;&gt;elasticsearch2.2 é›†ç¾¤æ­å»ºå„ç§å‘&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/fluentd-elasticsearch/es-image/elasticsearch_logging_discovery.go&#34;&gt;elasticsearch_logging_discovery.go&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter&#34;&gt;fluent-plugin-kubernetes_metadata_filter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;To be continuedâ€¦&lt;/strong&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetesçš„ConfigMapè§£æ</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-configmap-introduction/</link>
      <pubDate>Thu, 06 Apr 2017 21:24:20 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-configmap-introduction/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20160430004.jpg&#34; alt=&#34;å¤åŒ—æ°´é•‡&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šé¾™å½¢ç¯ç¬¼@å¤åŒ—æ°´é•‡ Apr 30,2016ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆè¦ç¿»è¯‘è¿™ç¯‡æ–‡ç« ï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨&lt;a href=&#34;rootsongjc.github.io/blogs/kubernetes-fluentd-elasticsearch-installation&#34;&gt;ä½¿ç”¨Fluentdå’ŒElasticSearchæ”¶é›†Kubernetesé›†ç¾¤æ—¥å¿—&lt;/a&gt;çš„æ—¶å€™é‡åˆ°äº†éœ€è¦ä¿®æ”¹é•œåƒä¸­é…ç½®çš„é—®é¢˜ï¼Œ&lt;a href=&#34;https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter&#34;&gt;fluent-plugin-kubernetes_metadata&lt;/a&gt;é‡Œçš„éœ€è¦çš„&lt;a href=&#34;https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/fluentd-elasticsearch/fluentd-es-image/td-agent.conf&#34;&gt;td-agent.conf&lt;/a&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®ConfigMapåŠŸèƒ½åœ¨Kubernetes1.2ç‰ˆæœ¬çš„æ—¶å€™å°±æœ‰äº†ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä¼šä»é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°æˆ–ç¯å¢ƒå˜é‡ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚è¿™äº›é…ç½®ä¿¡æ¯éœ€è¦ä¸docker imageè§£è€¦ï¼Œä½ æ€»ä¸èƒ½æ¯ä¿®æ”¹ä¸€ä¸ªé…ç½®å°±é‡åšä¸€ä¸ªimageå§ï¼ŸConfigMap APIç»™æˆ‘ä»¬æä¾›äº†å‘å®¹å™¨ä¸­æ³¨å…¥é…ç½®ä¿¡æ¯çš„æœºåˆ¶ï¼ŒConfigMapå¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜æ•´ä¸ªé…ç½®æ–‡ä»¶æˆ–è€…JSONäºŒè¿›åˆ¶å¤§å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h2 id=&#34;configmapæ¦‚è§ˆ&#34;&gt;ConfigMapæ¦‚è§ˆ&lt;/h2&gt;

&lt;p&gt;The ConfigMap API resource holds key-value pairs of configuration data that can be consumed in pods or used to store configuration data for system components such as controllers. ConfigMap is similar to [Secrets](), but designed to more conveniently support working with strings that do not contain sensitive information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ConfigMap API&lt;/strong&gt;èµ„æºç”¨æ¥ä¿å­˜&lt;strong&gt;key-value pair&lt;/strong&gt;é…ç½®æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥åœ¨&lt;strong&gt;pods&lt;/strong&gt;é‡Œä½¿ç”¨ï¼Œæˆ–è€…è¢«ç”¨æ¥ä¸ºåƒ&lt;strong&gt;controller&lt;/strong&gt;ä¸€æ ·çš„ç³»ç»Ÿç»„ä»¶å­˜å‚¨é…ç½®æ•°æ®ã€‚è™½ç„¶ConfigMapè·Ÿ&lt;a href=&#34;https://kubernetes.io/docs/user-guide/secrets/&#34;&gt;Secrets&lt;/a&gt;ç±»ä¼¼ï¼Œä½†æ˜¯ConfigMapæ›´æ–¹ä¾¿çš„å¤„ç†ä¸å«æ•æ„Ÿä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚
æ³¨æ„ï¼š&lt;u&gt;ConfigMapsä¸æ˜¯å±æ€§é…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ã€‚&lt;/u&gt;ConfigMapsåªæ˜¯ä½œä¸ºå¤šä¸ªpropertiesæ–‡ä»¶çš„å¼•ç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºLinuxç³»ç»Ÿä¸­çš„&lt;code&gt;/etc&lt;/code&gt;ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨ConfigMapé…ç½®æ¥åˆ›å»ºKuberntes Volumesï¼ŒConfigMapä¸­çš„æ¯ä¸ªdataé¡¹éƒ½ä¼šæˆä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;Note: ConfigMaps are not intended to act as a replacement for a properties file. ConfigMaps are intended to act as a reference to multiple properties files. You can think of them as way to represent something similar to the /etc directory, and the files within, on a Linux computer. One example of this model is creating Kubernetes Volumes from ConfigMaps, where each data item in the ConfigMap becomes a new file.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;kind: ConfigMap
apiVersion: v1
metadata:
  creationTimestamp: 2016-02-18T19:14:38Z
  name: example-config
  namespace: default
data:
  example.property.1: hello
  example.property.2: world
  example.property.file: |-
    property.1=value-1
    property.2=value-2
    property.3=value-3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;data&lt;/code&gt;ä¸€æ åŒ…æ‹¬äº†é…ç½®æ•°æ®ï¼ŒConfigMapå¯ä»¥è¢«ç”¨æ¥ä¿å­˜å•ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚
é…ç½®æ•°æ®å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹å¼åœ¨Podsé‡Œè¢«ä½¿ç”¨ã€‚ConfigMapså¯ä»¥è¢«ç”¨æ¥ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼&lt;/li&gt;
&lt;li&gt;åœ¨å®¹å™¨é‡Œè®¾ç½®å‘½ä»¤è¡Œå‚æ•°&lt;/li&gt;
&lt;li&gt;åœ¨æ•°æ®å·é‡Œé¢åˆ›å»ºconfigæ–‡ä»¶&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç”¨æˆ·å’Œç³»ç»Ÿç»„ä»¶ä¸¤è€…éƒ½å¯ä»¥åœ¨ConfigMapé‡Œé¢å­˜å‚¨é…ç½®æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®ä¸ç”¨çœ‹ä¸‹é¢çš„æ–‡ç« ï¼Œç›´æ¥ä»&lt;code&gt;kubectl create configmap -h&lt;/code&gt;çš„å¸®åŠ©ä¿¡æ¯ä¸­å°±å¯ä»¥å¯¹ConfigMapç©¶ç«Ÿå¦‚ä½•åˆ›å»ºç•¥çŸ¥ä¸€äºŒäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Examples:
  # Create a new configmap named my-config based on folder bar
  kubectl create configmap my-config --from-file=path/to/bar
  
  # Create a new configmap named my-config with specified keys instead of file basenames on disk
  kubectl create configmap my-config --from-file=key1=/path/to/bar/file1.txt --from-file=key2=/path/to/bar/file2.txt
  
  # Create a new configmap named my-config with key1=config1 and key2=config2
  kubectl create configmap my-config --from-literal=key1=config1 --from-literal=key2=config2
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åˆ›å»ºconfigmaps&#34;&gt;åˆ›å»ºConfigMaps&lt;/h2&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œç”¨ç»™å®šå€¼ã€æ–‡ä»¶æˆ–ç›®å½•æ¥åˆ›å»ºConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl create configmap
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ä½¿ç”¨ç›®å½•åˆ›å»º&#34;&gt;ä½¿ç”¨ç›®å½•åˆ›å»º&lt;/h3&gt;

&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬å·²ç»æœ‰ä¸ªäº†åŒ…å«ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬æƒ³è¦è®¾ç½®çš„ConfigMapçš„å€¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ls docs/user-guide/configmap/kubectl/
game.properties
ui.properties

$ cat docs/user-guide/configmap/kubectl/game.properties
enemies=aliens
lives=3
enemies.cheat=true
enemies.cheat.level=noGoodRotten
secret.code.passphrase=UUDDLRLRBABAS
secret.code.allowed=true
secret.code.lives=30

$ cat docs/user-guide/configmap/kubectl/ui.properties
color.good=purple
color.bad=yellow
allow.textmode=true
how.nice.to.look=fairlyNice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„ConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ kubectl create configmap game-config --from-file=docs/user-guide/configmap/kubectl
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;â€”from-file&lt;/code&gt;æŒ‡å®šåœ¨ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«ç”¨åœ¨ConfigMapé‡Œé¢åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®çš„åå­—å°±æ˜¯æ–‡ä»¶åï¼Œå€¼å°±æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤åˆ›å»ºçš„ConfigMapï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ kubectl describe configmaps game-config
Name:           game-config
Namespace:      default
Labels:         &amp;lt;none&amp;gt;
Annotations:    &amp;lt;none&amp;gt;

Data
====
game.properties:        158 bytes
ui.properties:          83 bytes
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‚£ä¸¤ä¸ªkeyæ˜¯ä»kubectlæŒ‡å®šçš„ç›®å½•ä¸­çš„æ–‡ä»¶åã€‚è¿™äº›keyçš„å†…å®¹å¯èƒ½ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥åœ¨kubectl describeçš„è¾“å‡ºä¸­ï¼Œåªèƒ½å¤Ÿçœ‹åˆ°é”®çš„åå­—å’Œä»–ä»¬çš„å¤§å°ã€‚
å¦‚æœæƒ³è¦çœ‹åˆ°é”®çš„å€¼çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨&lt;code&gt;kubectl get&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ kubectl get configmaps game-config -o yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬ä»¥&lt;code&gt;yaml&lt;/code&gt;æ ¼å¼è¾“å‡ºé…ç½®ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
data:
  game.properties: |
    enemies=aliens
    lives=3
    enemies.cheat=true
    enemies.cheat.level=noGoodRotten
    secret.code.passphrase=UUDDLRLRBABAS
    secret.code.allowed=true
    secret.code.lives=30
  ui.properties: |
    color.good=purple
    color.bad=yellow
    allow.textmode=true
    how.nice.to.look=fairlyNice
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T18:34:05Z
  name: game-config
  namespace: default
  resourceVersion: &amp;quot;407&amp;quot;
  selfLink: /api/v1/namespaces/default/configmaps/game-config
  uid: 30944725-d66e-11e5-8cd0-68f728db1985
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ä½¿ç”¨æ–‡ä»¶åˆ›å»º&#34;&gt;ä½¿ç”¨æ–‡ä»¶åˆ›å»º&lt;/h3&gt;

&lt;p&gt;åˆšæ‰&lt;strong&gt;ä½¿ç”¨ç›®å½•åˆ›å»º&lt;/strong&gt;çš„æ—¶å€™æˆ‘ä»¬&lt;code&gt;â€”from-file&lt;/code&gt;æŒ‡å®šçš„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåªè¦æŒ‡å®šä¸ºä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥ä»å•ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ kubectl create configmap game-config-2 --from-file=docs/user-guide/configmap/kubectl/game.properties 

$ kubectl get configmaps game-config-2 -o yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: v1
data:
  game-special-key: |
    enemies=aliens
    lives=3
    enemies.cheat=true
    enemies.cheat.level=noGoodRotten
    secret.code.passphrase=UUDDLRLRBABAS
    secret.code.allowed=true
    secret.code.lives=30
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T18:54:22Z
  name: game-config-3
  namespace: default
  resourceVersion: &amp;quot;530&amp;quot;
  selfLink: /api/v1/namespaces/default/configmaps/game-config-3
  uid: 05f8da22-d671-11e5-8cd0-68f728db1985
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;â€”from-file&lt;/code&gt;è¿™ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸¤æ¬¡åˆ†åˆ«æŒ‡å®šä¸Šä¸ªå®ä¾‹ä¸­çš„é‚£ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ•ˆæœå°±è·ŸæŒ‡å®šæ•´ä¸ªç›®å½•æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨literalå€¼åˆ›å»º&#34;&gt;ä½¿ç”¨literalå€¼åˆ›å»º&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨æ–‡å­—å€¼åˆ›å»ºï¼Œåˆ©ç”¨&lt;code&gt;â€”from-literal&lt;/code&gt;å‚æ•°ä¼ é€’é…ç½®ä¿¡æ¯ï¼Œè¯¥å‚æ•°å¯ä»¥ä½¿ç”¨å¤šæ¬¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼›&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charm

$ kubectl get configmaps special-config -o yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
data:
  special.how: very
  special.type: charm
kind: ConfigMap
metadata:
  creationTimestamp: 2016-02-18T19:14:38Z
  name: special-config
  namespace: default
  resourceVersion: &amp;quot;651&amp;quot;
  selfLink: /api/v1/namespaces/default/configmaps/special-config
  uid: dadce046-d673-11e5-8cd0-68f728db1985
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;podä¸­ä½¿ç”¨configmap&#34;&gt;Podä¸­ä½¿ç”¨ConfigMap&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ConfigMapæ¥æ›¿ä»£ç¯å¢ƒå˜é‡&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ConfigMapå¯ä»¥è¢«ç”¨æ¥å¡«å…¥ç¯å¢ƒå˜é‡ã€‚çœ‹ä¸‹ä¸‹é¢çš„ConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
kind: ConfigMap
metadata:
  name: special-config
  namespace: default
data:
  special.how: very
  special.type: charm
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
kind: ConfigMap
metadata:
  name: env-config
  namespace: default
data:
  log_level: INFO
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨Podä¸­è¿™æ ·ä½¿ç”¨ConfigMapï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: v1
kind: Pod
metadata:
  name: dapi-test-pod
spec:
  containers:
    - name: test-container
      image: gcr.io/google_containers/busybox
      command: [ &amp;quot;/bin/sh&amp;quot;, &amp;quot;-c&amp;quot;, &amp;quot;env&amp;quot; ]
      env:
        - name: SPECIAL_LEVEL_KEY
          valueFrom:
            configMapKeyRef:
              name: special-config
              key: special.how
        - name: SPECIAL_TYPE_KEY
          valueFrom:
            configMapKeyRef:
              name: special-config
              key: special.type
      envFrom:
        - configMapRef:
            name: env-config
  restartPolicy: Never
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªPodè¿è¡Œåä¼šè¾“å‡ºå¦‚ä¸‹å‡ è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;SPECIAL_LEVEL_KEY=very
SPECIAL_TYPE_KEY=charm
log_level=INFO
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ç”¨ConfigMapè®¾ç½®å‘½ä»¤è¡Œå‚æ•°&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ConfigMapä¹Ÿå¯ä»¥è¢«ä½¿ç”¨æ¥è®¾ç½®å®¹å™¨ä¸­çš„å‘½ä»¤æˆ–è€…å‚æ•°å€¼ã€‚å®ƒä½¿ç”¨çš„æ˜¯Kubernetesçš„$(VAR_NAME)æ›¿æ¢è¯­æ³•ã€‚æˆ‘ä»¬çœ‹ä¸‹ä¸‹é¢è¿™ä¸ªConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
kind: ConfigMap
metadata:
  name: special-config
  namespace: default
data:
  special.how: very
  special.type: charm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†å°†ConfigMapä¸­çš„å€¼æ³¨å…¥åˆ°å‘½ä»¤è¡Œçš„å‚æ•°é‡Œé¢ï¼Œæˆ‘ä»¬è¿˜è¦åƒå‰é¢é‚£ä¸ªä¾‹å­ä¸€æ ·ä½¿ç”¨ç¯å¢ƒå˜é‡æ›¿æ¢è¯­æ³•&lt;code&gt;${VAR_NAME)&lt;/code&gt;ã€‚ï¼ˆå…¶å®è¿™ä¸ªä¸œè¥¿å°±æ˜¯ç»™Dockerå®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥å‰æˆ‘åˆ›å»ºé•œåƒçš„æ—¶å€™ç»å¸¸è¿™ä¹ˆç©ï¼Œé€šè¿‡docker runçš„æ—¶å€™æŒ‡å®š-eå‚æ•°ä¿®æ”¹é•œåƒé‡Œçš„ç¯å¢ƒå˜é‡ï¼Œç„¶ådockerçš„CMDå‘½ä»¤å†åˆ©ç”¨è¯¥$(VAR_NAME)é€šè¿‡sedæ¥æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–è€…ä½œä¸ºå‘½ä»¤è¡Œå¯åŠ¨å‚æ•°ã€‚ï¼‰&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: v1
kind: Pod
metadata:
  name: dapi-test-pod
spec:
  containers:
    - name: test-container
      image: gcr.io/google_containers/busybox
      command: [ &amp;quot;/bin/sh&amp;quot;, &amp;quot;-c&amp;quot;, &amp;quot;echo $(SPECIAL_LEVEL_KEY) $(SPECIAL_TYPE_KEY)&amp;quot; ]
      env:
        - name: SPECIAL_LEVEL_KEY
          valueFrom:
            configMapKeyRef:
              name: special-config
              key: special.how
        - name: SPECIAL_TYPE_KEY
          valueFrom:
            configMapKeyRef:
              name: special-config
              key: special.type
  restartPolicy: Never
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œè¿™ä¸ªPodåä¼šè¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;very charm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é€šè¿‡æ•°æ®å·æ’ä»¶ä½¿ç”¨ConfigMap&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ConfigMapä¹Ÿå¯ä»¥åœ¨æ•°æ®å·é‡Œé¢è¢«ä½¿ç”¨ã€‚è¿˜æ˜¯è¿™ä¸ªConfigMapã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
kind: ConfigMap
metadata:
  name: special-config
  namespace: default
data:
  special.how: very
  special.type: charm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨æ•°æ®å·é‡Œé¢ä½¿ç”¨è¿™ä¸ªConfigMapï¼Œæœ‰ä¸åŒçš„é€‰é¡¹ã€‚æœ€åŸºæœ¬çš„å°±æ˜¯å°†æ–‡ä»¶å¡«å…¥æ•°æ®å·ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé”®å°±æ˜¯æ–‡ä»¶åï¼Œé”®å€¼å°±æ˜¯æ–‡ä»¶å†…å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: v1
kind: Pod
metadata:
  name: dapi-test-pod
spec:
  containers:
    - name: test-container
      image: gcr.io/google_containers/busybox
      command: [ &amp;quot;/bin/sh&amp;quot;, &amp;quot;-c&amp;quot;, &amp;quot;cat /etc/config/special.how&amp;quot; ]
      volumeMounts:
      - name: config-volume
        mountPath: /etc/config
  volumes:
    - name: config-volume
      configMap:
        name: special-config
  restartPolicy: Never
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œè¿™ä¸ªPodçš„è¾“å‡ºæ˜¯&lt;code&gt;very&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ConfigMapå€¼è¢«æ˜ å°„çš„æ•°æ®å·é‡Œæ§åˆ¶è·¯å¾„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: v1
kind: Pod
metadata:
  name: dapi-test-pod
spec:
  containers:
    - name: test-container
      image: gcr.io/google_containers/busybox
      command: [ &amp;quot;/bin/sh&amp;quot;,&amp;quot;-c&amp;quot;,&amp;quot;cat /etc/config/path/to/special-key&amp;quot; ]
      volumeMounts:
      - name: config-volume
        mountPath: /etc/config
  volumes:
    - name: config-volume
      configMap:
        name: special-config
        items:
        - key: special.how
          path: path/to/special-key
  restartPolicy: Never
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œè¿™ä¸ªPodåçš„ç»“æœæ˜¯&lt;code&gt;very&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;è¿˜æ˜¯é‚£å¥è¯ï¼Œå¦‚æœä½ äº†è§£dockerçš„ENVæœºåˆ¶å°±ä¼šæ˜ç™½ConfigMapèƒŒåç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œso easy~&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TensorFlowæ·±åº¦å­¦ä¹ æ‰‹å†™æ•°å­—è¯†åˆ«åˆä½“éªŒ</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-and-deep-learning-without-a-phd/</link>
      <pubDate>Wed, 05 Apr 2017 21:52:01 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-and-deep-learning-without-a-phd/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/201703085.jpg&#34; alt=&#34;ç¦¾é›€&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šç¦¾é›€ @åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;TensorFlowå­¦ä¹ æ›²çº¿æ˜¯é™¡å³­çš„ï¼Œä¸æ˜¯æ‰€æœ‰çš„ITä»ä¸šäººå‘˜éƒ½å¾ˆå®¹æ˜“å‚ä¸çš„ï¼Œä½ éœ€è¦æœ‰ä¸€å®šçš„æ•°å­¦ä¸“ä¸šçŸ¥è¯†ï¼Œå¯¹äºå¯¹æ·±åº¦å­¦ä¹ æ²¡æœ‰ç»éªŒçš„ç¨‹åºå‘˜ï¼Œè¦æƒ³äº†è§£è¿™é—¨æŠ€æœ¯ï¼Œæœ€å¿«æ·çš„é€”å¾„æ˜¯å…ˆè¿è¡Œä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬è®¤è¯†äº‹ç‰©éƒ½æ˜¯å…ˆä»æ„Ÿæ€§ã€åˆ°ç†æ€§çš„æ€è¾¨è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è·Ÿéš&lt;strong&gt;Martin Gorner&lt;/strong&gt;çš„&lt;a href=&#34;https://codelabs.developers.google.com/codelabs/cloud-tensorflow-mnist/#0&#34;&gt;TensorFlow and Deep Learing Without a PhD&lt;/a&gt;æ¥ç¼–å†™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªTensorFlowç¨‹åºâ€”â€”æ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œè¿™ç¯‡æ–‡ç« çš„ä¸­æ–‡ç‰ˆ&lt;a href=&#34;http://www.jiqizhixin.com/article/2458&#34;&gt;æ²¡æœ‰åšå£«å­¦ä½å¦‚ä½•ç©è½¬TensorFlowå’Œæ·±åº¦å­¦ä¹ &lt;/a&gt;äº2017å¹´3æœˆ13æ—¥å‘è¡¨åœ¨å‘è¡¨åœ¨&lt;a href=&#34;www.jiqizhixin.com&#34;&gt;æœºå™¨ä¹‹å¿ƒ&lt;/a&gt;ä¸Šã€‚è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æ ¹æ®3æœˆ8æ—¥-10æ—¥çš„&lt;strong&gt;Google Cloud NEXT&amp;rsquo;17&lt;/strong&gt;å¤§ä¼šä¸ŠMartin Gorneråšçš„è®²è§£æ•´ç†è€Œæˆçš„ï¼Œ&lt;a href=&#34;http://it.sohu.com/20170124/n479480999.shtml&#34;&gt;æ•™ç¨‹ | æ²¡æœ‰åšå£«å­¦ä½ï¼Œç…§æ ·ç©è½¬TensorFlowæ·±åº¦å­¦ä¹ &lt;/a&gt;è¿™ç¯‡æ–‡ç« æ˜¯å¯¹Martin Gornerçš„ç®€æ˜“æ•™ç¨‹çš„åŸæ–‡ç¿»è¯‘ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸è¦æ±‚äº†è§£TensorFlowèƒŒåå¤æ‚çš„ç†è®ºï¼Œæˆ‘ä»¬å…ˆè·Ÿéšè¿™ç¯‡ç®€æ˜“æ•™ç¨‹ç©ä¸€æŠŠTensorFlowçš„æ‰‹å†™æ•°å­—è¯†åˆ«ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æƒ³æ·±å…¥äº†è§£è¿™æœ¬åçš„åŸç†çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ç¤¾ä¼šè®¡ç®—ä¸ä¿¡æ¯æ£€ç´¢ç ”ç©¶ä¸­å¿ƒç¿»è¯‘çš„&lt;a href=&#34;https://www.gitbook.com/book/hit-scir/neural-networks-and-deep-learning-zh_cn/details&#34;&gt;ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹&lt;/a&gt;è¿™æœ¬ä¹¦ï¼Œè¯¥ä¹¦ç¿»è¯‘è‡ª&lt;a href=&#34;http://neuralnetworksanddeeplearning.com/&#34;&gt;Neural Networks and Deep Learning&lt;/a&gt;çš„ä¸­æ–‡ç¿»è¯‘ï¼ŒåŸæ–‡ä½œè€… Michael Nielsenï¼Œè€Œä¸”è¿™è¿˜æ˜¯ä¸€æœ¬å…è´¹çš„ç”µå­ä¹¦ï¼Œè¯¥ä¹¦ä¸­ç³»ç»Ÿè®²è§£äº†&lt;a href=&#34;https://hit-scir.gitbooks.io/neural-networks-and-deep-learning-zh_cn/content/chap1/c1s0.html&#34;&gt;ä½¿ç”¨ç¥ç»ç½‘ç»œè¯†åˆ«æ‰‹å†™æ•°å­—&lt;/a&gt;èƒŒåçš„åŸç†ã€‚è¯¥ä¹¦æ‰˜ç®¡åœ¨GitBookä¸Šï¼Œä½ å¯ä»¥ç‚¹å‡»&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/neural-networks-and-deep-learning-zh_cn.pdf&#34;&gt;è¿™é‡Œ&lt;/a&gt;ç›´æ¥ä¸‹è½½è¯¥ä¹¦ä¸­æ–‡ç‰ˆçš„PDFã€‚&lt;/p&gt;

&lt;h2 id=&#34;å‡†å¤‡&#34;&gt;å‡†å¤‡&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ä¸‹è½½ä»£ç &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªä»£ç ä»“åº“é‡ŒåŒ…å«äº†æ‰‹å†™æ•°å­—è¯†åˆ«å’Œä¸‹è½½ä¾èµ–çš„è®­ç»ƒæ•°æ®çš„ä»£ç ï¼Œæˆ‘ä»¬å°†åªç”¨åˆ°&lt;code&gt;mnist_1.0_softmax.py&lt;/code&gt;è¿™ä¸€ä¸ªä»£ç æ–‡ä»¶ã€‚æ•´ä¸ª&lt;code&gt;mnist_1.0_softmax.py&lt;/code&gt;ä»£ç å¹¶ä¸å¤æ‚ï¼Œä¸ç®—æ³¨é‡Šçš„è¯åªæœ‰36è¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone https://github.com/martin-gorner/tensorflow-mnist-tutorial.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹è½½å®Œåï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª&lt;strong&gt;INSTALL.txt&lt;/strong&gt;ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯è¿è¡Œä»£ç æ‰€å¿…éœ€çš„ç¯å¢ƒè¦æ±‚è¯´æ˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…TensorFlow&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä¹‹å‰å†™è¿‡è¯¦ç»†çš„TensorFlowå®‰è£…æ•™ç¨‹&lt;a href=&#34;http://rootsongjc.github.io/blogs/tensorflow-practice-02/&#34;&gt;TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬äºŒç« TensorFlowç¯å¢ƒæ­å»º&lt;/a&gt;ï¼Œè¿™ç¯‡æ–‡ç« ä¸­ä¸»è¦è®²æ€æ ·åœ¨dockeré‡Œå®‰è£…TensorFlowã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä½¿ç”¨çš„Macè€Œä¸”è¿˜æ˜¯python2.7ï¼Œæ‰€ä»¥æˆ‘è¿™æ ·å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pip install --upgrade tensorflow --user -U
pip install --upgrade matplotlib --user -U
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è¿è¡Œç¤ºä¾‹&#34;&gt;è¿è¡Œç¤ºä¾‹&lt;/h2&gt;

&lt;p&gt;è¿è¡Œæ‰‹å†™æ•°å­—è®­ç»ƒç¤ºä¾‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;python mnist_1.0_softmax.py
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿è¡Œè¿‡ç¨‹ä¸­ä½ ä¼šçœ‹åˆ°ä¸€å¤§æ®µè¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Collecting matplotlib
  Downloading matplotlib-2.0.0-cp27-cp27m-macosx_10_6_intel.macosx_10_9_intel.macosx_10_9_x86_64.macosx_10_10_intel.macosx_10_10_x86_64.whl (12.8MB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 12.8MB 26kB/s 
Requirement already up-to-date: pyparsing!=2.0.0,!=2.0.4,!=2.1.2,!=2.1.6,&amp;gt;=1.5.6 in /Users/jimmy/Library/Python/2.7/lib/python/site-packages (from matplotlib)
Requirement already up-to-date: numpy&amp;gt;=1.7.1 in /Users/jimmy/Library/Python/2.7/lib/python/site-packages (from matplotlib)
Collecting functools32 (from matplotlib)
  Downloading functools32-3.2.3-2.zip
Collecting pytz (from matplotlib)
  Downloading pytz-2017.2-py2.py3-none-any.whl (484kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 491kB 33kB/s 
Requirement already up-to-date: six&amp;gt;=1.10 in /Users/jimmy/Library/Python/2.7/lib/python/site-packages (from matplotlib)
Collecting cycler&amp;gt;=0.10 (from matplotlib)
  Downloading cycler-0.10.0-py2.py3-none-any.whl
Collecting subprocess32 (from matplotlib)
  Downloading subprocess32-3.2.7.tar.gz (54kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 61kB 26kB/s 
Collecting python-dateutil (from matplotlib)
  Downloading python_dateutil-2.6.0-py2.py3-none-any.whl (194kB)
    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 194kB 45kB/s 
Building wheels for collected packages: functools32, subprocess32
  Running setup.py bdist_wheel for functools32 ... done
  Stored in directory: /Users/jimmy/Library/Caches/pip/wheels/3c/d0/09/cd78d0ff4d6cfecfbd730782a7815a4571cd2cd4d2ed6e69d9
  Running setup.py bdist_wheel for subprocess32 ... done
  Stored in directory: /Users/jimmy/Library/Caches/pip/wheels/7d/4c/a4/ce9ceb463dae01f4b95e670abd9afc8d65a45f38012f8030cc
Successfully built functools32 subprocess32
Installing collected packages: functools32, pytz, cycler, subprocess32, python-dateutil, matplotlib
Successfully installed cycler-0.10.0 functools32-3.2.3.post2 matplotlib-2.0.0 python-dateutil-2.6.0 pytz-2017.2 subprocess32-3.2.7
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸‹è½½äº†ä¸€äº›pythonä¾èµ–åº“å¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;matplotlib&lt;/li&gt;
&lt;li&gt;pytz&lt;/li&gt;
&lt;li&gt;subprocess32&lt;/li&gt;
&lt;li&gt;cycler&lt;/li&gt;
&lt;li&gt;python_dateutil&lt;/li&gt;
&lt;li&gt;functools32&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ‰€æœ‰çš„ä¾èµ–éƒ½ä¸‹è½½å®Œæˆä¹‹åï¼Œå°±ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼ŒåŒæ—¶åå°ä¹Ÿä¼šåœ¨ä¸æ–­æ»šåŠ¨æ˜¾ç¤ºè®­ç»ƒçš„é˜¶æ®µï¼Œç›´åˆ°2001æ­¥ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-01.jpg&#34; alt=&#34;tensorflow-mnist-01&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ­£è§„çš„TensorFlowé¡¹ç›®ä¼šä½¿ç”¨&lt;strong&gt;TensorBoard&lt;/strong&gt;ä½œå¯è§†åŒ–ï¼Œæˆ‘ä»¬ç”¨&lt;strong&gt;matplotlib&lt;/strong&gt;ä½œä¸ºæ›¿ä»£ã€‚&lt;/p&gt;

&lt;p&gt;è‡³æ­¤æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ç»“æŸäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜ä¸æ˜ç™½è¿™ä¸ªçª—å£é‡Œçš„6ä¸ªå›¾åˆ†åˆ«è¡¨ç¤ºçš„å«ä¹‰ï¼Œä¸‹é¢å°†ä¾æ¬¡ä½œå‡ºè§£é‡Šã€‚&lt;/p&gt;

&lt;h2 id=&#34;çª—å£ä¸­çš„å›¾ç‰‡è¯´æ˜&#34;&gt;çª—å£ä¸­çš„å›¾ç‰‡è¯´æ˜&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹MNISTçª—å£ä¸­çš„6ä¸ªPanelã€‚&lt;/p&gt;

&lt;h3 id=&#34;training-digits&#34;&gt;Training Digits&lt;/h3&gt;

&lt;p&gt;æ­¤&lt;strong&gt;DataSet&lt;/strong&gt;ä¸­ä¸€å…±æœ‰50000ä¸ª&lt;u&gt;è®­ç»ƒæ•°å­—&lt;/u&gt;ï¼Œæ¯æ¬¡&lt;strong&gt;Iteration&lt;/strong&gt;é€å…¥100ä¸ªæ•°å­—ä½œä¸ºå¾ªç¯ï¼Œ500æ¬¡è¿­ä»£åå¯ä»¥å°†æ‰€æœ‰æ•°å­—è®­ç»ƒä¸€æ¬¡ï¼Œå«åšä¸€ä¸ª&lt;strong&gt;Epoch&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾ä¸­ç™½è‰²èƒŒæ™¯çš„æ•°å­—è¡¨ç¤ºè¯†åˆ«æ­£ç¡®çš„ï¼Œçº¢è‰²èƒŒæ™¯çš„éƒ¨åˆ†è¡¨ç¤ºè¯†åˆ«é”™è¯¯çš„ï¼Œæ¯ä¸ªæ•°å­—å·¦è¾¹ä¸‹æ ‡è¡¨ç¤ºåº”è¯¥è¢«è¯†åˆ«æˆçš„æ­£ç¡®ç»“æœï¼Œæ•°å­—å³è¾¹çš„ä¸‹æ ‡æ˜¯è¯†åˆ«é”™è¯¯çš„ç»“æœã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-01.jpg&#34; alt=&#34;training digits&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;test-digits&#34;&gt;Test Digits&lt;/h3&gt;

&lt;p&gt;æ­¤å¤–ä¹Ÿä¸èƒ½å…‰æœ‰è®­ç»ƒæ•°å­—å§ï¼ŒMNISTæ•°æ®é›†ä¸­è¿˜æœ‰10000ä¸ªæµ‹è¯•æ•°å­—ï¼Œæ­¤å¤„ä½ èƒ½çœ‹åˆ°æ¯ä¸ªæ•°å­—å¯¹åº”çš„å¤§çº¦ 1000 ç§ä¹¦å†™å½¢å¼ï¼Œå…¶ä¸­æ‰€æœ‰é”™è¯¯è¯†åˆ«çš„æ•°å­—åˆ—åœ¨é¡¶éƒ¨ï¼ˆæœ‰çº¢è‰²èƒŒæ™¯ï¼‰ã€‚å·¦è¾¹çš„åˆ»åº¦ä¼šç»™ä½ ä¸€ä¸ªç²—ç•¥çš„åˆ†è¾¨ç‡ç²¾ç¡®åº¦ï¼ˆæ­£ç¡®è¯†åˆ«çš„ç™¾åˆ†æ¯”ï¼‰ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-02.jpg&#34; alt=&#34;test digits&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ç»è¿‡2000è½®çš„è®­ç»ƒåï¼Œå·²ç»å¯¹æ‰‹å†™æ•°å­—çš„è¯†åˆ«ç‡è¾¾åˆ°äº†92%ã€‚&lt;/p&gt;

&lt;h3 id=&#34;cross-entropy-loss&#34;&gt;Cross Entropy Loss&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†é©±åŠ¨è®­ç»ƒï¼Œæˆ‘ä»¬æ¥å®šä¹‰&lt;strong&gt;æŸå¤±å‡½æ•°&lt;/strong&gt;ï¼Œå³&lt;u&gt;ä¸€ä¸ªå±•ç¤ºå‡ºç³»ç»Ÿæ•°å­—è¯†åˆ«èƒ½åŠ›æœ‰å¤šç³Ÿçš„å€¼&lt;/u&gt;ï¼Œå¹¶ä¸”ç³»ç»Ÿä¼šå°½åŠ›å°†å…¶æœ€å°åŒ–ã€‚æŸå¤±å‡½æ•°ï¼ˆloss functionï¼Œæ­¤å¤„ä¸º&lt;a href=&#34;https://hit-scir.gitbooks.io/neural-networks-and-deep-learning-zh_cn/content/chap3/c3s1.html&#34;&gt;äº¤å‰ç†µ&lt;/a&gt;ï¼‰çš„é€‰æ‹©ç¨åä¼šåšå‡ºè§£é‡Šã€‚ä½ ä¼šçœ‹åˆ°ï¼Œéšç€è®­ç»ƒçš„è¿›è¡Œï¼Œè®­ç»ƒå’Œæµ‹è¯•æ•°æ®çš„æŸå¤±ä¼šå‡å°‘ï¼Œè€Œè¿™ä¸ªç°è±¡æ˜¯å¥½çš„ï¼Œæ„å‘³ç€ç¥ç»ç½‘ç»œæ­£åœ¨å­¦ä¹ ã€‚X è½´è¡¨ç¤ºäº†å­¦ä¹ è¿‡ç¨‹ä¸­çš„è¿­ä»£ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-03.jpg&#34; alt=&#34;cross entropy loss&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;accuracy&#34;&gt;Accuracy&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªå‡†ç¡®åº¦åªæ˜¯æ­£ç¡®è¯†åˆ«çš„æ•°å­—çš„ç™¾åˆ†æ¯”ï¼Œæ˜¯åœ¨è®­ç»ƒå’Œæµ‹è¯•é›†ä¸Šè®¡ç®—å‡ºçš„ã€‚å¦‚æœè®­ç»ƒé¡ºåˆ©ï¼Œå®ƒä¾¿ä¼šä¸Šå‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-04.jpg&#34; alt=&#34;accuratcy&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;weight-biases&#34;&gt;Weight &amp;amp; Biases&lt;/h3&gt;

&lt;p&gt;æœ€åçš„ä¸¤å¹…å›¾è¡¨è¯´æ˜äº†å†…éƒ¨å˜é‡æ‰€å–çš„æ‰€æœ‰å€¼çš„æ‰©å±•ï¼Œå³éšè®­ç»ƒè¿›è¡Œè€Œå˜åŒ–çš„æƒé‡å’Œåç½®ã€‚æ¯”å¦‚åç½®ä» 0 å¼€å§‹ï¼Œä¸”æœ€ç»ˆå¾—åˆ°çš„å€¼å¤§è‡´å‡åŒ€åœ°åˆ†å¸ƒåœ¨-1.5 å’Œ 1.5 ä¹‹é—´ã€‚å¦‚æœç³»ç»Ÿä¸èƒ½å¾ˆå¥½åœ°æ”¶æ•›ï¼Œé‚£ä¹ˆè¿™äº›å›¾å¯èƒ½æœ‰ç”¨ã€‚å€˜è‹¥ä½ å‘ç°æƒé‡å’Œåå·®æ‰©å±•åˆ°ä¸Šç™¾æˆ–ä¸Šåƒï¼Œé‚£ä¹ˆå°±å¯èƒ½æœ‰é—®é¢˜äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-05.jpg&#34; alt=&#34;weight&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-mnist-panel-06.jpg&#34; alt=&#34;biases&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯ç†è®ºè®²è§£äº†ï¼Œå…ˆå¤åˆ¶è¿‡æ¥ï¼ŒæœŸå¾…æœ‰æœä¸€æ—¥æˆ‘èƒ½çœ‹æ‡‚å§ğŸ˜„&lt;/p&gt;

&lt;h3 id=&#34;ç†è®º-å•å±‚ç¥ç»ç½‘ç»œ&#34;&gt;ç†è®º : å•å±‚ç¥ç»ç½‘ç»œ&lt;/h3&gt;

&lt;p&gt;MNIST æ•°æ®é›†ä¸­ï¼Œæ‰‹å†™æ•°å­—æ˜¯ 28x28 åƒç´ çš„ç°åº¦å›¾åƒã€‚å°†å®ƒä»¬è¿›è¡Œåˆ†ç±»çš„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ 28x28=784 ä¸ªåƒç´ ä½œä¸ºå•å±‚ç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/5070df2db57143eabd8549e038c95735_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç¥ç»ç½‘ç»œä¸­çš„æ¯ä¸ªã€Œç¥ç»å…ƒã€å¯¹å…¶æ‰€æœ‰çš„è¾“å…¥è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¹¶æ·»åŠ ä¸€ä¸ªè¢«ç§°ä¸ºã€Œåç½®ï¼ˆbiasï¼‰ã€çš„å¸¸æ•°ï¼Œç„¶åé€šè¿‡ä¸€äº›éçº¿æ€§æ¿€æ´»å‡½æ•°æ¥åé¦ˆç»“æœã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†å°†æ•°å­—åˆ†ä¸º 10 ç±»ï¼ˆ0 åˆ° 9ï¼‰ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªå…·æœ‰ 10 ä¸ªè¾“å‡ºç¥ç»å…ƒçš„å•å±‚ç¥ç»ç½‘ç»œã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œsoftmax æ˜¯ä¸€ä¸ªä¸é”™çš„æ¿€æ´»å‡½æ•°ã€‚é€šè¿‡å–æ¯ä¸ªå…ƒç´ çš„æŒ‡æ•°ï¼Œç„¶åå½’ä¸€åŒ–å‘é‡ï¼ˆä½¿ç”¨ä»»æ„çš„èŒƒæ•°ï¼ˆnormï¼‰ï¼Œæ¯”å¦‚å‘é‡çš„æ™®é€šæ¬§å‡ é‡Œå¾—è·ç¦»ï¼‰ä»è€Œå°† softmax åº”ç”¨äºå‘é‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/7648d231901a468a99cb9a849e8630a5_th.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆã€Œsoftmaxã€ä¼šè¢«ç§°ä¸º softmax å‘¢ï¼ŸæŒ‡æ•°æ˜¯ä¸€ç§éª¤å¢çš„å‡½æ•°ã€‚è¿™å°†åŠ å¤§å‘é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å·®å¼‚ã€‚å®ƒä¹Ÿä¼šè¿…é€Ÿåœ°äº§ç”Ÿä¸€ä¸ªå·¨å¤§çš„å€¼ã€‚ç„¶åï¼Œå½“è¿›è¡Œå‘é‡çš„æ ‡å‡†åŒ–æ—¶ï¼Œæ”¯é…èŒƒæ•°ï¼ˆnormï¼‰çš„æœ€å¤§çš„å…ƒç´ å°†ä¼šè¢«æ ‡å‡†åŒ–ä¸ºä¸€ä¸ªæ¥è¿‘ 1 çš„æ•°å­—ï¼Œå…¶ä»–çš„å…ƒç´ å°†ä¼šè¢«ä¸€ä¸ªè¾ƒå¤§çš„å€¼åˆ†å‰²å¹¶è¢«æ ‡å‡†åŒ–ä¸ºä¸€ä¸ªæ¥è¿‘ 0 çš„æ•°å­—ã€‚æ‰€å¾—åˆ°çš„å‘é‡æ¸…æ¥šåœ°æ˜¾ç¤ºå‡ºäº†å“ªä¸ªæ˜¯å…¶æœ€å¤§çš„å€¼ï¼Œå³ã€Œmaxã€ï¼Œä½†æ˜¯å´åˆä¿ç•™äº†å…¶å€¼çš„åŸå§‹çš„ç›¸å¯¹æ’åˆ—é¡ºåºï¼Œå› æ­¤å³ä¸ºã€Œsoftã€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/c85a5d9f37f045ceb8b7b0b457159782_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨çŸ©é˜µä¹˜æ³•å°†è¿™ä¸ªå•å±‚çš„ç¥ç»å…ƒçš„è¡Œä¸ºæ€»ç»“è¿›ä¸€ä¸ªç®€å•çš„å…¬å¼å½“ä¸­ã€‚è®©æˆ‘ä»¬ç›´æ¥è¿™æ ·åšï¼š100 ä¸ªå›¾åƒçš„ã€Œmini-batchã€ä½œä¸ºè¾“å…¥ï¼Œäº§ç”Ÿ 100 ä¸ªé¢„æµ‹ï¼ˆ10 å…ƒç´ å‘é‡ï¼‰ä½œä¸ºè¾“å‡ºã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨åŠ æƒçŸ©é˜µ W çš„ç¬¬ä¸€åˆ—æƒé‡ï¼Œæˆ‘ä»¬è®¡ç®—ç¬¬ä¸€ä¸ªå›¾åƒæ‰€æœ‰åƒç´ çš„åŠ æƒå’Œã€‚è¯¥å’Œå¯¹åº”äºç¬¬ä¸€ç¥ç»å…ƒã€‚ä½¿ç”¨ç¬¬äºŒåˆ—æƒé‡ï¼Œæˆ‘ä»¬å¯¹ç¬¬äºŒä¸ªç¥ç»å…ƒè¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œç›´åˆ°ç¬¬ 10 ä¸ªç¥ç»å…ƒã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å‰©ä½™çš„ 99 ä¸ªå›¾åƒé‡å¤æ“ä½œã€‚å¦‚æœæˆ‘ä»¬æŠŠä¸€ä¸ªåŒ…å« 100 ä¸ªå›¾åƒçš„çŸ©é˜µç§°ä¸º Xï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ 10 ä¸ªç¥ç»å…ƒåœ¨è¿™ 100 å¼ å›¾åƒä¸Šçš„åŠ æƒå’Œå°±æ˜¯ç®€å•çš„ X.Wï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½å¿…é¡»æ·»åŠ å…¶åç½®ï¼ˆä¸€ä¸ªå¸¸æ•°ï¼‰ã€‚å› ä¸ºæˆ‘ä»¬æœ‰ 10 ä¸ªç¥ç»å…ƒï¼Œæˆ‘ä»¬åŒæ ·æ‹¥æœ‰ 10 ä¸ªåç½®å¸¸æ•°ã€‚æˆ‘ä»¬å°†è¿™ä¸ª 10 ä¸ªå€¼çš„å‘é‡ç§°ä¸º bã€‚å®ƒå¿…é¡»è¢«æ·»åŠ åˆ°å…ˆå‰è®¡ç®—çš„çŸ©é˜µä¸­çš„æ¯ä¸€è¡Œå½“ä¸­ã€‚ä½¿ç”¨ä¸€ä¸ªç§°ä¸º &amp;ldquo;broadcasting&amp;rdquo; çš„é­”æ³•ï¼Œæˆ‘ä»¬å°†ä¼šç”¨ä¸€ä¸ªç®€å•çš„åŠ å·å†™å‡ºå®ƒã€‚&lt;/p&gt;

&lt;p&gt;ã€ŒBroadcastingã€æ˜¯ Python å’Œ numpyï¼ˆPython çš„ç§‘å­¦è®¡ç®—åº“ï¼‰çš„ä¸€ä¸ªæ ‡å‡†æŠ€å·§ã€‚å®ƒæ‰©å±•äº†å¯¹ä¸å…¼å®¹ç»´åº¦çš„çŸ©é˜µè¿›è¡Œæ­£å¸¸æ“ä½œçš„æ–¹å¼ã€‚ã€ŒBroadcasting addã€æ„å‘³ç€ã€Œå¦‚æœä½ å› ä¸ºä¸¤ä¸ªçŸ©é˜µç»´åº¦ä¸åŒçš„åŸå› è€Œä¸èƒ½å°†å…¶ç›¸åŠ ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ ¹æ®éœ€è¦å°è¯•å¤åˆ¶ä¸€ä¸ªå°çš„çŸ©é˜µä½¿å…¶å·¥ä½œã€‚ã€&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æœ€ç»ˆåº”ç”¨ softmax æ¿€æ´»å‡½æ•°å¹¶ä¸”å¾—åˆ°ä¸€ä¸ªæè¿°å•å±‚ç¥ç»ç½‘ç»œçš„å…¬å¼ï¼Œå¹¶å°†å…¶åº”ç”¨äº 100 å¼ å›¾åƒï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/cd007da75f714c96ade9a4e4c0187bfa_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯ã€Œtensorï¼ˆå¼ é‡ï¼‰ã€ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ã€Œå¼ é‡ï¼ˆtensorï¼‰ã€åƒä¸€ä¸ªçŸ©é˜µï¼Œä½†æ˜¯å´æœ‰ç€ä»»æ„æ•°é‡çš„ç»´åº¦ã€‚ä¸€ä¸ª 1 ç»´çš„å¼ é‡æ˜¯ä¸€ä¸ªå‘é‡ã€‚ä¸€ä¸ªäºŒç»´çš„å¼ é‡æ˜¯ä¸€ä¸ªçŸ©é˜µã€‚ç„¶åä½ å¯ä»¥æœ‰ 3, 4, 5 æˆ–è€…æ›´å¤šç»´çš„å¼ é‡ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç†è®º-æ¢¯åº¦ä¸‹é™&#34;&gt;ç†è®ºï¼šæ¢¯åº¦ä¸‹é™&lt;/h3&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œä»è¾“å…¥å›¾åƒä¸­äº§ç”Ÿé¢„æµ‹ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒä»¬å¯ä»¥åšåˆ°ä»€ä¹ˆæ ·çš„ç¨‹åº¦ï¼Œå³åœ¨æˆ‘ä»¬çŸ¥é“çš„äº‹å®å’Œç½‘ç»œçš„é¢„æµ‹ä¹‹é—´åˆ°åº•æœ‰å¤šå¤§çš„è·ç¦»ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬å¯¹äºè¿™ä¸ªæ•°æ®é›†ä¸­çš„æ‰€æœ‰å›¾åƒéƒ½æœ‰ä¸€ä¸ªçœŸå®çš„æ ‡ç­¾ã€‚&lt;/p&gt;

&lt;p&gt;ä»»ä½•ä¸€ç§å®šä¹‰çš„è·ç¦»éƒ½å¯ä»¥è¿›è¡Œè¿™æ ·çš„æ“ä½œï¼Œæ™®é€šæ¬§å‡ é‡Œå¾—è·ç¦»æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œè¢«ç§°ä¸ºã€Œäº¤å‰ç†µï¼ˆcross-entropyï¼‰ã€çš„è·ç¦»æ›´åŠ æœ‰æ•ˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/9fe5ab61209c490297769b729a471c81_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€Œone-hotã€ç¼–ç æ„å‘³ç€ä½ ä½¿ç”¨ä¸€ä¸ª 10 ä¸ªå€¼çš„å‘é‡ï¼Œå…¶ä¸­é™¤äº†ç¬¬ 6 ä¸ªå€¼ä¸º 1 ä»¥å¤–çš„æ‰€æœ‰å€¼éƒ½æ˜¯ 0ã€‚è¿™éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºè¿™æ ·çš„æ ¼å¼å’Œæˆ‘ä»¬ç¥ç»ç½‘ç»œé¢„æµ‹è¾“å‡ºçš„æ ¼å¼éå¸¸ç›¸ä¼¼ï¼ŒåŒæ—¶å®ƒä¹Ÿä½œä¸ºä¸€ä¸ª 10 å€¼çš„å‘é‡ã€‚&lt;/p&gt;

&lt;p&gt;ã€Œè®­ç»ƒã€ä¸€ä¸ªç¥ç»ç½‘ç»œå®é™…ä¸Šæ„å‘³ç€ä½¿ç”¨è®­ç»ƒå›¾åƒå’Œæ ‡ç­¾æ¥è°ƒæ•´æƒé‡å’Œåç½®ï¼Œä»¥ä¾¿æœ€å°åŒ–äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚å®ƒæ˜¯è¿™æ ·å·¥ä½œçš„ã€‚&lt;/p&gt;

&lt;p&gt;äº¤å‰ç†µæ˜¯ä¸€ä¸ªå…³äºæƒé‡ã€åç½®ã€è®­ç»ƒå›¾åƒçš„åƒç´ å’Œå…¶å·²çŸ¥æ ‡ç­¾çš„å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬ç›¸å¯¹äºæ‰€æœ‰çš„æƒé‡å’Œæ‰€æœ‰çš„åç½®è®¡ç®—äº¤å‰ç†µçš„åå¯¼æ•°ï¼Œæˆ‘ä»¬å°±å¾—åˆ°ä¸€ä¸ªå¯¹äºç»™å®šå›¾åƒã€æ ‡ç­¾å’Œå½“å‰æƒé‡å’Œåç½®çš„ã€Œæ¢¯åº¦ã€ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬æœ‰ 7850 ä¸ªæƒé‡å’Œåç½®ï¼Œæ‰€ä»¥è®¡ç®—æ¢¯åº¦éœ€è¦å¤§é‡çš„å·¥ä½œã€‚å¹¸è¿çš„æ˜¯ï¼ŒTensorFlow å¯ä»¥æ¥å¸®æˆ‘ä»¬åšè¿™é¡¹å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;æ¢¯åº¦çš„æ•°å­¦æ„ä¹‰åœ¨äºå®ƒæŒ‡å‘ã€Œä¸Šï¼ˆupï¼‰ã€ã€‚å› ä¸ºæˆ‘ä»¬æƒ³è¦åˆ°è¾¾ä¸€ä¸ªäº¤å‰ç†µä½çš„åœ°æ–¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»å‘ç›¸åçš„æ–¹å‘ã€‚æˆ‘ä»¬ç”¨ä¸€å°éƒ¨åˆ†çš„æ¢¯åº¦æ›´æ–°æƒé‡å’Œåç½®å¹¶ä¸”ä½¿ç”¨ä¸‹ä¸€æ‰¹è®­ç»ƒå›¾åƒå†æ¬¡åšåŒæ ·çš„äº‹æƒ…ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œè¿™å¯ä»¥ä½¿æˆ‘ä»¬åˆ°è¾¾äº¤å‰ç†µæœ€å°çš„å‡¹ç‚¹çš„ä½éƒ¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/b90ff98a395b46e392c21c6ebca0c7d6_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨è¿™å‰¯å›¾ç‰‡å½“ä¸­ï¼Œäº¤å‰ç†µè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªæƒé‡çš„å‡½æ•°ã€‚äº‹å®ä¸Šï¼Œè¿˜æœ‰æ›´å¤šã€‚æ¢¯åº¦ä¸‹é™ç®—æ³•éµå¾ªç€ä¸€ä¸ªæœ€é™¡çš„å¡åº¦ä¸‹é™åˆ°å±€éƒ¨æœ€å°å€¼çš„è·¯å¾„ã€‚è®­ç»ƒå›¾åƒåœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­åŒæ ·ä¼šè¢«æ”¹å˜ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å‘ç€ä¸€ä¸ªé€‚ç”¨äºæ‰€æœ‰å›¾åƒçš„å±€éƒ¨æœ€å°å€¼æ”¶æ•›ã€‚&lt;/p&gt;

&lt;p&gt;ã€Œå­¦ä¹ ç‡ï¼ˆlearning rateï¼‰ã€ï¼š åœ¨æ•´ä¸ªæ¢¯åº¦çš„é•¿åº¦ä¸Šï¼Œä½ ä¸èƒ½åœ¨æ¯ä¸€æ¬¡è¿­ä»£çš„æ—¶å€™éƒ½å¯¹æƒé‡å’Œåç½®è¿›è¡Œæ›´æ–°ã€‚è¿™å°±ä¼šåƒæ˜¯ä½ ç©¿ç€ä¸ƒé‡Œé´å´è¯•å›¾åˆ°è¾¾ä¸€ä¸ªå±±è°·çš„åº•éƒ¨ã€‚ä½ ä¼šç›´æ¥ä»å±±è°·çš„ä¸€è¾¹åˆ°è¾¾å¦ä¸€è¾¹ã€‚ä¸ºäº†åˆ°è¾¾åº•éƒ¨ï¼Œä½ éœ€è¦ä¸€äº›æ›´å°çš„æ­¥ä¼ï¼Œå³åªä½¿ç”¨æ¢¯åº¦çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸åœ¨ &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;1000&lt;/sub&gt; åŒºåŸŸä¸­ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªéƒ¨åˆ†ä¸ºã€Œå­¦ä¹ ç‡ï¼ˆLearning rateï¼‰ã€ã€‚&lt;/p&gt;

&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¸‹æ˜¯è®­ç»ƒè¿‡ç¨‹çš„æ­¥éª¤ï¼š&lt;/p&gt;

&lt;p&gt;Training digits and labels =&amp;gt; loss function =&amp;gt; gradient (partial derivatives) =&amp;gt; steepest descent =&amp;gt; update weights and biases =&amp;gt; repeat with next mini-batch of training images and labels&lt;/p&gt;

&lt;p&gt;è®­ç»ƒæ•°å­—å’Œæ ‡ç­¾ =&amp;gt; æŸå¤±å‡½æ•° =&amp;gt; æ¢¯åº¦ï¼ˆéƒ¨åˆ†åå¯¼æ•°ï¼‰=&amp;gt; æœ€é™¡çš„æ¢¯åº¦ =&amp;gt; æ›´æ–°æƒé‡å’Œåç½® =&amp;gt; ä½¿ç”¨ä¸‹ä¸€ä¸ª mini-batch çš„å›¾åƒå’Œæ ‡ç­¾é‡å¤è¿™ä¸€è¿‡ç¨‹&lt;/p&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆä½¿ç”¨ 100 ä¸ªå›¾åƒå’Œæ ‡ç­¾çš„ mini-batchï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä½ å½“ç„¶ä¹Ÿå¯ä»¥åªåœ¨ä¸€ä¸ªç¤ºä¾‹å›¾åƒä¸­è®¡ç®—ä½ çš„æ¢¯åº¦å¹¶ä¸”ç«‹å³æ›´æ–°æƒé‡å’Œåç½®ï¼ˆè¿™åœ¨ç§‘å­¦æ–‡çŒ®ä¸­è¢«ç§°ä¸ºã€Œéšæœºæ¢¯åº¦ä¸‹é™ï¼ˆstochastic gradient descentï¼‰ã€ï¼‰ã€‚åœ¨ 100 ä¸ªæ ·æœ¬ä¸Šéƒ½è¿™æ ·åšå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´å¥½åœ°è¡¨ç¤ºç”±ä¸åŒæ ·æœ¬å›¾åƒæ–½åŠ çº¦æŸçš„æ¢¯åº¦å¹¶ä¸”å¯èƒ½æ›´å¿«åœ°æœç€è§£å†³æ–¹æ¡ˆæ”¶æ•›ã€‚mini-batch çš„å¤§å°æ˜¯å¯è°ƒæ•´çš„å‚æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªæ›´åŠ æŠ€æœ¯åŒ–çš„åŸå› ï¼šä½¿ç”¨æ‰¹å¤„ç†ä¹Ÿæ„å‘³ç€ä½¿ç”¨è¾ƒå¤§çš„çŸ©é˜µï¼Œè€Œè¿™äº›é€šå¸¸æ›´å®¹æ˜“åœ¨ GPU ä¸Šä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;å¸¸è§é—®é¢˜&lt;/p&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆäº¤å‰ç†µæ˜¯åœ¨åˆ†ç±»é—®é¢˜ä¸­åˆé€‚çš„å®šä¹‰è·ç¦»ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ã€€ã€€è§£ç­”é“¾æ¥ï¼š&lt;a href=&#34;https://jamesmccaffrey.wordpress.com/2013/11/05/why-you-should-use-cross-entropy-error-instead-of-classification-error-or-mean-squared-error-for-neural-network-classifier-training/&#34;&gt;https://jamesmccaffrey.wordpress.com/2013/11/05/why-you-should-use-cross-entropy-error-instead-of-classification-error-or-mean-squared-error-for-neural-network-classifier-training/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;å®éªŒ-è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç &#34;&gt;å®éªŒï¼šè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç &lt;/h3&gt;

&lt;p&gt;å•å±‚ç¥ç»ç½‘ç»œçš„ä»£ç å·²ç»å†™å¥½äº†ã€‚è¯·æ‰“å¼€ mnist_1.0_softmax.py æ–‡ä»¶å¹¶æŒ‰è¯´æ˜è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;ä½ åœ¨æœ¬èŠ‚çš„ä»»åŠ¡æ˜¯ç†è§£å¼€å§‹ä»£ç ï¼Œä»¥ä¾¿ç¨åå¯¹å…¶æ”¹è¿›ã€‚&lt;/p&gt;

&lt;p&gt;ä½ åº”è¯¥çœ‹åˆ°ï¼Œåœ¨æ–‡æ¡£ä¸­çš„è¯´æ˜å’Œå¯åŠ¨ä»£ç åªæœ‰å¾®å°çš„å·®åˆ«ã€‚å®ƒä»¬å¯¹åº”äºå¯è§†åŒ–çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ³¨é‡Šä¸­è¢«æ ‡è®°ã€‚æ­¤å¤„å¯å¿½ç•¥ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€mnist_1.0_softmax.pyï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;a href=&#34;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&#34;&gt;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/b8be8ddc1a9e41d19ddbffe3ed1ddc05_th.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€æˆ‘ä»¬é¦–å…ˆå®šä¹‰ TensorFlow çš„å˜é‡å’Œå ä½ç¬¦ã€‚å˜é‡æ˜¯ä½ å¸Œæœ›è®­ç»ƒç®—æ³•ä¸ºä½ ç¡®å®šçš„æ‰€æœ‰çš„å‚æ•°ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å‚æ•°æ˜¯æƒé‡å’Œåå·®ã€‚&lt;/p&gt;

&lt;p&gt;å ä½ç¬¦æ˜¯åœ¨è®­ç»ƒæœŸé—´å¡«å……å®é™…æ•°æ®çš„å‚æ•°ï¼Œé€šå¸¸æ˜¯è®­ç»ƒå›¾åƒã€‚æŒæœ‰è®­ç»ƒå›¾åƒçš„å¼ é‡çš„å½¢å¼æ˜¯ [None, 28, 28, 1]ï¼Œå…¶ä¸­çš„å‚æ•°ä»£è¡¨ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;28, 28, 1: å›¾åƒæ˜¯ 28x28 æ¯åƒç´  x 1ï¼ˆç°åº¦ï¼‰ã€‚æœ€åä¸€ä¸ªæ•°å­—å¯¹äºå½©è‰²å›¾åƒæ˜¯ 3 ä½†åœ¨è¿™é‡Œå¹¶éæ˜¯å¿…é¡»çš„ã€‚&lt;/li&gt;
&lt;li&gt;None: è¿™æ˜¯ä»£è¡¨å›¾åƒåœ¨å°æ‰¹é‡ï¼ˆmini-batchï¼‰ä¸­çš„æ•°é‡ã€‚åœ¨è®­ç»ƒæ—¶å¯ä»¥å¾—åˆ°ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã€€ã€€mnist_1.0_softmax.pyï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;a href=&#34;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&#34;&gt;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/71fef16bc66b4939975a236b58dac8ba_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€ç¬¬ä¸€è¡Œæ˜¯æˆ‘ä»¬å•å±‚ç¥ç»ç½‘ç»œçš„æ¨¡å‹ã€‚å…¬å¼æ˜¯æˆ‘ä»¬åœ¨å‰é¢çš„ç†è®ºéƒ¨åˆ†å»ºç«‹çš„ã€‚tf.reshape å‘½ä»¤å°†æˆ‘ä»¬çš„ 28Ã—28 çš„å›¾åƒè½¬åŒ–æˆ 784 ä¸ªåƒç´ çš„å•å‘é‡ã€‚åœ¨ reshape ä¸­çš„ã€Œ-1ã€æ„å‘³ç€ã€Œè®¡ç®—æœºï¼Œè®¡ç®—å‡ºæ¥ï¼Œè¿™åªæœ‰ä¸€ç§å¯èƒ½ã€ã€‚åœ¨å®é™…å½“ä¸­ï¼Œè¿™ä¼šæ˜¯å›¾åƒåœ¨å°æ‰¹æ¬¡ï¼ˆmini-batchï¼‰ä¸­çš„æ•°é‡ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé¢å¤–çš„å ä½ç¬¦ç”¨äºè®­ç»ƒæ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾ä¸è®­ç»ƒå›¾åƒä¸€èµ·è¢«æä¾›ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬æœ‰æ¨¡å‹é¢„æµ‹å’Œæ­£ç¡®çš„æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¡ç®—äº¤å‰ç†µã€‚tf.reduce_sum æ˜¯å¯¹å‘é‡çš„æ‰€æœ‰å…ƒç´ æ±‚å’Œã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¸¤è¡Œè®¡ç®—äº†æ­£ç¡®è¯†åˆ«æ•°å­—çš„ç™¾åˆ†æ¯”ã€‚è¿™æ˜¯ç•™ç»™è¯»è€…çš„ç†è§£ç»ƒä¹ ï¼Œä½¿ç”¨ TensorFlow API å‚è€ƒã€‚ä½ ä¹Ÿå¯ä»¥è·³è¿‡å®ƒä»¬ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€mnist_1.0_softmax.pyï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;a href=&#34;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py)&#34;&gt;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€optimizer = tf.train.GradientDescentOptimizer(0.003)&lt;/p&gt;

&lt;p&gt;ã€€ã€€train_step = optimizer.minimize(cross_entropy)&lt;/p&gt;

&lt;p&gt;ã€€ã€€æ‰æ˜¯ TensorFlow å‘æŒ¥å®ƒåŠ›é‡çš„åœ°æ–¹ã€‚ä½ é€‰æ‹©ä¸€ä¸ªé€‚åº”å™¨ï¼ˆoptimiserï¼Œæœ‰è®¸å¤šå¯ä¾›é€‰æ‹©ï¼‰å¹¶ä¸”ç”¨å®ƒæœ€å°åŒ–äº¤å‰ç†µæŸå¤±ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼ŒTensorFlow è®¡ç®—ç›¸å¯¹äºæ‰€æœ‰æƒé‡å’Œæ‰€æœ‰åç½®ï¼ˆæ¢¯åº¦ï¼‰çš„æŸå¤±å‡½æ•°çš„åå¯¼æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªå½¢å¼è¡ç”Ÿï¼ˆ formal derivationï¼‰ï¼Œå¹¶éæ˜¯ä¸€ä¸ªè€—æ—¶çš„æ•°å€¼å‹è¡ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;æ¢¯åº¦ç„¶åè¢«ç”¨æ¥æ›´æ–°æƒé‡å’Œåç½®ã€‚å­¦ä¹ ç‡ä¸º 0.003ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæ˜¯æ—¶å€™æ¥è¿è¡Œè®­ç»ƒå¾ªç¯äº†ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰çš„ TensorFlow æŒ‡ä»¤éƒ½åœ¨å†…å­˜ä¸­å‡†å¤‡äº†ä¸€ä¸ªè®¡ç®—å›¾ï¼Œä½†æ˜¯è¿˜æœªè¿›è¡Œè®¡ç®—ã€‚&lt;/p&gt;

&lt;p&gt;TensorFlow çš„ â€œå»¶è¿Ÿæ‰§è¡Œï¼ˆdeferred executionï¼‰â€ æ¨¡å‹ï¼šTensorFlow æ˜¯ä¸ºåˆ†å¸ƒå¼è®¡ç®—æ„å»ºçš„ã€‚å®ƒå¿…é¡»çŸ¥é“ä½ è¦è®¡ç®—çš„æ˜¯ä»€ä¹ˆã€ä½ çš„æ‰§è¡Œå›¾ï¼ˆexecution graphï¼‰ï¼Œç„¶åæ‰å¼€å§‹å‘é€è®¡ç®—ä»»åŠ¡åˆ°å„ç§è®¡ç®—æœºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæœ‰ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œæ¨¡å‹ï¼Œä½ é¦–å…ˆä½¿ç”¨ TensorFlow å‡½æ•°åœ¨å†…å­˜ä¸­åˆ›é€ ä¸€ä¸ªè®¡ç®—å›¾ï¼Œç„¶åå¯åŠ¨ä¸€ä¸ªæ‰§è¡Œ Session å¹¶ä¸”ä½¿ç”¨ Session.run æ‰§è¡Œå®é™…è®¡ç®—ä»»åŠ¡ã€‚åœ¨æ­¤æ—¶ï¼Œå›¾å½¢æ— æ³•è¢«æ›´æ”¹ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºè¿™ä¸ªæ¨¡å‹ï¼ŒTensorFlow æ¥ç®¡äº†åˆ†å¸ƒå¼è¿ç®—çš„å¤§é‡è¿ç­¹ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚ä½ æŒ‡ç¤ºå®ƒåœ¨è®¡ç®—æœº 1 ä¸Šè¿è¡Œè®¡ç®—çš„ä¸€éƒ¨åˆ† ï¼Œè€Œåœ¨è®¡ç®—æœº 2 ä¸Šè¿è¡Œå¦ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è¿›è¡Œå¿…è¦çš„æ•°æ®ä¼ è¾“ã€‚&lt;/p&gt;

&lt;p&gt;è®¡ç®—éœ€è¦å°†å®é™…æ•°æ®åé¦ˆè¿›ä½ åœ¨ TensorFlow ä»£ç ä¸­å®šä¹‰çš„å ä½ç¬¦ã€‚è¿™æ˜¯ä»¥ Python çš„ dictionary çš„å½¢å¼ç»™å‡ºçš„ï¼Œå…¶ä¸­çš„é”®æ˜¯å ä½ç¬¦çš„åç§°ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€mnist_1.0_softmax.pyï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;a href=&#34;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&#34;&gt;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_1.0_softmax.py&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/a96dcaf397d342e18edb0ec24757f821.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€åœ¨è¿™é‡Œæ‰§è¡Œçš„ train_step æ˜¯å½“æˆ‘ä»¬è¦æ±‚ TensorFlow æœ€å°åŒ–äº¤å‰ç†µæ—¶è·å¾—çš„ã€‚è¿™æ˜¯è®¡ç®—æ¢¯åº¦å’Œæ›´æ–°æƒé‡å’Œåç½®çš„æ­¥éª¤ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›å€¼æ¥æ˜¾ç¤ºï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¿½è¸ªæˆ‘ä»¬æ¨¡å‹çš„æ€§èƒ½ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è®­ç»ƒå›è·¯ä¸­ä½¿ç”¨è¯¥ä»£ç æ¥è®¡ç®—å‡†ç¡®åº¦å’Œäº¤å‰ç†µï¼ˆä¾‹å¦‚æ¯ 10 æ¬¡è¿­ä»£ï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€# success ?&lt;/p&gt;

&lt;p&gt;ã€€ã€€a,c = sess.run([accuracy, cross_entropy], feed_dict=train_data)&lt;/p&gt;

&lt;p&gt;é€šè¿‡åœ¨é¦ˆé€ dictionary ä¸­æä¾›æµ‹è¯•è€Œä¸æ˜¯è®­ç»ƒæ•°æ®ï¼Œå¯ä»¥å¯¹æµ‹è¯•æ•°æ®è¿›è¡ŒåŒæ ·çš„è®¡ç®—ï¼ˆä¾‹å¦‚æ¯ 100 æ¬¡è¿­ä»£è®¡ç®—ä¸€æ¬¡ã€‚æœ‰ 10,000 ä¸ªæµ‹è¯•æ•°å­—ï¼Œæ‰€ä»¥ä¼šè€—è´¹ CPU ä¸€äº›æ—¶é—´ï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€# success on test data ?&lt;/p&gt;

&lt;p&gt;ã€€ã€€test&lt;em&gt;data={X: mnist.test.images, Y&lt;/em&gt;: mnist.test.labels}&lt;/p&gt;

&lt;p&gt;ã€€ã€€a,c = sess.run([accuracy, cross_entropy], feed=test_data)&lt;/p&gt;

&lt;p&gt;TensorFlow å’Œ Numpy æ˜¯æœ‹å‹ï¼šåœ¨å‡†å¤‡è®¡ç®—å›¾æ—¶ï¼Œä½ åªéœ€è¦æ“çºµ TensorFlow å¼ é‡å’Œå‘½ä»¤ï¼Œæ¯”å¦‚ tf.matmul, tf.reshape ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶è€Œï¼Œåªè¦æ‰§è¡Œ Session.run å‘½ä»¤ï¼Œå®ƒçš„è¿”å›å€¼å°±æ˜¯ Numpy å¼ é‡ï¼Œå³ Numpy å¯ä»¥ä½¿ç”¨çš„ numpy.ndarray å¯¹è±¡ä»¥åŠåŸºäºå®ƒçš„æ‰€æœ‰ç§‘å­¦è®¡ç®—åº“ã€‚è¿™å°±æ˜¯ä½¿ç”¨ matplotlibï¼ˆåŸºäº Numpy çš„æ ‡å‡† Python ç»˜å›¾åº“ï¼‰ä¸ºæœ¬å®éªŒæ„å»ºå®æ—¶å¯è§†åŒ–çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªç®€å•çš„æ¨¡å‹å·²ç»èƒ½è¯†åˆ« 92% çš„æ•°å­—äº†ã€‚è¿™ä¸é”™ï¼Œä½†æ˜¯ä½ ç°åœ¨è¦æ˜¾è‘—åœ°æ”¹å–„å®ƒã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/e65dd7cd3b2f43ab85279a8d39de470a_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;å®éªŒ-å¢åŠ å±‚&#34;&gt;å®éªŒ:å¢åŠ å±‚&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†æé«˜è¯†åˆ«çš„å‡†ç¡®åº¦ï¼Œæˆ‘ä»¬å°†ä¸ºç¥ç»ç½‘ç»œå¢åŠ æ›´å¤šçš„å±‚ã€‚ç¬¬äºŒå±‚ç¥ç»å…ƒå°†è®¡ç®—å‰ä¸€å±‚ç¥ç»å…ƒè¾“å‡ºçš„åŠ æƒå’Œï¼Œè€Œéè®¡ç®—åƒç´ çš„åŠ æƒå’Œã€‚è¿™é‡Œæœ‰ä¸€ä¸ª 5 å±‚å…¨ç›¸è¿çš„ç¥ç»ç½‘ç»œçš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/1b4c2da0004c41988eb4bd83f28449dd_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ç»§ç»­ç”¨ softmax æ¥ä½œä¸ºæœ€åä¸€å±‚çš„æ¿€æ´»å‡½æ•°ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨åˆ†ç±»è¿™ä¸ªé—®é¢˜ä¸Šå®ƒæ€§èƒ½ä¼˜å¼‚çš„åŸå› ã€‚ä½†åœ¨ä¸­é—´å±‚ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨æœ€ç»å…¸çš„æ¿€æ´»å‡½æ•°ï¼šsigmoidï¼šåœ¨è¿™ä¸€èŠ‚ä¸­ä½ çš„ä»»åŠ¡æ˜¯ä¸ºä½ çš„æ¨¡å‹å¢åŠ ä¸€åˆ°ä¸¤ä¸ªä¸­é—´å±‚ä»¥æé«˜å®ƒçš„æ€§èƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/6e069d408df443c49317ccd7784874b8_th.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç­”æ¡ˆå¯ä»¥åœ¨ mnist_2.0_five_layers_sigmoid.py ä¸­æ‰¾åˆ°ã€‚åªæœ‰å½“ä½ å®åœ¨æƒ³ä¸å‡ºæ¥çš„æ—¶å€™å†ä½¿ç”¨å®ƒï¼ä¸ºäº†å¢åŠ ä¸€ä¸ªå±‚ï¼Œä½ éœ€è¦ä¸ºä¸­é—´å±‚å¢åŠ ä¸€ä¸ªé¢å¤–çš„æƒé‡çŸ©é˜µå’Œä¸€ä¸ªé¢å¤–çš„åç½®å‘é‡ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€W1 = tf.Variable(tf.truncated_normal([28*28, 200] ,stddev=0.1))&lt;/p&gt;

&lt;p&gt;ã€€ã€€B1 = tf.Variable(tf.zeros([200]))&lt;/p&gt;

&lt;p&gt;ã€€ã€€W2 = tf.Variable(tf.truncated_normal([200, 10], stddev=0.1))&lt;/p&gt;

&lt;p&gt;ã€€ã€€B2 = tf.Variable(tf.zeros([10]))&lt;/p&gt;

&lt;p&gt;å¯¹ï¼Œå°±è¿™ä¹ˆåšã€‚é€šè¿‡ 2 ä¸ªä¸­é—´å±‚ä»¥åŠä¾‹å­ä¸­ 200 ä¸ªå’Œ 100 ä¸ªç¥ç»å…ƒï¼Œä½ ç°åœ¨åº”è¯¥èƒ½å¤ŸæŠŠä½ çš„ç¥ç»ç½‘ç»œçš„å‡†ç¡®åº¦æ¨é«˜åˆ° 97% äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/e60d8b29dad048fa8e5917c95c7a6153_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;å®éªŒ-æ·±åº¦ç½‘ç»œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹&#34;&gt;å®éªŒï¼šæ·±åº¦ç½‘ç»œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹&lt;/h3&gt;

&lt;p&gt;éšç€å±‚æ•°çš„å¢åŠ ï¼Œç¥ç»ç½‘ç»œè¶Šæ¥è¶Šéš¾ä»¥æ”¶æ•›ã€‚ä½†ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ§åˆ¶å®ƒä»¬çš„è¡Œä¸ºäº†ã€‚è¿™é‡Œæ˜¯ä¸€äº›åªç”¨ 1 è¡Œå°±å¯ä»¥å®ç°çš„æ”¹è¿›ï¼Œå½“ä½ çœ‹åˆ°å‡†ç¡®åº¦æ›²çº¿å‡ºç°å¦‚ä¸‹æƒ…å†µçš„æ—¶å€™ï¼Œè¿™äº›å°æŠ€å·§ä¼šå¸®åˆ°ä½ ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/5b31861eff624a32bca2e5c29169a7c1_th.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¿®æ­£çº¿æ€§å•å…ƒï¼ˆReLUï¼‰æ¿€æ´»å‡½æ•°&lt;/p&gt;

&lt;p&gt;åœ¨æ·±åº¦ç½‘ç»œé‡Œï¼Œsigmoid æ¿€æ´»å‡½æ•°ç¡®å®èƒ½å¸¦æ¥å¾ˆå¤šé—®é¢˜ã€‚å®ƒæŠŠæ‰€æœ‰çš„å€¼éƒ½æŒ¤åˆ°äº† 0 åˆ° 1 ä¹‹é—´ï¼Œè€Œä¸”å½“ä½ é‡å¤åšçš„æ—¶å€™ï¼Œç¥ç»å…ƒçš„è¾“å‡ºå’Œå®ƒä»¬çš„æ¢¯åº¦éƒ½å½’é›¶äº†ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå‡ºäºå†å²åŸå› ï¼Œä¸€äº›ç°ä»£ç¥ç»ç½‘ç»œä½¿ç”¨äº† ReLUï¼ˆä¿®æ­£çº¿æ€§å•å…ƒï¼‰ï¼Œå®ƒå¤§è‡´æ˜¯å¦‚ä¸‹è¿™ä¸ªæ ·å­ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/a06abc6c13f743c28dd4b28018854629.png&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å‡çº§ 1/4ï¼šç”¨ RELU æ›¿æ¢ä½ æ‰€æœ‰çš„ sigmoidï¼Œç„¶åä½ ä¼šå¾—åˆ°ä¸€ä¸ªæ›´å¿«çš„åˆå§‹æ”¶æ•›å¹¶ä¸”å½“æˆ‘ä»¬ç»§ç»­å¢åŠ å±‚çš„æ—¶å€™ä¹Ÿé¿å…äº†ä¸€äº›åç»­é—®é¢˜çš„äº§ç”Ÿã€‚ä»…ä»…åœ¨ä»£ç ä¸­ç®€å•åœ°ç”¨ tf.nn.relu æ¥æ›¿æ¢ tf.nn.sigmoid å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªæ›´å¥½çš„ä¼˜åŒ–å™¨&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€ä¸ªç‰¹åˆ«å¤šç»´çš„ç©ºé—´é‡Œï¼Œå°±åƒå½“å‰è¿™ä¸ªæƒ…å†µâ€”â€”æˆ‘ä»¬æœ‰ 10K é‡çº§çš„æƒå€¼å’Œåç½®å€¼â€”â€”ã€Œéç‚¹ (saddle pointsï¼‰ã€ä¼šé¢‘ç¹å‡ºç°ã€‚è¿™äº›ç‚¹ä¸æ˜¯å±€éƒ¨æœ€å°å€¼ç‚¹ï¼Œä½†å®ƒçš„æ¢¯åº¦å´æ˜¯é›¶ï¼Œé‚£ä¹ˆæ¢¯åº¦é™çš„ä¼˜åŒ–ä¼šå¡åœ¨è¿™é‡Œã€‚TensorFlow æœ‰ä¸€ç³»åˆ—å¯ä»¥ç”¨çš„ä¼˜åŒ–å™¨ï¼ŒåŒ…æ‹¬ä¸€äº›å¸¦æœ‰ä¸€å®šçš„æƒ¯æ€§ï¼Œèƒ½å¤Ÿå®‰å…¨è¶Šè¿‡éç‚¹çš„ä¼˜åŒ–å™¨ã€‚&lt;/p&gt;

&lt;p&gt;å‡çº§ 2/4ï¼šç°åœ¨å°†ä½ çš„ tf.train.GradientDescentOptimiser æ›¿æ¢ä¸º tf.train.AdamOptimizerã€‚&lt;/p&gt;

&lt;p&gt;éšæœºåˆå§‹åŒ–&lt;/p&gt;

&lt;p&gt;å‡†ç¡®æ€§ä¸€ç›´å¡åœ¨ 0.1ï¼Ÿä½ æŠŠä½ çš„æƒå€¼åˆå§‹åŒ–æˆéšæœºå€¼äº†æ²¡ï¼Ÿå¯¹äºåç½®å€¼ï¼Œå¦‚æœç”¨ ReLU çš„è¯ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯æŠŠå®ƒä»¬éƒ½åˆå§‹åŒ–æˆå°çš„æ­£å€¼ï¼Œè¿™æ ·ç¥ç»å…ƒä¸€å¼€å§‹å°±ä¼šå·¥ä½œåœ¨ ReLU çš„éé›¶åŒºåŸŸå†…ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€W = tf.Variable(tf.truncated_normal([K, L] ,stddev=0.1))&lt;/p&gt;

&lt;p&gt;ã€€ã€€B = tf.Variable(tf.ones([L])/10)&lt;/p&gt;

&lt;p&gt;å‡çº§ 3/4ï¼šç°åœ¨æ£€æŸ¥æ˜¯å¦ä½ æ‰€æœ‰çš„æƒå€¼å’Œåç½®å€¼éƒ½è¢«åˆå§‹åŒ–å¥½äº†ã€‚ä¸Šå›¾æ‰€ç¤ºçš„ 0.1 ä¼šä½œä¸ºåç½®å€¼ã€‚&lt;/p&gt;

&lt;p&gt;ä¸å®šå€¼ï¼ˆNaNï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/18bf142ee7894aa18c015ddba8c645ab_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ çœ‹åˆ°ä½ çš„ç²¾ç¡®æ›²çº¿é™¡ç„¶ä¸‹æ»‘å¹¶ä¸”è°ƒè¯•å£è¾“å‡ºçš„äº¤å‰ç†µæ˜¯ NaNï¼Œä¸ç”¨æ„Ÿåˆ°å¤´ç–¼ï¼Œä½ å…¶å®æ˜¯æ­£åœ¨å°è¯•è®¡ç®— log(0)ï¼Œè€Œè¿™è‚¯å®šæ˜¯ä¸ªä¸å®šå€¼ï¼ˆNaNï¼‰ã€‚è¿˜è®°å¾—å—ï¼Œäº¤å‰ç†µçš„è®¡ç®—æ¶‰åŠåˆ°å¯¹ softmax å±‚çš„è¾“å‡ºå–å¯¹æ•°ã€‚é‰´äº softmax åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªæŒ‡æ•°ï¼Œå®ƒè‚¯å®šä¸æ˜¯ 0ï¼Œæˆ‘ä»¬å¦‚æœç”¨ 32 ä½ç²¾åº¦çš„æµ®ç‚¹è¿ç®—å°±è¿˜å¥½ï¼Œexp(-100) åŸºæœ¬ä¸Šå¯ä»¥ç®—ä½œæ˜¯ 0 äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¾ˆå¹¸è¿ï¼ŒTensorFlow æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å‡½æ•°å¯ä»¥åœ¨å•æ­¥å†…è®¡ç®— softmax å’Œäº¤å‰ç†µï¼Œå®ƒæ˜¯ä»¥ä¸€ç§æ•°å€¼ä¸Šè¾ƒä¸ºç¨³å®šçš„æ–¹å¼å®ç°çš„ã€‚å¦‚æœè¦ä½¿ç”¨å®ƒï¼Œä½ éœ€è¦åœ¨åº”ç”¨ softmax ä¹‹å‰å°†åŸå§‹çš„æƒé‡å’ŒåŠ ä¸Šä½ æœ€åä¸€å±‚çš„åç½®éš”ç¦»å¼€æ¥ï¼ˆåœ¨ç¥ç»ç½‘ç»œçš„æœ¯è¯­é‡Œå«ã€Œlogitsã€ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€å¦‚æœä½ æ¨¡å‹çš„æœ€åä¸€è¡Œæ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€Y = tf.nn.softmax(tf.matmul(Y4, W5) + B5)&lt;/p&gt;

&lt;p&gt;ã€€ã€€ä½ éœ€è¦æŠŠå®ƒæ›¿æ¢æˆï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€Ylogits = tf.matmul(Y4, W5) + B5Y = tf.nn.softmax(Ylogits)&lt;/p&gt;

&lt;p&gt;ã€€ã€€å¹¶ä¸”ä½ ç°åœ¨èƒ½ä»¥ä¸€ç§å®‰å…¨çš„æ–¹å¼è®¡ç®—äº¤å‰ç†µäº†ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€cross_entropy = tf.nn.softmax_cross_entropy_with&lt;em&gt;logits(Ylogits, Y&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;åŒæ ·åŠ ä¸Šä¸‹é¢è¿™è¡Œä»£ç ä½¿å¾—æµ‹è¯•å’Œè®­ç»ƒçš„äº¤å‰ç†µèƒ½å¤ŸåŒæ¡†æ˜¾ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€cross_entropy = tf.reduce_mean(cross_entropy)*100&lt;/p&gt;

&lt;p&gt;å‡çº§ 4/4ï¼šè¯·æŠŠ tf.nn.softmax_cross_entropy_with_logits åŠ åˆ°ä½ çš„ä»£ç é‡Œã€‚ä½ ä¹Ÿå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œç­‰ä½ çœŸåœ¨ä½ çš„è¾“å‡ºé‡Œçœ‹åˆ° NaN ä»¥åå†æ¥åšè¿™æ­¥ã€‚ç°åœ¨ï¼Œä½ å·²ç»å‡†å¤‡å¥½å®ç°ã€Œæ·±åº¦ã€äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å®éªŒ-å­¦ä¹ é€Ÿç‡è¡°é€€&#34;&gt;å®éªŒï¼šå­¦ä¹ é€Ÿç‡è¡°é€€&lt;/h3&gt;

&lt;p&gt;é€šè¿‡ä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–è€…å››ä¸ªä¸­é—´å±‚ï¼Œä½ ç°åœ¨å¯ä»¥å°†å‡†ç¡®åº¦æå‡è‡³æ¥è¿‘ 98%ï¼Œå½“ç„¶ï¼Œä½ çš„è¿­ä»£æ¬¡æ•°è¦è¾¾åˆ° 5000 æ¬¡ä»¥ä¸Šã€‚ä¸è¿‡ä½ ä¼šå‘ç°ä½ å¹¶ä¸æ€»æ˜¯ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/a4492d6cbbb343aab07a355246c915de_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™äº›æ›²çº¿å¾ˆå˜ˆæ‚ï¼Œçœ‹çœ‹æµ‹è¯•ç²¾ç¡®åº¦å§ï¼šå®ƒåœ¨å…¨ç™¾åˆ†æ¯”èŒƒå›´å†…è·³ä¸Šè·³ä¸‹ã€‚è¿™æ„å‘³ç€å³ä½¿ 0.003 çš„å­¦ä¹ ç‡æˆ‘ä»¬è¿˜æ˜¯å¤ªå¿«äº†ã€‚ä½†æˆ‘ä»¬ä¸èƒ½ä»…ä»…å°†å­¦ä¹ ç‡é™¤ä»¥åæˆ–è€…æ°¸è¿œä¸åœåœ°åšè®­ç»ƒã€‚ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯å¼€å§‹å¾ˆå¿«éšåå°†å­¦ä¹ é€Ÿç‡æŒ‡æ•°çº§è¡°å‡è‡³æ¯”å¦‚è¯´ 0.0001ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå°æ”¹å˜çš„å½±å“æ˜¯æƒŠäººçš„ã€‚ä½ ä¼šçœ‹åˆ°å¤§éƒ¨åˆ†çš„å™ªå£°æ¶ˆå¤±äº†å¹¶ä¸”æµ‹è¯•ç²¾ç¡®åº¦æŒç»­ç¨³å®šåœ¨ 98% ä»¥ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/41294f08d52d4959bb4b01c8e925f056_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å†çœ‹çœ‹è®­ç»ƒç²¾ç¡®åº¦æ›²çº¿ã€‚åœ¨å¥½å¤šä¸ª epoch é‡Œéƒ½è¾¾åˆ°äº† 100%ï¼ˆä¸€ä¸ª epoch=500 æ¬¡è¿­ä»£=å…¨éƒ¨è®­ç»ƒå›¾ç‰‡è®­ç»ƒä¸€æ¬¡ï¼‰ã€‚ç¬¬ä¸€æ¬¡æˆ‘ä»¬èƒ½å¾ˆå¥½åœ°è¯†åˆ«è®­ç»ƒå›¾ç‰‡äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¯·æŠŠå­¦ä¹ ç‡è¡°é€€åŠ åˆ°ä½ çš„ä»£ç é‡Œã€‚ä¸ºäº†æŠŠä¸€ä¸ªä¸åŒçš„å­¦ä¹ ç‡åœ¨æ¯æ¬¡è¿­ä»£æ—¶ä¼ ç»™ AdamOptimizerï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å ä½ç¬¦ï¼ˆplaceholderï¼‰å¹¶åœ¨æ¯æ¬¡è¿­ä»£æ—¶é€šè¿‡ feed_dict èµ‹ç»™å®ƒä¸€ä¸ªæ–°çš„å‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæ˜¯ä¸€ä¸ªæŒ‡æ•°çº§è¡°å‡çš„æ–¹ç¨‹ï¼šlr = lrmin+(lrmax-lrmin)*exp(-i/2000) ç­”æ¡ˆå¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œæ‰¾åˆ°ï¼šmnist_2.1_five_layers_relu_lrdecay.pyã€‚å¦‚æœä½ è¢«å¡ä½äº†å¯ä»¥ç”¨å®ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/260e6a3277984432adc3e945251e5f18_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;å®éªŒ-dropout-è¿‡æ‹Ÿåˆ&#34;&gt;å®éªŒï¼šdropoutã€è¿‡æ‹Ÿåˆ&lt;/h3&gt;

&lt;p&gt;ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°åœ¨æ•°åƒæ¬¡è¿­ä»£ä¹‹åï¼Œæµ‹è¯•å’Œè®­ç»ƒæ•°æ®çš„äº¤å‰ç†µæ›²çº¿å¼€å§‹ä¸ç›¸è¿ã€‚å­¦ä¹ ç®—æ³•åªæ˜¯åœ¨è®­ç»ƒæ•°æ®ä¸Šåšå·¥ä½œå¹¶ç›¸åº”åœ°ä¼˜åŒ–è®­ç»ƒçš„äº¤å‰ç†µã€‚å®ƒå†ä¹Ÿçœ‹ä¸åˆ°æµ‹è¯•æ•°æ®äº†ï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹ä¹Ÿä¸å¥‡æ€ªï¼šè¿‡äº†ä¸€ä¼šå„¿å®ƒçš„å·¥ä½œä¸å†å¯¹æµ‹è¯•äº¤å‰ç†µäº§ç”Ÿä»»ä½•å½±å“ï¼Œäº¤å‰ç†µåœæ­¢äº†ä¸‹é™ï¼Œæœ‰æ—¶ç”šè‡³åå¼¹å›æ¥ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/2b215ed2c1984612bdba47bf0dba1188_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å®ƒä¸ä¼šç«‹åˆ»å½±å“ä½ æ¨¡å‹å¯¹äºçœŸå®ä¸–ç•Œçš„è¯†åˆ«èƒ½åŠ›ï¼Œä½†æ˜¯å®ƒä¼šä½¿ä½ è¿è¡Œçš„ä¼—å¤šè¿­ä»£æ¯«æ— ç”¨å¤„ï¼Œè€Œä¸”è¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªä¿¡å·â€”â€”å‘Šè¯‰æˆ‘ä»¬è®­ç»ƒå·²ç»ä¸èƒ½å†ä¸ºæ¨¡å‹æä¾›è¿›ä¸€æ­¥æ”¹è¿›äº†ã€‚è¿™ç§æ— æ³•è¿æ¥é€šå¸¸ä¼šè¢«æ ‡æ˜ã€Œè¿‡æ‹Ÿåˆï¼ˆoverfittingï¼‰ã€ï¼Œè€Œä¸”å½“ä½ çœ‹åˆ°è¿™ä¸ªçš„æ—¶å€™ï¼Œä½ å¯ä»¥å°è¯•é‡‡ç”¨ä¸€ç§è§„èŒƒåŒ–ï¼ˆregularizationï¼‰æŠ€æœ¯ï¼Œç§°ä¹‹ä¸ºã€Œdropoutã€ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/8ba81eadbd6f4383a4af3a8dc13bbe53_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ dropout é‡Œï¼Œåœ¨æ¯ä¸€æ¬¡è®­ç»ƒè¿­ä»£çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä»ç½‘ç»œä¸­éšæœºåœ°æ”¾å¼ƒä¸€äº›ç¥ç»å…ƒã€‚ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªä½¿ç¥ç»å…ƒç»§ç»­ä¿ç•™çš„æ¦‚ç‡ pkeepï¼Œé€šå¸¸æ˜¯ 50% åˆ° 75% ä¹‹é—´ï¼Œç„¶ååœ¨æ¯ä¸€æ¬¡è®­ç»ƒçš„è¿­ä»£æ—¶ï¼Œéšæœºåœ°æŠŠä¸€äº›ç¥ç»å…ƒè¿åŒå®ƒä»¬çš„æƒé‡å’Œåç½®ä¸€èµ·å»æ‰ã€‚åœ¨ä¸€æ¬¡è¿­ä»£é‡Œï¼Œä¸åŒçš„ç¥ç»å…ƒå¯ä»¥è¢«ä¸€èµ·å»æ‰ï¼ˆè€Œä¸”ä½ ä¹ŸåŒæ ·éœ€è¦ç­‰æ¯”ä¾‹åœ°ä¿ƒè¿›å‰©ä½™ç¥ç»å…ƒçš„è¾“å‡ºï¼Œä»¥ç¡®ä¿ä¸‹ä¸€å±‚çš„æ¿€æ´»ä¸ä¼šç§»åŠ¨ï¼‰ã€‚å½“æµ‹è¯•ä½ ç¥ç»ç½‘ç»œæ€§èƒ½çš„æ—¶å€™ï¼Œä½ å†æŠŠæ‰€æœ‰çš„ç¥ç»å…ƒéƒ½è£…å›æ¥ (pkeep=1)ã€‚&lt;/p&gt;

&lt;p&gt;TensorFlow æä¾›ä¸€ä¸ª dropout å‡½æ•°å¯ä»¥ç”¨åœ¨ä¸€å±‚ç¥ç»ç½‘ç»œçš„è¾“å‡ºä¸Šã€‚å®ƒéšæœºåœ°æ¸…é›¶ä¸€äº›è¾“å‡ºå¹¶ä¸”æŠŠå‰©ä¸‹çš„æå‡ 1/pkeepã€‚è¿™é‡Œæ˜¯å¦‚ä½•æŠŠå®ƒç”¨åœ¨ä¸€ä¸ªä¸¤å±‚ç¥ç»ç½‘ç»œä¸Šçš„ä¾‹å­ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€# feed in 1 when testing, 0.75 when training&lt;/p&gt;

&lt;p&gt;ã€€ã€€pkeep = tf.placeholder(tf.float32)&lt;/p&gt;

&lt;p&gt;ã€€ã€€Y1 = tf.nn.relu(tf.matmul(X, W1) + B1)&lt;/p&gt;

&lt;p&gt;ã€€ã€€Y1d = tf.nn.dropout(Y1, pkeep)&lt;/p&gt;

&lt;p&gt;ã€€ã€€Y = tf.nn.softmax(tf.matmul(Y1d, W2) + B2)&lt;/p&gt;

&lt;p&gt;ä½ ç°åœ¨å¯ä»¥åœ¨ç½‘ç»œä¸­æ¯ä¸ªä¸­é—´å±‚ä»¥åæ’å…¥ dropoutã€‚å¦‚æœä½ æ²¡æ—¶é—´æ·±å…¥é˜…è¯»çš„è¯ï¼Œè¿™æ˜¯æœ¬é¡¹ç›®é‡Œçš„å¯é€‰æ­¥éª¤ã€‚&lt;/p&gt;

&lt;p&gt;è¯¥è§£å†³æ–¹æ¡ˆå¯ä»¥åœ¨ &lt;a href=&#34;https://github.com/martin-gorner/tensorflow-mnist-tutorial/blob/master/mnist_2.2_five_layers_relu_lrdecay_dropout.py&#34;&gt;mnist_2.2_five_layers_relu_lrdecay_dropout.py&lt;/a&gt;é‡Œæ‰¾åˆ°ã€‚å¦‚æœä½ è¢«éš¾ä½äº†ï¼Œå¯ä»¥ç”¨å®ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/59419fef6dbd401aa484dfb9983712f7_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä½ ä¼šçœ‹åˆ°æµ‹è¯•æŸå¤±å·²ç»è¢«æå›æ¥äº†ï¼Œå·²ç»åœ¨å¯æ§èŒƒå›´å†…äº†ï¼Œä¸è¿‡è‡³å°‘åœ¨è¿™ä¸ªä¾‹å­ä¸­å™ªå£°é‡æ–°å‡ºç°äº†ï¼ˆå¦‚æœä½ çŸ¥é“ dropout çš„å·¥ä½œåŸç†çš„è¯ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¸å¥‡æ€ªï¼‰ã€‚æµ‹è¯•çš„å‡†ç¡®åº¦ä¾ç„¶æ²¡å˜ï¼Œè¿™å€’æ˜¯æœ‰ç‚¹å°å¤±æœ›ã€‚è¿™ä¸ªã€Œè¿‡æ‹Ÿåˆã€ä¸€å®šè¿˜æœ‰å…¶å®ƒåŸå› ã€‚åœ¨æˆ‘ä»¬ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ‰¼è¦é‡è¿°ä¸€ä¸‹æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ç”¨è¿‡çš„æ‰€æœ‰å·¥å…·ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/cfcb109bbbe040d29e61d02d78059124_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ— è®ºæˆ‘ä»¬åšä»€ä¹ˆï¼Œæˆ‘ä»¬çœ‹ä¸Šå»éƒ½ä¸å¯èƒ½å¾ˆæ˜¾è‘—åœ°è§£å†³ 98% çš„éšœç¢ï¼Œè€Œä¸”æˆ‘ä»¬çš„æŸå¤±æ›²çº¿ä¾ç„¶æ˜¾ç¤ºã€Œè¿‡æ‹Ÿåˆã€æ— æ³•è¿æ¥ã€‚ä»€ä¹ˆæ˜¯çœŸæ­£çš„ã€Œè¿‡æ‹Ÿåˆã€ï¼Ÿè¿‡æ‹Ÿåˆå‘ç”Ÿåœ¨è¯¥ç¥ç»ç½‘ç»œå­¦å¾—ã€Œä¸å¥½ã€çš„æ—¶å€™ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¯¥ç¥ç»ç½‘ç»œå¯¹äºè®­ç»ƒæ ·æœ¬åšå¾—å¾ˆå¥½ï¼Œå¯¹çœŸå®åœºæ™¯å´å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚æœ‰ä¸€äº›åƒ dropout ä¸€æ ·çš„è§„èŒƒåŒ–æŠ€æœ¯èƒ½å¤Ÿè¿«ä½¿å®ƒå­¦ä¹ å¾—æ›´å¥½ï¼Œä¸è¿‡è¿‡æ‹Ÿåˆè¿˜æœ‰æ›´æ·±å±‚çš„åŸå› ã€‚&lt;/p&gt;

&lt;p&gt;åŸºæœ¬çš„è¿‡æ‹Ÿåˆå‘ç”Ÿåœ¨ä¸€ä¸ªç¥ç»ç½‘ç»œé’ˆå¯¹æ‰‹å¤´çš„é—®é¢˜æœ‰å¤ªå¤šçš„è‡ªç”±åº¦çš„æ—¶å€™ã€‚æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬æœ‰å¦‚æ­¤å¤šçš„ç¥ç»å…ƒä»¥è‡³äºæ‰€ç»„æˆçš„ç½‘ç»œå¯ä»¥å­˜å‚¨æˆ‘ä»¬æ‰€æœ‰çš„è®­ç»ƒå›¾åƒå¹¶ä¾é ç‰¹å¾åŒ¹é…æ¥è¯†åˆ«å®ƒä»¬ã€‚å®ƒä¼šåœ¨çœŸå®ä¸–ç•Œçš„æ•°æ®é‡Œè¿·å¤±ã€‚ä¸€ä¸ªç¥ç»ç½‘ç»œå¿…é¡»æœ‰æŸç§ç¨‹åº¦ä¸Šçš„çº¦æŸä»¥ä½¿å®ƒèƒ½å¤Ÿå½’çº³æ¨ç†å®ƒåœ¨å­¦ä¹ ä¸­æ‰€å­¦åˆ°çš„ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ åªæœ‰å¾ˆå°‘çš„è®­ç»ƒæ•°æ®ï¼Œç”šè‡³ä¸€ä¸ªå¾ˆå°çš„ç½‘ç»œéƒ½èƒ½å¤Ÿç”¨å¿ƒå­¦ä¹ å®ƒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ æ€»æ˜¯éœ€è¦å¾ˆå¤šæ•°æ®æ¥è®­ç»ƒç¥ç»ç½‘ç»œã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œå¦‚æœä½ å·²ç»åšå®Œäº†æ‰€æœ‰çš„æ­¥éª¤ï¼ŒåŒ…æ‹¬å®éªŒäº†ä¸åŒå¤§å°çš„ç½‘ç»œä»¥ç¡®ä¿å®ƒçš„è‡ªç”±åº¦å·²ç»çº¦æŸå¥½äº†ã€é‡‡ç”¨äº† dropoutã€å¹¶ä¸”è®­ç»ƒäº†å¤§é‡çš„æ•°æ®ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä½ è¿˜æ˜¯è¢«å¡åœ¨äº†å½“å‰çš„æ€§èƒ½å±‚æ¬¡ä¸Šå†ä¹Ÿä¸Šä¸å»äº†ã€‚è¿™è¯´æ˜ä½ çš„ç¥ç»ç½‘ç»œåœ¨å®ƒå½“å‰çš„å½¢æ€ä¸‹å·²ç»æ— æ³•ä»ä½ æä¾›çš„æ•°æ®ä¸­æŠ½å–åˆ°æ›´å¤šçš„ä¿¡æ¯äº†ï¼Œå°±åƒæˆ‘ä»¬è¿™ä¸ªä¾‹å­è¿™æ ·ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„å›¾åƒå—ï¼Ÿæ˜¯æ‰€æœ‰çš„åƒç´ éƒ½å±•å¹³åˆ°ä¸€ä¸ªå‘é‡é‡Œä¹ˆï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆç³Ÿç³•çš„æƒ³æ³•ã€‚æ‰‹å†™çš„æ•°å­—æ˜¯ç”±ä¸€ä¸ªä¸ªå½¢çŠ¶ç»„æˆçš„ï¼Œå½“æˆ‘ä»¬æŠŠåƒç´ å±•å¹³åæˆ‘ä»¬ä¼šä¸¢æ‰è¿™äº›å½¢çŠ¶ä¿¡æ¯ã€‚ä¸è¿‡ï¼Œæœ‰ä¸€ç§ç¥ç»ç½‘ç»œå¯ä»¥åˆ©ç”¨è¿™äº›å½¢çŠ¶ä¿¡æ¯ï¼šå·ç§¯ç½‘ç»œï¼ˆconvolutional networkï¼‰ã€‚è®©æˆ‘ä»¬æ¥è¯•è¯•ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç†è®º-å·ç§¯ç½‘ç»œ&#34;&gt;ç†è®ºï¼šå·ç§¯ç½‘ç»œ&lt;/h3&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/0eb4bf030ecc488a8d2f990c11e7272c_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨å·ç§¯ç½‘ç»œå±‚ä¸­ï¼Œä¸€ä¸ªã€Œç¥ç»å…ƒã€ä»…å¯¹è¯¥å›¾åƒä¸Šçš„ä¸€ä¸ªå°éƒ¨åˆ†çš„åƒç´ æ±‚åŠ æƒå’Œã€‚ç„¶åï¼Œå®ƒé€šå¸¸ä¼šæ·»åŠ ä¸€ä¸ªåç½®å•å…ƒï¼Œå¹¶ä¸”å°†å¾—åˆ°çš„åŠ æƒå’Œä¼ é€’ç»™æ¿€æ´»å‡½æ•°ã€‚ä¸å…¨è¿æ¥ç½‘ç»œç›¸æ¯”ï¼Œå…¶æœ€å¤§çš„åŒºåˆ«åœ¨äºå·ç§¯ç½‘ç»œçš„æ¯ä¸ªç¥ç»å…ƒé‡å¤ä½¿ç”¨ç›¸åŒçš„æƒé‡ï¼Œè€Œä¸æ˜¯æ¯ä¸ªç¥ç»å…ƒéƒ½æœ‰è‡ªå·±çš„æƒé‡ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„åŠ¨ç”»ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°é€šè¿‡è¿ç»­ä¿®æ”¹å›¾ç‰‡ä¸Šä¸¤ä¸ªæ–¹å‘çš„æƒé‡ï¼ˆå·ç§¯ï¼‰ï¼Œèƒ½å¤Ÿè·å¾—ä¸å›¾ç‰‡ä¸Šçš„åƒç´ ç‚¹æ•°é‡ç›¸åŒçš„è¾“å‡ºå€¼ï¼ˆå°½ç®¡åœ¨è¾¹ç¼˜å¤„éœ€è¦å¡«å……ï¼ˆpaddingï¼‰ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;è¦äº§ç”Ÿä¸€ä¸ªè¾“å‡ºå€¼å¹³é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€å¼  4x4 å¤§å°çš„å½©è‰²å›¾ç‰‡ä½œä¸ºå‡ºè¾“å…¥ã€‚åœ¨è¿™ä¸ªåŠ¨ç”»å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ 4x4x3=48 ä¸ªæƒé‡ï¼Œè¿™è¿˜ä¸å¤Ÿï¼Œä¸ºäº†å¢åŠ æ›´å¤šè‡ªç”±åº¦ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€‰å–ä¸åŒç»„çš„æƒé‡å€¼é‡å¤å®éªŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/cda66c477aa946eeba45408d4129b274_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡å‘æƒé‡å¼ é‡æ·»åŠ ä¸€ä¸ªç»´åº¦ï¼Œèƒ½å¤Ÿå°†ä¸¤ç»„æˆ–æ›´å¤šç»„çš„æƒé‡é‡å†™ä¸ºä¸€ç»„æƒé‡ï¼Œè¿™æ ·å°±ç»™å‡ºäº†ä¸€ä¸ªå·ç§¯å±‚çš„æƒé‡å¼ é‡çš„é€šç”¨å®ç°ã€‚ç”±äºè¾“å…¥ã€è¾“å‡ºé€šé“çš„æ•°é‡éƒ½æ˜¯å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å †å å¼ï¼ˆstackingï¼‰å’Œé“¾å¼ï¼ˆchainingï¼‰çš„å·ç§¯å±‚ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/10228a2a4d134aa0aa3077cb019d34a9_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬éœ€è¦æå–ä¿¡æ¯ã€‚åœ¨æœ€åä¸€å±‚ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…æƒ³ä½¿ç”¨ 10 ä¸ªç¥ç»å…ƒæ¥åˆ†ç±» 0-9 åä¸ªä¸åŒçš„æ•°å­—ã€‚ä¼ ç»Ÿä¸Šï¼Œè¿™æ˜¯é€šè¿‡ã€Œæœ€å¤§æ± åŒ–ï¼ˆmax-poolingï¼‰ã€å±‚æ¥å®Œæˆçš„ã€‚å³ä½¿ä»Šå¤©æœ‰è®¸å¤šæ›´ç®€å•çš„æ–¹æ³•èƒ½å¤Ÿå®ç°è¿™åˆ†ç±»ä»»åŠ¡ï¼Œä½†æ˜¯ï¼Œã€Œæœ€å¤§æ± åŒ–ã€èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç›´è§‰åœ°ç†è§£å·ç§¯ç¥ç»ç½‘ç»œæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚å¦‚æœä½ è®¤ä¸ºåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„å°å—æƒé‡ä¼šå‘å±•æˆèƒ½å¤Ÿè¿‡æ»¤åŸºæœ¬å½¢çŠ¶ï¼ˆæ°´å¹³çº¿ã€å‚ç›´çº¿æˆ–æ›²çº¿ç­‰ï¼‰çš„è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ï¼Œé‚£ä¹ˆï¼Œæå–æœ‰ç”¨ä¿¡æ¯çš„æ–¹å¼å°±æ˜¯è¯†åˆ«è¾“å‡ºå±‚ä¸­å“ªç§å½¢çŠ¶å…·æœ‰æœ€å¤§çš„å¼ºåº¦ã€‚å®é™…ä¸Šï¼Œåœ¨æœ€å¤§æ± åŒ–å±‚ä¸­ï¼Œç¥ç»å…ƒçš„è¾“å‡ºæ˜¯åœ¨ 2x2 çš„åˆ†ç»„ä¸­è¢«å¤„ç†ï¼Œæœ€åä»…ä»…ä¿ç•™è¾“å‡ºæœ€å¤§å¼ºåº¦çš„ç¥ç»å…ƒã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼šå¦‚æœä½ æ˜¯ä»¥ä¸€æ­¥ä¸¤ä¸ªåƒç´ ç§»åŠ¨å›¾ç‰‡ä¸Šçš„æ»‘å—è€Œä¸æ˜¯ä»¥æ¯æ­¥ä¸€ä¸ªåƒç´ åœ°ç§»åŠ¨å›¾ç‰‡ä¸Šçš„æ»‘å—ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯æœ‰æ•ˆçš„ï¼Œä»Šå¤©çš„å·ç§¯ç½‘ç»œä»…ä»…ä½¿ç”¨äº†å·ç§¯å±‚ã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«çš„å·ç§¯ç½‘ç»œã€‚åœ¨é¡¶éƒ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ 3 ä¸ªå·ç§¯å±‚ï¼›åœ¨åº•éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿçš„ softmax è¯»å‡ºå±‚ï¼Œå¹¶å°†å®ƒä»¬ç”¨å®Œå…¨è¿æ¥å±‚è¿æ¥ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/d3ae69380cae4dddbfc0f3523a264f4e_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼Œç¬¬äºŒä¸ç¬¬ä¸‰å·ç§¯å±‚ç¥ç»å…ƒæ•°é‡ä»¥ 2x2 ä¸ºå€æ•°å‡å°‘ï¼Œè¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå®ƒä»¬çš„è¾“å‡ºå€¼ä» 28x28 å‡å°‘ä¸º 14x14ï¼Œç„¶åå†åˆ° 7x7ã€‚å·ç§¯å±‚çš„å¤§å°å˜åŒ–ä½¿ç¥ç»å…ƒçš„æ•°é‡åœ¨æ¯å±‚ä¸‹é™çº¦ä¸ºï¼š28x28x14â‰ˆ3000-&amp;gt;14x14x8â‰ˆ1500 â†’ 7x7x12â‰ˆ500 â†’ 200ã€‚ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç»™å‡ºè¯¥ç½‘ç»œçš„å…·ä½“å®ç°ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å®ç°-ä¸€ä¸ªå·ç§¯ç½‘ç»œ&#34;&gt;å®ç°ï¼šä¸€ä¸ªå·ç§¯ç½‘ç»œ&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/bf6ccfdee1bc440db5e14229a5799aa3_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸ºäº†å°†æˆ‘ä»¬çš„ä»£ç è½¬åŒ–ä¸ºå·ç§¯æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå·ç§¯å±‚å®šä¹‰é€‚å½“çš„æƒé‡å¼ é‡ï¼Œç„¶åå°†è¯¥å·ç§¯å±‚æ·»åŠ åˆ°æ¨¡å‹ä¸­ã€‚æˆ‘ä»¬å·²ç»ç†è§£åˆ°å·ç§¯å±‚éœ€è¦ä»¥ä¸‹å½¢å¼çš„æƒé‡å¼ é‡ã€‚ä¸‹é¢ä»£ç æ˜¯ç”¨ TensorFlow è¯­æ³•æ¥å¯¹å…¶åˆå§‹åŒ–ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/dee5ee4d2bda42298813d9819ce61a24_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€W = tf.Variable(tf.truncated_normal([4, 4, 3, 2], stddev=0.1))&lt;/p&gt;

&lt;p&gt;ã€€ã€€B = tf.Variable(tf.ones([2])/10) # 2 is the number of output channels&lt;/p&gt;

&lt;p&gt;åœ¨ TensorFlow ä¸­ï¼Œä½¿ç”¨ tf.nn.conv2d å‡½æ•°å®ç°å·ç§¯å±‚ï¼Œè¯¥å‡½æ•°ä½¿ç”¨æä¾›çš„æƒé‡åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šæ‰«æè¾“å…¥å›¾ç‰‡ã€‚è¿™ä»…ä»…æ˜¯ç¥ç»å…ƒçš„åŠ æƒå’Œéƒ¨åˆ†ï¼Œä½ éœ€è¦æ·»åŠ åç½®å•å…ƒå¹¶å°†åŠ æƒå’Œæä¾›ç»™æ¿€æ´»å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€stride = 1 # output is still 28x28&lt;/p&gt;

&lt;p&gt;ã€€ã€€Ycnv = tf.nn.conv2d(X, W, strides=[1, stride, stride, 1], padding=&amp;lsquo;SAME&amp;rsquo;)&lt;/p&gt;

&lt;p&gt;ã€€ã€€Y = tf.nn.relu(Ycnv + B)&lt;/p&gt;

&lt;p&gt;ä¸è¦è¿‡åˆ†åœ¨æ„ stride çš„å¤æ‚è¯­æ³•ï¼ŒæŸ¥é˜…æ–‡æ¡£å°±èƒ½è·å–å®Œæ•´çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™é‡Œçš„å¡«å……ï¼ˆpaddingï¼‰ç­–ç•¥æ˜¯ä¸ºäº†å¤åˆ¶å›¾ç‰‡çš„è¾¹ç¼˜çš„åƒç´ ã€‚æ‰€æœ‰çš„æ•°å­—éƒ½åœ¨ä¸€ä¸ªç»Ÿä¸€çš„èƒŒæ™¯ä¸‹ï¼Œæ‰€ä»¥è¿™ä»…ä»…æ˜¯æ‰©å±•äº†èƒŒæ™¯ï¼Œå¹¶ä¸”ä¸åº”è¯¥æ·»åŠ ä¸éœ€è¦çš„ä»»ä½•æ ·å¼ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨è¯¥ä½ äº†ã€‚ä¿®æ”¹ä½ çš„æ¨¡å‹å¹¶å°†å…¶è½¬åŒ–ä¸ºå·ç§¯æ¨¡å‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸Šå›¾ä¸­çš„å€¼æ¥ä¿®æ”¹å®ƒï¼Œä½ å¯ä»¥å‡å°ä½ çš„å­¦ä¹ é€Ÿç‡ä½†æ˜¯åŠ¡å¿…å…ˆç§»é™¤ dropoutã€‚&lt;/p&gt;

&lt;p&gt;ä½ çš„æ¨¡å‹çš„å‡†ç¡®ç‡åº”è¯¥ä¼šè¶…è¿‡ 98%ï¼Œå¹¶ä¸”æœ€ç»ˆè¾¾åˆ°çº¦ 99%ã€‚çœ¼çœ‹ç›®æ ‡å°±è¦å®ç°ï¼Œæˆ‘ä»¬ä¸èƒ½åœæ­¢ï¼çœ‹çœ‹æµ‹è¯•çš„äº¤å‰ç†µæ›²çº¿ã€‚åœ¨ä½ çš„å¤´è„‘ä¸­ï¼Œæ­¤æ—¶ï¼Œæ˜¯å¦è§£å†³æ–¹æ¡ˆæ­£åœ¨å½¢æˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/cb5d786d95ac44a5a9bc42c90d212f69_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;99-å‡†ç¡®ç‡çš„æŒ‘æˆ˜&#34;&gt;99% å‡†ç¡®ç‡çš„æŒ‘æˆ˜&lt;/h3&gt;

&lt;p&gt;è°ƒæ•´ä½ çš„ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼šå…ˆå»å®ç°ä¸€ä¸ªé™åˆ¶è¾ƒå¤šçš„ç¥ç»ç½‘ç»œï¼Œç„¶åç»™å®ƒæ›´å¤šçš„è‡ªç”±åº¦å¹¶ä¸”å¢åŠ  dropoutï¼Œä½¿ç¥ç»ç½‘ç»œé¿å…è¿‡æ‹Ÿåˆã€‚æœ€ç»ˆä½ å°†å¾—åˆ°ä¸€ä¸ªç›¸å½“ä¸é”™çš„ç¥ç»ç½‘ç»œã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€å±‚å·ç§¯å±‚ä¸­ä»…ä»…ä½¿ç”¨äº† 4 ä¸ª patchï¼Œå¦‚æœè¿™äº›æƒé‡çš„ patch åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å‘å±•æˆä¸åŒçš„è¯†åˆ«å™¨ï¼Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°è¿™å¯¹äºè§£å†³æˆ‘ä»¬çš„é—®é¢˜æ˜¯ä¸å¤Ÿçš„ã€‚æ‰‹å†™æ•°å­—æ¨¡å¼è¿œå¤šäº 4 ç§åŸºæœ¬æ ·å¼ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¨å¾®å¢åŠ  patch çš„æ•°é‡ï¼Œå°†æˆ‘ä»¬å·ç§¯å±‚ä¸­ patch çš„æ•°é‡ä» 4ï¼Œ8ï¼Œ12 å¢åŠ åˆ° 6ï¼Œ12ï¼Œ24ï¼Œå¹¶ä¸”åœ¨å…¨è¿æ¥å±‚ä¸Šæ·»åŠ  dropoutã€‚å®ƒä»¬çš„ç¥ç»å…ƒé‡å¤ä½¿ç”¨ç›¸åŒçš„æƒé‡ï¼Œåœ¨ä¸€æ¬¡è®­ç»ƒè¿­ä»£ä¸­ï¼Œé€šè¿‡å†»ç»“ï¼ˆé™åˆ¶ï¼‰ä¸€äº›ä¸ä¼šå¯¹å®ƒä»¬èµ·ä½œç”¨çš„æƒé‡ï¼Œdropout èƒ½å¤Ÿæœ‰æ•ˆåœ°å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/5792c4f41a734c44b4f1c3ee40e47742_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;åŠ æ²¹å§ï¼Œå»æ‰“ç ´ 99ï¼…çš„é™åˆ¶ã€‚å¢åŠ  patch æ•°é‡å’Œé€šé“çš„æ•°é‡ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨å·ç§¯å±‚ä¸­æ·»åŠ  dropoutã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/e2e13da25b6146f2b0274a19187e18c0_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;p&gt;è§£å†³æ–¹æ¡ˆå¯ä»¥åœ¨æ–‡ä»¶ mnist_3.1_convolutional_bigger_dropout.py ä¸­æ‰¾åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ä¸Šå›¾æ‰€ç¤ºçš„æ¨¡å‹ï¼Œåœ¨ 10000 ä¸ªæµ‹è¯•çš„æ•°å­—ä¸­ï¼Œç»“æœä»…ä»…é”™è¯¯äº† 72 ä¸ªã€‚ä½ å¯ä»¥åœ¨ MNIST ç½‘ç«™ä¸Šå‘ç°ï¼Œæ•°å­—è¯†åˆ«å‡†ç¡®ç‡çš„ä¸–ç•Œçºªå½•å¤§çº¦ä¸º 99.7%ï¼Œè¿™ä»…æ¯”æˆ‘ä»¬ç”¨ 100 è¡Œ Python/TensorFlow ä»£ç æ„å»ºçš„æ¨¡å‹çš„å‡†ç¡®ç‡é«˜ 0.4%ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œä¸åŒçš„ dropout ä½¿æˆ‘ä»¬èƒ½å¤Ÿè®­ç»ƒæ›´å¤§çš„å·ç§¯ç½‘ç»œã€‚å¢åŠ ç¥ç»ç½‘ç»œçš„é¢å¤–è‡ªç”±åº¦ï¼Œä½¿æ¨¡å‹çš„æœ€ç»ˆå‡†ç¡®ç‡ä» 98.9% è¾¾åˆ° 99.1%ã€‚å‘å·ç§¯å±‚ä¸­å¢åŠ  dropout ä¸ä»…å‡å°‘äº†æµ‹è¯•è¯¯å·®ï¼Œè€Œä¸”ä½¿æˆ‘ä»¬æ¨¡å‹çš„å‡†ç¡®ç‡çªç ´ 99%ï¼Œç”šè‡³è¾¾åˆ°äº† 99.3%ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://img.mp.itc.cn/upload/20170124/70c0a9eed13d48e793d06de2317a006f_th.jpeg&#34; alt=&#34;img&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;æ­å–œ&#34;&gt;æ­å–œ&lt;/h3&gt;

&lt;p&gt;ä½ å·²ç»å»ºç«‹äº†ä½ çš„ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œå¹¶ä¸”è®­ç»ƒç²¾åº¦è¾¾åˆ°äº† 99%ã€‚åœ¨è¿™ä¸ªå­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä½ æ‰€å­¦åˆ°çš„æŠ€æœ¯ï¼Œå¹¶ä¸å±€é™äº MNIST æ•°æ®é›†ã€‚å®é™…ä¸Šï¼Œè¿™äº›æŠ€æœ¯åœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ä½œä¸ºç¤¼ç‰©ï¼Œä¸‹é¢æä¾›çš„å†…å®¹å¯ä»¥ç”¨æ¥å¸®åŠ©ä½ å›å¿†å·²ç»æ‰€å­¦çš„å†…å®¹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨å®Œæˆäº†å®Œå…¨ç¥ç»ç½‘ç»œå’Œå·ç§¯ç½‘ç»œåï¼Œä½ åº”è¯¥å­¦ä¹ å¾ªç¯ç¥ç»ç½‘ç»œï¼š&lt;a href=&#34;https://www.tensorflow.org/tutorials/recurrent/ã€‚&#34;&gt;https://www.tensorflow.org/tutorials/recurrent/ã€‚&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å·²ç»å­¦ä¹ äº†å¦‚ä½•åœ¨çŸ©é˜µå±‚æ¬¡æ„å»º TensorFlow æ¨¡å‹ã€‚Tensorflow è¿˜æœ‰æ›´é«˜çº§çš„ APIï¼Œç§°ä¸º tf.learnï¼š&lt;a href=&#34;https://www.tensorflow.org/tutorials/tflearn/&#34;&gt;https://www.tensorflow.org/tutorials/tflearn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è¦åœ¨äº‘ä¸Šçš„åˆ†å¸ƒå¼æ¡†æ¶ä¸Šè®­ç»ƒï¼Œæˆ‘ä»¬æä¾› Cloud ML æœåŠ¡ï¼š&lt;a href=&#34;https://cloud.google.com/ml&#34;&gt;https://cloud.google.com/ml&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œæˆ‘ä»¬å¸Œæœ›æ”¶åˆ°ä½ çš„åé¦ˆã€‚å¦‚æœä½ åœ¨å‘ç°äº†æœ¬å®éªŒä¸­çš„äº›è®¸é”™è¯¯ï¼Œæˆ–è€…ä½ è®¤ä¸ºæœ‰ä»€ä¹ˆéœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬ã€‚æˆ‘ä»¬é€šè¿‡ GitHub å¤„ç†åé¦ˆï¼Œ&lt;a href=&#34;https://github.com/googlecodelabs/feedback/issues/new?title=[cloud-tensorflow-mnist]:&amp;amp;labels[]=content-platform&amp;amp;labels[]=cloud&#34;&gt;åé¦ˆé“¾æ¥&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;è™½ç„¶çœ‹ä¸æ‡‚ï¼Œä½†æ˜¯å…ˆæ··ä¸ªè„¸ç†Ÿï¼Œä»¥åæ…¢æ…¢å†çœ‹ã€‚æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹å¤åˆ¶è‡ª&lt;a href=&#34;http://it.sohu.com/20170124/n479480999.shtml&#34;&gt;æ•™ç¨‹ | æ²¡æœ‰åšå£«å­¦ä½ï¼Œç…§æ ·ç©è½¬TensorFlowæ·±åº¦å­¦ä¹ &lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes heapsterç›‘æ§æ’ä»¶å®‰è£…æ–‡æ¡£</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation/</link>
      <pubDate>Wed, 05 Apr 2017 18:41:19 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-heapster-installation/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20170403064.jpg&#34; alt=&#34;å—‘çŒ«è–„è·çš„ç™½åŒ–å­ŸåŠ æ‹‰è™&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šå—‘çŒ«è–„è·çš„ç™½åŒ–å­ŸåŠ æ‹‰è™@åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å‰é¢å‡ ç¯‡æ–‡ç« ä¸­è®°å½•äº†æˆ‘ä»¬&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/&#34;&gt;å®‰è£…å¥½äº†Kubernetesé›†ç¾¤&lt;/a&gt;ã€&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-network-config/&#34;&gt;é…ç½®å¥½äº†flannelç½‘ç»œ&lt;/a&gt;ã€&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/&#34;&gt;å®‰è£…äº†Kubernetes Dashboard&lt;/a&gt;ï¼Œä½†æ˜¯è¿˜æ²¡æ³•æŸ¥çœ‹Podçš„ç›‘æ§ä¿¡æ¯ï¼Œè™½ç„¶kubeleté»˜è®¤é›†æˆäº†&lt;strong&gt;cAdvisor&lt;/strong&gt;ï¼ˆåœ¨æ¯ä¸ªnodeçš„4194ç«¯å£å¯ä»¥æŸ¥çœ‹åˆ°ï¼‰ï¼Œä½†æ˜¯å¾ˆä¸æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©å®‰è£…heapsterã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ä¸‹è½½heapsterçš„ä»£ç &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥ç°åœ¨Githubä¸Šçš„æœ€æ–°ä»£ç ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;git pull https://github.com/kubernetes/heapster.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç›®å‰çš„æœ€é«˜ç‰ˆæœ¬æ˜¯1.3.0ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨&lt;code&gt;heapster/deploy/kube-config/influxdb&lt;/code&gt;ç›®å½•ä¸‹æœ‰å‡ ä¸ª&lt;code&gt;yaml&lt;/code&gt;æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;grafana-deployment.yaml
grafana-service.yaml
heapster-deployment.yaml
heapster-service.yaml
influxdb-deployment.yaml
influxdb-service.yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬å†çœ‹ä¸‹ç”¨äº†å“ªäº›é•œåƒï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;grafana-deployment.yaml:16:        image: gcr.io/google_containers/heapster-grafana-amd64:v4.0.2
heapster-deployment.yaml:16:        image: gcr.io/google_containers/heapster-amd64:v1.3.0-beta.1
influxdb-deployment.yaml:16:        image: gcr.io/google_containers/heapster-influxdb-amd64:v1.1.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä¸‹è½½é•œåƒ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¸‹è½½å¥½äº†è¿™äº›imagesåï¼Œå­˜å‚¨åˆ°ç§æœ‰é•œåƒä»“åº“é‡Œï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-amd64:v1.3.0-beta.1&lt;/li&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-grafana-amd64:v4.0.2&lt;/li&gt;
&lt;li&gt;sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-influxdb-amd64:v1.1.1&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æˆ‘å·²ç»å°†å®˜æ–¹é•œåƒå…‹éš†åˆ°äº†&lt;a href=&#34;www.tenxcloud.com&#34;&gt;æ—¶é€Ÿäº‘&lt;/a&gt;ä¸Šï¼Œé•œåƒåœ°å€ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/heapster-amd64:v1.3.0-beta.1&lt;/li&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/heapster-influxdb-amd64:v1.1.1&lt;/li&gt;
&lt;li&gt;index.tenxcloud.com/jimmy/heapster-grafana-amd64:v4.0.2&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;éœ€è¦çš„å¯ä»¥å»ä¸‹è½½ï¼Œä¸‹è½½å‰éœ€è¦ç”¨æ—¶é€Ÿäº‘è´¦æˆ·ç™»é™†ï¼Œç„¶åå†æ‰§è¡Œpullæ“ä½œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker login index.tendcloud.com
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;é…ç½®&#34;&gt;é…ç½®&lt;/h2&gt;

&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://github.com/kubernetes/heapster/blob/master/docs/influxdb.md&#34;&gt;Run Heapster in a Kubernetes cluster with an InfluxDB backend and a Grafana UI&lt;/a&gt;å’Œ&lt;a href=&#34;https://github.com/kubernetes/heapster/blob/master/docs/source-configuration.md&#34;&gt;Configuring Source&lt;/a&gt;ï¼Œéœ€è¦ä¿®æ”¹yamlæ–‡ä»¶ä¸­çš„å‡ ä¸ªé…ç½®ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é¦–å…ˆä¿®æ”¹ä¸‰ä¸ªdeployment.yamlæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„é•œåƒæ–‡ä»¶åœ°å€æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„ç§æœ‰é•œåƒä»“åº“çš„&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹heapster-deployment.yamlæ–‡ä»¶ä¸­çš„&lt;code&gt;--source&lt;/code&gt;å‚æ•°ä¸º&lt;code&gt;â€”source=kubernetes:http://sz-pg-oam-docker-test-001.tendcloud.com:8080?inClusterConfig=false&amp;amp;useServiceAccount=false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ä¿®æ”¹å®Œé…ç½®çš„&lt;code&gt;heapster-deployment.yaml&lt;/code&gt;æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Yaml&#34;&gt;apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: heapster
  namespace: kube-system
spec:
  replicas: 1
  template:
    metadata:
      labels:
        task: monitoring
        k8s-app: heapster
    spec:
      containers:
      - name: heapster
        image: sz-pg-oam-docker-hub-001.tendcloud.com/library/heapster-amd64:v1.3.0-beta.1
        imagePullPolicy: IfNotPresent
        command:
        - /heapster
        - --source=kubernetes:http://sz-pg-oam-docker-test-001.tendcloud.com:8080?inClusterConfig=false&amp;amp;useServiceAccount=false
        - --sink=influxdb:http://monitoring-influxdb:8086
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;å¯åŠ¨&#34;&gt;å¯åŠ¨&lt;/h2&gt;

&lt;p&gt;åœ¨å‡†å¤‡å¥½é•œåƒå’Œä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åå°±å¯ä»¥ä¸€é”®å¯åŠ¨äº†ï¼Œè¿™ä¸å°±æ˜¯ä½¿ç”¨kbuernetesçš„æ–¹ä¾¿ä¹‹å¤„å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨heaspter&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;kubectl create -f deploy/kube-config/influxdb
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl get -f deploy/kube-config/influxdb/
NAME                        DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deploy/monitoring-grafana   1         1         1            1           1h

NAME                     CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
svc/monitoring-grafana   10.254.250.27   &amp;lt;none&amp;gt;        80/TCP    1h

NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deploy/heapster   1         1         1            1           1h

NAME           CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE
svc/heapster   10.254.244.187   &amp;lt;none&amp;gt;        80/TCP    1h

NAME                         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deploy/monitoring-influxdb   1         1         1            1           1h

NAME                      CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE
svc/monitoring-influxdb   10.254.151.157   &amp;lt;none&amp;gt;        8086/TCP   1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹é¡µé¢&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç°åœ¨å†æ‰“å¼€Dashboardé¡µé¢å°±å¯ä»¥çœ‹åˆ°CPUå’ŒMemoryçš„ç›‘æ§ä¿¡æ¯äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/kubernetes-heapster-01.jpg&#34; alt=&#34;kubernetes-heapster&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;è™½ç„¶åœ¨å®‰è£…äº†heapsteræ’ä»¶åå¯ä»¥åœ¨dashboardä¸­çœ‹åˆ°CPUå’ŒMemoryçš„ç›‘æ§ä¿¡æ¯ï¼Œä½†æ˜¯è¿™ä»…ä»…æ˜¯è¿‘å®æ—¶çš„ç›‘æ§ï¼Œæ”¶é›†çš„metricsè¢«ä¿å­˜åˆ°äº†InfluxDBä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡Kibanaæˆ–è€…Grafanaæ¥å±•ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯å’Œå†å²æ•°æ®ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥åšçš„ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes Dashboard/Web UIå®‰è£…å…¨è®°å½•</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/</link>
      <pubDate>Wed, 05 Apr 2017 14:28:51 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-dashboard-installation/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2017040301.jpg&#34; alt=&#34;æ™’å¤ªé˜³çš„è¢‹é¼ &#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šæ™’å¤ªé˜³çš„è¢‹é¼ @åŒ—äº¬åŠ¨ç‰©å›­ Apr 3,2017ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å‰å‡ å¤©&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/&#34;&gt;åœ¨CentOS7.2ä¸Šå®‰è£…Kubernetes1.6&lt;/a&gt;å’Œå®‰è£…å¥½&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-network-config/&#34;&gt;flannelç½‘ç»œé…ç½®&lt;/a&gt;ï¼Œä»Šå¤©æˆ‘ä»¬æ¥å®‰è£…ä¸‹kuberentnesçš„dashboardã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/dashboard&#34;&gt;Dashboard&lt;/a&gt;æ˜¯Kubernetesçš„ä¸€ä¸ªæ’ä»¶ï¼Œä»£ç åœ¨å•ç‹¬çš„å¼€æºé¡¹ç›®é‡Œã€‚1å¹´å‰è¿˜æ˜¯ç‰¹åˆ«ç®€å•çš„ä¸€ä¸ªUIï¼Œåªèƒ½åœ¨ä¸Šé¢æŸ¥çœ‹podçš„ä¿¡æ¯å’Œéƒ¨ç½²podè€Œå·²ï¼Œç°åœ¨å·²ç»åšçš„è·Ÿ&lt;a href=&#34;https://www.docker.com/enterprise-edition&#34;&gt;Docker Enterprise Edition&lt;/a&gt;çš„&lt;strong&gt;Docker Datacenter&lt;/strong&gt;å¾ˆåƒäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å®‰è£…dashboard&#34;&gt;å®‰è£…Dashboard&lt;/h2&gt;

&lt;p&gt;å®˜ç½‘çš„å®‰è£…æ–‡æ¡£&lt;a href=&#34;https://kubernetes.io/docs/user-guide/ui/ï¼Œå…¶å®å®˜ç½‘æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨ç°æˆçš„imageæ¥ç”¨kuberneteséƒ¨ç½²å³å¯ã€‚&#34;&gt;https://kubernetes.io/docs/user-guide/ui/ï¼Œå…¶å®å®˜ç½‘æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨ç°æˆçš„imageæ¥ç”¨kuberneteséƒ¨ç½²å³å¯ã€‚&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆéœ€è¦ä¸€ä¸ª&lt;strong&gt;kubernetes-dashboard.yaml&lt;/strong&gt;çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥åœ¨&lt;a href=&#34;https://github.com/kubernetes/dashboard/blob/master/src/deploy/kubernetes-dashboard.yaml&#34;&gt;Githubçš„src/deploy/kubernetes-dashboard.yaml&lt;/a&gt;ä¸‹è½½ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬èƒ½çœ‹ä¸‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;# Copyright 2015 Google Inc. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Configuration to deploy release version of the Dashboard UI.
#
# Example usage: kubectl create -f &amp;lt;this_file&amp;gt;

kind: Deployment
apiVersion: extensions/v1beta1
metadata:
  labels:
    app: kubernetes-dashboard
  name: kubernetes-dashboard
  namespace: kube-system
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: kubernetes-dashboard
  template:
    metadata:
      labels:
        app: kubernetes-dashboard
      # Comment the following annotation if Dashboard must not be deployed on master
      annotations:
        scheduler.alpha.kubernetes.io/tolerations: |
          [
            {
              &amp;quot;key&amp;quot;: &amp;quot;dedicated&amp;quot;,
              &amp;quot;operator&amp;quot;: &amp;quot;Equal&amp;quot;,
              &amp;quot;value&amp;quot;: &amp;quot;master&amp;quot;,
              &amp;quot;effect&amp;quot;: &amp;quot;NoSchedule&amp;quot;
            }
          ]
    spec:
      containers:
      - name: kubernetes-dashboard
        image: sz-pg-oam-docker-hub-001.tendcloud.com/library/kubernetes-dashboard-amd64:v1.6.0
        imagePullPolicy: Always
        ports:
        - containerPort: 9090
          protocol: TCP
        args:
          # Uncomment the following line to manually specify Kubernetes API server Host
          # If not specified, Dashboard will attempt to auto discover the API server and connect
          # to it. Uncomment only if the default does not work.
          # - --apiserver-host=http://my-address:port
          - --apiserver-host=http://sz-pg-oam-docker-test-001.tendcloud.com:8080
        livenessProbe:
          httpGet:
            path: /
            port: 9090
          initialDelaySeconds: 30
          timeoutSeconds: 30
---
kind: Service
apiVersion: v1
metadata:
  labels:
    app: kubernetes-dashboard
  name: kubernetes-dashboard
  namespace: kube-system
spec:
  type: NodePort
  ports:
  - port: 80
    targetPort: 9090
  selector:
    app: kubernetes-dashboard
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;âš ï¸ å®˜æ–¹æä¾›çš„imageåä¸º&lt;code&gt;gcr.io/google_containers/kubernetes-dashboard-amd64:v1.6.0&lt;/code&gt;ï¼Œéœ€è¦ç¿»å¢™æ‰èƒ½è®¿é—®ï¼Œæˆ‘è‡ªå·±æ‹‰ä¸‹æ¥pushåˆ°æˆ‘ä»¬çš„ç§æœ‰é•œåƒä»“åº“äº†ã€‚æˆ‘å°†è¿™ä¸ªé•œåƒpushåˆ°äº†docker hubä¸Šï¼Œå¦‚æœä½ æ— æ³•ç¿»å¢™çš„è¯ï¼Œå¯ä»¥åˆ°ä¸‹è½½è¿™ä¸ªé•œåƒï¼š&lt;code&gt;index.tenxcloud.com/jimmy/kubernetes-dashboard-amd64:v1.6.0&lt;/code&gt;ã€‚æ—¶é€Ÿäº‘çš„é•œåƒå­˜å‚¨ï¼Œé€Ÿåº¦å°±æ˜¯å¿«ã€‚&lt;/p&gt;

&lt;p&gt;å‡†å¤‡å¥½imageåå°±å¯ä»¥éƒ¨ç½²äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl create -f kubernetes-dashboard.yaml
deployment &amp;quot;kubernetes-dashboard&amp;quot; created
service &amp;quot;kubernetes-dashboard&amp;quot; created
$kubectl get -f kubernetes-dashboard.yaml
NAME                          DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
deploy/kubernetes-dashboard   1         1         1            1           9s

NAME                       CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE
svc/kubernetes-dashboard   10.254.113.226   &amp;lt;nodes&amp;gt;       80:31370/TCP   8s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å°±å¯ä»¥è®¿é—®&lt;a href=&#34;http://sz-pg-oam-docker-test-001.tendcloud.com:8080/uiäº†ï¼Œæ•ˆæœå¦‚å›¾ï¼š&#34;&gt;http://sz-pg-oam-docker-test-001.tendcloud.com:8080/uiäº†ï¼Œæ•ˆæœå¦‚å›¾ï¼š&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/kubernetes-dashboard-01.jpg&#34; alt=&#34;kubernetes-dashboard&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;troubleshooting&#34;&gt;Troubleshooting&lt;/h2&gt;

&lt;h3 id=&#34;å¦‚æœä½ æ²¡å¯åŠ¨service-accountèº«ä»½è®¤è¯&#34;&gt;å¦‚æœä½ æ²¡å¯åŠ¨Service Accountèº«ä»½è®¤è¯&lt;/h3&gt;

&lt;p&gt;é‚£å°±å¥½åŠäº†ï¼Œæ£€æŸ¥ä¸‹ä½ çš„&lt;strong&gt;kubernetes-dashboard.yaml&lt;/strong&gt;æ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯API Serveråœ°å€é…é”™äº†ï¼Œæˆ–è€…æŸ¥çœ‹ä¸‹podçš„logï¼Œæˆ‘å°±æ˜¯åœ¨logé‡Œå‘ç°ï¼ŒåŸæ¥API Serverçš„ä¸»æœºåæ— æ³•è§£æå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ã€‚åœ¨DNSé‡Œæ·»åŠ API Serverä¸»æœºçš„DNSè®°å½•å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å¦‚æœä½ å¯åŠ¨api-serverçš„serviceaccountèº«ä»½è®¤è¯&#34;&gt;å¦‚æœä½ å¯åŠ¨API Serverçš„ServiceAccountèº«ä»½è®¤è¯&lt;/h3&gt;

&lt;p&gt;å¯åŠ¨serviceçš„æ—¶å€™å‡ºé”™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl --namespace=kube-system logs kubernetes-dashboard-1680927228-pdv45
Using HTTP port: 9090
Error while initializing connection to Kubernetes apiserver. This most likely means that the cluster is misconfigured (e.g., it has invalid apiserver certificates or service accounts configuration) or the --apiserver-host param points to a server that does not exist. Reason: open /var/run/secrets/kubernetes.io/serviceaccount/token: no such file or directory
Refer to the troubleshooting guide for more information: https://github.com/kubernetes/dashboard/blob/master/docs/user-guide/troubleshooting.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/dashboard/blob/master/docs/user-guide/troubleshooting.md&#34;&gt;troubleshooting.md&lt;/a&gt;æ–‡ä»¶å·²ç»è¯´æ˜äº†ï¼Œè¿™æ˜¯å¯èƒ½æ˜¯ä½ é…ç½®API serveråœ°å€æˆ–&lt;strong&gt;Service Account&lt;/strong&gt;çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯é…ç½®Service Accountçš„é—®é¢˜ï¼Œå¯ä»¥å€Ÿé‰´Tony Baiçš„&lt;a href=&#34;http://tonybai.com/2017/01/19/install-dashboard-addon-for-k8s/&#34;&gt;Kubernetesé›†ç¾¤Dashboardæ’ä»¶å®‰è£…&lt;/a&gt;è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;kubectl proxy --address=&#39;0.0.0.0&#39; --accept-hosts=&#39;^*$&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŠ¥é”™ä¿¡æ¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{
  &amp;quot;kind&amp;quot;: &amp;quot;Status&amp;quot;,
  &amp;quot;apiVersion&amp;quot;: &amp;quot;v1&amp;quot;,
  &amp;quot;metadata&amp;quot;: {},
  &amp;quot;status&amp;quot;: &amp;quot;Failure&amp;quot;,
  &amp;quot;message&amp;quot;: &amp;quot;no endpoints available for service \&amp;quot;kubernetes-dashboard\&amp;quot;&amp;quot;,
  &amp;quot;reason&amp;quot;: &amp;quot;ServiceUnavailable&amp;quot;,
  &amp;quot;code&amp;quot;: 503
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;# start a container that contains curl
$ kubectl run test --image=sz-pg-oam-docker-hub-001.tendcloud.com/library/curl:latest -- sleep 10000
$kubectl get pod
NAME                     READY     STATUS    RESTARTS   AGE
test-2428763157-pxkps    1/1       Running   0          6s
$kubectl exec test-2428763157-pxkps ls /var/run/secrets/kubernetes.io/serviceaccount/
ls: cannot access /var/run/secrets/kubernetes.io/serviceaccount/: No such file or directory
$kubectl get secrets
No resources found.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;/var/run/secrets/kubernetes.io/serviceaccount/&lt;/code&gt;è¿™ä¸ªç›®å½•è¿˜æ˜¯ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å®‰è£…çš„Kuberneteså‹æ ¹å°±æ²¡æœ‰è®¾ç½®secretã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/dashboard/blob/master/docs/user-guide/troubleshooting.md&#34;&gt;troubleshooting.md&lt;/a&gt;ä¸Šè¯´éœ€è¦ç”¨&lt;code&gt;â€”admission-control&lt;/code&gt;é…ç½®API Serverï¼Œåœ¨é…ç½®è¿™ä¸ªä¹‹å‰è¿˜è¦äº†è§£ä¸‹&lt;a href=&#34;https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/&#34;&gt;Service Accounts&lt;/a&gt;å’Œ&lt;a href=&#34;https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/&#34;&gt;å¦‚ä½•ç®¡ç†Service Accounts&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;ä¸€å¹´å‰æˆ‘å®‰è£…Kubernetes Dashboardï¼ˆé‚£æ—¶å€™å¥½åƒè¿˜å«Kube-UIï¼‰çš„æ—¶å€™æ²¡æœ‰å…¶åŠŸèƒ½è¿˜æå…¶ä¸å®Œå–„ï¼Œç»è¿‡ä¸€å¹´å¤šçš„å‘å±•ï¼Œå·²ç»æœ‰æ¨¡æœ‰æ ·äº†ï¼Œå¦‚æœä¸å¯ç”¨&lt;strong&gt;Service Account&lt;/strong&gt;çš„è¯ï¼Œå®‰è£…Dashboardè¿˜æ˜¯å¾ˆç®€å•çš„ã€‚æ¥ä¸‹æ¥æˆ‘è¿˜è¦åœ¨Dashboardä¸Šå®‰è£…å…¶å®ƒAdd-onï¼Œå¦‚Heapsterç”¨æ¥ç›‘æ§PodçŠ¶æ€ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>KubernetesåŸºäºflannelçš„ç½‘ç»œé…ç½®</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-network-config/</link>
      <pubDate>Fri, 31 Mar 2017 11:05:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-network-config/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2014100402.jpg&#34; alt=&#34;è¥¿å®‰é¼“æ¥¼&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šè¥¿å®‰é¼“æ¥¼ Oct 4,2014ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ä¹¦æ¥ä¸Šæ–‡&lt;a href=&#34;http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/&#34;&gt;åœ¨CentOSä¸­å®‰è£…Kubernetesè¯¦ç»†æŒ‡å—&lt;/a&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œä½œä¸ºå­¦ä¹ Kubernetesçš„å¿ƒè·¯å†ç¨‹å§ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²è§£&lt;strong&gt;Kubernetesçš„ç½‘ç»œé…ç½®&lt;/strong&gt;ï¼ŒğŸ‘†æ–‡ä¸­æœ‰ä¸€ä¸ªå®‰è£…&lt;strong&gt;Flannel&lt;/strong&gt;çš„æ­¥éª¤ï¼Œä½†æ˜¯å®‰è£…å¥½åå¹¶æ²¡æœ‰ç›¸åº”çš„é…ç½®è¯´æ˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;é…ç½®flannel&#34;&gt;é…ç½®flannel&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬ç›´æ¥ä½¿ç”¨çš„yumå®‰è£…çš„flannleï¼Œå®‰è£…å¥½åä¼šç”Ÿæˆ&lt;code&gt;/usr/lib/systemd/system/flanneld.service&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[Unit]
Description=Flanneld overlay address etcd agent
After=network.target
After=network-online.target
Wants=network-online.target
After=etcd.service
Before=docker.service

[Service]
Type=notify
EnvironmentFile=/etc/sysconfig/flanneld
EnvironmentFile=-/etc/sysconfig/docker-network
ExecStart=/usr/bin/flanneld-start $FLANNEL_OPTIONS
ExecStartPost=/usr/libexec/flannel/mk-docker-opts.sh -k DOCKER_NETWORK_OPTIONS -d /run/flannel/docker
Restart=on-failure

[Install]
WantedBy=multi-user.target
RequiredBy=docker.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°flannelç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶åœ¨&lt;code&gt;/etc/sysconfig/flanneld&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ini&#34;&gt;# Flanneld configuration options  

# etcd url location.  Point this to the server where etcd runs
FLANNEL_ETCD_ENDPOINTS=&amp;quot;http://sz-pg-oam-docker-test-001.tendcloud.com:2379&amp;quot;

# etcd config key.  This is the configuration key that flannel queries
# For address range assignment
FLANNEL_ETCD_PREFIX=&amp;quot;/kube-centos/network&amp;quot;

# Any additional options that you want to pass
#FLANNEL_OPTIONS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;etcdçš„åœ°å€&lt;code&gt;FLANNEL_ETCD_ENDPOINT&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;etcdæŸ¥è¯¢çš„ç›®å½•ï¼ŒåŒ…å«dockerçš„IPåœ°å€æ®µé…ç½®ã€‚&lt;code&gt;FLANNEL_ETCD_PREFIX&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;åœ¨etcdä¸­åˆ›å»ºç½‘ç»œé…ç½®&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¸ºdockeråˆ†é…IPåœ°å€æ®µã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;etcdctl mkdir /kube-centos/network
etcdctl mk /kube-centos/network/config &amp;quot;{ \&amp;quot;Network\&amp;quot;: \&amp;quot;172.30.0.0/16\&amp;quot;, \&amp;quot;SubnetLen\&amp;quot;: 24, \&amp;quot;Backend\&amp;quot;: { \&amp;quot;Type\&amp;quot;: \&amp;quot;vxlan\&amp;quot; } }&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®Docker&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Flannelçš„&lt;a href=&#34;https://github.com/coreos/flannel/blob/master/Documentation/running.md&#34;&gt;æ–‡æ¡£&lt;/a&gt;ä¸­æœ‰å†™&lt;strong&gt;Docker Integration&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;p&gt;Docker daemon accepts &lt;code&gt;--bip&lt;/code&gt; argument to configure the subnet of the docker0 bridge. It also accepts &lt;code&gt;--mtu&lt;/code&gt; to set the MTU for docker0 and veth devices that it will be creating. Since flannel writes out the acquired subnet and MTU values into a file, the script starting Docker can source in the values and pass them to Docker daemon:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;source /run/flannel/subnet.env
docker daemon --bip=${FLANNEL_SUBNET} --mtu=${FLANNEL_MTU} &amp;amp;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Systemd users can use &lt;code&gt;EnvironmentFile&lt;/code&gt; directive in the .service file to pull in &lt;code&gt;/run/flannel/subnet.env&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹è½½flannel github releaseä¸­çš„taråŒ…ï¼Œè§£å‹åä¼šè·å¾—ä¸€ä¸ª&lt;strong&gt;mk-docker-opts.sh&lt;/strong&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥&lt;code&gt;Generate Docker daemon options based on flannel env file&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œ&lt;code&gt;./mk-docker-opts.sh -i&lt;/code&gt;å°†ä¼šç”Ÿæˆå¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶ç¯å¢ƒå˜é‡æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;/run/flannel/subnet.env&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;FLANNEL_NETWORK=172.30.0.0/16
FLANNEL_SUBNET=172.30.46.1/24
FLANNEL_MTU=1450
FLANNEL_IPMASQ=false
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;/run/docker_opts.env&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DOCKER_OPT_BIP=&amp;quot;--bip=172.30.46.1/24&amp;quot;
DOCKER_OPT_IPMASQ=&amp;quot;--ip-masq=true&amp;quot;
DOCKER_OPT_MTU=&amp;quot;--mtu=1450&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨æŸ¥è¯¢etcdä¸­çš„å†…å®¹å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$etcdctl ls /kube-centos/network/subnets
/kube-centos/network/subnets/172.30.14.0-24
/kube-centos/network/subnets/172.30.38.0-24
/kube-centos/network/subnets/172.30.46.0-24
$etcdctl get /kube-centos/network/config
{ &amp;quot;Network&amp;quot;: &amp;quot;172.30.0.0/16&amp;quot;, &amp;quot;SubnetLen&amp;quot;: 24, &amp;quot;Backend&amp;quot;: { &amp;quot;Type&amp;quot;: &amp;quot;vxlan&amp;quot; } }
$etcdctl get /kube-centos/network/subnets/172.30.14.0-24
{&amp;quot;PublicIP&amp;quot;:&amp;quot;172.20.0.114&amp;quot;,&amp;quot;BackendType&amp;quot;:&amp;quot;vxlan&amp;quot;,&amp;quot;BackendData&amp;quot;:{&amp;quot;VtepMAC&amp;quot;:&amp;quot;56:27:7d:1c:08:22&amp;quot;}}
$etcdctl get /kube-centos/network/subnets/172.30.38.0-24
{&amp;quot;PublicIP&amp;quot;:&amp;quot;172.20.0.115&amp;quot;,&amp;quot;BackendType&amp;quot;:&amp;quot;vxlan&amp;quot;,&amp;quot;BackendData&amp;quot;:{&amp;quot;VtepMAC&amp;quot;:&amp;quot;12:82:83:59:cf:b8&amp;quot;}}
$etcdctl get /kube-centos/network/subnets/172.30.46.0-24
{&amp;quot;PublicIP&amp;quot;:&amp;quot;172.20.0.113&amp;quot;,&amp;quot;BackendType&amp;quot;:&amp;quot;vxlan&amp;quot;,&amp;quot;BackendData&amp;quot;:{&amp;quot;VtepMAC&amp;quot;:&amp;quot;e6:b2:fd:f6:66:96&amp;quot;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;è®¾ç½®docker0ç½‘æ¡¥çš„IPåœ°å€&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;source /run/flannel/subnet.env
ifconfig docker0 $FLANNEL_SUBNET
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·docker0å’Œflannelç½‘æ¡¥ä¼šåœ¨åŒä¸€ä¸ªå­ç½‘ä¸­ï¼Œå¦‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;6: docker0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc noqueue state DOWN 
    link/ether 02:42:da:bf:83:a2 brd ff:ff:ff:ff:ff:ff
    inet 172.30.38.1/24 brd 172.30.38.255 scope global docker0
       valid_lft forever preferred_lft forever
7: flannel.1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1450 qdisc noqueue state UNKNOWN 
    link/ether 9a:29:46:61:03:44 brd ff:ff:ff:ff:ff:ff
    inet 172.30.38.0/32 scope global flannel.1
       valid_lft forever preferred_lft forever
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å°±å¯ä»¥é‡å¯dockeräº†ã€‚&lt;/p&gt;

&lt;p&gt;é‡å¯äº†dockeråè¿˜è¦é‡å¯kubeletï¼Œè¿™æ—¶åˆé‡åˆ°é—®é¢˜ï¼Œkubeletå¯åŠ¨å¤±è´¥ã€‚æŠ¥é”™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Mar 31 16:44:41 sz-pg-oam-docker-test-002.tendcloud.com kubelet[81047]: error: failed to run Kubelet: failed to create kubelet: misconfiguration: kubelet cgroup driver: &amp;quot;cgroupfs&amp;quot; is different from docker cgroup driver: &amp;quot;systemd&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ˜¯kubeletä¸dockerçš„&lt;strong&gt;cgroup driver&lt;/strong&gt;ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œkubeletå¯åŠ¨çš„æ—¶å€™æœ‰ä¸ª&lt;code&gt;â€”cgroup-driver&lt;/code&gt;å‚æ•°å¯ä»¥æŒ‡å®šä¸º&amp;rdquo;cgroupfs&amp;rdquo;æˆ–è€…â€œsystemdâ€ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--cgroup-driver string                                    Driver that the kubelet uses to manipulate cgroups on the host.  Possible values: &#39;cgroupfs&#39;, &#39;systemd&#39; (default &amp;quot;cgroupfs&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨flannel&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;systemctl daemon-reload
systemctl start flanneld
systemctl status flanneld
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‡æ–°ç™»å½•è¿™ä¸‰å°ä¸»æœºï¼Œå¯ä»¥çœ‹åˆ°æ¯å°ä¸»æœºéƒ½å¤šäº†ä¸€ä¸ªIPã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒKuberneteså®˜æ–¹æ–‡æ¡£çš„&lt;a href=&#34;https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/&#34;&gt;Exposing an External IP Address to Access an Application in a Cluster&lt;/a&gt;ï¼Œå®˜æ–¹ä½¿ç”¨çš„Hello Worldæµ‹è¯•ï¼Œæˆ‘ä»¬å¯åŠ¨NginxæœåŠ¡æµ‹è¯•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;#å¯åŠ¨nginxçš„pod
kubectl run nginx --replicas=2 --labels=&amp;quot;run=load-balancer-example&amp;quot; --image=sz-pg-oam-docker-hub-001.tendcloud.com/library/nginx:1.9  --port=80
#åˆ›å»ºåä¸ºexample-serviceçš„æœåŠ¡
kubectl expose deployment nginx --type=NodePort --name=example-service
#æŸ¥çœ‹çŠ¶æ€
kubectl get deployments nginx
kubectl describe deployments nginx
kubectl get replicasets
kubectl describe replicasets
kubectl describe svc example-service
###################################################
Name:			example-service
Namespace:		default
Labels:			run=load-balancer-example
Annotations:		&amp;lt;none&amp;gt;
Selector:		run=load-balancer-example
Type:			NodePort
IP:			10.254.180.209
Port:			&amp;lt;unset&amp;gt;	80/TCP
NodePort:		&amp;lt;unset&amp;gt;	32663/TCP
Endpoints:		172.30.14.2:80,172.30.46.2:80
Session Affinity:	None
Events:			&amp;lt;none&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬ä¸Šé¢å¯åŠ¨çš„serivceçš„typeæ˜¯&lt;strong&gt;NodePort&lt;/strong&gt;ï¼ŒKubernetesçš„serviceæ”¯æŒä¸‰ç§ç±»å‹çš„serviceï¼Œå‚è€ƒ&lt;a href=&#34;http://www.cnblogs.com/xuxinkun/p/5331728.html&#34;&gt;Kubernetes Serivceåˆ†æ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨è®¿é—®ä¸‰å°ç‰©ç†æœºçš„IP:80ç«¯å£å°±å¯ä»¥çœ‹åˆ°nginxçš„é¡µé¢äº†ã€‚&lt;/p&gt;

&lt;p&gt;ç¨ç­‰ä¸€ä¼šåœ¨è®¿é—®ClusterIP + Portä¹Ÿå¯ä»¥è®¿é—®åˆ°nginxã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$curl 10.254.180.209:80
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&amp;lt;style&amp;gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For online documentation and support please refer to
&amp;lt;a href=&amp;quot;http://nginx.org/&amp;quot;&amp;gt;nginx.org&amp;lt;/a&amp;gt;.&amp;lt;br/&amp;gt;
Commercial support is available at
&amp;lt;a href=&amp;quot;http://nginx.com/&amp;quot;&amp;gt;nginx.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Thank you for using nginx.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è™šæ‹Ÿåœ°å€&#34;&gt;è™šæ‹Ÿåœ°å€&lt;/h2&gt;

&lt;p&gt;Kubernetesä¸­çš„Serviceäº†ä½¿ç”¨äº†è™šæ‹Ÿåœ°å€ï¼›è¯¥åœ°å€æ— æ³•pingé€šè¿‡ï¼Œä½†å¯ä»¥è®¿é—®å…¶ç«¯å£ã€‚é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼Œè¯¥è™šæ‹Ÿåœ°å€æ˜¯è‹¥å¹²æ¡iptablesçš„è§„åˆ™ã€‚åˆ°10.254.124.145:8080ç«¯å£çš„è¯·æ±‚ä¼šè¢«é‡å®šå‘åˆ°172.30.38.2æˆ–172.30.46.2çš„8080ç«¯å£ã€‚è¿™äº›è§„åˆ™æ˜¯ç”±kube-proxyç”Ÿæˆï¼›å¦‚æœéœ€è¦æŸå°æœºå™¨å¯ä»¥è®¿é—®Serviceï¼Œåˆ™éœ€è¦åœ¨è¯¥ä¸»æœºå¯åŠ¨kube-proxyã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹serviceçš„iptables&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$iptables-save|grep example-service
-A KUBE-NODEPORTS -p tcp -m comment --comment &amp;quot;default/example-service:&amp;quot; -m tcp --dport 32663 -j KUBE-MARK-MASQ
-A KUBE-NODEPORTS -p tcp -m comment --comment &amp;quot;default/example-service:&amp;quot; -m tcp --dport 32663 -j KUBE-SVC-BR4KARPIGKMRMN3E
-A KUBE-SEP-NCPBOLUH5XTTHG3E -s 172.30.46.2/32 -m comment --comment &amp;quot;default/example-service:&amp;quot; -j KUBE-MARK-MASQ
-A KUBE-SEP-NCPBOLUH5XTTHG3E -p tcp -m comment --comment &amp;quot;default/example-service:&amp;quot; -m tcp -j DNAT --to-destination 172.30.46.2:80
-A KUBE-SEP-ONEKQBIWICF7RAR3 -s 172.30.14.2/32 -m comment --comment &amp;quot;default/example-service:&amp;quot; -j KUBE-MARK-MASQ
-A KUBE-SEP-ONEKQBIWICF7RAR3 -p tcp -m comment --comment &amp;quot;default/example-service:&amp;quot; -m tcp -j DNAT --to-destination 172.30.14.2:80
-A KUBE-SERVICES -d 10.254.180.209/32 -p tcp -m comment --comment &amp;quot;default/example-service: cluster IP&amp;quot; -m tcp --dport 80 -j KUBE-SVC-BR4KARPIGKMRMN3E
-A KUBE-SVC-BR4KARPIGKMRMN3E -m comment --comment &amp;quot;default/example-service:&amp;quot; -m statistic --mode random --probability 0.50000000000 -j KUBE-SEP-ONEKQBIWICF7RAR3
-A KUBE-SVC-BR4KARPIGKMRMN3E -m comment --comment &amp;quot;default/example-service:&amp;quot; -j KUBE-SEP-NCPBOLUH5XTTHG3E
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹clusterIPçš„iptables&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$iptables -t nat -nL|grep 10.254
KUBE-SVC-NPX46M4PTMTKRN6Y  tcp  --  0.0.0.0/0            10.254.0.1           /* default/kubernetes:https cluster IP */ tcp dpt:443
KUBE-SVC-BR4KARPIGKMRMN3E  tcp  --  0.0.0.0/0            10.254.180.209       /* default/example-service: cluster IP */ tcp dpt:80
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°åœ¨PREROUTINGç¯èŠ‚ï¼Œk8sè®¾ç½®äº†ä¸€ä¸ªtarget: KUBE-SERVICESã€‚è€ŒKUBE-SERVICESä¸‹é¢åˆè®¾ç½®äº†è®¸å¤štargetï¼Œä¸€æ—¦destinationå’ŒdstportåŒ¹é…ï¼Œå°±ä¼šæ²¿ç€chainè¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ï¼šå½“æˆ‘ä»¬åœ¨podç½‘ç»œcurl 10.254.198.44 80æ—¶ï¼ŒåŒ¹é…åˆ°ä¸‹é¢çš„KUBE-SVC-BR4KARPIGKMRMN3E targetï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;KUBE-SVC-BR4KARPIGKMRMN3E  tcp  --  0.0.0.0/0            10.254.180.209       /* default/example-service: cluster IP */ tcp dpt:80
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‚è€ƒ&lt;a href=&#34;http://tonybai.com/2017/01/17/understanding-flannel-network-for-kubernetes/&#34;&gt;ç†è§£Kubernetesç½‘ç»œä¹‹Flannelç½‘ç»œ&lt;/a&gt;ï¼ŒTony Baiçš„æ–‡ç« ä¸­æœ‰å¯¹flannelçš„è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;

&lt;h2 id=&#34;é‡åˆ°çš„é—®é¢˜&#34;&gt;é‡åˆ°çš„é—®é¢˜&lt;/h2&gt;

&lt;p&gt;åœ¨è®¾ç½®ç½‘ç»œçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè®°å½•å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;é—®é¢˜ä¸€&#34;&gt;é—®é¢˜ä¸€&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;é—®é¢˜æè¿°&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Kube-proxyå¼€æ”¾çš„&lt;strong&gt;NodePort&lt;/strong&gt;ç«¯å£æ— æ³•è®¿é—®ã€‚å³æ— æ³•ä½¿ç”¨NodeIPåŠ NodePortçš„æ–¹å¼è®¿é—®serviceï¼Œè€Œä¸”æœ¬åœ°telnetä¹Ÿä¸é€šï¼Œä½†æ˜¯ç«¯å£ç¡®ç¡®å®å®åœ¨é‚£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;é—®é¢˜çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å·²è§£å†³&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å…¶å®è¿™ä¸æ˜¯é—®é¢˜ï¼Œæ˜¯å› ä¸ºä»ä¸Šé¢çš„æ“ä½œè®°å½•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ&lt;strong&gt;åœ¨å¯åŠ¨Nginxçš„Pod&lt;/strong&gt;æ—¶ï¼ŒæŒ‡å®športä¸º80å³å¯ã€‚ä»¥ClusterIP + Portçš„æ–¹å¼è®¿é—®serivceéœ€è¦ç­‰ä¸€æ®µæ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åæ€&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘ä»¬å·®ä¸å¤šä¸¤å¤©æ—¶é—´ï¼Œå‡ºç°è¿™ä¸ªé—®é¢˜çš„æ ¹æºè¿˜æ˜¯å› ä¸º&lt;u&gt;æ€æƒ³è§‚å¿µæ²¡æœ‰ä»è¿è¡Œdockerçš„å‘½ä»¤ä¸­è§£æ”¾å‡ºæ¥&lt;/u&gt;,è¿˜æŠŠ&lt;code&gt;kubelet run â€”port&lt;/code&gt;å½“æˆæ˜¯docker runä¸­çš„ç«¯å£æ˜ å°„ï¼Œè¿™ç§æƒ³æ³•æ˜¯å¤§é”™ç‰¹é”™çš„ï¼Œè¯¥ç«¯å£æ˜¯imageä¸­çš„åº”ç”¨å®é™…æš´éœ²çš„ç«¯å£ï¼Œå¦‚nginxçš„80ç«¯å£ã€‚ğŸ˜”&lt;/p&gt;

&lt;h3 id=&#34;é—®é¢˜äºŒ&#34;&gt;é—®é¢˜äºŒ&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;é—®é¢˜æè¿°&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æ²¡æœ‰åˆ é™¤serviceå’Œdeployçš„æƒ…å†µä¸‹å°±é‡å¯kubeletçš„æ—¶å€™ï¼Œä¼šé‡åˆ°kubeletå¯åŠ¨å¤±è´¥çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å‡ºé”™ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Apr 01 14:24:08 sz-pg-oam-docker-test-001.tendcloud.com kubelet[103932]: I0401 14:24:08.359839  103932 kubelet.go:1752] skipping pod synchronization - [Failed to start ContainerManager failed to initialise top level QOS containers: failed to create top level Burstable QOS cgroup : Unit kubepods-burstable.slice already exists.]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;http://www.osbaike.net/article-show-id-229028.html&#34;&gt;Kubernetes Resource QoSæœºåˆ¶è§£è¯»&lt;/a&gt;ï¼Œè¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†QoSçš„æœºåˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;Kubernetesæ ¹æ®Podä¸­Containers Resourceçš„&lt;code&gt;request&lt;/code&gt;å’Œ&lt;code&gt;limit&lt;/code&gt;çš„å€¼æ¥å®šä¹‰Podçš„QoS Classã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºæ¯ä¸€ç§Resourceéƒ½å¯ä»¥å°†å®¹å™¨åˆ†ä¸º3ä¸­QoS Classes: Guaranteed, Burstable, and Best-Effortï¼Œå®ƒä»¬çš„QoSçº§åˆ«ä¾æ¬¡é€’å‡ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Guaranteed&lt;/strong&gt;ï¼šå¦‚æœPodä¸­æ‰€æœ‰Containerçš„æ‰€æœ‰Resourceçš„&lt;code&gt;limit&lt;/code&gt;å’Œ&lt;code&gt;request&lt;/code&gt;éƒ½ç›¸ç­‰ä¸”ä¸ä¸º0ï¼Œåˆ™è¿™ä¸ªPodçš„QoS Classå°±æ˜¯Guaranteedã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Burstable&lt;/strong&gt;ï¼šé™¤äº†ç¬¦åˆGuaranteedå’ŒBest-Effortçš„åœºæ™¯ï¼Œå…¶ä»–åœºæ™¯çš„Pod QoS Classéƒ½å±äºBurstableã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Best-Effort&lt;/strong&gt;ï¼šå¦‚æœPodä¸­æ‰€æœ‰å®¹å™¨çš„æ‰€æœ‰Resourceçš„requestå’Œlimitéƒ½æ²¡æœ‰èµ‹å€¼ï¼Œåˆ™è¿™ä¸ªPodçš„QoS Classå°±æ˜¯Best-Effortã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæš‚æ—¶è¿˜æ²¡æ‰¾åˆ°æ ¹æœ¬çš„è§£å†³åŠæ³•ï¼Œå‚è€ƒGithubä¸Šçš„&lt;a href=&#34;https://github.com/kubernetes/kubernetes/issues/43856&#34;&gt;Failed to start ContainerManager failed to initialize top level QOS containers #43856&lt;/a&gt;ï¼Œé‡å¯ä¸»æœºåç¡®å®æ­£å¸¸äº†ï¼Œä¸è¿‡è¿™åªæ˜¯ä¸´æ—¶è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;åè®°&#34;&gt;åè®°&lt;/h2&gt;

&lt;p&gt;å…¶å®æ˜¨å¤©å°±å·²ç»å®‰è£…å®Œæ¯•äº†ï¼Œæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„å§¿åŠ¿ä¸å¯¹ï¼Œç™½ç™½è€½è¯¯è¿™ä¹ˆé•¿æ—¶é—´ï¼Œèº«è¾¹å·®ä¸ªè€å¸æœºå•Šï¼Œæ»´ï½å­¦ç”Ÿå¡ã€‚&lt;/p&gt;

&lt;p&gt;æ„Ÿè°¢&lt;a href=&#34;tonybai.com&#34;&gt;Tony Bai&lt;/a&gt;ã€&lt;a href=&#34;https://godliness.github.io/&#34;&gt;Peter Ma&lt;/a&gt;çš„å¤§åŠ›æ”¯æŒã€‚&lt;/p&gt;

&lt;p&gt;Apr 1,2017 æ„šäººèŠ‚ï¼Œä¸œç›´é—¨&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬ä¸‰ç« TensorFlowå…¥é—¨</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-03/</link>
      <pubDate>Thu, 30 Mar 2017 21:34:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-03/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2015052401.jpg&#34; alt=&#34;æ‰¬å·ä¸œå…³&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šæ‰¬å·ä¸œå…³ May 24,2015ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;è¿™æ˜¯æˆ‘é˜…è¯»&lt;a href=&#34;caicloud.io&#34;&gt;æ‰äº‘ç§‘æŠ€&lt;/a&gt;éƒ‘æ³½å®‡çš„ã€ŠTensorFlowå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹çš„è¯»ä¹¦ç¬”è®°ç³»åˆ—æ–‡ç« ï¼ŒæŒ‰ç…§æ–‡ç« çš„ç« èŠ‚é¡ºåºæ¥å†™çš„ã€‚æ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨&lt;a href=&#34;http://rootsongjc.github.io/tags/tensorflow-practice-reading-notes/&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;P.S æœ¬ä¹¦çš„&lt;strong&gt;å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰&lt;/strong&gt;å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨&lt;a href=&#34;rootsongjc.github.io/about&#34;&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸€ç« ä»ä¸‰ä¸ªè§’åº¦å¸¦å¤§å®¶å…¥é—¨ã€‚&lt;/p&gt;

&lt;p&gt;åˆ†åˆ«æ˜¯TensorFlowçš„&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è®¡ç®—æ¨¡å‹&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¨¡å‹&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ¨¡å‹&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;3-1-tensorflowçš„è®¡ç®—æ¨¡å‹-å›¾è®¡ç®—&#34;&gt;3.1 TensorFlowçš„è®¡ç®—æ¨¡å‹â€”â€”å›¾è®¡ç®—&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;è®¡ç®—å›¾&lt;/strong&gt;æ˜¯TensorFlowä¸­çš„ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¦‚å¿µï¼Œ&lt;u&gt;TensorFlowä¸­çš„æ‰€æœ‰è®¡ç®—éƒ½ä¼šè½¬åŒ–æˆè®¡ç®—å›¾ä¸Šçš„èŠ‚ç‚¹&lt;/u&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®TensorFlowçš„åå­—å·²ç»æš—ç¤ºäº†å®ƒçš„å®ç°æ–¹å¼äº†ï¼Œ&lt;strong&gt;Tensor&lt;/strong&gt;è¡¨ç¤ºçš„æ˜¯æ•°æ®ç»“æ„â€”â€”å¼ é‡ï¼Œ&lt;strong&gt;Flow&lt;/strong&gt;è¡¨ç¤ºæ•°æ®æµâ€”â€”Tensoré€šè¿‡æ•°æ®æµç›¸äº’è½¬åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¸¸ç”¨çš„æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨pythonä¸­å¯¼å…¥tensorflowï¼šimport tensorflow as tf&lt;/li&gt;
&lt;li&gt;è·å–å½“å‰é»˜è®¤çš„è®¡ç®—å›¾ï¼štf.get_default_graph()&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆæ–°çš„è®¡ç®—å›¾ï¼štf.Graph()&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¹¦ä¸­è¿™é‡Œéƒ½æœ‰ä¾‹å­è®²è§£ï¼Œå¯ä»¥ä»Githubä¸­&lt;a href=&#34;https://github.com/caicloud/tensorflow-tutorial&#34;&gt;ä¸‹è½½ä»£ç &lt;/a&gt;ï¼Œæˆ–è€…å¦‚æœä½ ä½¿ç”¨æ‰äº‘æä¾›çš„dockeré•œåƒçš„æ–¹å¼å®‰è£…çš„è¯ï¼Œåœ¨jupyterä¸­å¯ä»¥çœ‹åˆ°å„ä¸ªç« èŠ‚çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®šä¹‰ä¸¤ä¸ªä¸åŒçš„å›¾&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import tensorflow as tf

g1 = tf.Graph()
with g1.as_default():
    v = tf.get_variable(&amp;quot;v&amp;quot;, [1], initializer = tf.zeros_initializer) # è®¾ç½®åˆå§‹å€¼ä¸º0

g2 = tf.Graph()
with g2.as_default():
    v = tf.get_variable(&amp;quot;v&amp;quot;, [1], initializer = tf.ones_initializer())  # è®¾ç½®åˆå§‹å€¼ä¸º1
    
with tf.Session(graph = g1) as sess:
    tf.global_variables_initializer().run()
    with tf.variable_scope(&amp;quot;&amp;quot;, reuse=True):
        print(sess.run(tf.get_variable(&amp;quot;v&amp;quot;)))

with tf.Session(graph = g2) as sess:
    tf.global_variables_initializer().run()
    with tf.variable_scope(&amp;quot;&amp;quot;, reuse=True):
        print(sess.run(tf.get_variable(&amp;quot;v&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œé¢ç”¨äº†&lt;a href=&#34;https://www.ibm.com/developerworks/cn/opensource/os-cn-pythonwith/&#34;&gt;pythonä¸­çš„withè¯­æ³•&lt;/a&gt;ï¼Œä¸äº†è§£çš„å¯ä»¥åˆ°å‰é¢é‚£ä¸ªé“¾æ¥çœ‹çœ‹ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;with è¯­å¥é€‚ç”¨äºå¯¹èµ„æºè¿›è¡Œè®¿é—®çš„åœºåˆï¼Œç¡®ä¿ä¸ç®¡ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œå¿…è¦çš„â€œæ¸…ç†â€æ“ä½œï¼Œé‡Šæ”¾èµ„æºï¼Œæ¯”å¦‚æ–‡ä»¶ä½¿ç”¨åè‡ªåŠ¨å…³é—­ã€çº¿ç¨‹ä¸­é”çš„è‡ªåŠ¨è·å–å’Œé‡Šæ”¾ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;TensorFlowä¸­ç»´æŠ¤çš„é›†åˆåˆ—è¡¨&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆåç§°&lt;/th&gt;
&lt;th&gt;é›†åˆå†…å®¹&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;tf.GraphKeys.VARIABLES&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å˜é‡&lt;/td&gt;
&lt;td&gt;æŒä¹…åŒ–TensorFlowæ¨¡å‹&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;tf.GraphKeys.TRAINABLE_VARIABLES&lt;/td&gt;
&lt;td&gt;å¯å­¦ä¹ çš„å˜é‡ï¼ˆä¸€èˆ¬æŒ‡ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;æ¨¡å‹è®­ç»ƒã€ç”Ÿæ´»ä»å‘¢ä¸ªæ¨¡å‹å¯è§†åŒ–å†…å®¹&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;tf.GraphKeys.SUMMARIES&lt;/td&gt;
&lt;td&gt;ä¸æ—¥å¿—æœ‰å…³çš„å¼ é‡&lt;/td&gt;
&lt;td&gt;TensorFlowè®¡ç®—å¯è§†åŒ–&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;tf.GraphKeys.QUEUE_RUNNERS&lt;/td&gt;
&lt;td&gt;å¤„ç†è¾“å…¥çš„QueueRunner&lt;/td&gt;
&lt;td&gt;è¾“å…¥å¤„ç†&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;tf.GraphKeys.MOVING_AVERAGE_VARIABLES&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰è®¡ç®—äº†æ»‘åŠ¨å¹³å‡å€¼çš„å˜é‡&lt;/td&gt;
&lt;td&gt;è®¡ç®—å˜é‡çš„æ»‘åŠ¨å¹³å‡å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;em&gt;æ‰€è°“çš„æ»‘åŠ¨å¹³å‡å€¼å³ç§»åŠ¨å¹³å‡å€¼ï¼Œç†Ÿæ‚‰è‚¡ç¥¨çš„åº”è¯¥éƒ½çŸ¥é“å‡çº¿çš„æ¦‚å¿µå§ï¼Œ5æ—¥å‡çº¿ï¼Œ20æ—¥å‡çº¿ï¼Œ30æ—¥å‡çº¿å•¥çš„ï¼Œä¸€èˆ¬ç§°ä½œMA(Moving Average)ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;3-2-tensorflowæ•°æ®æ¨¡å‹-å¼ é‡&#34;&gt;3.2 TensorFlowæ•°æ®æ¨¡å‹â€”â€”å¼ é‡&lt;/h2&gt;

&lt;p&gt;å¼ é‡ï¼ˆTensorï¼‰æ˜¯TensorFlowä¸­æ‰€æœ‰æ•°æ®çš„è¡¨ç°å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„å°†Tensorç†è§£ä¸º&lt;strong&gt;å¤šç»´æ•°ç»„&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;0é˜¶çš„è¯å°±æ˜¯ä¸€ä¸ªæ ‡é‡ï¼ˆScalarï¼‰ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;ä¸€é˜¶çš„è¯æ˜¯å‘é‡ï¼ˆVectorï¼‰&lt;/li&gt;
&lt;li&gt;né˜¶çš„è¯å°±æ˜¯nç»´æ•°ç»„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tensoråœ¨TensorFlowä¸­å¹¶ä¸æ˜¯ç›´æ¥é‡‡ç”¨æ•°ç»„çš„å½¢å¼ï¼Œè€Œæ˜¯&lt;strong&gt;å¯¹TFä¸­è®¡ç®—ç»“æœçš„å¼•ç”¨&lt;/strong&gt;ï¼Œä¿å­˜çš„æ˜¯å¦‚ä½•å¾—åˆ°è¿™äº›æ•°å­—çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸¾ä¸ªä¾‹å­&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Python&#34;&gt;import tensorflow as tf
a = tf.constant([1.0, 2.0], name=&amp;quot;a&amp;quot;)
b = tf.constant([2.0, 3.0], name=&amp;quot;b&amp;quot;)
result = tf.add(a,b,name=&amp;quot;add&amp;quot;)
print result
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;Tensor(&amp;quot;add:0&amp;quot;, shape=(2,), dtype=float32)
[ 3.  5.]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªä¾‹å­åªæ˜¯ç®€å•çš„åšäº†ä¸ªåŠ æ³•ï¼Œä¸‹é¢ç»“åˆä¸Šé¢çš„ä¾‹å­æ¥è®²è§£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Tensorçš„3ä¸ªå±æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åå­—ï¼ˆNameï¼‰&lt;/strong&gt;ï¼šTensorçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¦‚ä¾‹å­ä¸­çš„a, b, resultï¼Œè¿™æ˜¯æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šçš„ï¼Œå®é™…ä¸ŠTensoræ˜¯ä¸è®¡ç®—å›¾ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸€å¯¹åº”çš„ï¼Œtensorçš„å‘½åå¯ä»¥é€šè¿‡&lt;code&gt;node:src_output&lt;/code&gt;çš„å½¢å¼ç»™å‡ºï¼Œå¦‚ä¾‹å­è¾“å‡ºä¸­çš„è®¡ç®—ç»“æœåå­—ä¸º&lt;strong&gt;add:0&lt;/strong&gt;ï¼Œ0è¡¨ç¤ºçš„æ˜¯è®¡ç®—èŠ‚ç‚¹&lt;strong&gt;add&lt;/strong&gt;è¾“å‡ºçš„ç¬¬ä¸€ä¸ªç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´åº¦ï¼ˆShapeï¼‰&lt;/strong&gt;ï¼šå¦‚ä¸Šé¢ä¾‹å­ç»“æœè¾“å‡ºä¸­çš„&lt;strong&gt;shape=(2,)&lt;/strong&gt;ï¼Œè¡¨ç¤ºè¿™ä¸ªå¼ é‡æ˜¯ä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯2ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹ï¼ˆTypeï¼‰&lt;/strong&gt;ï¼šæ‰€æœ‰å‚ä¸è¿ç®—çš„å¼ é‡çš„ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚ä¸èƒ½floatå’Œintä¹‹é—´è¿ç®—ã€‚TensorFlowä¼šè‡ªåŠ¨æ£€æŸ¥å¼ é‡çš„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡&lt;strong&gt;dtype=df.float32&lt;/strong&gt;è¿™æ ·çš„å£°æ˜æ¥æŒ‡å®šç±»å‹ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼ŒTFä¼šæ ¹æ®å€¼ç¡®å®šé»˜è®¤ç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Tensorçš„ç”¨é€”&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½œä¸ºå¯¹è®¡ç®—ä¸­é—´ç»“æœçš„å¼•ç”¨ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„aå’Œbï¼Œåœ¨å¤æ‚è®¡ç®—ä¸­ä½¿ç”¨tensorèƒ½å¤Ÿå¢åŠ ä»£ç çš„å¯é˜…è¯»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æ¥è·å–è®¡ç®—ç»“æœã€‚å¼ é‡æœ¬èº«æ²¡æœ‰å­˜å‚¨å…·ä½“çš„æ•°å­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨&lt;strong&gt;ä¼šè¯&lt;/strong&gt;çš„tf.Session().run(result)æ¥è·å–è®¡ç®—ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;3-3-tensorflowçš„è¿è¡Œæ¨¡å‹-ä¼šè¯&#34;&gt;3.3 TensorFlowçš„è¿è¡Œæ¨¡å‹â€”â€”ä¼šè¯&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ä¼šè¯ï¼ˆSessionï¼‰æ‹¥æœ‰å’Œç®¡ç†TensorFlowä¸­æ‰€æœ‰çš„è¿ç®—ï¼Œå¯ä»¥æ‰§è¡Œå®šä¹‰å¥½çš„è¿ç®—ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»ºå’Œå…³é—­ä¼šè¯&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# åˆ›å»ºä¸€ä¸ªä¼šè¯ã€‚
sess = tf.Session()

# ä½¿ç”¨ä¼šè¯å¾—åˆ°ä¹‹å‰è®¡ç®—çš„ç»“æœã€‚
print(sess.run(result))

# å…³é—­ä¼šè¯ä½¿å¾—æœ¬æ¬¡è¿è¡Œä¸­ä½¿ç”¨åˆ°çš„èµ„æºå¯ä»¥è¢«é‡Šæ”¾ã€‚
sess.close()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å»ºè®®ä½¿ç”¨Pythonçš„&lt;strong&gt;ä¸Šä¸‹æ–‡ç®¡ç†å™¨&lt;/strong&gt;ï¼Œå³é€šè¿‡&lt;strong&gt;with&lt;/strong&gt;è¯­æ³•æ¥åˆ›å»ºä¼šè¯ï¼Œèƒ½å¤Ÿé¿å…èµ„æºæ³„æ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;with tf.Session() as sess:
    print(sess.run(result))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨äº¤äº’å¼ç¯å¢ƒä¸‹ï¼ˆæ¯”å¦‚Jupyterï¼‰ç›´æ¥ä½¿ç”¨&lt;strong&gt;tf.InteractiveSession&lt;/strong&gt;å‡½æ•°åˆ›å»º&lt;strong&gt;äº¤äº’å¼ä¼šè¯&lt;/strong&gt;ï¼Œå°†äº§ç”Ÿçš„ä¼šè¯ç›´æ¥æ³¨å†Œä¸ºé»˜è®¤ä¼šè¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;sess = tf.InteractiveSession ()
print(result.eval())
sess.close()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸è®ºä½¿ç”¨å“ªç§ä¼šè¯éƒ½å¯ä»¥é€šè¿‡&lt;strong&gt;ConfigProto&lt;/strong&gt;æ¥é…ç½®&lt;code&gt;å¹¶è¡Œçº¿ç¨‹æ•°&lt;/code&gt;ã€&lt;code&gt;GPUåˆ†é…ç­–ç•¥&lt;/code&gt;ã€&lt;code&gt;è¿ç®—è¶…æ—¶æ—¶é—´&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å¸¸ç”¨çš„ä¸¤ä¸ªé…ç½®æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;allow_soft_placement&lt;/strong&gt;ï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤falseï¼Œä»¥ä¸‹ä»»ä½•ä¸€ä¸ªæ¡ä»¶æ»¡è¶³æ—¶åˆ™ä¸ºtrueï¼Œå…è®¸å°†GPUä¸Šçš„è¿ç®—æ”¾åˆ°CPUä¸Šè¿›è¡Œã€‚

&lt;ul&gt;
&lt;li&gt;è¿ç®—æ— æ³•åœ¨GPUä¸Šè¿è¡Œ&lt;/li&gt;
&lt;li&gt;GPUèµ„æºä¸è¶³ï¼ˆæ²¡æœ‰GPUæˆ–è€…æŒ‡å®šçš„GPUä¸ªæ•°ä¸å¤Ÿï¼‰&lt;/li&gt;
&lt;li&gt;è¿ç®—è¾“å…¥åŒ…æ‹¬å¯¹CPUè®¡ç®—ç»“æœçš„å¼•ç”¨&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;log_device_placement&lt;/strong&gt;ï¼šå¸ƒå°”å€¼ï¼Œé»˜è®¤å€¼æ˜¯ï¼Ÿå¦‚æœä¸ºtrueçš„è¯ï¼Œæ—¥å¿—ä¸­å°†ä¼šè®°å½•æ¯ä¸ªèŠ‚ç‚¹è¢«å®‰æ’åœ¨å“ªä¸ªè®¾å¤‡ä¸Šï¼Œè¿™æ–¹ä¾¿è°ƒè¯•ã€‚ç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬è®¾ç½®ä¸ºfalseï¼Œèƒ½å¤Ÿå‡å°‘æ—¥å¿—é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;3-4-tensorflowå®ç°ç¥ç»ç½‘ç»œ&#34;&gt;3.4 TensorFlowå®ç°ç¥ç»ç½‘ç»œ&lt;/h2&gt;

&lt;p&gt;To be continuedâ€¦&lt;/p&gt;

&lt;p&gt;10:39 p.m Thu Mar 30,2017&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨CentOSä¸Šå®‰è£…kubernetesè¯¦ç»†æŒ‡å—</title>
      <link>http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/</link>
      <pubDate>Thu, 30 Mar 2017 20:44:20 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/kubernetes-installation-on-centos/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2014082501.jpg&#34; alt=&#34;åœ†æ˜å›­&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šåŒ—äº¬åœ†æ˜å›­ Aug 25,2014ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;rootsongjc.github.io/about&#34;&gt;Jimmy Song&lt;/a&gt;ï¼Œ&lt;a href=&#34;https://godliness.github.io/&#34;&gt;Peter Ma&lt;/a&gt;ï¼Œ2017å¹´3æœˆ30æ—¥&lt;/p&gt;

&lt;p&gt;æœ€è¿‘å†³å®šä»Docker Swarm ModeæŠ•å…¥åˆ°Kubernetesçš„æ€€æŠ±ï¼Œå¯¹Dockerçš„æˆ˜ç•¥å’Œä¼ä¸šåŒ–å‘å±•å‰æ™¯æ¯”è¾ƒå ªå¿§ï¼Œè€ŒKubernetesæ˜¯&lt;a href=&#34;https://www.cncf.io/&#34;&gt;CNCF&lt;/a&gt;çš„æˆå‘˜ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç¯‡æ˜¯æ ¹æ®&lt;a href=&#34;https://kubernetes.io/docs/getting-started-guides/centos/centos_manual_config/#prerequisites&#34;&gt;å®˜æ–¹å®‰è£…æ–‡æ¡£&lt;/a&gt;å®è·µæ•´ç†çš„ï¼Œæ“ä½œç³»ç»Ÿæ˜¯çº¯å‡€çš„CentOS7.2ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–è¿˜æœ‰ä¸€ä¸ªPeter Maå†™çš„&lt;a href=&#34;https://godliness.github.io/2017/03/29/%E5%9C%A8CentOS7%E4%B8%8A%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85Kubernetes/&#34;&gt;åœ¨CentOSä¸Šæ‰‹åŠ¨å®‰è£…kubernetesçš„æ–‡æ¡£&lt;/a&gt;å¯ä»¥å‚è€ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§’è‰²åˆ†é…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä¸‹é¢ä»¥åœ¨ä¸‰å°ä¸»æœºä¸Šå®‰è£…Kubernetesä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;172.20.0.113 master/node kube-apiserver kube-controller-manager kube-scheduler kubelet kube-proxy etcd flannel
172.20.0.114 node kubectl kube-proxy flannel
172.20.0.115 node kubectl kube-proxy flannel
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¬¬ä¸€å°ä¸»æœºæ—¢ä½œä¸ºmasterä¹Ÿä½œä¸ºnodeã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿç¯å¢ƒ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Centos 7.2.1511&lt;/li&gt;
&lt;li&gt;docker 1.12.6&lt;/li&gt;
&lt;li&gt;etcd 3.1.5&lt;/li&gt;
&lt;li&gt;kubernetes 1.6.0&lt;/li&gt;
&lt;li&gt;flannel 0.7.0-1&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h1&gt;

&lt;p&gt;ä¸‹é¢ç»™å‡ºä¸¤ç§å®‰è£…æ–¹å¼ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é…ç½®yumæºåï¼Œä½¿ç”¨yumå®‰è£…ï¼Œå¥½å¤„æ˜¯ç®€å•ï¼Œåå¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œéœ€è¦googleæ›´æ–°yumæºæ‰èƒ½è·å¾—æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œè€Œæ‰€æœ‰è½¯ä»¶çš„ä¾èµ–åˆä¸èƒ½è‡ªå·±æŒ‡å®šï¼Œå°¤å…¶æ˜¯ä½ çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬å¦‚æœä½çš„è¯ï¼Œä½¿ç”¨yumæºå®‰è£…çš„kubernetesçš„ç‰ˆæœ¬ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ï¼Œå¥½å¤„æ˜¯å¯ä»¥å®‰è£…ä»»æ„ç‰ˆæœ¬çš„kubernetesï¼Œåå¤„æ˜¯é…ç½®æ¯”è¾ƒå¤æ‚ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡çš„å¾ˆå¤šå®‰è£…æ­¥éª¤å’Œå‘½ä»¤æ˜¯å‚è€ƒçš„Kuberneteså®˜ç½‘&lt;a href=&#34;https://kubernetes.io/docs/getting-started-guides/centos/centos_manual_config/&#34;&gt;CentOS Manual Config&lt;/a&gt;æ–‡æ¡£ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç¬¬ä¸€ç§æ–¹å¼-centosç³»ç»Ÿä¸­ç›´æ¥ä½¿ç”¨yumå®‰è£…&#34;&gt;ç¬¬ä¸€ç§æ–¹å¼ï¼šCentOSç³»ç»Ÿä¸­ç›´æ¥ä½¿ç”¨yumå®‰è£…&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ç»™yumæºå¢åŠ ä¸€ä¸ªRepo&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[virt7-docker-common-release]
name=virt7-docker-common-release
baseurl=http://cbs.centos.org/repos/virt7-docker-common-release/x86_64/os/
gpgcheck=0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…dockerã€kubernetesã€etcdã€flannelä¸€æ­¥åˆ°ä½&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;yum -y install --enablerepo=virt7-docker-common-release kubernetes etcd flannel
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®‰è£…å¥½äº†ä¹‹åéœ€è¦ä¿®æ”¹ä¸€ç³»åˆ—é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªrepoåœ¨CentOS7.3ä¸‹æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œå› ä¸ºCentOSå®˜æ–¹æºçš„extrasä¸­å·²ç»åŒ…å«äº†Kubernetes1.5.2ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯CentOS7.3çš„è¯ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½å®‰è£…Kubernetes1.5.2ï¼ˆTill March 30,2017ï¼‰ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯CentOS7.2çš„åŒ–ï¼Œè¿™ä¸ªæºå°±æœ‰ç”¨äº†ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸‹è½½å®‰è£…Kubernentes1.1ã€‚æˆ‘ä»¬ç°åœ¨è¦å®‰è£…ç›®å‰çš„æœ€æ–°ç‰ˆæœ¬Kubernetes1.6ï¼Œè€Œä½¿ç”¨çš„åˆæ˜¯CentOS7.2ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä½¿ç”¨yumå®‰è£…ï¼ˆå½“å‰yumæºæ”¯æŒçš„æœ€é«˜ç‰ˆæœ¬çš„kuberentesæ˜¯1.5.2ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;ç¬¬äºŒç§æ–¹å¼-ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…&#34;&gt;ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…&lt;/h2&gt;

&lt;p&gt;è¿™ç§æ–¹å¼å®‰è£…çš„è¯ï¼Œéœ€è¦è‡ªå·±ä¸€ä¸ªä¸€ä¸ªç»„ä»¶çš„å®‰è£…ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å®‰è£…docker&#34;&gt;å®‰è£…Docker&lt;/h3&gt;

&lt;p&gt;yum localinstall ./docker-engine*&lt;/p&gt;

&lt;p&gt;å°†ä½¿ç”¨CentOSçš„&lt;strong&gt;extras&lt;/strong&gt; repoä¸‹è½½ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å…³é—­é˜²ç«å¢™å’Œselinux&#34;&gt;å…³é—­é˜²ç«å¢™å’ŒSELinux&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯å®˜ç½‘ä¸Šå»ºè®®çš„ï¼Œæˆ‘æ˜¯ç›´æ¥å°†iptables-serviceså’Œfirewlldå¸è½½æ‰äº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;setenforce 0
systemctl disable iptables-services firewalld
systemctl stop iptables-services firewalld
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;å®‰è£…etcd&#34;&gt;å®‰è£…etcd&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;DOWNLOAD_URL=https://storage.googleapis.com/etcd  #etcdå­˜å‚¨åœ°å€
ETCD_VER=v3.1.5  #è®¾ç½®etcdç‰ˆæœ¬å·
wget ${DOWNLOAD_URL}/${ETCD_VER}/etcd-${ETCD_VER}-linux-amd64.tar.gz
tar xvf etcd-${ETCD_VER}-linux-amd64.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;éƒ¨ç½²æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å°†å¦‚ä¸‹å†…å®¹å†™å…¥æ–‡ä»¶ /etc/etcd/etcd.conf ä¸­ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;# [member]
ETCD_NAME=default
ETCD_DATA_DIR=&amp;quot;/var/lib/etcd/default.etcd&amp;quot;
# ETCD_WAL_DIR=&amp;quot;&amp;quot;
# ETCD_SNAPSHOT_COUNT=&amp;quot;10000&amp;quot;
# ETCD_HEARTBEAT_INTERVAL=&amp;quot;100&amp;quot;
# ETCD_ELECTION_TIMEOUT=&amp;quot;1000&amp;quot;
# ETCD_LISTEN_PEER_URLS=&amp;quot;http://localhost:2380&amp;quot;
ETCD_LISTEN_CLIENT_URLS=&amp;quot;http://0.0.0.0:2379&amp;quot;
# ETCD_MAX_SNAPSHOTS=&amp;quot;5&amp;quot;
# ETCD_MAX_WALS=&amp;quot;5&amp;quot;
# ETCD_CORS=&amp;quot;&amp;quot;
#
# [cluster]
# ETCD_INITIAL_ADVERTISE_PEER_URLS=&amp;quot;http://localhost:2380&amp;quot;
# if you use different ETCD_NAME (e.g. test), set ETCD_INITIAL_CLUSTER value for this name, i.e. &amp;quot;test=http://...&amp;quot;
# ETCD_INITIAL_CLUSTER=&amp;quot;default=http://localhost:2380&amp;quot;
# ETCD_INITIAL_CLUSTER_STATE=&amp;quot;new&amp;quot;
# ETCD_INITIAL_CLUSTER_TOKEN=&amp;quot;etcd-cluster&amp;quot;
ETCD_ADVERTISE_CLIENT_URLS=&amp;quot;http://0.0.0.0:2379&amp;quot;
# ETCD_DISCOVERY=&amp;quot;&amp;quot;
# ETCD_DISCOVERY_SRV=&amp;quot;&amp;quot;
# ETCD_DISCOVERY_FALLBACK=&amp;quot;proxy&amp;quot;
# ETCD_DISCOVERY_PROXY=&amp;quot;&amp;quot;
#
# [proxy]
# ETCD_PROXY=&amp;quot;off&amp;quot;
# ETCD_PROXY_FAILURE_WAIT=&amp;quot;5000&amp;quot;
# ETCD_PROXY_REFRESH_INTERVAL=&amp;quot;30000&amp;quot;
# ETCD_PROXY_DIAL_TIMEOUT=&amp;quot;1000&amp;quot;
# ETCD_PROXY_WRITE_TIMEOUT=&amp;quot;5000&amp;quot;
# ETCD_PROXY_READ_TIMEOUT=&amp;quot;0&amp;quot;
#
# [security]
# ETCD_CERT_FILE=&amp;quot;&amp;quot;
# ETCD_KEY_FILE=&amp;quot;&amp;quot;
# ETCD_CLIENT_CERT_AUTH=&amp;quot;false&amp;quot;
# ETCD_TRUSTED_CA_FILE=&amp;quot;&amp;quot;
# ETCD_PEER_CERT_FILE=&amp;quot;&amp;quot;
# ETCD_PEER_KEY_FILE=&amp;quot;&amp;quot;
# ETCD_PEER_CLIENT_CERT_AUTH=&amp;quot;false&amp;quot;
# ETCD_PEER_TRUSTED_CA_FILE=&amp;quot;&amp;quot;
# [logging]
# ETCD_DEBUG=&amp;quot;false&amp;quot;
# examples for -log-package-levels etcdserver=WARNING,security=DEBUG
# ETCD_LOG_PACKAGE_LEVELS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°† etcd, etcdctlæ”¾å…¥ /usr/bin/ä¸‹ï¼Œå¹¶å°†å¦‚ä¸‹å†…å®¹å†™è¿›/usr/lib/systemd/system/etcd.serviceæ–‡ä»¶&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ini&#34;&gt;[Unit]
Description=Etcd Server
After=network.target
After=network-online.target
Wants=network-online.target

[Service]
Type=notify
WorkingDirectory=/var/lib/etcd/
EnvironmentFile=-/etc/etcd/etcd.conf
User=etcd
# set GOMAXPROCS to number of processors
ExecStart=/bin/bash -c &amp;quot;GOMAXPROCS=$(nproc) /usr/bin/etcd --name=\&amp;quot;${ETCD_NAME}\&amp;quot; --data-dir=\&amp;quot;${ETCD_DATA_DIR}\&amp;quot; --listen-client-urls=\&amp;quot;${ETCD_LISTEN_CLIENT_URLS}\&amp;quot;&amp;quot;
Restart=on-failure
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨å¹¶æ ¡éªŒ&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;systemctl start etcd
systemctl enable etcd
systemctl status etcd
etcdctl ls
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é›†ç¾¤&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è‹¥è¦éƒ¨ç½²å¤šèŠ‚ç‚¹é›†ç¾¤ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåªè¦æ›´æ”¹etcd.confæ–‡ä»¶ä»¥åŠetcd.serviceæ·»åŠ ç›¸åº”é…ç½®å³å¯&lt;/p&gt;

&lt;p&gt;å¯ä»¥å‚è€ƒé“¾æ¥ï¼š&lt;a href=&#34;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/clustering.md&#34;&gt;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/clustering.md&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;å®‰è£…flannel&#34;&gt;å®‰è£…flannel&lt;/h3&gt;

&lt;p&gt;å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code&gt;yum install flannel&lt;/code&gt;å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºç½‘ç»œè¿™å—çš„é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘å°†åœ¨åç»­æ–‡ç« ä¸­è¯´æ˜ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å®‰è£…kubernetes&#34;&gt;å®‰è£…Kubernetes&lt;/h3&gt;

&lt;p&gt;æ ¹æ®ã€ŠKubernetesæƒå¨æŒ‡å—ï¼ˆç¬¬äºŒç‰ˆï¼‰ã€‹ä¸­çš„ä»‹ç»ï¼Œç›´æ¥ä½¿ç”¨GitHubä¸Šçš„releaseé‡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;wget https://github.com/kubernetes/kubernetes/releases/download/v1.6.0/kubernetes.tar.gz
tar kubernetes.tar.gz
cd kubernetes
./cluster/get-kube-binaries.sh
cd server
tar xvf kubernetes-server-linux-amd64.tar.gz
rm -f *_tag *.tar
chmod 755 *
mv * /usr/bin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®é™…ä¸‹è½½kubernetes-server-linux-amd64.tar.gz from &lt;a href=&#34;https://storage.googleapis.com/kubernetes-release/release/v1.6.0&#34;&gt;https://storage.googleapis.com/kubernetes-release/release/v1.6.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è§£å‹å®Œåè·å¾—çš„äºŒè¿›åˆ¶æ–‡ä»¶æœ‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cloud-controller-manager
hyperkube
kubeadm
kube-aggregator
kube-apiserver
kube-controller-manager
kubectl
kubefed
kubelet
kube-proxy
kube-scheduler
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;cluster/juju/layers/kubernetes-master/templates&lt;/code&gt;ç›®å½•ä¸‹æœ‰serviceå’Œç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶çš„æ¨¡æ¿ï¼Œè¿™ä¸ªæ¨¡æ¿æœ¬æ¥æ˜¯ä¸ºäº†ä½¿ç”¨&lt;a href=&#34;https://jujucharms.com/&#34;&gt;juju&lt;/a&gt;å®‰è£…å†™çš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;masterèŠ‚ç‚¹çš„é…ç½®&#34;&gt;MasterèŠ‚ç‚¹çš„é…ç½®&lt;/h4&gt;

&lt;p&gt;MasterèŠ‚ç‚¹éœ€è¦é…ç½®çš„kubernetesçš„ç»„ä»¶æœ‰ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;kube-apiserver&lt;/li&gt;
&lt;li&gt;kube-controller-manager&lt;/li&gt;
&lt;li&gt;kube-scheduler&lt;/li&gt;
&lt;li&gt;kube-proxy&lt;/li&gt;
&lt;li&gt;kubectl&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®kube-apiserver&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç¼–å†™&lt;code&gt;/usr/lib/systemd/system/kube-apiserver.service&lt;/code&gt;æ–‡ä»¶ã€‚&lt;a href=&#34;http://blog.csdn.net/yuesichiu/article/details/51485147&#34;&gt;CentOSä¸­çš„serviceé…ç½®æ–‡ä»¶å‚è€ƒ&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[Unit]
Description=Kubernetes API Service
Documentation=https://github.com/GoogleCloudPlatform/kubernetes
After=network.target
After=etcd.service

[Service]
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/apiserver
ExecStart=/usr/bin/kube-apiserver \
	    $KUBE_LOGTOSTDERR \
	    $KUBE_LOG_LEVEL \
	    $KUBE_ETCD_SERVERS \
	    $KUBE_API_ADDRESS \
	    $KUBE_API_PORT \
	    $KUBELET_PORT \
	    $KUBE_ALLOW_PRIV \
	    $KUBE_SERVICE_ADDRESSES \
	    $KUBE_ADMISSION_CONTROL \
	    $KUBE_API_ARGS
Restart=on-failure
Type=notify
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ›å»ºkubernetesçš„é…ç½®æ–‡ä»¶ç›®å½•&lt;code&gt;/etc/kubernetes&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ·»åŠ &lt;code&gt;config&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
# kubernetes system config
#
# The following values are used to configure various aspects of all
# kubernetes services, including
#
#   kube-apiserver.service
#   kube-controller-manager.service
#   kube-scheduler.service
#   kubelet.service
#   kube-proxy.service
# logging to stderr means we get it in the systemd journal
KUBE_LOGTOSTDERR=&amp;quot;--logtostderr=true&amp;quot;

# journal message level, 0 is debug
KUBE_LOG_LEVEL=&amp;quot;--v=0&amp;quot;

# Should this cluster be allowed to run privileged docker containers
KUBE_ALLOW_PRIV=&amp;quot;--allow-privileged=false&amp;quot;

# How the controller-manager, scheduler, and proxy find the apiserver
KUBE_MASTER=&amp;quot;--master=http://sz-pg-oam-docker-test-001.tendcloud.com:8080&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ·»åŠ &lt;code&gt;apiserver&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
## kubernetes system config
##
## The following values are used to configure the kube-apiserver
##
#
## The address on the local server to listen to.
KUBE_API_ADDRESS=&amp;quot;--address=sz-pg-oam-docker-test-001.tendcloud.com&amp;quot;
#
## The port on the local server to listen on.
KUBE_API_PORT=&amp;quot;--port=8080&amp;quot;
#
## Port minions listen on
KUBELET_PORT=&amp;quot;--kubelet-port=10250&amp;quot;
#
## Comma separated list of nodes in the etcd cluster
KUBE_ETCD_SERVERS=&amp;quot;--etcd-servers=http://127.0.0.1:2379&amp;quot;
#
## Address range to use for services
KUBE_SERVICE_ADDREKUBELET_POD_INFRA_CONTAINERSSES=&amp;quot;--service-cluster-ip-range=10.254.0.0/16&amp;quot;
#
## default admission control policies
KUBE_ADMISSION_CONTROL=&amp;quot;--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextDeny,ResourceQuota&amp;quot;
#
## Add your own!
#KUBE_API_ARGS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;â€”admission-control&lt;/code&gt;å‚æ•°æ˜¯Kubernetesçš„å®‰å…¨æœºåˆ¶é…ç½®ï¼Œè¿™äº›å®‰å…¨æœºåˆ¶éƒ½æ˜¯ä»¥æ’ä»¶çš„å½¢å¼ç”¨æ¥å¯¹API Serveè¿›è¡Œå‡†å…¥æ§åˆ¶ï¼Œä¸€å¼€å§‹æˆ‘ä»¬æ²¡æœ‰é…ç½®&lt;code&gt;ServiceAccount&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿é›†ç¾¤ä¹‹é—´çš„é€šä¿¡ï¼Œä¸éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœä½ éœ€è¦æ›´é«˜çº§çš„èº«ä»½éªŒè¯å’Œé‰´æƒçš„è¯å°±éœ€è¦åŠ ä¸Šå®ƒäº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®kube-controller-manager&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç¼–å†™&lt;code&gt;/usr/lib/systemd/system/kube-controller.service&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Ini&#34;&gt;Description=Kubernetes Controller Manager
Documentation=https://github.com/GoogleCloudPlatform/kubernetes

[Service]
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/controller-manager
ExecStart=/usr/bin/kube-controller-manager \
	    $KUBE_LOGTOSTDERR \
	    $KUBE_LOG_LEVEL \
	    $KUBE_MASTER \
	    $KUBE_CONTROLLER_MANAGER_ARGS
Restart=on-failure
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;/etc/kubernetes&lt;/code&gt;ç›®å½•ä¸‹æ·»åŠ &lt;code&gt;controller-manager&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
# The following values are used to configure the kubernetes controller-manager

# defaults from config and apiserver should be adequate

# Add your own!
KUBE_CONTROLLER_MANAGER_ARGS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®kube-scheduler&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç¼–å†™&lt;code&gt;/usr/lib/systemd/system/kube-scheduler.service&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[Unit]
Description=Kubernetes Scheduler Plugin
Documentation=https://github.com/GoogleCloudPlatform/kubernetes

[Service]
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/scheduler
ExecStart=/usr/bin/kube-scheduler \
	    $KUBE_LOGTOSTDERR \
	    $KUBE_LOG_LEVEL \
	    $KUBE_MASTER \
	    $KUBE_SCHEDULER_ARGS
Restart=on-failure
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;/etc/kubernetes&lt;/code&gt;ç›®å½•ä¸‹æ·»åŠ &lt;code&gt;scheduler&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
# kubernetes scheduler config

# default config should be adequate

# Add your own!
KUBE_SCHEDULER_ARGS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®kube-proxy&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç¼–å†™&lt;code&gt;/usr/lib/systemd/system/kube-proxy.service&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[Unit]
Description=Kubernetes Kube-Proxy Server
Documentation=https://github.com/GoogleCloudPlatform/kubernetes
After=network.target

[Service]
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/proxy
ExecStart=/usr/bin/kube-proxy \
	    $KUBE_LOGTOSTDERR \
	    $KUBE_LOG_LEVEL \
	    $KUBE_MASTER \
	    $KUBE_PROXY_ARGS
Restart=on-failure
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;/etc/kubernetes&lt;/code&gt;ç›®å½•ä¸‹æ·»åŠ &lt;code&gt;proxy&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
# kubernetes proxy config

# default config should be adequate

# Add your own!
KUBE_PROXY_ARGS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;é…ç½®kubelet&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç¼–å†™&lt;code&gt;/usr/lib/systemd/system/kubelet.service&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[Unit]
Description=Kubernetes Kubelet Server
Documentation=https://github.com/GoogleCloudPlatform/kubernetes
After=docker.service
Requires=docker.service

[Service]
WorkingDirectory=/var/lib/kubelet
EnvironmentFile=-/etc/kubernetes/config
EnvironmentFile=-/etc/kubernetes/kubelet
ExecStart=/usr/bin/kubelet \
	    $KUBE_LOGTOSTDERR \
	    $KUBE_LOG_LEVEL \
	    $KUBELET_API_SERVER \
	    $KUBELET_ADDRESS \
	    $KUBELET_PORT \
	    $KUBELET_HOSTNAME \
	    $KUBE_ALLOW_PRIV \
	    $KUBELET_POD_INFRA_CONTAINER \
	    $KUBELET_ARGS
Restart=on-failure

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨&lt;code&gt;/etc/kubernetes&lt;/code&gt;ç›®å½•ä¸‹æ·»åŠ &lt;code&gt;kubelet&lt;/code&gt;é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;###
## kubernetes kubelet (minion) config
#
## The address for the info server to serve on (set to 0.0.0.0 or &amp;quot;&amp;quot; for all interfaces)
KUBELET_ADDRESS=&amp;quot;--address=0.0.0.0&amp;quot;
#
## The port for the info server to serve on
KUBELET_PORT=&amp;quot;--port=10250&amp;quot;
#
## You may leave this blank to use the actual hostname
KUBELET_HOSTNAME=&amp;quot;--hostname-override=sz-pg-oam-docker-test-001.tendcloud.com&amp;quot;
#
## location of the api-server
KUBELET_API_SERVER=&amp;quot;--api-servers=http://sz-pg-oam-docker-test-001.tendcloud.com:8080&amp;quot;
#
## pod infrastructure container
KUBELET_POD_INFRA_CONTAINER=&amp;quot;--pod-infra-container-image=registry.access.redhat.com/rhel7/pod-infrastructure:latest&amp;quot;
#
## Add your own!
KUBELET_ARGS=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;âš ï¸&lt;code&gt;KUBELET_POD_INFRA_CONTAINER&lt;/code&gt;åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é…ç½®æˆè‡ªå·±ç§æœ‰ä»“åº“é‡Œçš„imageã€‚&lt;/p&gt;

&lt;h4 id=&#34;nodeèŠ‚ç‚¹é…ç½®&#34;&gt;NodeèŠ‚ç‚¹é…ç½®&lt;/h4&gt;

&lt;p&gt;NodeèŠ‚ç‚¹éœ€è¦é…ç½®ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;kube-proxy&lt;/li&gt;
&lt;li&gt;kubectl&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;kube-proxy&lt;/code&gt;çš„é…ç½®ä¸masterèŠ‚ç‚¹çš„kube-proxyé…ç½®ç›¸åŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;kubectl&lt;/code&gt;çš„é…ç½®éœ€è¦ä¿®æ”¹&lt;code&gt;KUBELET_HOST&lt;/code&gt;ä¸ºæœ¬æœºçš„hostnameï¼Œå…¶å®ƒé…ç½®ç›¸åŒã€‚&lt;/p&gt;

&lt;h1 id=&#34;å¯åŠ¨&#34;&gt;å¯åŠ¨&lt;/h1&gt;

&lt;p&gt;åœ¨&lt;strong&gt;Master&lt;/strong&gt;èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;for SERVICES in etcd kube-apiserver kube-controller-manager kube-scheduler kube-proxy kubelet flanneld; do
    systemctl restart $SERVICES
    systemctl enable $SERVICES
    systemctl status $SERVICES
done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨å¦å¤–ä¸¤å°NodeèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;for SERVICES in kube-proxy kubelet flanneld; do
    systemctl restart $SERVICES
    systemctl enable $SERVICES
    systemctl status $SERVICES
done
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;éªŒè¯&#34;&gt;éªŒè¯&lt;/h1&gt;

&lt;p&gt;åœ¨MasterèŠ‚ç‚¹ä¸Šè¿è¡Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$kubectl get all
NAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
svc/kubernetes   10.254.0.1   &amp;lt;none&amp;gt;        443/TCP   1h
$kubectl get nodes
NAME                                      STATUS    AGE       VERSION
sz-pg-oam-docker-test-001.tendcloud.com   Ready     7m        v1.6.0
sz-pg-oam-docker-test-002.tendcloud.com   Ready     4m        v1.6.0
sz-pg-oam-docker-test-003.tendcloud.com   Ready     10s       v1.6.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨å•¦ã€‚&lt;/p&gt;

&lt;h3 id=&#34;åè®°&#34;&gt;åè®°&lt;/h3&gt;

&lt;p&gt;å¦å¤–Kuberntesè¿˜æä¾›ç¬¬ä¸‰ä¸­å®‰è£…æ–¹å¼ï¼Œè¯·çœ‹Tony Baiå†™çš„&lt;a href=&#34;http://tonybai.com/2017/01/24/explore-kubernetes-cluster-installed-by-kubeadm/&#34;&gt;ä½¿ç”¨Kubeadmæ–¹å¼å®‰è£…Kubernetesé›†ç¾¤çš„æ¢ç´¢&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;æ—¶éš”ä¸€å¹´é‡æ–°æ¡èµ·kubernetesï¼Œæ­£å¥½ç°åœ¨KubeConæ­£åœ¨å¾·å›½æŸæ—ä¸¾è¡Œï¼ŒIDC å‘å¸ƒçš„æŠ¥å‘Šæ˜¾ç¤ºï¼Œ2017å¹´å¤§æ•°æ®å…¨çƒå¸‚åœºè§„æ¨¡å°†è¾¾324äº¿ç¾å…ƒï¼Œå¹´å¤åˆå¢é•¿ç‡ä¸º27%ï¼Œå…¶ä¸­å¸‚åœºå¢é•¿æœ€å¿«çš„é¢†åŸŸæ˜¯æ•°æ®å­˜å‚¨é¢†åŸŸï¼ˆ53.4%ï¼‰&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Pivotal Cloud foundryå¿«é€Ÿå¼€å§‹æŒ‡å—</title>
      <link>http://rootsongjc.github.io/blogs/cloud-foundry-tryout/</link>
      <pubDate>Thu, 23 Mar 2017 22:54:18 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/cloud-foundry-tryout/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/2013100302.jpg&#34; alt=&#34;é»„å±±æ—¥å‡º&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šé»„å±±æ—¥å‡ºåçš„äº‘æµ· Oct 3,2013ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘ç ”ç©¶äº†ä¸‹&lt;strong&gt;Pivotal&lt;/strong&gt;çš„&lt;strong&gt;Cloud foundry&lt;/strong&gt;ï¼ŒCFæœ¬èº«æ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œå¾ˆå¤šPAASå‚å•†éƒ½åŠ å…¥äº†CFï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯çš„&lt;strong&gt;PCF Dev&lt;/strong&gt;ï¼ˆPCF Devæ˜¯ä¸€æ¬¾å¯ä»¥åœ¨å·¥ä½œç«™ä¸Šè¿è¡Œçš„è½»é‡çº§PCFå®‰è£…ï¼‰æ¥è¯•ç”¨çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥éƒ¨ç½²åœ¨è‡ªå·±çš„ç¯å¢ƒé‡Œï¼Œè€Œ&lt;strong&gt;Pivotal Web Services&lt;/strong&gt;åªå…è´¹ä¸¤ä¸ªæœˆï¼Œä¹‹åå°±è¦æ”¶è´¹ã€‚&lt;a href=&#34;https://pivotal.io/cn/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/introduction&#34;&gt;è¿™é‡Œ&lt;/a&gt;æœ‰å®˜æ–¹çš„è¯¦ç»†æ•™ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¼€å§‹&#34;&gt;å¼€å§‹&lt;/h2&gt;

&lt;p&gt;æ ¹æ®å®˜ç½‘çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†è¿è¡Œä¸€ä¸ªJavaç¨‹åºç¤ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…å‘½ä»¤è¡Œç»ˆç«¯&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://pivotal.io/cn/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/install-the-cf-cli&#34;&gt;ä¸‹è½½&lt;/a&gt;ååŒå‡»å®‰è£…å³å¯ï¼Œç„¶åæ‰§è¡Œ&lt;code&gt;cf help&lt;/code&gt;èƒ½å¤Ÿçœ‹åˆ°å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å®‰è£…PCF Dev&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å…ˆ&lt;a href=&#34;https://network.pivotal.io/products/pcfdev&#34;&gt;ä¸‹è½½&lt;/a&gt;ï¼Œå¦‚æœä½ æ²¡æœ‰Pivotal networkè´¦å·çš„è¯ï¼Œè¿˜éœ€è¦æ³¨å†Œä¸ªç”¨æˆ·ï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;
$./pcfdev-VERSION-osx &amp;amp;&amp;amp; \
cf dev start
Less than 4096 MB of free memory detected, continue (y/N): &amp;gt; y
Please sign in with your Pivotal Network account.
Need an account? Join Pivotal Network: https://network.pivotal.io

Email&amp;gt; 849122844@qq.com

Password&amp;gt; 
Downloading VM...
Progress: |+++++++++++++=======&amp;gt;| 100% 
VM downloaded.
Allocating 4096 MB out of 16384 MB total system memory (3514 MB free).
Importing VM...
Starting VM...
Provisioning VM...
Waiting for services to start...
8 out of 57 running
8 out of 57 running
8 out of 57 running
46 out of 57 running
57 out of 57 running
 _______  _______  _______    ______   _______  __   __
|       ||       ||       |  |      | |       ||  | |  |
|    _  ||       ||    ___|  |  _    ||    ___||  |_|  |
|   |_| ||       ||   |___   | | |   ||   |___ |       |
|    ___||      _||    ___|  | |_|   ||    ___||       |
|   |    |     |_ |   |      |       ||   |___  |     |
|___|    |_______||___|      |______| |_______|  |___|
is now running.
To begin using PCF Dev, please run:
   cf login -a https://api.local.pcfdev.io --skip-ssl-validation
Apps Manager URL: https://local.pcfdev.io
Admin user =&amp;gt; Email: admin / Password: admin
Regular user =&amp;gt; Email: user / Password: pass
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨è¿‡ç¨‹ä¸­è¿˜éœ€è¦&lt;strong&gt;Sign In&lt;/strong&gt;ï¼Œæ‰€ä»¥æ³¨å†Œå®Œåè¦è®°ä½ç”¨æˆ·åï¼ˆé‚®ç®±åœ°å€ï¼‰å’Œå¯†ç ï¼ˆå¿…é¡»è¶…è¿‡8ä½è¦æœ‰ç‰¹æ®Šå­—ç¬¦å’Œå¤§å†™å­—æ¯ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜è¦ä¸‹è½½VMï¼Œå¯¹å†…å­˜è¦æ±‚è‡³å°‘4Gã€‚è€Œä¸”ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæˆ‘ä¸‹è½½çš„äº†å¤§æ¦‚3ä¸ªå¤šå°æ—¶å§ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢éƒ¨ç½²ä¸€ä¸ªåº”ç”¨åˆ°PCF Devä¸Šè¯•ä¸€è¯•ã€‚&lt;/p&gt;

&lt;h2 id=&#34;éƒ¨ç½²åº”ç”¨&#34;&gt;éƒ¨ç½²åº”ç”¨&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ä¸‹è½½ä»£ç &lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$git clone https://github.com/cloudfoundry-samples/spring-music
$cd ./spring-music
$cf login -a api.local.pcfdev.io --skip-ssl-validation
API endpoint: api.local.pcfdev.io

Email&amp;gt; user

Password&amp;gt; pass
Authenticating...
OK

Targeted org pcfdev-org

Targeted space pcfdev-space


                
API endpoint:   https://api.local.pcfdev.io (API version: 2.65.0)
User:           user
Org:            pcfdev-org
Space:          pcfdev-space
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ç¼–è¯‘åº”ç”¨&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨gradleæ¥ç¼–è¯‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$./gradlew assemble
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:findMainClass
:jar
:bootRepackage
Download https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.13/jersey-client-1.13.jar
Download https://repo1.maven.org/maven2/com/sun/jersey/jersey-json/1.13/jersey-json-1.13.jar
Download https://repo1.maven.org/maven2/org/apache/httpcomponents/httpcore/4.4.5/httpcore-4.4.5.jar
Download https://repo1.maven.org/maven2/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar
Download https://repo1.maven.org/maven2/com/google/code/gson/gson/2.3.1/gson-2.3.1.jar
Download https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.13/jersey-core-1.13.jar
Download https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-core-asl/1.9.2/jackson-core-asl-1.9.2.jar
Download https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-mapper-asl/1.9.2/jackson-mapper-asl-1.9.2.jar
Download https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-jaxrs/1.9.2/jackson-jaxrs-1.9.2.jar
Download https://repo1.maven.org/maven2/org/codehaus/jackson/jackson-xc/1.9.2/jackson-xc-1.9.2.jar
Download https://repo1.maven.org/maven2/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar
Download https://repo1.maven.org/maven2/org/apache/commons/commons-lang3/3.3.1/commons-lang3-3.3.1.jar
Download https://repo1.maven.org/maven2/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar
Download https://repo1.maven.org/maven2/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar
Download https://repo1.maven.org/maven2/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar
Download https://repo1.maven.org/maven2/stax/stax-api/1.0.1/stax-api-1.0.1.jar
Download https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.51/bcprov-jdk15on-1.51.jar
Download https://repo1.maven.org/maven2/javax/mail/mail/1.4.7/mail-1.4.7.jar
:assemble

BUILD SUCCESSFUL

Total time: 1 mins 25.649 secs

This build could be faster, please consider using the Gradle Daemon: https://docs.gradle.org/2.14/userguide/gradle_daemon.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä¸Šä¼ åº”ç”¨&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è®¾ç½®åº”ç”¨çš„ä¸»æœºåä¸ºspring-musicã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf push --hostname spring-music
Using manifest file /Users/jimmy/Workspace/github/cloudfoundry-samples/spring-music/manifest.yml

Creating app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

Creating route spring-music.local.pcfdev.io...
OK

Binding spring-music.local.pcfdev.io to spring-music...
OK

Uploading spring-music...
Uploading app files from: /var/folders/61/f7mqkyjn1nz5mfmfvdztgzjw0000gn/T/unzipped-app139680305
Uploading 38.9M, 234 files
Done uploading               
OK

Starting app spring-music in org pcfdev-org / space pcfdev-space as user...
Downloading dotnet-core_buildpack...
Downloading go_buildpack...
Downloading python_buildpack...
Downloading php_buildpack...
Downloading staticfile_buildpack...
Downloaded staticfile_buildpack
Downloading binary_buildpack...
Downloaded binary_buildpack (9.3K)
Downloading java_buildpack...
Downloaded java_buildpack (249.1M)
Downloaded dotnet-core_buildpack (169.3M)
Downloading ruby_buildpack...
Downloading nodejs_buildpack...
Downloaded python_buildpack (255.3M)
Downloaded nodejs_buildpack (109.4M)
Downloaded go_buildpack (392M)
Downloaded php_buildpack (310.4M)
Downloaded ruby_buildpack (260.8M)
Creating container
Successfully created container
Downloading app package...
Downloaded app package (38.8M)
Staging...
-----&amp;gt; Java Buildpack Version: v3.10 (offline) | https://github.com/cloudfoundry/java-buildpack.git#193d6b7
-----&amp;gt; Downloading Open Jdk JRE 1.8.0_111 from https://java-buildpack.cloudfoundry.org/openjdk/trusty/x86_64/openjdk-1.8.0_111.tar.gz (found in cache)
       Expanding Open Jdk JRE to .java-buildpack/open_jdk_jre (1.4s)
-----&amp;gt; Downloading Open JDK Like Memory Calculator 2.0.2_RELEASE from https://java-buildpack.cloudfoundry.org/memory-calculator/trusty/x86_64/memory-calculator-2.0.2_RELEASE.tar.gz (found in cache)
       Memory Settings: -Xss349K -Xmx681574K -XX:MaxMetaspaceSize=104857K -Xms681574K -XX:MetaspaceSize=104857K
-----&amp;gt; Downloading Spring Auto Reconfiguration 1.10.0_RELEASE from https://java-buildpack.cloudfoundry.org/auto-reconfiguration/auto-reconfiguration-1.10.0_RELEASE.jar (found in cache)
Exit status 0
Staging complete
Uploading droplet, build artifacts cache...
Uploading build artifacts cache...
Uploading droplet...
Uploaded build artifacts cache (108B)
Uploaded droplet (83.9M)
Uploading complete
Destroying container
Successfully destroyed container

0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
1 of 1 instances running

App started


OK

App spring-music was started using this command `CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-2.0.2_RELEASE -memorySizes=metaspace:64m..,stack:228k.. -memoryWeights=heap:65,metaspace:10,native:15,stack:10 -memoryInitials=heap:100%,metaspace:100% -stackThreads=300 -totMemory=$MEMORY_LIMIT) &amp;amp;&amp;amp; JAVA_OPTS=&amp;quot;-Djava.io.tmpdir=$TMPDIR -XX:OnOutOfMemoryError=$PWD/.java-buildpack/open_jdk_jre/bin/killjava.sh $CALCULATED_MEMORY&amp;quot; &amp;amp;&amp;amp; SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher`

Showing health and status for app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

requested state: started
instances: 1/1
usage: 1G x 1 instances
urls: spring-music.local.pcfdev.io
last uploaded: Thu Mar 23 14:29:46 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state     since                    cpu      memory       disk             details
#0   running   2017-03-23 10:31:36 PM   160.7%   442M of 1G   165.6M of 512M
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;åœ¨æµè§ˆå™¨ä¸­è®¿é—®app&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;spring-music.local.pcfdev.io&#34;&gt;spring-music.local.pcfdev.io&lt;/a&gt;é¡µé¢å¦‚å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/pivotal-cloudfoundry-spring-music.jpg&#34; alt=&#34;spring-music&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;requested state: started
instances: 1/1
usage: 512M x 1 instances
urls: spring-music.local.pcfdev.io
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;æŸ¥çœ‹æ—¥å¿—&#34;&gt;æŸ¥çœ‹æ—¥å¿—&lt;/h2&gt;

&lt;p&gt;PCFæä¾›åº”ç”¨çš„æ—¥å¿—èšåˆåŠŸèƒ½ï¼Œä½ å¯ä»¥æŸ¥çœ‹HTTPè¯·æ±‚ã€å¯¹åº”ç”¨æ“ä½œæ—¶å€™çš„outputï¼Œå¦‚æ‰©å®¹ã€é‡å¯ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;æ¯è¡Œæ—¥å¿—ä¸­éƒ½åŒ…æ‹¬å¦‚ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Timestamp&lt;/li&gt;
&lt;li&gt;Log type&lt;/li&gt;
&lt;li&gt;Channel&lt;/li&gt;
&lt;li&gt;Message&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æŸ¥çœ‹åˆšæ‰é‚£ä¸ªåº”ç”¨çš„æ—¥å¿—ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹æœ€è¿‘è¾“å‡ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf logs spring-music --recent
2017-03-23T22:34:05.17+0800 [RTR/0]      OUT spring-music.local.pcfdev.io - [23/03/2017:14:34:05.163 +0000] &amp;quot;GET /templates/albumForm.html HTTP/1.1&amp;quot; 200 0 2518 &amp;quot;http://spring-music.local.pcfdev.io/&amp;quot; &amp;quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.98 Safari/537.36&amp;quot; 192.168.11.1:52097 10.0.2.15:60012 x_forwarded_for:&amp;quot;-&amp;quot; x_forwarded_proto:&amp;quot;http&amp;quot; vcap_request_id:c6b5f34d-bc5a-4c66-77aa-cb768b273f21 response_time:0.007390127 app_id:fdc7a43e-61b8-40e9-b1dc-38b858037da9 app_index:0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æŸ¥çœ‹å®æ—¶è¾“å‡ºæµï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf logs spring-music
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;è¿æ¥æ•°æ®åº“&#34;&gt;è¿æ¥æ•°æ®åº“&lt;/h2&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ä¸­ç”¨çš„æ˜¯å†…å­˜æ•°æ®åº“ã€‚æˆ‘ä»¬å¯ä»¥æ”¹ç”¨mysqlæ•°æ®åº“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹å¯ç”¨çš„æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf marketplace -s p-mysql
Getting service plan information for service p-mysql as user...
OK

service plan   description            free or paid
512mb          PCF Dev MySQL Server   free
1gb            PCF Dev MySQL Server   free
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf create-service p-mysql 512mb my-spring-db
Creating service instance my-spring-db in org pcfdev-org / space pcfdev-space as user...
OK
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°†å®ƒä¸æˆ‘ä»¬ä¸Šé¢çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºç»‘å®šã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf bind-service spring-music my-spring-db
Binding service my-spring-db to app spring-music in org pcfdev-org / space pcfdev-space as user...
OK
TIP: Use &#39;cf restage spring-music&#39; to ensure your env variable changes take effect
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‡å¯app&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf restart spring-music
Stopping app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

Starting app spring-music in org pcfdev-org / space pcfdev-space as user...

0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
1 of 1 instances running

App started


OK

App spring-music was started using this command `CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-2.0.2_RELEASE -memorySizes=metaspace:64m..,stack:228k.. -memoryWeights=heap:65,metaspace:10,native:15,stack:10 -memoryInitials=heap:100%,metaspace:100% -stackThreads=300 -totMemory=$MEMORY_LIMIT) &amp;amp;&amp;amp; JAVA_OPTS=&amp;quot;-Djava.io.tmpdir=$TMPDIR -XX:OnOutOfMemoryError=$PWD/.java-buildpack/open_jdk_jre/bin/killjava.sh $CALCULATED_MEMORY&amp;quot; &amp;amp;&amp;amp; SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher`

Showing health and status for app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

requested state: started
instances: 1/1
usage: 1G x 1 instances
urls: spring-music.local.pcfdev.io
last uploaded: Thu Mar 23 14:29:46 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state     since                    cpu      memory         disk             details
#0   running   2017-03-23 10:44:18 PM   150.4%   461.6M of 1G   165.6M of 512M
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬å†æŸ¥çœ‹ä¸‹è‡ªå·±çš„serviceã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf services
Getting services in org pcfdev-org / space pcfdev-space as user...
OK

name           service   plan    bound apps     last operation
my-spring-db   p-mysql   512mb   spring-music   create succeeded
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;åº”ç”¨æ‰©å®¹&#34;&gt;åº”ç”¨æ‰©å®¹&lt;/h2&gt;

&lt;p&gt;æ‰©å±•åº”ç”¨çš„ç¤ºä¾‹æ•°ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf scale spring-music -i 2
Scaling app spring-music in org pcfdev-org / space pcfdev-space as user...
OK
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†æŸ¥çœ‹ä¸‹&lt;code&gt;spring-music&lt;/code&gt;åº”ç”¨çš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf app spring-music
Showing health and status for app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

requested state: started
instances: 2/2
usage: 1G x 2 instances
urls: spring-music.local.pcfdev.io
last uploaded: Thu Mar 23 14:29:46 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state      since                    cpu    memory         disk             details
#0   running    2017-03-23 10:44:18 PM   0.5%   451.4M of 1G   165.6M of 512M
#1   starting   2017-03-23 10:46:19 PM   0.0%   348.3M of 1G   165.6M of 512M

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿˜å¯ä»¥å¯¹å†…å­˜è¿›è¡Œæ‰©å®¹ã€‚è¿™ä¸ªæ“ä½œä¼šé‡å¯åº”ç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf scale spring-music -m 1G
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
1 of 2 instances running, 1 down

App started


OK

App spring-music was started using this command `CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-2.0.2_RELEASE -memorySizes=metaspace:64m..,stack:228k.. -memoryWeights=heap:65,metaspace:10,native:15,stack:10 -memoryInitials=heap:100%,metaspace:100% -stackThreads=300 -totMemory=$MEMORY_LIMIT) &amp;amp;&amp;amp; JAVA_OPTS=&amp;quot;-Djava.io.tmpdir=$TMPDIR -XX:OnOutOfMemoryError=$PWD/.java-buildpack/open_jdk_jre/bin/killjava.sh $CALCULATED_MEMORY&amp;quot; &amp;amp;&amp;amp; SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher`

Showing health and status for app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

requested state: started
instances: 1/2
usage: 1G x 2 instances
urls: spring-music.local.pcfdev.io
last uploaded: Thu Mar 23 14:29:46 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state     since                    cpu      memory         disk             details
#0   running   2017-03-23 10:48:43 PM   145.1%   412.2M of 1G   165.6M of 512M
#1   down      2017-03-23 10:48:14 PM   0.7%     436.2M of 1G   165.6M of 512M   insufficient resources: memory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿˜å¯ä»¥å¢åŠ åº”ç”¨çš„ç£ç›˜å¤§å°ã€‚è¿™ä¸ªæ“ä½œä¹Ÿä¼šé‡å¯åº”ç”¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$cf scale spring-music -k 512M
This will cause the app to restart. Are you sure you want to scale spring-music?&amp;gt; y

Scaling app spring-music in org pcfdev-org / space pcfdev-space as user...
OK
Stopping app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

Starting app spring-music in org pcfdev-org / space pcfdev-space as user...

0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
0 of 2 instances running, 1 starting, 1 down
1 of 2 instances running, 1 down

App started


OK

App spring-music was started using this command `CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-2.0.2_RELEASE -memorySizes=metaspace:64m..,stack:228k.. -memoryWeights=heap:65,metaspace:10,native:15,stack:10 -memoryInitials=heap:100%,metaspace:100% -stackThreads=300 -totMemory=$MEMORY_LIMIT) &amp;amp;&amp;amp; JAVA_OPTS=&amp;quot;-Djava.io.tmpdir=$TMPDIR -XX:OnOutOfMemoryError=$PWD/.java-buildpack/open_jdk_jre/bin/killjava.sh $CALCULATED_MEMORY&amp;quot; &amp;amp;&amp;amp; SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher`

Showing health and status for app spring-music in org pcfdev-org / space pcfdev-space as user...
OK

requested state: started
instances: 1/2
usage: 1G x 2 instances
urls: spring-music.local.pcfdev.io
last uploaded: Thu Mar 23 14:29:46 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state     since                    cpu      memory         disk             details
#0   running   2017-03-23 10:50:57 PM   130.8%   376.2M of 1G   165.6M of 512M
#1   down      2017-03-23 10:50:32 PM   0.6%     438.5M of 1G   165.6M of 512M   insufficient resources: memory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»ä¸Šé¢çš„æ“ä½œä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿ç»­æ€§ç‰¹åˆ«å¼ºï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½å¯ä»¥åœ¨å‡ ç§’é’Ÿå†…å®Œæˆï¼Œç‰¹åˆ«é€‚åˆ&lt;strong&gt;å¾®æœåŠ¡&lt;/strong&gt;çš„éƒ¨ç½²å’Œ&lt;strong&gt;Cloud Native&lt;/strong&gt; APPã€‚&lt;/p&gt;

&lt;p&gt;å…³äº&lt;strong&gt;Pivotal Cloud Foundry&lt;/strong&gt;çš„æ›´å¤šæ–‡æ¡£å¯ä»¥è®¿é—®ï¼š&lt;a href=&#34;https://pivotal.io/cn/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/next-steps&#34;&gt;https://pivotal.io/cn/platform/pcf-tutorials/getting-started-with-pivotal-cloud-foundry-dev/next-steps&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬äºŒç« TensorFlowç¯å¢ƒæ­å»º</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-02/</link>
      <pubDate>Thu, 23 Mar 2017 19:34:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-02/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20140810002.jpg&#34; alt=&#34;å¹¿å·æµ·ç æ¡¥&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šå¹¿å·æµ·ç æ¡¥ Aug 10,2014ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘é˜…è¯»&lt;a href=&#34;caicloud.io&#34;&gt;æ‰äº‘ç§‘æŠ€&lt;/a&gt;éƒ‘æ³½å®‡çš„ã€ŠTensorFlowå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹çš„è¯»ä¹¦ç¬”è®°ç³»åˆ—æ–‡ç« ï¼ŒæŒ‰ç…§æ–‡ç« çš„ç« èŠ‚é¡ºåºæ¥å†™çš„ã€‚æ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨&lt;a href=&#34;http://rootsongjc.github.io/tags/tensorflow-practice-reading-notes/&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;P.S æœ¬ä¹¦çš„&lt;strong&gt;å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰&lt;/strong&gt;å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨&lt;a href=&#34;rootsongjc.github.io/about&#34;&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚&lt;/p&gt;

&lt;p&gt;ç‡å®Œè¿™ä¸€ç« ååº”è¯¥å°±å¯ä»¥è‡ªå·±æ­å»ºå‡ºä¸€ä¸ªTensorFlowçš„ç¯å¢ƒï¼Œæˆ‘ä¹‹å‰åœ¨dockeré‡Œç©è¿‡ï¼Œé•œåƒæ¯”è¾ƒå¤§ï¼Œä¸‹è½½æ…¢ä¸€ç‚¹ï¼Œä¸è¿‡ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå¦‚æœä½ ä»…ä»…æ˜¯æƒ³è¯•ç”¨ä¸€ä¸‹TensorFlowï¼Œçœ‹çœ‹å®ƒèƒ½å¹²ä»€ä¹ˆçš„è¯ï¼Œå¯ä»¥ç›´æ¥åœ¨dockeré‡Œè¯•ç”¨ä¸€ä¸‹ã€‚åœ¨Macä¸Šå®‰è£…çš„è¯¦ç»†æ­¥éª¤ï¼Œ&lt;a href=&#34;https://www.tensorflow.org/install/install_mac&#34;&gt;å®˜æ–¹å®‰è£…è¯´æ˜æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;2-1-tensorflowçš„ä¸»è¦ä¾èµ–åŒ…&#34;&gt;2.1 TensorFlowçš„ä¸»è¦ä¾èµ–åŒ…&lt;/h2&gt;

&lt;p&gt;TensorFlowä¸»è¦ç”¨åˆ°ä»¥ä¸‹ä¸¤ä¸ªä¾èµ–ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developers.google.com/protocol-buffers/&#34;&gt;Protocol buffer&lt;/a&gt;ï¼šæ•°æ®ç»“æ„åŒ–å·¥å…·ã€‚Googleå¼€æºçš„ç»“æ„åŒ–æ•°æ®æ ¼å¼ï¼Œç”¨äºç½‘ç»œä¼ è¾“æ•°æ®æ—¶å€™çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦å…ˆå®šä¹‰schemaï¼Œgithubåœ°å€&lt;a href=&#34;https://github.com/google/protobufã€‚åˆ†å¸ƒå¼TensorFlowä½¿ç”¨åˆ°é¢gRPCä¹Ÿæ˜¯ä½¿ç”¨Protocol&#34;&gt;https://github.com/google/protobufã€‚åˆ†å¸ƒå¼TensorFlowä½¿ç”¨åˆ°é¢gRPCä¹Ÿæ˜¯ä½¿ç”¨Protocol&lt;/a&gt; Bufferæ¥ç»„ç»‡çš„ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bazel.build/&#34;&gt;Bazel&lt;/a&gt;:è‡ªåŠ¨åŒ–ç¼–è¯‘æ„å»ºå·¥å…·ã€‚Googleå¼€æºçš„ï¼Œgithubåœ°å€&lt;a href=&#34;https://github.com/bazelbuild/bazelï¼Œå®ƒæ”¯æŒå¤šè¯­è¨€ã€å¤šå¹³å°ã€å¯é‡å¤ç¼–è¯‘å’Œå¯ä¼¸ç¼©ï¼Œæ„å»ºå¤§å‹è½¯ä»¶é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ã€‚Bazelä½¿ç”¨**é¡¹ç›®ç©ºé—´**çš„å½¢å¼ç®¡ç†ç¼–è¯‘çš„ï¼Œæ¯ä¸ªé¡¹ç›®ç©ºé—´éœ€è¦åŒ…å«[BUILDæ–‡ä»¶](https://github.com/tensorflow/tensorflow/blob/master/bower.BUILD)ï¼ˆå®šä¹‰ç¼–è¯‘ç›®æ ‡ï¼‰å’Œ[WORKSPACE](https://github.com/tensorflow/tensorflow/blob/master/WORKSPACE)æ–‡ä»¶ï¼ˆå®šä¹‰ç¼–è¯‘çš„ä¾èµ–ç¯å¢ƒï¼‰ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æœ‰ç‚¹ç±»ä¼¼pythonè¯­æ³•ã€‚&#34;&gt;https://github.com/bazelbuild/bazelï¼Œå®ƒæ”¯æŒå¤šè¯­è¨€ã€å¤šå¹³å°ã€å¯é‡å¤ç¼–è¯‘å’Œå¯ä¼¸ç¼©ï¼Œæ„å»ºå¤§å‹è½¯ä»¶é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ã€‚Bazelä½¿ç”¨**é¡¹ç›®ç©ºé—´**çš„å½¢å¼ç®¡ç†ç¼–è¯‘çš„ï¼Œæ¯ä¸ªé¡¹ç›®ç©ºé—´éœ€è¦åŒ…å«[BUILDæ–‡ä»¶](https://github.com/tensorflow/tensorflow/blob/master/bower.BUILD)ï¼ˆå®šä¹‰ç¼–è¯‘ç›®æ ‡ï¼‰å’Œ[WORKSPACE](https://github.com/tensorflow/tensorflow/blob/master/WORKSPACE)æ–‡ä»¶ï¼ˆå®šä¹‰ç¼–è¯‘çš„ä¾èµ–ç¯å¢ƒï¼‰ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æœ‰ç‚¹ç±»ä¼¼pythonè¯­æ³•ã€‚&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;2-2-tensorflowå®‰è£…&#34;&gt;2.2 TensorFlowå®‰è£…&lt;/h2&gt;

&lt;p&gt;TensorFlowçš„å®‰è£…æ–¹å¼åŒ…æ‹¬dockeré•œåƒã€pipå®‰è£…ã€æºç ç¼–è¯‘å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;u&gt;æˆ‘é€‰æ‹©æœ€æ–¹ä¾¿çš„dockeré•œåƒæ–¹å¼&lt;/u&gt;ï¼Œå…¶ä»–æ–¹å¼å¯¹æœ¬åœ°ç¯å¢ƒåšå¾ˆå¤šé…ç½®ï¼ŒæŠ˜è…¾èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘æ—©å°±åœ¨dockerä¸­å®‰è£…è¿‡TensorFlow0.9å°è¯•è¿‡ç‰›åˆ€ã€‚ç°åœ¨&lt;a href=&#34;https://github.com/tensorflow/tensorflow/releases&#34;&gt;1.0.1ç‰ˆæœ¬&lt;/a&gt;å·²ç»releasedäº†ã€‚TensorFlowçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æœ‰å¯¹åº”çš„dockeré•œåƒå‘å¸ƒåœ¨&lt;a href=&#34;https://hub.docker.com/r/tensorflow/tensorflow/tags/&#34;&gt;docker hub&lt;/a&gt;ï¼Œå¯ä»¥ç›´æ¥&lt;code&gt;docker pull&lt;/code&gt;å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†å’Œä¹¦ä¸­æ‰€ç”¨çš„é•œåƒä¿æŒç»Ÿä¸€ï¼Œæˆ‘å°†ä½¿ç”¨caicloudæä¾›çš„é•œåƒï¼ŒåŸºäºTensorFlow0.12.0ï¼ˆè¿™ä¸ªç‰ˆæœ¬æ˜¯2016å¹´12æœˆ20æ—¥å‘å¸ƒçš„ï¼‰ï¼Œä»–ä»¬å¢åŠ äº†ä¸€äº›å…¶ä»–æœºå™¨å­¦ä¹ å·¥å…·åŒ…å’ŒTensorFlowå¯è§†åŒ–å·¥å…·TensorBoardã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;dockeré•œåƒæ–¹å¼å®‰è£…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆä¸‹è½½é•œåƒï¼Œè¿™ä¸ªimageæ¯”è¾ƒå¤§ï¼Œä¸‹è½½ä¸‹æ¥æ¯”è¾ƒè´¹æ—¶é—´ï¼Œæˆ‘ç”¨äº†å·®ä¸å¤š15åˆ†é’Ÿå§ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;docker pull cargo.caicloud.io/tensorflow/tensorflow:0.12.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹è½½ä¸‹æ¥åæˆ‘ä»¬å†checkä¸‹è¿™ä¸ªå¤§å°ä¸º&lt;strong&gt;1.41GB&lt;/strong&gt;é•œåƒçš„layersã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–è¿˜æœ‰ä¸ª&lt;a href=&#34;https://github.com/NVIDIA/nvidia-docker&#34;&gt;&lt;strong&gt;nvidia&lt;/strong&gt;ç‰ˆæœ¬çš„docker&lt;/a&gt;ï¼Œå¯ä»¥å°†ä½ ç”µè„‘çš„&lt;strong&gt;GPU&lt;/strong&gt;æ´¾å±±ç”¨åœºï¼Œæˆ‘æš‚æ—¶æ²¡ç”¨åˆ°GPUï¼Œæˆ‘ç”µè„‘è£…çš„æ˜¯&lt;code&gt;docker17.03-ce&lt;/code&gt;ï¼Œå°±ä¸æŠ˜è…¾GPUç‰ˆæœ¬çš„TensorFlowäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
c8a8409297f2        5 weeks ago         /bin/sh -c #(nop)  CMD [&amp;quot;/run_tf.sh&amp;quot;]           0 B                 
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c #(nop) COPY file:78332d36244852...   122 B               
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c #(nop) COPY dir:8b6ab7d235e3975...   21 MB               
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c #(nop) COPY dir:fca915671040399...   360 MB              
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c #(nop) COPY dir:69314aa937be649...   89.9 kB             
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c rm -rf /notebooks/*                  0 B                 
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c pip install caicloud.tensorflow      21.4 MB             
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c pip install -U scikit-learn          39.9 kB             
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c apt-get update &amp;amp;&amp;amp; apt-get insta...   23.9 MB             
&amp;lt;missing&amp;gt;           5 weeks ago         /bin/sh -c #(nop)  ENV LANG=C.UTF-8             0 B                 
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop)  CMD [&amp;quot;/run_jupyter.sh&amp;quot;]      0 B                 
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop)  WORKDIR /notebooks           0 B                 
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop)  EXPOSE 8888/tcp              0 B                 
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop)  EXPOSE 6006/tcp              0 B                 
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop) COPY file:5485384c641ba7...   733 B               
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop) COPY dir:388d24701b3b5bc...   400 kB              
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop) COPY file:822af972b63c44...   1.06 kB             
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c pip --no-cache-dir install http...   191 MB              
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c pip --no-cache-dir install     ...   379 MB              
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c curl -O https://bootstrap.pypa....   11.4 MB             
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c apt-get update &amp;amp;&amp;amp; apt-get insta...   212 MB              
&amp;lt;missing&amp;gt;           3 months ago        /bin/sh -c #(nop)  MAINTAINER Craig Citro ...   0 B                 
&amp;lt;missing&amp;gt;           9 months ago        /bin/sh -c #(nop) CMD [&amp;quot;/bin/bash&amp;quot;]             0 B                 
&amp;lt;missing&amp;gt;           9 months ago        /bin/sh -c sed -i &#39;s/^#\s*\(deb.*universe\...   1.9 kB              
&amp;lt;missing&amp;gt;           9 months ago        /bin/sh -c rm -rf /var/lib/apt/lists/*          0 B                 
&amp;lt;missing&amp;gt;           9 months ago        /bin/sh -c set -xe   &amp;amp;&amp;amp; echo &#39;#!/bin/sh&#39; &amp;gt;...   195 kB              
&amp;lt;missing&amp;gt;           9 months ago        /bin/sh -c #(nop) ADD file:aca501360d0937b...   188 MB 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªåŸºäº&lt;strong&gt;Ubuntu&lt;/strong&gt;çš„docker imageï¼Œè¿™å…¶ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ª&lt;strong&gt;Jupyter notebook&lt;/strong&gt;å’Œä¸€äº›python packagesã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨&lt;code&gt;docker image history â€”no-trunc $IMAGE_ID&lt;/code&gt;å‘½ä»¤å¯ä»¥çœ‹åˆ°æ¯ä¸€å±‚çš„è¯¦ç»†ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¯åŠ¨TensorFlow&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ç›´æ¥åœ¨dockerä¸­å¯åŠ¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-Shell&#34;&gt;docker run -it -d -p 8888:8888 -p 6006:6006 --name tf-dev cargo.caicloud.io/tensorflow/tensorflow:0.12.0 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯åŠ¨åè¿›å…¥&lt;code&gt;localhost:8888&lt;/code&gt;é¡µé¢ï¼Œå‘ç°ç™»é™†jupyterå±…ç„¶è¿˜è¦è¾“å…¥å¯†ç ï¼Œä¹¦ä¸­æ²¡è¯´è¦è¾“å…¥å¯†ç å•Šï¼Œä¹Ÿæ²¡è¯´å¯†ç æ˜¯ä»€ä¹ˆï¼Œå¯†ç åœ¨å“ªé‡Œå‘¢ï¼Ÿ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;å¦‚ä½•è·å–Jupyterçš„ç™»å½•å¯†ç ä¹¦ä¸­æ²¡æœ‰ä»‹ç»ã€‚å…¶å®æ²¡å¿…è¦ä¿®æ”¹é•œåƒæ´»ç€è¿›å…¥å®¹å™¨ä¸­éœ€é’™jupyterçš„é…ç½®ï¼Œç›´æ¥æŸ¥çœ‹åˆšå¯åŠ¨çš„&lt;code&gt;tf-dev&lt;/code&gt;å®¹å™¨çš„æ—¥å¿—å³å¯ï¼Œé‡Œé¢åŒ…å«äº†ç™»å½•å¯†ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;docker logs tf-dev
[I 10:52:46.200 NotebookApp] Writing notebook server cookie secret to /root/.local/share/jupyter/runtime/notebook_cookie_secret
[W 10:52:46.244 NotebookApp] WARNING: The notebook server is listening on all IP addresses and not using encryption. This is not recommended.
[I 10:52:46.267 NotebookApp] Serving notebooks from local directory: /notebooks
[I 10:52:46.267 NotebookApp] 0 active kernels 
[I 10:52:46.267 NotebookApp] The Jupyter Notebook is running at: http://[all ip addresses on your system]:8888/?token=e64afc31eec843717733d6e4527aecf833ce18383214dc47
[I 10:52:46.267 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
Starting TensorBoard 39 on port 6006
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;çœ‹åˆ°äº†å—ï¼Œ&lt;code&gt;tf-dev&lt;/code&gt;å®¹å™¨çš„æ—¥å¿—è¾“å‡ºé‡Œå°±åŒ…æ‹¬äº†å¯†ç ï¼Œæˆ‘çš„å®¹å™¨çš„jupyterçš„å¯†ç æ˜¯&lt;strong&gt;tokenåé¢çš„é‚£ä¸ªå­—ç¬¦ä¸²&lt;/strong&gt;e64afc31eec843717733d6e4527aecf833ce18383214dc47ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨ç”¨åˆšæ‰ä»æ—¥å¿—é‡Œçœ‹åˆ°çš„å¯†ç å°±å¯ä»¥ç™»å½•äº†ï¼ŒJupyteré¡µé¢ä¸Šå¯ä»¥çœ‹åˆ°æœ¬ä¹¦æ‰€æœ‰ç« èŠ‚çš„ä»£ç äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-practice-chapter2-jupyter-web.jpg&#34; alt=&#34;jupyteré¡µé¢&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨pipå®‰è£…&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦å¤–æˆ‘åœ¨macä¸Šä¹Ÿç”¨pipæ–¹å¼å®‰è£…äº†ã€‚æˆ‘å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆçš„1.0.1çš„CPU-onlyï¼ŒåŠ ä¸Š&lt;code&gt;â€”user -U&lt;/code&gt;æ˜¯ä¸ºäº†è§„é¿macä¸Šçš„å„ç§æƒé™é—®é¢˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;pip install --upgrade tensorflow --user -U
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸‹è½½çš„æ•´ä¸ªè½¯ä»¶åŒ…åªæœ‰39.3MBï¼Œé€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>TensorFlowå®æˆ˜ï¼ˆæ‰äº‘éƒ‘æ³½å®‡è‘—ï¼‰è¯»ä¹¦ç¬”è®°â€”â€”ç¬¬ä¸€ç« æ·±åº¦å­¦ä¹ ç®€ä»‹</title>
      <link>http://rootsongjc.github.io/blogs/tensorflow-practice-01/</link>
      <pubDate>Mon, 20 Mar 2017 22:04:33 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/tensorflow-practice-01/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/tensorflow-book-page.jpg&#34; alt=&#34;tensorflowå®æˆ˜å›¾ä¹¦å°é¢&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ï¼ˆé¢˜å›¾ï¼šTensofFlowå®æˆ˜å›¾ä¹¦å°é¢ï¼‰&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ğŸ™ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾ç¼–è¾‘èµ ä¹¦ï¼Œèƒ½å¤Ÿè¿™ä¹ˆå¿«çš„æ‹¿åˆ°è¿™æœ¬ä¹¦ï¼Œä¹ŸğŸ™&lt;a href=&#34;www.caicloud.io&#34;&gt;æ‰äº‘ç§‘æŠ€&lt;/a&gt;çš„éƒ‘æ³½å®‡å¤§å“¥è€å¿ƒçš„å†™äº†è¿™æœ¬ä¹¦ï¼Œèƒ½å¤Ÿè®©æˆ‘ç­‰å°ç™½ä¸€çª¥æ·±åº¦å­¦ä¹ çš„çœŸå®¹ã€‚å¦å¤–è¦å¼ºçƒˆæ¨èä¸‹è¿™æœ¬ä¹¦ï¼Œè¿™æ˜¯æœ¬TensorFlowæ·±åº¦å­¦ä¹ å¾ˆå¥½çš„å…¥é—¨ä¹¦ã€‚ä¹¦ä¸­æä¾›çš„ä»£ç &lt;a href=&#34;https://github.com/caicloud/tensorflow-tutorial&#34;&gt;ä¸‹è½½åœ°å€&lt;/a&gt;ï¼Œæ•´æœ¬ä¹¦çš„ç¬”è®°å½’æ¡£åœ¨&lt;a href=&#34;http://rootsongjc.github.io/tags/tensorflow-practice-reading-notes&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;P.S æœ¬ä¹¦çš„&lt;strong&gt;å®˜æ–¹è¯»è€…äº¤æµå¾®ä¿¡ç¾¤ï¼ˆä½œè€…ä¹Ÿåœ¨ç¾¤é‡Œï¼‰&lt;/strong&gt;å·²ç»è¶…è¿‡100äººï¼Œæ‚¨å¯ä»¥å…ˆåŠ æˆ‘å¾®ä¿¡åæˆ‘æ‹‰æ‚¨è¿›å»ï¼Œæˆ‘çš„äºŒç»´ç åœ¨&lt;a href=&#34;rootsongjc.github.io/about&#34;&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œæˆ–è€…ç›´æ¥æœç´¢æˆ‘çš„å¾®ä¿¡å·jimmysongã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-1-äººå·¥æ™ºèƒ½-æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ &#34;&gt;1.1 äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹ &lt;/h2&gt;

&lt;p&gt;è¿™ä¸€èŠ‚æ˜¯è®²è§£ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆä»¥&lt;strong&gt;åƒåœ¾é‚®ä»¶åˆ†ç±»é—®é¢˜&lt;/strong&gt;å¼•å…¥æœºå™¨å­¦ä¹ çš„&lt;strong&gt;é€»è¾‘å›å½’ç®—æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é€»è¾‘å›å½’ç®—æ³•çš„å‡†ç¡®æ€§å–å†³äºè®­ç»ƒæ•°æ®ä¸­çš„ç‰¹å¾çš„æå–ï¼Œä»¥åŠè®­ç»ƒçš„æ•°æ®æ•°é‡ã€‚&lt;/p&gt;

&lt;p&gt;æ–‡ç« ä¸­åˆæäº†ä¸€ä¸ªä»å®ä½“ä¸­æå–ç‰¹å¾çš„ä¾‹å­ï¼šé€šè¿‡ç¬›å¡å°”åæ ‡ç³»æ´»æè§’åæ ‡ç³»æ¥è¡¨ç¤ºä¸åŒé¢œè‰²çš„ç‚¹ï¼Œçœ‹çœ‹èƒ½å¦ç”¨ä¸€æ¡ç›´çº¿åˆ’åˆ†ã€‚è¿™ä¸ªä¾‹å­ç”¨æ¥è¯´æ˜&lt;strong&gt;ä¸€æ—¦è§£å†³äº†æ•°æ®è¡¨è¾¾å’Œç‰¹å¾æå–ï¼Œå¾ˆå¤šäººå·¥æ™ºèƒ½çš„é—®é¢˜å°±èƒ½è¿åˆƒè€Œè§£&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œé™¤äº†èƒ½å¤Ÿå­¦ä¹ ç‰¹å¾å’Œä»»åŠ¡ä¹‹é—´çš„å…³è”ä¹‹å¤–ï¼Œè¿˜èƒ½&lt;strong&gt;è‡ªåŠ¨ä»ç®€å•ç‰¹å¾ä¸­æå–æ›´åŠ å¤æ‚çš„ç‰¹å¾&lt;/strong&gt;ï¼Œè¿™æ˜¯å…¶åŒºåˆ«äºæœºå™¨å­¦ä¹ çš„å…³é”®ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œäººå·¥æ™ºèƒ½&amp;gt;æœºå™¨å­¦ä¹ &amp;gt;æ·±åº¦å­¦ä¹ ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-2æ·±åº¦å­¦ä¹ çš„å‘å±•å†ç¨‹&#34;&gt;1.2æ·±åº¦å­¦ä¹ çš„å‘å±•å†ç¨‹&lt;/h2&gt;

&lt;p&gt;æœ¬èŠ‚ä»‹ç»äº†æ·±åº¦ç½‘ç»œå†å²çš„ä¸‰ä¸ªå‘å±•é˜¶æ®µã€‚&lt;/p&gt;

&lt;p&gt;2012å¹´çš„&lt;strong&gt;ImageNet&lt;/strong&gt;å›¾åƒåˆ†ç±»ç«èµ›ä¸Šï¼Œæ·±åº¦å­¦ä¹ ç³»ç»Ÿ&lt;strong&gt;AlexNet&lt;/strong&gt;èµ¢å¾—å† å†›ï¼Œè‡ªæ­¤æ·±åº¦å­¦ä¹ ä½œä¸ºæ·±å±‚ç¥ç»ç½‘ç»œçš„ä»£åè¯è€Œè¢«äººç†ŸçŸ¥ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-3æ·±åº¦å­¦ä¹ çš„åº”ç”¨&#34;&gt;1.3æ·±åº¦å­¦ä¹ çš„åº”ç”¨&lt;/h2&gt;

&lt;p&gt;è¿™ä¸€èŠ‚è®²çš„æ˜¯æ·±åº¦å­¦ä¹ çš„åº”ç”¨ï¼Œé¦–å…ˆè¿˜æ˜¯ä»ImageNetçš„å›¾åƒè¯†åˆ«å¼€å§‹ï¼Œåº”ç”¨åˆ°äº†OCRï¼ˆæåˆ°äº†å·ç§¯ç¥ç»ç½‘ç»œï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆæåˆ°äº†æ··åˆæé«˜æ–¯æ¨¡å‹ï¼‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆæåˆ°äº†è¯­æ–™åº“ã€å•è¯å‘é‡ã€æœºå™¨ç¿»è¯‘ã€æƒ…æ„Ÿåˆ†æï¼‰ã€äººæœºå¯¹å¼ˆï¼ˆæåˆ°äº†AlphaGOï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&#34;1-4-æ·±åº¦å­¦ä¹ å·¥å…·ä»‹ç»ä¸å¯¹æ¯”&#34;&gt;1.4 æ·±åº¦å­¦ä¹ å·¥å…·ä»‹ç»ä¸å¯¹æ¯”&lt;/h2&gt;

&lt;p&gt;TensorFlowçš„æ¸Šæºæ˜¯Googleå¤§è„‘å›¢é˜Ÿåœ¨2011å¹´å¼€å‘ï¼Œåœ¨å†…éƒ¨ä½¿ç”¨çš„&lt;strong&gt;DistBelief&lt;/strong&gt;ï¼Œå¹¶èµ¢å¾—äº†ImageNet 2014å¹´çš„æ¯”èµ›ï¼ŒTFæ˜¯å…¶å¼€æºç‰ˆæœ¬ï¼Œè¿˜å‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡&lt;code&gt;TensorFlow: Large-Scale Machine Learning on Heteogeneous Distributed systems&lt;/code&gt;ï¼Œè¿™å°±è·Ÿå½“å¹´çš„&lt;strong&gt;HDFS&lt;/strong&gt;ã€&lt;strong&gt;MapReduce&lt;/strong&gt;ä¸€ä¸ªå¥—è·¯å•Šã€‚&lt;/p&gt;

&lt;p&gt;Googleè¿˜æŠŠå®ƒç”¨æ¥åš&lt;strong&gt;RankBrain&lt;/strong&gt;å’Œå¾ˆå¤šå…¶ä»–çš„äº§å“çº¿ä¸Šä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ·±åº¦å­¦ä¹ å·¥å…·ï¼Œæ¯”å¦‚&lt;strong&gt;Caffe&lt;/strong&gt;ã€&lt;strong&gt;Deeplearning4j&lt;/strong&gt;ã€&lt;strong&gt;Torch&lt;/strong&gt;ç­‰ä¸ä¸€è€Œè¶³ã€‚ä»å„ç§æŒ‡æ ‡æ¥çœ‹ï¼ŒTensorFlowéƒ½æ˜¯ç›®å‰æœ€å—å…³æ³¨çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Dockeræºç åˆ†æç¬¬ä¸€ç¯‡â€”â€”ä»£ç ç»“æ„</title>
      <link>http://rootsongjc.github.io/blogs/docker-source-code-analysis-code-structure/</link>
      <pubDate>Sun, 19 Mar 2017 23:00:29 +0800</pubDate>
      
      <guid>http://rootsongjc.github.io/blogs/docker-source-code-analysis-code-structure/</guid>
      <description>

&lt;p&gt;&lt;img src=&#34;http://olz1di9xf.bkt.clouddn.com/20151001042.jpg&#34; alt=&#34;å…«è¾¾å²­é•¿åŸ&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;(é¢˜å›¾ï¼šåŒ—äº¬å…«è¾¾å²­é•¿åŸ  Oct 1,2015)&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;ä¹‹å‰é™†é™†ç»­ç»­çœ‹è¿‡ä¸€ç‚¹&lt;strong&gt;docker&lt;/strong&gt;çš„æºç ï¼Œéƒ½æœªæˆä½“ç³»ï¼Œæœ€è¿‘åœ¨ç ”ç©¶&lt;strong&gt;Docker-17.03-CE&lt;/strong&gt;ï¼Œè¶æ­¤æœºä¼šç ”ç©¶ä¸‹dockerçš„æºç ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›ç›¸å…³èµ„æ–™ï¼Œéƒ½æ¯”è¾ƒè¿‡æ—¶äº†ï¼Œå‘ç°*å­™å®äº®*å¤§å“¥å†™è¿‡ä¸€æœ¬ä¹¦å«ã€ŠDockeræºç åˆ†æã€‹ï¼Œè€Œä¸”ä¹‹å‰ä¹Ÿåœ¨&lt;strong&gt;InfoQ&lt;/strong&gt;ä¸Šé™†ç»­å‘è¿‡ä¸€äº›æ–‡ç« ï¼Œè™½ç„¶æ–‡ç« éƒ½æ¯”è¾ƒè€äº†ï¼ŒåŸºäºè€çš„dockerç‰ˆæœ¬ï¼Œä½†æˆ‘è®¤ä¸ºä¾ç„¶æœ‰é˜…è¯»çš„ä»·å€¼ã€‚èµ·ç èƒ½æœ‰è¿™ä¸‰æ–¹é¢æ”¶è·ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä¸€æ˜¯åŸ¹å…»é˜…è¯»æºç çš„æ€ç»´æ–¹å¼ï¼Œä¸ºè‡ªå·±é˜…è¯»dockeræºç æä¾›å€Ÿé‰´ã€‚&lt;/li&gt;
&lt;li&gt;äºŒæ˜¯å¯ä»¥äº†è§£dockerç‰ˆæœ¬çš„æ¥é¾™å»è„‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰è¿˜å¯ä»¥ä½œä¸ºGoè¯­è¨€é¡¹ç›®å¼€å‘ä½œä¸ºå€Ÿé‰´ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;ä¸‹è½½åœ°å€&#34;&gt;ä¸‹è½½åœ°å€&lt;/h3&gt;

&lt;p&gt;é‰´äºè¿™æœ¬ä¹¦å·²ç»å‘è¡Œä¸€å¹´åŠäº†äº†ï¼ŒåŸºäºçš„dockerç‰ˆæœ¬è¿˜æ˜¯&lt;strong&gt;1.2.0&lt;/strong&gt;ï¼Œè€Œå¦‚ä»Šéƒ½åˆ°äº†&lt;strong&gt;1.13.0&lt;/strong&gt;ï¼ˆdocker17.03çš„è€ç‰ˆæœ¬å·ï¼‰ï¼Œåº”è¯¥å¾ˆå°‘æœ‰äººä¹°äº†å§ï¼Œå¯ä»¥è¯´è¿™æœ¬ä¹¦çš„çº¸è´¨ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå·®ä¸å¤šäº†å§ã€‚å¦‚æœæœ‰äººæ„Ÿå…´è¶£å¯ä»¥ä¸‹è½½pdfç‰ˆæœ¬çœ‹çœ‹ï¼Œ&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/Docker%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%AD%99%E5%AE%8F%E4%BA%AE%E8%91%97.pdf&#34;&gt;Dockeræºç è§£æ-æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾-å­™å®äº®è‘—-2015å¹´8æœˆ&lt;/a&gt;ï¼ˆå®Œæ•´æ–‡å­—ç‰ˆï¼Œå¤§å°25.86Mï¼‰ï¼Œ&lt;a href=&#34;http://olz1di9xf.bkt.clouddn.com/Docker%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E5%AD%99%E5%AE%8F%E4%BA%AE-%E7%9C%8B%E4%BA%91%E7%89%88.pdf&#34;&gt;Dockeræºç è§£æ-çœ‹äº‘æ•´ç†ç‰ˆ&lt;/a&gt;ï¼ˆæ–‡å­—ç‰ˆï¼Œæœ‰ç¼©ç•¥ï¼Œå¤§å°7.62Mï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&#34;out-of-date&#34;&gt;Out-of-date&lt;/h2&gt;

&lt;p&gt;æœ‰ä¸€ç‚¹å¿…é¡»å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œè¿™æœ¬ä¹¦ä¸­çš„dockeræºç åˆ†ææ˜¯åŸºäº&lt;strong&gt;docker1.2.0&lt;/strong&gt;ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬çš„dockeræºç åœ¨githubä¸Šå·²ç»æ— æ³•ä¸‹è½½åˆ°äº†ï¼Œgithubä¸Šavailableçš„æœ€ä½ç‰ˆæœ¬çš„dockeræºç æ˜¯&lt;strong&gt;1.4.1&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;é¡ºä¾¿æ„Ÿå¹ä¸€å¥ï¼Œç§‘æŠ€è¡Œä¸šå‘å±•å®åœ¨å¤ªå¿«äº†ï¼Œå°¤å…¶æ˜¯äº’è”ç½‘ï¼Œä¸€æœ¬ä¹¦èƒ½è¿ç»­ç”¨ä¸Šä¸‰å¹´éƒ½ä¸è¿‡æ—¶ï¼Œå¦‚æœè¿™æ ·çš„è¯é‚£ä¹ˆè¿™é—¨æŠ€æœ¯ææ€•éƒ½å°±è¦è¢«æ·˜æ±°äº†å§ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;æ€»ä½“æ¶æ„&#34;&gt;æ€»ä½“æ¶æ„&lt;/h2&gt;

&lt;p&gt;Dockeræ€»ä½“ä¸Šæ˜¯ç”¨çš„æ˜¯&lt;strong&gt;Client/Server&lt;/strong&gt;æ¨¡å¼ï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½å¯ä»¥é€šè¿‡RESTfulæ¥å£ä¼ é€’ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä¸ªDockerè½¯ä»¶çš„æ¶æ„ä¸­å¯ä»¥åˆ†æˆä¸‰ä¸ªè§’è‰²ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Daemon&lt;/strong&gt;ï¼šå¸¸é©»åå°è¿è¡Œçš„è¿›ç¨‹ï¼Œæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç®¡ç†dockerå®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Clien&lt;/strong&gt;tï¼šå‘½ä»¤è¡Œç»ˆç«¯ï¼ŒåŒ…è£…å‘½ä»¤å‘é€APIè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Engine&lt;/strong&gt;ï¼šçœŸæ­£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„åç«¯ç¨‹åºã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ä»£ç ç»“æ„&#34;&gt;ä»£ç ç»“æ„&lt;/h2&gt;

&lt;p&gt;Dockerçš„ä»£ç ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼Œåˆ†æˆçš„ç›®å½•æ¯”è¾ƒå¤šï¼Œæœ‰ä»¥ä¸‹è¿™äº›ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;api&lt;/strong&gt;ï¼šå®šä¹‰APIï¼Œä½¿ç”¨äº†&lt;strong&gt;Swagger2.0&lt;/strong&gt;è¿™ä¸ªå·¥å…·æ¥ç”ŸæˆAPIï¼Œé…ç½®æ–‡ä»¶åœ¨&lt;code&gt;api/swagger.yaml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;builder&lt;/strong&gt;ï¼šç”¨æ¥build dockeré•œåƒçš„åŒ…ï¼Œçœ‹æ¥å†å²æ¯”è¾ƒæ‚ ä¹…äº†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bundles&lt;/strong&gt;ï¼šè¿™ä¸ªåŒ…æ˜¯åœ¨è¿›è¡Œ&lt;a href=&#34;http://rootsongjc.github.io/blogs/docker-dev-env/&#34;&gt;dockeræºç ç¼–è¯‘å’Œå¼€å‘ç¯å¢ƒæ­å»º&lt;/a&gt;çš„æ—¶å€™ç”¨åˆ°çš„ï¼Œç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cli&lt;/strong&gt;ï¼šä½¿ç”¨&lt;a href=&#34;http://www.github.com/spf13/cobra&#34;&gt;cobra&lt;/a&gt;å·¥å…·ç”Ÿæˆçš„dockerå®¢æˆ·ç«¯å‘½ä»¤è¡Œè§£æå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;client&lt;/strong&gt;ï¼šæ¥æ”¶&lt;code&gt;cli&lt;/code&gt;çš„è¯·æ±‚ï¼Œè°ƒç”¨RESTful APIä¸­çš„æ¥å£ï¼Œå‘serverç«¯å‘é€httpè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cmd&lt;/strong&gt;ï¼šå…¶ä¸­åŒ…æ‹¬&lt;code&gt;docker&lt;/code&gt;å’Œ&lt;code&gt;dockerd&lt;/code&gt;ä¸¤ä¸ªåŒ…ï¼Œä»–ä»¬åˆ†åˆ«åŒ…å«äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„mainå‡½æ•°å…¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;container&lt;/strong&gt;ï¼šå®¹å™¨çš„é…ç½®ç®¡ç†ï¼Œå¯¹ä¸åŒçš„platformé€‚é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;contrib&lt;/strong&gt;ï¼šè¿™ä¸ªç›®å½•åŒ…æ‹¬ä¸€äº›æœ‰ç”¨çš„è„šæœ¬ã€é•œåƒå’Œå…¶ä»–édocker coreä¸­çš„éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;daemon&lt;/strong&gt;ï¼šè¿™ä¸ªåŒ…ä¸­å°†docker deamonè¿è¡Œæ—¶çŠ¶æ€exposeå‡ºæ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;distribution&lt;/strong&gt;ï¼šè´Ÿè´£dockeré•œåƒçš„pullã€pushå’Œé•œåƒä»“åº“çš„ç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;dockerversion&lt;/strong&gt;ï¼šç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;docs&lt;/strong&gt;ï¼šæ–‡æ¡£ã€‚è¿™ä¸ªç›®å½•å·²ç»ä¸å†ç»´æŠ¤ï¼Œæ–‡æ¡£åœ¨å¦ä¸€ä¸ªä»“åº“é‡Œ&lt;a href=&#34;https://github.com/docker/docker.github.io/ã€‚&#34;&gt;https://github.com/docker/docker.github.io/ã€‚&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;experimental&lt;/strong&gt;ï¼šä»docker1.13.0ç‰ˆæœ¬èµ·å¼€å§‹å¢åŠ äº†å®éªŒç‰¹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;hack&lt;/strong&gt;ï¼šåˆ›å»ºdockerå¼€å‘ç¯å¢ƒå’Œç¼–è¯‘æ‰“åŒ…æ—¶ç”¨åˆ°çš„è„šæœ¬å’Œé…ç½®æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;image&lt;/strong&gt;ï¼šç”¨äºæ„å»ºdockeré•œåƒçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;integration-cli&lt;/strong&gt;ï¼šé›†æˆæµ‹è¯•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;layer&lt;/strong&gt;ï¼šç®¡ç† union file system driverä¸Šçš„read-onlyå’Œread-write mountsã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;libcontainerd&lt;/strong&gt;ï¼šè®¿é—®å†…æ ¸ä¸­çš„å®¹å™¨ç³»ç»Ÿè°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;man&lt;/strong&gt;ï¼šç”Ÿæˆman pagesã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;migrate&lt;/strong&gt;ï¼šå°†è€ç‰ˆæœ¬çš„graphç›®å½•è½¬æ¢æˆæ–°çš„metadataã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;oci&lt;/strong&gt;ï¼šOpen Container Interfaceåº“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;opts&lt;/strong&gt;ï¼šå‘½ä»¤è¡Œçš„é€‰é¡¹åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pkg&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;plugin&lt;/strong&gt;ï¼šdockeræ’ä»¶åç«¯å®ç°åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;profiles&lt;/strong&gt;ï¼šé‡Œé¢æœ‰apparmorå’Œseccompä¸¤ä¸ªç›®å½•ã€‚ç”¨äºå†…æ ¸è®¿é—®æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;project&lt;/strong&gt;ï¼šé¡¹ç›®ç®¡ç†çš„ä¸€äº›è¯´æ˜æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;reference&lt;/strong&gt;ï¼šå¤„ç†docker storeä¸­é•œåƒçš„referenceã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;registry&lt;/strong&gt;ï¼šdocker registryçš„å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;restartmanager&lt;/strong&gt;ï¼šå¤„ç†é‡å¯åçš„åŠ¨ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;runconfig&lt;/strong&gt;ï¼šé…ç½®æ ¼å¼è§£ç å’Œæ ¡éªŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;vendor&lt;/strong&gt;ï¼šå„ç§ä¾èµ–åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;volume&lt;/strong&gt;ï¼šdocker volumeçš„å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹ä¸€ç¯‡å°†è®²è§£dockerçš„å„ä¸ªåŠŸèƒ½æ¨¡å—å’ŒåŸç†ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>