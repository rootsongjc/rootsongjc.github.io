(()=>{var t={above_result:"提示：结果数量超过 10 条后不再显示。",blog:"博客",book:"资料",no_results:"没有找到相关内容",notice:"通知",placeholder:"请输入搜索词",results:"个相关搜索结果"},o={indexURI:"/index.json.gz",minLength:1,threshold:.3},n={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:o.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:o.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},i=10,s=null;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function e(e,t){let s=$("#search-query").val();if(s.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!e&&s.length<n.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(s,t);let o=`${window.location.protocol}//${window.location.host}${window.location.pathname}?q=${encodeURIComponent(s)}${window.location.hash}`;r(o)}function c(e,n){let s=n.search(e).slice(0,i);s.length>0?(l(e,s),s.length>=10?$("#search-hits").append('<p class="mt-0 search-hit-title">'+t.above_result+"</p>"):$("#search-hits").append('<p class="mt-0 search-hit-title">'+s.length+" "+t.results+"</p>")):$("#search-hits").append('<div class="search-no-results">'+t.no_results+"</div>")}function l(e,n){$.each(n,function(n,s){let o=s.item.section,i=s.item.summary||"",a=t[o]||o,r=$("#search-hit-fuse-template").html(),c={key:n,title:s.item.title,date:d(s.item.date),relpermalink:s.item.relpermalink,snippet:i,section:a},l=u(r,c);$("#search-hits").append(l),$("#summary-"+n).mark(e)})}function d(e){let t=new Date(e),n=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return`${n}-${s}-${o}`}function u(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&(fetch(o.indexURI).then(e=>e.arrayBuffer()).then(t=>{let r=pako.inflate(t,{to:"string"});s=JSON.parse(r);let o=new Fuse(s,n),i=a("q");i&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(i),$("#search-query").focus(),e(!0,o)),$("#search-query").keyup(function(t){clearTimeout($.data(this,"searchTimer")),t.keyCode==13?e(!0,o):$(this).data("searchTimer",setTimeout(function(){e(!1,o)},250))})}),$("#search-query").keyup(function(t){clearTimeout($.data(this,"searchTimer")),t.keyCode==13?e(!0,new Fuse(s,n)):$(this).data("searchTimer",setTimeout(function(){e(!1,new Fuse(s,n))},250))}))})()