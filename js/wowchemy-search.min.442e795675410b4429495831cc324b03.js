(()=>{var o={notice:"",post:"博客"},e={above_result:"提示：结果数量超过 10 条后不再显示。",no_results:"没有找到相关内容",placeholder:"请输入搜索词",results:"个相关搜索结果"},t={indexURI:"/index.json",minLength:1,threshold:.3},s={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:t.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:t.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},i=10;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function n(e,t){let n=$("#search-query").val();if(n.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!e&&n.length<s.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(n,t);let o=`${window.location.protocol}//${window.location.host}${window.location.pathname}?q=${encodeURIComponent(n)}${window.location.hash}`;r(o)}function c(t,n){let s=n.search(t).slice(0,i);console.log("result len:"+s.length),s.length>0?(l(t,s),s.length>=10?$("#search-hits").append('<p class="mt-0 search-hit-title">'+e.above_result+"</p>"):$("#search-hits").append('<p class="mt-0 search-hit-title">'+s.length+" "+e.results+"</p>")):$("#search-hits").append('<div class="search-no-results">'+e.no_results+"</div>")}function l(e,t){$.each(t,function(t,n){let s=n.item.section,i=n.item.summary||"",a=$("#search-hit-fuse-template").html(),r={key:t,title:n.item.title,type:o[s]||s,relpermalink:n.item.relpermalink,snippet:i},c=d(a,r);$("#search-hits").append(c),$("#summary-"+t).mark(e)})}function d(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&$.getJSON(t.indexURI,function(e){let t=new Fuse(e,s),o=a("q");o&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(o),$("#search-query").focus(),n(!0,t)),$("#search-query").keyup(function(e){clearTimeout($.data(this,"searchTimer")),e.keyCode==13?n(!0,t):$(this).data("searchTimer",setTimeout(function(){n(!1,t)},250))})})})()