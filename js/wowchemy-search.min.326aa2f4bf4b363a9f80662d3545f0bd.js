(()=>{var s={above_result:"Tip: If the number of results exceeds 10, it will not be displayed.",blog:"Blog",book:"Book",no_results:"search no result",notice:"Notice",placeholder:"Input the keyword",results:"search results"},o={indexURI:"https://jimmysong.io/search-index/en/index.json.gz",minLength:1,threshold:.3},t={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:o.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:o.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},i=30,n=null;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function e(e,n){let s=$("#search-query").val(),o=$('input[name="search_type"]:checked').val();if(s.length<1){$("#search-hits").empty(),$("#search-common-queries").show();return}if(!e&&s.length<t.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(s,n,o);let i=`${window.location.protocol}//${window.location.host}${window.location.pathname}?q=${encodeURIComponent(s)}${window.location.hash}`;r(i)}function c(e,t,n){let o=t.search(e).slice(0,i);o=o.filter(e=>n==="all"||e.item.section===n),o.length>0?($("#search-hits").empty(),$("#search-hits").append('<p class="mt-0 search-hit mb-0"><mark data-markjs="true">'+o.length+"</mark> "+s.results+"</p>"),l(e,o)):($("#search-hits").empty(),$("#search-hits").append('<div class="search-no-results">'+s.no_results+"</div>"))}function l(e,t){$.each(t,function(t,n){let o=n.item.section,i=n.item.summary||"",a=s[o]||o,r=$("#search-hit-fuse-template").html(),c={key:t,title:n.item.title,date:d(n.item.date),relpermalink:n.item.relpermalink,snippet:i,section:a},l=u(r,c);$("#search-hits").append(l),$("#summary-"+t).mark(e)})}function d(e){let t=new Date(e),n=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return`${n}-${s}-${o}`}function u(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&(fetch(o.indexURI).then(e=>e.arrayBuffer()).then(s=>{let r=pako.inflate(s,{to:"string"});n=JSON.parse(r);let o=new Fuse(n,t),i=a("q");i&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(i),$("#search-query").focus(),e(!0,o)),$("#search-query").keyup(function(t){clearTimeout($.data(this,"searchTimer")),t.keyCode==13?e(!0,o):$(this).data("searchTimer",setTimeout(function(){e(!1,o)},250))}),$('input[type="radio"][name="search_type"]').change(function(){e(!0,new Fuse(n,t))})}),$("#search-query").keyup(function(s){clearTimeout($.data(this,"searchTimer")),s.keyCode==13?e(!0,new Fuse(n,t)):$(this).data("searchTimer",setTimeout(function(){e(!1,new Fuse(n,t))},250))}))})()