(()=>{var o={notice:"",post:"\u535A\u5BA2"},i={no_results:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9",placeholder:"\u8F93\u5165\u641C\u7D22\u8BCD",results:"\u4E2A\u76F8\u5173\u641C\u7D22\u7ED3\u679C"},n={indexURI:"/index.json",minLength:1,threshold:.3},s={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:n.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:n.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},e=100;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function t(e,t){let n=$("#search-query").val();if(n.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!e&&n.length<s.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(n,t);let o=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+encodeURIComponent(n)+window.location.hash;r(o)}function c(e,t){let n=t.search(e);n.length>0?($("#search-hits").append('<p class="mt-0 hits-title">'+n.length+" "+i.results+"</p>"),l(e,n)):$("#search-hits").append('<div class="search-no-results">'+i.no_results+"</div>")}function l(t,n){$.each(n,function(n,i){let a=i.item.section,r="",c="",l=[];["publication","event"].includes(a)?r=i.item.summary:r=i.item.content,s.tokenize?l.push(t):$.each(i.matches,function(t,n){if(n.key=="content"){let t=n.indices[0][0]-e>0?n.indices[0][0]-e:0,s=n.indices[0][1]+e<r.length?n.indices[0][1]+e:r.length;c+=r.substring(t,s),l.push(n.value.substring(n.indices[0][0],n.indices[0][1]-n.indices[0][0]+1))}}),c.length<1&&(c+=i.item.summary);let u=$("#search-hit-fuse-template").html();a in o&&(a=o[a]);let h={key:n,title:i.item.title,type:a,relpermalink:i.item.relpermalink,snippet:c},m=d(u,h);$("#search-hits").append(m),$.each(l,function(e,t){$("#summary-"+n).mark(t)})})}function d(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&$.getJSON(n.indexURI,function(e){let n=new Fuse(e,s),o=a("q");o&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(o),$("#search-query").focus(),t(!0,n)),$("#search-query").keyup(function(e){clearTimeout($.data(this,"searchTimer")),e.keyCode==13?t(!0,n):$(this).data("searchTimer",setTimeout(function(){t(!1,n)},250))})})})()