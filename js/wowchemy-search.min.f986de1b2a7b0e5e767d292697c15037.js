(()=>{var o={notice:"",post:"\u535A\u5BA2"},i={no_results:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9",placeholder:"\u8F93\u5165\u641C\u7D22\u8BCD",results:"\u641C\u7D22\u7ED3\u679C"},n={indexURI:"/index.json",minLength:1,threshold:.3},s={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:n.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:n.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},e=100;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function t(t,n){let e=$("#search-query").val();if(e.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!t&&e.length<s.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(e,n);let o=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+encodeURIComponent(e)+window.location.hash;r(o)}function c(t,n){let e=n.search(t);e.length>0?($("#search-hits").append('<p class="mt-0 hits-title">'+e.length+" "+i.results+"</p>"),l(t,e)):$("#search-hits").append('<div class="search-no-results">'+i.no_results+"</div>")}function l(t,n){$.each(n,function(l,n){let i=n.item.section,a="",r="",c=[];["publication","event"].includes(i)?a=n.item.summary:a=n.item.content,s.tokenize?c.push(t):$.each(n.matches,function(n,t){if(t.key=="content"){let n=t.indices[0][0]-e>0?t.indices[0][0]-e:0,s=t.indices[0][1]+e<a.length?t.indices[0][1]+e:a.length;r+=a.substring(n,s),c.push(t.value.substring(t.indices[0][0],t.indices[0][1]-t.indices[0][0]+1))}}),r.length<1&&(r+=n.item.summary);let u=$("#search-hit-fuse-template").html();i in o&&(i=o[i]);let h={key:l,title:n.item.title,type:i,permalink:n.item.permalink,snippet:r},m=d(u,h);$("#search-hits").append(m),$.each(c,function(t,e){$("#summary-"+l).mark(e)})})}function d(e,n){let t,s,o;for(t in n)s="\\{\\{\\s*"+t+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,n[t]);return e}typeof Fuse=="function"&&$.getJSON(n.indexURI,function(o){let e=new Fuse(o,s),n=a("q");n&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(n),$("#search-query").focus(),t(!0,e)),$("#search-query").keyup(function(n){clearTimeout($.data(this,"searchTimer")),n.keyCode==13?t(!0,e):$(this).data("searchTimer",setTimeout(function(){t(!1,e)},250))})})})()