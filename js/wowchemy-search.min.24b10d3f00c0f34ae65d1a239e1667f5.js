(()=>{var o={notice:"",post:"博客"},i={no_results:"没有找到相关内容",placeholder:"输入搜索词",results:"个相关搜索结果"},t={indexURI:"/index.json",minLength:1,threshold:.3},n={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:t.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:t.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"content",weight:.2}]},e=100;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function s(e,t){let s=$("#search-query").val();if(s.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!e&&s.length<n.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(s,t);let o=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+encodeURIComponent(s)+window.location.hash;r(o)}function c(e,t){let n=t.search(e);n.length>0?($("#search-hits").append('<p class="mt-0 hits-title">'+n.length+" "+i.results+"</p>"),l(e,n)):$("#search-hits").append('<div class="search-no-results">'+i.no_results+"</div>")}function l(t,s){$.each(s,function(s,i){let a=i.item.section,r="",c="",l=[];["publication","event"].includes(a)?r=i.item.summary:r=i.item.content,n.tokenize?l.push(t):$.each(i.matches,function(t,n){if(n.key=="content"){let t=n.indices[0][0]-e>0?n.indices[0][0]-e:0,s=n.indices[0][1]+e<r.length?n.indices[0][1]+e:r.length;c+=r.substring(t,s),l.push(n.value.substring(n.indices[0][0],n.indices[0][1]-n.indices[0][0]+1))}}),c.length<1&&(c+=i.item.summary);let u=$("#search-hit-fuse-template").html();a in o&&(a=o[a]);let h={key:s,title:i.item.title,type:a,relpermalink:i.item.relpermalink,snippet:c},m=d(u,h);$("#search-hits").append(m),$.each(l,function(e,t){$("#summary-"+s).mark(t)})})}function d(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&$.getJSON(t.indexURI,function(e){let t=new Fuse(e,n),o=a("q");o&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(o),$("#search-query").focus(),s(!0,t)),$("#search-query").keyup(function(e){clearTimeout($.data(this,"searchTimer")),e.keyCode==13?s(!0,t):$(this).data("searchTimer",setTimeout(function(){s(!1,t)},250))})})})()